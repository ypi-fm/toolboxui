var xse=Object.create;var y1=Object.defineProperty;var Cz=Object.getOwnPropertyDescriptor;var wse=Object.getOwnPropertyNames;var _se=Object.getPrototypeOf,Cse=Object.prototype.hasOwnProperty;var Sz=t=>{throw TypeError(t)};var Sse=(t,e,i)=>e in t?y1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var Ez=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),br=(t,e)=>{for(var i in e)y1(t,i,{get:e[i],enumerable:!0})},Ese=(t,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of wse(e))!Cse.call(t,n)&&n!==i&&y1(t,n,{get:()=>e[n],enumerable:!(r=Cz(e,n))||r.enumerable});return t};var kz=(t,e,i)=>(i=t!=null?xse(_se(t)):{},Ese(e||!t||!t.__esModule?y1(i,"default",{value:t,enumerable:!0}):i,t));var Ct=(t,e,i,r)=>{for(var n=r>1?void 0:r?Cz(e,i):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(r?o(e,i,n):o(n))||n);return r&&n&&y1(e,i,n),n};var de=(t,e,i)=>Sse(t,typeof e!="symbol"?e+"":e,i),Az=(t,e,i)=>e.has(t)||Sz("Cannot "+i);var Mw=(t,e,i)=>(Az(t,e,"read from private field"),i?i.call(t):e.get(t)),D6=(t,e,i)=>e.has(t)?Sz("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),M6=(t,e,i,r)=>(Az(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i);var EI=Ez((WIe,SI)=>{"use strict";var Ioe=/("(?:[^\\"]|\\.)*")|[:,]/g;SI.exports=function(e,i){var r,n,s;return i=i||{},r=JSON.stringify([1],void 0,i.indent===void 0?2:i.indent).slice(2,-3),n=r===""?1/0:i.maxLength===void 0?80:i.maxLength,s=i.replacer,(function o(a,l,u){var c,h,d,p,f,m,g,b,v,y,x,_;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,s),x===void 0)return x;if(g=n-l.length-u,x.length<=g&&(v=x.replace(Ioe,function(w,C){return C||w+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(x),s=void 0),typeof a=="object"&&a!==null){if(b=l+r,d=[],h=0,Array.isArray(a))for(y="[",c="]",g=a.length;h<g;h++)d.push(o(a[h],b,h===g-1?0:1)||"null");else for(y="{",c="}",m=Object.keys(a),g=m.length;h<g;h++)p=m[h],f=JSON.stringify(p)+": ",_=o(a[p],b,f.length+(h===g-1?0:1)),_!==void 0&&d.push(f+_);if(d.length>0)return[y,r+d.join(`,
`+b),c].join(`
`+l)}return x})(e,"",0)}});var See=Ez((rE,eO)=>{(function(t,e){if(typeof rE=="object"&&typeof eO=="object")eO.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var i=e();for(var r in i)(typeof rE=="object"?rE:t)[r]=i[r]}})(globalThis,(()=>(()=>{"use strict";var t={4567:function(n,s,o){var a=this&&this.__decorate||function(g,b,v,y){var x,_=arguments.length,w=_<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,b,v,y);else for(var C=g.length-1;C>=0;C--)(x=g[C])&&(w=(_<3?x(w):_>3?x(b,v,w):x(b,v))||w);return _>3&&w&&Object.defineProperty(b,v,w),w},l=this&&this.__param||function(g,b){return function(v,y){b(v,y,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;let u=o(9042),c=o(9924),h=o(844),d=o(4725),p=o(2585),f=o(3656),m=s.AccessibilityManager=class extends h.Disposable{constructor(g,b,v,y){super(),this._terminal=g,this._coreBrowserService=v,this._renderService=y,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let x=0;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);if(this._topBoundaryFocusListener=x=>this._handleBoundaryFocus(x,0),this._bottomBoundaryFocusListener=x=>this._handleBoundaryFocus(x,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new c.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((x=>this._handleResize(x.rows)))),this.register(this._terminal.onRender((x=>this._refreshRows(x.start,x.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((x=>this._handleChar(x)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((x=>this._handleTab(x)))),this.register(this._terminal.onKey((x=>this._handleKey(x.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,f.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,h.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(g){for(let b=0;b<g;b++)this._handleChar(" ")}_handleChar(g){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==g&&(this._charsToAnnounce+=g):this._charsToAnnounce+=g,g===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(g){this._clearLiveRegion(),/\p{Control}/u.test(g)||this._charsToConsume.push(g)}_refreshRows(g,b){this._liveRegionDebouncer.refresh(g,b,this._terminal.rows)}_renderRows(g,b){let v=this._terminal.buffer,y=v.lines.length.toString();for(let x=g;x<=b;x++){let _=v.lines.get(v.ydisp+x),w=[],C=_?.translateToString(!0,void 0,void 0,w)||"",E=(v.ydisp+x+1).toString(),A=this._rowElements[x];A&&(C.length===0?(A.innerText="\xA0",this._rowColumns.set(A,[0,1])):(A.textContent=C,this._rowColumns.set(A,w)),A.setAttribute("aria-posinset",E),A.setAttribute("aria-setsize",y))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(g,b){let v=g.target,y=this._rowElements[b===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(b===0?"1":`${this._terminal.buffer.lines.length}`)||g.relatedTarget!==y)return;let x,_;if(b===0?(x=v,_=this._rowElements.pop(),this._rowContainer.removeChild(_)):(x=this._rowElements.shift(),_=v,this._rowContainer.removeChild(x)),x.removeEventListener("focus",this._topBoundaryFocusListener),_.removeEventListener("focus",this._bottomBoundaryFocusListener),b===0){let w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{let w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(b===0?-1:1),this._rowElements[b===0?1:this._rowElements.length-2].focus(),g.preventDefault(),g.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let g=document.getSelection();if(!g)return;if(g.isCollapsed)return void(this._rowContainer.contains(g.anchorNode)&&this._terminal.clearSelection());if(!g.anchorNode||!g.focusNode)return void console.error("anchorNode and/or focusNode are null");let b={node:g.anchorNode,offset:g.anchorOffset},v={node:g.focusNode,offset:g.focusOffset};if((b.node.compareDocumentPosition(v.node)&Node.DOCUMENT_POSITION_PRECEDING||b.node===v.node&&b.offset>v.offset)&&([b,v]=[v,b]),b.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(b={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(b.node))return;let y=this._rowElements.slice(-1)[0];if(v.node.compareDocumentPosition(y)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(v={node:y,offset:y.textContent?.length??0}),!this._rowContainer.contains(v.node))return;let x=({node:C,offset:E})=>{let A=C instanceof Text?C.parentNode:C,D=parseInt(A?.getAttribute("aria-posinset"),10)-1;if(isNaN(D))return console.warn("row is invalid. Race condition?"),null;let R=this._rowColumns.get(A);if(!R)return console.warn("columns is null. Race condition?"),null;let I=E<R.length?R[E]:R.slice(-1)[0]+1;return I>=this._terminal.cols&&(++D,I=0),{row:D,column:I}},_=x(b),w=x(v);if(_&&w){if(_.row>w.row||_.row===w.row&&_.column>=w.column)throw new Error("invalid range");this._terminal.select(_.column,_.row,(w.row-_.row)*this._terminal.cols-_.column+w.column)}}_handleResize(g){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let b=this._rowContainer.children.length;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);for(;this._rowElements.length>g;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let g=this._coreBrowserService.mainDocument.createElement("div");return g.setAttribute("role","listitem"),g.tabIndex=-1,this._refreshRowDimensions(g),g}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let g=0;g<this._terminal.rows;g++)this._refreshRowDimensions(this._rowElements[g])}}_refreshRowDimensions(g){g.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=m=a([l(1,p.IInstantiationService),l(2,d.ICoreBrowserService),l(3,d.IRenderService)],m)},3614:(n,s)=>{function o(c){return c.replace(/\r?\n/g,"\r")}function a(c,h){return h?"\x1B[200~"+c+"\x1B[201~":c}function l(c,h,d,p){c=a(c=o(c),d.decPrivateModes.bracketedPasteMode&&p.rawOptions.ignoreBracketedPasteMode!==!0),d.triggerDataEvent(c,!0),h.value=""}function u(c,h,d){let p=d.getBoundingClientRect(),f=c.clientX-p.left-10,m=c.clientY-p.top-10;h.style.width="20px",h.style.height="20px",h.style.left=`${f}px`,h.style.top=`${m}px`,h.style.zIndex="1000",h.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=o,s.bracketTextForPaste=a,s.copyHandler=function(c,h){c.clipboardData&&c.clipboardData.setData("text/plain",h.selectionText),c.preventDefault()},s.handlePasteEvent=function(c,h,d,p){c.stopPropagation(),c.clipboardData&&l(c.clipboardData.getData("text/plain"),h,d,p)},s.paste=l,s.moveTextAreaUnderMouseCursor=u,s.rightClickHandler=function(c,h,d,p,f){u(c,h,d),f&&p.rightClickSelect(c),h.value=p.selectionText,h.select()}},7239:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;let a=o(1505);s.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(l,u,c){this._css.set(l,u,c)}getCss(l,u){return this._css.get(l,u)}setColor(l,u,c){this._color.set(l,u,c)}getColor(l,u){return this._color.get(l,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(o,a,l,u){o.addEventListener(a,l,u);let c=!1;return{dispose:()=>{c||(c=!0,o.removeEventListener(a,l,u))}}}},3551:function(n,s,o){var a=this&&this.__decorate||function(m,g,b,v){var y,x=arguments.length,_=x<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(m,g,b,v);else for(var w=m.length-1;w>=0;w--)(y=m[w])&&(_=(x<3?y(_):x>3?y(g,b,_):y(g,b))||_);return x>3&&_&&Object.defineProperty(g,b,_),_},l=this&&this.__param||function(m,g){return function(b,v){g(b,v,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier=void 0;let u=o(3656),c=o(8460),h=o(844),d=o(2585),p=o(4725),f=s.Linkifier=class extends h.Disposable{get currentLink(){return this._currentLink}constructor(m,g,b,v,y){super(),this._element=m,this._mouseService=g,this._renderService=b,this._bufferService=v,this._linkProviderService=y,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new c.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new c.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,h.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,h.toDisposable)((()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(m){this._lastMouseEvent=m;let g=this._positionFromMouseEvent(m,this._element,this._mouseService);if(!g)return;this._isMouseOut=!1;let b=m.composedPath();for(let v=0;v<b.length;v++){let y=b[v];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&g.x===this._lastBufferCell.x&&g.y===this._lastBufferCell.y||(this._handleHover(g),this._lastBufferCell=g)}_handleHover(m){if(this._activeLine!==m.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(m,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,m)||(this._clearCurrentLink(),this._askForLink(m,!0))}_askForLink(m,g){this._activeProviderReplies&&g||(this._activeProviderReplies?.forEach((v=>{v?.forEach((y=>{y.link.dispose&&y.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=m.y);let b=!1;for(let[v,y]of this._linkProviderService.linkProviders.entries())g?this._activeProviderReplies?.get(v)&&(b=this._checkLinkProviderResult(v,m,b)):y.provideLinks(m.y,(x=>{if(this._isMouseOut)return;let _=x?.map((w=>({link:w})));this._activeProviderReplies?.set(v,_),b=this._checkLinkProviderResult(v,m,b),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(m.y,this._activeProviderReplies)}))}_removeIntersectingLinks(m,g){let b=new Set;for(let v=0;v<g.size;v++){let y=g.get(v);if(y)for(let x=0;x<y.length;x++){let _=y[x],w=_.link.range.start.y<m?0:_.link.range.start.x,C=_.link.range.end.y>m?this._bufferService.cols:_.link.range.end.x;for(let E=w;E<=C;E++){if(b.has(E)){y.splice(x--,1);break}b.add(E)}}}}_checkLinkProviderResult(m,g,b){if(!this._activeProviderReplies)return b;let v=this._activeProviderReplies.get(m),y=!1;for(let x=0;x<m;x++)this._activeProviderReplies.has(x)&&!this._activeProviderReplies.get(x)||(y=!0);if(!y&&v){let x=v.find((_=>this._linkAtPosition(_.link,g)));x&&(b=!0,this._handleNewLink(x))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!b)for(let x=0;x<this._activeProviderReplies.size;x++){let _=this._activeProviderReplies.get(x)?.find((w=>this._linkAtPosition(w.link,g)));if(_){b=!0,this._handleNewLink(_);break}}return b}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(m){if(!this._currentLink)return;let g=this._positionFromMouseEvent(m,this._element,this._mouseService);g&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,g)&&this._currentLink.link.activate(m,this._currentLink.link.text)}_clearCurrentLink(m,g){this._currentLink&&this._lastMouseEvent&&(!m||!g||this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=g)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,h.disposeArray)(this._linkCacheDisposables))}_handleNewLink(m){if(!this._lastMouseEvent)return;let g=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);g&&this._linkAtPosition(m.link,g)&&(this._currentLink=m,this._currentLink.state={decorations:{underline:m.link.decorations===void 0||m.link.decorations.underline,pointerCursor:m.link.decorations===void 0||m.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,m.link,this._lastMouseEvent),m.link.decorations={},Object.defineProperties(m.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:b=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==b&&(this._currentLink.state.decorations.pointerCursor=b,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",b))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:b=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==b&&(this._currentLink.state.decorations.underline=b,this._currentLink.state.isHovered&&this._fireUnderlineEvent(m.link,b))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((b=>{if(!this._currentLink)return;let v=b.start===0?0:b.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+b.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(v,y),this._lastMouseEvent)){let x=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);x&&this._askForLink(x,!1)}}))))}_linkHover(m,g,b){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(g,!0),this._currentLink.state.decorations.pointerCursor&&m.classList.add("xterm-cursor-pointer")),g.hover&&g.hover(b,g.text)}_fireUnderlineEvent(m,g){let b=m.range,v=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(b.start.x-1,b.start.y-v-1,b.end.x,b.end.y-v-1,void 0);(g?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(m,g,b){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(g,!1),this._currentLink.state.decorations.pointerCursor&&m.classList.remove("xterm-cursor-pointer")),g.leave&&g.leave(b,g.text)}_linkAtPosition(m,g){let b=m.range.start.y*this._bufferService.cols+m.range.start.x,v=m.range.end.y*this._bufferService.cols+m.range.end.x,y=g.y*this._bufferService.cols+g.x;return b<=y&&y<=v}_positionFromMouseEvent(m,g,b){let v=b.getCoords(m,g,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(m,g,b,v,y){return{x1:m,y1:g,x2:b,y2:v,cols:this._bufferService.cols,fg:y}}};s.Linkifier=f=a([l(1,p.IMouseService),l(2,p.IRenderService),l(3,d.IBufferService),l(4,p.ILinkProviderService)],f)},9042:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(n,s,o){var a=this&&this.__decorate||function(p,f,m,g){var b,v=arguments.length,y=v<3?f:g===null?g=Object.getOwnPropertyDescriptor(f,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,f,m,g);else for(var x=p.length-1;x>=0;x--)(b=p[x])&&(y=(v<3?b(y):v>3?b(f,m,y):b(f,m))||y);return v>3&&y&&Object.defineProperty(f,m,y),y},l=this&&this.__param||function(p,f){return function(m,g){f(m,g,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;let u=o(511),c=o(2585),h=s.OscLinkProvider=class{constructor(p,f,m){this._bufferService=p,this._optionsService=f,this._oscLinkService=m}provideLinks(p,f){let m=this._bufferService.buffer.lines.get(p-1);if(!m)return void f(void 0);let g=[],b=this._optionsService.rawOptions.linkHandler,v=new u.CellData,y=m.getTrimmedLength(),x=-1,_=-1,w=!1;for(let C=0;C<y;C++)if(_!==-1||m.hasContent(C)){if(m.loadCell(C,v),v.hasExtendedAttrs()&&v.extended.urlId){if(_===-1){_=C,x=v.extended.urlId;continue}w=v.extended.urlId!==x}else _!==-1&&(w=!0);if(w||_!==-1&&C===y-1){let E=this._oscLinkService.getLinkData(x)?.uri;if(E){let A={start:{x:_+1,y:p},end:{x:C+(w||C!==y-1?0:1),y:p}},D=!1;if(!b?.allowNonHttpProtocols)try{let R=new URL(E);["http:","https:"].includes(R.protocol)||(D=!0)}catch{D=!0}D||g.push({text:E,range:A,activate:(R,I)=>b?b.activate(R,I,A):d(0,I),hover:(R,I)=>b?.hover?.(R,I,A),leave:(R,I)=>b?.leave?.(R,I,A)})}w=!1,v.hasExtendedAttrs()&&v.extended.urlId?(_=C,x=v.extended.urlId):(_=-1,x=-1)}}f(g)}};function d(p,f){if(confirm(`Do you want to navigate to ${f}?

WARNING: This link could potentially be dangerous`)){let m=window.open();if(m){try{m.opener=null}catch{}m.location.href=f}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=h=a([l(0,c.IBufferService),l(1,c.IOptionsService),l(2,c.IOscLinkService)],h)},6193:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(o,a){this._renderCallback=o,this._coreBrowserService=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(o,a,l){this._rowCount=l,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let a=o(3614),l=o(3656),u=o(3551),c=o(9042),h=o(3730),d=o(1680),p=o(3107),f=o(5744),m=o(2950),g=o(1296),b=o(428),v=o(4269),y=o(5114),x=o(8934),_=o(3230),w=o(9312),C=o(4725),E=o(6731),A=o(8055),D=o(8969),R=o(8460),I=o(844),z=o(6114),B=o(8437),N=o(2584),H=o(7399),T=o(5941),L=o(9074),P=o(2585),W=o(5435),Y=o(4567),ne=o(779);class ke extends D.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(G={}){super(G),this.browser=z,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new I.MutableDisposable),this._onCursorMove=this.register(new R.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new R.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new R.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new R.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new R.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new R.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new R.EventEmitter),this._onBlur=this.register(new R.EventEmitter),this._onA11yCharEmitter=this.register(new R.EventEmitter),this._onA11yTabEmitter=this.register(new R.EventEmitter),this._onWillOpen=this.register(new R.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(L.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ne.LinkProviderService),this._instantiationService.setService(C.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(h.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows((($,le)=>this.refresh($,le)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport(($=>this._reportWindowsOptions($)))),this.register(this._inputHandler.onColor(($=>this._handleColorEvent($)))),this.register((0,R.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,R.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(($=>this._afterResize($.cols,$.rows)))),this.register((0,I.toDisposable)((()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)})))}_handleColorEvent(G){if(this._themeService)for(let $ of G){let le,me="";switch($.index){case 256:le="foreground",me="10";break;case 257:le="background",me="11";break;case 258:le="cursor",me="12";break;default:le="ansi",me="4;"+$.index}switch($.type){case 0:let ie=A.color.toColorRGB(le==="ansi"?this._themeService.colors.ansi[$.index]:this._themeService.colors[le]);this.coreService.triggerDataEvent(`${N.C0.ESC}]${me};${(0,T.toRgbString)(ie)}${N.C1_ESCAPED.ST}`);break;case 1:if(le==="ansi")this._themeService.modifyColors((ue=>ue.ansi[$.index]=A.channels.toColor(...$.color)));else{let ue=le;this._themeService.modifyColors((Me=>Me[ue]=A.channels.toColor(...$.color)))}break;case 2:this._themeService.restoreColor($.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(G){G?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Y.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(G){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let G=this.buffer.ybase+this.buffer.y,$=this.buffer.lines.get(G);if(!$)return;let le=Math.min(this.buffer.x,this.cols-1),me=this._renderService.dimensions.css.cell.height,ie=$.getWidth(le),ue=this._renderService.dimensions.css.cell.width*ie,Me=this.buffer.y*this._renderService.dimensions.css.cell.height,he=le*this._renderService.dimensions.css.cell.width;this.textarea.style.left=he+"px",this.textarea.style.top=Me+"px",this.textarea.style.width=ue+"px",this.textarea.style.height=me+"px",this.textarea.style.lineHeight=me+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,l.addDisposableDomListener)(this.element,"copy",($=>{this.hasSelection()&&(0,a.copyHandler)($,this._selectionService)})));let G=$=>(0,a.handlePasteEvent)($,this.textarea,this.coreService,this.optionsService);this.register((0,l.addDisposableDomListener)(this.textarea,"paste",G)),this.register((0,l.addDisposableDomListener)(this.element,"paste",G)),z.isFirefox?this.register((0,l.addDisposableDomListener)(this.element,"mousedown",($=>{$.button===2&&(0,a.rightClickHandler)($,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,l.addDisposableDomListener)(this.element,"contextmenu",($=>{(0,a.rightClickHandler)($,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),z.isLinux&&this.register((0,l.addDisposableDomListener)(this.element,"auxclick",($=>{$.button===1&&(0,a.moveTextAreaUnderMouseCursor)($,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,l.addDisposableDomListener)(this.textarea,"keyup",(G=>this._keyUp(G)),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keydown",(G=>this._keyDown(G)),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keypress",(G=>this._keyPress(G)),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionupdate",(G=>this._compositionHelper.compositionupdate(G)))),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,l.addDisposableDomListener)(this.textarea,"input",(G=>this._inputEvent(G)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(G){if(!G)throw new Error("Terminal requires a parent element.");if(G.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=G.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),G.appendChild(this.element);let $=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),$.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,l.addDisposableDomListener)(this.screenElement,"mousemove",(le=>this.updateCursorStyle(le)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),$.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",c.promptLabel),z.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(y.CoreBrowserService,this.textarea,G.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(C.ICoreBrowserService,this._coreBrowserService),this.register((0,l.addDisposableDomListener)(this.textarea,"focus",(le=>this._handleTextAreaFocus(le)))),this.register((0,l.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(b.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(C.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(C.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(C.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(_.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(C.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((le=>this._onRender.fire(le)))),this.onResize((le=>this._renderService.resize(le.cols,le.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(m.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(C.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(u.Linkifier,this.screenElement)),this.element.appendChild($);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(d.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((le=>this.scrollLines(le.amount,le.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(w.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(C.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((le=>this.scrollLines(le.amount,le.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((le=>this._renderService.handleSelectionChanged(le.start,le.end,le.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((le=>{this.textarea.value=le,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((le=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(p.BufferDecorationRenderer,this.screenElement)),this.register((0,l.addDisposableDomListener)(this.element,"mousedown",(le=>this._selectionService.handleMouseDown(le)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Y.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(le=>this._handleScreenReaderModeOptionChange(le)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(f.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(le=>{!this._overviewRulerRenderer&&le&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(f.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(g.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let G=this,$=this.element;function le(ue){let Me=G._mouseService.getMouseReportCoords(ue,G.screenElement);if(!Me)return!1;let he,gt;switch(ue.overrideType||ue.type){case"mousemove":gt=32,ue.buttons===void 0?(he=3,ue.button!==void 0&&(he=ue.button<3?ue.button:3)):he=1&ue.buttons?0:4&ue.buttons?1:2&ue.buttons?2:3;break;case"mouseup":gt=0,he=ue.button<3?ue.button:3;break;case"mousedown":gt=1,he=ue.button<3?ue.button:3;break;case"wheel":if(G._customWheelEventHandler&&G._customWheelEventHandler(ue)===!1||G.viewport.getLinesScrolled(ue)===0)return!1;gt=ue.deltaY<0?0:1,he=4;break;default:return!1}return!(gt===void 0||he===void 0||he>4)&&G.coreMouseService.triggerMouseEvent({col:Me.col,row:Me.row,x:Me.x,y:Me.y,button:he,action:gt,ctrl:ue.ctrlKey,alt:ue.altKey,shift:ue.shiftKey})}let me={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ie={mouseup:ue=>(le(ue),ue.buttons||(this._document.removeEventListener("mouseup",me.mouseup),me.mousedrag&&this._document.removeEventListener("mousemove",me.mousedrag)),this.cancel(ue)),wheel:ue=>(le(ue),this.cancel(ue,!0)),mousedrag:ue=>{ue.buttons&&le(ue)},mousemove:ue=>{ue.buttons||le(ue)}};this.register(this.coreMouseService.onProtocolChange((ue=>{ue?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ue)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ue?me.mousemove||($.addEventListener("mousemove",ie.mousemove),me.mousemove=ie.mousemove):($.removeEventListener("mousemove",me.mousemove),me.mousemove=null),16&ue?me.wheel||($.addEventListener("wheel",ie.wheel,{passive:!1}),me.wheel=ie.wheel):($.removeEventListener("wheel",me.wheel),me.wheel=null),2&ue?me.mouseup||(me.mouseup=ie.mouseup):(this._document.removeEventListener("mouseup",me.mouseup),me.mouseup=null),4&ue?me.mousedrag||(me.mousedrag=ie.mousedrag):(this._document.removeEventListener("mousemove",me.mousedrag),me.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,l.addDisposableDomListener)($,"mousedown",(ue=>{if(ue.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ue))return le(ue),me.mouseup&&this._document.addEventListener("mouseup",me.mouseup),me.mousedrag&&this._document.addEventListener("mousemove",me.mousedrag),this.cancel(ue)}))),this.register((0,l.addDisposableDomListener)($,"wheel",(ue=>{if(!me.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(ue)===!1)return!1;if(!this.buffer.hasScrollback){let Me=this.viewport.getLinesScrolled(ue);if(Me===0)return;let he=N.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ue.deltaY<0?"A":"B"),gt="";for(let ot=0;ot<Math.abs(Me);ot++)gt+=he;return this.coreService.triggerDataEvent(gt,!0),this.cancel(ue,!0)}return this.viewport.handleWheel(ue)?this.cancel(ue):void 0}}),{passive:!1})),this.register((0,l.addDisposableDomListener)($,"touchstart",(ue=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ue),this.cancel(ue)}),{passive:!0})),this.register((0,l.addDisposableDomListener)($,"touchmove",(ue=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ue)?void 0:this.cancel(ue)}),{passive:!1}))}refresh(G,$){this._renderService?.refreshRows(G,$)}updateCursorStyle(G){this._selectionService?.shouldColumnSelect(G)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(G,$,le=0){le===1?(super.scrollLines(G,$,le),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(G)}paste(G){(0,a.paste)(G,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(G){this._customKeyEventHandler=G}attachCustomWheelEventHandler(G){this._customWheelEventHandler=G}registerLinkProvider(G){return this._linkProviderService.registerLinkProvider(G)}registerCharacterJoiner(G){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let $=this._characterJoinerService.register(G);return this.refresh(0,this.rows-1),$}deregisterCharacterJoiner(G){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(G)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(G){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+G)}registerDecoration(G){return this._decorationService.registerDecoration(G)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(G,$,le){this._selectionService.setSelection(G,$,le)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(G,$){this._selectionService?.selectLines(G,$)}_keyDown(G){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(G)===!1)return!1;let $=this.browser.isMac&&this.options.macOptionIsMeta&&G.altKey;if(!$&&!this._compositionHelper.keydown(G))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;$||G.key!=="Dead"&&G.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let le=(0,H.evaluateKeyboardEvent)(G,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(G),le.type===3||le.type===2){let me=this.rows-1;return this.scrollLines(le.type===2?-me:me),this.cancel(G,!0)}return le.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,G)||(le.cancel&&this.cancel(G,!0),!le.key||!!(G.key&&!G.ctrlKey&&!G.altKey&&!G.metaKey&&G.key.length===1&&G.key.charCodeAt(0)>=65&&G.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(le.key!==N.C0.ETX&&le.key!==N.C0.CR||(this.textarea.value=""),this._onKey.fire({key:le.key,domEvent:G}),this._showCursor(),this.coreService.triggerDataEvent(le.key,!0),!this.optionsService.rawOptions.screenReaderMode||G.altKey||G.ctrlKey?this.cancel(G,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(G,$){let le=G.isMac&&!this.options.macOptionIsMeta&&$.altKey&&!$.ctrlKey&&!$.metaKey||G.isWindows&&$.altKey&&$.ctrlKey&&!$.metaKey||G.isWindows&&$.getModifierState("AltGraph");return $.type==="keypress"?le:le&&(!$.keyCode||$.keyCode>47)}_keyUp(G){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(G)===!1||((function($){return $.keyCode===16||$.keyCode===17||$.keyCode===18})(G)||this.focus(),this.updateCursorStyle(G),this._keyPressHandled=!1)}_keyPress(G){let $;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(G)===!1)return!1;if(this.cancel(G),G.charCode)$=G.charCode;else if(G.which===null||G.which===void 0)$=G.keyCode;else{if(G.which===0||G.charCode===0)return!1;$=G.which}return!(!$||(G.altKey||G.ctrlKey||G.metaKey)&&!this._isThirdLevelShift(this.browser,G)||($=String.fromCharCode($),this._onKey.fire({key:$,domEvent:G}),this._showCursor(),this.coreService.triggerDataEvent($,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(G){if(G.data&&G.inputType==="insertText"&&(!G.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let $=G.data;return this.coreService.triggerDataEvent($,!0),this.cancel(G),!0}return!1}resize(G,$){G!==this.cols||$!==this.rows?super.resize(G,$):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(G,$){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let G=1;G<this.rows;G++)this.buffer.lines.push(this.buffer.getBlankLine(B.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let G=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=G,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(N.C0.ESC+"[I"):this.coreService.triggerDataEvent(N.C0.ESC+"[O")}_reportWindowsOptions(G){if(this._renderService)switch(G){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let $=this._renderService.dimensions.css.canvas.width.toFixed(0),le=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[4;${le};${$}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let me=this._renderService.dimensions.css.cell.width.toFixed(0),ie=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[6;${ie};${me}t`)}}cancel(G,$){if(this.options.cancelEvents||$)return G.preventDefault(),G.stopPropagation(),!1}}s.Terminal=ke},9924:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(o,a=1e3){this._renderCallback=o,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,a,l){this._rowCount=l,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){let c=u-this._lastRefreshMs,h=this._debounceThresholdMS-c;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),h)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a)}}},1680:function(n,s,o){var a=this&&this.__decorate||function(m,g,b,v){var y,x=arguments.length,_=x<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(m,g,b,v);else for(var w=m.length-1;w>=0;w--)(y=m[w])&&(_=(x<3?y(_):x>3?y(g,b,_):y(g,b))||_);return x>3&&_&&Object.defineProperty(g,b,_),_},l=this&&this.__param||function(m,g){return function(b,v){g(b,v,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;let u=o(3656),c=o(4725),h=o(8460),d=o(844),p=o(2585),f=s.Viewport=class extends d.Disposable{constructor(m,g,b,v,y,x,_,w){super(),this._viewportElement=m,this._scrollArea=g,this._bufferService=b,this._optionsService=v,this._charSizeService=y,this._renderService=x,this._coreBrowserService=_,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new h.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((C=>this._activeBuffer=C.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((C=>this._renderDimensions=C))),this._handleThemeChange(w.colors),this.register(w.onChangeColors((C=>this._handleThemeChange(C)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(m){this._viewportElement.style.backgroundColor=m.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(m){if(m)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let g=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==g&&(this._lastRecordedBufferHeight=g,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let m=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==m&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=m),this._refreshAnimationFrame=null}syncScrollArea(m=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(m);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(m)}_handleScroll(m){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let g=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:g,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let m=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(m*(this._smoothScrollState.target-this._smoothScrollState.origin)),m<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(m,g){let b=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(g<0&&this._viewportElement.scrollTop!==0||g>0&&b<this._lastRecordedBufferHeight)||(m.cancelable&&m.preventDefault(),!1)}handleWheel(m){let g=this._getPixelsScrolled(m);return g!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+g:this._smoothScrollState.target+=g,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=g,this._bubbleScroll(m,g))}scrollLines(m){if(m!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let g=m*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+g,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:m,suppressScrollEvent:!1})}_getPixelsScrolled(m){if(m.deltaY===0||m.shiftKey)return 0;let g=this._applyScrollModifier(m.deltaY,m);return m.deltaMode===WheelEvent.DOM_DELTA_LINE?g*=this._currentRowHeight:m.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(g*=this._currentRowHeight*this._bufferService.rows),g}getBufferElements(m,g){let b,v="",y=[],x=g??this._bufferService.buffer.lines.length,_=this._bufferService.buffer.lines;for(let w=m;w<x;w++){let C=_.get(w);if(!C)continue;let E=_.get(w+1)?.isWrapped;if(v+=C.translateToString(!E),!E||w===_.length-1){let A=document.createElement("div");A.textContent=v,y.push(A),v.length>0&&(b=A),v=""}}return{bufferElements:y,cursorElement:b}}getLinesScrolled(m){if(m.deltaY===0||m.shiftKey)return 0;let g=this._applyScrollModifier(m.deltaY,m);return m.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(g/=this._currentRowHeight+0,this._wheelPartialScroll+=g,g=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):m.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(g*=this._bufferService.rows),g}_applyScrollModifier(m,g){let b=this._optionsService.rawOptions.fastScrollModifier;return b==="alt"&&g.altKey||b==="ctrl"&&g.ctrlKey||b==="shift"&&g.shiftKey?m*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:m*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(m){this._lastTouchY=m.touches[0].pageY}handleTouchMove(m){let g=this._lastTouchY-m.touches[0].pageY;return this._lastTouchY=m.touches[0].pageY,g!==0&&(this._viewportElement.scrollTop+=g,this._bubbleScroll(m,g))}};s.Viewport=f=a([l(2,p.IBufferService),l(3,p.IOptionsService),l(4,c.ICharSizeService),l(5,c.IRenderService),l(6,c.ICoreBrowserService),l(7,c.IThemeService)],f)},3107:function(n,s,o){var a=this&&this.__decorate||function(p,f,m,g){var b,v=arguments.length,y=v<3?f:g===null?g=Object.getOwnPropertyDescriptor(f,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,f,m,g);else for(var x=p.length-1;x>=0;x--)(b=p[x])&&(y=(v<3?b(y):v>3?b(f,m,y):b(f,m))||y);return v>3&&y&&Object.defineProperty(f,m,y),y},l=this&&this.__param||function(p,f){return function(m,g){f(m,g,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;let u=o(4725),c=o(844),h=o(2585),d=s.BufferDecorationRenderer=class extends c.Disposable{constructor(p,f,m,g,b){super(),this._screenElement=p,this._bufferService=f,this._coreBrowserService=m,this._decorationService=g,this._renderService=b,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((v=>this._removeDecoration(v)))),this.register((0,c.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(let p of this._decorationService.decorations)this._renderDecoration(p);this._dimensionsChanged=!1}_renderDecoration(p){this._refreshStyle(p),this._dimensionsChanged&&this._refreshXPosition(p)}_createElement(p){let f=this._coreBrowserService.mainDocument.createElement("div");f.classList.add("xterm-decoration"),f.classList.toggle("xterm-decoration-top-layer",p?.options?.layer==="top"),f.style.width=`${Math.round((p.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,f.style.height=(p.options.height||1)*this._renderService.dimensions.css.cell.height+"px",f.style.top=(p.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",f.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let m=p.options.x??0;return m&&m>this._bufferService.cols&&(f.style.display="none"),this._refreshXPosition(p,f),f}_refreshStyle(p){let f=p.marker.line-this._bufferService.buffers.active.ydisp;if(f<0||f>=this._bufferService.rows)p.element&&(p.element.style.display="none",p.onRenderEmitter.fire(p.element));else{let m=this._decorationElements.get(p);m||(m=this._createElement(p),p.element=m,this._decorationElements.set(p,m),this._container.appendChild(m),p.onDispose((()=>{this._decorationElements.delete(p),m.remove()}))),m.style.top=f*this._renderService.dimensions.css.cell.height+"px",m.style.display=this._altBufferIsActive?"none":"block",p.onRenderEmitter.fire(m)}}_refreshXPosition(p,f=p.element){if(!f)return;let m=p.options.x??0;(p.options.anchor||"left")==="right"?f.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":f.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(p){this._decorationElements.get(p)?.remove(),this._decorationElements.delete(p),p.dispose()}};s.BufferDecorationRenderer=d=a([l(1,h.IBufferService),l(2,u.ICoreBrowserService),l(3,h.IDecorationService),l(4,u.IRenderService)],d)},5871:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let a of this._zones)if(a.color===o.options.overviewRulerOptions.color&&a.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,o.marker.line))return;if(this._lineAdjacentToZone(a,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(a,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,a){return a>=o.startBufferLine&&a<=o.endBufferLine}_lineAdjacentToZone(o,a,l){return a>=o.startBufferLine-this._linePadding[l||"full"]&&a<=o.endBufferLine+this._linePadding[l||"full"]}_addLineToZone(o,a){o.startBufferLine=Math.min(o.startBufferLine,a),o.endBufferLine=Math.max(o.endBufferLine,a)}}},5744:function(n,s,o){var a=this&&this.__decorate||function(b,v,y,x){var _,w=arguments.length,C=w<3?v:x===null?x=Object.getOwnPropertyDescriptor(v,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(b,v,y,x);else for(var E=b.length-1;E>=0;E--)(_=b[E])&&(C=(w<3?_(C):w>3?_(v,y,C):_(v,y))||C);return w>3&&C&&Object.defineProperty(v,y,C),C},l=this&&this.__param||function(b,v){return function(y,x){v(y,x,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;let u=o(5871),c=o(4725),h=o(844),d=o(2585),p={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0},g=s.OverviewRulerRenderer=class extends h.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(b,v,y,x,_,w,C){super(),this._viewportElement=b,this._screenElement=v,this._bufferService=y,this._decorationService=x,this._renderService=_,this._optionsService=w,this._coreBrowserService=C,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);let E=this._canvas.getContext("2d");if(!E)throw new Error("Ctx cannot be null");this._ctx=E,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,h.toDisposable)((()=>{this._canvas?.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){let b=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);f.full=this._canvas.width,f.left=b,f.center=v,f.right=b,this._refreshDrawHeightConstants(),m.full=0,m.left=0,m.center=f.left,m.right=f.left+f.center}_refreshDrawHeightConstants(){p.full=Math.round(2*this._coreBrowserService.dpr);let b=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(b,12),6)*this._coreBrowserService.dpr);p.left=v,p.center=v,p.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;let b=this._colorZoneStore.zones;for(let v of b)v.position!=="full"&&this._renderColorZone(v);for(let v of b)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(b){this._ctx.fillStyle=b.color,this._ctx.fillRect(m[b.position||"full"],Math.round((this._canvas.height-1)*(b.startBufferLine/this._bufferService.buffers.active.lines.length)-p[b.position||"full"]/2),f[b.position||"full"],Math.round((this._canvas.height-1)*((b.endBufferLine-b.startBufferLine)/this._bufferService.buffers.active.lines.length)+p[b.position||"full"]))}_queueRefresh(b,v){this._shouldUpdateDimensions=b||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};s.OverviewRulerRenderer=g=a([l(2,d.IBufferService),l(3,d.IDecorationService),l(4,c.IRenderService),l(5,d.IOptionsService),l(6,c.ICoreBrowserService)],g)},2950:function(n,s,o){var a=this&&this.__decorate||function(p,f,m,g){var b,v=arguments.length,y=v<3?f:g===null?g=Object.getOwnPropertyDescriptor(f,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,f,m,g);else for(var x=p.length-1;x>=0;x--)(b=p[x])&&(y=(v<3?b(y):v>3?b(f,m,y):b(f,m))||y);return v>3&&y&&Object.defineProperty(f,m,y),y},l=this&&this.__param||function(p,f){return function(m,g){f(m,g,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;let u=o(4725),c=o(2585),h=o(2584),d=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(p,f,m,g,b,v){this._textarea=p,this._compositionView=f,this._bufferService=m,this._optionsService=g,this._coreService=b,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(p){this._compositionView.textContent=p.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(p){if(this._isComposing||this._isSendingComposition){if(p.keyCode===229||p.keyCode===16||p.keyCode===17||p.keyCode===18)return!1;this._finalizeComposition(!1)}return p.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(p){if(this._compositionView.classList.remove("active"),this._isComposing=!1,p){let f={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let m;this._isSendingComposition=!1,f.start+=this._dataAlreadySent.length,m=this._isComposing?this._textarea.value.substring(f.start,f.end):this._textarea.value.substring(f.start),m.length>0&&this._coreService.triggerDataEvent(m,!0)}}),0)}else{this._isSendingComposition=!1;let f=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(f,!0)}}_handleAnyTextareaChanges(){let p=this._textarea.value;setTimeout((()=>{if(!this._isComposing){let f=this._textarea.value,m=f.replace(p,"");this._dataAlreadySent=m,f.length>p.length?this._coreService.triggerDataEvent(m,!0):f.length<p.length?this._coreService.triggerDataEvent(`${h.C0.DEL}`,!0):f.length===p.length&&f!==p&&this._coreService.triggerDataEvent(f,!0)}}),0)}updateCompositionElements(p){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let f=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),m=this._renderService.dimensions.css.cell.height,g=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,b=f*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=b+"px",this._compositionView.style.top=g+"px",this._compositionView.style.height=m+"px",this._compositionView.style.lineHeight=m+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let v=this._compositionView.getBoundingClientRect();this._textarea.style.left=b+"px",this._textarea.style.top=g+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}p||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};s.CompositionHelper=d=a([l(2,c.IBufferService),l(3,c.IOptionsService),l(4,c.ICoreService),l(5,u.IRenderService)],d)},9806:(n,s)=>{function o(a,l,u){let c=u.getBoundingClientRect(),h=a.getComputedStyle(u),d=parseInt(h.getPropertyValue("padding-left")),p=parseInt(h.getPropertyValue("padding-top"));return[l.clientX-c.left-d,l.clientY-c.top-p]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=o,s.getCoords=function(a,l,u,c,h,d,p,f,m){if(!d)return;let g=o(a,l,u);return g?(g[0]=Math.ceil((g[0]+(m?p/2:0))/p),g[1]=Math.ceil(g[1]/f),g[0]=Math.min(Math.max(g[0],1),c+(m?1:0)),g[1]=Math.min(Math.max(g[1],1),h),g):void 0}},9504:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;let a=o(2584);function l(f,m,g,b){let v=f-u(f,g),y=m-u(m,g),x=Math.abs(v-y)-(function(_,w,C){let E=0,A=_-u(_,C),D=w-u(w,C);for(let R=0;R<Math.abs(A-D);R++){let I=c(_,w)==="A"?-1:1;C.buffer.lines.get(A+I*R)?.isWrapped&&E++}return E})(f,m,g);return p(x,d(c(f,m),b))}function u(f,m){let g=0,b=m.buffer.lines.get(f),v=b?.isWrapped;for(;v&&f>=0&&f<m.rows;)g++,b=m.buffer.lines.get(--f),v=b?.isWrapped;return g}function c(f,m){return f>m?"A":"B"}function h(f,m,g,b,v,y){let x=f,_=m,w="";for(;x!==g||_!==b;)x+=v?1:-1,v&&x>y.cols-1?(w+=y.buffer.translateBufferLineToString(_,!1,f,x),x=0,f=0,_++):!v&&x<0&&(w+=y.buffer.translateBufferLineToString(_,!1,0,f+1),x=y.cols-1,f=x,_--);return w+y.buffer.translateBufferLineToString(_,!1,f,x)}function d(f,m){let g=m?"O":"[";return a.C0.ESC+g+f}function p(f,m){f=Math.floor(f);let g="";for(let b=0;b<f;b++)g+=m;return g}s.moveToCellSequence=function(f,m,g,b){let v=g.buffer.x,y=g.buffer.y;if(!g.buffer.hasScrollback)return(function(w,C,E,A,D,R){return l(C,A,D,R).length===0?"":p(h(w,C,w,C-u(C,D),!1,D).length,d("D",R))})(v,y,0,m,g,b)+l(y,m,g,b)+(function(w,C,E,A,D,R){let I;I=l(C,A,D,R).length>0?A-u(A,D):C;let z=A,B=(function(N,H,T,L,P,W){let Y;return Y=l(T,L,P,W).length>0?L-u(L,P):H,N<T&&Y<=L||N>=T&&Y<L?"C":"D"})(w,C,E,A,D,R);return p(h(w,I,E,z,B==="C",D).length,d(B,R))})(v,y,f,m,g,b);let x;if(y===m)return x=v>f?"D":"C",p(Math.abs(v-f),d(x,b));x=y>m?"D":"C";let _=Math.abs(y-m);return p((function(w,C){return C.cols-w})(y>m?f:v,g)+(_-1)*g.cols+1+((y>m?v:f)-1),d(x,b))}},1296:function(n,s,o){var a=this&&this.__decorate||function(R,I,z,B){var N,H=arguments.length,T=H<3?I:B===null?B=Object.getOwnPropertyDescriptor(I,z):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(R,I,z,B);else for(var L=R.length-1;L>=0;L--)(N=R[L])&&(T=(H<3?N(T):H>3?N(I,z,T):N(I,z))||T);return H>3&&T&&Object.defineProperty(I,z,T),T},l=this&&this.__param||function(R,I){return function(z,B){I(z,B,R)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;let u=o(3787),c=o(2550),h=o(2223),d=o(6171),p=o(6052),f=o(4725),m=o(8055),g=o(8460),b=o(844),v=o(2585),y="xterm-dom-renderer-owner-",x="xterm-rows",_="xterm-fg-",w="xterm-bg-",C="xterm-focus",E="xterm-selection",A=1,D=s.DomRenderer=class extends b.Disposable{constructor(R,I,z,B,N,H,T,L,P,W,Y,ne,ke){super(),this._terminal=R,this._document=I,this._element=z,this._screenElement=B,this._viewportElement=N,this._helperContainer=H,this._linkifier2=T,this._charSizeService=P,this._optionsService=W,this._bufferService=Y,this._coreBrowserService=ne,this._themeService=ke,this._terminalClass=A++,this._rowElements=[],this._selectionRenderModel=(0,p.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new g.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(x),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,d.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((Ae=>this._injectCss(Ae)))),this._injectCss(this._themeService.colors),this._rowFactory=L.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((Ae=>this._handleLinkHover(Ae)))),this.register(this._linkifier2.onHideLinkUnderline((Ae=>this._handleLinkLeave(Ae)))),this.register((0,b.toDisposable)((()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new c.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let R=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*R,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*R),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/R),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/R),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let z of this._rowElements)z.style.width=`${this.dimensions.css.canvas.width}px`,z.style.height=`${this.dimensions.css.cell.height}px`,z.style.lineHeight=`${this.dimensions.css.cell.height}px`,z.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let I=`${this._terminalSelector} .${x} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=I,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(R){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let I=`${this._terminalSelector} .${x} { color: ${R.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;I+=`${this._terminalSelector} .${x} .xterm-dim { color: ${m.color.multiplyOpacity(R.foreground,.5).css};}`,I+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let z=`blink_underline_${this._terminalClass}`,B=`blink_bar_${this._terminalClass}`,N=`blink_block_${this._terminalClass}`;I+=`@keyframes ${z} { 50% {  border-bottom-style: hidden; }}`,I+=`@keyframes ${B} { 50% {  box-shadow: none; }}`,I+=`@keyframes ${N} { 0% {  background-color: ${R.cursor.css};  color: ${R.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${R.cursor.css}; }}`,I+=`${this._terminalSelector} .${x}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${z} 1s step-end infinite;}${this._terminalSelector} .${x}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${B} 1s step-end infinite;}${this._terminalSelector} .${x}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${N} 1s step-end infinite;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block { background-color: ${R.cursor.css}; color: ${R.cursorAccent.css};}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${R.cursor.css} !important; color: ${R.cursorAccent.css} !important;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${R.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${R.cursor.css} inset;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${R.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,I+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${R.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${R.selectionInactiveBackgroundOpaque.css};}`;for(let[H,T]of R.ansi.entries())I+=`${this._terminalSelector} .${_}${H} { color: ${T.css}; }${this._terminalSelector} .${_}${H}.xterm-dim { color: ${m.color.multiplyOpacity(T,.5).css}; }${this._terminalSelector} .${w}${H} { background-color: ${T.css}; }`;I+=`${this._terminalSelector} .${_}${h.INVERTED_DEFAULT_COLOR} { color: ${m.color.opaque(R.background).css}; }${this._terminalSelector} .${_}${h.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${m.color.multiplyOpacity(m.color.opaque(R.background),.5).css}; }${this._terminalSelector} .${w}${h.INVERTED_DEFAULT_COLOR} { background-color: ${R.foreground.css}; }`,this._themeStyleElement.textContent=I}_setDefaultSpacing(){let R=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${R}px`,this._rowFactory.defaultSpacing=R}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(R,I){for(let z=this._rowElements.length;z<=I;z++){let B=this._document.createElement("div");this._rowContainer.appendChild(B),this._rowElements.push(B)}for(;this._rowElements.length>I;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(R,I){this._refreshRowElements(R,I),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(C),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(C),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(R,I,z){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(R,I,z),this.renderRows(0,this._bufferService.rows-1),!R||!I)return;this._selectionRenderModel.update(this._terminal,R,I,z);let B=this._selectionRenderModel.viewportStartRow,N=this._selectionRenderModel.viewportEndRow,H=this._selectionRenderModel.viewportCappedStartRow,T=this._selectionRenderModel.viewportCappedEndRow;if(H>=this._bufferService.rows||T<0)return;let L=this._document.createDocumentFragment();if(z){let P=R[0]>I[0];L.appendChild(this._createSelectionElement(H,P?I[0]:R[0],P?R[0]:I[0],T-H+1))}else{let P=B===H?R[0]:0,W=H===N?I[0]:this._bufferService.cols;L.appendChild(this._createSelectionElement(H,P,W));let Y=T-H-1;if(L.appendChild(this._createSelectionElement(H+1,0,this._bufferService.cols,Y)),H!==T){let ne=N===T?I[0]:this._bufferService.cols;L.appendChild(this._createSelectionElement(T,0,ne))}}this._selectionContainer.appendChild(L)}_createSelectionElement(R,I,z,B=1){let N=this._document.createElement("div"),H=I*this.dimensions.css.cell.width,T=this.dimensions.css.cell.width*(z-I);return H+T>this.dimensions.css.canvas.width&&(T=this.dimensions.css.canvas.width-H),N.style.height=B*this.dimensions.css.cell.height+"px",N.style.top=R*this.dimensions.css.cell.height+"px",N.style.left=`${H}px`,N.style.width=`${T}px`,N}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let R of this._rowElements)R.replaceChildren()}renderRows(R,I){let z=this._bufferService.buffer,B=z.ybase+z.y,N=Math.min(z.x,this._bufferService.cols-1),H=this._optionsService.rawOptions.cursorBlink,T=this._optionsService.rawOptions.cursorStyle,L=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=R;P<=I;P++){let W=P+z.ydisp,Y=this._rowElements[P],ne=z.lines.get(W);if(!Y||!ne)break;Y.replaceChildren(...this._rowFactory.createRow(ne,W,W===B,T,L,N,H,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!0)}_handleLinkLeave(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!1)}_setCellUnderline(R,I,z,B,N,H){z<0&&(R=0),B<0&&(I=0);let T=this._bufferService.rows-1;z=Math.max(Math.min(z,T),0),B=Math.max(Math.min(B,T),0),N=Math.min(N,this._bufferService.cols);let L=this._bufferService.buffer,P=L.ybase+L.y,W=Math.min(L.x,N-1),Y=this._optionsService.rawOptions.cursorBlink,ne=this._optionsService.rawOptions.cursorStyle,ke=this._optionsService.rawOptions.cursorInactiveStyle;for(let Ae=z;Ae<=B;++Ae){let G=Ae+L.ydisp,$=this._rowElements[Ae],le=L.lines.get(G);if(!$||!le)break;$.replaceChildren(...this._rowFactory.createRow(le,G,G===P,ne,ke,W,Y,this.dimensions.css.cell.width,this._widthCache,H?Ae===z?R:0:-1,H?(Ae===B?I:N)-1:-1))}}};s.DomRenderer=D=a([l(7,v.IInstantiationService),l(8,f.ICharSizeService),l(9,v.IOptionsService),l(10,v.IBufferService),l(11,f.ICoreBrowserService),l(12,f.IThemeService)],D)},3787:function(n,s,o){var a=this&&this.__decorate||function(x,_,w,C){var E,A=arguments.length,D=A<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,w):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(x,_,w,C);else for(var R=x.length-1;R>=0;R--)(E=x[R])&&(D=(A<3?E(D):A>3?E(_,w,D):E(_,w))||D);return A>3&&D&&Object.defineProperty(_,w,D),D},l=this&&this.__param||function(x,_){return function(w,C){_(w,C,x)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;let u=o(2223),c=o(643),h=o(511),d=o(2585),p=o(8055),f=o(4725),m=o(4269),g=o(6171),b=o(3734),v=s.DomRendererRowFactory=class{constructor(x,_,w,C,E,A,D){this._document=x,this._characterJoinerService=_,this._optionsService=w,this._coreBrowserService=C,this._coreService=E,this._decorationService=A,this._themeService=D,this._workCell=new h.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,_,w){this._selectionStart=x,this._selectionEnd=_,this._columnSelectMode=w}createRow(x,_,w,C,E,A,D,R,I,z,B){let N=[],H=this._characterJoinerService.getJoinedCharacters(_),T=this._themeService.colors,L,P=x.getNoBgTrimmedLength();w&&P<A+1&&(P=A+1);let W=0,Y="",ne=0,ke=0,Ae=0,G=!1,$=0,le=!1,me=0,ie=[],ue=z!==-1&&B!==-1;for(let Me=0;Me<P;Me++){x.loadCell(Me,this._workCell);let he=this._workCell.getWidth();if(he===0)continue;let gt=!1,ot=Me,He=this._workCell;if(H.length>0&&Me===H[0][0]){gt=!0;let Ri=H.shift();He=new m.JoinedCellData(this._workCell,x.translateToString(!0,Ri[0],Ri[1]),Ri[1]-Ri[0]),ot=Ri[1]-1,he=He.getWidth()}let oi=this._isCellInSelection(Me,_),Rr=w&&Me===A,eo=ue&&Me>=z&&Me<=B,Xc=!1;this._decorationService.forEachDecorationAtCell(Me,_,void 0,(Ri=>{Xc=!0}));let Rw=He.getChars()||c.WHITESPACE_CELL_CHAR;if(Rw===" "&&(He.isUnderline()||He.isOverline())&&(Rw="\xA0"),me=he*R-I.get(Rw,He.isBold(),He.isItalic()),L){if(W&&(oi&&le||!oi&&!le&&He.bg===ne)&&(oi&&le&&T.selectionForeground||He.fg===ke)&&He.extended.ext===Ae&&eo===G&&me===$&&!Rr&&!gt&&!Xc){He.isInvisible()?Y+=c.WHITESPACE_CELL_CHAR:Y+=Rw,W++;continue}W&&(L.textContent=Y),L=this._document.createElement("span"),W=0,Y=""}else L=this._document.createElement("span");if(ne=He.bg,ke=He.fg,Ae=He.extended.ext,G=eo,$=me,le=oi,gt&&A>=Me&&A<=ot&&(A=Me),!this._coreService.isCursorHidden&&Rr&&this._coreService.isCursorInitialized){if(ie.push("xterm-cursor"),this._coreBrowserService.isFocused)D&&ie.push("xterm-cursor-blink"),ie.push(C==="bar"?"xterm-cursor-bar":C==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":ie.push("xterm-cursor-outline");break;case"block":ie.push("xterm-cursor-block");break;case"bar":ie.push("xterm-cursor-bar");break;case"underline":ie.push("xterm-cursor-underline")}}if(He.isBold()&&ie.push("xterm-bold"),He.isItalic()&&ie.push("xterm-italic"),He.isDim()&&ie.push("xterm-dim"),Y=He.isInvisible()?c.WHITESPACE_CELL_CHAR:He.getChars()||c.WHITESPACE_CELL_CHAR,He.isUnderline()&&(ie.push(`xterm-underline-${He.extended.underlineStyle}`),Y===" "&&(Y="\xA0"),!He.isUnderlineColorDefault()))if(He.isUnderlineColorRGB())L.style.textDecorationColor=`rgb(${b.AttributeData.toColorRGB(He.getUnderlineColor()).join(",")})`;else{let Ri=He.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&He.isBold()&&Ri<8&&(Ri+=8),L.style.textDecorationColor=T.ansi[Ri].css}He.isOverline()&&(ie.push("xterm-overline"),Y===" "&&(Y="\xA0")),He.isStrikethrough()&&ie.push("xterm-strikethrough"),eo&&(L.style.textDecoration="underline");let Ao=He.getFgColor(),g1=He.getFgColorMode(),ml=He.getBgColor(),b1=He.getBgColorMode(),R6=!!He.isInverse();if(R6){let Ri=Ao;Ao=ml,ml=Ri;let yse=g1;g1=b1,b1=yse}let Yc,Dw,Kc,v1=!1;switch(this._decorationService.forEachDecorationAtCell(Me,_,void 0,(Ri=>{Ri.options.layer!=="top"&&v1||(Ri.backgroundColorRGB&&(b1=50331648,ml=Ri.backgroundColorRGB.rgba>>8&16777215,Yc=Ri.backgroundColorRGB),Ri.foregroundColorRGB&&(g1=50331648,Ao=Ri.foregroundColorRGB.rgba>>8&16777215,Dw=Ri.foregroundColorRGB),v1=Ri.options.layer==="top")})),!v1&&oi&&(Yc=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,ml=Yc.rgba>>8&16777215,b1=50331648,v1=!0,T.selectionForeground&&(g1=50331648,Ao=T.selectionForeground.rgba>>8&16777215,Dw=T.selectionForeground)),v1&&ie.push("xterm-decoration-top"),b1){case 16777216:case 33554432:Kc=T.ansi[ml],ie.push(`xterm-bg-${ml}`);break;case 50331648:Kc=p.channels.toColor(ml>>16,ml>>8&255,255&ml),this._addStyle(L,`background-color:#${y((ml>>>0).toString(16),"0",6)}`);break;default:R6?(Kc=T.foreground,ie.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):Kc=T.background}switch(Yc||He.isDim()&&(Yc=p.color.multiplyOpacity(Kc,.5)),g1){case 16777216:case 33554432:He.isBold()&&Ao<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ao+=8),this._applyMinimumContrast(L,Kc,T.ansi[Ao],He,Yc,void 0)||ie.push(`xterm-fg-${Ao}`);break;case 50331648:let Ri=p.channels.toColor(Ao>>16&255,Ao>>8&255,255&Ao);this._applyMinimumContrast(L,Kc,Ri,He,Yc,Dw)||this._addStyle(L,`color:#${y(Ao.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(L,Kc,T.foreground,He,Yc,Dw)||R6&&ie.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}ie.length&&(L.className=ie.join(" "),ie.length=0),Rr||gt||Xc?L.textContent=Y:W++,me!==this.defaultSpacing&&(L.style.letterSpacing=`${me}px`),N.push(L),Me=ot}return L&&W&&(L.textContent=Y),N}_applyMinimumContrast(x,_,w,C,E,A){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,g.treatGlyphAsBackgroundColor)(C.getCode()))return!1;let D=this._getContrastCache(C),R;if(E||A||(R=D.getColor(_.rgba,w.rgba)),R===void 0){let I=this._optionsService.rawOptions.minimumContrastRatio/(C.isDim()?2:1);R=p.color.ensureContrastRatio(E||_,A||w,I),D.setColor((E||_).rgba,(A||w).rgba,R??null)}return!!R&&(this._addStyle(x,`color:${R.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,_){x.setAttribute("style",`${x.getAttribute("style")||""}${_};`)}_isCellInSelection(x,_){let w=this._selectionStart,C=this._selectionEnd;return!(!w||!C)&&(this._columnSelectMode?w[0]<=C[0]?x>=w[0]&&_>=w[1]&&x<C[0]&&_<=C[1]:x<w[0]&&_>=w[1]&&x>=C[0]&&_<=C[1]:_>w[1]&&_<C[1]||w[1]===C[1]&&_===w[1]&&x>=w[0]&&x<C[0]||w[1]<C[1]&&_===C[1]&&x<C[0]||w[1]<C[1]&&_===w[1]&&x>=w[0])}};function y(x,_,w){for(;x.length<w;)x=_+x;return x}s.DomRendererRowFactory=v=a([l(1,f.ICharacterJoinerService),l(2,d.IOptionsService),l(3,f.ICoreBrowserService),l(4,d.ICoreService),l(5,d.IDecorationService),l(6,f.IThemeService)],v)},2550:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(o,a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let l=o.createElement("span");l.classList.add("xterm-char-measure-element");let u=o.createElement("span");u.classList.add("xterm-char-measure-element"),u.style.fontWeight="bold";let c=o.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontStyle="italic";let h=o.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold",h.style.fontStyle="italic",this._measureElements=[l,u,c,h],this._container.appendChild(l),this._container.appendChild(u),this._container.appendChild(c),this._container.appendChild(h),a.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,a,l,u){o===this._font&&a===this._fontSize&&l===this._weight&&u===this._weightBold||(this._font=o,this._fontSize=a,this._weight=l,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${l}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${l}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(o,a,l){let u=0;if(!a&&!l&&o.length===1&&(u=o.charCodeAt(0))<256){if(this._flat[u]!==-9999)return this._flat[u];let d=this._measure(o,0);return d>0&&(this._flat[u]=d),d}let c=o;a&&(c+="B"),l&&(c+="I");let h=this._holey.get(c);if(h===void 0){let d=0;a&&(d|=1),l&&(d|=2),h=this._measure(o,d),h>0&&this._holey.set(c,h)}return h}_measure(o,a){let l=this._measureElements[a];return l.textContent=o.repeat(32),l.offsetWidth/32}}},2223:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let a=o(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(n,s)=>{function o(l){return 57508<=l&&l<=57558}function a(l){return l>=128512&&l<=128591||l>=127744&&l<=128511||l>=128640&&l<=128767||l>=9728&&l<=9983||l>=9984&&l<=10175||l>=65024&&l<=65039||l>=129280&&l<=129535||l>=127462&&l<=127487}Object.defineProperty(s,"__esModule",{value:!0}),s.computeNextVariantOffset=s.createRenderDimensions=s.treatGlyphAsBackgroundColor=s.allowRescaling=s.isEmoji=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},s.isPowerlineGlyph=o,s.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},s.isEmoji=a,s.allowRescaling=function(l,u,c,h){return u===1&&c>Math.ceil(1.5*h)&&l!==void 0&&l>255&&!a(l)&&!o(l)&&!(function(d){return 57344<=d&&d<=63743})(l)},s.treatGlyphAsBackgroundColor=function(l){return o(l)||(function(u){return 9472<=u&&u<=9631})(l)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},s.computeNextVariantOffset=function(l,u,c=0){return(l-(2*Math.round(u)-c))%(2*Math.round(u))}},6052:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(l,u,c,h=!1){if(this.selectionStart=u,this.selectionEnd=c,!u||!c||u[0]===c[0]&&u[1]===c[1])return void this.clear();let d=l.buffers.active.ydisp,p=u[1]-d,f=c[1]-d,m=Math.max(p,0),g=Math.min(f,l.rows-1);m>=l.rows||g<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=h,this.viewportStartRow=p,this.viewportEndRow=f,this.viewportCappedStartRow=m,this.viewportCappedEndRow=g,this.startCol=u[0],this.endCol=c[0])}isCellSelected(l,u,c){return!!this.hasSelection&&(c-=l.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&c>=this.viewportCappedStartRow&&u<this.endCol&&c<=this.viewportCappedEndRow:u<this.startCol&&c>=this.viewportCappedStartRow&&u>=this.endCol&&c<=this.viewportCappedEndRow:c>this.viewportStartRow&&c<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&c===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&c===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&c===this.viewportStartRow&&u>=this.startCol)}}s.createSelectionRenderModel=function(){return new o}},456:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,a=this.selectionEnd;return!(!o||!a)&&(o[1]>a[1]||o[1]===a[1]&&o[0]>a[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(n,s,o){var a=this&&this.__decorate||function(g,b,v,y){var x,_=arguments.length,w=_<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,b,v,y);else for(var C=g.length-1;C>=0;C--)(x=g[C])&&(w=(_<3?x(w):_>3?x(b,v,w):x(b,v))||w);return _>3&&w&&Object.defineProperty(b,v,w),w},l=this&&this.__param||function(g,b){return function(v,y){b(v,y,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;let u=o(2585),c=o(8460),h=o(844),d=s.CharSizeService=class extends h.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(g,b,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new c.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new m(this._optionsService))}catch{this._measureStrategy=this.register(new f(g,b,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){let g=this._measureStrategy.measure();g.width===this.width&&g.height===this.height||(this.width=g.width,this.height=g.height,this._onCharSizeChange.fire())}};s.CharSizeService=d=a([l(2,u.IOptionsService)],d);class p extends h.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(b,v){b!==void 0&&b>0&&v!==void 0&&v>0&&(this._result.width=b,this._result.height=v)}}class f extends p{constructor(b,v,y){super(),this._document=b,this._parentElement=v,this._optionsService=y,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class m extends p{constructor(b){super(),this._optionsService=b,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let v=this._ctx.measureText("W");if(!("width"in v&&"fontBoundingBoxAscent"in v&&"fontBoundingBoxDescent"in v))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let b=this._ctx.measureText("W");return this._validateAndSet(b.width,b.fontBoundingBoxAscent+b.fontBoundingBoxDescent),this._result}}},4269:function(n,s,o){var a=this&&this.__decorate||function(m,g,b,v){var y,x=arguments.length,_=x<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(m,g,b,v);else for(var w=m.length-1;w>=0;w--)(y=m[w])&&(_=(x<3?y(_):x>3?y(g,b,_):y(g,b))||_);return x>3&&_&&Object.defineProperty(g,b,_),_},l=this&&this.__param||function(m,g){return function(b,v){g(b,v,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;let u=o(3734),c=o(643),h=o(511),d=o(2585);class p extends u.AttributeData{constructor(g,b,v){super(),this.content=0,this.combinedData="",this.fg=g.fg,this.bg=g.bg,this.combinedData=b,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(g){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=p;let f=s.CharacterJoinerService=class Cee{constructor(g){this._bufferService=g,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new h.CellData}register(g){let b={id:this._nextCharacterJoinerId++,handler:g};return this._characterJoiners.push(b),b.id}deregister(g){for(let b=0;b<this._characterJoiners.length;b++)if(this._characterJoiners[b].id===g)return this._characterJoiners.splice(b,1),!0;return!1}getJoinedCharacters(g){if(this._characterJoiners.length===0)return[];let b=this._bufferService.buffer.lines.get(g);if(!b||b.length===0)return[];let v=[],y=b.translateToString(!0),x=0,_=0,w=0,C=b.getFg(0),E=b.getBg(0);for(let A=0;A<b.getTrimmedLength();A++)if(b.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==E){if(A-x>1){let D=this._getJoinedRanges(y,w,_,b,x);for(let R=0;R<D.length;R++)v.push(D[R])}x=A,w=_,C=this._workCell.fg,E=this._workCell.bg}_+=this._workCell.getChars().length||c.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){let A=this._getJoinedRanges(y,w,_,b,x);for(let D=0;D<A.length;D++)v.push(A[D])}return v}_getJoinedRanges(g,b,v,y,x){let _=g.substring(b,v),w=[];try{w=this._characterJoiners[0].handler(_)}catch(C){console.error(C)}for(let C=1;C<this._characterJoiners.length;C++)try{let E=this._characterJoiners[C].handler(_);for(let A=0;A<E.length;A++)Cee._mergeRanges(w,E[A])}catch(E){console.error(E)}return this._stringRangesToCellRanges(w,y,x),w}_stringRangesToCellRanges(g,b,v){let y=0,x=!1,_=0,w=g[y];if(w){for(let C=v;C<this._bufferService.cols;C++){let E=b.getWidth(C),A=b.getString(C).length||c.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!x&&w[0]<=_&&(w[0]=C,x=!0),w[1]<=_){if(w[1]=C,w=g[++y],!w)break;w[0]<=_?(w[0]=C,x=!0):x=!1}_+=A}}w&&(w[1]=this._bufferService.cols)}}static _mergeRanges(g,b){let v=!1;for(let y=0;y<g.length;y++){let x=g[y];if(v){if(b[1]<=x[0])return g[y-1][1]=b[1],g;if(b[1]<=x[1])return g[y-1][1]=Math.max(b[1],x[1]),g.splice(y,1),g;g.splice(y,1),y--}else{if(b[1]<=x[0])return g.splice(y,0,b),g;if(b[1]<=x[1])return x[0]=Math.min(b[0],x[0]),g;b[0]<x[1]&&(x[0]=Math.min(b[0],x[0]),v=!0)}}return v?g[g.length-1][1]=b[1]:g.push(b),g}};s.CharacterJoinerService=f=a([l(0,d.IBufferService)],f)},5114:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;let a=o(844),l=o(8460),u=o(3656);class c extends a.Disposable{constructor(p,f,m){super(),this._textarea=p,this._window=f,this.mainDocument=m,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new h(this._window),this._onDprChange=this.register(new l.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new l.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((g=>this._screenDprMonitor.setWindow(g)))),this.register((0,l.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(p){this._window!==p&&(this._window=p,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}s.CoreBrowserService=c;class h extends a.Disposable{constructor(p){super(),this._parentWindow=p,this._windowResizeListener=this.register(new a.MutableDisposable),this._onDprChange=this.register(new l.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,a.toDisposable)((()=>this.clearListener())))}setWindow(p){this._parentWindow=p,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,u.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkProviderService=void 0;let a=o(844);class l extends a.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,a.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(c){return this.linkProviders.push(c),{dispose:()=>{let h=this.linkProviders.indexOf(c);h!==-1&&this.linkProviders.splice(h,1)}}}}s.LinkProviderService=l},8934:function(n,s,o){var a=this&&this.__decorate||function(d,p,f,m){var g,b=arguments.length,v=b<3?p:m===null?m=Object.getOwnPropertyDescriptor(p,f):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(d,p,f,m);else for(var y=d.length-1;y>=0;y--)(g=d[y])&&(v=(b<3?g(v):b>3?g(p,f,v):g(p,f))||v);return b>3&&v&&Object.defineProperty(p,f,v),v},l=this&&this.__param||function(d,p){return function(f,m){p(f,m,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;let u=o(4725),c=o(9806),h=s.MouseService=class{constructor(d,p){this._renderService=d,this._charSizeService=p}getCoords(d,p,f,m,g){return(0,c.getCoords)(window,d,p,f,m,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,g)}getMouseReportCoords(d,p){let f=(0,c.getCoordsRelativeToElement)(window,d,p);if(this._charSizeService.hasValidSize)return f[0]=Math.min(Math.max(f[0],0),this._renderService.dimensions.css.canvas.width-1),f[1]=Math.min(Math.max(f[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(f[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(f[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(f[0]),y:Math.floor(f[1])}}};s.MouseService=h=a([l(0,u.IRenderService),l(1,u.ICharSizeService)],h)},3230:function(n,s,o){var a=this&&this.__decorate||function(g,b,v,y){var x,_=arguments.length,w=_<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,b,v,y);else for(var C=g.length-1;C>=0;C--)(x=g[C])&&(w=(_<3?x(w):_>3?x(b,v,w):x(b,v))||w);return _>3&&w&&Object.defineProperty(b,v,w),w},l=this&&this.__param||function(g,b){return function(v,y){b(v,y,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;let u=o(6193),c=o(4725),h=o(8460),d=o(844),p=o(7226),f=o(2585),m=s.RenderService=class extends d.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,b,v,y,x,_,w,C){super(),this._rowCount=g,this._charSizeService=y,this._renderer=this.register(new d.MutableDisposable),this._pausedResizeTask=new p.DebouncedIdleTask,this._observerDisposable=this.register(new d.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new h.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new h.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new h.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new h.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new u.RenderDebouncer(((E,A)=>this._renderRows(E,A)),w),this.register(this._renderDebouncer),this.register(w.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(_.onResize((()=>this._fullRefresh()))),this.register(_.buffers.onBufferActivate((()=>this._renderer.value?.clear()))),this.register(v.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(x.onDecorationRegistered((()=>this._fullRefresh()))),this.register(x.onDecorationRemoved((()=>this._fullRefresh()))),this.register(v.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(_.cols,_.rows),this._fullRefresh()}))),this.register(v.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(_.buffer.y,_.buffer.y,!0)))),this.register(C.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(w.window,b),this.register(w.onWindowChange((E=>this._registerIntersectionObserver(E,b))))}_registerIntersectionObserver(g,b){if("IntersectionObserver"in g){let v=new g.IntersectionObserver((y=>this._handleIntersectionChange(y[y.length-1])),{threshold:0});v.observe(b),this._observerDisposable.value=(0,d.toDisposable)((()=>v.disconnect()))}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,b,v=!1){this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,b,this._rowCount))}_renderRows(g,b){this._renderer.value&&(g=Math.min(g,this._rowCount-1),b=Math.min(b,this._rowCount-1),this._renderer.value.renderRows(g,b),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:b}),this._onRender.fire({start:g,end:b}),this._isNextRenderRedrawOnly=!0)}resize(g,b){this._rowCount=b,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value&&(this._renderer.value.onRequestRedraw((b=>this.refreshRows(b.start,b.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,b){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value?.handleResize(g,b))):this._renderer.value.handleResize(g,b),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(g,b,v){this._selectionState.start=g,this._selectionState.end=b,this._selectionState.columnSelectMode=v,this._renderer.value?.handleSelectionChanged(g,b,v)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};s.RenderService=m=a([l(2,f.IOptionsService),l(3,c.ICharSizeService),l(4,f.IDecorationService),l(5,f.IBufferService),l(6,c.ICoreBrowserService),l(7,c.IThemeService)],m)},9312:function(n,s,o){var a=this&&this.__decorate||function(w,C,E,A){var D,R=arguments.length,I=R<3?C:A===null?A=Object.getOwnPropertyDescriptor(C,E):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(w,C,E,A);else for(var z=w.length-1;z>=0;z--)(D=w[z])&&(I=(R<3?D(I):R>3?D(C,E,I):D(C,E))||I);return R>3&&I&&Object.defineProperty(C,E,I),I},l=this&&this.__param||function(w,C){return function(E,A){C(E,A,w)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;let u=o(9806),c=o(9504),h=o(456),d=o(4725),p=o(8460),f=o(844),m=o(6114),g=o(4841),b=o(511),v=o(2585),y="\xA0",x=new RegExp(y,"g"),_=s.SelectionService=class extends f.Disposable{constructor(w,C,E,A,D,R,I,z,B){super(),this._element=w,this._screenElement=C,this._linkifier=E,this._bufferService=A,this._coreService=D,this._mouseService=R,this._optionsService=I,this._renderService=z,this._coreBrowserService=B,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new b.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new p.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new p.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new p.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=N=>this._handleMouseMove(N),this._mouseUpListener=N=>this._handleMouseUp(N),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((N=>this._handleTrim(N))),this.register(this._bufferService.buffers.onBufferActivate((N=>this._handleBufferActivate(N)))),this.enable(),this._model=new h.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,f.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let w=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!w||!C||w[0]===C[0]&&w[1]===C[1])}get selectionText(){let w=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!w||!C)return"";let E=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(w[0]===C[0])return"";let D=w[0]<C[0]?w[0]:C[0],R=w[0]<C[0]?C[0]:w[0];for(let I=w[1];I<=C[1];I++){let z=E.translateBufferLineToString(I,!0,D,R);A.push(z)}}else{let D=w[1]===C[1]?C[0]:void 0;A.push(E.translateBufferLineToString(w[1],!0,w[0],D));for(let R=w[1]+1;R<=C[1]-1;R++){let I=E.lines.get(R),z=E.translateBufferLineToString(R,!0);I?.isWrapped?A[A.length-1]+=z:A.push(z)}if(w[1]!==C[1]){let R=E.lines.get(C[1]),I=E.translateBufferLineToString(C[1],!0,0,C[0]);R&&R.isWrapped?A[A.length-1]+=I:A.push(I)}}return A.map((D=>D.replace(x," "))).join(m.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(w){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),m.isLinux&&w&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(w){let C=this._getMouseBufferCoords(w),E=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!!(E&&A&&C)&&this._areCoordsInSelection(C,E,A)}isCellInSelection(w,C){let E=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!E||!A)&&this._areCoordsInSelection([w,C],E,A)}_areCoordsInSelection(w,C,E){return w[1]>C[1]&&w[1]<E[1]||C[1]===E[1]&&w[1]===C[1]&&w[0]>=C[0]&&w[0]<E[0]||C[1]<E[1]&&w[1]===E[1]&&w[0]<E[0]||C[1]<E[1]&&w[1]===C[1]&&w[0]>=C[0]}_selectWordAtCursor(w,C){let E=this._linkifier.currentLink?.link?.range;if(E)return this._model.selectionStart=[E.start.x-1,E.start.y-1],this._model.selectionStartLength=(0,g.getRangeLength)(E,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let A=this._getMouseBufferCoords(w);return!!A&&(this._selectWordAt(A,C),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(w,C){this._model.clearSelection(),w=Math.max(w,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,w],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()}_handleTrim(w){this._model.handleTrim(w)&&this.refresh()}_getMouseBufferCoords(w){let C=this._mouseService.getCoords(w,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C}_getMouseEventScrollAmount(w){let C=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,w,this._screenElement)[1],E=this._renderService.dimensions.css.canvas.height;return C>=0&&C<=E?0:(C>E&&(C-=E),C=Math.min(Math.max(C,-50),50),C/=50,C/Math.abs(C)+Math.round(14*C))}shouldForceSelection(w){return m.isMac?w.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:w.shiftKey}handleMouseDown(w){if(this._mouseDownTimeStamp=w.timeStamp,(w.button!==2||!this.hasSelection)&&w.button===0){if(!this._enabled){if(!this.shouldForceSelection(w))return;w.stopPropagation()}w.preventDefault(),this._dragScrollAmount=0,this._enabled&&w.shiftKey?this._handleIncrementalClick(w):w.detail===1?this._handleSingleClick(w):w.detail===2?this._handleDoubleClick(w):w.detail===3&&this._handleTripleClick(w),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(w){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(w))}_handleSingleClick(w){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(w)?3:0,this._model.selectionStart=this._getMouseBufferCoords(w),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(w){this._selectWordAtCursor(w,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(w){let C=this._getMouseBufferCoords(w);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))}shouldColumnSelect(w){return w.altKey&&!(m.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(w){if(w.stopImmediatePropagation(),!this._model.selectionStart)return;let C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(w),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(w),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){let A=E.lines.get(this._model.selectionEnd[1]);A&&A.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let w=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(w.ydisp+this._bufferService.rows,w.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=w.ydisp),this.refresh()}}_handleMouseUp(w){let C=w.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&w.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let E=this._mouseService.getCoords(w,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){let A=(0,c.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(A,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let w=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,E=!(!w||!C||w[0]===C[0]&&w[1]===C[1]);E?w&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&w[0]===this._oldSelectionStart[0]&&w[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(w,C,E)):this._oldHasSelection&&this._fireOnSelectionChange(w,C,E)}_fireOnSelectionChange(w,C,E){this._oldSelectionStart=w,this._oldSelectionEnd=C,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(w){this.clearSelection(),this._trimListener.dispose(),this._trimListener=w.activeBuffer.lines.onTrim((C=>this._handleTrim(C)))}_convertViewportColToCharacterIndex(w,C){let E=C;for(let A=0;C>=A;A++){let D=w.loadCell(A,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:D>1&&C!==A&&(E+=D-1)}return E}setSelection(w,C,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[w,C],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(w){this._isClickInSelection(w)||(this._selectWordAtCursor(w,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(w,C,E=!0,A=!0){if(w[0]>=this._bufferService.cols)return;let D=this._bufferService.buffer,R=D.lines.get(w[1]);if(!R)return;let I=D.translateBufferLineToString(w[1],!1),z=this._convertViewportColToCharacterIndex(R,w[0]),B=z,N=w[0]-z,H=0,T=0,L=0,P=0;if(I.charAt(z)===" "){for(;z>0&&I.charAt(z-1)===" ";)z--;for(;B<I.length&&I.charAt(B+1)===" ";)B++}else{let ne=w[0],ke=w[0];R.getWidth(ne)===0&&(H++,ne--),R.getWidth(ke)===2&&(T++,ke++);let Ae=R.getString(ke).length;for(Ae>1&&(P+=Ae-1,B+=Ae-1);ne>0&&z>0&&!this._isCharWordSeparator(R.loadCell(ne-1,this._workCell));){R.loadCell(ne-1,this._workCell);let G=this._workCell.getChars().length;this._workCell.getWidth()===0?(H++,ne--):G>1&&(L+=G-1,z-=G-1),z--,ne--}for(;ke<R.length&&B+1<I.length&&!this._isCharWordSeparator(R.loadCell(ke+1,this._workCell));){R.loadCell(ke+1,this._workCell);let G=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,ke++):G>1&&(P+=G-1,B+=G-1),B++,ke++}}B++;let W=z+N-H+L,Y=Math.min(this._bufferService.cols,B-z+H+T-L-P);if(C||I.slice(z,B).trim()!==""){if(E&&W===0&&R.getCodePoint(0)!==32){let ne=D.lines.get(w[1]-1);if(ne&&R.isWrapped&&ne.getCodePoint(this._bufferService.cols-1)!==32){let ke=this._getWordAt([this._bufferService.cols-1,w[1]-1],!1,!0,!1);if(ke){let Ae=this._bufferService.cols-ke.start;W-=Ae,Y+=Ae}}}if(A&&W+Y===this._bufferService.cols&&R.getCodePoint(this._bufferService.cols-1)!==32){let ne=D.lines.get(w[1]+1);if(ne?.isWrapped&&ne.getCodePoint(0)!==32){let ke=this._getWordAt([0,w[1]+1],!1,!1,!0);ke&&(Y+=ke.length)}}return{start:W,length:Y}}}_selectWordAt(w,C){let E=this._getWordAt(w,C);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,w[1]--;this._model.selectionStart=[E.start,w[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(w){let C=this._getWordAt(w,!0);if(C){let E=w[1];for(;C.start<0;)C.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,E]}}_isCharWordSeparator(w){return w.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(w.getChars())>=0}_selectLineAt(w){let C=this._bufferService.buffer.getWrappedRangeForLine(w),E={start:{x:0,y:C.first},end:{x:this._bufferService.cols-1,y:C.last}};this._model.selectionStart=[0,C.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,g.getRangeLength)(E,this._bufferService.cols)}};s.SelectionService=_=a([l(3,v.IBufferService),l(4,v.ICoreService),l(5,d.IMouseService),l(6,v.IOptionsService),l(7,d.IRenderService),l(8,d.ICoreBrowserService)],_)},4725:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ILinkProviderService=s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;let a=o(8343);s.ICharSizeService=(0,a.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),s.IMouseService=(0,a.createDecorator)("MouseService"),s.IRenderService=(0,a.createDecorator)("RenderService"),s.ISelectionService=(0,a.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,a.createDecorator)("ThemeService"),s.ILinkProviderService=(0,a.createDecorator)("LinkProviderService")},6731:function(n,s,o){var a=this&&this.__decorate||function(_,w,C,E){var A,D=arguments.length,R=D<3?w:E===null?E=Object.getOwnPropertyDescriptor(w,C):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(_,w,C,E);else for(var I=_.length-1;I>=0;I--)(A=_[I])&&(R=(D<3?A(R):D>3?A(w,C,R):A(w,C))||R);return D>3&&R&&Object.defineProperty(w,C,R),R},l=this&&this.__param||function(_,w){return function(C,E){w(C,E,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;let u=o(7239),c=o(8055),h=o(8460),d=o(844),p=o(2585),f=c.css.toColor("#ffffff"),m=c.css.toColor("#000000"),g=c.css.toColor("#ffffff"),b=c.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let _=[c.css.toColor("#2e3436"),c.css.toColor("#cc0000"),c.css.toColor("#4e9a06"),c.css.toColor("#c4a000"),c.css.toColor("#3465a4"),c.css.toColor("#75507b"),c.css.toColor("#06989a"),c.css.toColor("#d3d7cf"),c.css.toColor("#555753"),c.css.toColor("#ef2929"),c.css.toColor("#8ae234"),c.css.toColor("#fce94f"),c.css.toColor("#729fcf"),c.css.toColor("#ad7fa8"),c.css.toColor("#34e2e2"),c.css.toColor("#eeeeec")],w=[0,95,135,175,215,255];for(let C=0;C<216;C++){let E=w[C/36%6|0],A=w[C/6%6|0],D=w[C%6];_.push({css:c.channels.toCss(E,A,D),rgba:c.channels.toRgba(E,A,D)})}for(let C=0;C<24;C++){let E=8+10*C;_.push({css:c.channels.toCss(E,E,E),rgba:c.channels.toRgba(E,E,E)})}return _})());let y=s.ThemeService=class extends d.Disposable{get colors(){return this._colors}constructor(_){super(),this._optionsService=_,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new h.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:f,background:m,cursor:g,cursorAccent:b,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:c.color.blend(m,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:c.color.blend(m,v),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(_={}){let w=this._colors;if(w.foreground=x(_.foreground,f),w.background=x(_.background,m),w.cursor=x(_.cursor,g),w.cursorAccent=x(_.cursorAccent,b),w.selectionBackgroundTransparent=x(_.selectionBackground,v),w.selectionBackgroundOpaque=c.color.blend(w.background,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundTransparent=x(_.selectionInactiveBackground,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundOpaque=c.color.blend(w.background,w.selectionInactiveBackgroundTransparent),w.selectionForeground=_.selectionForeground?x(_.selectionForeground,c.NULL_COLOR):void 0,w.selectionForeground===c.NULL_COLOR&&(w.selectionForeground=void 0),c.color.isOpaque(w.selectionBackgroundTransparent)&&(w.selectionBackgroundTransparent=c.color.opacity(w.selectionBackgroundTransparent,.3)),c.color.isOpaque(w.selectionInactiveBackgroundTransparent)&&(w.selectionInactiveBackgroundTransparent=c.color.opacity(w.selectionInactiveBackgroundTransparent,.3)),w.ansi=s.DEFAULT_ANSI_COLORS.slice(),w.ansi[0]=x(_.black,s.DEFAULT_ANSI_COLORS[0]),w.ansi[1]=x(_.red,s.DEFAULT_ANSI_COLORS[1]),w.ansi[2]=x(_.green,s.DEFAULT_ANSI_COLORS[2]),w.ansi[3]=x(_.yellow,s.DEFAULT_ANSI_COLORS[3]),w.ansi[4]=x(_.blue,s.DEFAULT_ANSI_COLORS[4]),w.ansi[5]=x(_.magenta,s.DEFAULT_ANSI_COLORS[5]),w.ansi[6]=x(_.cyan,s.DEFAULT_ANSI_COLORS[6]),w.ansi[7]=x(_.white,s.DEFAULT_ANSI_COLORS[7]),w.ansi[8]=x(_.brightBlack,s.DEFAULT_ANSI_COLORS[8]),w.ansi[9]=x(_.brightRed,s.DEFAULT_ANSI_COLORS[9]),w.ansi[10]=x(_.brightGreen,s.DEFAULT_ANSI_COLORS[10]),w.ansi[11]=x(_.brightYellow,s.DEFAULT_ANSI_COLORS[11]),w.ansi[12]=x(_.brightBlue,s.DEFAULT_ANSI_COLORS[12]),w.ansi[13]=x(_.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),w.ansi[14]=x(_.brightCyan,s.DEFAULT_ANSI_COLORS[14]),w.ansi[15]=x(_.brightWhite,s.DEFAULT_ANSI_COLORS[15]),_.extendedAnsi){let C=Math.min(w.ansi.length-16,_.extendedAnsi.length);for(let E=0;E<C;E++)w.ansi[E+16]=x(_.extendedAnsi[E],s.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(_){this._restoreColor(_),this._onChangeColors.fire(this.colors)}_restoreColor(_){if(_!==void 0)switch(_){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[_]=this._restoreColors.ansi[_]}else for(let w=0;w<this._restoreColors.ansi.length;++w)this._colors.ansi[w]=this._restoreColors.ansi[w]}modifyColors(_){_(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(_,w){if(_!==void 0)try{return c.css.toColor(_)}catch{}return w}s.ThemeService=y=a([l(0,p.IOptionsService)],y)},6349:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;let a=o(8460),l=o(844);class u extends l.Disposable{constructor(h){super(),this._maxLength=h,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(h){if(this._maxLength===h)return;let d=new Array(h);for(let p=0;p<Math.min(h,this.length);p++)d[p]=this._array[this._getCyclicIndex(p)];this._array=d,this._maxLength=h,this._startIndex=0}get length(){return this._length}set length(h){if(h>this._length)for(let d=this._length;d<h;d++)this._array[d]=void 0;this._length=h}get(h){return this._array[this._getCyclicIndex(h)]}set(h,d){this._array[this._getCyclicIndex(h)]=d}push(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(h,d,...p){if(d){for(let f=h;f<this._length-d;f++)this._array[this._getCyclicIndex(f)]=this._array[this._getCyclicIndex(f+d)];this._length-=d,this.onDeleteEmitter.fire({index:h,amount:d})}for(let f=this._length-1;f>=h;f--)this._array[this._getCyclicIndex(f+p.length)]=this._array[this._getCyclicIndex(f)];for(let f=0;f<p.length;f++)this._array[this._getCyclicIndex(h+f)]=p[f];if(p.length&&this.onInsertEmitter.fire({index:h,amount:p.length}),this._length+p.length>this._maxLength){let f=this._length+p.length-this._maxLength;this._startIndex+=f,this._length=this._maxLength,this.onTrimEmitter.fire(f)}else this._length+=p.length}trimStart(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)}shiftElements(h,d,p){if(!(d<=0)){if(h<0||h>=this._length)throw new Error("start argument out of range");if(h+p<0)throw new Error("Cannot shift elements in list beyond index 0");if(p>0){for(let m=d-1;m>=0;m--)this.set(h+m+p,this.get(h+m));let f=h+d+p-this._length;if(f>0)for(this._length+=f;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let f=0;f<d;f++)this.set(h+f+p,this.get(h+f))}}_getCyclicIndex(h){return(this._startIndex+h)%this._maxLength}}s.CircularList=u},1439:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function o(a,l=5){if(typeof a!="object")return a;let u=Array.isArray(a)?[]:{};for(let c in a)u[c]=l<=1?a[c]:a[c]&&o(a[c],l-1);return u}},8055:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let o=0,a=0,l=0,u=0;var c,h,d,p,f;function m(b){let v=b.toString(16);return v.length<2?"0"+v:v}function g(b,v){return b<v?(v+.05)/(b+.05):(b+.05)/(v+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},(function(b){b.toCss=function(v,y,x,_){return _!==void 0?`#${m(v)}${m(y)}${m(x)}${m(_)}`:`#${m(v)}${m(y)}${m(x)}`},b.toRgba=function(v,y,x,_=255){return(v<<24|y<<16|x<<8|_)>>>0},b.toColor=function(v,y,x,_){return{css:b.toCss(v,y,x,_),rgba:b.toRgba(v,y,x,_)}}})(c||(s.channels=c={})),(function(b){function v(y,x){return u=Math.round(255*x),[o,a,l]=f.toChannels(y.rgba),{css:c.toCss(o,a,l,u),rgba:c.toRgba(o,a,l,u)}}b.blend=function(y,x){if(u=(255&x.rgba)/255,u===1)return{css:x.css,rgba:x.rgba};let _=x.rgba>>24&255,w=x.rgba>>16&255,C=x.rgba>>8&255,E=y.rgba>>24&255,A=y.rgba>>16&255,D=y.rgba>>8&255;return o=E+Math.round((_-E)*u),a=A+Math.round((w-A)*u),l=D+Math.round((C-D)*u),{css:c.toCss(o,a,l),rgba:c.toRgba(o,a,l)}},b.isOpaque=function(y){return(255&y.rgba)==255},b.ensureContrastRatio=function(y,x,_){let w=f.ensureContrastRatio(y.rgba,x.rgba,_);if(w)return c.toColor(w>>24&255,w>>16&255,w>>8&255)},b.opaque=function(y){let x=(255|y.rgba)>>>0;return[o,a,l]=f.toChannels(x),{css:c.toCss(o,a,l),rgba:x}},b.opacity=v,b.multiplyOpacity=function(y,x){return u=255&y.rgba,v(y,u*x/255)},b.toColorRGB=function(y){return[y.rgba>>24&255,y.rgba>>16&255,y.rgba>>8&255]}})(h||(s.color=h={})),(function(b){let v,y;try{let x=document.createElement("canvas");x.width=1,x.height=1;let _=x.getContext("2d",{willReadFrequently:!0});_&&(v=_,v.globalCompositeOperation="copy",y=v.createLinearGradient(0,0,1,1))}catch{}b.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return o=parseInt(x.slice(1,2).repeat(2),16),a=parseInt(x.slice(2,3).repeat(2),16),l=parseInt(x.slice(3,4).repeat(2),16),c.toColor(o,a,l);case 5:return o=parseInt(x.slice(1,2).repeat(2),16),a=parseInt(x.slice(2,3).repeat(2),16),l=parseInt(x.slice(3,4).repeat(2),16),u=parseInt(x.slice(4,5).repeat(2),16),c.toColor(o,a,l,u);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}let _=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(_)return o=parseInt(_[1]),a=parseInt(_[2]),l=parseInt(_[3]),u=Math.round(255*(_[5]===void 0?1:parseFloat(_[5]))),c.toColor(o,a,l,u);if(!v||!y)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=y,v.fillStyle=x,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[o,a,l,u]=v.getImageData(0,0,1,1).data,u!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:c.toRgba(o,a,l,u),css:x}}})(d||(s.css=d={})),(function(b){function v(y,x,_){let w=y/255,C=x/255,E=_/255;return .2126*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.7152*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}b.relativeLuminance=function(y){return v(y>>16&255,y>>8&255,255&y)},b.relativeLuminance2=v})(p||(s.rgb=p={})),(function(b){function v(x,_,w){let C=x>>24&255,E=x>>16&255,A=x>>8&255,D=_>>24&255,R=_>>16&255,I=_>>8&255,z=g(p.relativeLuminance2(D,R,I),p.relativeLuminance2(C,E,A));for(;z<w&&(D>0||R>0||I>0);)D-=Math.max(0,Math.ceil(.1*D)),R-=Math.max(0,Math.ceil(.1*R)),I-=Math.max(0,Math.ceil(.1*I)),z=g(p.relativeLuminance2(D,R,I),p.relativeLuminance2(C,E,A));return(D<<24|R<<16|I<<8|255)>>>0}function y(x,_,w){let C=x>>24&255,E=x>>16&255,A=x>>8&255,D=_>>24&255,R=_>>16&255,I=_>>8&255,z=g(p.relativeLuminance2(D,R,I),p.relativeLuminance2(C,E,A));for(;z<w&&(D<255||R<255||I<255);)D=Math.min(255,D+Math.ceil(.1*(255-D))),R=Math.min(255,R+Math.ceil(.1*(255-R))),I=Math.min(255,I+Math.ceil(.1*(255-I))),z=g(p.relativeLuminance2(D,R,I),p.relativeLuminance2(C,E,A));return(D<<24|R<<16|I<<8|255)>>>0}b.blend=function(x,_){if(u=(255&_)/255,u===1)return _;let w=_>>24&255,C=_>>16&255,E=_>>8&255,A=x>>24&255,D=x>>16&255,R=x>>8&255;return o=A+Math.round((w-A)*u),a=D+Math.round((C-D)*u),l=R+Math.round((E-R)*u),c.toRgba(o,a,l)},b.ensureContrastRatio=function(x,_,w){let C=p.relativeLuminance(x>>8),E=p.relativeLuminance(_>>8);if(g(C,E)<w){if(E<C){let R=v(x,_,w),I=g(C,p.relativeLuminance(R>>8));if(I<w){let z=y(x,_,w);return I>g(C,p.relativeLuminance(z>>8))?R:z}return R}let A=y(x,_,w),D=g(C,p.relativeLuminance(A>>8));if(D<w){let R=v(x,_,w);return D>g(C,p.relativeLuminance(R>>8))?A:R}return A}},b.reduceLuminance=v,b.increaseLuminance=y,b.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]}})(f||(s.rgba=f={})),s.toPaddedHex=m,s.contrastRatio=g},8969:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;let a=o(844),l=o(2585),u=o(4348),c=o(7866),h=o(744),d=o(7302),p=o(6975),f=o(8460),m=o(1753),g=o(1480),b=o(7994),v=o(9282),y=o(5435),x=o(5981),_=o(2660),w=!1;class C extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new f.EventEmitter),this._onScroll.event((A=>{this._onScrollApi?.fire(A.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(A){for(let D in A)this.optionsService.options[D]=A[D]}constructor(A){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new f.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new f.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new f.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new f.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new d.OptionsService(A)),this._instantiationService.setService(l.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(h.BufferService)),this._instantiationService.setService(l.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(c.LogService)),this._instantiationService.setService(l.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(p.CoreService)),this._instantiationService.setService(l.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(m.CoreMouseService)),this._instantiationService.setService(l.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(g.UnicodeService)),this._instantiationService.setService(l.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(b.CharsetService),this._instantiationService.setService(l.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(_.OscLinkService),this._instantiationService.setService(l.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new y.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,f.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,f.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,f.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,f.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new x.WriteBuffer(((D,R)=>this._inputHandler.parse(D,R)))),this.register((0,f.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(A,D){this._writeBuffer.write(A,D)}writeSync(A,D){this._logService.logLevel<=l.LogLevelEnum.WARN&&!w&&(this._logService.warn("writeSync is unreliable and will be removed soon."),w=!0),this._writeBuffer.writeSync(A,D)}input(A,D=!0){this.coreService.triggerDataEvent(A,D)}resize(A,D){isNaN(A)||isNaN(D)||(A=Math.max(A,h.MINIMUM_COLS),D=Math.max(D,h.MINIMUM_ROWS),this._bufferService.resize(A,D))}scroll(A,D=!1){this._bufferService.scroll(A,D)}scrollLines(A,D,R){this._bufferService.scrollLines(A,D,R)}scrollPages(A){this.scrollLines(A*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(A){let D=A-this._bufferService.buffer.ydisp;D!==0&&this.scrollLines(D)}registerEscHandler(A,D){return this._inputHandler.registerEscHandler(A,D)}registerDcsHandler(A,D){return this._inputHandler.registerDcsHandler(A,D)}registerCsiHandler(A,D){return this._inputHandler.registerCsiHandler(A,D)}registerOscHandler(A,D){return this._inputHandler.registerOscHandler(A,D)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let A=!1,D=this.optionsService.rawOptions.windowsPty;D&&D.buildNumber!==void 0&&D.buildNumber!==void 0?A=D.backend==="conpty"&&D.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(A=!0),A?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let A=[];A.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),A.push(this.registerCsiHandler({final:"H"},(()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)((()=>{for(let D of A)D.dispose()}))}}}s.CoreTerminal=C},8460:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===o)return void this._listeners.splice(a,1)}}})),this._event}fire(o,a){let l=[];for(let u=0;u<this._listeners.length;u++)l.push(this._listeners[u]);for(let u=0;u<l.length;u++)l[u].call(void 0,o,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(o,a){return o((l=>a.fire(l)))},s.runAndSubscribe=function(o,a){return a(void 0),o((l=>a(l)))}},5435:function(n,s,o){var a=this&&this.__decorate||function(H,T,L,P){var W,Y=arguments.length,ne=Y<3?T:P===null?P=Object.getOwnPropertyDescriptor(T,L):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ne=Reflect.decorate(H,T,L,P);else for(var ke=H.length-1;ke>=0;ke--)(W=H[ke])&&(ne=(Y<3?W(ne):Y>3?W(T,L,ne):W(T,L))||ne);return Y>3&&ne&&Object.defineProperty(T,L,ne),ne},l=this&&this.__param||function(H,T){return function(L,P){T(L,P,H)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;let u=o(2584),c=o(7116),h=o(2015),d=o(844),p=o(482),f=o(8437),m=o(8460),g=o(643),b=o(511),v=o(3734),y=o(2585),x=o(1480),_=o(6242),w=o(6351),C=o(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},A=131072;function D(H,T){if(H>24)return T.setWinLines||!1;switch(H){case 1:return!!T.restoreWin;case 2:return!!T.minimizeWin;case 3:return!!T.setWinPosition;case 4:return!!T.setWinSizePixels;case 5:return!!T.raiseWin;case 6:return!!T.lowerWin;case 7:return!!T.refreshWin;case 8:return!!T.setWinSizeChars;case 9:return!!T.maximizeWin;case 10:return!!T.fullscreenWin;case 11:return!!T.getWinState;case 13:return!!T.getWinPosition;case 14:return!!T.getWinSizePixels;case 15:return!!T.getScreenSizePixels;case 16:return!!T.getCellSizePixels;case 18:return!!T.getWinSizeChars;case 19:return!!T.getScreenSizeChars;case 20:return!!T.getIconTitle;case 21:return!!T.getWinTitle;case 22:return!!T.pushTitle;case 23:return!!T.popTitle;case 24:return!!T.setWinLines}return!1}var R;(function(H){H[H.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",H[H.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R||(s.WindowsOptionsReportType=R={}));let I=0;class z extends d.Disposable{getAttrData(){return this._curAttrData}constructor(T,L,P,W,Y,ne,ke,Ae,G=new h.EscapeSequenceParser){super(),this._bufferService=T,this._charsetService=L,this._coreService=P,this._logService=W,this._optionsService=Y,this._oscLinkService=ne,this._coreMouseService=ke,this._unicodeService=Ae,this._parser=G,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new p.StringToUtf32,this._utf8Decoder=new p.Utf8ToUtf32,this._workCell=new b.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=f.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new m.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new m.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new m.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new m.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new m.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new m.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new m.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new m.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new m.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new m.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new m.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new m.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new m.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new B(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(($=>this._activeBuffer=$.activeBuffer))),this._parser.setCsiHandlerFallback((($,le)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString($),params:le.toArray()})})),this._parser.setEscHandlerFallback(($=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString($)})})),this._parser.setExecuteHandlerFallback(($=>{this._logService.debug("Unknown EXECUTE code: ",{code:$})})),this._parser.setOscHandlerFallback((($,le,me)=>{this._logService.debug("Unknown OSC code: ",{identifier:$,action:le,data:me})})),this._parser.setDcsHandlerFallback((($,le,me)=>{le==="HOOK"&&(me=me.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString($),action:le,payload:me})})),this._parser.setPrintHandler((($,le,me)=>this.print($,le,me))),this._parser.registerCsiHandler({final:"@"},($=>this.insertChars($))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},($=>this.scrollLeft($))),this._parser.registerCsiHandler({final:"A"},($=>this.cursorUp($))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},($=>this.scrollRight($))),this._parser.registerCsiHandler({final:"B"},($=>this.cursorDown($))),this._parser.registerCsiHandler({final:"C"},($=>this.cursorForward($))),this._parser.registerCsiHandler({final:"D"},($=>this.cursorBackward($))),this._parser.registerCsiHandler({final:"E"},($=>this.cursorNextLine($))),this._parser.registerCsiHandler({final:"F"},($=>this.cursorPrecedingLine($))),this._parser.registerCsiHandler({final:"G"},($=>this.cursorCharAbsolute($))),this._parser.registerCsiHandler({final:"H"},($=>this.cursorPosition($))),this._parser.registerCsiHandler({final:"I"},($=>this.cursorForwardTab($))),this._parser.registerCsiHandler({final:"J"},($=>this.eraseInDisplay($,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},($=>this.eraseInDisplay($,!0))),this._parser.registerCsiHandler({final:"K"},($=>this.eraseInLine($,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},($=>this.eraseInLine($,!0))),this._parser.registerCsiHandler({final:"L"},($=>this.insertLines($))),this._parser.registerCsiHandler({final:"M"},($=>this.deleteLines($))),this._parser.registerCsiHandler({final:"P"},($=>this.deleteChars($))),this._parser.registerCsiHandler({final:"S"},($=>this.scrollUp($))),this._parser.registerCsiHandler({final:"T"},($=>this.scrollDown($))),this._parser.registerCsiHandler({final:"X"},($=>this.eraseChars($))),this._parser.registerCsiHandler({final:"Z"},($=>this.cursorBackwardTab($))),this._parser.registerCsiHandler({final:"`"},($=>this.charPosAbsolute($))),this._parser.registerCsiHandler({final:"a"},($=>this.hPositionRelative($))),this._parser.registerCsiHandler({final:"b"},($=>this.repeatPrecedingCharacter($))),this._parser.registerCsiHandler({final:"c"},($=>this.sendDeviceAttributesPrimary($))),this._parser.registerCsiHandler({prefix:">",final:"c"},($=>this.sendDeviceAttributesSecondary($))),this._parser.registerCsiHandler({final:"d"},($=>this.linePosAbsolute($))),this._parser.registerCsiHandler({final:"e"},($=>this.vPositionRelative($))),this._parser.registerCsiHandler({final:"f"},($=>this.hVPosition($))),this._parser.registerCsiHandler({final:"g"},($=>this.tabClear($))),this._parser.registerCsiHandler({final:"h"},($=>this.setMode($))),this._parser.registerCsiHandler({prefix:"?",final:"h"},($=>this.setModePrivate($))),this._parser.registerCsiHandler({final:"l"},($=>this.resetMode($))),this._parser.registerCsiHandler({prefix:"?",final:"l"},($=>this.resetModePrivate($))),this._parser.registerCsiHandler({final:"m"},($=>this.charAttributes($))),this._parser.registerCsiHandler({final:"n"},($=>this.deviceStatus($))),this._parser.registerCsiHandler({prefix:"?",final:"n"},($=>this.deviceStatusPrivate($))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},($=>this.softReset($))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},($=>this.setCursorStyle($))),this._parser.registerCsiHandler({final:"r"},($=>this.setScrollRegion($))),this._parser.registerCsiHandler({final:"s"},($=>this.saveCursor($))),this._parser.registerCsiHandler({final:"t"},($=>this.windowOptions($))),this._parser.registerCsiHandler({final:"u"},($=>this.restoreCursor($))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},($=>this.insertColumns($))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},($=>this.deleteColumns($))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},($=>this.selectProtected($))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},($=>this.requestMode($,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},($=>this.requestMode($,!1))),this._parser.setExecuteHandler(u.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(u.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(u.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(u.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(u.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(u.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(u.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(u.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(u.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(u.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(u.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(u.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new _.OscHandler(($=>(this.setTitle($),this.setIconName($),!0)))),this._parser.registerOscHandler(1,new _.OscHandler(($=>this.setIconName($)))),this._parser.registerOscHandler(2,new _.OscHandler(($=>this.setTitle($)))),this._parser.registerOscHandler(4,new _.OscHandler(($=>this.setOrReportIndexedColor($)))),this._parser.registerOscHandler(8,new _.OscHandler(($=>this.setHyperlink($)))),this._parser.registerOscHandler(10,new _.OscHandler(($=>this.setOrReportFgColor($)))),this._parser.registerOscHandler(11,new _.OscHandler(($=>this.setOrReportBgColor($)))),this._parser.registerOscHandler(12,new _.OscHandler(($=>this.setOrReportCursorColor($)))),this._parser.registerOscHandler(104,new _.OscHandler(($=>this.restoreIndexedColor($)))),this._parser.registerOscHandler(110,new _.OscHandler(($=>this.restoreFgColor($)))),this._parser.registerOscHandler(111,new _.OscHandler(($=>this.restoreBgColor($)))),this._parser.registerOscHandler(112,new _.OscHandler(($=>this.restoreCursorColor($)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(let $ in c.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:$},(()=>this.selectCharset("("+$))),this._parser.registerEscHandler({intermediates:")",final:$},(()=>this.selectCharset(")"+$))),this._parser.registerEscHandler({intermediates:"*",final:$},(()=>this.selectCharset("*"+$))),this._parser.registerEscHandler({intermediates:"+",final:$},(()=>this.selectCharset("+"+$))),this._parser.registerEscHandler({intermediates:"-",final:$},(()=>this.selectCharset("-"+$))),this._parser.registerEscHandler({intermediates:".",final:$},(()=>this.selectCharset("."+$))),this._parser.registerEscHandler({intermediates:"/",final:$},(()=>this.selectCharset("/"+$)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler(($=>(this._logService.error("Parsing error: ",$),$))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler((($,le)=>this.requestStatusString($,le))))}_preserveStack(T,L,P,W){this._parseStack.paused=!0,this._parseStack.cursorStartX=T,this._parseStack.cursorStartY=L,this._parseStack.decodedLength=P,this._parseStack.position=W}_logSlowResolvingAsync(T){this._logService.logLevel<=y.LogLevelEnum.WARN&&Promise.race([T,new Promise(((L,P)=>setTimeout((()=>P("#SLOW_TIMEOUT")),5e3)))]).catch((L=>{if(L!=="#SLOW_TIMEOUT")throw L;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(T,L){let P,W=this._activeBuffer.x,Y=this._activeBuffer.y,ne=0,ke=this._parseStack.paused;if(ke){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,L))return this._logSlowResolvingAsync(P),P;W=this._parseStack.cursorStartX,Y=this._parseStack.cursorStartY,this._parseStack.paused=!1,T.length>A&&(ne=this._parseStack.position+A)}if(this._logService.logLevel<=y.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof T=="string"?` "${T}"`:` "${Array.prototype.map.call(T,($=>String.fromCharCode($))).join("")}"`),typeof T=="string"?T.split("").map(($=>$.charCodeAt(0))):T),this._parseBuffer.length<T.length&&this._parseBuffer.length<A&&(this._parseBuffer=new Uint32Array(Math.min(T.length,A))),ke||this._dirtyRowTracker.clearRange(),T.length>A)for(let $=ne;$<T.length;$+=A){let le=$+A<T.length?$+A:T.length,me=typeof T=="string"?this._stringDecoder.decode(T.substring($,le),this._parseBuffer):this._utf8Decoder.decode(T.subarray($,le),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,me))return this._preserveStack(W,Y,me,$),this._logSlowResolvingAsync(P),P}else if(!ke){let $=typeof T=="string"?this._stringDecoder.decode(T,this._parseBuffer):this._utf8Decoder.decode(T,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,$))return this._preserveStack(W,Y,$,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===W&&this._activeBuffer.y===Y||this._onCursorMove.fire();let Ae=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),G=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);G<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(G,this._bufferService.rows-1),Math.min(Ae,this._bufferService.rows-1))}print(T,L,P){let W,Y,ne=this._charsetService.charset,ke=this._optionsService.rawOptions.screenReaderMode,Ae=this._bufferService.cols,G=this._coreService.decPrivateModes.wraparound,$=this._coreService.modes.insertMode,le=this._curAttrData,me=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-L>0&&me.getWidth(this._activeBuffer.x-1)===2&&me.setCellFromCodepoint(this._activeBuffer.x-1,0,1,le);let ie=this._parser.precedingJoinState;for(let ue=L;ue<P;++ue){if(W=T[ue],W<127&&ne){let ot=ne[String.fromCharCode(W)];ot&&(W=ot.charCodeAt(0))}let Me=this._unicodeService.charProperties(W,ie);Y=x.UnicodeService.extractWidth(Me);let he=x.UnicodeService.extractShouldJoin(Me),gt=he?x.UnicodeService.extractWidth(ie):0;if(ie=Me,ke&&this._onA11yChar.fire((0,p.stringFromCodePoint)(W)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+Y-gt>Ae){if(G){let ot=me,He=this._activeBuffer.x-gt;for(this._activeBuffer.x=gt,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),me=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),gt>0&&me instanceof f.BufferLine&&me.copyCellsFrom(ot,He,0,gt,!1);He<Ae;)ot.setCellFromCodepoint(He++,0,1,le)}else if(this._activeBuffer.x=Ae-1,Y===2)continue}if(he&&this._activeBuffer.x){let ot=me.getWidth(this._activeBuffer.x-1)?1:2;me.addCodepointToCell(this._activeBuffer.x-ot,W,Y);for(let He=Y-gt;--He>=0;)me.setCellFromCodepoint(this._activeBuffer.x++,0,0,le)}else if($&&(me.insertCells(this._activeBuffer.x,Y-gt,this._activeBuffer.getNullCell(le)),me.getWidth(Ae-1)===2&&me.setCellFromCodepoint(Ae-1,g.NULL_CELL_CODE,g.NULL_CELL_WIDTH,le)),me.setCellFromCodepoint(this._activeBuffer.x++,W,Y,le),Y>0)for(;--Y;)me.setCellFromCodepoint(this._activeBuffer.x++,0,0,le)}this._parser.precedingJoinState=ie,this._activeBuffer.x<Ae&&P-L>0&&me.getWidth(this._activeBuffer.x)===0&&!me.hasContent(this._activeBuffer.x)&&me.setCellFromCodepoint(this._activeBuffer.x,0,1,le),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(T,L){return T.final!=="t"||T.prefix||T.intermediates?this._parser.registerCsiHandler(T,L):this._parser.registerCsiHandler(T,(P=>!D(P.params[0],this._optionsService.rawOptions.windowOptions)||L(P)))}registerDcsHandler(T,L){return this._parser.registerDcsHandler(T,new w.DcsHandler(L))}registerEscHandler(T,L){return this._parser.registerEscHandler(T,L)}registerOscHandler(T,L){return this._parser.registerOscHandler(T,new _.OscHandler(L))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-T),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(T=this._bufferService.cols-1){this._activeBuffer.x=Math.min(T,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(T,L){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=T,this._activeBuffer.y=this._activeBuffer.scrollTop+L):(this._activeBuffer.x=T,this._activeBuffer.y=L),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(T,L){this._restrictCursor(),this._setCursor(this._activeBuffer.x+T,this._activeBuffer.y+L)}cursorUp(T){let L=this._activeBuffer.y-this._activeBuffer.scrollTop;return L>=0?this._moveCursor(0,-Math.min(L,T.params[0]||1)):this._moveCursor(0,-(T.params[0]||1)),!0}cursorDown(T){let L=this._activeBuffer.scrollBottom-this._activeBuffer.y;return L>=0?this._moveCursor(0,Math.min(L,T.params[0]||1)):this._moveCursor(0,T.params[0]||1),!0}cursorForward(T){return this._moveCursor(T.params[0]||1,0),!0}cursorBackward(T){return this._moveCursor(-(T.params[0]||1),0),!0}cursorNextLine(T){return this.cursorDown(T),this._activeBuffer.x=0,!0}cursorPrecedingLine(T){return this.cursorUp(T),this._activeBuffer.x=0,!0}cursorCharAbsolute(T){return this._setCursor((T.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(T){return this._setCursor(T.length>=2?(T.params[1]||1)-1:0,(T.params[0]||1)-1),!0}charPosAbsolute(T){return this._setCursor((T.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(T){return this._moveCursor(T.params[0]||1,0),!0}linePosAbsolute(T){return this._setCursor(this._activeBuffer.x,(T.params[0]||1)-1),!0}vPositionRelative(T){return this._moveCursor(0,T.params[0]||1),!0}hVPosition(T){return this.cursorPosition(T),!0}tabClear(T){let L=T.params[0];return L===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:L===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(T){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let L=T.params[0]||1;for(;L--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(T){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let L=T.params[0]||1;for(;L--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(T){let L=T.params[0];return L===1&&(this._curAttrData.bg|=536870912),L!==2&&L!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(T,L,P,W=!1,Y=!1){let ne=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);ne.replaceCells(L,P,this._activeBuffer.getNullCell(this._eraseAttrData()),Y),W&&(ne.isWrapped=!1)}_resetBufferLine(T,L=!1){let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),L),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+T),P.isWrapped=!1)}eraseInDisplay(T,L=!1){let P;switch(this._restrictCursor(this._bufferService.cols),T.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,L);P<this._bufferService.rows;P++)this._resetBufferLine(P,L);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,L),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,L);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,L);this._dirtyRowTracker.markDirty(0);break;case 3:let W=this._activeBuffer.lines.length-this._bufferService.rows;W>0&&(this._activeBuffer.lines.trimStart(W),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-W,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-W,0),this._onScroll.fire(0))}return!0}eraseInLine(T,L=!1){switch(this._restrictCursor(this._bufferService.cols),T.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,L);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,L);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,L)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(T){this._restrictCursor();let L=T.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let P=this._activeBuffer.ybase+this._activeBuffer.y,W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Y=this._bufferService.rows-1+this._activeBuffer.ybase-W+1;for(;L--;)this._activeBuffer.lines.splice(Y-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(T){this._restrictCursor();let L=T.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let P=this._activeBuffer.ybase+this._activeBuffer.y,W;for(W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-W;L--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(T){this._restrictCursor();let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.insertCells(this._activeBuffer.x,T.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(T){this._restrictCursor();let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.deleteCells(this._activeBuffer.x,T.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(T){let L=T.params[0]||1;for(;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(T){let L=T.params[0]||1;for(;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(f.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let L=T.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){let W=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);W.deleteCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let L=T.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){let W=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);W.insertCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let L=T.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){let W=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);W.insertCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let L=T.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){let W=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);W.deleteCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(T){this._restrictCursor();let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(T.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(T){let L=this._parser.precedingJoinState;if(!L)return!0;let P=T.params[0]||1,W=x.UnicodeService.extractWidth(L),Y=this._activeBuffer.x-W,ne=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(Y),ke=new Uint32Array(ne.length*P),Ae=0;for(let $=0;$<ne.length;){let le=ne.codePointAt($)||0;ke[Ae++]=le,$+=le>65535?2:1}let G=Ae;for(let $=1;$<P;++$)ke.copyWithin(G,0,Ae),G+=Ae;return this.print(ke,0,G),!0}sendDeviceAttributesPrimary(T){return T.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(T){return T.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(T.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(T){return(this._optionsService.rawOptions.termName+"").indexOf(T)===0}setMode(T){for(let L=0;L<T.length;L++)switch(T.params[L]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(T){for(let L=0;L<T.length;L++)switch(T.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,c.DEFAULT_CHARSET),this._charsetService.setgCharset(1,c.DEFAULT_CHARSET),this._charsetService.setgCharset(2,c.DEFAULT_CHARSET),this._charsetService.setgCharset(3,c.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(T){for(let L=0;L<T.length;L++)switch(T.params[L]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(T){for(let L=0;L<T.length;L++)switch(T.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),T.params[L]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(T,L){let P=this._coreService.decPrivateModes,{activeProtocol:W,activeEncoding:Y}=this._coreMouseService,ne=this._coreService,{buffers:ke,cols:Ae}=this._bufferService,{active:G,alt:$}=ke,le=this._optionsService.rawOptions,me=he=>he?1:2,ie=T.params[0];return ue=ie,Me=L?ie===2?4:ie===4?me(ne.modes.insertMode):ie===12?3:ie===20?me(le.convertEol):0:ie===1?me(P.applicationCursorKeys):ie===3?le.windowOptions.setWinLines?Ae===80?2:Ae===132?1:0:0:ie===6?me(P.origin):ie===7?me(P.wraparound):ie===8?3:ie===9?me(W==="X10"):ie===12?me(le.cursorBlink):ie===25?me(!ne.isCursorHidden):ie===45?me(P.reverseWraparound):ie===66?me(P.applicationKeypad):ie===67?4:ie===1e3?me(W==="VT200"):ie===1002?me(W==="DRAG"):ie===1003?me(W==="ANY"):ie===1004?me(P.sendFocus):ie===1005?4:ie===1006?me(Y==="SGR"):ie===1015?4:ie===1016?me(Y==="SGR_PIXELS"):ie===1048?1:ie===47||ie===1047||ie===1049?me(G===$):ie===2004?me(P.bracketedPasteMode):0,ne.triggerDataEvent(`${u.C0.ESC}[${L?"":"?"}${ue};${Me}$y`),!0;var ue,Me}_updateAttrColor(T,L,P,W,Y){return L===2?(T|=50331648,T&=-16777216,T|=v.AttributeData.fromColorRGB([P,W,Y])):L===5&&(T&=-50331904,T|=33554432|255&P),T}_extractColor(T,L,P){let W=[0,0,-1,0,0,0],Y=0,ne=0;do{if(W[ne+Y]=T.params[L+ne],T.hasSubParams(L+ne)){let ke=T.getSubParams(L+ne),Ae=0;do W[1]===5&&(Y=1),W[ne+Ae+1+Y]=ke[Ae];while(++Ae<ke.length&&Ae+ne+1+Y<W.length);break}if(W[1]===5&&ne+Y>=2||W[1]===2&&ne+Y>=5)break;W[1]&&(Y=1)}while(++ne+L<T.length&&ne+Y<W.length);for(let ke=2;ke<W.length;++ke)W[ke]===-1&&(W[ke]=0);switch(W[0]){case 38:P.fg=this._updateAttrColor(P.fg,W[1],W[3],W[4],W[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,W[1],W[3],W[4],W[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,W[1],W[3],W[4],W[5])}return ne}_processUnderline(T,L){L.extended=L.extended.clone(),(!~T||T>5)&&(T=1),L.extended.underlineStyle=T,L.fg|=268435456,T===0&&(L.fg&=-268435457),L.updateExtended()}_processSGR0(T){T.fg=f.DEFAULT_ATTR_DATA.fg,T.bg=f.DEFAULT_ATTR_DATA.bg,T.extended=T.extended.clone(),T.extended.underlineStyle=0,T.extended.underlineColor&=-67108864,T.updateExtended()}charAttributes(T){if(T.length===1&&T.params[0]===0)return this._processSGR0(this._curAttrData),!0;let L=T.length,P,W=this._curAttrData;for(let Y=0;Y<L;Y++)P=T.params[Y],P>=30&&P<=37?(W.fg&=-50331904,W.fg|=16777216|P-30):P>=40&&P<=47?(W.bg&=-50331904,W.bg|=16777216|P-40):P>=90&&P<=97?(W.fg&=-50331904,W.fg|=16777224|P-90):P>=100&&P<=107?(W.bg&=-50331904,W.bg|=16777224|P-100):P===0?this._processSGR0(W):P===1?W.fg|=134217728:P===3?W.bg|=67108864:P===4?(W.fg|=268435456,this._processUnderline(T.hasSubParams(Y)?T.getSubParams(Y)[0]:1,W)):P===5?W.fg|=536870912:P===7?W.fg|=67108864:P===8?W.fg|=1073741824:P===9?W.fg|=2147483648:P===2?W.bg|=134217728:P===21?this._processUnderline(2,W):P===22?(W.fg&=-134217729,W.bg&=-134217729):P===23?W.bg&=-67108865:P===24?(W.fg&=-268435457,this._processUnderline(0,W)):P===25?W.fg&=-536870913:P===27?W.fg&=-67108865:P===28?W.fg&=-1073741825:P===29?W.fg&=2147483647:P===39?(W.fg&=-67108864,W.fg|=16777215&f.DEFAULT_ATTR_DATA.fg):P===49?(W.bg&=-67108864,W.bg|=16777215&f.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?Y+=this._extractColor(T,Y,W):P===53?W.bg|=1073741824:P===55?W.bg&=-1073741825:P===59?(W.extended=W.extended.clone(),W.extended.underlineColor=-1,W.updateExtended()):P===100?(W.fg&=-67108864,W.fg|=16777215&f.DEFAULT_ATTR_DATA.fg,W.bg&=-67108864,W.bg|=16777215&f.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(T){switch(T.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:let L=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${L};${P}R`)}return!0}deviceStatusPrivate(T){if(T.params[0]===6){let L=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${L};${P}R`)}return!0}softReset(T){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(T){let L=T.params[0]||1;switch(L){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let P=L%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(T){let L=T.params[0]||1,P;return(T.length<2||(P=T.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>L&&(this._activeBuffer.scrollTop=L-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(T){if(!D(T.params[0],this._optionsService.rawOptions.windowOptions))return!0;let L=T.length>1?T.params[1]:0;switch(T.params[0]){case 14:L!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:L!==0&&L!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),L!==0&&L!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:L!==0&&L!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),L!==0&&L!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(T){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(T){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(T){return this._windowTitle=T,this._onTitleChange.fire(T),!0}setIconName(T){return this._iconName=T,!0}setOrReportIndexedColor(T){let L=[],P=T.split(";");for(;P.length>1;){let W=P.shift(),Y=P.shift();if(/^\d+$/.exec(W)){let ne=parseInt(W);if(N(ne))if(Y==="?")L.push({type:0,index:ne});else{let ke=(0,C.parseColor)(Y);ke&&L.push({type:1,index:ne,color:ke})}}}return L.length&&this._onColor.fire(L),!0}setHyperlink(T){let L=T.split(";");return!(L.length<2)&&(L[1]?this._createHyperlink(L[0],L[1]):!L[0]&&this._finishHyperlink())}_createHyperlink(T,L){this._getCurrentLinkId()&&this._finishHyperlink();let P=T.split(":"),W,Y=P.findIndex((ne=>ne.startsWith("id=")));return Y!==-1&&(W=P[Y].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:W,uri:L}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(T,L){let P=T.split(";");for(let W=0;W<P.length&&!(L>=this._specialColors.length);++W,++L)if(P[W]==="?")this._onColor.fire([{type:0,index:this._specialColors[L]}]);else{let Y=(0,C.parseColor)(P[W]);Y&&this._onColor.fire([{type:1,index:this._specialColors[L],color:Y}])}return!0}setOrReportFgColor(T){return this._setOrReportSpecialColor(T,0)}setOrReportBgColor(T){return this._setOrReportSpecialColor(T,1)}setOrReportCursorColor(T){return this._setOrReportSpecialColor(T,2)}restoreIndexedColor(T){if(!T)return this._onColor.fire([{type:2}]),!0;let L=[],P=T.split(";");for(let W=0;W<P.length;++W)if(/^\d+$/.exec(P[W])){let Y=parseInt(P[W]);N(Y)&&L.push({type:2,index:Y})}return L.length&&this._onColor.fire(L),!0}restoreFgColor(T){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(T){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(T){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,c.DEFAULT_CHARSET),!0}selectCharset(T){return T.length!==2?(this.selectDefaultCharset(),!0):(T[0]==="/"||this._charsetService.setgCharset(E[T[0]],c.CHARSETS[T[1]]||c.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let T=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,T,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=f.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(T){return this._charsetService.setgLevel(T),!0}screenAlignmentPattern(){let T=new b.CellData;T.content=4194373,T.fg=this._curAttrData.fg,T.bg=this._curAttrData.bg,this._setCursor(0,0);for(let L=0;L<this._bufferService.rows;++L){let P=this._activeBuffer.ybase+this._activeBuffer.y+L,W=this._activeBuffer.lines.get(P);W&&(W.fill(T),W.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(T,L){let P=this._bufferService.buffer,W=this._optionsService.rawOptions;return(Y=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${Y}${u.C0.ESC}\\`),!0))(T==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:T==='"p'?'P1$r61;1"p':T==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:T==="m"?"P1$r0m":T===" q"?`P1$r${{block:2,underline:4,bar:6}[W.cursorStyle]-(W.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(T,L){this._dirtyRowTracker.markRangeDirty(T,L)}}s.InputHandler=z;let B=class{constructor(H){this._bufferService=H,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(H){H<this.start?this.start=H:H>this.end&&(this.end=H)}markRangeDirty(H,T){H>T&&(I=H,H=T,T=I),H<this.start&&(this.start=H),T>this.end&&(this.end=T)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function N(H){return 0<=H&&H<256}B=a([l(0,y.IBufferService)],B)},844:(n,s)=>{function o(a){for(let l of a)l.dispose();a.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let l=this._disposables.indexOf(a);l!==-1&&this._disposables.splice(l,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){this._isDisposed||a===this._value||(this._value?.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},s.toDisposable=function(a){return{dispose:a}},s.disposeArray=o,s.getDisposeArrayDisposable=function(a){return{dispose:()=>o(a)}}},1505:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(l,u,c){this._data[l]||(this._data[l]={}),this._data[l][u]=c}get(l,u){return this._data[l]?this._data[l][u]:void 0}clear(){this._data={}}}s.TwoKeyMap=o,s.FourKeyMap=class{constructor(){this._data=new o}set(a,l,u,c,h){this._data.get(a,l)||this._data.set(a,l,new o),this._data.get(a,l).set(u,c,h)}get(a,l,u,c){return this._data.get(a,l)?.get(u,c)}clear(){this._data.clear()}}},6114:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof process<"u"&&"title"in process;let o=s.isNode?"node":navigator.userAgent,a=s.isNode?"node":navigator.platform;s.isFirefox=o.includes("Firefox"),s.isLegacyEdge=o.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(o),s.getSafariVersion=function(){if(!s.isSafari)return 0;let l=o.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),s.isIpad=a==="iPad",s.isIphone=a==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),s.isLinux=a.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(o)},6106:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let o=0;s.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(o=this._search(this._getKey(a)),this._array.splice(o,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let l=this._getKey(a);if(l===void 0||(o=this._search(l),o===-1)||this._getKey(this._array[o])!==l)return!1;do if(this._array[o]===a)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===l);return!1}*getKeyIterator(a){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===a)}forEachByKey(a,l){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do l(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===a)}values(){return[...this._array].values()}_search(a){let l=0,u=this._array.length-1;for(;u>=l;){let c=l+u>>1,h=this._getKey(this._array[c]);if(h>a)u=c-1;else{if(!(h<a)){for(;c>0&&this._getKey(this._array[c-1])===a;)c--;return c}l=c+1}}return l}}},7226:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let a=o(6114);class l{constructor(){this._tasks=[],this._i=0}enqueue(h){this._tasks.push(h),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(h){this._idleCallback=void 0;let d=0,p=0,f=h.timeRemaining(),m=0;for(;this._i<this._tasks.length;){if(d=Date.now(),this._tasks[this._i]()||this._i++,d=Math.max(1,Date.now()-d),p=Math.max(d,p),m=h.timeRemaining(),1.5*p>m)return f-d<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(f-d))}ms`),void this._start();f=m}this.clear()}}class u extends l{_requestCallback(h){return setTimeout((()=>h(this._createDeadline(16))))}_cancelCallback(h){clearTimeout(h)}_createDeadline(h){let d=Date.now()+h;return{timeRemaining:()=>Math.max(0,d-Date.now())}}}s.PriorityTaskQueue=u,s.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(c){return requestIdleCallback(c)}_cancelCallback(c){cancelIdleCallback(c)}}:u,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(c){this._queue.clear(),this._queue.enqueue(c)}flush(){this._queue.flush()}}},9282:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;let a=o(643);s.updateWindowsModeWrappedState=function(l){let u=l.buffer.lines.get(l.buffer.ybase+l.buffer.y-1),c=u?.get(l.cols-1),h=l.buffer.lines.get(l.buffer.ybase+l.buffer.y);h&&c&&(h.isWrapped=c[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&c[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){let u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}s.AttributeData=o;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}get underlineVariantOffset(){let u=(3758096384&this._ext)>>29;return u<0?4294967288^u:u}set underlineVariantOffset(u){this._ext&=536870911,this._ext|=u<<29&3758096384}constructor(u=0,c=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=c}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=a},9092:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;let a=o(6349),l=o(7226),u=o(3734),c=o(8437),h=o(4634),d=o(511),p=o(643),f=o(4863),m=o(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(g,b,v){this._hasScrollback=g,this._optionsService=b,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=c.DEFAULT_ATTR_DATA.clone(),this.savedCharset=m.DEFAULT_CHARSET,this.markers=[],this._nullCell=d.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),this._whitespaceCell=d.CellData.fromCharData([0,p.WHITESPACE_CELL_CHAR,p.WHITESPACE_CELL_WIDTH,p.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new l.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(g){return g?(this._nullCell.fg=g.fg,this._nullCell.bg=g.bg,this._nullCell.extended=g.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(g){return g?(this._whitespaceCell.fg=g.fg,this._whitespaceCell.bg=g.bg,this._whitespaceCell.extended=g.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(g,b){return new c.BufferLine(this._bufferService.cols,this.getNullCell(g),b)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let g=this.ybase+this.y-this.ydisp;return g>=0&&g<this._rows}_getCorrectBufferLength(g){if(!this._hasScrollback)return g;let b=g+this._optionsService.rawOptions.scrollback;return b>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:b}fillViewportRows(g){if(this.lines.length===0){g===void 0&&(g=c.DEFAULT_ATTR_DATA);let b=this._rows;for(;b--;)this.lines.push(this.getBlankLine(g))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(g,b){let v=this.getNullCell(c.DEFAULT_ATTR_DATA),y=0,x=this._getCorrectBufferLength(b);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<g)for(let w=0;w<this.lines.length;w++)y+=+this.lines.get(w).resize(g,v);let _=0;if(this._rows<b)for(let w=this._rows;w<b;w++)this.lines.length<b+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new c.BufferLine(g,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+_+1?(this.ybase--,_++,this.ydisp>0&&this.ydisp--):this.lines.push(new c.BufferLine(g,v)));else for(let w=this._rows;w>b;w--)this.lines.length>b+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){let w=this.lines.length-x;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=x}this.x=Math.min(this.x,g-1),this.y=Math.min(this.y,b-1),_&&(this.y+=_),this.savedX=Math.min(this.savedX,g-1),this.scrollTop=0}if(this.scrollBottom=b-1,this._isReflowEnabled&&(this._reflow(g,b),this._cols>g))for(let _=0;_<this.lines.length;_++)y+=+this.lines.get(_).resize(g,v);this._cols=g,this._rows=b,this._memoryCleanupQueue.clear(),y>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let g=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,g=!1);let b=0;for(;this._memoryCleanupPosition<this.lines.length;)if(b+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),b>100)return!0;return g}get _isReflowEnabled(){let g=this._optionsService.rawOptions.windowsPty;return g&&g.buildNumber?this._hasScrollback&&g.backend==="conpty"&&g.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(g,b){this._cols!==g&&(g>this._cols?this._reflowLarger(g,b):this._reflowSmaller(g,b))}_reflowLarger(g,b){let v=(0,h.reflowLargerGetLinesToRemove)(this.lines,this._cols,g,this.ybase+this.y,this.getNullCell(c.DEFAULT_ATTR_DATA));if(v.length>0){let y=(0,h.reflowLargerCreateNewLayout)(this.lines,v);(0,h.reflowLargerApplyNewLayout)(this.lines,y.layout),this._reflowLargerAdjustViewport(g,b,y.countRemoved)}}_reflowLargerAdjustViewport(g,b,v){let y=this.getNullCell(c.DEFAULT_ATTR_DATA),x=v;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<b&&this.lines.push(new c.BufferLine(g,y))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(g,b){let v=this.getNullCell(c.DEFAULT_ATTR_DATA),y=[],x=0;for(let _=this.lines.length-1;_>=0;_--){let w=this.lines.get(_);if(!w||!w.isWrapped&&w.getTrimmedLength()<=g)continue;let C=[w];for(;w.isWrapped&&_>0;)w=this.lines.get(--_),C.unshift(w);let E=this.ybase+this.y;if(E>=_&&E<_+C.length)continue;let A=C[C.length-1].getTrimmedLength(),D=(0,h.reflowSmallerGetNewLineLengths)(C,this._cols,g),R=D.length-C.length,I;I=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+R):Math.max(0,this.lines.length-this.lines.maxLength+R);let z=[];for(let P=0;P<R;P++){let W=this.getBlankLine(c.DEFAULT_ATTR_DATA,!0);z.push(W)}z.length>0&&(y.push({start:_+C.length+x,newLines:z}),x+=z.length),C.push(...z);let B=D.length-1,N=D[B];N===0&&(B--,N=D[B]);let H=C.length-R-1,T=A;for(;H>=0;){let P=Math.min(T,N);if(C[B]===void 0)break;if(C[B].copyCellsFrom(C[H],T-P,N-P,P,!0),N-=P,N===0&&(B--,N=D[B]),T-=P,T===0){H--;let W=Math.max(H,0);T=(0,h.getWrappedLineTrimmedLength)(C,W,this._cols)}}for(let P=0;P<C.length;P++)D[P]<g&&C[P].setCell(D[P],v);let L=R-I;for(;L-- >0;)this.ybase===0?this.y<b-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-b&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+R,this.ybase+b-1)}if(y.length>0){let _=[],w=[];for(let B=0;B<this.lines.length;B++)w.push(this.lines.get(B));let C=this.lines.length,E=C-1,A=0,D=y[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let R=0;for(let B=Math.min(this.lines.maxLength-1,C+x-1);B>=0;B--)if(D&&D.start>E+R){for(let N=D.newLines.length-1;N>=0;N--)this.lines.set(B--,D.newLines[N]);B++,_.push({index:E+1,amount:D.newLines.length}),R+=D.newLines.length,D=y[++A]}else this.lines.set(B,w[E--]);let I=0;for(let B=_.length-1;B>=0;B--)_[B].index+=I,this.lines.onInsertEmitter.fire(_[B]),I+=_[B].amount;let z=Math.max(0,C+x-this.lines.maxLength);z>0&&this.lines.onTrimEmitter.fire(z)}}translateBufferLineToString(g,b,v=0,y){let x=this.lines.get(g);return x?x.translateToString(b,v,y):""}getWrappedRangeForLine(g){let b=g,v=g;for(;b>0&&this.lines.get(b).isWrapped;)b--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:b,last:v}}setupTabStops(g){for(g!=null?this.tabs[g]||(g=this.prevStop(g)):(this.tabs={},g=0);g<this._cols;g+=this._optionsService.rawOptions.tabStopWidth)this.tabs[g]=!0}prevStop(g){for(g==null&&(g=this.x);!this.tabs[--g]&&g>0;);return g>=this._cols?this._cols-1:g<0?0:g}nextStop(g){for(g==null&&(g=this.x);!this.tabs[++g]&&g<this._cols;);return g>=this._cols?this._cols-1:g<0?0:g}clearMarkers(g){this._isClearing=!0;for(let b=0;b<this.markers.length;b++)this.markers[b].line===g&&(this.markers[b].dispose(),this.markers.splice(b--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let g=0;g<this.markers.length;g++)this.markers[g].dispose(),this.markers.splice(g--,1);this._isClearing=!1}addMarker(g){let b=new f.Marker(g);return this.markers.push(b),b.register(this.lines.onTrim((v=>{b.line-=v,b.line<0&&b.dispose()}))),b.register(this.lines.onInsert((v=>{b.line>=v.index&&(b.line+=v.amount)}))),b.register(this.lines.onDelete((v=>{b.line>=v.index&&b.line<v.index+v.amount&&b.dispose(),b.line>v.index&&(b.line-=v.amount)}))),b.register(b.onDispose((()=>this._removeMarker(b)))),b}_removeMarker(g){this._isClearing||this.markers.splice(this.markers.indexOf(g),1)}}},8437:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;let a=o(3734),l=o(511),u=o(643),c=o(482);s.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let h=0;class d{constructor(f,m,g=!1){this.isWrapped=g,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*f);let b=m||l.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let v=0;v<f;++v)this.setCell(v,b);this.length=f}get(f){let m=this._data[3*f+0],g=2097151&m;return[this._data[3*f+1],2097152&m?this._combined[f]:g?(0,c.stringFromCodePoint)(g):"",m>>22,2097152&m?this._combined[f].charCodeAt(this._combined[f].length-1):g]}set(f,m){this._data[3*f+1]=m[u.CHAR_DATA_ATTR_INDEX],m[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[f]=m[1],this._data[3*f+0]=2097152|f|m[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*f+0]=m[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|m[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(f){return this._data[3*f+0]>>22}hasWidth(f){return 12582912&this._data[3*f+0]}getFg(f){return this._data[3*f+1]}getBg(f){return this._data[3*f+2]}hasContent(f){return 4194303&this._data[3*f+0]}getCodePoint(f){let m=this._data[3*f+0];return 2097152&m?this._combined[f].charCodeAt(this._combined[f].length-1):2097151&m}isCombined(f){return 2097152&this._data[3*f+0]}getString(f){let m=this._data[3*f+0];return 2097152&m?this._combined[f]:2097151&m?(0,c.stringFromCodePoint)(2097151&m):""}isProtected(f){return 536870912&this._data[3*f+2]}loadCell(f,m){return h=3*f,m.content=this._data[h+0],m.fg=this._data[h+1],m.bg=this._data[h+2],2097152&m.content&&(m.combinedData=this._combined[f]),268435456&m.bg&&(m.extended=this._extendedAttrs[f]),m}setCell(f,m){2097152&m.content&&(this._combined[f]=m.combinedData),268435456&m.bg&&(this._extendedAttrs[f]=m.extended),this._data[3*f+0]=m.content,this._data[3*f+1]=m.fg,this._data[3*f+2]=m.bg}setCellFromCodepoint(f,m,g,b){268435456&b.bg&&(this._extendedAttrs[f]=b.extended),this._data[3*f+0]=m|g<<22,this._data[3*f+1]=b.fg,this._data[3*f+2]=b.bg}addCodepointToCell(f,m,g){let b=this._data[3*f+0];2097152&b?this._combined[f]+=(0,c.stringFromCodePoint)(m):2097151&b?(this._combined[f]=(0,c.stringFromCodePoint)(2097151&b)+(0,c.stringFromCodePoint)(m),b&=-2097152,b|=2097152):b=m|4194304,g&&(b&=-12582913,b|=g<<22),this._data[3*f+0]=b}insertCells(f,m,g){if((f%=this.length)&&this.getWidth(f-1)===2&&this.setCellFromCodepoint(f-1,0,1,g),m<this.length-f){let b=new l.CellData;for(let v=this.length-f-m-1;v>=0;--v)this.setCell(f+m+v,this.loadCell(f+v,b));for(let v=0;v<m;++v)this.setCell(f+v,g)}else for(let b=f;b<this.length;++b)this.setCell(b,g);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,g)}deleteCells(f,m,g){if(f%=this.length,m<this.length-f){let b=new l.CellData;for(let v=0;v<this.length-f-m;++v)this.setCell(f+v,this.loadCell(f+m+v,b));for(let v=this.length-m;v<this.length;++v)this.setCell(v,g)}else for(let b=f;b<this.length;++b)this.setCell(b,g);f&&this.getWidth(f-1)===2&&this.setCellFromCodepoint(f-1,0,1,g),this.getWidth(f)!==0||this.hasContent(f)||this.setCellFromCodepoint(f,0,1,g)}replaceCells(f,m,g,b=!1){if(b)for(f&&this.getWidth(f-1)===2&&!this.isProtected(f-1)&&this.setCellFromCodepoint(f-1,0,1,g),m<this.length&&this.getWidth(m-1)===2&&!this.isProtected(m)&&this.setCellFromCodepoint(m,0,1,g);f<m&&f<this.length;)this.isProtected(f)||this.setCell(f,g),f++;else for(f&&this.getWidth(f-1)===2&&this.setCellFromCodepoint(f-1,0,1,g),m<this.length&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m,0,1,g);f<m&&f<this.length;)this.setCell(f++,g)}resize(f,m){if(f===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let g=3*f;if(f>this.length){if(this._data.buffer.byteLength>=4*g)this._data=new Uint32Array(this._data.buffer,0,g);else{let b=new Uint32Array(g);b.set(this._data),this._data=b}for(let b=this.length;b<f;++b)this.setCell(b,m)}else{this._data=this._data.subarray(0,g);let b=Object.keys(this._combined);for(let y=0;y<b.length;y++){let x=parseInt(b[y],10);x>=f&&delete this._combined[x]}let v=Object.keys(this._extendedAttrs);for(let y=0;y<v.length;y++){let x=parseInt(v[y],10);x>=f&&delete this._extendedAttrs[x]}}return this.length=f,4*g*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let f=new Uint32Array(this._data.length);return f.set(this._data),this._data=f,1}return 0}fill(f,m=!1){if(m)for(let g=0;g<this.length;++g)this.isProtected(g)||this.setCell(g,f);else{this._combined={},this._extendedAttrs={};for(let g=0;g<this.length;++g)this.setCell(g,f)}}copyFrom(f){this.length!==f.length?this._data=new Uint32Array(f._data):this._data.set(f._data),this.length=f.length,this._combined={};for(let m in f._combined)this._combined[m]=f._combined[m];this._extendedAttrs={};for(let m in f._extendedAttrs)this._extendedAttrs[m]=f._extendedAttrs[m];this.isWrapped=f.isWrapped}clone(){let f=new d(0);f._data=new Uint32Array(this._data),f.length=this.length;for(let m in this._combined)f._combined[m]=this._combined[m];for(let m in this._extendedAttrs)f._extendedAttrs[m]=this._extendedAttrs[m];return f.isWrapped=this.isWrapped,f}getTrimmedLength(){for(let f=this.length-1;f>=0;--f)if(4194303&this._data[3*f+0])return f+(this._data[3*f+0]>>22);return 0}getNoBgTrimmedLength(){for(let f=this.length-1;f>=0;--f)if(4194303&this._data[3*f+0]||50331648&this._data[3*f+2])return f+(this._data[3*f+0]>>22);return 0}copyCellsFrom(f,m,g,b,v){let y=f._data;if(v)for(let _=b-1;_>=0;_--){for(let w=0;w<3;w++)this._data[3*(g+_)+w]=y[3*(m+_)+w];268435456&y[3*(m+_)+2]&&(this._extendedAttrs[g+_]=f._extendedAttrs[m+_])}else for(let _=0;_<b;_++){for(let w=0;w<3;w++)this._data[3*(g+_)+w]=y[3*(m+_)+w];268435456&y[3*(m+_)+2]&&(this._extendedAttrs[g+_]=f._extendedAttrs[m+_])}let x=Object.keys(f._combined);for(let _=0;_<x.length;_++){let w=parseInt(x[_],10);w>=m&&(this._combined[w-m+g]=f._combined[w])}}translateToString(f,m,g,b){m=m??0,g=g??this.length,f&&(g=Math.min(g,this.getTrimmedLength())),b&&(b.length=0);let v="";for(;m<g;){let y=this._data[3*m+0],x=2097151&y,_=2097152&y?this._combined[m]:x?(0,c.stringFromCodePoint)(x):u.WHITESPACE_CELL_CHAR;if(v+=_,b)for(let w=0;w<_.length;++w)b.push(m);m+=y>>22||1}return b&&b.push(m),v}}s.BufferLine=d},4841:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(o,a){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return a*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(n,s)=>{function o(a,l,u){if(l===a.length-1)return a[l].getTrimmedLength();let c=!a[l].hasContent(u-1)&&a[l].getWidth(u-1)===1,h=a[l+1].getWidth(0)===2;return c&&h?u-1:u}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(a,l,u,c,h){let d=[];for(let p=0;p<a.length-1;p++){let f=p,m=a.get(++f);if(!m.isWrapped)continue;let g=[a.get(p)];for(;f<a.length&&m.isWrapped;)g.push(m),m=a.get(++f);if(c>=p&&c<f){p+=g.length-1;continue}let b=0,v=o(g,b,l),y=1,x=0;for(;y<g.length;){let w=o(g,y,l),C=w-x,E=u-v,A=Math.min(C,E);g[b].copyCellsFrom(g[y],x,v,A,!1),v+=A,v===u&&(b++,v=0),x+=A,x===w&&(y++,x=0),v===0&&b!==0&&g[b-1].getWidth(u-1)===2&&(g[b].copyCellsFrom(g[b-1],u-1,v++,1,!1),g[b-1].setCell(u-1,h))}g[b].replaceCells(v,u,h);let _=0;for(let w=g.length-1;w>0&&(w>b||g[w].getTrimmedLength()===0);w--)_++;_>0&&(d.push(p+g.length-_),d.push(_)),p+=g.length-1}return d},s.reflowLargerCreateNewLayout=function(a,l){let u=[],c=0,h=l[c],d=0;for(let p=0;p<a.length;p++)if(h===p){let f=l[++c];a.onDeleteEmitter.fire({index:p-d,amount:f}),p+=f-1,d+=f,h=l[++c]}else u.push(p);return{layout:u,countRemoved:d}},s.reflowLargerApplyNewLayout=function(a,l){let u=[];for(let c=0;c<l.length;c++)u.push(a.get(l[c]));for(let c=0;c<u.length;c++)a.set(c,u[c]);a.length=l.length},s.reflowSmallerGetNewLineLengths=function(a,l,u){let c=[],h=a.map(((m,g)=>o(a,g,l))).reduce(((m,g)=>m+g)),d=0,p=0,f=0;for(;f<h;){if(h-f<u){c.push(h-f);break}d+=u;let m=o(a,p,l);d>m&&(d-=m,p++);let g=a[p].getWidth(d-1)===2;g&&d--;let b=g?u-1:u;c.push(b),f+=b}return c},s.getWrappedLineTrimmedLength=o},5295:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;let a=o(8460),l=o(844),u=o(9092);class c extends l.Disposable{constructor(d,p){super(),this._optionsService=d,this._bufferService=p,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(d){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(d),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(d,p){this._normal.resize(d,p),this._alt.resize(d,p),this.setupTabStops(d)}setupTabStops(d){this._normal.setupTabStops(d),this._alt.setupTabStops(d)}}s.BufferSet=c},511:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let a=o(482),l=o(643),u=o(3734);class c extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(d){let p=new c;return p.setFromCharData(d),p}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(d){this.fg=d[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let p=!1;if(d[l.CHAR_DATA_CHAR_INDEX].length>2)p=!0;else if(d[l.CHAR_DATA_CHAR_INDEX].length===2){let f=d[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=f&&f<=56319){let m=d[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=m&&m<=57343?this.content=1024*(f-55296)+m-56320+65536|d[l.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=d[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[l.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=d[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|d[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=c},643:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;let a=o(8460),l=o(844);class u{get id(){return this._id}constructor(h){this.line=h,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,l.disposeArray)(this._disposables),this._disposables.length=0)}register(h){return this._disposables.push(h),h}}s.Marker=u,u._nextId=1},7116:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(n,s)=>{var o,a,l;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,(function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F"})(o||(s.C0=o={})),(function(u){u.PAD="\x80",u.HOP="\x81",u.BPH="\x82",u.NBH="\x83",u.IND="\x84",u.NEL="\x85",u.SSA="\x86",u.ESA="\x87",u.HTS="\x88",u.HTJ="\x89",u.VTS="\x8A",u.PLD="\x8B",u.PLU="\x8C",u.RI="\x8D",u.SS2="\x8E",u.SS3="\x8F",u.DCS="\x90",u.PU1="\x91",u.PU2="\x92",u.STS="\x93",u.CCH="\x94",u.MW="\x95",u.SPA="\x96",u.EPA="\x97",u.SOS="\x98",u.SGCI="\x99",u.SCI="\x9A",u.CSI="\x9B",u.ST="\x9C",u.OSC="\x9D",u.PM="\x9E",u.APC="\x9F"})(a||(s.C1=a={})),(function(u){u.ST=`${o.ESC}\\`})(l||(s.C1_ESCAPED=l={}))},7399:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;let a=o(2584),l={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(u,c,h,d){let p={type:0,cancel:!1,key:void 0},f=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?p.key=c?a.C0.ESC+"OA":a.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?p.key=c?a.C0.ESC+"OD":a.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?p.key=c?a.C0.ESC+"OC":a.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(p.key=c?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:p.key=u.ctrlKey?"\b":a.C0.DEL,u.altKey&&(p.key=a.C0.ESC+p.key);break;case 9:if(u.shiftKey){p.key=a.C0.ESC+"[Z";break}p.key=a.C0.HT,p.cancel=!0;break;case 13:p.key=u.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,p.cancel=!0;break;case 27:p.key=a.C0.ESC,u.altKey&&(p.key=a.C0.ESC+a.C0.ESC),p.cancel=!0;break;case 37:if(u.metaKey)break;f?(p.key=a.C0.ESC+"[1;"+(f+1)+"D",p.key===a.C0.ESC+"[1;3D"&&(p.key=a.C0.ESC+(h?"b":"[1;5D"))):p.key=c?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(u.metaKey)break;f?(p.key=a.C0.ESC+"[1;"+(f+1)+"C",p.key===a.C0.ESC+"[1;3C"&&(p.key=a.C0.ESC+(h?"f":"[1;5C"))):p.key=c?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(u.metaKey)break;f?(p.key=a.C0.ESC+"[1;"+(f+1)+"A",h||p.key!==a.C0.ESC+"[1;3A"||(p.key=a.C0.ESC+"[1;5A")):p.key=c?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(u.metaKey)break;f?(p.key=a.C0.ESC+"[1;"+(f+1)+"B",h||p.key!==a.C0.ESC+"[1;3B"||(p.key=a.C0.ESC+"[1;5B")):p.key=c?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(p.key=a.C0.ESC+"[2~");break;case 46:p.key=f?a.C0.ESC+"[3;"+(f+1)+"~":a.C0.ESC+"[3~";break;case 36:p.key=f?a.C0.ESC+"[1;"+(f+1)+"H":c?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:p.key=f?a.C0.ESC+"[1;"+(f+1)+"F":c?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:u.shiftKey?p.type=2:u.ctrlKey?p.key=a.C0.ESC+"[5;"+(f+1)+"~":p.key=a.C0.ESC+"[5~";break;case 34:u.shiftKey?p.type=3:u.ctrlKey?p.key=a.C0.ESC+"[6;"+(f+1)+"~":p.key=a.C0.ESC+"[6~";break;case 112:p.key=f?a.C0.ESC+"[1;"+(f+1)+"P":a.C0.ESC+"OP";break;case 113:p.key=f?a.C0.ESC+"[1;"+(f+1)+"Q":a.C0.ESC+"OQ";break;case 114:p.key=f?a.C0.ESC+"[1;"+(f+1)+"R":a.C0.ESC+"OR";break;case 115:p.key=f?a.C0.ESC+"[1;"+(f+1)+"S":a.C0.ESC+"OS";break;case 116:p.key=f?a.C0.ESC+"[15;"+(f+1)+"~":a.C0.ESC+"[15~";break;case 117:p.key=f?a.C0.ESC+"[17;"+(f+1)+"~":a.C0.ESC+"[17~";break;case 118:p.key=f?a.C0.ESC+"[18;"+(f+1)+"~":a.C0.ESC+"[18~";break;case 119:p.key=f?a.C0.ESC+"[19;"+(f+1)+"~":a.C0.ESC+"[19~";break;case 120:p.key=f?a.C0.ESC+"[20;"+(f+1)+"~":a.C0.ESC+"[20~";break;case 121:p.key=f?a.C0.ESC+"[21;"+(f+1)+"~":a.C0.ESC+"[21~";break;case 122:p.key=f?a.C0.ESC+"[23;"+(f+1)+"~":a.C0.ESC+"[23~";break;case 123:p.key=f?a.C0.ESC+"[24;"+(f+1)+"~":a.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(h&&!d||!u.altKey||u.metaKey)!h||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?p.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(p.key=a.C0.US),u.key==="@"&&(p.key=a.C0.NUL)):u.keyCode===65&&(p.type=1);else{let m=l[u.keyCode],g=m?.[u.shiftKey?1:0];if(g)p.key=a.C0.ESC+g;else if(u.keyCode>=65&&u.keyCode<=90){let b=u.ctrlKey?u.keyCode-64:u.keyCode+32,v=String.fromCharCode(b);u.shiftKey&&(v=v.toUpperCase()),p.key=a.C0.ESC+v}else if(u.keyCode===32)p.key=a.C0.ESC+(u.ctrlKey?a.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let b=u.code.slice(3,4);u.shiftKey||(b=b.toLowerCase()),p.key=a.C0.ESC+b,p.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?p.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?p.key=a.C0.NUL:u.keyCode>=51&&u.keyCode<=55?p.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?p.key=a.C0.DEL:u.keyCode===219?p.key=a.C0.ESC:u.keyCode===220?p.key=a.C0.FS:u.keyCode===221&&(p.key=a.C0.GS)}return p}},482:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},s.utf32ToString=function(o,a=0,l=o.length){let u="";for(let c=a;c<l;++c){let h=o[c];h>65535?(h-=65536,u+=String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):u+=String.fromCharCode(h)}return u},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,a){let l=o.length;if(!l)return 0;let u=0,c=0;if(this._interim){let h=o.charCodeAt(c++);56320<=h&&h<=57343?a[u++]=1024*(this._interim-55296)+h-56320+65536:(a[u++]=this._interim,a[u++]=h),this._interim=0}for(let h=c;h<l;++h){let d=o.charCodeAt(h);if(55296<=d&&d<=56319){if(++h>=l)return this._interim=d,u;let p=o.charCodeAt(h);56320<=p&&p<=57343?a[u++]=1024*(d-55296)+p-56320+65536:(a[u++]=d,a[u++]=p)}else d!==65279&&(a[u++]=d)}return u}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,a){let l=o.length;if(!l)return 0;let u,c,h,d,p=0,f=0,m=0;if(this.interim[0]){let v=!1,y=this.interim[0];y&=(224&y)==192?31:(240&y)==224?15:7;let x,_=0;for(;(x=63&this.interim[++_])&&_<4;)y<<=6,y|=x;let w=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=w-_;for(;m<C;){if(m>=l)return 0;if(x=o[m++],(192&x)!=128){m--,v=!0;break}this.interim[_++]=x,y<<=6,y|=63&x}v||(w===2?y<128?m--:a[p++]=y:w===3?y<2048||y>=55296&&y<=57343||y===65279||(a[p++]=y):y<65536||y>1114111||(a[p++]=y)),this.interim.fill(0)}let g=l-4,b=m;for(;b<l;){for(;!(!(b<g)||128&(u=o[b])||128&(c=o[b+1])||128&(h=o[b+2])||128&(d=o[b+3]));)a[p++]=u,a[p++]=c,a[p++]=h,a[p++]=d,b+=4;if(u=o[b++],u<128)a[p++]=u;else if((224&u)==192){if(b>=l)return this.interim[0]=u,p;if(c=o[b++],(192&c)!=128){b--;continue}if(f=(31&u)<<6|63&c,f<128){b--;continue}a[p++]=f}else if((240&u)==224){if(b>=l)return this.interim[0]=u,p;if(c=o[b++],(192&c)!=128){b--;continue}if(b>=l)return this.interim[0]=u,this.interim[1]=c,p;if(h=o[b++],(192&h)!=128){b--;continue}if(f=(15&u)<<12|(63&c)<<6|63&h,f<2048||f>=55296&&f<=57343||f===65279)continue;a[p++]=f}else if((248&u)==240){if(b>=l)return this.interim[0]=u,p;if(c=o[b++],(192&c)!=128){b--;continue}if(b>=l)return this.interim[0]=u,this.interim[1]=c,p;if(h=o[b++],(192&h)!=128){b--;continue}if(b>=l)return this.interim[0]=u,this.interim[1]=c,this.interim[2]=h,p;if(d=o[b++],(192&d)!=128){b--;continue}if(f=(7&u)<<18|(63&c)<<12|(63&h)<<6|63&d,f<65536||f>1114111)continue;a[p++]=f}}return p}}},225:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;let a=o(1480),l=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],c;s.UnicodeV6=class{constructor(){if(this.version="6",!c){c=new Uint8Array(65536),c.fill(1),c[0]=0,c.fill(0,1,32),c.fill(0,127,160),c.fill(2,4352,4448),c[9001]=2,c[9002]=2,c.fill(2,11904,42192),c[12351]=1,c.fill(2,44032,55204),c.fill(2,63744,64256),c.fill(2,65040,65050),c.fill(2,65072,65136),c.fill(2,65280,65377),c.fill(2,65504,65511);for(let h=0;h<l.length;++h)c.fill(0,l[h][0],l[h][1]+1)}}wcwidth(h){return h<32?0:h<127?1:h<65536?c[h]:(function(d,p){let f,m=0,g=p.length-1;if(d<p[0][0]||d>p[g][1])return!1;for(;g>=m;)if(f=m+g>>1,d>p[f][1])m=f+1;else{if(!(d<p[f][0]))return!0;g=f-1}return!1})(h,u)?0:h>=131072&&h<=196605||h>=196608&&h<=262141?2:1}charProperties(h,d){let p=this.wcwidth(h),f=p===0&&d!==0;if(f){let m=a.UnicodeService.extractWidth(d);m===0?f=!1:m>p&&(p=m)}return a.UnicodeService.createPropertyValue(0,p,f)}}},5981:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;let a=o(8460),l=o(844);class u extends l.Disposable{constructor(h){super(),this._action=h,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(h,d){if(d!==void 0&&this._syncCalls>d)return void(this._syncCalls=0);if(this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let p;for(this._isSyncWriting=!0;p=this._writeBuffer.shift();){this._action(p);let f=this._callbacks.shift();f&&f()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(h,d){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(d),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(d)}_innerWrite(h=0,d=!0){let p=h||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let f=this._writeBuffer[this._bufferOffset],m=this._action(f,d);if(m){let b=v=>Date.now()-p>=12?setTimeout((()=>this._innerWrite(0,v))):this._innerWrite(p,v);return void m.catch((v=>(queueMicrotask((()=>{throw v})),Promise.resolve(!1)))).then(b)}let g=this._callbacks[this._bufferOffset];if(g&&g(),this._bufferOffset++,this._pendingData-=f.length,Date.now()-p>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=u},5941:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function l(u,c){let h=u.toString(16),d=h.length<2?"0"+h:h;switch(c){case 4:return h[0];case 8:return d;case 12:return(d+d).slice(0,3);default:return d+d}}s.parseColor=function(u){if(!u)return;let c=u.toLowerCase();if(c.indexOf("rgb:")===0){c=c.slice(4);let h=o.exec(c);if(h){let d=h[1]?15:h[4]?255:h[7]?4095:65535;return[Math.round(parseInt(h[1]||h[4]||h[7]||h[10],16)/d*255),Math.round(parseInt(h[2]||h[5]||h[8]||h[11],16)/d*255),Math.round(parseInt(h[3]||h[6]||h[9]||h[12],16)/d*255)]}}else if(c.indexOf("#")===0&&(c=c.slice(1),a.exec(c)&&[3,6,9,12].includes(c.length))){let h=c.length/3,d=[0,0,0];for(let p=0;p<3;++p){let f=parseInt(c.slice(h*p,h*p+h),16);d[p]=h===1?f<<4:h===2?f:h===3?f>>4:f>>8}return d}},s.toRgbString=function(u,c=16){let[h,d,p]=u;return`rgb:${l(h,c)}/${l(d,c)}/${l(p,c)}`}},5770:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;let a=o(482),l=o(8742),u=o(5770),c=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=c,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}registerHandler(d,p){this._handlers[d]===void 0&&(this._handlers[d]=[]);let f=this._handlers[d];return f.push(p),{dispose:()=>{let m=f.indexOf(p);m!==-1&&f.splice(m,1)}}}clearHandler(d){this._handlers[d]&&delete this._handlers[d]}setHandlerFallback(d){this._handlerFb=d}reset(){if(this._active.length)for(let d=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;d>=0;--d)this._active[d].unhook(!1);this._stack.paused=!1,this._active=c,this._ident=0}hook(d,p){if(this.reset(),this._ident=d,this._active=this._handlers[d]||c,this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].hook(p);else this._handlerFb(this._ident,"HOOK",p)}put(d,p,f){if(this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].put(d,p,f);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(d,p,f))}unhook(d,p=!0){if(this._active.length){let f=!1,m=this._active.length-1,g=!1;if(this._stack.paused&&(m=this._stack.loopPosition-1,f=p,g=this._stack.fallThrough,this._stack.paused=!1),!g&&f===!1){for(;m>=0&&(f=this._active[m].unhook(d),f!==!0);m--)if(f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!1,f;m--}for(;m>=0;m--)if(f=this._active[m].unhook(!1),f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!0,f}else this._handlerFb(this._ident,"UNHOOK",d);this._active=c,this._ident=0}};let h=new l.Params;h.addParam(0),s.DcsHandler=class{constructor(d){this._handler=d,this._data="",this._params=h,this._hitLimit=!1}hook(d){this._params=d.length>1||d.params[0]?d.clone():h,this._data="",this._hitLimit=!1}put(d,p,f){this._hitLimit||(this._data+=(0,a.utf32ToString)(d,p,f),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(d){let p=!1;if(this._hitLimit)p=!1;else if(d&&(p=this._handler(this._data,this._params),p instanceof Promise))return p.then((f=>(this._params=h,this._data="",this._hitLimit=!1,f)));return this._params=h,this._data="",this._hitLimit=!1,p}}},2015:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;let a=o(844),l=o(8742),u=o(6242),c=o(6351);class h{constructor(m){this.table=new Uint8Array(m)}setDefault(m,g){this.table.fill(m<<4|g)}add(m,g,b,v){this.table[g<<8|m]=b<<4|v}addMany(m,g,b,v){for(let y=0;y<m.length;y++)this.table[g<<8|m[y]]=b<<4|v}}s.TransitionTable=h;let d=160;s.VT500_TRANSITION_TABLE=(function(){let f=new h(4095),m=Array.apply(null,Array(256)).map(((_,w)=>w)),g=(_,w)=>m.slice(_,w),b=g(32,127),v=g(0,24);v.push(25),v.push.apply(v,g(28,32));let y=g(0,14),x;for(x in f.setDefault(1,0),f.addMany(b,0,2,0),y)f.addMany([24,26,153,154],x,3,0),f.addMany(g(128,144),x,3,0),f.addMany(g(144,152),x,3,0),f.add(156,x,0,0),f.add(27,x,11,1),f.add(157,x,4,8),f.addMany([152,158,159],x,0,7),f.add(155,x,11,3),f.add(144,x,11,9);return f.addMany(v,0,3,0),f.addMany(v,1,3,1),f.add(127,1,0,1),f.addMany(v,8,0,8),f.addMany(v,3,3,3),f.add(127,3,0,3),f.addMany(v,4,3,4),f.add(127,4,0,4),f.addMany(v,6,3,6),f.addMany(v,5,3,5),f.add(127,5,0,5),f.addMany(v,2,3,2),f.add(127,2,0,2),f.add(93,1,4,8),f.addMany(b,8,5,8),f.add(127,8,5,8),f.addMany([156,27,24,26,7],8,6,0),f.addMany(g(28,32),8,0,8),f.addMany([88,94,95],1,0,7),f.addMany(b,7,0,7),f.addMany(v,7,0,7),f.add(156,7,0,0),f.add(127,7,0,7),f.add(91,1,11,3),f.addMany(g(64,127),3,7,0),f.addMany(g(48,60),3,8,4),f.addMany([60,61,62,63],3,9,4),f.addMany(g(48,60),4,8,4),f.addMany(g(64,127),4,7,0),f.addMany([60,61,62,63],4,0,6),f.addMany(g(32,64),6,0,6),f.add(127,6,0,6),f.addMany(g(64,127),6,0,0),f.addMany(g(32,48),3,9,5),f.addMany(g(32,48),5,9,5),f.addMany(g(48,64),5,0,6),f.addMany(g(64,127),5,7,0),f.addMany(g(32,48),4,9,5),f.addMany(g(32,48),1,9,2),f.addMany(g(32,48),2,9,2),f.addMany(g(48,127),2,10,0),f.addMany(g(48,80),1,10,0),f.addMany(g(81,88),1,10,0),f.addMany([89,90,92],1,10,0),f.addMany(g(96,127),1,10,0),f.add(80,1,11,9),f.addMany(v,9,0,9),f.add(127,9,0,9),f.addMany(g(28,32),9,0,9),f.addMany(g(32,48),9,9,12),f.addMany(g(48,60),9,8,10),f.addMany([60,61,62,63],9,9,10),f.addMany(v,11,0,11),f.addMany(g(32,128),11,0,11),f.addMany(g(28,32),11,0,11),f.addMany(v,10,0,10),f.add(127,10,0,10),f.addMany(g(28,32),10,0,10),f.addMany(g(48,60),10,8,10),f.addMany([60,61,62,63],10,0,11),f.addMany(g(32,48),10,9,12),f.addMany(v,12,0,12),f.add(127,12,0,12),f.addMany(g(28,32),12,0,12),f.addMany(g(32,48),12,9,12),f.addMany(g(48,64),12,0,11),f.addMany(g(64,127),12,12,13),f.addMany(g(64,127),10,12,13),f.addMany(g(64,127),9,12,13),f.addMany(v,13,13,13),f.addMany(b,13,13,13),f.add(127,13,0,13),f.addMany([27,156,24,26],13,14,0),f.add(d,0,2,0),f.add(d,8,5,8),f.add(d,6,0,6),f.add(d,11,0,11),f.add(d,13,13,13),f})();class p extends a.Disposable{constructor(m=s.VT500_TRANSITION_TABLE){super(),this._transitions=m,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new l.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(g,b,v)=>{},this._executeHandlerFb=g=>{},this._csiHandlerFb=(g,b)=>{},this._escHandlerFb=g=>{},this._errorHandlerFb=g=>g,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new c.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(m,g=[64,126]){let b=0;if(m.prefix){if(m.prefix.length>1)throw new Error("only one byte as prefix supported");if(b=m.prefix.charCodeAt(0),b&&60>b||b>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(m.intermediates){if(m.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let y=0;y<m.intermediates.length;++y){let x=m.intermediates.charCodeAt(y);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");b<<=8,b|=x}}if(m.final.length!==1)throw new Error("final must be a single byte");let v=m.final.charCodeAt(0);if(g[0]>v||v>g[1])throw new Error(`final must be in range ${g[0]} .. ${g[1]}`);return b<<=8,b|=v,b}identToString(m){let g=[];for(;m;)g.push(String.fromCharCode(255&m)),m>>=8;return g.reverse().join("")}setPrintHandler(m){this._printHandler=m}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(m,g){let b=this._identifier(m,[48,126]);this._escHandlers[b]===void 0&&(this._escHandlers[b]=[]);let v=this._escHandlers[b];return v.push(g),{dispose:()=>{let y=v.indexOf(g);y!==-1&&v.splice(y,1)}}}clearEscHandler(m){this._escHandlers[this._identifier(m,[48,126])]&&delete this._escHandlers[this._identifier(m,[48,126])]}setEscHandlerFallback(m){this._escHandlerFb=m}setExecuteHandler(m,g){this._executeHandlers[m.charCodeAt(0)]=g}clearExecuteHandler(m){this._executeHandlers[m.charCodeAt(0)]&&delete this._executeHandlers[m.charCodeAt(0)]}setExecuteHandlerFallback(m){this._executeHandlerFb=m}registerCsiHandler(m,g){let b=this._identifier(m);this._csiHandlers[b]===void 0&&(this._csiHandlers[b]=[]);let v=this._csiHandlers[b];return v.push(g),{dispose:()=>{let y=v.indexOf(g);y!==-1&&v.splice(y,1)}}}clearCsiHandler(m){this._csiHandlers[this._identifier(m)]&&delete this._csiHandlers[this._identifier(m)]}setCsiHandlerFallback(m){this._csiHandlerFb=m}registerDcsHandler(m,g){return this._dcsParser.registerHandler(this._identifier(m),g)}clearDcsHandler(m){this._dcsParser.clearHandler(this._identifier(m))}setDcsHandlerFallback(m){this._dcsParser.setHandlerFallback(m)}registerOscHandler(m,g){return this._oscParser.registerHandler(m,g)}clearOscHandler(m){this._oscParser.clearHandler(m)}setOscHandlerFallback(m){this._oscParser.setHandlerFallback(m)}setErrorHandler(m){this._errorHandler=m}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(m,g,b,v,y){this._parseStack.state=m,this._parseStack.handlers=g,this._parseStack.handlerPos=b,this._parseStack.transition=v,this._parseStack.chunkPos=y}parse(m,g,b){let v,y=0,x=0,_=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,_=this._parseStack.chunkPos+1;else{if(b===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let w=this._parseStack.handlers,C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(b===!1&&C>-1){for(;C>=0&&(v=w[C](this._params),v!==!0);C--)if(v instanceof Promise)return this._parseStack.handlerPos=C,v}this._parseStack.handlers=[];break;case 4:if(b===!1&&C>-1){for(;C>=0&&(v=w[C](),v!==!0);C--)if(v instanceof Promise)return this._parseStack.handlerPos=C,v}this._parseStack.handlers=[];break;case 6:if(y=m[this._parseStack.chunkPos],v=this._dcsParser.unhook(y!==24&&y!==26,b),v)return v;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=m[this._parseStack.chunkPos],v=this._oscParser.end(y!==24&&y!==26,b),v)return v;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,_=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let w=_;w<g;++w){switch(y=m[w],x=this._transitions.table[this.currentState<<8|(y<160?y:d)],x>>4){case 2:for(let R=w+1;;++R){if(R>=g||(y=m[R])<32||y>126&&y<d){this._printHandler(m,w,R),w=R-1;break}if(++R>=g||(y=m[R])<32||y>126&&y<d){this._printHandler(m,w,R),w=R-1;break}if(++R>=g||(y=m[R])<32||y>126&&y<d){this._printHandler(m,w,R),w=R-1;break}if(++R>=g||(y=m[R])<32||y>126&&y<d){this._printHandler(m,w,R),w=R-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:w,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let C=this._csiHandlers[this._collect<<8|y],E=C?C.length-1:-1;for(;E>=0&&(v=C[E](this._params),v!==!0);E--)if(v instanceof Promise)return this._preserveStack(3,C,E,x,w),v;E<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingJoinState=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++w<g&&(y=m[w])>47&&y<60);w--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:let A=this._escHandlers[this._collect<<8|y],D=A?A.length-1:-1;for(;D>=0&&(v=A[D](),v!==!0);D--)if(v instanceof Promise)return this._preserveStack(4,A,D,x,w),v;D<0&&this._escHandlerFb(this._collect<<8|y),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(let R=w+1;;++R)if(R>=g||(y=m[R])===24||y===26||y===27||y>127&&y<d){this._dcsParser.put(m,w,R),w=R-1;break}break;case 14:if(v=this._dcsParser.unhook(y!==24&&y!==26),v)return this._preserveStack(6,[],0,x,w),v;y===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let R=w+1;;R++)if(R>=g||(y=m[R])<32||y>127&&y<d){this._oscParser.put(m,w,R),w=R-1;break}break;case 6:if(v=this._oscParser.end(y!==24&&y!==26),v)return this._preserveStack(5,[],0,x,w),v;y===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&x}}}s.EscapeSequenceParser=p},6242:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;let a=o(5770),l=o(482),u=[];s.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(c,h){this._handlers[c]===void 0&&(this._handlers[c]=[]);let d=this._handlers[c];return d.push(h),{dispose:()=>{let p=d.indexOf(h);p!==-1&&d.splice(p,1)}}}clearHandler(c){this._handlers[c]&&delete this._handlers[c]}setHandlerFallback(c){this._handlerFb=c}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let c=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;c>=0;--c)this._active[c].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].start();else this._handlerFb(this._id,"START")}_put(c,h,d){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(c,h,d);else this._handlerFb(this._id,"PUT",(0,l.utf32ToString)(c,h,d))}start(){this.reset(),this._state=1}put(c,h,d){if(this._state!==3){if(this._state===1)for(;h<d;){let p=c[h++];if(p===59){this._state=2,this._start();break}if(p<48||57<p)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+p-48}this._state===2&&d-h>0&&this._put(c,h,d)}}end(c,h=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let d=!1,p=this._active.length-1,f=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,d=h,f=this._stack.fallThrough,this._stack.paused=!1),!f&&d===!1){for(;p>=0&&(d=this._active[p].end(c),d!==!0);p--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,d;p--}for(;p>=0;p--)if(d=this._active[p].end(!1),d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,d}else this._handlerFb(this._id,"END",c);this._active=u,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(c){this._handler=c,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(c,h,d){this._hitLimit||(this._data+=(0,l.utf32ToString)(c,h,d),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(c){let h=!1;if(this._hitLimit)h=!1;else if(c&&(h=this._handler(this._data),h instanceof Promise))return h.then((d=>(this._data="",this._hitLimit=!1,d)));return this._data="",this._hitLimit=!1,h}}},8742:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;let o=2147483647;class a{static fromArray(u){let c=new a;if(!u.length)return c;for(let h=Array.isArray(u[0])?1:0;h<u.length;++h){let d=u[h];if(Array.isArray(d))for(let p=0;p<d.length;++p)c.addSubParam(d[p]);else c.addParam(d)}return c}constructor(u=32,c=32){if(this.maxLength=u,this.maxSubParamsLength=c,c>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(c),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let u=new a(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){let u=[];for(let c=0;c<this.length;++c){u.push(this.params[c]);let h=this._subParamsIdx[c]>>8,d=255&this._subParamsIdx[c];d-h>0&&u.push(Array.prototype.slice.call(this._subParams,h,d))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>o?o:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>o?o:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){let c=this._subParamsIdx[u]>>8,h=255&this._subParamsIdx[u];return h-c>0?this._subParams.subarray(c,h):null}getSubParamsAll(){let u={};for(let c=0;c<this.length;++c){let h=this._subParamsIdx[c]>>8,d=255&this._subParamsIdx[c];d-h>0&&(u[c]=this._subParams.slice(h,d))}return u}addDigit(u){let c;if(this._rejectDigits||!(c=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let h=this._digitIsSub?this._subParams:this.params,d=h[c-1];h[c-1]=~d?Math.min(10*d+u,o):u}}s.Params=a},5741:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,a){let l={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(l),a.dispose=()=>this._wrappedAddonDispose(l),a.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let a=-1;for(let l=0;l<this._addons.length;l++)if(this._addons[l]===o){a=l;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(a,1)}}},8771:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;let a=o(3785),l=o(511);s.BufferApiView=class{constructor(u,c){this._buffer=u,this.type=c}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){let c=this._buffer.lines.get(u);if(c)return new a.BufferLineApiView(c)}getNullCell(){return new l.CellData}}},3785:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;let a=o(511);s.BufferLineApiView=class{constructor(l){this._line=l}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(l,u){if(!(l<0||l>=this._line.length))return u?(this._line.loadCell(l,u),u):this._line.loadCell(l,new a.CellData)}translateToString(l,u,c){return this._line.translateToString(l,u,c)}}},8285:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;let a=o(8771),l=o(8460),u=o(844);class c extends u.Disposable{constructor(d){super(),this._core=d,this._onBufferChange=this.register(new l.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=c},7975:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,a){return this._core.registerCsiHandler(o,(l=>a(l.toArray())))}addCsiHandler(o,a){return this.registerCsiHandler(o,a)}registerDcsHandler(o,a){return this._core.registerDcsHandler(o,((l,u)=>a(l,u.toArray())))}addDcsHandler(o,a){return this.registerDcsHandler(o,a)}registerEscHandler(o,a){return this._core.registerEscHandler(o,a)}addEscHandler(o,a){return this.registerEscHandler(o,a)}registerOscHandler(o,a){return this._core.registerOscHandler(o,a)}addOscHandler(o,a){return this.registerOscHandler(o,a)}}},7090:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(n,s,o){var a=this&&this.__decorate||function(f,m,g,b){var v,y=arguments.length,x=y<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(f,m,g,b);else for(var _=f.length-1;_>=0;_--)(v=f[_])&&(x=(y<3?v(x):y>3?v(m,g,x):v(m,g))||x);return y>3&&x&&Object.defineProperty(m,g,x),x},l=this&&this.__param||function(f,m){return function(g,b){m(g,b,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;let u=o(8460),c=o(844),h=o(5295),d=o(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let p=s.BufferService=class extends c.Disposable{get buffer(){return this.buffers.active}constructor(f){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(f.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(f.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new h.BufferSet(f,this))}resize(f,m){this.cols=f,this.rows=m,this.buffers.resize(f,m),this._onResize.fire({cols:f,rows:m})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(f,m=!1){let g=this.buffer,b;b=this._cachedBlankLine,b&&b.length===this.cols&&b.getFg(0)===f.fg&&b.getBg(0)===f.bg||(b=g.getBlankLine(f,m),this._cachedBlankLine=b),b.isWrapped=m;let v=g.ybase+g.scrollTop,y=g.ybase+g.scrollBottom;if(g.scrollTop===0){let x=g.lines.isFull;y===g.lines.length-1?x?g.lines.recycle().copyFrom(b):g.lines.push(b.clone()):g.lines.splice(y+1,0,b.clone()),x?this.isUserScrolling&&(g.ydisp=Math.max(g.ydisp-1,0)):(g.ybase++,this.isUserScrolling||g.ydisp++)}else{let x=y-v+1;g.lines.shiftElements(v+1,x-1,-1),g.lines.set(y,b.clone())}this.isUserScrolling||(g.ydisp=g.ybase),this._onScroll.fire(g.ydisp)}scrollLines(f,m,g){let b=this.buffer;if(f<0){if(b.ydisp===0)return;this.isUserScrolling=!0}else f+b.ydisp>=b.ybase&&(this.isUserScrolling=!1);let v=b.ydisp;b.ydisp=Math.max(Math.min(b.ydisp+f,b.ybase),0),v!==b.ydisp&&(m||this._onScroll.fire(b.ydisp))}};s.BufferService=p=a([l(0,d.IOptionsService)],p)},7994:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,a){this._charsets[o]=a,this.glevel===o&&(this.charset=a)}}},1753:function(n,s,o){var a=this&&this.__decorate||function(b,v,y,x){var _,w=arguments.length,C=w<3?v:x===null?x=Object.getOwnPropertyDescriptor(v,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(b,v,y,x);else for(var E=b.length-1;E>=0;E--)(_=b[E])&&(C=(w<3?_(C):w>3?_(v,y,C):_(v,y))||C);return w>3&&C&&Object.defineProperty(v,y,C),C},l=this&&this.__param||function(b,v){return function(y,x){v(y,x,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;let u=o(2585),c=o(8460),h=o(844),d={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:b=>b.button!==4&&b.action===1&&(b.ctrl=!1,b.alt=!1,b.shift=!1,!0)},VT200:{events:19,restrict:b=>b.action!==32},DRAG:{events:23,restrict:b=>b.action!==32||b.button!==3},ANY:{events:31,restrict:b=>!0}};function p(b,v){let y=(b.ctrl?16:0)|(b.shift?4:0)|(b.alt?8:0);return b.button===4?(y|=64,y|=b.action):(y|=3&b.button,4&b.button&&(y|=64),8&b.button&&(y|=128),b.action===32?y|=32:b.action!==0||v||(y|=3)),y}let f=String.fromCharCode,m={DEFAULT:b=>{let v=[p(b,!1)+32,b.col+32,b.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${f(v[0])}${f(v[1])}${f(v[2])}`},SGR:b=>{let v=b.action===0&&b.button!==4?"m":"M";return`\x1B[<${p(b,!0)};${b.col};${b.row}${v}`},SGR_PIXELS:b=>{let v=b.action===0&&b.button!==4?"m":"M";return`\x1B[<${p(b,!0)};${b.x};${b.y}${v}`}},g=s.CoreMouseService=class extends h.Disposable{constructor(b,v){super(),this._bufferService=b,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new c.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let y of Object.keys(d))this.addProtocol(y,d[y]);for(let y of Object.keys(m))this.addEncoding(y,m[y]);this.reset()}addProtocol(b,v){this._protocols[b]=v}addEncoding(b,v){this._encodings[b]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(b){if(!this._protocols[b])throw new Error(`unknown protocol "${b}"`);this._activeProtocol=b,this._onProtocolChange.fire(this._protocols[b].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(b){if(!this._encodings[b])throw new Error(`unknown encoding "${b}"`);this._activeEncoding=b}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(b){if(b.col<0||b.col>=this._bufferService.cols||b.row<0||b.row>=this._bufferService.rows||b.button===4&&b.action===32||b.button===3&&b.action!==32||b.button!==4&&(b.action===2||b.action===3)||(b.col++,b.row++,b.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,b,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(b))return!1;let v=this._encodings[this._activeEncoding](b);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=b,!0}explainEvents(b){return{down:!!(1&b),up:!!(2&b),drag:!!(4&b),move:!!(8&b),wheel:!!(16&b)}}_equalEvents(b,v,y){if(y){if(b.x!==v.x||b.y!==v.y)return!1}else if(b.col!==v.col||b.row!==v.row)return!1;return b.button===v.button&&b.action===v.action&&b.ctrl===v.ctrl&&b.alt===v.alt&&b.shift===v.shift}};s.CoreMouseService=g=a([l(0,u.IBufferService),l(1,u.ICoreService)],g)},6975:function(n,s,o){var a=this&&this.__decorate||function(g,b,v,y){var x,_=arguments.length,w=_<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,b,v,y);else for(var C=g.length-1;C>=0;C--)(x=g[C])&&(w=(_<3?x(w):_>3?x(b,v,w):x(b,v))||w);return _>3&&w&&Object.defineProperty(b,v,w),w},l=this&&this.__param||function(g,b){return function(v,y){b(v,y,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;let u=o(1439),c=o(8460),h=o(844),d=o(2585),p=Object.freeze({insertMode:!1}),f=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),m=s.CoreService=class extends h.Disposable{constructor(g,b,v){super(),this._bufferService=g,this._logService=b,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new c.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new c.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(p),this.decPrivateModes=(0,u.clone)(f)}reset(){this.modes=(0,u.clone)(p),this.decPrivateModes=(0,u.clone)(f)}triggerDataEvent(g,b=!1){if(this._optionsService.rawOptions.disableStdin)return;let v=this._bufferService.buffer;b&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),b&&this._onUserInput.fire(),this._logService.debug(`sending data "${g}"`,(()=>g.split("").map((y=>y.charCodeAt(0))))),this._onData.fire(g)}triggerBinaryEvent(g){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${g}"`,(()=>g.split("").map((b=>b.charCodeAt(0))))),this._onBinary.fire(g))}};s.CoreService=m=a([l(0,d.IBufferService),l(1,d.ILogService),l(2,d.IOptionsService)],m)},9074:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;let a=o(8055),l=o(8460),u=o(844),c=o(6106),h=0,d=0;class p extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new c.SortedList((g=>g?.marker.line)),this._onDecorationRegistered=this.register(new l.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new l.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)((()=>this.reset())))}registerDecoration(g){if(g.marker.isDisposed)return;let b=new f(g);if(b){let v=b.marker.onDispose((()=>b.dispose()));b.onDispose((()=>{b&&(this._decorations.delete(b)&&this._onDecorationRemoved.fire(b),v.dispose())})),this._decorations.insert(b),this._onDecorationRegistered.fire(b)}return b}reset(){for(let g of this._decorations.values())g.dispose();this._decorations.clear()}*getDecorationsAtCell(g,b,v){let y=0,x=0;for(let _ of this._decorations.getKeyIterator(b))y=_.options.x??0,x=y+(_.options.width??1),g>=y&&g<x&&(!v||(_.options.layer??"bottom")===v)&&(yield _)}forEachDecorationAtCell(g,b,v,y){this._decorations.forEachByKey(b,(x=>{h=x.options.x??0,d=h+(x.options.width??1),g>=h&&g<d&&(!v||(x.options.layer??"bottom")===v)&&y(x)}))}}s.DecorationService=p;class f extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(g){super(),this.options=g,this.onRenderEmitter=this.register(new l.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=g.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;let a=o(2585),l=o(8343);class u{constructor(...h){this._entries=new Map;for(let[d,p]of h)this.set(d,p)}set(h,d){let p=this._entries.get(h);return this._entries.set(h,d),p}forEach(h){for(let[d,p]of this._entries.entries())h(d,p)}has(h){return this._entries.has(h)}get(h){return this._entries.get(h)}}s.ServiceCollection=u,s.InstantiationService=class{constructor(){this._services=new u,this._services.set(a.IInstantiationService,this)}setService(c,h){this._services.set(c,h)}getService(c){return this._services.get(c)}createInstance(c,...h){let d=(0,l.getServiceDependencies)(c).sort(((m,g)=>m.index-g.index)),p=[];for(let m of d){let g=this._services.get(m.id);if(!g)throw new Error(`[createInstance] ${c.name} depends on UNKNOWN service ${m.id}.`);p.push(g)}let f=d.length>0?d[0].index:h.length;if(h.length!==f)throw new Error(`[createInstance] First service dependency of ${c.name} at position ${f+1} conflicts with ${h.length} static arguments`);return new c(...h,...p)}}},7866:function(n,s,o){var a=this&&this.__decorate||function(f,m,g,b){var v,y=arguments.length,x=y<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(f,m,g,b);else for(var _=f.length-1;_>=0;_--)(v=f[_])&&(x=(y<3?v(x):y>3?v(m,g,x):v(m,g))||x);return y>3&&x&&Object.defineProperty(m,g,x),x},l=this&&this.__param||function(f,m){return function(g,b){m(g,b,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let u=o(844),c=o(2585),h={trace:c.LogLevelEnum.TRACE,debug:c.LogLevelEnum.DEBUG,info:c.LogLevelEnum.INFO,warn:c.LogLevelEnum.WARN,error:c.LogLevelEnum.ERROR,off:c.LogLevelEnum.OFF},d,p=s.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(f){super(),this._optionsService=f,this._logLevel=c.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),d=this}_updateLogLevel(){this._logLevel=h[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(f){for(let m=0;m<f.length;m++)typeof f[m]=="function"&&(f[m]=f[m]())}_log(f,m,g){this._evalLazyOptionalParams(g),f.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+m,...g)}trace(f,...m){this._logLevel<=c.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,f,m)}debug(f,...m){this._logLevel<=c.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,f,m)}info(f,...m){this._logLevel<=c.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,f,m)}warn(f,...m){this._logLevel<=c.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,f,m)}error(f,...m){this._logLevel<=c.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,f,m)}};s.LogService=p=a([l(0,c.IOptionsService)],p),s.setTraceLogger=function(f){d=f},s.traceCall=function(f,m,g){if(typeof g.value!="function")throw new Error("not supported");let b=g.value;g.value=function(...v){if(d.logLevel!==c.LogLevelEnum.TRACE)return b.apply(this,v);d.trace(`GlyphRenderer#${b.name}(${v.map((x=>JSON.stringify(x))).join(", ")})`);let y=b.apply(this,v);return d.trace(`GlyphRenderer#${b.name} return`,y),y}}},7302:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;let a=o(8460),l=o(844),u=o(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let c=["normal","bold","100","200","300","400","500","600","700","800","900"];class h extends l.Disposable{constructor(p){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let f={...s.DEFAULT_OPTIONS};for(let m in p)if(m in f)try{let g=p[m];f[m]=this._sanitizeAndValidateOption(m,g)}catch(g){console.error(g)}this.rawOptions=f,this.options={...f},this._setupOptions(),this.register((0,l.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(p,f){return this.onOptionChange((m=>{m===p&&f(this.rawOptions[p])}))}onMultipleOptionChange(p,f){return this.onOptionChange((m=>{p.indexOf(m)!==-1&&f()}))}_setupOptions(){let p=m=>{if(!(m in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${m}"`);return this.rawOptions[m]},f=(m,g)=>{if(!(m in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${m}"`);g=this._sanitizeAndValidateOption(m,g),this.rawOptions[m]!==g&&(this.rawOptions[m]=g,this._onOptionChange.fire(m))};for(let m in this.rawOptions){let g={get:p.bind(this,m),set:f.bind(this,m)};Object.defineProperty(this.options,m,g)}}_sanitizeAndValidateOption(p,f){switch(p){case"cursorStyle":if(f||(f=s.DEFAULT_OPTIONS[p]),!(function(m){return m==="block"||m==="underline"||m==="bar"})(f))throw new Error(`"${f}" is not a valid value for ${p}`);break;case"wordSeparator":f||(f=s.DEFAULT_OPTIONS[p]);break;case"fontWeight":case"fontWeightBold":if(typeof f=="number"&&1<=f&&f<=1e3)break;f=c.includes(f)?f:s.DEFAULT_OPTIONS[p];break;case"cursorWidth":f=Math.floor(f);case"lineHeight":case"tabStopWidth":if(f<1)throw new Error(`${p} cannot be less than 1, value: ${f}`);break;case"minimumContrastRatio":f=Math.max(1,Math.min(21,Math.round(10*f)/10));break;case"scrollback":if((f=Math.min(f,4294967295))<0)throw new Error(`${p} cannot be less than 0, value: ${f}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(f<=0)throw new Error(`${p} cannot be less than or equal to 0, value: ${f}`);break;case"rows":case"cols":if(!f&&f!==0)throw new Error(`${p} must be numeric, value: ${f}`);break;case"windowsPty":f=f??{}}return f}}s.OptionsService=h},2660:function(n,s,o){var a=this&&this.__decorate||function(h,d,p,f){var m,g=arguments.length,b=g<3?d:f===null?f=Object.getOwnPropertyDescriptor(d,p):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(h,d,p,f);else for(var v=h.length-1;v>=0;v--)(m=h[v])&&(b=(g<3?m(b):g>3?m(d,p,b):m(d,p))||b);return g>3&&b&&Object.defineProperty(d,p,b),b},l=this&&this.__param||function(h,d){return function(p,f){d(p,f,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;let u=o(2585),c=s.OscLinkService=class{constructor(h){this._bufferService=h,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(h){let d=this._bufferService.buffer;if(h.id===void 0){let v=d.addMarker(d.ybase+d.y),y={data:h,id:this._nextId++,lines:[v]};return v.onDispose((()=>this._removeMarkerFromLink(y,v))),this._dataByLinkId.set(y.id,y),y.id}let p=h,f=this._getEntryIdKey(p),m=this._entriesWithId.get(f);if(m)return this.addLineToLink(m.id,d.ybase+d.y),m.id;let g=d.addMarker(d.ybase+d.y),b={id:this._nextId++,key:this._getEntryIdKey(p),data:p,lines:[g]};return g.onDispose((()=>this._removeMarkerFromLink(b,g))),this._entriesWithId.set(b.key,b),this._dataByLinkId.set(b.id,b),b.id}addLineToLink(h,d){let p=this._dataByLinkId.get(h);if(p&&p.lines.every((f=>f.line!==d))){let f=this._bufferService.buffer.addMarker(d);p.lines.push(f),f.onDispose((()=>this._removeMarkerFromLink(p,f)))}}getLinkData(h){return this._dataByLinkId.get(h)?.data}_getEntryIdKey(h){return`${h.id};;${h.uri}`}_removeMarkerFromLink(h,d){let p=h.lines.indexOf(d);p!==-1&&(h.lines.splice(p,1),h.lines.length===0&&(h.data.id!==void 0&&this._entriesWithId.delete(h.key),this._dataByLinkId.delete(h.id)))}};s.OscLinkService=c=a([l(0,u.IBufferService)],c)},8343:(n,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let o="di$target",a="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(l){return l[a]||[]},s.createDecorator=function(l){if(s.serviceRegistry.has(l))return s.serviceRegistry.get(l);let u=function(c,h,d){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(p,f,m){f[o]===f?f[a].push({id:p,index:m}):(f[a]=[{id:p,index:m}],f[o]=f)})(u,c,d)};return u.toString=()=>l,s.serviceRegistry.set(l,u),u}},2585:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let a=o(8343);var l;s.IBufferService=(0,a.createDecorator)("BufferService"),s.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),s.ICoreService=(0,a.createDecorator)("CoreService"),s.ICharsetService=(0,a.createDecorator)("CharsetService"),s.IInstantiationService=(0,a.createDecorator)("InstantiationService"),(function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"})(l||(s.LogLevelEnum=l={})),s.ILogService=(0,a.createDecorator)("LogService"),s.IOptionsService=(0,a.createDecorator)("OptionsService"),s.IOscLinkService=(0,a.createDecorator)("OscLinkService"),s.IUnicodeService=(0,a.createDecorator)("UnicodeService"),s.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(n,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;let a=o(8460),l=o(225);class u{static extractShouldJoin(h){return(1&h)!=0}static extractWidth(h){return h>>1&3}static extractCharKind(h){return h>>3}static createPropertyValue(h,d,p=!1){return(16777215&h)<<3|(3&d)<<1|(p?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let h=new l.UnicodeV6;this.register(h),this._active=h.version,this._activeProvider=h}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(h){if(!this._providers[h])throw new Error(`unknown Unicode version "${h}"`);this._active=h,this._activeProvider=this._providers[h],this._onChange.fire(h)}register(h){this._providers[h.version]=h}wcwidth(h){return this._activeProvider.wcwidth(h)}getStringCellWidth(h){let d=0,p=0,f=h.length;for(let m=0;m<f;++m){let g=h.charCodeAt(m);if(55296<=g&&g<=56319){if(++m>=f)return d+this.wcwidth(g);let y=h.charCodeAt(m);56320<=y&&y<=57343?g=1024*(g-55296)+y-56320+65536:d+=this.wcwidth(y)}let b=this.charProperties(g,p),v=u.extractWidth(b);u.extractShouldJoin(b)&&(v-=u.extractWidth(p)),d+=v,p=b}return d}charProperties(h,d){return this._activeProvider.charProperties(h,d)}}s.UnicodeService=u}},e={};function i(n){var s=e[n];if(s!==void 0)return s.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}var r={};return(()=>{var n=r;Object.defineProperty(n,"__esModule",{value:!0}),n.Terminal=void 0;let s=i(9042),o=i(3236),a=i(844),l=i(5741),u=i(8285),c=i(7975),h=i(7090),d=["cols","rows"];class p extends a.Disposable{constructor(m){super(),this._core=this.register(new o.Terminal(m)),this._addonManager=this.register(new l.AddonManager),this._publicOptions={...this._core.options};let g=v=>this._core.options[v],b=(v,y)=>{this._checkReadonlyOptions(v),this._core.options[v]=y};for(let v in this._core.options){let y={get:g.bind(this,v),set:b.bind(this,v)};Object.defineProperty(this._publicOptions,v,y)}}_checkReadonlyOptions(m){if(d.includes(m))throw new Error(`Option "${m}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new c.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new h.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let m=this._core.coreService.decPrivateModes,g="none";switch(this._core.coreMouseService.activeProtocol){case"X10":g="x10";break;case"VT200":g="vt200";break;case"DRAG":g="drag";break;case"ANY":g="any"}return{applicationCursorKeysMode:m.applicationCursorKeys,applicationKeypadMode:m.applicationKeypad,bracketedPasteMode:m.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:g,originMode:m.origin,reverseWraparoundMode:m.reverseWraparound,sendFocusMode:m.sendFocus,wraparoundMode:m.wraparound}}get options(){return this._publicOptions}set options(m){for(let g in m)this._publicOptions[g]=m[g]}blur(){this._core.blur()}focus(){this._core.focus()}input(m,g=!0){this._core.input(m,g)}resize(m,g){this._verifyIntegers(m,g),this._core.resize(m,g)}open(m){this._core.open(m)}attachCustomKeyEventHandler(m){this._core.attachCustomKeyEventHandler(m)}attachCustomWheelEventHandler(m){this._core.attachCustomWheelEventHandler(m)}registerLinkProvider(m){return this._core.registerLinkProvider(m)}registerCharacterJoiner(m){return this._checkProposedApi(),this._core.registerCharacterJoiner(m)}deregisterCharacterJoiner(m){this._checkProposedApi(),this._core.deregisterCharacterJoiner(m)}registerMarker(m=0){return this._verifyIntegers(m),this._core.registerMarker(m)}registerDecoration(m){return this._checkProposedApi(),this._verifyPositiveIntegers(m.x??0,m.width??0,m.height??0),this._core.registerDecoration(m)}hasSelection(){return this._core.hasSelection()}select(m,g,b){this._verifyIntegers(m,g,b),this._core.select(m,g,b)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(m,g){this._verifyIntegers(m,g),this._core.selectLines(m,g)}dispose(){super.dispose()}scrollLines(m){this._verifyIntegers(m),this._core.scrollLines(m)}scrollPages(m){this._verifyIntegers(m),this._core.scrollPages(m)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(m){this._verifyIntegers(m),this._core.scrollToLine(m)}clear(){this._core.clear()}write(m,g){this._core.write(m,g)}writeln(m,g){this._core.write(m),this._core.write(`\r
`,g)}paste(m){this._core.paste(m)}refresh(m,g){this._verifyIntegers(m,g),this._core.refresh(m,g)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(m){this._addonManager.loadAddon(this,m)}static get strings(){return s}_verifyIntegers(...m){for(let g of m)if(g===1/0||isNaN(g)||g%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...m){for(let g of m)if(g&&(g===1/0||isNaN(g)||g%1!=0||g<0))throw new Error("This API only accepts positive integers")}}n.Terminal=p})(),r})()))});var Fw=globalThis,Lw=Fw.ShadowRoot&&(Fw.ShadyCSS===void 0||Fw.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,F6=Symbol(),Tz=new WeakMap,x1=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==F6)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o,i=this.t;if(Lw&&e===void 0){let r=i!==void 0&&i.length===1;r&&(e=Tz.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Tz.set(i,e))}return e}toString(){return this.cssText}},Ow=t=>new x1(typeof t=="string"?t:t+"",void 0,F6),ze=(t,...e)=>{let i=t.length===1?t[0]:e.reduce(((r,n,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1]),t[0]);return new x1(i,t,F6)},Rz=(t,e)=>{if(Lw)t.adoptedStyleSheets=e.map((i=>i instanceof CSSStyleSheet?i:i.styleSheet));else for(let i of e){let r=document.createElement("style"),n=Fw.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=i.cssText,t.appendChild(r)}},L6=Lw?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(let r of e.cssRules)i+=r.cssText;return Ow(i)})(t):t;var{is:kse,defineProperty:Ase,getOwnPropertyDescriptor:Tse,getOwnPropertyNames:Rse,getOwnPropertySymbols:Dse,getPrototypeOf:Mse}=Object,Jc=globalThis,Dz=Jc.trustedTypes,Fse=Dz?Dz.emptyScript:"",Lse=Jc.reactiveElementPolyfillSupport,w1=(t,e)=>t,Zc={toAttribute(t,e){switch(e){case Boolean:t=t?Fse:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},Pw=(t,e)=>!kse(t,e),Mz={attribute:!0,type:String,converter:Zc,reflect:!1,useDefault:!1,hasChanged:Pw};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Jc.litPropertyMetadata??(Jc.litPropertyMetadata=new WeakMap);var xu=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=Mz){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){let r=Symbol(),n=this.getPropertyDescriptor(e,r,i);n!==void 0&&Ase(this.prototype,e,n)}}static getPropertyDescriptor(e,i,r){let{get:n,set:s}=Tse(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get:n,set(o){let a=n?.call(this);s?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Mz}static _$Ei(){if(this.hasOwnProperty(w1("elementProperties")))return;let e=Mse(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(w1("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(w1("properties"))){let i=this.properties,r=[...Rse(i),...Dse(i)];for(let n of r)this.createProperty(n,i[n])}let e=this[Symbol.metadata];if(e!==null){let i=litPropertyMetadata.get(e);if(i!==void 0)for(let[r,n]of i)this.elementProperties.set(r,n)}this._$Eh=new Map;for(let[i,r]of this.elementProperties){let n=this._$Eu(i,r);n!==void 0&&this._$Eh.set(n,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let i=[];if(Array.isArray(e)){let r=new Set(e.flat(1/0).reverse());for(let n of r)i.unshift(L6(n))}else e!==void 0&&i.push(L6(e));return i}static _$Eu(e,i){let r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map,i=this.constructor.elementProperties;for(let r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Rz(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){let r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(n!==void 0&&r.reflect===!0){let s=(r.converter?.toAttribute!==void 0?r.converter:Zc).toAttribute(i,r.type);this._$Em=e,s==null?this.removeAttribute(n):this.setAttribute(n,s),this._$Em=null}}_$AK(e,i){let r=this.constructor,n=r._$Eh.get(e);if(n!==void 0&&this._$Em!==n){let s=r.getPropertyOptions(n),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:Zc;this._$Em=n;let a=o.fromAttribute(i,s.type);this[n]=a??this._$Ej?.get(n)??a,this._$Em=null}}requestUpdate(e,i,r){if(e!==void 0){let n=this.constructor,s=this[e];if(r??(r=n.getPropertyOptions(e)),!((r.hasChanged??Pw)(s,i)||r.useDefault&&r.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(n._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:n,wrapped:s},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??i??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),n===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(let[n,s]of this._$Ep)this[n]=s;this._$Ep=void 0}let r=this.constructor.elementProperties;if(r.size>0)for(let[n,s]of r){let{wrapped:o}=s,a=this[n];o!==!0||this._$AL.has(n)||a===void 0||this.C(n,void 0,s,a)}}let e=!1,i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),this._$EO?.forEach((r=>r.hostUpdate?.())),this.update(i)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(i)}willUpdate(e){}_$AE(e){this._$EO?.forEach((i=>i.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach((i=>this._$ET(i,this[i])))),this._$EM()}updated(e){}firstUpdated(e){}};xu.elementStyles=[],xu.shadowRootOptions={mode:"open"},xu[w1("elementProperties")]=new Map,xu[w1("finalized")]=new Map,Lse?.({ReactiveElement:xu}),(Jc.reactiveElementVersions??(Jc.reactiveElementVersions=[])).push("2.1.1");var C1=globalThis,zw=C1.trustedTypes,Fz=zw?zw.createPolicy("lit-html",{createHTML:t=>t}):void 0,P6="$lit$",wu=`lit$${Math.random().toFixed(9).slice(2)}$`,z6="?"+wu,Ose=`<${z6}>`,Id=document,S1=()=>Id.createComment(""),E1=t=>t===null||typeof t!="object"&&typeof t!="function",I6=Array.isArray,Bz=t=>I6(t)||typeof t?.[Symbol.iterator]=="function",O6=`[ 	
\f\r]`,_1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Lz=/-->/g,Oz=/>/g,Pd=RegExp(`>|${O6}(?:([^\\s"'>=/]+)(${O6}*=${O6}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Pz=/'/g,zz=/"/g,Nz=/^(?:script|style|textarea|title)$/i,B6=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),X=B6(1),Uw=B6(2),$z=B6(3),nr=Symbol.for("lit-noChange"),lt=Symbol.for("lit-nothing"),Iz=new WeakMap,zd=Id.createTreeWalker(Id,129);function Hz(t,e){if(!I6(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Fz!==void 0?Fz.createHTML(e):e}var Uz=(t,e)=>{let i=t.length-1,r=[],n,s=e===2?"<svg>":e===3?"<math>":"",o=_1;for(let a=0;a<i;a++){let l=t[a],u,c,h=-1,d=0;for(;d<l.length&&(o.lastIndex=d,c=o.exec(l),c!==null);)d=o.lastIndex,o===_1?c[1]==="!--"?o=Lz:c[1]!==void 0?o=Oz:c[2]!==void 0?(Nz.test(c[2])&&(n=RegExp("</"+c[2],"g")),o=Pd):c[3]!==void 0&&(o=Pd):o===Pd?c[0]===">"?(o=n??_1,h=-1):c[1]===void 0?h=-2:(h=o.lastIndex-c[2].length,u=c[1],o=c[3]===void 0?Pd:c[3]==='"'?zz:Pz):o===zz||o===Pz?o=Pd:o===Lz||o===Oz?o=_1:(o=Pd,n=void 0);let p=o===Pd&&t[a+1].startsWith("/>")?" ":"";s+=o===_1?l+Ose:h>=0?(r.push(u),l.slice(0,h)+P6+l.slice(h)+wu+p):l+wu+(h===-2?a:p)}return[Hz(t,s+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]},k1=class t{constructor({strings:e,_$litType$:i},r){let n;this.parts=[];let s=0,o=0,a=e.length-1,l=this.parts,[u,c]=Uz(e,i);if(this.el=t.createElement(u,r),zd.currentNode=this.el.content,i===2||i===3){let h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(n=zd.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(let h of n.getAttributeNames())if(h.endsWith(P6)){let d=c[o++],p=n.getAttribute(h).split(wu),f=/([.?@])?(.*)/.exec(d);l.push({type:1,index:s,name:f[2],strings:p,ctor:f[1]==="."?Bw:f[1]==="?"?Nw:f[1]==="@"?$w:Nd}),n.removeAttribute(h)}else h.startsWith(wu)&&(l.push({type:6,index:s}),n.removeAttribute(h));if(Nz.test(n.tagName)){let h=n.textContent.split(wu),d=h.length-1;if(d>0){n.textContent=zw?zw.emptyScript:"";for(let p=0;p<d;p++)n.append(h[p],S1()),zd.nextNode(),l.push({type:2,index:++s});n.append(h[d],S1())}}}else if(n.nodeType===8)if(n.data===z6)l.push({type:2,index:s});else{let h=-1;for(;(h=n.data.indexOf(wu,h+1))!==-1;)l.push({type:7,index:s}),h+=wu.length-1}s++}}static createElement(e,i){let r=Id.createElement("template");return r.innerHTML=e,r}};function Bd(t,e,i=t,r){if(e===nr)return e;let n=r!==void 0?i._$Co?.[r]:i._$Cl,s=E1(e)?void 0:e._$litDirective$;return n?.constructor!==s&&(n?._$AO?.(!1),s===void 0?n=void 0:(n=new s(t),n._$AT(t,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=n:i._$Cl=n),n!==void 0&&(e=Bd(t,n._$AS(t,e.values),n,r)),e}var Iw=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:i},parts:r}=this._$AD,n=(e?.creationScope??Id).importNode(i,!0);zd.currentNode=n;let s=zd.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let u;l.type===2?u=new Xp(s,s.nextSibling,this,e):l.type===1?u=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(u=new Hw(s,this,e)),this._$AV.push(u),l=r[++a]}o!==l?.index&&(s=zd.nextNode(),o++)}return zd.currentNode=Id,n}p(e){let i=0;for(let r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},Xp=class t{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,i,r,n){this.type=2,this._$AH=lt,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,i=this._$AM;return i!==void 0&&e?.nodeType===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=Bd(this,e,i),E1(e)?e===lt||e==null||e===""?(this._$AH!==lt&&this._$AR(),this._$AH=lt):e!==this._$AH&&e!==nr&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Bz(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==lt&&E1(this._$AH)?this._$AA.nextSibling.data=e:this.T(Id.createTextNode(e)),this._$AH=e}$(e){let{values:i,_$litType$:r}=e,n=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=k1.createElement(Hz(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===n)this._$AH.p(i);else{let s=new Iw(n,this),o=s.u(this.options);s.p(i),this.T(o),this._$AH=s}}_$AC(e){let i=Iz.get(e.strings);return i===void 0&&Iz.set(e.strings,i=new k1(e)),i}k(e){I6(this._$AH)||(this._$AH=[],this._$AR());let i=this._$AH,r,n=0;for(let s of e)n===i.length?i.push(r=new t(this.O(S1()),this.O(S1()),this,this.options)):r=i[n],r._$AI(s),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(e=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);e!==this._$AB;){let r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},Nd=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,n,s){this.type=1,this._$AH=lt,this._$AN=void 0,this.element=e,this.name=i,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=lt}_$AI(e,i=this,r,n){let s=this.strings,o=!1;if(s===void 0)e=Bd(this,e,i,0),o=!E1(e)||e!==this._$AH&&e!==nr,o&&(this._$AH=e);else{let a=e,l,u;for(e=s[0],l=0;l<s.length-1;l++)u=Bd(this,a[r+l],i,l),u===nr&&(u=this._$AH[l]),o||(o=!E1(u)||u!==this._$AH[l]),u===lt?e=lt:e!==lt&&(e+=(u??"")+s[l+1]),this._$AH[l]=u}o&&!n&&this.j(e)}j(e){e===lt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},Bw=class extends Nd{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===lt?void 0:e}},Nw=class extends Nd{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==lt)}},$w=class extends Nd{constructor(e,i,r,n,s){super(e,i,r,n,s),this.type=5}_$AI(e,i=this){if((e=Bd(this,e,i,0)??lt)===nr)return;let r=this._$AH,n=e===lt&&r!==lt||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==lt&&(r===lt||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},Hw=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Bd(this,e)}},Wz={M:P6,P:wu,A:z6,C:1,L:Uz,R:Iw,D:Bz,V:Bd,I:Xp,H:Nd,N:Nw,U:$w,B:Bw,F:Hw},Pse=C1.litHtmlPolyfillSupport;Pse?.(k1,Xp),(C1.litHtmlVersions??(C1.litHtmlVersions=[])).push("3.3.1");var Vz=(t,e,i)=>{let r=i?.renderBefore??e,n=r._$litPart$;if(n===void 0){let s=i?.renderBefore??null;r._$litPart$=n=new Xp(e.insertBefore(S1(),s),s,void 0,i??{})}return n._$AI(t),n};var A1=globalThis,ui=class extends xu{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;let e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){let i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Vz(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return nr}};ui._$litElement$=!0,ui.finalized=!0,A1.litElementHydrateSupport?.({LitElement:ui});var zse=A1.litElementPolyfillSupport;zse?.({LitElement:ui});(A1.litElementVersions??(A1.litElementVersions=[])).push("4.2.1");var jz=ze`
  .breadcrumb {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
  }
`;var N6=new Set,Yp=new Map,$d,$6="ltr",H6="en",qz=typeof MutationObserver<"u"&&typeof document<"u"&&typeof document.documentElement<"u";if(qz){let t=new MutationObserver(Gz);$6=document.documentElement.dir||"ltr",H6=document.documentElement.lang||navigator.language,t.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]})}function T1(...t){t.map(e=>{let i=e.$code.toLowerCase();Yp.has(i)?Yp.set(i,Object.assign(Object.assign({},Yp.get(i)),e)):Yp.set(i,e),$d||($d=e)}),Gz()}function Gz(){qz&&($6=document.documentElement.dir||"ltr",H6=document.documentElement.lang||navigator.language),[...N6.keys()].map(t=>{typeof t.requestUpdate=="function"&&t.requestUpdate()})}var Ww=class{constructor(e){this.host=e,this.host.addController(this)}hostConnected(){N6.add(this.host)}hostDisconnected(){N6.delete(this.host)}dir(){return`${this.host.dir||$6}`.toLowerCase()}lang(){return`${this.host.lang||H6}`.toLowerCase()}getTranslationData(e){var i,r;let n=new Intl.Locale(e.replace(/_/g,"-")),s=n?.language.toLowerCase(),o=(r=(i=n?.region)===null||i===void 0?void 0:i.toLowerCase())!==null&&r!==void 0?r:"",a=Yp.get(`${s}-${o}`),l=Yp.get(s);return{locale:n,language:s,region:o,primary:a,secondary:l}}exists(e,i){var r;let{primary:n,secondary:s}=this.getTranslationData((r=i.lang)!==null&&r!==void 0?r:this.lang());return i=Object.assign({includeFallback:!1},i),!!(n&&n[e]||s&&s[e]||i.includeFallback&&$d&&$d[e])}term(e,...i){let{primary:r,secondary:n}=this.getTranslationData(this.lang()),s;if(r&&r[e])s=r[e];else if(n&&n[e])s=n[e];else if($d&&$d[e])s=$d[e];else return console.error(`No translation found for: ${String(e)}`),String(e);return typeof s=="function"?s(...i):s}date(e,i){return e=new Date(e),new Intl.DateTimeFormat(this.lang(),i).format(e)}number(e,i){return e=Number(e),isNaN(e)?"":new Intl.NumberFormat(this.lang(),i).format(e)}relativeTime(e,i,r){return new Intl.RelativeTimeFormat(this.lang(),r).format(e,i)}};var Xz={$code:"en",$name:"English",$dir:"ltr",carousel:"Carousel",clearEntry:"Clear entry",close:"Close",copied:"Copied",copy:"Copy",currentValue:"Current value",error:"Error",goToSlide:(t,e)=>`Go to slide ${t} of ${e}`,hidePassword:"Hide password",loading:"Loading",nextSlide:"Next slide",numOptionsSelected:t=>t===0?"No options selected":t===1?"1 option selected":`${t} options selected`,previousSlide:"Previous slide",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",slideNum:t=>`Slide ${t}`,toggleColorFormat:"Toggle color format"};T1(Xz);var Yz=Xz;var ei=class extends Ww{};T1(Yz);var U6="";function R1(t){U6=t}function W6(t=""){if(!U6){let e=[...document.getElementsByTagName("script")],i=e.find(r=>r.hasAttribute("data-shoelace"));if(i)R1(i.getAttribute("data-shoelace"));else{let r=e.find(s=>/shoelace(\.min)?\.js($|\?)/.test(s.src)||/shoelace-autoloader(\.min)?\.js($|\?)/.test(s.src)),n="";r&&(n=r.getAttribute("src")),R1(n.split("/").slice(0,-1).join("/"))}}return U6.replace(/\/$/,"")+(t?`/${t.replace(/^\//,"")}`:"")}var Ise={name:"default",resolver:t=>W6(`assets/icons/${t}.svg`)},Kz=Ise;var Jz={caret:`
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  `,check:`
    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor">
          <g transform="translate(3.428571, 3.428571)">
            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>
            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"chevron-down":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,"chevron-left":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
    </svg>
  `,"chevron-right":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,copy:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2Zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6ZM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2Z"/>
    </svg>
  `,eye:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
    </svg>
  `,"eye-slash":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
    </svg>
  `,eyedropper:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">
      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>
    </svg>
  `,"grip-vertical":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">
      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>
    </svg>
  `,indeterminate:`
    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(2.285714, 6.857143)">
            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"person-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
    </svg>
  `,"play-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
    </svg>
  `,"pause-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">
      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
    </svg>
  `,radio:`
    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g fill="currentColor">
          <circle cx="8" cy="8" r="3.42857143"></circle>
        </g>
      </g>
    </svg>
  `,"star-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  `,"x-lg":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
    </svg>
  `,"x-circle-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>
    </svg>
  `},Bse={name:"system",resolver:t=>t in Jz?`data:image/svg+xml,${encodeURIComponent(Jz[t])}`:""},Zz=Bse;var Nse=[Kz,Zz],V6=[];function Qz(t){V6.push(t)}function eI(t){V6=V6.filter(e=>e!==t)}function j6(t){return Nse.find(e=>e.name===t)}var tI=ze`
  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    box-sizing: content-box !important;
  }

  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`;var nI=Object.defineProperty,$se=Object.defineProperties,Hse=Object.getOwnPropertyDescriptor,Use=Object.getOwnPropertyDescriptors,iI=Object.getOwnPropertySymbols,Wse=Object.prototype.hasOwnProperty,Vse=Object.prototype.propertyIsEnumerable,q6=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),G6=t=>{throw TypeError(t)},rI=(t,e,i)=>e in t?nI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,_s=(t,e)=>{for(var i in e||(e={}))Wse.call(e,i)&&rI(t,i,e[i]);if(iI)for(var i of iI(e))Vse.call(e,i)&&rI(t,i,e[i]);return t},_u=(t,e)=>$se(t,Use(e)),F=(t,e,i,r)=>{for(var n=r>1?void 0:r?Hse(e,i):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(r?o(e,i,n):o(n))||n);return r&&n&&nI(e,i,n),n},sI=(t,e,i)=>e.has(t)||G6("Cannot "+i),oI=(t,e,i)=>(sI(t,e,"read from private field"),i?i.call(t):e.get(t)),aI=(t,e,i)=>e.has(t)?G6("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),lI=(t,e,i,r)=>(sI(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),jse=function(t,e){this[0]=t,this[1]=e},uI=t=>{var e=t[q6("asyncIterator")],i=!1,r,n={};return e==null?(e=t[q6("iterator")](),r=s=>n[s]=o=>e[s](o)):(e=e.call(t),r=s=>n[s]=o=>{if(i){if(i=!1,s==="throw")throw o;return o}return i=!0,{done:!1,value:new jse(new Promise(a=>{var l=e[s](o);l instanceof Object||G6("Object expected"),a(l)}),1)}}),n[q6("iterator")]=()=>n,r("next"),"throw"in e?r("throw"):n.throw=s=>{throw s},"return"in e&&r("return"),n};function je(t,e){let i=_s({waitUntilFirstUpdate:!1},e);return(r,n)=>{let{update:s}=r,o=Array.isArray(t)?t:[t];r.update=function(a){o.forEach(l=>{let u=l;if(a.has(u)){let c=a.get(u),h=this[u];c!==h&&(!i.waitUntilFirstUpdate||this.hasUpdated)&&this[n](c,h)}}),s.call(this,a)}}}var tt=ze`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`;var xn=t=>(e,i)=>{i!==void 0?i.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)};var qse={attribute:!0,type:String,converter:Zc,reflect:!1,hasChanged:Pw},Gse=(t=qse,e,i)=>{let{kind:r,metadata:n}=i,s=globalThis.litPropertyMetadata.get(n);if(s===void 0&&globalThis.litPropertyMetadata.set(n,s=new Map),r==="setter"&&((t=Object.create(t)).wrapped=!0),s.set(i.name,t),r==="accessor"){let{name:o}=i;return{set(a){let l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,t)},init(a){return a!==void 0&&this.C(o,void 0,t,a),a}}}if(r==="setter"){let{name:o}=i;return function(a){let l=this[o];e.call(this,a),this.requestUpdate(o,l,t)}}throw Error("Unsupported decorator location: "+r)};function U(t){return(e,i)=>typeof i=="object"?Gse(t,e,i):((r,n,s)=>{let o=n.hasOwnProperty(s);return n.constructor.createProperty(s,r),o?Object.getOwnPropertyDescriptor(n,s):void 0})(t,e,i)}function Ie(t){return U({...t,state:!0,attribute:!1})}function Kp(t){return(e,i)=>{let r=typeof e=="function"?e:e[i];Object.assign(r,t)}}var Hd=(t,e,i)=>(i.configurable=!0,i.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(t,e,i),i);function Ne(t,e){return(i,r,n)=>{let s=o=>o.renderRoot?.querySelector(t)??null;if(e){let{get:o,set:a}=typeof r=="object"?i:n??(()=>{let l=Symbol();return{get(){return this[l]},set(u){this[l]=u}}})();return Hd(i,r,{get(){let l=o.call(this);return l===void 0&&(l=s(this),(l!==null||this.hasUpdated)&&a.call(this,l)),l}})}return Hd(i,r,{get(){return s(this)}})}}var Vw,Xe=class extends ui{constructor(){super(),aI(this,Vw,!1),this.initialReflectedProperties=new Map,Object.entries(this.constructor.dependencies).forEach(([t,e])=>{this.constructor.define(t,e)})}emit(t,e){let i=new CustomEvent(t,_s({bubbles:!0,cancelable:!1,composed:!0,detail:{}},e));return this.dispatchEvent(i),i}static define(t,e=this,i={}){let r=customElements.get(t);if(!r){try{customElements.define(t,e,i)}catch{customElements.define(t,class extends e{},i)}return}let n=" (unknown version)",s=n;"version"in e&&e.version&&(n=" v"+e.version),"version"in r&&r.version&&(s=" v"+r.version),!(n&&s&&n===s)&&console.warn(`Attempted to register <${t}>${n}, but <${t}>${s} has already been registered.`)}attributeChangedCallback(t,e,i){oI(this,Vw)||(this.constructor.elementProperties.forEach((r,n)=>{r.reflect&&this[n]!=null&&this.initialReflectedProperties.set(n,this[n])}),lI(this,Vw,!0)),super.attributeChangedCallback(t,e,i)}willUpdate(t){super.willUpdate(t),this.initialReflectedProperties.forEach((e,i)=>{t.has(i)&&this[i]==null&&(this[i]=e)})}};Vw=new WeakMap;Xe.version="2.20.1";Xe.dependencies={};F([U()],Xe.prototype,"dir",2);F([U()],Xe.prototype,"lang",2);var{I:Xse}=Wz;var hI=(t,e)=>e===void 0?t?._$litType$!==void 0:t?._$litType$===e;var jw=t=>t.strings===void 0,cI=()=>document.createComment(""),Jp=(t,e,i)=>{let r=t._$AA.parentNode,n=e===void 0?t._$AB:e._$AA;if(i===void 0){let s=r.insertBefore(cI(),n),o=r.insertBefore(cI(),n);i=new Xse(s,o,t,t.options)}else{let s=i._$AB.nextSibling,o=i._$AM,a=o!==t;if(a){let l;i._$AQ?.(t),i._$AM=t,i._$AP!==void 0&&(l=t._$AU)!==o._$AU&&i._$AP(l)}if(s!==n||a){let l=i._$AA;for(;l!==s;){let u=l.nextSibling;r.insertBefore(l,n),l=u}}}return i},Qc=(t,e,i=t)=>(t._$AI(e,i),t),Yse={},qw=(t,e=Yse)=>t._$AH=e,dI=t=>t._$AH,Gw=t=>{t._$AR(),t._$AA.remove()};var D1=Symbol(),Xw=Symbol(),X6,Y6=new Map,Bt=class extends Xe{constructor(){super(...arguments),this.initialRender=!1,this.svg=null,this.label="",this.library="default"}async resolveIcon(t,e){var i;let r;if(e?.spriteSheet)return this.svg=X`<svg part="svg">
        <use part="use" href="${t}"></use>
      </svg>`,this.svg;try{if(r=await fetch(t,{mode:"cors"}),!r.ok)return r.status===410?D1:Xw}catch{return Xw}try{let n=document.createElement("div");n.innerHTML=await r.text();let s=n.firstElementChild;if(((i=s?.tagName)==null?void 0:i.toLowerCase())!=="svg")return D1;X6||(X6=new DOMParser);let a=X6.parseFromString(s.outerHTML,"text/html").body.querySelector("svg");return a?(a.part.add("svg"),document.adoptNode(a)):D1}catch{return D1}}connectedCallback(){super.connectedCallback(),Qz(this)}firstUpdated(){this.initialRender=!0,this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),eI(this)}getIconSource(){let t=j6(this.library);return this.name&&t?{url:t.resolver(this.name),fromLibrary:!0}:{url:this.src,fromLibrary:!1}}handleLabelChange(){typeof this.label=="string"&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var t;let{url:e,fromLibrary:i}=this.getIconSource(),r=i?j6(this.library):void 0;if(!e){this.svg=null;return}let n=Y6.get(e);if(n||(n=this.resolveIcon(e,r),Y6.set(e,n)),!this.initialRender)return;let s=await n;if(s===Xw&&Y6.delete(e),e===this.getIconSource().url){if(hI(s)){if(this.svg=s,r){await this.updateComplete;let o=this.shadowRoot.querySelector("[part='svg']");typeof r.mutator=="function"&&o&&r.mutator(o)}return}switch(s){case Xw:case D1:this.svg=null,this.emit("sl-error");break;default:this.svg=s.cloneNode(!0),(t=r?.mutator)==null||t.call(r,this.svg),this.emit("sl-load")}}}render(){return this.svg}};Bt.styles=[tt,tI];F([Ie()],Bt.prototype,"svg",2);F([U({reflect:!0})],Bt.prototype,"name",2);F([U()],Bt.prototype,"src",2);F([U()],Bt.prototype,"label",2);F([U({reflect:!0})],Bt.prototype,"library",2);F([je("label")],Bt.prototype,"handleLabelChange",1);F([je(["name","src","library"])],Bt.prototype,"setIcon",1);var Ud=class extends Xe{constructor(){super(...arguments),this.localize=new ei(this),this.separatorDir=this.localize.dir(),this.label=""}getSeparator(){let e=this.separatorSlot.assignedElements({flatten:!0})[0].cloneNode(!0);return[e,...e.querySelectorAll("[id]")].forEach(i=>i.removeAttribute("id")),e.setAttribute("data-default",""),e.slot="separator",e}handleSlotChange(){let t=[...this.defaultSlot.assignedElements({flatten:!0})].filter(e=>e.tagName.toLowerCase()==="sl-breadcrumb-item");t.forEach((e,i)=>{let r=e.querySelector('[slot="separator"]');r===null?e.append(this.getSeparator()):r.hasAttribute("data-default")&&r.replaceWith(this.getSeparator()),i===t.length-1?e.setAttribute("aria-current","page"):e.removeAttribute("aria-current")})}render(){return this.separatorDir!==this.localize.dir()&&(this.separatorDir=this.localize.dir(),this.updateComplete.then(()=>this.handleSlotChange())),X`
      <nav part="base" class="breadcrumb" aria-label=${this.label}>
        <slot @slotchange=${this.handleSlotChange}></slot>
      </nav>

      <span hidden aria-hidden="true">
        <slot name="separator">
          <sl-icon name=${this.localize.dir()==="rtl"?"chevron-left":"chevron-right"} library="system"></sl-icon>
        </slot>
      </span>
    `}};Ud.styles=[tt,jz];Ud.dependencies={"sl-icon":Bt};F([Ne("slot")],Ud.prototype,"defaultSlot",2);F([Ne('slot[name="separator"]')],Ud.prototype,"separatorSlot",2);F([U()],Ud.prototype,"label",2);Ud.define("sl-breadcrumb");var fI=ze`
  :host {
    display: inline-flex;
  }

  .breadcrumb-item {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    color: var(--sl-color-neutral-600);
    line-height: var(--sl-line-height-normal);
    white-space: nowrap;
  }

  .breadcrumb-item__label {
    display: inline-block;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: inherit;
    text-decoration: none;
    color: inherit;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    padding: 0;
    margin: 0;
    cursor: pointer;
    transition: var(--sl-transition-fast) --color;
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label {
    color: var(--sl-color-primary-600);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:hover {
    color: var(--sl-color-primary-500);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:active {
    color: var(--sl-color-primary-600);
  }

  .breadcrumb-item__label:focus {
    outline: none;
  }

  .breadcrumb-item__label:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .breadcrumb-item__prefix,
  .breadcrumb-item__suffix {
    display: none;
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .breadcrumb-item--has-prefix .breadcrumb-item__prefix {
    display: inline-flex;
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .breadcrumb-item--has-suffix .breadcrumb-item__suffix {
    display: inline-flex;
    margin-inline-start: var(--sl-spacing-x-small);
  }

  :host(:last-of-type) .breadcrumb-item__separator {
    display: none;
  }

  .breadcrumb-item__separator {
    display: inline-flex;
    align-items: center;
    margin: 0 var(--sl-spacing-x-small);
    user-select: none;
    -webkit-user-select: none;
  }
`;var Bi=class{constructor(t,...e){this.slotNames=[],this.handleSlotChange=i=>{let r=i.target;(this.slotNames.includes("[default]")&&!r.name||r.name&&this.slotNames.includes(r.name))&&this.host.requestUpdate()},(this.host=t).addController(this),this.slotNames=e}hasDefaultSlot(){return[...this.host.childNodes].some(t=>{if(t.nodeType===t.TEXT_NODE&&t.textContent.trim()!=="")return!0;if(t.nodeType===t.ELEMENT_NODE){let e=t;if(e.tagName.toLowerCase()==="sl-visually-hidden")return!1;if(!e.hasAttribute("slot"))return!0}return!1})}hasNamedSlot(t){return this.host.querySelector(`:scope > [slot="${t}"]`)!==null}test(t){return t==="[default]"?this.hasDefaultSlot():this.hasNamedSlot(t)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}};var Jr={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Yn=t=>(...e)=>({_$litDirective$:t,values:e}),Cs=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};var et=Yn(class extends Cs{constructor(t){if(super(t),t.type!==Jr.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((r=>r!==""))));for(let r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}let i=t.element.classList;for(let r of this.st)r in e||(i.remove(r),this.st.delete(r));for(let r in e){let n=!!e[r];n===this.st.has(r)||this.nt?.has(r)||(n?(i.add(r),this.st.add(r)):(i.remove(r),this.st.delete(r)))}return nr}});var Se=t=>t??lt;var Cu=class extends Xe{constructor(){super(...arguments),this.hasSlotController=new Bi(this,"prefix","suffix"),this.renderType="button",this.rel="noreferrer noopener"}setRenderType(){let t=this.defaultSlot.assignedElements({flatten:!0}).filter(e=>e.tagName.toLowerCase()==="sl-dropdown").length>0;if(this.href){this.renderType="link";return}if(t){this.renderType="dropdown";return}this.renderType="button"}hrefChanged(){this.setRenderType()}handleSlotChange(){this.setRenderType()}render(){return X`
      <div
        part="base"
        class=${et({"breadcrumb-item":!0,"breadcrumb-item--has-prefix":this.hasSlotController.test("prefix"),"breadcrumb-item--has-suffix":this.hasSlotController.test("suffix")})}
      >
        <span part="prefix" class="breadcrumb-item__prefix">
          <slot name="prefix"></slot>
        </span>

        ${this.renderType==="link"?X`
              <a
                part="label"
                class="breadcrumb-item__label breadcrumb-item__label--link"
                href="${this.href}"
                target="${Se(this.target?this.target:void 0)}"
                rel=${Se(this.target?this.rel:void 0)}
              >
                <slot @slotchange=${this.handleSlotChange}></slot>
              </a>
            `:""}
        ${this.renderType==="button"?X`
              <button part="label" type="button" class="breadcrumb-item__label breadcrumb-item__label--button">
                <slot @slotchange=${this.handleSlotChange}></slot>
              </button>
            `:""}
        ${this.renderType==="dropdown"?X`
              <div part="label" class="breadcrumb-item__label breadcrumb-item__label--drop-down">
                <slot @slotchange=${this.handleSlotChange}></slot>
              </div>
            `:""}

        <span part="suffix" class="breadcrumb-item__suffix">
          <slot name="suffix"></slot>
        </span>

        <span part="separator" class="breadcrumb-item__separator" aria-hidden="true">
          <slot name="separator"></slot>
        </span>
      </div>
    `}};Cu.styles=[tt,fI];F([Ne("slot:not([name])")],Cu.prototype,"defaultSlot",2);F([Ie()],Cu.prototype,"renderType",2);F([U()],Cu.prototype,"href",2);F([U()],Cu.prototype,"target",2);F([U()],Cu.prototype,"rel",2);F([je("href",{waitUntilFirstUpdate:!0})],Cu.prototype,"hrefChanged",1);Cu.define("sl-breadcrumb-item");var Kse=Object.defineProperty,Jse=(t,e,i)=>e in t?Kse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,K6=(t,e,i)=>(Jse(t,typeof e!="symbol"?e+"":e,i),i),Zse=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},J6=(t,e)=>{if(Object(e)!==e)throw TypeError('Cannot use the "in" operator on this value');return t.has(e)},Yw=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},pI=(t,e,i)=>(Zse(t,e,"access private method"),i);function mI(t,e){return Object.is(t,e)}var sr=null,M1=!1,Kw=1,Jw=Symbol("SIGNAL");function Zp(t){let e=sr;return sr=t,e}function Qse(){return sr}function eoe(){return M1}var ik={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Zw(t){if(M1)throw new Error(typeof ngDevMode<"u"&&ngDevMode?"Assertion error: signal read during notification phase":"");if(sr===null)return;sr.consumerOnSignalRead(t);let e=sr.nextProducerIndex++;if(Qp(sr),e<sr.producerNode.length&&sr.producerNode[e]!==t&&ek(sr)){let i=sr.producerNode[e];Qw(i,sr.producerIndexOfThis[e])}sr.producerNode[e]!==t&&(sr.producerNode[e]=t,sr.producerIndexOfThis[e]=ek(sr)?vI(t,sr,e):0),sr.producerLastReadVersion[e]=t.version}function toe(){Kw++}function gI(t){if(!(!t.dirty&&t.lastCleanEpoch===Kw)){if(!t.producerMustRecompute(t)&&!ooe(t)){t.dirty=!1,t.lastCleanEpoch=Kw;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Kw}}function bI(t){if(t.liveConsumerNode===void 0)return;let e=M1;M1=!0;try{for(let i of t.liveConsumerNode)i.dirty||roe(i)}finally{M1=e}}function ioe(){return sr?.consumerAllowSignalWrites!==!1}function roe(t){var e;t.dirty=!0,bI(t),(e=t.consumerMarkedDirty)==null||e.call(t.wrapper??t)}function noe(t){return t&&(t.nextProducerIndex=0),Zp(t)}function soe(t,e){if(Zp(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ek(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)Qw(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ooe(t){Qp(t);for(let e=0;e<t.producerNode.length;e++){let i=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==i.version||(gI(i),r!==i.version))return!0}return!1}function vI(t,e,i){var r;if(rk(t),Qp(t),t.liveConsumerNode.length===0){(r=t.watched)==null||r.call(t.wrapper);for(let n=0;n<t.producerNode.length;n++)t.producerIndexOfThis[n]=vI(t.producerNode[n],t,n)}return t.liveConsumerIndexOfThis.push(i),t.liveConsumerNode.push(e)-1}function Qw(t,e){var i;if(rk(t),Qp(t),typeof ngDevMode<"u"&&ngDevMode&&e>=t.liveConsumerNode.length)throw new Error(`Assertion error: active consumer index ${e} is out of bounds of ${t.liveConsumerNode.length} consumers)`);if(t.liveConsumerNode.length===1){(i=t.unwatched)==null||i.call(t.wrapper);for(let n=0;n<t.producerNode.length;n++)Qw(t.producerNode[n],t.producerIndexOfThis[n])}let r=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[r],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[r],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let n=t.liveConsumerIndexOfThis[e],s=t.liveConsumerNode[e];Qp(s),s.producerIndexOfThis[n]=e}}function ek(t){var e;return t.consumerIsAlwaysLive||(((e=t?.liveConsumerNode)==null?void 0:e.length)??0)>0}function Qp(t){t.producerNode??(t.producerNode=[]),t.producerIndexOfThis??(t.producerIndexOfThis=[]),t.producerLastReadVersion??(t.producerLastReadVersion=[])}function rk(t){t.liveConsumerNode??(t.liveConsumerNode=[]),t.liveConsumerIndexOfThis??(t.liveConsumerIndexOfThis=[])}function yI(t){if(gI(t),Zw(t),t.value===tk)throw t.error;return t.value}function aoe(t){let e=Object.create(loe);e.computation=t;let i=()=>yI(e);return i[Jw]=e,i}var Z6=Symbol("UNSET"),Q6=Symbol("COMPUTING"),tk=Symbol("ERRORED"),loe={...ik,value:Z6,dirty:!0,error:null,equal:mI,producerMustRecompute(t){return t.value===Z6||t.value===Q6},producerRecomputeValue(t){if(t.value===Q6)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Q6;let i=noe(t),r,n=!1;try{r=t.computation.call(t.wrapper),n=e!==Z6&&e!==tk&&t.equal.call(t.wrapper,e,r)}catch(s){r=tk,t.error=s}finally{soe(t,i)}if(n){t.value=e;return}t.value=r,t.version++}};function uoe(){throw new Error}var coe=uoe;function hoe(){coe()}function doe(t){let e=Object.create(moe);e.value=t;let i=()=>(Zw(e),e.value);return i[Jw]=e,i}function foe(){return Zw(this),this.value}function poe(t,e){ioe()||hoe(),t.equal.call(t.wrapper,t.value,e)||(t.value=e,goe(t))}var moe={...ik,equal:mI,value:void 0};function goe(t){t.version++,toe(),bI(t)}var Zr=Symbol("node"),Dr;(t=>{var e,i,r,n,s,o;class a{constructor(c,h={}){Yw(this,i),K6(this,e);let p=doe(c)[Jw];if(this[Zr]=p,p.wrapper=this,h){let f=h.equals;f&&(p.equal=f),p.watched=h[t.subtle.watched],p.unwatched=h[t.subtle.unwatched]}}get(){if(!(0,t.isState)(this))throw new TypeError("Wrong receiver type for Signal.State.prototype.get");return foe.call(this[Zr])}set(c){if(!(0,t.isState)(this))throw new TypeError("Wrong receiver type for Signal.State.prototype.set");if(eoe())throw new Error("Writes to signals not permitted during Watcher callback");let h=this[Zr];poe(h,c)}}e=Zr,i=new WeakSet,r=function(){},t.isState=u=>typeof u=="object"&&J6(i,u),t.State=a;class l{constructor(c,h){Yw(this,s),K6(this,n);let p=aoe(c)[Jw];if(p.consumerAllowSignalWrites=!0,this[Zr]=p,p.wrapper=this,h){let f=h.equals;f&&(p.equal=f),p.watched=h[t.subtle.watched],p.unwatched=h[t.subtle.unwatched]}}get(){if(!(0,t.isComputed)(this))throw new TypeError("Wrong receiver type for Signal.Computed.prototype.get");return yI(this[Zr])}}n=Zr,s=new WeakSet,o=function(){},t.isComputed=u=>typeof u=="object"&&J6(s,u),t.Computed=l,(u=>{var c,h,d,p,f;function m(w){let C,E=null;try{E=Zp(null),C=w()}finally{Zp(E)}return C}u.untrack=m;function g(w){var C;if(!(0,t.isComputed)(w)&&!(0,t.isWatcher)(w))throw new TypeError("Called introspectSources without a Computed or Watcher argument");return((C=w[Zr].producerNode)==null?void 0:C.map(E=>E.wrapper))??[]}u.introspectSources=g;function b(w){var C;if(!(0,t.isComputed)(w)&&!(0,t.isState)(w))throw new TypeError("Called introspectSinks without a Signal argument");return((C=w[Zr].liveConsumerNode)==null?void 0:C.map(E=>E.wrapper))??[]}u.introspectSinks=b;function v(w){if(!(0,t.isComputed)(w)&&!(0,t.isState)(w))throw new TypeError("Called hasSinks without a Signal argument");let C=w[Zr].liveConsumerNode;return C?C.length>0:!1}u.hasSinks=v;function y(w){if(!(0,t.isComputed)(w)&&!(0,t.isWatcher)(w))throw new TypeError("Called hasSources without a Computed or Watcher argument");let C=w[Zr].producerNode;return C?C.length>0:!1}u.hasSources=y;class x{constructor(C){Yw(this,h),Yw(this,p),K6(this,c);let E=Object.create(ik);E.wrapper=this,E.consumerMarkedDirty=C,E.consumerIsAlwaysLive=!0,E.consumerAllowSignalWrites=!1,E.producerNode=[],this[Zr]=E}watch(...C){if(!(0,t.isWatcher)(this))throw new TypeError("Called unwatch without Watcher receiver");pI(this,p,f).call(this,C);let E=this[Zr];E.dirty=!1;let A=Zp(E);for(let D of C)Zw(D[Zr]);Zp(A)}unwatch(...C){if(!(0,t.isWatcher)(this))throw new TypeError("Called unwatch without Watcher receiver");pI(this,p,f).call(this,C);let E=this[Zr];Qp(E);for(let A=E.producerNode.length-1;A>=0;A--)if(C.includes(E.producerNode[A].wrapper)){Qw(E.producerNode[A],E.producerIndexOfThis[A]);let D=E.producerNode.length-1;if(E.producerNode[A]=E.producerNode[D],E.producerIndexOfThis[A]=E.producerIndexOfThis[D],E.producerNode.length--,E.producerIndexOfThis.length--,E.nextProducerIndex--,A<E.producerNode.length){let R=E.producerIndexOfThis[A],I=E.producerNode[A];rk(I),I.liveConsumerIndexOfThis[R]=A}}}getPending(){if(!(0,t.isWatcher)(this))throw new TypeError("Called getPending without Watcher receiver");return this[Zr].producerNode.filter(E=>E.dirty).map(E=>E.wrapper)}}c=Zr,h=new WeakSet,d=function(){},p=new WeakSet,f=function(w){for(let C of w)if(!(0,t.isComputed)(C)&&!(0,t.isState)(C))throw new TypeError("Called watch/unwatch without a Computed or State argument")},t.isWatcher=w=>J6(h,w),u.Watcher=x;function _(){var w;return(w=Qse())==null?void 0:w.wrapper}u.currentComputed=_,u.watched=Symbol("watched"),u.unwatched=Symbol("unwatched")})(t.subtle||(t.subtle={}))})(Dr||(Dr={}));var boe=Symbol("SignalWatcherBrand"),voe=new FinalizationRegistry((({watcher:t,signal:e})=>{t.unwatch(e)})),xI=new WeakMap;function Su(t){return t[boe]===!0?(console.warn("SignalWatcher should not be applied to the same class more than once."),t):class extends t{constructor(){super(...arguments),this._$St=new Dr.State(0),this._$Si=!1,this._$So=!0,this._$Sh=new Set}_$Sl(){if(this._$Su!==void 0)return;this._$Sv=new Dr.Computed((()=>{this._$St.get(),super.performUpdate()}));let e=this._$Su=new Dr.subtle.Watcher((function(){let i=xI.get(this);i!==void 0&&(i._$Si===!1&&i.requestUpdate(),this.watch())}));xI.set(e,this),voe.register(this,{watcher:e,signal:this._$Sv}),e.watch(this._$Sv)}_$Sp(){this._$Su!==void 0&&(this._$Su.unwatch(this._$Sv),this._$Sv=void 0,this._$Su=void 0)}performUpdate(){this.isUpdatePending&&(this._$Sl(),this._$Si=!0,this._$St.set(this._$St.get()+1),this._$Si=!1,this._$Sv.get())}update(e){try{this._$So?(this._$So=!1,super.update(e)):this._$Sh.forEach((i=>i.commit()))}finally{this.isUpdatePending=!1,this._$Sh.clear()}}requestUpdate(e,i,r){this._$So=!0,super.requestUpdate(e,i,r)}connectedCallback(){super.connectedCallback(),this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),queueMicrotask((()=>{this.isConnected===!1&&this._$Sp()}))}_(e){this._$Sh.add(e);let i=this._$So;this.requestUpdate(),this._$So=i}m(e){this._$Sh.delete(e)}}}var F1=(t,e)=>{let i=t._$AN;if(i===void 0)return!1;for(let r of i)r._$AO?.(e,!1),F1(r,e);return!0},e2=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while(i?.size===0)},wI=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),woe(e)}};function yoe(t){this._$AN!==void 0?(e2(this),this._$AM=t,wI(this)):this._$AM=t}function xoe(t,e=!1,i=0){let r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=i;s<r.length;s++)F1(r[s],!1),e2(r[s]);else r!=null&&(F1(r,!1),e2(r));else F1(this,t)}var woe=t=>{t.type==Jr.CHILD&&(t._$AP??(t._$AP=xoe),t._$AQ??(t._$AQ=yoe))},e0=class extends Cs{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),wI(this),this.isConnected=e._$AU}_$AO(e,i=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),i&&(F1(this,e),e2(this))}setValue(e){if(jw(this._$Ct))this._$Ct._$AI(e,this);else{let i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};var t2=class extends e0{_$Sl(){if(this._$Su!==void 0)return;this._$SW=new Dr.Computed((()=>{var i;return(i=this._$Sj)===null||i===void 0?void 0:i.get()}));let e=this._$Su=new Dr.subtle.Watcher((()=>{var i;(i=this._$SO)===null||i===void 0||i._(this),e.watch()}));e.watch(this._$SW)}_$Sp(){var e;this._$Su!==void 0&&(this._$Su.unwatch(this._$SW),this._$SW=void 0,this._$Su=void 0,(e=this._$SO)===null||e===void 0||e.m(this))}commit(){this.setValue(Dr.subtle.untrack((()=>{var e;return(e=this._$SW)===null||e===void 0?void 0:e.get()})))}render(e){return Dr.subtle.untrack((()=>e.get()))}update(e,[i]){var r,n;return(r=this._$SO)!==null&&r!==void 0||(this._$SO=(n=e.options)===null||n===void 0?void 0:n.host),i!==this._$Sj&&this._$Sj!==void 0&&this._$Sp(),this._$Sj=i,this._$Sl(),Dr.subtle.untrack((()=>this._$SW.get()))}disconnected(){this._$Sp()}reconnected(){this._$Sl()}},nk=Yn(t2);var sk=t=>(e,...i)=>t(e,...i.map((r=>r instanceof Dr.State||r instanceof Dr.Computed?nk(r):r))),_oe=sk(X),Coe=sk(Uw);var kIe=Dr.State,AIe=Dr.Computed;var ok={};br(ok,{JsonPatchError:()=>Ni,_areEquals:()=>P1,applyOperation:()=>Wd,applyPatch:()=>i0,applyReducer:()=>Toe,deepClone:()=>koe,getValueByPointer:()=>o2,validate:()=>CI,validator:()=>a2});var Soe=(function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},t(e,i)};return function(e,i){t(e,i);function r(){this.constructor=e}e.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}})(),Eoe=Object.prototype.hasOwnProperty;function r2(t,e){return Eoe.call(t,e)}function n2(t){if(Array.isArray(t)){for(var e=new Array(t.length),i=0;i<e.length;i++)e[i]=""+i;return e}if(Object.keys)return Object.keys(t);var r=[];for(var n in t)r2(t,n)&&r.push(n);return r}function Qr(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function s2(t){for(var e=0,i=t.length,r;e<i;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function gl(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function L1(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function i2(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,i=t.length;e<i;e++)if(i2(t[e]))return!0}else if(typeof t=="object"){for(var r=n2(t),n=r.length,s=0;s<n;s++)if(i2(t[r[s]]))return!0}}return!1}function _I(t,e){var i=[t];for(var r in e){var n=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof n<"u"&&i.push(r+": "+n)}return i.join(`
`)}var O1=(function(t){Soe(e,t);function e(i,r,n,s,o){var a=this.constructor,l=t.call(this,_I(i,{name:r,index:n,operation:s,tree:o}))||this;return l.name=r,l.index=n,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=_I(i,{name:r,index:n,operation:s,tree:o}),l}return e})(Error);var Ni=O1,koe=Qr,t0={add:function(t,e,i){return t[e]=this.value,{newDocument:i}},remove:function(t,e,i){var r=t[e];return delete t[e],{newDocument:i,removed:r}},replace:function(t,e,i){var r=t[e];return t[e]=this.value,{newDocument:i,removed:r}},move:function(t,e,i){var r=o2(i,this.path);r&&(r=Qr(r));var n=Wd(i,{op:"remove",path:this.from}).removed;return Wd(i,{op:"add",path:this.path,value:n}),{newDocument:i,removed:r}},copy:function(t,e,i){var r=o2(i,this.from);return Wd(i,{op:"add",path:this.path,value:Qr(r)}),{newDocument:i}},test:function(t,e,i){return{newDocument:i,test:P1(t[e],this.value)}},_get:function(t,e,i){return this.value=t[e],{newDocument:i}}},Aoe={add:function(t,e,i){return s2(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:i,index:e}},remove:function(t,e,i){var r=t.splice(e,1);return{newDocument:i,removed:r[0]}},replace:function(t,e,i){var r=t[e];return t[e]=this.value,{newDocument:i,removed:r}},move:t0.move,copy:t0.copy,test:t0.test,_get:t0._get};function o2(t,e){if(e=="")return t;var i={op:"_get",path:e};return Wd(t,i),i.value}function Wd(t,e,i,r,n,s){if(i===void 0&&(i=!1),r===void 0&&(r=!0),n===void 0&&(n=!0),s===void 0&&(s=0),i&&(typeof i=="function"?i(e,0,t,e.path):a2(e,0)),e.path===""){var o={newDocument:t};if(e.op==="add")return o.newDocument=e.value,o;if(e.op==="replace")return o.newDocument=e.value,o.removed=t,o;if(e.op==="move"||e.op==="copy")return o.newDocument=o2(t,e.from),e.op==="move"&&(o.removed=t),o;if(e.op==="test"){if(o.test=P1(t,e.value),o.test===!1)throw new Ni("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o.newDocument=t,o}else{if(e.op==="remove")return o.removed=t,o.newDocument=null,o;if(e.op==="_get")return e.value=t,o;if(i)throw new Ni("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return o}}else{r||(t=Qr(t));var a=e.path||"",l=a.split("/"),u=t,c=1,h=l.length,d=void 0,p=void 0,f=void 0;for(typeof i=="function"?f=i:f=a2;;){if(p=l[c],p&&p.indexOf("~")!=-1&&(p=L1(p)),n&&(p=="__proto__"||p=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(i&&d===void 0&&(u[p]===void 0?d=l.slice(0,c).join("/"):c==h-1&&(d=e.path),d!==void 0&&f(e,0,t,d)),c++,Array.isArray(u)){if(p==="-")p=u.length;else{if(i&&!s2(p))throw new Ni("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);s2(p)&&(p=~~p)}if(c>=h){if(i&&e.op==="add"&&p>u.length)throw new Ni("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);var o=Aoe[e.op].call(e,u,p,t);if(o.test===!1)throw new Ni("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o}}else if(c>=h){var o=t0[e.op].call(e,u,p,t);if(o.test===!1)throw new Ni("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o}if(u=u[p],i&&c<h&&(!u||typeof u!="object"))throw new Ni("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function i0(t,e,i,r,n){if(r===void 0&&(r=!0),n===void 0&&(n=!0),i&&!Array.isArray(e))throw new Ni("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=Qr(t));for(var s=new Array(e.length),o=0,a=e.length;o<a;o++)s[o]=Wd(t,e[o],i,!0,n,o),t=s[o].newDocument;return s.newDocument=t,s}function Toe(t,e,i){var r=Wd(t,e);if(r.test===!1)throw new Ni("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return r.newDocument}function a2(t,e,i,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new Ni("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,i);if(t0[t.op]){if(typeof t.path!="string")throw new Ni("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,i);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Ni('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,i);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Ni("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,i);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Ni("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,i);if((t.op==="add"||t.op==="replace"||t.op==="test")&&i2(t.value))throw new Ni("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,i);if(i){if(t.op=="add"){var n=t.path.split("/").length,s=r.split("/").length;if(n!==s+1&&n!==s)throw new Ni("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,i)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new Ni("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,i)}else if(t.op==="move"||t.op==="copy"){var o={op:"_get",path:t.from,value:void 0},a=CI([o],i);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ni("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,i)}}}else throw new Ni("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,i)}function CI(t,e,i){try{if(!Array.isArray(t))throw new Ni("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)i0(Qr(e),Qr(t),i||!0);else{i=i||a2;for(var r=0;r<t.length;r++)i(t[r],r,e,void 0)}}catch(n){if(n instanceof Ni)return n;throw n}}function P1(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var i=Array.isArray(t),r=Array.isArray(e),n,s,o;if(i&&r){if(s=t.length,s!=e.length)return!1;for(n=s;n--!==0;)if(!P1(t[n],e[n]))return!1;return!0}if(i!=r)return!1;var a=Object.keys(t);if(s=a.length,s!==Object.keys(e).length)return!1;for(n=s;n--!==0;)if(!e.hasOwnProperty(a[n]))return!1;for(n=s;n--!==0;)if(o=a[n],!P1(t[o],e[o]))return!1;return!0}return t!==t&&e!==e}var ck={};br(ck,{compare:()=>zoe,generate:()=>ak,observe:()=>Poe,unobserve:()=>Ooe});var lk=new WeakMap,Roe=(function(){function t(e){this.observers=new Map,this.obj=e}return t})(),Doe=(function(){function t(e,i){this.callback=e,this.observer=i}return t})();function Moe(t){return lk.get(t)}function Foe(t,e){return t.observers.get(e)}function Loe(t,e){t.observers.delete(e.callback)}function Ooe(t,e){e.unobserve()}function Poe(t,e){var i=[],r,n=Moe(t);if(!n)n=new Roe(t),lk.set(t,n);else{var s=Foe(n,e);r=s&&s.observer}if(r)return r;if(r={},n.value=Qr(t),e){r.callback=e,r.next=null;var o=function(){ak(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=i,r.object=t,r.unobserve=function(){ak(r),clearTimeout(r.next),Loe(n,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},n.observers.set(e,new Doe(e,r)),r}function ak(t,e){e===void 0&&(e=!1);var i=lk.get(t.object);uk(i.value,t.object,t.patches,"",e),t.patches.length&&i0(i.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function uk(t,e,i,r,n){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=n2(e),o=n2(t),a=!1,l=!1,u=o.length-1;u>=0;u--){var c=o[u],h=t[c];if(r2(e,c)&&!(e[c]===void 0&&h!==void 0&&Array.isArray(e)===!1)){var d=e[c];typeof h=="object"&&h!=null&&typeof d=="object"&&d!=null&&Array.isArray(h)===Array.isArray(d)?uk(h,d,i,r+"/"+gl(c),n):h!==d&&(a=!0,n&&i.push({op:"test",path:r+"/"+gl(c),value:Qr(h)}),i.push({op:"replace",path:r+"/"+gl(c),value:Qr(d)}))}else Array.isArray(t)===Array.isArray(e)?(n&&i.push({op:"test",path:r+"/"+gl(c),value:Qr(h)}),i.push({op:"remove",path:r+"/"+gl(c)}),l=!0):(n&&i.push({op:"test",path:r,value:t}),i.push({op:"replace",path:r,value:e}),a=!0)}if(!(!l&&s.length==o.length))for(var u=0;u<s.length;u++){var c=s[u];!r2(t,c)&&e[c]!==void 0&&i.push({op:"add",path:r+"/"+gl(c),value:Qr(e[c])})}}}function zoe(t,e,i){i===void 0&&(i=!1);var r=[];return uk(t,e,r,"",i),r}var BIe=Object.assign({},ok,ck,{JsonPatchError:O1,deepClone:Qr,escapePathComponent:gl,unescapePathComponent:L1});var KS=kz(EI());var vM={};br(vM,{Bounds:()=>Hi,CanvasHandler:()=>Fh,CanvasRenderer:()=>U0,DATE:()=>ts,DAY:()=>en,DAYOFYEAR:()=>wl,Dataflow:()=>hh,Debug:()=>dk,Error:()=>I1,EventStream:()=>y0,Gradient:()=>YA,GroupItem:()=>Ev,HOURS:()=>As,Handler:()=>vv,HybridHandler:()=>EC,HybridRenderer:()=>xv,Info:()=>hk,Item:()=>Sv,MILLISECONDS:()=>Lo,MINUTES:()=>Ts,MONTH:()=>tn,Marks:()=>ns,MultiPulse:()=>$2,None:()=>TI,Operator:()=>Xt,Parameters:()=>xb,Pulse:()=>zu,QUARTER:()=>es,RenderType:()=>ju,Renderer:()=>Af,ResourceLoader:()=>hC,SECONDS:()=>ro,SVGHandler:()=>wC,SVGRenderer:()=>yv,SVGStringRenderer:()=>SC,Scenegraph:()=>bv,TIME_UNITS:()=>k2,Transform:()=>ee,View:()=>jD,WEEK:()=>ar,Warn:()=>c2,YEAR:()=>Fr,accessor:()=>wn,accessorFields:()=>vr,accessorName:()=>gi,array:()=>ve,ascending:()=>Au,bandwidthNRD:()=>V2,bin:()=>L7,bootstrapCI:()=>O7,boundClip:()=>x9,boundContext:()=>kv,boundItem:()=>WA,boundMark:()=>oU,boundStroke:()=>Ll,changeset:()=>Bu,clampRange:()=>yk,codegenExpression:()=>W4,compare:()=>U1,constant:()=>wi,cumulativeLogNormal:()=>K2,cumulativeNormal:()=>Cb,cumulativeUniform:()=>e_,dayofyear:()=>o7,debounce:()=>W1,defaultLocale:()=>gb,definition:()=>H2,densityLogNormal:()=>Y2,densityNormal:()=>j2,densityUniform:()=>Q2,domChild:()=>_r,domClear:()=>No,domCreate:()=>kh,domFind:()=>f9,dotbin:()=>P7,error:()=>te,expressionFunction:()=>ji,extend:()=>Ze,extent:()=>Kn,extentIndex:()=>xk,falsy:()=>Eu,fastmap:()=>eh,field:()=>Mr,flush:()=>wk,font:()=>FC,fontFamily:()=>Rv,fontSize:()=>Ol,format:()=>L2,formatLocale:()=>mb,formats:()=>k7,hasOwnProperty:()=>_e,id:()=>r0,identity:()=>$i,inferType:()=>GB,inferTypes:()=>XB,ingest:()=>_t,inherits:()=>we,inrange:()=>th,interpolate:()=>ov,interpolateColors:()=>z0,interpolateRange:()=>K_,intersect:()=>y9,intersectBoxLine:()=>B0,intersectPath:()=>QA,intersectPoint:()=>e9,intersectRule:()=>YH,isArray:()=>K,isBoolean:()=>Ss,isDate:()=>ba,isFunction:()=>Je,isIterable:()=>_k,isNumber:()=>ct,isObject:()=>ge,isRegExp:()=>f2,isString:()=>fe,isTuple:()=>tf,key:()=>V1,lerp:()=>Ck,lineHeight:()=>Dh,loader:()=>b0,locale:()=>M2,logger:()=>B1,lruCache:()=>Sk,markup:()=>v9,merge:()=>Ek,mergeConfig:()=>vl,multiLineOffset:()=>MC,one:()=>bl,pad:()=>kk,panLinear:()=>fk,panLog:()=>pk,panPow:()=>mk,panSymlog:()=>gk,parse:()=>nX,parseExpression:()=>U4,parseSelector:()=>Mn,path:()=>of,pathCurves:()=>KA,pathEqual:()=>zU,pathParse:()=>kf,pathRectangle:()=>VH,pathRender:()=>N0,pathSymbols:()=>WH,pathTrail:()=>jH,peek:()=>ht,point:()=>Dv,projection:()=>ey,quantileLogNormal:()=>J2,quantileNormal:()=>Sb,quantileUniform:()=>t_,quantiles:()=>U2,quantizeInterpolator:()=>J_,quarter:()=>bk,quartiles:()=>W2,random:()=>is,randomInteger:()=>Kue,randomKDE:()=>G2,randomLCG:()=>Yue,randomLogNormal:()=>z7,randomMixture:()=>I7,randomNormal:()=>q2,randomUniform:()=>B7,read:()=>T7,regressionConstant:()=>i_,regressionExp:()=>$7,regressionLinear:()=>n_,regressionLoess:()=>W7,regressionLog:()=>N7,regressionPoly:()=>U7,regressionPow:()=>H7,regressionQuad:()=>s_,renderModule:()=>Mv,repeat:()=>z1,resetDefaultLocale:()=>WB,resetSVGClipId:()=>GH,resetSVGDefIds:()=>Ope,responseType:()=>A7,runtimeContext:()=>Y4,sampleCurve:()=>w0,sampleLogNormal:()=>X2,sampleNormal:()=>_b,sampleUniform:()=>Z2,scale:()=>St,sceneEqual:()=>w9,sceneFromJSON:()=>lU,scenePickVisit:()=>fC,sceneToJSON:()=>aU,sceneVisit:()=>Ea,sceneZOrder:()=>t9,scheme:()=>av,serializeXML:()=>SU,setHybridRendererOptions:()=>Dpe,setRandom:()=>Gue,span:()=>Tu,splitAccessPath:()=>To,stringValue:()=>pe,textMetrics:()=>Rs,timeBin:()=>g7,timeFloor:()=>c7,timeFormatLocale:()=>ef,timeInterval:()=>Lu,timeOffset:()=>d7,timeSequence:()=>p7,timeUnitSpecifier:()=>n7,timeUnits:()=>A2,toBoolean:()=>j1,toDate:()=>q1,toNumber:()=>Ki,toSet:()=>or,toString:()=>G1,transform:()=>F7,transforms:()=>Iu,truncate:()=>Ak,truthy:()=>yr,tupleid:()=>Ve,typeParsers:()=>C7,utcFloor:()=>h7,utcInterval:()=>Ou,utcOffset:()=>f7,utcSequence:()=>m7,utcdayofyear:()=>l7,utcquarter:()=>vk,utcweek:()=>u7,version:()=>K_e,visitArray:()=>Ru,week:()=>a7,writeConfig:()=>ku,zero:()=>ga,zoomLinear:()=>N1,zoomLog:()=>$1,zoomPow:()=>n0,zoomSymlog:()=>H1});function wn(t,e,i){return t.fields=e||[],t.fname=i,t}function gi(t){return t==null?null:t.fname}function vr(t){return t==null?null:t.fields}function AI(t){return t.length===1?Boe(t[0]):Noe(t)}var Boe=t=>function(e){return e[t]},Noe=t=>{let e=t.length;return function(i){for(let r=0;r<e;++r)i=i[t[r]];return i}};function te(t){throw Error(t)}function To(t){let e=[],i=t.length,r=null,n=0,s="",o,a,l;t=t+"";function u(){e.push(s+t.substring(o,a)),s="",o=a+1}for(o=a=0;a<i;++a)if(l=t[a],l==="\\")s+=t.substring(o,a++),o=a;else if(l===r)u(),r=null,n=-1;else{if(r)continue;o===n&&l==='"'||o===n&&l==="'"?(o=a+1,r=l):l==="."&&!n?a>o?u():o=a+1:l==="["?(a>o&&u(),n=o=a+1):l==="]"&&(n||te("Access path missing open bracket: "+t),n>0&&u(),n=0,o=a+1)}return n&&te("Access path missing closing bracket: "+t),r&&te("Access path missing closing quote: "+t),a>o&&(a++,u()),e}function Mr(t,e,i){let r=To(t);return t=r.length===1?r[0]:t,wn((i&&i.get||AI)(r),[t],e||t)}var r0=Mr("id"),$i=wn(t=>t,[],"identity"),ga=wn(()=>0,[],"zero"),bl=wn(()=>1,[],"one"),yr=wn(()=>!0,[],"true"),Eu=wn(()=>!1,[],"false");function $oe(t,e,i){let r=[e].concat([].slice.call(i));console[t].apply(console,r)}var TI=0,I1=1,c2=2,hk=3,dk=4;function B1(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$oe,r=t||TI;return{level(n){return arguments.length?(r=+n,this):r},error(){return r>=I1&&i(e||"error","ERROR",arguments),this},warn(){return r>=c2&&i(e||"warn","WARN",arguments),this},info(){return r>=hk&&i(e||"log","INFO",arguments),this},debug(){return r>=dk&&i(e||"log","DEBUG",arguments),this}}}var K=Array.isArray;function ge(t){return t===Object(t)}var kI=t=>t!=="__proto__";function vl(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce((r,n)=>{for(let s in n)if(s==="signals")r.signals=Hoe(r.signals,n.signals);else{let o=s==="legend"?{layout:1}:s==="style"?!0:null;ku(r,s,n[s],o)}return r},{})}function ku(t,e,i,r){if(!kI(e))return;let n,s;if(ge(i)&&!K(i)){s=ge(t[e])?t[e]:t[e]={};for(n in i)r&&(r===!0||r[n])?ku(s,n,i[n]):kI(n)&&(s[n]=i[n])}else t[e]=i}function Hoe(t,e){if(t==null)return e;let i={},r=[];function n(s){i[s.name]||(i[s.name]=1,r.push(s))}return e.forEach(n),t.forEach(n),r}function ht(t){return t[t.length-1]}function Ki(t){return t==null||t===""?null:+t}var RI=t=>e=>t*Math.exp(e),DI=t=>e=>Math.log(t*e),MI=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),FI=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,u2=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function h2(t,e,i,r){let n=i(t[0]),s=i(ht(t)),o=(s-n)*e;return[r(n-o),r(s-o)]}function fk(t,e){return h2(t,e,Ki,$i)}function pk(t,e){var i=Math.sign(t[0]);return h2(t,e,DI(i),RI(i))}function mk(t,e,i){return h2(t,e,u2(i),u2(1/i))}function gk(t,e,i){return h2(t,e,MI(i),FI(i))}function d2(t,e,i,r,n){let s=r(t[0]),o=r(ht(t)),a=e!=null?r(e):(s+o)/2;return[n(a+(s-a)*i),n(a+(o-a)*i)]}function N1(t,e,i){return d2(t,e,i,Ki,$i)}function $1(t,e,i){let r=Math.sign(t[0]);return d2(t,e,i,DI(r),RI(r))}function n0(t,e,i,r){return d2(t,e,i,u2(r),u2(1/r))}function H1(t,e,i,r){return d2(t,e,i,MI(r),FI(r))}function bk(t){return 1+~~(new Date(t).getMonth()/3)}function vk(t){return 1+~~(new Date(t).getUTCMonth()/3)}function ve(t){return t!=null?K(t)?t:[t]:[]}function yk(t,e,i){let r=t[0],n=t[1],s;return n<r&&(s=n,n=r,r=s),s=n-r,s>=i-e?[e,i]:[r=Math.min(Math.max(r,e),i-s),r+s]}function Je(t){return typeof t=="function"}var Uoe="descending";function U1(t,e,i){i=i||{},e=ve(e)||[];let r=[],n=[],s={},o=i.comparator||Woe;return ve(t).forEach((a,l)=>{a!=null&&(r.push(e[l]===Uoe?-1:1),n.push(a=Je(a)?a:Mr(a,null,i)),(vr(a)||[]).forEach(u=>s[u]=1))}),n.length===0?null:wn(o(n,r),Object.keys(s))}var Au=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),Woe=(t,e)=>t.length===1?Voe(t[0],e[0]):joe(t,e,t.length),Voe=(t,e)=>function(i,r){return Au(t(i),t(r))*e},joe=(t,e,i)=>(e.push(0),function(r,n){let s,o=0,a=-1;for(;o===0&&++a<i;)s=t[a],o=Au(s(r),s(n));return o*e[a]});function wi(t){return Je(t)?t:()=>t}function W1(t,e){let i;return r=>{i&&clearTimeout(i),i=setTimeout(()=>(e(r),i=null),t)}}function Ze(t){for(let e,i,r=1,n=arguments.length;r<n;++r){e=arguments[r];for(i in e)t[i]=e[i]}return t}function Kn(t,e){let i=0,r,n,s,o;if(t&&(r=t.length))if(e==null){for(n=t[i];i<r&&(n==null||n!==n);n=t[++i]);for(s=o=n;i<r;++i)n=t[i],n!=null&&(n<s&&(s=n),n>o&&(o=n))}else{for(n=e(t[i]);i<r&&(n==null||n!==n);n=e(t[++i]));for(s=o=n;i<r;++i)n=e(t[i]),n!=null&&(n<s&&(s=n),n>o&&(o=n))}return[s,o]}function xk(t,e){let i=t.length,r=-1,n,s,o,a,l;if(e==null){for(;++r<i;)if(s=t[r],s!=null&&s>=s){n=o=s;break}if(r===i)return[-1,-1];for(a=l=r;++r<i;)s=t[r],s!=null&&(n>s&&(n=s,a=r),o<s&&(o=s,l=r))}else{for(;++r<i;)if(s=e(t[r],r,t),s!=null&&s>=s){n=o=s;break}if(r===i)return[-1,-1];for(a=l=r;++r<i;)s=e(t[r],r,t),s!=null&&(n>s&&(n=s,a=r),o<s&&(o=s,l=r))}return[a,l]}function _e(t,e){return Object.hasOwn(t,e)}var l2={};function eh(t){let e={},i;function r(s){return _e(e,s)&&e[s]!==l2}let n={size:0,empty:0,object:e,has:r,get(s){return r(s)?e[s]:void 0},set(s,o){return r(s)||(++n.size,e[s]===l2&&--n.empty),e[s]=o,this},delete(s){return r(s)&&(--n.size,++n.empty,e[s]=l2),this},clear(){n.size=n.empty=0,n.object=e={}},test(s){return arguments.length?(i=s,n):i},clean(){let s={},o=0;for(let a in e){let l=e[a];l!==l2&&(!i||!i(l))&&(s[a]=l,++o)}n.size=o,n.empty=0,n.object=e=s}};return t&&Object.keys(t).forEach(s=>{n.set(s,t[s])}),n}function wk(t,e,i,r,n,s){if(!i&&i!==0)return s;let o=+i,a=t[0],l=ht(t),u;l<a&&(u=a,a=l,l=u),u=Math.abs(e-a);let c=Math.abs(l-e);return u<c&&u<=o?r:c<=o?n:s}function we(t,e,i){let r=t.prototype=Object.create(e.prototype);return Object.defineProperty(r,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),Ze(r,i)}function th(t,e,i,r){let n=e[0],s=e[e.length-1],o;return n>s&&(o=n,n=s,s=o),i=i===void 0||i,r=r===void 0||r,(i?n<=t:n<t)&&(r?t<=s:t<s)}function Ss(t){return typeof t=="boolean"}function ba(t){return Object.prototype.toString.call(t)==="[object Date]"}function _k(t){return t&&Je(t[Symbol.iterator])}function ct(t){return typeof t=="number"}function f2(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function fe(t){return typeof t=="string"}function V1(t,e,i){t&&(t=e?ve(t).map(a=>a.replace(/\\(.)/g,"$1")):ve(t));let r=t&&t.length,n=i&&i.get||AI,s=a=>n(e?[a]:To(a)),o;if(!r)o=function(){return""};else if(r===1){let a=s(t[0]);o=function(l){return""+a(l)}}else{let a=t.map(s);o=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return wn(o,t,"key")}function Ck(t,e){let i=t[0],r=ht(t),n=+e;return n?n===1?r:i+n*(r-i):i}var qoe=1e4;function Sk(t){t=+t||qoe;let e,i,r,n=()=>{e={},i={},r=0},s=(o,a)=>(++r>t&&(i=e,e={},r=1),e[o]=a);return n(),{clear:n,has:o=>_e(e,o)||_e(i,o),get:o=>_e(e,o)?e[o]:_e(i,o)?s(o,i[o]):void 0,set:(o,a)=>_e(e,o)?e[o]=a:s(o,a)}}function Ek(t,e,i,r){let n=e.length,s=i.length;if(!s)return e;if(!n)return i;let o=r||new e.constructor(n+s),a=0,l=0,u=0;for(;a<n&&l<s;++u)o[u]=t(e[a],i[l])>0?i[l++]:e[a++];for(;a<n;++a,++u)o[u]=e[a];for(;l<s;++l,++u)o[u]=i[l];return o}function z1(t,e){let i="";for(;--e>=0;)i+=t;return i}function kk(t,e,i,r){let n=i||" ",s=t+"",o=e-s.length;return o<=0?s:r==="left"?z1(n,o)+s:r==="center"?z1(n,~~(o/2))+s+z1(n,Math.ceil(o/2)):s+z1(n,o)}function Tu(t){return t&&ht(t)-t[0]||0}function pe(t){return K(t)?"["+t.map(pe)+"]":ge(t)||fe(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function j1(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}var Goe=t=>ct(t)||ba(t)?t:Date.parse(t);function q1(t,e){return e=e||Goe,t==null||t===""?null:e(t)}function G1(t){return t==null||t===""?null:t+""}function or(t){let e={},i=t.length;for(let r=0;r<i;++r)e[t[r]]=!0;return e}function Ak(t,e,i,r){let n=r??"\u2026",s=t+"",o=s.length,a=Math.max(0,e-n.length);return o<=e?s:i==="left"?n+s.slice(o-a):i==="center"?s.slice(0,Math.ceil(a/2))+n+s.slice(o-~~(a/2)):s.slice(0,a)+n}function Ru(t,e,i){if(t)if(e){let r=t.length;for(let n=0;n<r;++n){let s=e(t[n]);s&&i(s,n,t)}}else t.forEach(i)}var LI={},Tk={},Rk=34,X1=10,Dk=13;function PI(t){return new Function("d","return {"+t.map(function(e,i){return JSON.stringify(e)+": d["+i+'] || ""'}).join(",")+"}")}function Xoe(t,e){var i=PI(t);return function(r,n){return e(i(r),n,t)}}function OI(t){var e=Object.create(null),i=[];return t.forEach(function(r){for(var n in r)n in e||i.push(e[n]=n)}),i}function Es(t,e){var i=t+"",r=i.length;return r<e?new Array(e-r+1).join(0)+i:i}function Yoe(t){return t<0?"-"+Es(-t,6):t>9999?"+"+Es(t,6):Es(t,4)}function Koe(t){var e=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),n=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Yoe(t.getUTCFullYear(),4)+"-"+Es(t.getUTCMonth()+1,2)+"-"+Es(t.getUTCDate(),2)+(n?"T"+Es(e,2)+":"+Es(i,2)+":"+Es(r,2)+"."+Es(n,3)+"Z":r?"T"+Es(e,2)+":"+Es(i,2)+":"+Es(r,2)+"Z":i||e?"T"+Es(e,2)+":"+Es(i,2)+"Z":"")}function Mk(t){var e=new RegExp('["'+t+`
\r]`),i=t.charCodeAt(0);function r(h,d){var p,f,m=n(h,function(g,b){if(p)return p(g,b-1);f=g,p=d?Xoe(g,d):PI(g)});return m.columns=f||[],m}function n(h,d){var p=[],f=h.length,m=0,g=0,b,v=f<=0,y=!1;h.charCodeAt(f-1)===X1&&--f,h.charCodeAt(f-1)===Dk&&--f;function x(){if(v)return Tk;if(y)return y=!1,LI;var w,C=m,E;if(h.charCodeAt(C)===Rk){for(;m++<f&&h.charCodeAt(m)!==Rk||h.charCodeAt(++m)===Rk;);return(w=m)>=f?v=!0:(E=h.charCodeAt(m++))===X1?y=!0:E===Dk&&(y=!0,h.charCodeAt(m)===X1&&++m),h.slice(C+1,w-1).replace(/""/g,'"')}for(;m<f;){if((E=h.charCodeAt(w=m++))===X1)y=!0;else if(E===Dk)y=!0,h.charCodeAt(m)===X1&&++m;else if(E!==i)continue;return h.slice(C,w)}return v=!0,h.slice(C,f)}for(;(b=x())!==Tk;){for(var _=[];b!==LI&&b!==Tk;)_.push(b),b=x();d&&(_=d(_,g++))==null||p.push(_)}return p}function s(h,d){return h.map(function(p){return d.map(function(f){return c(p[f])}).join(t)})}function o(h,d){return d==null&&(d=OI(h)),[d.map(c).join(t)].concat(s(h,d)).join(`
`)}function a(h,d){return d==null&&(d=OI(h)),s(h,d).join(`
`)}function l(h){return h.map(u).join(`
`)}function u(h){return h.map(c).join(t)}function c(h){return h==null?"":h instanceof Date?Koe(h):e.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:n,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}function Fk(t){return t}function p2(t){if(t==null)return Fk;var e,i,r=t.scale[0],n=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,l){l||(e=i=0);var u=2,c=a.length,h=new Array(c);for(h[0]=(e+=a[0])*r+s,h[1]=(i+=a[1])*n+o;u<c;)h[u]=a[u],++u;return h}}function zI(t,e){for(var i,r=t.length,n=r-e;n<--r;)i=t[n],t[n++]=t[r],t[r]=i}function Lk(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(i){return II(t,i)})}:II(t,e)}function II(t,e){var i=e.id,r=e.bbox,n=e.properties==null?{}:e.properties,s=m2(t,e);return i==null&&r==null?{type:"Feature",properties:n,geometry:s}:r==null?{type:"Feature",id:i,properties:n,geometry:s}:{type:"Feature",id:i,bbox:r,properties:n,geometry:s}}function m2(t,e){var i=p2(t.transform),r=t.arcs;function n(c,h){h.length&&h.pop();for(var d=r[c<0?~c:c],p=0,f=d.length;p<f;++p)h.push(i(d[p],p));c<0&&zI(h,f)}function s(c){return i(c)}function o(c){for(var h=[],d=0,p=c.length;d<p;++d)n(c[d],h);return h.length<2&&h.push(h[0]),h}function a(c){for(var h=o(c);h.length<4;)h.push(h[0]);return h}function l(c){return c.map(a)}function u(c){var h=c.type,d;switch(h){case"GeometryCollection":return{type:h,geometries:c.geometries.map(u)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:h,coordinates:d}}return u(e)}function Ok(t,e){var i={},r={},n={},s=[],o=-1;e.forEach(function(u,c){var h=t.arcs[u<0?~u:u],d;h.length<3&&!h[1][0]&&!h[1][1]&&(d=e[++o],e[o]=u,e[c]=d)}),e.forEach(function(u){var c=a(u),h=c[0],d=c[1],p,f;if(p=n[h])if(delete n[p.end],p.push(u),p.end=d,f=r[d]){delete r[f.start];var m=f===p?p:p.concat(f);r[m.start=p.start]=n[m.end=f.end]=m}else r[p.start]=n[p.end]=p;else if(p=r[d])if(delete r[p.start],p.unshift(u),p.start=h,f=n[h]){delete n[f.end];var g=f===p?p:f.concat(p);r[g.start=f.start]=n[g.end=p.end]=g}else r[p.start]=n[p.end]=p;else p=[u],r[p.start=h]=n[p.end=d]=p});function a(u){var c=t.arcs[u<0?~u:u],h=c[0],d;return t.transform?(d=[0,0],c.forEach(function(p){d[0]+=p[0],d[1]+=p[1]})):d=c[c.length-1],u<0?[d,h]:[h,d]}function l(u,c){for(var h in u){var d=u[h];delete c[d.start],delete d.start,delete d.end,d.forEach(function(p){i[p<0?~p:p]=1}),s.push(d)}}return l(n,r),l(r,n),e.forEach(function(u){i[u<0?~u:u]||s.push([u])}),s}function Pk(t){return m2(t,BI.apply(this,arguments))}function BI(t,e,i){var r,n,s;if(arguments.length>1)r=Joe(t,e,i);else for(n=0,r=new Array(s=t.arcs.length);n<s;++n)r[n]=n;return{type:"MultiLineString",arcs:Ok(t,r)}}function Joe(t,e,i){var r=[],n=[],s;function o(h){var d=h<0?~h:h;(n[d]||(n[d]=[])).push({i:h,g:s})}function a(h){h.forEach(o)}function l(h){h.forEach(a)}function u(h){h.forEach(l)}function c(h){switch(s=h,h.type){case"GeometryCollection":h.geometries.forEach(c);break;case"LineString":a(h.arcs);break;case"MultiLineString":case"Polygon":l(h.arcs);break;case"MultiPolygon":u(h.arcs);break}}return c(e),n.forEach(i==null?function(h){r.push(h[0].i)}:function(h){i(h[0].g,h[h.length-1].g)&&r.push(h[0].i)}),r}function _n(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zk(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function to(t){let e,i,r;t.length!==2?(e=_n,i=(a,l)=>_n(t(a),l),r=(a,l)=>t(a)-l):(e=t===_n||t===zk?t:eae,i=t,r=t);function n(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{let h=u+c>>>1;i(a[h],l)<0?u=h+1:c=h}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{let h=u+c>>>1;i(a[h],l)<=0?u=h+1:c=h}while(u<c)}return u}function o(a,l,u=0,c=a.length){let h=n(a,l,u,c-1);return h>u&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:n,center:o,right:s}}function eae(){return 0}function Y1(t){return t===null?NaN:+t}function*NI(t,e){if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(yield i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&(yield r)}}var $I=to(_n),Vd=$I.right,Ik=$I.left,tae=to(Y1).center,va=Vd;function Bk(t,e){let i=0,r,n=0,s=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-n,n+=r/++i,s+=r*(o-n));else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&(a=+a)>=a&&(r=a-n,n+=r/++i,s+=r*(a-n))}if(i>1)return s/(i-1)}function g2(t,e){let i=Bk(t,e);return i&&Math.sqrt(i)}var _i=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let i=this._partials,r=0;for(let n=0;n<this._n&&n<32;n++){let s=i[n],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(i[r++]=a),e=o}return i[r]=e,this._n=r+1,this}valueOf(){let e=this._partials,i=this._n,r,n,s,o=0;if(i>0){for(o=e[--i];i>0&&(r=o,n=e[--i],o=r+n,s=n-(o-r),!s););i>0&&(s<0&&e[i-1]<0||s>0&&e[i-1]>0)&&(n=s*2,r=o+n,n==r-o&&(o=r))}return o}};var s0=class extends Map{constructor(e,i=WI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),e!=null)for(let[r,n]of e)this.set(r,n)}get(e){return super.get(Nk(this,e))}has(e){return super.has(Nk(this,e))}set(e,i){return super.set(HI(this,e),i)}delete(e){return super.delete(UI(this,e))}},Du=class extends Set{constructor(e,i=WI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),e!=null)for(let r of e)this.add(r)}has(e){return super.has(Nk(this,e))}add(e){return super.add(HI(this,e))}delete(e){return super.delete(UI(this,e))}};function Nk({_intern:t,_key:e},i){let r=e(i);return t.has(r)?t.get(r):i}function HI({_intern:t,_key:e},i){let r=e(i);return t.has(r)?t.get(r):(t.set(r,i),i)}function UI({_intern:t,_key:e},i){let r=e(i);return t.has(r)&&(i=t.get(r),t.delete(r)),i}function WI(t){return t!==null&&typeof t=="object"?t.valueOf():t}function b2(t,e){return Array.from(e,i=>t[i])}function VI(t=_n){if(t===_n)return $k;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,i)=>{let r=t(e,i);return r||r===0?r:(t(i,i)===0)-(t(e,e)===0)}}function $k(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var iae=Math.sqrt(50),rae=Math.sqrt(10),nae=Math.sqrt(2);function v2(t,e,i){let r=(e-t)/Math.max(0,i),n=Math.floor(Math.log10(r)),s=r/Math.pow(10,n),o=s>=iae?10:s>=rae?5:s>=nae?2:1,a,l,u;return n<0?(u=Math.pow(10,-n)/o,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,n)*o,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=i&&i<2?v2(t,e,i*2):[a,l,u]}function jd(t,e,i){if(e=+e,t=+t,i=+i,!(i>0))return[];if(t===e)return[t];let r=e<t,[n,s,o]=r?v2(e,t,i):v2(t,e,i);if(!(s>=n))return[];let a=s-n+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(n+u)/-o;else for(let u=0;u<a;++u)l[u]=(n+u)*o;return l}function K1(t,e,i){return e=+e,t=+t,i=+i,v2(t,e,i)[2]}function Jn(t,e,i){e=+e,t=+t,i=+i;let r=e<t,n=r?K1(e,t,i):K1(t,e,i);return(r?-1:1)*(n<0?1/-n:n)}function Ro(t,e){let i;if(e===void 0)for(let r of t)r!=null&&(i<r||i===void 0&&r>=r)&&(i=r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(i<n||i===void 0&&n>=n)&&(i=n)}return i}function qd(t,e){let i;if(e===void 0)for(let r of t)r!=null&&(i>r||i===void 0&&r>=r)&&(i=r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(i>n||i===void 0&&n>=n)&&(i=n)}return i}function y2(t,e,i=0,r=1/0,n){if(e=Math.floor(e),i=Math.floor(Math.max(0,i)),r=Math.floor(Math.min(t.length-1,r)),!(i<=e&&e<=r))return t;for(n=n===void 0?$k:VI(n);r>i;){if(r-i>600){let l=r-i+1,u=e-i+1,c=Math.log(l),h=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1),p=Math.max(i,Math.floor(e-u*h/l+d)),f=Math.min(r,Math.floor(e+(l-u)*h/l+d));y2(t,e,p,f,n)}let s=t[e],o=i,a=r;for(J1(t,i,e),n(t[r],s)>0&&J1(t,i,r);o<a;){for(J1(t,o,a),++o,--a;n(t[o],s)<0;)++o;for(;n(t[a],s)>0;)--a}n(t[i],s)===0?J1(t,i,a):(++a,J1(t,a,r)),a<=e&&(i=a+1),e<=a&&(r=a-1)}return t}function J1(t,e,i){let r=t[e];t[e]=t[i],t[i]=r}function Gd(t,e,i){if(t=Float64Array.from(NI(t,i)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return qd(t);if(e>=1)return Ro(t);var r,n=(r-1)*e,s=Math.floor(n),o=Ro(y2(t,s).subarray(0,s+1)),a=qd(t.subarray(s+1));return o+(a-o)*(n-s)}}function Z1(t,e,i=Y1){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+i(t[0],0,t);if(e>=1)return+i(t[r-1],r-1,t);var r,n=(r-1)*e,s=Math.floor(n),o=+i(t[s],s,t),a=+i(t[s+1],s+1,t);return o+(a-o)*(n-s)}}function x2(t,e){let i=0,r=0;if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(++i,r+=n);else{let n=-1;for(let s of t)(s=e(s,++n,t))!=null&&(s=+s)>=s&&(++i,r+=s)}if(i)return r/i}function o0(t,e){return Gd(t,.5,e)}function*oae(t){for(let e of t)yield*e}function a0(t){return Array.from(oae(t))}function Ji(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;for(var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);++r<n;)s[r]=t+r*i;return s}function l0(t,e){let i=0;if(e===void 0)for(let r of t)(r=+r)&&(i+=r);else{let r=-1;for(let n of t)(n=+e(n,++r,t))&&(i+=n)}return i}function w2(t,...e){t=new Du(t),e=e.map(aae);e:for(let i of t)for(let r of e)if(!r.has(i)){t.delete(i);continue e}return t}function aae(t){return t instanceof Du?t:new Du(t)}function _2(...t){let e=new Du;for(let i of t)for(let r of i)e.add(r);return e}function jI(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Xd(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function yl(t){return t=Xd(Math.abs(t)),t?t[1]:NaN}function qI(t,e){return function(i,r){for(var n=i.length,s=[],o=0,a=t[0],l=0;n>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(i.substring(n-=a,n+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function GI(t){return function(e){return e.replace(/[0-9]/g,function(i){return t[+i]})}}var lae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function io(t){if(!(e=lae.exec(t)))throw new Error("invalid format: "+t);var e;return new C2({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}io.prototype=C2.prototype;function C2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}C2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function XI(t){e:for(var e=t.length,i=1,r=-1,n;i<e;++i)switch(t[i]){case".":r=n=i;break;case"0":r===0&&(r=i),n=i;break;default:if(!+t[i])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(n+1):t}var Hk;function YI(t,e){var i=Xd(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(Hk=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Xd(t,Math.max(0,e+s-1))[0]}function Uk(t,e){var i=Xd(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var Wk={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:jI,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Uk(t*100,e),r:Uk,s:YI,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Vk(t){return t}var KI=Array.prototype.map,JI=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Q1(t){var e=t.grouping===void 0||t.thousands===void 0?Vk:qI(KI.call(t.grouping,Number),t.thousands+""),i=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",n=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Vk:GI(KI.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=io(h);var d=h.fill,p=h.align,f=h.sign,m=h.symbol,g=h.zero,b=h.width,v=h.comma,y=h.precision,x=h.trim,_=h.type;_==="n"?(v=!0,_="g"):Wk[_]||(y===void 0&&(y=12),x=!0,_="g"),(g||d==="0"&&p==="=")&&(g=!0,d="0",p="=");var w=m==="$"?i:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",C=m==="$"?r:/[%p]/.test(_)?o:"",E=Wk[_],A=/[defgprs%]/.test(_);y=y===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function D(R){var I=w,z=C,B,N,H;if(_==="c")z=E(R)+z,R="";else{R=+R;var T=R<0||1/R<0;if(R=isNaN(R)?l:E(Math.abs(R),y),x&&(R=XI(R)),T&&+R==0&&f!=="+"&&(T=!1),I=(T?f==="("?f:a:f==="-"||f==="("?"":f)+I,z=(_==="s"?JI[8+Hk/3]:"")+z+(T&&f==="("?")":""),A){for(B=-1,N=R.length;++B<N;)if(H=R.charCodeAt(B),48>H||H>57){z=(H===46?n+R.slice(B+1):R.slice(B))+z,R=R.slice(0,B);break}}}v&&!g&&(R=e(R,1/0));var L=I.length+R.length+z.length,P=L<b?new Array(b-L+1).join(d):"";switch(v&&g&&(R=e(P+R,P.length?b-z.length:1/0),P=""),p){case"<":R=I+R+z+P;break;case"=":R=I+P+R+z;break;case"^":R=P.slice(0,L=P.length>>1)+I+R+z+P.slice(L);break;default:R=P+I+R+z;break}return s(R)}return D.toString=function(){return h+""},D}function c(h,d){var p=u((h=io(h),h.type="f",h)),f=Math.max(-8,Math.min(8,Math.floor(yl(d)/3)))*3,m=Math.pow(10,-f),g=JI[8+f/3];return function(b){return p(m*b)+g}}return{format:u,formatPrefix:c}}var S2,ih,u0;jk({thousands:",",grouping:[3],currency:["$",""]});function jk(t){return S2=Q1(t),ih=S2.format,u0=S2.formatPrefix,S2}function eb(t){return Math.max(0,-yl(Math.abs(t)))}function tb(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yl(e)/3)))*3-yl(Math.abs(t)))}function ib(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,yl(e)-yl(t))+1}var qk=new Date,Gk=new Date;function ai(t,e,i,r){function n(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return n.floor=s=>(t(s=new Date(+s)),s),n.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),n.round=s=>{let o=n(s),a=n.ceil(s);return s-o<a-s?o:a},n.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),n.range=(s,o,a)=>{let l=[];if(s=n.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},n.filter=s=>ai(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),i&&(n.count=(s,o)=>(qk.setTime(+s),Gk.setTime(+o),t(qk),t(Gk),Math.floor(i(qk,Gk))),n.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?n.filter(r?o=>r(o)%s===0:o=>n.count(0,o)%s===0):n)),n}var ya=ai(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ya.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ai(e=>{e.setTime(Math.floor(e/t)*t)},(e,i)=>{e.setTime(+e+i*t)},(e,i)=>(i-e)/t):ya);var ZI=ya.range;var Cn=ai(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*1e3)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds()),QI=Cn.range;var rh=ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getMinutes()),uae=rh.range,nh=ai(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getUTCMinutes()),cae=nh.range;var sh=ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getHours()),hae=sh.range,oh=ai(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getUTCHours()),dae=oh.range;var ks=ai(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),fae=ks.range,Do=ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>t.getUTCDate()-1),pae=Do.range,E2=ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>Math.floor(t/864e5)),mae=E2.range;function Jd(t){return ai(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,i)=>{e.setDate(e.getDate()+i*7)},(e,i)=>(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}var Mo=Jd(0),c0=Jd(1),tB=Jd(2),iB=Jd(3),ah=Jd(4),rB=Jd(5),nB=Jd(6),sB=Mo.range,gae=c0.range,bae=tB.range,vae=iB.range,yae=ah.range,xae=rB.range,wae=nB.range;function Zd(t){return ai(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i*7)},(e,i)=>(i-e)/6048e5)}var Fo=Zd(0),h0=Zd(1),oB=Zd(2),aB=Zd(3),lh=Zd(4),lB=Zd(5),uB=Zd(6),cB=Fo.range,_ae=h0.range,Cae=oB.range,Sae=aB.range,Eae=lh.range,kae=lB.range,Aae=uB.range;var Mu=ai(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),Tae=Mu.range,Fu=ai(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),Rae=Fu.range;var Zn=ai(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Zn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ai(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,i)=>{e.setFullYear(e.getFullYear()+i*t)});var Dae=Zn.range,Qn=ai(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Qn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ai(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCFullYear(e.getUTCFullYear()+i*t)});var Mae=Qn.range;function dB(t,e,i,r,n,s){let o=[[Cn,1,1e3],[Cn,5,5*1e3],[Cn,15,15*1e3],[Cn,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[n,1,36e5],[n,3,3*36e5],[n,6,6*36e5],[n,12,12*36e5],[r,1,864e5],[r,2,2*864e5],[i,1,6048e5],[e,1,2592e6],[e,3,3*2592e6],[t,1,31536e6]];function a(u,c,h){let d=c<u;d&&([u,c]=[c,u]);let p=h&&typeof h.range=="function"?h:l(u,c,h),f=p?p.range(u,+c+1):[];return d?f.reverse():f}function l(u,c,h){let d=Math.abs(c-u)/h,p=to(([,,g])=>g).right(o,d);if(p===o.length)return t.every(Jn(u/31536e6,c/31536e6,h));if(p===0)return ya.every(Math.max(Jn(u,c,h),1));let[f,m]=o[d/o[p-1][2]<o[p][2]/d?p-1:p];return f.every(m)}return[a,l]}var[Xk,Yk]=dB(Qn,Fu,Fo,E2,oh,nh),[Kk,Jk]=dB(Zn,Mu,Mo,ks,sh,rh);var Fr="year",es="quarter",tn="month",ar="week",ts="date",en="day",wl="dayofyear",As="hours",Ts="minutes",ro="seconds",Lo="milliseconds",k2=[Fr,es,tn,ar,ts,en,wl,As,Ts,ro,Lo],Zk=k2.reduce((t,e,i)=>(t[e]=1+i,t),{});function A2(t){let e=ve(t).slice(),i={};return e.length||te("Missing time unit."),e.forEach(n=>{_e(Zk,n)?i[n]=1:te(`Invalid time unit: ${n}.`)}),(i[ar]||i[en]?1:0)+(i[es]||i[tn]||i[ts]?1:0)+(i[wl]?1:0)>1&&te(`Incompatible time units: ${t}`),e.sort((n,s)=>Zk[n]-Zk[s]),e}var Lae={[Fr]:"%Y ",[es]:"Q%q ",[tn]:"%b ",[ts]:"%d ",[ar]:"W%U ",[en]:"%a ",[wl]:"%j ",[As]:"%H:00",[Ts]:"00:%M",[ro]:":%S",[Lo]:".%L",[`${Fr}-${tn}`]:"%Y-%m ",[`${Fr}-${tn}-${ts}`]:"%Y-%m-%d ",[`${As}-${Ts}`]:"%H:%M"};function n7(t,e){let i=Ze({},Lae,e),r=A2(t),n=r.length,s="",o=0,a,l;for(o=0;o<n;)for(a=r.length;a>o;--a)if(l=r.slice(o,a).join("-"),i[l]!=null){s+=i[l],o=a;break}return s.trim()}var Qd=new Date;function s7(t){return Qd.setFullYear(t),Qd.setMonth(0),Qd.setDate(1),Qd.setHours(0,0,0,0),Qd}function o7(t){return mB(new Date(t))}function a7(t){return Qk(new Date(t))}function mB(t){return ks.count(s7(t.getFullYear())-1,t)}function Qk(t){return Mo.count(s7(t.getFullYear())-1,t)}function e7(t){return s7(t).getDay()}function Oae(t,e,i,r,n,s,o){if(0<=t&&t<100){let a=new Date(-1,e,i,r,n,s,o);return a.setFullYear(t),a}return new Date(t,e,i,r,n,s,o)}function l7(t){return gB(new Date(t))}function u7(t){return t7(new Date(t))}function gB(t){let e=Date.UTC(t.getUTCFullYear(),0,1);return Do.count(e-1,t)}function t7(t){let e=Date.UTC(t.getUTCFullYear(),0,1);return Fo.count(e-1,t)}function i7(t){return Qd.setTime(Date.UTC(t,0,1)),Qd.getUTCDay()}function Pae(t,e,i,r,n,s,o){if(0<=t&&t<100){let a=new Date(Date.UTC(-1,e,i,r,n,s,o));return a.setUTCFullYear(i.y),a}return new Date(Date.UTC(t,e,i,r,n,s,o))}function bB(t,e,i,r,n){let s=e||1,o=ht(t),a=(b,v,y)=>(y=y||b,zae(i[y],r[y],b===o&&s,v)),l=new Date,u=or(t),c=u[Fr]?a(Fr):wi(2012),h=u[tn]?a(tn):u[es]?a(es):ga,d=u[ar]&&u[en]?a(en,1,ar+en):u[ar]?a(ar,1):u[en]?a(en,1):u[ts]?a(ts,1):u[wl]?a(wl,1):bl,p=u[As]?a(As):ga,f=u[Ts]?a(Ts):ga,m=u[ro]?a(ro):ga,g=u[Lo]?a(Lo):ga;return function(b){l.setTime(+b);let v=c(l);return n(v,h(l),d(l,v),p(l),f(l),m(l),g(l))}}function zae(t,e,i,r){let n=i<=1?t:r?(s,o)=>r+i*Math.floor((t(s,o)-r)/i):(s,o)=>i*Math.floor(t(s,o)/i);return e?(s,o)=>e(n(s,o),o):n}function d0(t,e,i){return e+t*7-(i+6)%7}var Iae={[Fr]:t=>t.getFullYear(),[es]:t=>Math.floor(t.getMonth()/3),[tn]:t=>t.getMonth(),[ts]:t=>t.getDate(),[As]:t=>t.getHours(),[Ts]:t=>t.getMinutes(),[ro]:t=>t.getSeconds(),[Lo]:t=>t.getMilliseconds(),[wl]:t=>mB(t),[ar]:t=>Qk(t),[ar+en]:(t,e)=>d0(Qk(t),t.getDay(),e7(e)),[en]:(t,e)=>d0(1,t.getDay(),e7(e))},Bae={[es]:t=>3*t,[ar]:(t,e)=>d0(t,0,e7(e))};function c7(t,e){return bB(t,e||1,Iae,Bae,Oae)}var Nae={[Fr]:t=>t.getUTCFullYear(),[es]:t=>Math.floor(t.getUTCMonth()/3),[tn]:t=>t.getUTCMonth(),[ts]:t=>t.getUTCDate(),[As]:t=>t.getUTCHours(),[Ts]:t=>t.getUTCMinutes(),[ro]:t=>t.getUTCSeconds(),[Lo]:t=>t.getUTCMilliseconds(),[wl]:t=>gB(t),[ar]:t=>t7(t),[en]:(t,e)=>d0(1,t.getUTCDay(),i7(e)),[ar+en]:(t,e)=>d0(t7(t),t.getUTCDay(),i7(e))},$ae={[es]:t=>3*t,[ar]:(t,e)=>d0(t,0,i7(e))};function h7(t,e){return bB(t,e||1,Nae,$ae,Pae)}var Hae={[Fr]:Zn,[es]:Mu.every(3),[tn]:Mu,[ar]:Mo,[ts]:ks,[en]:ks,[wl]:ks,[As]:sh,[Ts]:rh,[ro]:Cn,[Lo]:ya},Uae={[Fr]:Qn,[es]:Fu.every(3),[tn]:Fu,[ar]:Fo,[ts]:Do,[en]:Do,[wl]:Do,[As]:oh,[Ts]:nh,[ro]:Cn,[Lo]:ya};function Lu(t){return Hae[t]}function Ou(t){return Uae[t]}function vB(t,e,i){return t?t.offset(e,i):void 0}function d7(t,e,i){return vB(Lu(t),e,i)}function f7(t,e,i){return vB(Ou(t),e,i)}function yB(t,e,i,r){return t?t.range(e,i,r):void 0}function p7(t,e,i,r){return yB(Lu(t),e,i,r)}function m7(t,e,i,r){return yB(Ou(t),e,i,r)}var sb=1e3,ob=sb*60,ab=ob*60,T2=ab*24,Wae=T2*7,fB=T2*30,r7=T2*365,xB=[Fr,tn,ts,As,Ts,ro,Lo],lb=xB.slice(0,-1),ub=lb.slice(0,-1),cb=ub.slice(0,-1),Vae=cb.slice(0,-1),jae=[Fr,ar],pB=[Fr,tn],wB=[Fr],nb=[[lb,1,sb],[lb,5,5*sb],[lb,15,15*sb],[lb,30,30*sb],[ub,1,ob],[ub,5,5*ob],[ub,15,15*ob],[ub,30,30*ob],[cb,1,ab],[cb,3,3*ab],[cb,6,6*ab],[cb,12,12*ab],[Vae,1,T2],[jae,1,Wae],[pB,1,fB],[pB,3,3*fB],[wB,1,r7]];function g7(t){let e=t.extent,i=t.maxbins||40,r=Math.abs(Tu(e))/i,n=to(a=>a[2]).right(nb,r),s,o;return n===nb.length?(s=wB,o=Jn(e[0]/r7,e[1]/r7,i)):n?(n=nb[r/nb[n-1][2]<nb[n][2]/r?n-1:n],s=n[0],o=n[1]):(s=xB,o=Math.max(Jn(e[0],e[1],i),1)),{units:s,step:o}}function b7(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function v7(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function hb(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function f0(t){var e=t.dateTime,i=t.date,r=t.time,n=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=db(n),c=fb(n),h=db(s),d=fb(s),p=db(o),f=fb(o),m=db(a),g=fb(a),b=db(l),v=fb(l),y={a:T,A:L,b:P,B:W,c:null,d:AB,e:AB,f:ple,g:Sle,G:kle,H:hle,I:dle,j:fle,L:FB,m:mle,M:gle,p:Y,q:ne,Q:DB,s:MB,S:ble,u:vle,U:yle,V:xle,w:wle,W:_le,x:null,X:null,y:Cle,Y:Ele,Z:Ale,"%":RB},x={a:ke,A:Ae,b:G,B:$,c:null,d:TB,e:TB,f:Mle,g:Hle,G:Wle,H:Tle,I:Rle,j:Dle,L:OB,m:Fle,M:Lle,p:le,q:me,Q:DB,s:MB,S:Ole,u:Ple,U:zle,V:Ile,w:Ble,W:Nle,x:null,X:null,y:$le,Y:Ule,Z:Vle,"%":RB},_={a:D,A:R,b:I,B:z,c:B,d:EB,e:EB,f:ale,g:SB,G:CB,H:kB,I:kB,j:rle,L:ole,m:ile,M:nle,p:A,q:tle,Q:ule,s:cle,S:sle,u:Kae,U:Jae,V:Zae,w:Yae,W:Qae,x:N,X:H,y:SB,Y:CB,Z:ele,"%":lle};y.x=w(i,y),y.X=w(r,y),y.c=w(e,y),x.x=w(i,x),x.X=w(r,x),x.c=w(e,x);function w(ie,ue){return function(Me){var he=[],gt=-1,ot=0,He=ie.length,oi,Rr,eo;for(Me instanceof Date||(Me=new Date(+Me));++gt<He;)ie.charCodeAt(gt)===37&&(he.push(ie.slice(ot,gt)),(Rr=_B[oi=ie.charAt(++gt)])!=null?oi=ie.charAt(++gt):Rr=oi==="e"?" ":"0",(eo=ue[oi])&&(oi=eo(Me,Rr)),he.push(oi),ot=gt+1);return he.push(ie.slice(ot,gt)),he.join("")}}function C(ie,ue){return function(Me){var he=hb(1900,void 0,1),gt=E(he,ie,Me+="",0),ot,He;if(gt!=Me.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(ue&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(ot=v7(hb(he.y,0,1)),He=ot.getUTCDay(),ot=He>4||He===0?h0.ceil(ot):h0(ot),ot=Do.offset(ot,(he.V-1)*7),he.y=ot.getUTCFullYear(),he.m=ot.getUTCMonth(),he.d=ot.getUTCDate()+(he.w+6)%7):(ot=b7(hb(he.y,0,1)),He=ot.getDay(),ot=He>4||He===0?c0.ceil(ot):c0(ot),ot=ks.offset(ot,(he.V-1)*7),he.y=ot.getFullYear(),he.m=ot.getMonth(),he.d=ot.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),He="Z"in he?v7(hb(he.y,0,1)).getUTCDay():b7(hb(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(He+5)%7:he.w+he.U*7-(He+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,v7(he)):b7(he)}}function E(ie,ue,Me,he){for(var gt=0,ot=ue.length,He=Me.length,oi,Rr;gt<ot;){if(he>=He)return-1;if(oi=ue.charCodeAt(gt++),oi===37){if(oi=ue.charAt(gt++),Rr=_[oi in _B?ue.charAt(gt++):oi],!Rr||(he=Rr(ie,Me,he))<0)return-1}else if(oi!=Me.charCodeAt(he++))return-1}return he}function A(ie,ue,Me){var he=u.exec(ue.slice(Me));return he?(ie.p=c.get(he[0].toLowerCase()),Me+he[0].length):-1}function D(ie,ue,Me){var he=p.exec(ue.slice(Me));return he?(ie.w=f.get(he[0].toLowerCase()),Me+he[0].length):-1}function R(ie,ue,Me){var he=h.exec(ue.slice(Me));return he?(ie.w=d.get(he[0].toLowerCase()),Me+he[0].length):-1}function I(ie,ue,Me){var he=b.exec(ue.slice(Me));return he?(ie.m=v.get(he[0].toLowerCase()),Me+he[0].length):-1}function z(ie,ue,Me){var he=m.exec(ue.slice(Me));return he?(ie.m=g.get(he[0].toLowerCase()),Me+he[0].length):-1}function B(ie,ue,Me){return E(ie,e,ue,Me)}function N(ie,ue,Me){return E(ie,i,ue,Me)}function H(ie,ue,Me){return E(ie,r,ue,Me)}function T(ie){return o[ie.getDay()]}function L(ie){return s[ie.getDay()]}function P(ie){return l[ie.getMonth()]}function W(ie){return a[ie.getMonth()]}function Y(ie){return n[+(ie.getHours()>=12)]}function ne(ie){return 1+~~(ie.getMonth()/3)}function ke(ie){return o[ie.getUTCDay()]}function Ae(ie){return s[ie.getUTCDay()]}function G(ie){return l[ie.getUTCMonth()]}function $(ie){return a[ie.getUTCMonth()]}function le(ie){return n[+(ie.getUTCHours()>=12)]}function me(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var ue=w(ie+="",y);return ue.toString=function(){return ie},ue},parse:function(ie){var ue=C(ie+="",!1);return ue.toString=function(){return ie},ue},utcFormat:function(ie){var ue=w(ie+="",x);return ue.toString=function(){return ie},ue},utcParse:function(ie){var ue=C(ie+="",!0);return ue.toString=function(){return ie},ue}}}var _B={"-":"",_:" ",0:"0"},Lr=/^\s*\d+/,qae=/^%/,Gae=/[\\^$*+?|[\]().{}]/g;function Nt(t,e,i){var r=t<0?"-":"",n=(r?-t:t)+"",s=n.length;return r+(s<i?new Array(i-s+1).join(e)+n:n)}function Xae(t){return t.replace(Gae,"\\$&")}function db(t){return new RegExp("^(?:"+t.map(Xae).join("|")+")","i")}function fb(t){return new Map(t.map((e,i)=>[e.toLowerCase(),i]))}function Yae(t,e,i){var r=Lr.exec(e.slice(i,i+1));return r?(t.w=+r[0],i+r[0].length):-1}function Kae(t,e,i){var r=Lr.exec(e.slice(i,i+1));return r?(t.u=+r[0],i+r[0].length):-1}function Jae(t,e,i){var r=Lr.exec(e.slice(i,i+2));return r?(t.U=+r[0],i+r[0].length):-1}function Zae(t,e,i){var r=Lr.exec(e.slice(i,i+2));return r?(t.V=+r[0],i+r[0].length):-1}function Qae(t,e,i){var r=Lr.exec(e.slice(i,i+2));return r?(t.W=+r[0],i+r[0].length):-1}function CB(t,e,i){var r=Lr.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1}function SB(t,e,i){var r=Lr.exec(e.slice(i,i+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function ele(t,e,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function tle(t,e,i){var r=Lr.exec(e.slice(i,i+1));return r?(t.q=r[0]*3-3,i+r[0].length):-1}function ile(t,e,i){var r=Lr.exec(e.slice(i,i+2));return r?(t.m=r[0]-1,i+r[0].length):-1}function EB(t,e,i){var r=Lr.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1}function rle(t,e,i){var r=Lr.exec(e.slice(i,i+3));return r?(t.m=0,t.d=+r[0],i+r[0].length):-1}function kB(t,e,i){var r=Lr.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1}function nle(t,e,i){var r=Lr.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1}function sle(t,e,i){var r=Lr.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1}function ole(t,e,i){var r=Lr.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1}function ale(t,e,i){var r=Lr.exec(e.slice(i,i+6));return r?(t.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function lle(t,e,i){var r=qae.exec(e.slice(i,i+1));return r?i+r[0].length:-1}function ule(t,e,i){var r=Lr.exec(e.slice(i));return r?(t.Q=+r[0],i+r[0].length):-1}function cle(t,e,i){var r=Lr.exec(e.slice(i));return r?(t.s=+r[0],i+r[0].length):-1}function AB(t,e){return Nt(t.getDate(),e,2)}function hle(t,e){return Nt(t.getHours(),e,2)}function dle(t,e){return Nt(t.getHours()%12||12,e,2)}function fle(t,e){return Nt(1+ks.count(Zn(t),t),e,3)}function FB(t,e){return Nt(t.getMilliseconds(),e,3)}function ple(t,e){return FB(t,e)+"000"}function mle(t,e){return Nt(t.getMonth()+1,e,2)}function gle(t,e){return Nt(t.getMinutes(),e,2)}function ble(t,e){return Nt(t.getSeconds(),e,2)}function vle(t){var e=t.getDay();return e===0?7:e}function yle(t,e){return Nt(Mo.count(Zn(t)-1,t),e,2)}function LB(t){var e=t.getDay();return e>=4||e===0?ah(t):ah.ceil(t)}function xle(t,e){return t=LB(t),Nt(ah.count(Zn(t),t)+(Zn(t).getDay()===4),e,2)}function wle(t){return t.getDay()}function _le(t,e){return Nt(c0.count(Zn(t)-1,t),e,2)}function Cle(t,e){return Nt(t.getFullYear()%100,e,2)}function Sle(t,e){return t=LB(t),Nt(t.getFullYear()%100,e,2)}function Ele(t,e){return Nt(t.getFullYear()%1e4,e,4)}function kle(t,e){var i=t.getDay();return t=i>=4||i===0?ah(t):ah.ceil(t),Nt(t.getFullYear()%1e4,e,4)}function Ale(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Nt(e/60|0,"0",2)+Nt(e%60,"0",2)}function TB(t,e){return Nt(t.getUTCDate(),e,2)}function Tle(t,e){return Nt(t.getUTCHours(),e,2)}function Rle(t,e){return Nt(t.getUTCHours()%12||12,e,2)}function Dle(t,e){return Nt(1+Do.count(Qn(t),t),e,3)}function OB(t,e){return Nt(t.getUTCMilliseconds(),e,3)}function Mle(t,e){return OB(t,e)+"000"}function Fle(t,e){return Nt(t.getUTCMonth()+1,e,2)}function Lle(t,e){return Nt(t.getUTCMinutes(),e,2)}function Ole(t,e){return Nt(t.getUTCSeconds(),e,2)}function Ple(t){var e=t.getUTCDay();return e===0?7:e}function zle(t,e){return Nt(Fo.count(Qn(t)-1,t),e,2)}function PB(t){var e=t.getUTCDay();return e>=4||e===0?lh(t):lh.ceil(t)}function Ile(t,e){return t=PB(t),Nt(lh.count(Qn(t),t)+(Qn(t).getUTCDay()===4),e,2)}function Ble(t){return t.getUTCDay()}function Nle(t,e){return Nt(h0.count(Qn(t)-1,t),e,2)}function $le(t,e){return Nt(t.getUTCFullYear()%100,e,2)}function Hle(t,e){return t=PB(t),Nt(t.getUTCFullYear()%100,e,2)}function Ule(t,e){return Nt(t.getUTCFullYear()%1e4,e,4)}function Wle(t,e){var i=t.getUTCDay();return t=i>=4||i===0?lh(t):lh.ceil(t),Nt(t.getUTCFullYear()%1e4,e,4)}function Vle(){return"+0000"}function RB(){return"%"}function DB(t){return+t}function MB(t){return Math.floor(+t/1e3)}var p0,m0,R2,g0,D2;y7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function y7(t){return p0=f0(t),m0=p0.format,R2=p0.parse,g0=p0.utcFormat,D2=p0.utcParse,p0}function pb(t){let e={};return i=>e[i]||(e[i]=t(i))}function jle(t,e){return i=>{let r=t(i),n=r.indexOf(e);if(n<0)return r;let s=qle(r,n),o=s<r.length?r.slice(s):"";for(;--s>n;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function qle(t,e){let i=t.lastIndexOf("e"),r;if(i>0)return i;for(i=t.length;--i>e;)if(r=t.charCodeAt(i),r>=48&&r<=57)return i+1}function IB(t){let e=pb(t.format),i=t.formatPrefix;return{format:e,formatPrefix:i,formatFloat(r){let n=io(r||",");if(n.precision==null){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1;break}return jle(e(n),e(".1f")(1)[1])}else return e(n)},formatSpan(r,n,s,o){o=io(o??",f");let a=Jn(r,n,s),l=Math.max(Math.abs(r),Math.abs(n)),u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=tb(a,l))||(o.precision=u),i(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=ib(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=eb(a))||(o.precision=u-(o.type==="%")*2);break}}return e(o)}}}var x7;BB();function BB(){return x7=IB({format:ih,formatPrefix:u0})}function NB(t){return IB(Q1(t))}function mb(t){return arguments.length?x7=NB(t):x7}function zB(t,e,i){i=i||{},ge(i)||te(`Invalid time multi-format specifier: ${i}`);let r=e(ro),n=e(Ts),s=e(As),o=e(ts),a=e(ar),l=e(tn),u=e(es),c=e(Fr),h=t(i[Lo]||".%L"),d=t(i[ro]||":%S"),p=t(i[Ts]||"%I:%M"),f=t(i[As]||"%I %p"),m=t(i[ts]||i[en]||"%a %d"),g=t(i[ar]||"%b %d"),b=t(i[tn]||"%B"),v=t(i[es]||"%B"),y=t(i[Fr]||"%Y");return x=>(r(x)<x?h:n(x)<x?d:s(x)<x?p:o(x)<x?f:l(x)<x?a(x)<x?m:g:c(x)<x?u(x)<x?b:v:y)(x)}function $B(t){let e=pb(t.format),i=pb(t.utcFormat);return{timeFormat:r=>fe(r)?e(r):zB(e,Lu,r),utcFormat:r=>fe(r)?i(r):zB(i,Ou,r),timeParse:pb(t.parse),utcParse:pb(t.utcParse)}}var w7;HB();function HB(){return w7=$B({format:m0,parse:R2,utcFormat:g0,utcParse:D2})}function UB(t){return $B(f0(t))}function ef(t){return arguments.length?w7=UB(t):w7}var _7=(t,e)=>Ze({},t,e);function M2(t,e){let i=t?NB(t):mb(),r=e?UB(e):ef();return _7(i,r)}function gb(t,e){let i=arguments.length;return i&&i!==2&&te("defaultLocale expects either zero or two arguments."),i?_7(mb(t),ef(e)):_7(mb(),ef())}function WB(){return BB(),HB(),gb()}var Gle=/^(data:|([A-Za-z]+:)?\/\/)/,Xle=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Yle=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,VB="file://";function Kle(t,e){return i=>({options:i||{},sanitize:Zle,load:Jle,fileAccess:!1,file:Qle(e),http:tue(t)})}async function Jle(t,e){let i=await this.sanitize(t,e),r=i.href;return i.localFile?this.file(r):this.http(r,e)}async function Zle(t,e){e=Ze({},this.options,e);let i=this.fileAccess,r={href:null},n,s,o,a=Xle.test(t.replace(Yle,""));(t==null||typeof t!="string"||!a)&&te("Sanitize failure, invalid URI: "+pe(t));let l=Gle.test(t);return(o=e.baseURL)&&!l&&(!t.startsWith("/")&&!o.endsWith("/")&&(t="/"+t),t=o+t),s=(n=t.startsWith(VB))||e.mode==="file"||e.mode!=="http"&&!l&&i,n?t=t.slice(VB.length):t.startsWith("//")&&(e.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(r,"localFile",{value:!!s}),r.href=t,e.target&&(r.target=e.target+""),e.rel&&(r.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(r.crossOrigin=e.crossOrigin+""),r}function Qle(t){return t?e=>new Promise((i,r)=>{t.readFile(e,(n,s)=>{n?r(n):i(s)})}):eue}async function eue(){te("No file system access.")}function tue(t){return t?async function(e,i){let r=Ze({},this.options.http,i),n=i&&i.response,s=await t(e,r);return s.ok?Je(s[n])?s[n]():s.text():te(s.status+""+s.statusText)}:iue}async function iue(){te("No HTTP fetch method available.")}var rue=t=>t!=null&&t===t,nue=t=>t==="true"||t==="false"||t===!0||t===!1,sue=t=>!Number.isNaN(Date.parse(t)),qB=t=>!Number.isNaN(+t)&&!(t instanceof Date),oue=t=>qB(t)&&Number.isInteger(+t),C7={boolean:j1,integer:Ki,number:Ki,date:q1,string:G1,unknown:$i},F2=[nue,oue,qB,sue],aue=["boolean","integer","number","date"];function GB(t,e){if(!t||!t.length)return"unknown";let i=t.length,r=F2.length,n=F2.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<i;++s)for(l=e?t[s][e]:t[s],a=0;a<r;++a)if(n[a]&&rue(l)&&!F2[a](l)&&(n[a]=0,++o,o===F2.length))return"string";return aue[n.reduce((s,o)=>s===0?o:s,0)-1]}function XB(t,e){return e.reduce((i,r)=>(i[r]=GB(t,r),i),{})}function jB(t){let e=function(i,r){let n={delimiter:t};return S7(i,r?Ze(r,n):n)};return e.responseType="text",e}function S7(t,e){return e.header&&(t=e.header.map(pe).join(e.delimiter)+`
`+t),Mk(e.delimiter).parse(t+"")}S7.responseType="text";function lue(t){return typeof Buffer=="function"&&Je(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function E7(t,e){let i=e&&e.property?Mr(e.property):$i;return ge(t)&&!lue(t)?uue(i(t),e):i(JSON.parse(t))}E7.responseType="json";function uue(t,e){return!K(t)&&_k(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}var cue={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function YB(t,e){let i,r,n,s;return t=E7(t,e),e&&e.feature?(i=Lk,n=e.feature):e&&e.mesh?(i=Pk,n=e.mesh,s=cue[e.filter]):te("Missing TopoJSON feature or mesh parameter."),r=(r=t.objects[n])?i(t,r,s):te("Invalid TopoJSON object: "+n),r&&r.features||[r]}YB.responseType="json";var L2={dsv:S7,csv:jB(","),tsv:jB("	"),json:E7,topojson:YB};function k7(t,e){return arguments.length>1?(L2[t]=e,this):_e(L2,t)?L2[t]:null}function A7(t){let e=k7(t);return e&&e.responseType||"text"}function T7(t,e,i,r){e=e||{};let n=k7(e.type||"json");return n||te("Unknown data format type: "+e.type),t=n(t,e),e.parse&&hue(t,e.parse,i,r),_e(t,"columns")&&delete t.columns,t}function hue(t,e,i,r){if(!t.length)return;let n=ef();i=i||n.timeParse,r=r||n.utcParse;let s=t.columns||Object.keys(t[0]),o,a,l,u,c,h;e==="auto"&&(e=XB(t,s)),s=Object.keys(e);let d=s.map(p=>{let f=e[p],m,g;if(f&&(f.startsWith("date:")||f.startsWith("utc:")))return m=f.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:i)(g);if(!C7[f])throw Error("Illegal format pattern: "+p+":"+f);return C7[f]});for(l=0,c=t.length,h=s.length;l<c;++l)for(o=t[l],u=0;u<h;++u)a=s[u],o[a]=d[u](o[a])}var b0=Kle(typeof fetch<"u"&&fetch,null);function I2(t){let e=t||$i,i=[],r={};return i.add=n=>{let s=e(n);return r[s]||(r[s]=1,i.push(n)),i},i.remove=n=>{let s=e(n);if(r[s]){r[s]=0;let o=i.indexOf(n);o>=0&&i.splice(o,1)}return i},i}async function yb(t,e){try{await e(t)}catch(i){t.error(i)}}var iN=Symbol("vega_id"),due=1;function tf(t){return!!(t&&Ve(t))}function Ve(t){return t[iN]}function rN(t,e){return t[iN]=e,t}function _t(t){let e=t===Object(t)?t:{data:t};return Ve(e)?e:rN(e,due++)}function B2(t){return rf(t,_t({}))}function rf(t,e){for(let i in t)e[i]=t[i];return e}function N2(t,e){return rN(e,Ve(t))}function Cl(t,e){return t?e?(i,r)=>t(i,r)||Ve(e(i))-Ve(e(r)):(i,r)=>t(i,r)||Ve(i)-Ve(r):null}function D7(t){return t&&t.constructor===Bu}function Bu(){let t=[],e=[],i=[],r=[],n=[],s=null,o=!1;return{constructor:Bu,insert(a){let l=ve(a),u=l.length;for(let c=0;c<u;++c)t.push(l[c]);return this},remove(a){let l=Je(a)?r:e,u=ve(a),c=u.length;for(let h=0;h<c;++h)l.push(u[h]);return this},modify(a,l,u){let c={field:l,value:wi(u)};return Je(a)?(c.filter=a,n.push(c)):(c.tuple=a,i.push(c)),this},encode(a,l){return Je(a)?n.push({filter:a,field:l}):i.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){let u={},c={},h,d,p,f,m,g;for(h=0,d=l.length;h<d;++h)u[Ve(l[h])]=1;for(h=0,d=e.length;h<d;++h)m=e[h],u[Ve(m)]=-1;for(h=0,d=r.length;h<d;++h)f=r[h],l.forEach(v=>{f(v)&&(u[Ve(v)]=-1)});for(h=0,d=t.length;h<d;++h)m=t[h],g=Ve(m),u[g]?u[g]=1:a.add.push(_t(t[h]));for(h=0,d=l.length;h<d;++h)m=l[h],u[Ve(m)]<0&&a.rem.push(m);function b(v,y,x){x?v[y]=x(v):a.encode=y,o||(c[Ve(v)]=v)}for(h=0,d=i.length;h<d;++h)p=i[h],m=p.tuple,f=p.field,g=u[Ve(m)],g>0&&(b(m,f,p.value),a.modifies(f));for(h=0,d=n.length;h<d;++h)p=n[h],f=p.filter,l.forEach(v=>{f(v)&&u[Ve(v)]>0&&b(v,p.field,p.value)}),a.modifies(p.field);if(o)a.mod=e.length||r.length?l.filter(v=>u[Ve(v)]>0):l.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(e.length||r.length))&&a.clean(!0),a}}}var P2="_:mod:_";function xb(){Object.defineProperty(this,P2,{writable:!0,value:{}})}xb.prototype={set(t,e,i,r){let n=this,s=n[t],o=n[P2];return e!=null&&e>=0?(s[e]!==i||r)&&(s[e]=i,o[e+":"+t]=-1,o[t]=-1):(s!==i||r)&&(n[t]=i,o[t]=K(i)?1+i.length:-1),n},modified(t,e){let i=this[P2];if(arguments.length){if(K(t)){for(let r=0;r<t.length;++r)if(i[t[r]])return!0;return!1}}else{for(let r in i)if(i[r])return!0;return!1}return e!=null&&e>=0?e+1<i[t]||!!i[e+":"+t]:!!i[t]},clear(){return this[P2]={},this}};var fue=0,pue="pulse",mue=new xb,gue=1,bue=2;function Xt(t,e,i,r){this.id=++fue,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),i&&this.parameters(i,r)}function KB(t){return function(e){let i=this.flags;return arguments.length===0?!!(i&t):(this.flags=e?i|t:i&~t,this)}}Xt.prototype={targets(){return this._targets||(this._targets=I2(r0))},set(t){return this.value!==t?(this.value=t,1):0},skip:KB(gue),modified:KB(bue),parameters(t,e,i){e=e!==!1;let r=this._argval=this._argval||new xb,n=this._argops=this._argops||[],s=[],o,a,l,u,c=(h,d,p)=>{p instanceof Xt?(p!==this&&(e&&p.targets().add(this),s.push(p)),n.push({op:p,name:h,index:d})):r.set(h,d,p)};for(o in t)if(a=t[o],o===pue)ve(a).forEach(h=>{h instanceof Xt?h!==this&&(h.targets().add(this),s.push(h)):te("Pulse parameters must be operator instances.")}),this.source=a;else if(K(a))for(r.set(o,-1,Array(l=a.length)),u=0;u<l;++u)c(o,u,a[u]);else c(o,-1,a);return this.marshall().clear(),i&&(n.initonly=!0),s},marshall(t){let e=this._argval||mue,i=this._argops,r,n,s,o;if(i){let a=i.length;for(n=0;n<a;++n)r=i[n],s=r.op,o=s.modified()&&s.stamp===t,e.set(r.name,r.index,s.value,o);if(i.initonly){for(n=0;n<a;++n)r=i[n],r.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){let t=this._argops,e,i,r,n;if(t)for(e=0,i=t.length;e<i;++e)r=t[e],n=r.op,n._targets&&n._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){let e=this._update;if(e){let i=this.marshall(t.stamp),r=e.call(this,i,t);if(i.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};function vue(t,e,i,r){let n=1,s;return t instanceof Xt?s=t:t&&t.prototype instanceof Xt?s=new t:Je(t)?s=new Xt(null,t):(n=0,s=new Xt(t,e)),this.rank(s),n&&(r=i,i=e),i&&this.connect(s,s.parameters(i,r)),this.touch(s),s}function yue(t,e){let i=t.rank,r=e.length;for(let n=0;n<r;++n)if(i<e[n].rank){this.rerank(t);return}}var xue=0;function y0(t,e,i){this.id=++xue,this.value=null,i&&(this.receive=i),t&&(this._filter=t),e&&(this._apply=e)}function uh(t,e,i){return new y0(t,e,i)}y0.prototype={_filter:yr,_apply:$i,targets(){return this._targets||(this._targets=I2(r0))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){let e=this.value=this._apply(t),i=this._targets,r=i?i.length:0;for(let n=0;n<r;++n)i[n].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){let e=uh(t);return this.targets().add(e),e},apply(t){let e=uh(null,t);return this.targets().add(e),e},merge(){let t=uh();this.targets().add(t);for(let e=0,i=arguments.length;e<i;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{let i=Date.now();return i-e>t?(e=i,1):0})},debounce(t){let e=uh();return this.targets().add(uh(null,null,W1(t,i=>{let r=i.dataflow;e.receive(i),r&&r.run&&r.run()}))),e},between(t,e){let i=!1;return t.targets().add(uh(null,null,()=>i=!0)),e.targets().add(uh(null,null,()=>i=!1)),this.filter(()=>i)},detach(){this._filter=yr,this._targets=null}};function wue(t,e,i,r){let n=this,s=uh(i,r),o=function(u){u.dataflow=n;try{s.receive(u)}catch(c){n.error(c)}finally{n.run()}},a;typeof t=="string"&&typeof document<"u"?a=document.querySelectorAll(t):a=ve(t);let l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(e,o);return s}function _ue(t,e){let i=this.locale();return T7(t,e,i.timeParse,i.utcParse)}function Cue(t,e,i){return e=this.parse(e,i),this.pulse(t,this.changeset().insert(e))}async function Sue(t,e){let i=this,r=0,n;try{n=await i.loader().load(t,{context:"dataflow",response:A7(e&&e.type)});try{n=i.parse(n,e)}catch(s){r=-2,i.warn("Data ingestion failed",t,s)}}catch(s){r=-1,i.warn("Loading failed",t,s)}return{data:n,status:r}}async function Eue(t,e,i){let r=this,n=r._pending||kue(r);n.requests+=1;let s=await r.request(e,i);return r.pulse(t,r.changeset().remove(yr).insert(s.data||[])),n.done(),s}function kue(t){let e,i=new Promise(r=>e=r);return i.requests=0,i.done=()=>{--i.requests===0&&(t._pending=null,e(t))},t._pending=i}var Aue={skip:!0};function Tue(t,e,i,r,n){return(t instanceof Xt?Due:Rue)(this,t,e,i,r,n),this}function Rue(t,e,i,r,n,s){let o=Ze({},s,Aue),a,l;Je(i)||(i=wi(i)),r===void 0?a=u=>t.touch(i(u)):Je(r)?(l=new Xt(null,r,n,!1),a=u=>{l.evaluate(u);let c=i(u),h=l.value;D7(h)?t.pulse(c,h,s):t.update(c,h,o)}):a=u=>t.update(i(u),r,o),e.apply(a)}function Due(t,e,i,r,n,s){if(r===void 0)e.targets().add(i);else{let o=s||{},a=new Xt(null,Mue(i,r),n,!1);a.modified(o.force),a.rank=e.rank,e.targets().add(a),i&&(a.skip(!0),a.value=i.value,a.targets().add(i),t.connect(i,[a]))}}function Mue(t,e){return e=Je(e)?e:wi(e),t?function(i,r){let n=e(i,r);return t.skip()||(t.skip(n!==this.value).value=n),n}:e}function Fue(t){t.rank=++this._rank}function Lue(t){let e=[t],i,r,n;for(;e.length;)if(this.rank(i=e.pop()),r=i._targets)for(n=r.length;--n>=0;)e.push(i=r[n]),i===t&&te("Cycle detected in dataflow graph.")}var z2={},_l=1,ch=2,Pu=4,Oue=_l|ch,JB=_l|Pu,v0=_l|ch|Pu,ZB=8,bb=16,QB=32,eN=64;function zu(t,e,i){this.dataflow=t,this.stamp=e??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=i||null}function R7(t,e){let i=[];return Ru(t,e,r=>i.push(r)),i}function tN(t,e){let i={};return t.visit(e,r=>{i[Ve(r)]=1}),r=>i[Ve(r)]?null:r}function O2(t,e){return t?(i,r)=>t(i,r)&&e(i,r):e}zu.prototype={StopPropagation:z2,ADD:_l,REM:ch,MOD:Pu,ADD_REM:Oue,ADD_MOD:JB,ALL:v0,REFLOW:ZB,SOURCE:bb,NO_SOURCE:QB,NO_FIELDS:eN,fork(t){return new zu(this.dataflow).init(this,t)},clone(){let t=this.fork(v0);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(v0|bb)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new zu(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){let i=this;return i.stamp=t.stamp,i.encode=t.encode,t.fields&&!(e&eN)&&(i.fields=t.fields),e&_l?(i.addF=t.addF,i.add=t.add):(i.addF=null,i.add=[]),e&ch?(i.remF=t.remF,i.rem=t.rem):(i.remF=null,i.rem=[]),e&Pu?(i.modF=t.modF,i.mod=t.mod):(i.modF=null,i.mod=[]),e&QB?(i.srcF=null,i.source=null):(i.srcF=t.srcF,i.source=t.source,t.cleans&&(i.cleans=t.cleans)),i},runAfter(t){this.dataflow.runAfter(t)},changed(t){let e=t||v0;return e&_l&&this.add.length||e&ch&&this.rem.length||e&Pu&&this.mod.length},reflow(t){if(t)return this.fork(v0).reflow();let e=this.add.length,i=this.source&&this.source.length;return i&&i!==e&&(this.mod=this.source,e&&this.filter(Pu,tN(this,_l))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){let e=this.fields||(this.fields={});return K(t)?t.forEach(i=>e[i]=!0):e[t]=!0,this},modified(t,e){let i=this.fields;return(e||this.mod.length)&&i?arguments.length?K(t)?t.some(r=>i[r]):i[t]:!!i:!1},filter(t,e){let i=this;return t&_l&&(i.addF=O2(i.addF,e)),t&ch&&(i.remF=O2(i.remF,e)),t&Pu&&(i.modF=O2(i.modF,e)),t&bb&&(i.srcF=O2(i.srcF,e)),i},materialize(t){t=t||v0;let e=this;return t&_l&&e.addF&&(e.add=R7(e.add,e.addF),e.addF=null),t&ch&&e.remF&&(e.rem=R7(e.rem,e.remF),e.remF=null),t&Pu&&e.modF&&(e.mod=R7(e.mod,e.modF),e.modF=null),t&bb&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){let i=this,r=e;if(t&bb)return Ru(i.source,i.srcF,r),i;t&_l&&Ru(i.add,i.addF,r),t&ch&&Ru(i.rem,i.remF,r),t&Pu&&Ru(i.mod,i.modF,r);let n=i.source;if(t&ZB&&n){let s=i.add.length+i.mod.length;s===n.length||(s?Ru(n,tN(i,JB),r):Ru(n,i.srcF,r))}return i}};function $2(t,e,i,r){let n=this,s=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=i;for(let o of i)if(o.stamp===e){if(o.fields){let a=n.fields||(n.fields={});for(let l in o.fields)a[l]=1}o.changed(n.ADD)&&(s|=n.ADD),o.changed(n.REM)&&(s|=n.REM),o.changed(n.MOD)&&(s|=n.MOD)}this.changes=s}we($2,zu,{fork(t){let e=new zu(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,i=>e.add.push(i)),t&e.REM&&this.visit(e.REM,i=>e.rem.push(i)),t&e.MOD&&this.visit(e.MOD,i=>e.mod.push(i))),e},changed(t){return this.changes&t},modified(t){let e=this,i=e.fields;return i&&e.changes&e.MOD?K(t)?t.some(r=>i[r]):i[t]:0},filter(){te("MultiPulse does not support filtering.")},materialize(){te("MultiPulse does not support materialization.")},visit(t,e){let i=this,r=i.pulses,n=r.length,s=0;if(t&i.SOURCE)for(;s<n;++s)r[s].visit(t,e);else for(;s<n;++s)r[s].stamp===i.stamp&&r[s].visit(t,e);return i}});async function Pue(t,e,i){let r=this,n=[];if(r._pulse)return nN(r);if(r._pending&&await r._pending,e&&await yb(r,e),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;let s=++r._clock;r._pulse=new zu(r,s,t),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=I2(r0);let o=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,t)),l.then?l=await l:l.async&&(n.push(l.async),l=z2),l!==z2&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){let c=r._postrun.sort((h,d)=>d.priority-h.priority);r._postrun=[];for(let h=0;h<c.length;++h)await yb(r,c[h].callback)}return i&&await yb(r,i),n.length&&Promise.all(n).then(c=>r.runAsync(null,()=>{c.forEach(h=>{try{h(r)}catch(d){r.error(d)}})})),r}async function zue(t,e,i){for(;this._running;)await this._running;let r=()=>this._running=null;return(this._running=this.evaluate(t,e,i)).then(r,r),this._running}function Iue(t,e,i){return this._pulse?nN(this):(this.evaluate(t,e,i),this)}function Bue(t,e,i){if(this._pulse||e)this._postrun.push({priority:i||0,callback:t});else try{t(this)}catch(r){this.error(r)}}function nN(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function Nue(t,e){let i=t.stamp<this._clock;i&&(t.stamp=this._clock),(i||e)&&(t.qrank=t.rank,this._heap.push(t))}function $ue(t,e){let i=t.source,r=this._clock;return i&&K(i)?new $2(this,r,i.map(n=>n.pulse),e):this._input[t.id]||Hue(this._pulse,i&&i.pulse)}function Hue(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==z2&&(t.source=e.source),t)}var M7={skip:!1,force:!1};function Uue(t,e){let i=e||M7;return this._pulse?this._enqueue(t):this._touched.add(t),i.skip&&t.skip(!0),this}function Wue(t,e,i){let r=i||M7;return(t.set(e)||r.force)&&this.touch(t,r),this}function Vue(t,e,i){this.touch(t,i||M7);let r=new zu(this,this._clock+(this._pulse?0:1)),n=t.pulse&&t.pulse.source||[];return r.target=t,this._input[t.id]=e.pulse(r,n),this}function jue(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:i=>(e.push(i),sN(e,0,e.length-1,t)),pop:()=>{let i=e.pop(),r;return e.length?(r=e[0],e[0]=i,que(e,0,t)):r=i,r}}}function sN(t,e,i,r){let n,s,o=t[i];for(;i>e;){if(s=i-1>>1,n=t[s],r(o,n)<0){t[i]=n,i=s;continue}break}return t[i]=o}function que(t,e,i){let r=e,n=t.length,s=t[e],o=(e<<1)+1,a;for(;o<n;)a=o+1,a<n&&i(t[o],t[a])>=0&&(o=a),t[e]=t[o],e=o,o=(e<<1)+1;return t[e]=s,sN(t,r,e,i)}function hh(){this.logger(B1()),this.logLevel(I1),this._clock=0,this._rank=0,this._locale=gb();try{this._loader=b0()}catch{}this._touched=I2(r0),this._input={},this._pulse=null,this._heap=jue((t,e)=>t.qrank-e.qrank),this._postrun=[]}function vb(t){return function(){return this._log[t].apply(this,arguments)}}hh.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:vb("error"),warn:vb("warn"),info:vb("info"),debug:vb("debug"),logLevel:vb("level"),cleanThreshold:1e4,add:vue,connect:yue,rank:Fue,rerank:Lue,pulse:Vue,touch:Uue,update:Wue,changeset:Bu,ingest:Cue,parse:_ue,preload:Eue,request:Sue,events:wue,on:Tue,evaluate:Pue,run:Iue,runAsync:zue,runAfter:Bue,_enqueue:Nue,_getPulse:$ue};function ee(t,e){Xt.call(this,t,null,e)}we(ee,Xt,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(i=>this.pulse=i):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){let e=this.marshall(t.stamp),i=this.transform(e,t);return e.clear(),i},transform(){}});var Iu={};function H2(t){let e=F7(t);return e&&e.Definition||null}function F7(t){return t=t&&t.toLowerCase(),_e(Iu,t)?Iu[t]:null}var v8={};br(v8,{aggregate:()=>dh,bin:()=>X7,collect:()=>Y7,compare:()=>bN,countpattern:()=>K7,cross:()=>J7,density:()=>Z7,dotbin:()=>e8,expression:()=>_N,extent:()=>t8,facet:()=>a_,field:()=>CN,filter:()=>r8,flatten:()=>n8,fold:()=>s8,formula:()=>o8,generate:()=>SN,impute:()=>a8,joinaggregate:()=>l8,kde:()=>u8,key:()=>EN,load:()=>kN,lookup:()=>c8,multiextent:()=>AN,multivalues:()=>TN,params:()=>RN,pivot:()=>h8,prefacet:()=>DN,project:()=>d8,proxy:()=>MN,quantile:()=>f8,relay:()=>FN,sample:()=>p8,sequence:()=>m8,sieve:()=>LN,subflow:()=>i8,timeunit:()=>g8,tupleindex:()=>PN,values:()=>zN,window:()=>b8});function*lN(t,e){if(e==null)for(let i of t)i!=null&&i!==""&&(i=+i)>=i&&(yield i);else{let i=-1;for(let r of t)r=e(r,++i,t),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function U2(t,e,i){let r=Float64Array.from(lN(t,i));return r.sort(_n),e.map(n=>Z1(r,n))}function W2(t,e){return U2(t,[.25,.5,.75],e)}function V2(t,e){let i=t.length,r=g2(t,e),n=W2(t,e),s=(n[2]-n[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(n[0])||1)*Math.pow(i,-.2)}function L7(t){let e=t.maxbins||20,i=t.base||10,r=Math.log(i),n=t.divide||[5,2],s=t.extent[0],o=t.extent[1],a,l,u,c,h,d,p=t.span||o-s||Math.abs(s)||1;if(t.step)a=t.step;else if(t.steps){for(c=p/e,h=0,d=t.steps.length;h<d&&t.steps[h]<c;++h);a=t.steps[Math.max(0,h-1)]}else{for(l=Math.ceil(Math.log(e)/r),u=t.minstep||0,a=Math.max(u,Math.pow(i,Math.round(Math.log(p)/r)-l));Math.ceil(p/a)>e;)a*=i;for(h=0,d=n.length;h<d;++h)c=a/n[h],c>=u&&p/c<=e&&(a=c)}c=Math.log(a);let f=c>=0?0:~~(-c/r)+1,m=Math.pow(i,-f-1);return(t.nice||t.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var is=Math.random;function Gue(t){is=t}function O7(t,e,i,r){if(!t.length)return[void 0,void 0];let n=Float64Array.from(lN(t,r)),s=n.length,o=e,a,l,u,c;for(u=0,c=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=n[~~(is()*s)];c[u]=a/s}return c.sort(_n),[Gd(c,i/2),Gd(c,1-i/2)]}function P7(t,e,i,r){r=r||(d=>d);let n=t.length,s=new Float64Array(n),o=0,a=1,l=r(t[0]),u=l,c=l+e,h;for(;a<n;++a){if(h=r(t[a]),h>=c){for(u=(l+u)/2;o<a;++o)s[o]=u;c=h+e,l=h}u=h}for(u=(l+u)/2;o<a;++o)s[o]=u;return i?Xue(s,e+e/4):s}function Xue(t,e){let i=t.length,r=0,n=1,s,o;for(;t[r]===t[n];)++n;for(;n<i;){for(s=n+1;t[n]===t[s];)++s;if(t[n]-t[n-1]<e){for(o=n+(r+s-n-n>>1);o<n;)t[o++]=t[n];for(;o>n;)t[o--]=t[r]}r=n,n=s}return t}function Yue(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function Kue(t,e){e==null&&(e=t,t=0);let i,r,n,s={min(o){return arguments.length?(i=o||0,n=r-i,s):i},max(o){return arguments.length?(r=o||0,n=r-i,s):r},sample(){return i+Math.floor(n*is())},pdf(o){return o===Math.floor(o)&&o>=i&&o<r?1/n:0},cdf(o){let a=Math.floor(o);return a<i?0:a>=r?1:(a-i+1)/n},icdf(o){return o>=0&&o<=1?i-1+Math.floor(o*n):NaN}};return s.min(t).max(e)}var uN=Math.sqrt(2*Math.PI),Jue=Math.SQRT2,wb=NaN;function _b(t,e){t=t||0,e=e??1;let i=0,r=0,n,s;if(wb===wb)i=wb,wb=NaN;else{do i=is()*2-1,r=is()*2-1,n=i*i+r*r;while(n===0||n>1);s=Math.sqrt(-2*Math.log(n)/n),i*=s,wb=r*s}return t+i*e}function j2(t,e,i){i=i??1;let r=(t-(e||0))/i;return Math.exp(-.5*r*r)/(i*uN)}function Cb(t,e,i){e=e||0,i=i??1;let r=(t-e)/i,n=Math.abs(r),s;if(n>37)s=0;else{let o=Math.exp(-n*n/2),a;n<7.07106781186547?(a=.0352624965998911*n+.700383064443688,a=a*n+6.37396220353165,a=a*n+33.912866078383,a=a*n+112.079291497871,a=a*n+221.213596169931,a=a*n+220.206867912376,s=o*a,a=.0883883476483184*n+1.75566716318264,a=a*n+16.064177579207,a=a*n+86.7807322029461,a=a*n+296.564248779674,a=a*n+637.333633378831,a=a*n+793.826512519948,a=a*n+440.413735824752,s=s/a):(a=n+.65,a=n+4/a,a=n+3/a,a=n+2/a,a=n+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function Sb(t,e,i){return t<0||t>1?NaN:(e||0)+(i??1)*Jue*Zue(2*t-1)}function Zue(t){let e=-Math.log((1-t)*(1+t)),i;return e<6.25?(e-=3.125,i=-364441206401782e-35,i=-16850591381820166e-35+i*e,i=128584807152564e-32+i*e,i=11157877678025181e-33+i*e,i=-1333171662854621e-31+i*e,i=20972767875968562e-33+i*e,i=6637638134358324e-30+i*e,i=-4054566272975207e-29+i*e,i=-8151934197605472e-29+i*e,i=26335093153082323e-28+i*e,i=-12975133253453532e-27+i*e,i=-5415412054294628e-26+i*e,i=10512122733215323e-25+i*e,i=-4112633980346984e-24+i*e,i=-29070369957882005e-24+i*e,i=42347877827932404e-23+i*e,i=-13654692000834679e-22+i*e,i=-13882523362786469e-21+i*e,i=.00018673420803405714+i*e,i=-.000740702534166267+i*e,i=-.006033670871430149+i*e,i=.24015818242558962+i*e,i=1.6536545626831027+i*e):e<16?(e=Math.sqrt(e)-3.25,i=22137376921775787e-25,i=9075656193888539e-23+i*e,i=-27517406297064545e-23+i*e,i=18239629214389228e-24+i*e,i=15027403968909828e-22+i*e,i=-4013867526981546e-21+i*e,i=29234449089955446e-22+i*e,i=12475304481671779e-21+i*e,i=-47318229009055734e-21+i*e,i=6828485145957318e-20+i*e,i=24031110387097894e-21+i*e,i=-.0003550375203628475+i*e,i=.0009532893797373805+i*e,i=-.0016882755560235047+i*e,i=.002491442096107851+i*e,i=-.003751208507569241+i*e,i=.005370914553590064+i*e,i=1.0052589676941592+i*e,i=3.0838856104922208+i*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,i=-27109920616438573e-27,i=-2555641816996525e-25+i*e,i=15076572693500548e-25+i*e,i=-3789465440126737e-24+i*e,i=761570120807834e-23+i*e,i=-1496002662714924e-23+i*e,i=2914795345090108e-23+i*e,i=-6771199775845234e-23+i*e,i=22900482228026655e-23+i*e,i=-99298272942317e-20+i*e,i=4526062597223154e-21+i*e,i=-1968177810553167e-20+i*e,i=7599527703001776e-20+i*e,i=-.00021503011930044477+i*e,i=-.00013871931833623122+i*e,i=1.0103004648645344+i*e,i=4.849906401408584+i*e):i=1/0,i*t}function q2(t,e){let i,r,n={mean(s){return arguments.length?(i=s||0,n):i},stdev(s){return arguments.length?(r=s??1,n):r},sample:()=>_b(i,r),pdf:s=>j2(s,i,r),cdf:s=>Cb(s,i,r),icdf:s=>Sb(s,i,r)};return n.mean(t).stdev(e)}function G2(t,e){let i=q2(),r=0,n={data(s){return arguments.length?(t=s,r=s?s.length:0,n.bandwidth(e)):t},bandwidth(s){return arguments.length?(e=s,!e&&t&&(e=V2(t)),n):e},sample(){return t[~~(is()*r)]+e*i.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=i.pdf((s-t[a])/e);return o/e/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=i.cdf((s-t[a])/e);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return n.data(t)}function X2(t,e){return t=t||0,e=e??1,Math.exp(t+_b()*e)}function Y2(t,e,i){if(t<=0)return 0;e=e||0,i=i??1;let r=(Math.log(t)-e)/i;return Math.exp(-.5*r*r)/(i*uN*t)}function K2(t,e,i){return Cb(Math.log(t),e,i)}function J2(t,e,i){return Math.exp(Sb(t,e,i))}function z7(t,e){let i,r,n={mean(s){return arguments.length?(i=s||0,n):i},stdev(s){return arguments.length?(r=s??1,n):r},sample:()=>X2(i,r),pdf:s=>Y2(s,i,r),cdf:s=>K2(s,i,r),icdf:s=>J2(s,i,r)};return n.mean(t).stdev(e)}function I7(t,e){let i=0,r;function n(o){let a=[],l=0,u;for(u=0;u<i;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<i;++u)a[u]/=l;return a}let s={weights(o){return arguments.length?(r=n(e=o||[]),s):e},distributions(o){return arguments.length?(o?(i=o.length,t=o):(i=0,t=[]),s.weights(e)):t},sample(){let o=is(),a=t[i-1],l=r[0],u=0;for(;u<i-1;l+=r[++u])if(o<l){a=t[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<i;++l)a+=r[l]*t[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<i;++l)a+=r[l]*t[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(t).weights(e)}function Z2(t,e){return e==null&&(e=t??1,t=0),t+(e-t)*is()}function Q2(t,e,i){return i==null&&(i=e??1,e=0),t>=e&&t<=i?1/(i-e):0}function e_(t,e,i){return i==null&&(i=e??1,e=0),t<e?0:t>i?1:(t-e)/(i-e)}function t_(t,e,i){return i==null&&(i=e??1,e=0),t>=0&&t<=1?e+t*(i-e):NaN}function B7(t,e){let i,r,n={min(s){return arguments.length?(i=s||0,n):i},max(s){return arguments.length?(r=s??1,n):r},sample:()=>Z2(i,r),pdf:s=>Q2(s,i,r),cdf:s=>e_(s,i,r),icdf:s=>t_(s,i,r)};return e==null&&(e=t??1,t=0),n.min(t).max(e)}function i_(t,e,i){let r=0,n=0;for(let s of t){let o=i(s);e(s)==null||o==null||isNaN(o)||(r+=(o-r)/++n)}return{coef:[r],predict:()=>r,rSquared:0}}function Eb(t,e,i,r){let n=r-t*t,s=Math.abs(n)<1e-24?0:(i-t*e)/n;return[e-s*t,s]}function r_(t,e,i,r){t=t.filter(p=>{let f=e(p),m=i(p);return f!=null&&(f=+f)>=f&&m!=null&&(m=+m)>=m}),r&&t.sort((p,f)=>e(p)-e(f));let n=t.length,s=new Float64Array(n),o=new Float64Array(n),a=0,l=0,u=0,c,h,d;for(d of t)s[a]=c=+e(d),o[a]=h=+i(d),++a,l+=(c-l)/a,u+=(h-u)/a;for(a=0;a<n;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function kb(t,e,i,r){let n=-1,s,o;for(let a of t)s=e(a),o=i(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++n)}function x0(t,e,i,r,n){let s=0,o=0;return kb(t,e,i,(a,l)=>{let u=l-n(a),c=l-r;s+=u*u,o+=c*c}),1-s/o}function n_(t,e,i){let r=0,n=0,s=0,o=0,a=0;kb(t,e,i,(c,h)=>{++a,r+=(c-r)/a,n+=(h-n)/a,s+=(c*h-s)/a,o+=(c*c-o)/a});let l=Eb(r,n,s,o),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:x0(t,e,i,n,u)}}function N7(t,e,i){let r=0,n=0,s=0,o=0,a=0;kb(t,e,i,(c,h)=>{++a,c=Math.log(c),r+=(c-r)/a,n+=(h-n)/a,s+=(c*h-s)/a,o+=(c*c-o)/a});let l=Eb(r,n,s,o),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:x0(t,e,i,n,u)}}function $7(t,e,i){let[r,n,s,o]=r_(t,e,i),a=0,l=0,u=0,c=0,h=0,d,p,f;kb(t,e,i,(v,y)=>{d=r[h++],p=Math.log(y),f=d*y,a+=(y*p-a)/h,l+=(f-l)/h,u+=(f*p-u)/h,c+=(d*f-c)/h});let[m,g]=Eb(l/o,a/o,u/o,c/o),b=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:b,rSquared:x0(t,e,i,o,b)}}function H7(t,e,i){let r=0,n=0,s=0,o=0,a=0,l=0;kb(t,e,i,(h,d)=>{let p=Math.log(h),f=Math.log(d);++l,r+=(p-r)/l,n+=(f-n)/l,s+=(p*f-s)/l,o+=(p*p-o)/l,a+=(d-a)/l});let u=Eb(r,n,s,o),c=h=>u[0]*Math.pow(h,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:x0(t,e,i,a,c)}}function s_(t,e,i){let[r,n,s,o]=r_(t,e,i),a=r.length,l=0,u=0,c=0,h=0,d=0,p,f,m,g;for(p=0;p<a;)f=r[p],m=n[p++],g=f*f,l+=(g-l)/p,u+=(g*f-u)/p,c+=(g*g-c)/p,h+=(f*m-h)/p,d+=(g*m-d)/p;let b=c-l*l,v=l*b-u*u,y=(d*l-h*u)/v,x=(h*b-d*u)/v,_=-y*l,w=C=>(C=C-s,y*C*C+x*C+_+o);return{coef:[_-x*s+y*s*s+o,x-2*y*s,y],predict:w,rSquared:x0(t,e,i,o,w)}}function U7(t,e,i,r){if(r===0)return i_(t,e,i);if(r===1)return n_(t,e,i);if(r===2)return s_(t,e,i);let[n,s,o,a]=r_(t,e,i),l=n.length,u=[],c=[],h=r+1,d,p,f,m,g;for(d=0;d<h;++d){for(f=0,m=0;f<l;++f)m+=Math.pow(n[f],d)*s[f];for(u.push(m),g=new Float64Array(h),p=0;p<h;++p){for(f=0,m=0;f<l;++f)m+=Math.pow(n[f],d+p);g[p]=m}c.push(g)}c.push(u);let b=ece(c),v=y=>{y-=o;let x=a+b[0]+b[1]*y+b[2]*y*y;for(d=3;d<h;++d)x+=b[d]*Math.pow(y,d);return x};return{coef:Que(h,b,-o,a),predict:v,rSquared:x0(t,e,i,a,v)}}function Que(t,e,i,r){let n=Array(t),s,o,a,l;for(s=0;s<t;++s)n[s]=0;for(s=t-1;s>=0;--s)for(a=e[s],l=1,n[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,n[s-o]+=a*Math.pow(i,o)*l;return n[0]+=r,n}function ece(t){let e=t.length-1,i=[],r,n,s,o,a;for(r=0;r<e;++r){for(o=r,n=r+1;n<e;++n)Math.abs(t[r][n])>Math.abs(t[r][o])&&(o=n);for(s=r;s<e+1;++s)a=t[s][r],t[s][r]=t[s][o],t[s][o]=a;for(n=r+1;n<e;++n)for(s=e;s>=r;s--)t[s][n]-=t[s][r]*t[r][n]/t[r][r]}for(n=e-1;n>=0;--n){for(a=0,s=n+1;s<e;++s)a+=t[s][n]*i[s];i[n]=(t[e][n]-a)/t[n][n]}return i}var oN=2,aN=1e-12;function W7(t,e,i,r){let[n,s,o,a]=r_(t,e,i,!0),l=n.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),h=new Float64Array(l),d=new Float64Array(l).fill(1);for(let p=-1;++p<=oN;){let f=[0,u-1];for(let g=0;g<l;++g){let b=n[g],v=f[0],y=f[1],x=b-n[v]>n[y]-b?v:y,_=0,w=0,C=0,E=0,A=0,D=1/Math.abs(n[x]-b||1);for(let z=v;z<=y;++z){let B=n[z],N=s[z],H=tce(Math.abs(b-B)*D)*d[z],T=B*H;_+=H,w+=T,C+=N*H,E+=N*T,A+=B*T}let[R,I]=Eb(w/_,C/_,E/_,A/_);c[g]=R+I*b,h[g]=Math.abs(s[g]-c[g]),ice(n,g+1,f)}if(p===oN)break;let m=o0(h);if(Math.abs(m)<aN)break;for(let g=0,b,v;g<l;++g)b=h[g]/(6*m),d[g]=b>=1?aN:(v=1-b*b)*v}return rce(n,c,o,a)}function tce(t){return(t=1-t*t*t)*t*t}function ice(t,e,i){let r=t[e],n=i[0],s=i[1]+1;if(!(s>=t.length))for(;e>n&&t[s]-r<=r-t[n];)i[0]=++n,i[1]=s,++s}function rce(t,e,i,r){let n=t.length,s=[],o=0,a=0,l=[],u;for(;o<n;++o)u=t[o]+i,l[0]===u?l[1]+=(e[o]-l[1])/++a:(a=0,l[1]+=r,l=[u,e[o]],s.push(l));return l[1]+=r,s}var nce=.5*Math.PI/180;function w0(t,e,i,r){i=i||25,r=Math.max(i,r||200);let n=m=>[m,t(m)],s=e[0],o=e[1],a=o-s,l=a/r,u=[n(s)],c=[];if(i===r){for(let m=1;m<r;++m)u.push(n(s+m/i*a));return u.push(n(o)),u}else{c.push(n(o));for(let m=i;--m>0;)c.push(n(s+m/i*a))}let h=u[0],d=c[c.length-1],p=1/a,f=sce(h[1],c);for(;d;){let m=n((h[0]+d[0])/2);m[0]-h[0]>=l&&oce(h,m,d,p,f)>nce?c.push(m):(h=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function sce(t,e){let i=t,r=t,n=e.length;for(let s=0;s<n;++s){let o=e[s][1];o<i&&(i=o),o>r&&(r=o)}return 1/(r-i)}function oce(t,e,i,r,n){let s=Math.atan2(n*(i[1]-t[1]),r*(i[0]-t[0])),o=Math.atan2(n*(e[1]-t[1]),r*(e[0]-t[0]));return Math.abs(s-o)}function ace(t){return e=>{let i=t.length,r=1,n=String(t[0](e));for(;r<i;++r)n+="|"+t[r](e);return n}}function q7(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:ace(t)}function dN(t,e,i){return i||t+(e?"_"+e:"")}var V7=()=>{},lce={init:V7,add:V7,rem:V7,idx:0},Ab={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.valid?t.sum:void 0,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||t.min===void 0)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||t.max===void 0)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,i)=>{e<t.min&&(t.argmin=i)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,i)=>{e>t.max&&(t.argmax=i)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(t,e)=>{t.exp=0,t.exp_r=e},value:t=>t.valid?t.exp*(1-t.exp_r)/(1-t.exp_r**t.valid):void 0,add:(t,e)=>t.exp=t.exp_r*t.exp+e,rem:(t,e)=>t.exp=(t.exp-e/t.exp_r**(t.valid-1))/t.exp_r},exponentialb:{value:t=>t.valid?t.exp*(1-t.exp_r):void 0,req:["exponential"],idx:1}},Rb=Object.keys(Ab).filter(t=>t!=="__count__");function uce(t,e){return(i,r)=>Ze({name:t,aggregate_param:r,out:i||t},lce,e)}[...Rb,"__count__"].forEach(t=>{Ab[t]=uce(t,Ab[t])});function fN(t,e,i){return Ab[t](i,e)}function pN(t,e){return t.idx-e.idx}function cce(t){let e={};t.forEach(r=>e[r.name]=r);let i=r=>{r.req&&r.req.forEach(n=>{e[n]||i(e[n]=Ab[n]())})};return t.forEach(i),Object.values(e).sort(pN)}function hce(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.aggregate_param==null?t.init(this):t.init(this,t.aggregate_param))}function dce(t,e){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(i=>i.add(this,t,e)))}function fce(t,e){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(i=>i.rem(this,t,e)))}function pce(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function mN(t,e){let i=e||$i,r=cce(t),n=t.slice().sort(pN);function s(o){this._ops=r,this._out=n,this.cell=o,this.init()}return s.prototype.init=hce,s.prototype.add=dce,s.prototype.rem=fce,s.prototype.set=pce,s.prototype.get=i,s.fields=t.map(o=>o.out),s}function G7(t){this._key=t?Mr(t):Ve,this.reset()}var rn=G7.prototype;rn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};rn.add=function(t){this._add.push(t)};rn.rem=function(t){this._rem.push(t)};rn.values=function(){if(this._get=null,this._rem.length===0)return this._add;let t=this._add,e=this._rem,i=this._key,r=t.length,n=e.length,s=Array(r-n),o={},a,l,u;for(a=0;a<n;++a)o[i(e[a])]=1;for(a=0,l=0;a<r;++a)o[i(u=t[a])]?o[i(u)]=0:s[l++]=u;return this._rem=[],this._add=s};rn.distinct=function(t){let e=this.values(),i={},r=e.length,n=0,s;for(;--r>=0;)s=t(e[r])+"",_e(i,s)||(i[s]=1,++n);return n};rn.extent=function(t){if(this._get!==t||!this._ext){let e=this.values(),i=xk(e,t);this._ext=[e[i[0]],e[i[1]]],this._get=t}return this._ext};rn.argmin=function(t){return this.extent(t)[0]||{}};rn.argmax=function(t){return this.extent(t)[1]||{}};rn.min=function(t){let e=this.extent(t)[0];return e!=null?t(e):void 0};rn.max=function(t){let e=this.extent(t)[1];return e!=null?t(e):void 0};rn.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=W2(this.values(),t),this._get=t),this._q};rn.q1=function(t){return this.quartile(t)[0]};rn.q2=function(t){return this.quartile(t)[1]};rn.q3=function(t){return this.quartile(t)[2]};rn.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=O7(this.values(),1e3,.05,t),this._get=t),this._ci};rn.ci0=function(t){return this.ci(t)[0]};rn.ci1=function(t){return this.ci(t)[1]};function dh(t){ee.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}dh.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Rb},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};we(dh,ee,{transform(t,e){let i=this,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=t.modified();return i.stamp=r.stamp,i.value&&(n||e.modified(i._inputs,!0))?(i._prev=i.value,i.value=n?i.init(t):Object.create(null),e.visit(e.SOURCE,s=>i.add(s))):(i.value=i.value||i.init(t),e.visit(e.REM,s=>i.rem(s)),e.visit(e.ADD,s=>i.add(s))),r.modifies(i._outputs),i._drop=t.drop!==!1,t.cross&&i._dims.length>1&&(i._drop=!1,i.cross()),e.clean()&&i._drop&&r.clean(!0).runAfter(()=>this.clean()),i.changes(r)},cross(){let t=this,e=t.value,i=t._dnames,r=i.map(()=>({})),n=i.length;function s(a){let l,u,c,h;for(l in a)for(c=a[l].tuple,u=0;u<n;++u)r[u][h=c[i[u]]]=h}s(t._prev),s(e);function o(a,l,u){let c=i[u],h=r[u++];for(let d in h){let p=a?a+"|"+d:d;l[c]=h[d],u<n?o(p,l,u):e[p]||t.cell(p,l)}}o("",{},0)},init(t){let e=this._inputs=[],i=this._outputs=[],r={};function n(v){let y=ve(vr(v)),x=y.length,_=0,w;for(;_<x;++_)r[w=y[_]]||(r[w]=1,e.push(w))}this._dims=ve(t.groupby),this._dnames=this._dims.map(v=>{let y=gi(v);return n(v),i.push(y),y}),this.cellkey=t.key?t.key:q7(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let s=t.fields||[null],o=t.ops||["count"],a=t.aggregate_params||[null],l=t.as||[],u=s.length,c={},h,d,p,f,m,g,b;for(u!==o.length&&te("Unmatched number of fields and aggregate ops."),b=0;b<u;++b){if(h=s[b],d=o[b],p=a[b]||null,h==null&&d!=="count"&&te("Null aggregate field specified."),m=gi(h),g=dN(d,m,l[b]),i.push(g),d==="count"){this._counts.push(g);continue}f=c[m],f||(n(h),f=c[m]=[],f.field=h,this._measures.push(f)),d!=="count"&&(this._countOnly=!1),f.push(fN(d,p,g))}return this._measures=this._measures.map(v=>mN(v,v.field)),Object.create(null)},cellkey:q7(),cell(t,e){let i=this.value[t];return i?i.num===0&&this._drop&&i.stamp<this.stamp?(i.stamp=this.stamp,this._adds[this._alen++]=i):i.stamp<this.stamp&&(i.stamp=this.stamp,this._mods[this._mlen++]=i):(i=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=i),i},newcell(t,e){let i={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){let r=this._measures,n=r.length;i.agg=Array(n);for(let s=0;s<n;++s)i.agg[s]=new r[s](i)}return i.store&&(i.data=new G7),i},newtuple(t,e){let i=this._dnames,r=this._dims,n=r.length,s={};for(let o=0;o<n;++o)s[i[o]]=r[o](t);return e?N2(e.tuple,s):_t(s)},clean(){let t=this.value;for(let e in t)t[e].num===0&&delete t[e]},add(t){let e=this.cellkey(t),i=this.cell(e,t);if(i.num+=1,this._countOnly)return;i.store&&i.data.add(t);let r=i.agg;for(let n=0,s=r.length;n<s;++n)r[n].add(r[n].get(t),t)},rem(t){let e=this.cellkey(t),i=this.cell(e,t);if(i.num-=1,this._countOnly)return;i.store&&i.data.rem(t);let r=i.agg;for(let n=0,s=r.length;n<s;++n)r[n].rem(r[n].get(t),t)},celltuple(t){let e=t.tuple,i=this._counts;t.store&&t.data.values();for(let r=0,n=i.length;r<n;++r)e[i[r]]=t.num;if(!this._countOnly){let r=t.agg;for(let n=0,s=r.length;n<s;++n)r[n].set(e)}return e},changes(t){let e=this._adds,i=this._mods,r=this._prev,n=this._drop,s=t.add,o=t.rem,a=t.mod,l,u,c,h;if(r)for(u in r)l=r[u],(!n||l.num)&&o.push(l.tuple);for(c=0,h=this._alen;c<h;++c)s.push(this.celltuple(e[c])),e[c]=null;for(c=0,h=this._mlen;c<h;++c)l=i[c],(l.num===0&&n?o:a).push(this.celltuple(l)),i[c]=null;return this._alen=this._mlen=0,this._prev=null,t}});var mce=1e-14;function X7(t){ee.call(this,null,t)}X7.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};we(X7,ee,{transform(t,e){let i=t.interval!==!1,r=this._bins(t),n=r.start,s=r.step,o=t.as||["bin0","bin1"],a=o[0],l=o[1],u;return t.modified()?(e=e.reflow(!0),u=e.SOURCE):u=e.modified(vr(t.field))?e.ADD_MOD:e.ADD,e.visit(u,i?c=>{let h=r(c);c[a]=h,c[l]=h==null?null:n+s*(1+(h-n)/s)}:c=>c[a]=r(c)),e.modifies(i?o:a)},_bins(t){if(this.value&&!t.modified())return this.value;let e=t.field,i=L7(t),r=i.step,n=i.start,s=n+Math.ceil((i.stop-n)/r)*r,o,a;(o=t.anchor)!=null&&(a=o-(n+r*Math.floor((o-n)/r)),n+=a,s+=a);let l=function(u){let c=Ki(e(u));return c==null?null:c<n?-1/0:c>s?1/0:(c=Math.max(n,Math.min(c,s-r)),n+r*Math.floor(mce+(c-n)/r))};return l.start=n,l.stop=i.stop,l.step=r,this.value=wn(l,vr(e),t.name||"bin_"+gi(e))}});function gN(t,e,i){let r=t,n=e||[],s=i||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[r(l)]=++a,size:()=>n.length,data:(l,u)=>(a&&(n=n.filter(c=>!o[r(c)]),o={},a=0),u&&l&&n.sort(l),s.length&&(n=l?Ek(l,n,s.sort(l)):n.concat(s),s=[]),n)}}function Y7(t){ee.call(this,[],t)}Y7.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};we(Y7,ee,{transform(t,e){let i=e.fork(e.ALL),r=gN(Ve,this.value,i.materialize(i.ADD).add),n=t.sort,s=e.changed()||n&&(t.modified("sort")||e.modified(n.fields));return i.visit(i.REM,r.remove),this.modified(s),this.value=i.source=r.data(Cl(n),s),e.source&&e.source.root&&(this.value.root=e.source.root),i}});function bN(t){Xt.call(this,null,gce,t)}we(bN,Xt);function gce(t){return this.value&&!t.modified()?this.value:U1(t.fields,t.orders)}function K7(t){ee.call(this,null,t)}K7.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function bce(t,e,i){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(i)}we(K7,ee,{transform(t,e){let i=h=>d=>{for(var p=bce(a(d),t.case,s)||[],f,m=0,g=p.length;m<g;++m)o.test(f=p[m])||h(f)},r=this._parameterCheck(t,e),n=this._counts,s=this._match,o=this._stop,a=t.field,l=t.as||["text","count"],u=i(h=>n[h]=1+(n[h]||0)),c=i(h=>n[h]-=1);return r?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,c)),this._finish(e,l)},_parameterCheck(t,e){let i=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),i=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),i=!0),(t.modified("field")||e.modified(t.field.fields))&&(i=!0),i&&(this._counts={}),i},_finish(t,e){let i=this._counts,r=this._tuples||(this._tuples={}),n=e[0],s=e[1],o=t.fork(t.NO_SOURCE|t.NO_FIELDS),a,l,u;for(a in i)l=r[a],u=i[a]||0,!l&&u?(r[a]=l=_t({}),l[n]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),i[a]=null,r[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(e)}});function J7(t){ee.call(this,null,t)}J7.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};we(J7,ee,{transform(t,e){let i=e.fork(e.NO_SOURCE),r=t.as||["a","b"],n=r[0],s=r[1],o=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter"),a=this.value;return o?(a&&(i.rem=a),a=e.materialize(e.SOURCE).source,i.add=this.value=vce(a,n,s,t.filter||yr)):i.mod=a,i.source=this.value,i.modifies(r)}});function vce(t,e,i,r){for(var n=[],s={},o=t.length,a=0,l,u;a<o;++a)for(s[e]=u=t[a],l=0;l<o;++l)s[i]=t[l],r(s)&&(n.push(_t(s)),s={},s[e]=u);return n}var cN={kde:G2,mixture:I7,normal:q2,lognormal:z7,uniform:B7},yce="distributions",hN="function",xce="field";function vN(t,e){let i=t[hN];_e(cN,i)||te("Unknown distribution function: "+i);let r=cN[i]();for(let n in t)n===xce?r.data((t.from||e()).map(t[n])):n===yce?r[n](t[n].map(s=>vN(s,e))):typeof r[n]===hN&&r[n](t[n]);return r}function Z7(t){ee.call(this,null,t)}var yN=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],wce={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:yN},{name:"weights",type:"number",array:!0}]};Z7.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:yN.concat(wce)},{name:"as",type:"string",array:!0,default:["value","density"]}]};we(Z7,ee,{transform(t,e){let i=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let r=vN(t.distribution,_ce(e)),n=t.steps||t.minsteps||25,s=t.steps||t.maxsteps||200,o=t.method||"pdf";o!=="pdf"&&o!=="cdf"&&te("Invalid density method: "+o),!t.extent&&!r.data&&te("Missing density extent parameter."),o=r[o];let a=t.as||["value","density"],l=t.extent||Kn(r.data()),u=w0(o,l,n,s).map(c=>{let h={};return h[a[0]]=c[0],h[a[1]]=c[1],_t(h)});this.value&&(i.rem=this.value),this.value=i.add=i.source=u}return i}});function _ce(t){return()=>t.materialize(t.SOURCE).source}function xN(t,e){return t?t.map((i,r)=>e[r]||gi(i)):null}function Q7(t,e,i){let r=[],n=h=>h(l),s,o,a,l,u,c;if(e==null)r.push(t.map(i));else for(s={},o=0,a=t.length;o<a;++o)l=t[o],u=e.map(n),c=s[u],c||(s[u]=c=[],c.dims=u,r.push(c)),c.push(i(l));return r}var wN="bin";function e8(t){ee.call(this,null,t)}e8.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:wN}]};var Cce=(t,e)=>Tu(Kn(t,e))/30;we(e8,ee,{transform(t,e){if(this.value&&!(t.modified()||e.changed()))return e;let i=e.materialize(e.SOURCE).source,r=Q7(e.source,t.groupby,$i),n=t.smooth||!1,s=t.field,o=t.step||Cce(i,s),a=Cl((f,m)=>s(f)-s(m)),l=t.as||wN,u=r.length,c=1/0,h=-1/0,d=0,p;for(;d<u;++d){let f=r[d].sort(a);p=-1;for(let m of P7(f,o,n,s))m<c&&(c=m),m>h&&(h=m),f[++p][l]=m}return this.value={start:c,stop:h,step:o},e.reflow(!0).modifies(l)}});function _N(t){Xt.call(this,null,Sce,t),this.modified(!0)}we(_N,Xt);function Sce(t){let e=t.expr;return this.value&&!t.modified("expr")?this.value:wn(i=>e(i,t),vr(e),gi(e))}function t8(t){ee.call(this,[void 0,void 0],t)}t8.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};we(t8,ee,{transform(t,e){let i=this.value,r=t.field,n=e.changed()||e.modified(r.fields)||t.modified("field"),s=i[0],o=i[1];if((n||s==null)&&(s=1/0,o=-1/0),e.visit(n?e.SOURCE:e.ADD,a=>{let l=Ki(r(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=gi(r);a&&(a=` for field "${a}"`),e.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function i8(t,e){Xt.call(this,t),this.parent=e,this.count=0}we(i8,Xt,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});function a_(t){ee.call(this,{},t),this._keys=eh();let e=this._targets=[];e.active=0,e.forEach=i=>{for(let r=0,n=e.active;r<n;++r)i(e[r],r,e)}}we(a_,ee,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,i,r){let n=this.value,s=_e(n,t)&&n[t],o,a;return s?s.value.stamp<i.stamp&&(s.init(i),this.activate(s)):(a=r||(a=this._group[t])&&a.tuple,o=i.dataflow,s=new i8(i.fork(i.NO_SOURCE),this),o.add(s).connect(e(o,t,a)),n[t]=s,this.activate(s)),s},clean(){let t=this.value,e=0;for(let i in t)if(t[i].count===0){let r=t[i].detachSubflow;r&&r(),delete t[i],++e}if(e){let i=this._targets.filter(r=>r&&r.count>0);this.initTargets(i)}},initTargets(t){let e=this._targets,i=e.length,r=t?t.length:0,n=0;for(;n<r;++n)e[n]=t[n];for(;n<i&&e[n]!=null;++n)e[n]=null;e.active=r},transform(t,e){let i=e.dataflow,r=t.key,n=t.subflow,s=this._keys,o=t.modified("key"),a=l=>this.subflow(l,n,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,l=>{let u=Ve(l),c=s.get(u);c!==void 0&&(s.delete(u),a(c).rem(l))}),e.visit(e.ADD,l=>{let u=r(l);s.set(Ve(l),u),a(u).add(l)}),o||e.modified(r.fields)?e.visit(e.MOD,l=>{let u=Ve(l),c=s.get(u),h=r(l);c===h?a(h).mod(l):(s.set(u,h),a(c).rem(l),a(h).add(l))}):e.changed(e.MOD)&&e.visit(e.MOD,l=>{a(s.get(Ve(l))).mod(l)}),o&&e.visit(e.REFLOW,l=>{let u=Ve(l),c=s.get(u),h=r(l);c!==h&&(s.set(u,h),a(c).rem(l),a(h).add(l))}),e.clean()?i.runAfter(()=>{this.clean(),s.clean()}):s.empty>i.cleanThreshold&&i.runAfter(s.clean),e}});function CN(t){Xt.call(this,null,Ece,t)}we(CN,Xt);function Ece(t){return this.value&&!t.modified()?this.value:K(t.name)?ve(t.name).map(e=>Mr(e)):Mr(t.name,t.as)}function r8(t){ee.call(this,eh(),t)}r8.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};we(r8,ee,{transform(t,e){let i=e.dataflow,r=this.value,n=e.fork(),s=n.add,o=n.rem,a=n.mod,l=t.expr,u=!0;e.visit(e.REM,h=>{let d=Ve(h);r.has(d)?r.delete(d):o.push(h)}),e.visit(e.ADD,h=>{l(h,t)?s.push(h):r.set(Ve(h),1)});function c(h){let d=Ve(h),p=l(h,t),f=r.get(d);p&&f?(r.delete(d),s.push(h)):!p&&!f?(r.set(d,1),o.push(h)):u&&p&&!f&&a.push(h)}return e.visit(e.MOD,c),t.modified()&&(u=!1,e.visit(e.REFLOW,c)),r.empty>i.cleanThreshold&&i.runAfter(r.clean),n}});function n8(t){ee.call(this,[],t)}n8.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};we(n8,ee,{transform(t,e){let i=e.fork(e.NO_SOURCE),r=t.fields,n=xN(r,t.as||[]),s=t.index||null,o=n.length;return i.rem=this.value,e.visit(e.SOURCE,a=>{let l=r.map(f=>f(a)),u=l.reduce((f,m)=>Math.max(f,m.length),0),c=0,h,d,p;for(;c<u;++c){for(d=B2(a),h=0;h<o;++h)d[n[h]]=(p=l[h][c])==null?null:p;s&&(d[s]=c),i.add.push(d)}}),this.value=i.source=i.add,s&&i.modifies(s),i.modifies(n)}});function s8(t){ee.call(this,[],t)}s8.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};we(s8,ee,{transform(t,e){let i=e.fork(e.NO_SOURCE),r=t.fields,n=r.map(gi),s=t.as||["key","value"],o=s[0],a=s[1],l=r.length;return i.rem=this.value,e.visit(e.SOURCE,u=>{for(let c=0,h;c<l;++c)h=B2(u),h[o]=n[c],h[a]=r[c](u),i.add.push(h)}),this.value=i.source=i.add,i.modifies(s)}});function o8(t){ee.call(this,null,t)}o8.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};we(o8,ee,{transform(t,e){let i=t.expr,r=t.as,n=t.modified(),s=t.initonly?e.ADD:n?e.SOURCE:e.modified(i.fields)||e.modified(r)?e.ADD_MOD:e.ADD;return n&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(s,o=>o[r]=i(o,t))}});function SN(t){ee.call(this,[],t)}we(SN,ee,{transform(t,e){let i=e.fork(e.ALL),r=t.generator,n=this.value,s=t.size-n.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=_t(r(t))),n.push(l);i.add=i.add.length?i.materialize(i.ADD).add.concat(o):o}else a=n.slice(0,-s),i.rem=i.rem.length?i.materialize(i.REM).rem.concat(a):a,n=n.slice(-s);return i.source=this.value=n,i}});var o_={value:"value",median:o0,mean:x2,min:qd,max:Ro},kce=[];function a8(t){ee.call(this,[],t)}a8.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Ace(t){var e=t.method||o_.value,i;if(o_[e]==null)te("Unrecognized imputation method: "+e);else return e===o_.value?(i=t.value!==void 0?t.value:0,()=>i):o_[e]}function Tce(t){let e=t.field;return i=>i?e(i):NaN}we(a8,ee,{transform(t,e){var i=e.fork(e.ALL),r=Ace(t),n=Tce(t),s=gi(t.field),o=gi(t.key),a=(t.groupby||[]).map(gi),l=Rce(e.source,t.groupby,t.key,t.keyvals),u=[],c=this.value,h=l.domain.length,d,p,f,m,g,b,v,y,x,_;for(g=0,y=l.length;g<y;++g)for(d=l[g],f=d.values,p=NaN,v=0;v<h;++v)if(d[v]==null){for(m=l.domain[v],_={_impute:!0},b=0,x=f.length;b<x;++b)_[a[b]]=f[b];_[o]=m,_[s]=Number.isNaN(p)?p=r(d,n):p,u.push(_t(_))}return u.length&&(i.add=i.materialize(i.ADD).add.concat(u)),c.length&&(i.rem=i.materialize(i.REM).rem.concat(c)),this.value=u,i}});function Rce(t,e,i,r){var n=b=>b(g),s=[],o=r?r.slice():[],a={},l={},u,c,h,d,p,f,m,g;for(o.forEach((b,v)=>a[b]=v+1),d=0,m=t.length;d<m;++d)g=t[d],f=i(g),p=a[f]||(a[f]=o.push(f)),c=(u=e?e.map(n):kce)+"",(h=l[c])||(h=l[c]=[],s.push(h),h.values=u),h[p-1]=g;return s.domain=o,s}function l8(t){dh.call(this,t)}l8.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Rb},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};we(l8,dh,{transform(t,e){let i=this,r=t.modified(),n;return i.value&&(r||e.modified(i._inputs,!0))?(n=i.value=r?i.init(t):{},e.visit(e.SOURCE,s=>i.add(s))):(n=i.value=i.value||this.init(t),e.visit(e.REM,s=>i.rem(s)),e.visit(e.ADD,s=>i.add(s))),i.changes(),e.visit(e.SOURCE,s=>{Ze(s,n[i.cellkey(s)].tuple)}),e.reflow(r).modifies(this._outputs)},changes(){let t=this._adds,e=this._mods,i,r;for(i=0,r=this._alen;i<r;++i)this.celltuple(t[i]),t[i]=null;for(i=0,r=this._mlen;i<r;++i)this.celltuple(e[i]),e[i]=null;this._alen=this._mlen=0}});function u8(t){ee.call(this,null,t)}u8.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};we(u8,ee,{transform(t,e){let i=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let r=e.materialize(e.SOURCE).source,n=Q7(r,t.groupby,t.field),s=(t.groupby||[]).map(gi),o=t.bandwidth,a=t.cumulative?"cdf":"pdf",l=t.as||["value","density"],u=[],c=t.extent,h=t.steps||t.minsteps||25,d=t.steps||t.maxsteps||200;a!=="pdf"&&a!=="cdf"&&te("Invalid density method: "+a),t.resolve==="shared"&&(c||(c=Kn(r,t.field)),h=d=t.steps||d),n.forEach(p=>{let f=G2(p,o)[a],m=t.counts?p.length:1,g=c||Kn(p);w0(f,g,h,d).forEach(b=>{let v={};for(let y=0;y<s.length;++y)v[s[y]]=p.dims[y];v[l[0]]=b[0],v[l[1]]=b[1]*m,u.push(_t(v))})}),this.value&&(i.rem=this.value),this.value=i.add=i.source=u}return i}});function EN(t){Xt.call(this,null,Dce,t)}we(EN,Xt);function Dce(t){return this.value&&!t.modified()?this.value:V1(t.fields,t.flat)}function kN(t){ee.call(this,[],t),this._pending=null}we(kN,ee,{transform(t,e){let i=e.dataflow;return this._pending?j7(this,e,this._pending):Mce(t)?e.StopPropagation:t.values?j7(this,e,i.parse(t.values,t.format)):t.async?{async:i.request(t.url,t.format).then(n=>(this._pending=ve(n.data),s=>s.touch(this)))}:i.request(t.url,t.format).then(r=>j7(this,e,ve(r.data)))}});function Mce(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function j7(t,e,i){i.forEach(_t);let r=e.fork(e.NO_FIELDS&e.NO_SOURCE);return r.rem=t.value,t.value=r.source=r.add=i,t._pending=null,r.rem.length&&r.clean(!0),r}function c8(t){ee.call(this,{},t)}c8.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};we(c8,ee,{transform(t,e){let i=t.fields,r=t.index,n=t.values,s=t.default==null?null:t.default,o=t.modified(),a=i.length,l=o?e.SOURCE:e.ADD,u=e,c=t.as,h,d,p;return n?(d=n.length,a>1&&!c&&te('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&te('The "as" parameter has too few output field names.'),c=c||n.map(gi),h=function(f){for(var m=0,g=0,b,v;m<a;++m)if(v=r.get(i[m](f)),v==null)for(b=0;b<d;++b,++g)f[c[g]]=s;else for(b=0;b<d;++b,++g)f[c[g]]=n[b](v)}):(c||te("Missing output field names."),h=function(f){for(var m=0,g;m<a;++m)g=r.get(i[m](f)),f[c[m]]=g??s}),o?u=e.reflow(!0):(p=i.some(f=>e.modified(f.fields)),l|=p?e.MOD:0),e.visit(l,h),u.modifies(c)}});function AN(t){Xt.call(this,null,Fce,t)}we(AN,Xt);function Fce(t){if(this.value&&!t.modified())return this.value;let e=t.extents,i=e.length,r=1/0,n=-1/0,s,o;for(s=0;s<i;++s)o=e[s],o[0]<r&&(r=o[0]),o[1]>n&&(n=o[1]);return[r,n]}function TN(t){Xt.call(this,null,Lce,t)}we(TN,Xt);function Lce(t){return this.value&&!t.modified()?this.value:t.values.reduce((e,i)=>e.concat(i),[])}function RN(t){ee.call(this,null,t)}we(RN,ee,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function h8(t){dh.call(this,t)}h8.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Rb,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};we(h8,dh,{_transform:dh.prototype.transform,transform(t,e){return this._transform(Oce(t,e),e)}});function Oce(t,e){let i=t.field,r=t.value,n=(t.op==="count"?"__count__":t.op)||"sum",s=vr(i).concat(vr(r)),o=zce(i,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:o.map(()=>n),fields:o.map(a=>Pce(a,i,r,s)),as:o.map(a=>a+""),modified:t.modified.bind(t)}}function Pce(t,e,i,r){return wn(n=>e(n)===t?i(n):NaN,r,t+"")}function zce(t,e,i){let r={},n=[];return i.visit(i.SOURCE,s=>{let o=t(s);r[o]||(r[o]=1,n.push(o))}),n.sort(Au),e?n.slice(0,e):n}function DN(t){a_.call(this,t)}we(DN,a_,{transform(t,e){let i=t.subflow,r=t.field,n=s=>this.subflow(Ve(s),i,e,s);return(t.modified("field")||r&&e.modified(vr(r)))&&te("PreFacet does not support field modification."),this.initTargets(),r?(e.visit(e.MOD,s=>{let o=n(s);r(s).forEach(a=>o.mod(a))}),e.visit(e.ADD,s=>{let o=n(s);r(s).forEach(a=>o.add(_t(a)))}),e.visit(e.REM,s=>{let o=n(s);r(s).forEach(a=>o.rem(a))})):(e.visit(e.MOD,s=>n(s).mod(s)),e.visit(e.ADD,s=>n(s).add(s)),e.visit(e.REM,s=>n(s).rem(s))),e.clean()&&e.runAfter(()=>this.clean()),e}});function d8(t){ee.call(this,null,t)}d8.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};we(d8,ee,{transform(t,e){let i=e.fork(e.NO_SOURCE),r=t.fields,n=xN(t.fields,t.as||[]),s=r?(a,l)=>Ice(a,l,r,n):rf,o;return this.value?o=this.value:(e=e.addAll(),o=this.value={}),e.visit(e.REM,a=>{let l=Ve(a);i.rem.push(o[l]),o[l]=null}),e.visit(e.ADD,a=>{let l=s(a,_t({}));o[Ve(a)]=l,i.add.push(l)}),e.visit(e.MOD,a=>{i.mod.push(s(a,o[Ve(a)]))}),i}});function Ice(t,e,i,r){for(let n=0,s=i.length;n<s;++n)e[r[n]]=i[n](t);return e}function MN(t){ee.call(this,null,t)}we(MN,ee,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function f8(t){ee.call(this,null,t)}f8.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var Bce=1e-14;we(f8,ee,{transform(t,e){let i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return i.source=this.value,i;let n=e.materialize(e.SOURCE).source,s=Q7(n,t.groupby,t.field),o=(t.groupby||[]).map(gi),a=[],l=t.step||.01,u=t.probs||Ji(l/2,1-Bce,l),c=u.length;return s.forEach(h=>{let d=U2(h,u);for(let p=0;p<c;++p){let f={};for(let m=0;m<o.length;++m)f[o[m]]=h.dims[m];f[r[0]]=u[p],f[r[1]]=d[p],a.push(_t(f))}}),this.value&&(i.rem=this.value),this.value=i.add=i.source=a,i}});function FN(t){ee.call(this,null,t)}we(FN,ee,{transform(t,e){let i,r;return this.value?r=this.value:(i=e=e.addAll(),r=this.value={}),t.derive&&(i=e.fork(e.NO_SOURCE),e.visit(e.REM,n=>{let s=Ve(n);i.rem.push(r[s]),r[s]=null}),e.visit(e.ADD,n=>{let s=B2(n);r[Ve(n)]=s,i.add.push(s)}),e.visit(e.MOD,n=>{let s=r[Ve(n)];for(let o in n)s[o]=n[o],i.modifies(o);i.mod.push(s)})),i}});function p8(t){ee.call(this,[],t),this.count=0}p8.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};we(p8,ee,{transform(t,e){let i=e.fork(e.NO_SOURCE),r=t.modified("size"),n=t.size,s=this.value.reduce((c,h)=>(c[Ve(h)]=1,c),{}),o=this.value,a=this.count,l=0;function u(c){let h,d;o.length<n?o.push(c):(d=~~((a+1)*is()),d<o.length&&d>=l&&(h=o[d],s[Ve(h)]&&i.rem.push(h),o[d]=c)),++a}if(e.rem.length&&(e.visit(e.REM,c=>{let h=Ve(c);s[h]&&(s[h]=-1,i.rem.push(c)),--a}),o=o.filter(c=>s[Ve(c)]!==-1)),(e.rem.length||r)&&o.length<n&&e.source&&(l=a=o.length,e.visit(e.SOURCE,c=>{s[Ve(c)]||u(c)}),l=-1),r&&o.length>n){let c=o.length-n;for(let h=0;h<c;++h)s[Ve(o[h])]=-1,i.rem.push(o[h]);o=o.slice(c)}return e.mod.length&&e.visit(e.MOD,c=>{s[Ve(c)]&&i.mod.push(c)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||l<0)&&(i.add=o.filter(c=>!s[Ve(c)])),this.count=a,this.value=i.source=o,i}});function m8(t){ee.call(this,null,t)}m8.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};we(m8,ee,{transform(t,e){if(this.value&&!t.modified())return;let i=e.materialize().fork(e.MOD),r=t.as||"data";return i.rem=this.value?e.rem.concat(this.value):e.rem,this.value=Ji(t.start,t.stop,t.step||1).map(n=>{let s={};return s[r]=n,_t(s)}),i.add=e.add.concat(this.value),i}});function LN(t){ee.call(this,null,t),this.modified(!0)}we(LN,ee,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function g8(t){ee.call(this,null,t)}var ON=["unit0","unit1"];g8.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:k2,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:ON}]};we(g8,ee,{transform(t,e){let i=t.field,r=t.interval!==!1,n=t.timezone==="utc",s=this._floor(t,e),o=(n?Ou:Lu)(s.unit).offset,a=t.as||ON,l=a[0],u=a[1],c=s.step,h=s.start||1/0,d=s.stop||-1/0,p=e.ADD;return(t.modified()||e.changed(e.REM)||e.modified(vr(i)))&&(e=e.reflow(!0),p=e.SOURCE,h=1/0,d=-1/0),e.visit(p,f=>{let m=i(f),g,b;m==null?(f[l]=null,r&&(f[u]=null)):(f[l]=g=b=s(m),r&&(f[u]=b=o(g,c)),g<h&&(h=g),b>d&&(d=b))}),s.start=h,s.stop=d,e.modifies(r?a:l)},_floor(t,e){let i=t.timezone==="utc",{units:r,step:n}=t.units?{units:t.units,step:t.step||1}:g7({extent:t.extent||Kn(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),s=A2(r),o=this.value||{},a=(i?h7:c7)(s,n);return a.unit=ht(s),a.units=s,a.step=n,a.start=o.start,a.stop=o.stop,this.value=a}});function PN(t){ee.call(this,eh(),t)}we(PN,ee,{transform(t,e){let i=e.dataflow,r=t.field,n=this.value,s=a=>n.set(r(a),a),o=!0;return t.modified("field")||e.modified(r.fields)?(n.clear(),e.visit(e.SOURCE,s)):e.changed()?(e.visit(e.REM,a=>n.delete(r(a))),e.visit(e.ADD,s)):o=!1,this.modified(o),n.empty>i.cleanThreshold&&i.runAfter(n.clean),e.fork()}});function zN(t){ee.call(this,null,t)}we(zN,ee,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(Cl(t.sort)):e.source).map(t.field))}});function Nce(t,e,i,r){let n=Tb[t](e,i);return{init:n.init||ga,update:function(s,o){o[r]=n.next(s)}}}var Tb={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{let i=e.index,r=e.data;return i&&e.compare(r[i-1],r[i])?t=i+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{let i=e.index,r=e.data;return i&&e.compare(r[i-1],r[i])?++t:t}}},percent_rank:function(){let t=Tb.rank(),e=t.next;return{init:t.init,next:i=>(e(i)-1)/(i.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{let i=e.data,r=e.compare,n=e.index;if(t<n){for(;n+1<i.length&&!r(i[n],i[n+1]);)++n;t=n}return(1+t)/i.length}}},ntile:function(t,e){e=+e,e>0||te("ntile num must be greater than zero.");let i=Tb.cume_dist(),r=i.next;return{init:i.init,next:n=>Math.ceil(e*r(n))}},lag:function(t,e){return e=+e||1,{next:i=>{let r=i.index-e;return r>=0?t(i.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:i=>{let r=i.index+e,n=i.data;return r<n.length?t(n[r]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||te("nth_value nth must be greater than zero."),{next:i=>{let r=i.i0+(e-1);return r<i.i1?t(i.data[r]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:i=>{let r=t(i.data[i.index]);return r!=null?e=r:e}}},next_value:function(t){let e,i;return{init:()=>(e=null,i=-1),next:r=>{let n=r.data;return r.index<=i?e:(i=$ce(t,n,r.index))<0?(i=n.length,e=null):e=t(n[i])}}}};function $ce(t,e,i){for(let r=e.length;i<r;++i)if(t(e[i])!=null)return i;return-1}var Hce=Object.keys(Tb);function IN(t){let e=ve(t.ops),i=ve(t.fields),r=ve(t.params),n=ve(t.aggregate_params),s=ve(t.as),o=this.outputs=[],a=this.windows=[],l={},u={},c=[],h=[],d=!0;function p(f){ve(vr(f)).forEach(m=>l[m]=1)}p(t.sort),e.forEach((f,m)=>{let g=i[m],b=r[m],v=n[m]||null,y=gi(g),x=dN(f,y,s[m]);if(p(g),o.push(x),_e(Tb,f))a.push(Nce(f,g,b,x));else{if(g==null&&f!=="count"&&te("Null aggregate field specified."),f==="count"){c.push(x);return}d=!1;let _=u[y];_||(_=u[y]=[],_.field=g,h.push(_)),_.push(fN(f,v,x))}}),(c.length||h.length)&&(this.cell=Uce(h,c,d)),this.inputs=Object.keys(l)}var BN=IN.prototype;BN.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};BN.update=function(t,e){let i=this.cell,r=this.windows,n=t.data,s=r&&r.length,o;if(i){for(o=t.p0;o<t.i0;++o)i.rem(n[o]);for(o=t.p1;o<t.i1;++o)i.add(n[o]);i.set(e)}for(o=0;o<s;++o)r[o].update(t,e)};function Uce(t,e,i){t=t.map(l=>mN(l,l.field));let r={num:0,agg:null,store:!1,count:e};if(!i)for(var n=t.length,s=r.agg=Array(n),o=0;o<n;++o)s[o]=new t[o](r);if(r.store)var a=r.data=new G7;return r.add=function(l){if(r.num+=1,!i){a&&a.add(l);for(let u=0;u<n;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!i){a&&a.rem(l);for(let u=0;u<n;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=e.length;u<c;++u)l[e[u]]=r.num;if(!i)for(u=0,c=s.length;u<c;++u)s[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<n;++l)s[l].init()},r}function b8(t){ee.call(this,{},t),this._mlen=0,this._mods=[]}b8.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Hce.concat(Rb)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};we(b8,ee,{transform(t,e){this.stamp=e.stamp;let i=t.modified(),r=Cl(t.sort),n=q7(t.groupby),s=a=>this.group(n(a)),o=this.state;(!o||i)&&(o=this.state=new IN(t)),i||e.modified(o.inputs)?(this.value={},e.visit(e.SOURCE,a=>s(a).add(a))):(e.visit(e.REM,a=>s(a).remove(a)),e.visit(e.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)Wce(this._mods[a],o,r,t);return this._mlen=0,this._mods=[],e.reflow(i).modifies(o.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=gN(Ve),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}});function Wce(t,e,i,r){let n=r.sort,s=n&&!r.ignorePeers,o=r.frame||[null,0],a=t.data(i),l=a.length,u=s?to(n):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:n||wi(-1)};e.init();for(let h=0;h<l;++h)Vce(c,o,h,l),s&&jce(c,u),e.update(c,a[h])}function Vce(t,e,i,r){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,i-Math.abs(e[0])),t.i1=e[1]==null?r:Math.min(r,i+Math.abs(e[1])+1),t.index=i}function jce(t,e){let i=t.i0,r=t.i1-1,n=t.compare,s=t.data,o=s.length-1;i>0&&!n(s[i],s[i-1])&&(t.i0=e.left(s,s[i])),r<o&&!n(s[r],s[r+1])&&(t.i1=e.right(s,s[r]))}var M9={};br(M9,{bound:()=>tW,identifier:()=>D9,mark:()=>iW,overlap:()=>rW,render:()=>sW,viewlayout:()=>aW});function Dt(t){return function(){return t}}var y8=Math.abs,nn=Math.atan2,fh=Math.cos,NN=Math.max,l_=Math.min,xa=Math.sin,Nu=Math.sqrt,Or=1e-12,ph=Math.PI,Db=ph/2,u_=2*ph;function $N(t){return t>1?0:t<-1?ph:Math.acos(t)}function x8(t){return t>=1?Db:t<=-1?-Db:Math.asin(t)}var w8=Math.PI,_8=2*w8,nf=1e-6,qce=_8-nf;function HN(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function Gce(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return HN;let i=10**e;return function(r){this._+=r[0];for(let n=1,s=r.length;n<s;++n)this._+=Math.round(arguments[n]*i)/i+r[n]}}var sf=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?HN:Gce(e)}moveTo(e,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,i){this._append`L${this._x1=+e},${this._y1=+i}`}quadraticCurveTo(e,i,r,n){this._append`Q${+e},${+i},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,i,r,n,s,o){this._append`C${+e},${+i},${+r},${+n},${this._x1=+s},${this._y1=+o}`}arcTo(e,i,r,n,s){if(e=+e,i=+i,r=+r,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,u=n-i,c=o-e,h=a-i,d=c*c+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=i}`;else if(d>nf)if(!(Math.abs(h*l-u*c)>nf)||!s)this._append`L${this._x1=e},${this._y1=i}`;else{let p=r-o,f=n-a,m=l*l+u*u,g=p*p+f*f,b=Math.sqrt(m),v=Math.sqrt(d),y=s*Math.tan((w8-Math.acos((m+d-g)/(2*b*v)))/2),x=y/v,_=y/b;Math.abs(x-1)>nf&&this._append`L${e+x*c},${i+x*h}`,this._append`A${s},${s},0,0,${+(h*p>c*f)},${this._x1=e+_*l},${this._y1=i+_*u}`}}arc(e,i,r,n,s,o){if(e=+e,i=+i,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(n),l=r*Math.sin(n),u=e+a,c=i+l,h=1^o,d=o?n-s:s-n;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>nf||Math.abs(this._y1-c)>nf)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%_8+_8),d>qce?this._append`A${r},${r},0,1,${h},${e-a},${i-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=c}`:d>nf&&this._append`A${r},${r},0,${+(d>=w8)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=i+r*Math.sin(s)}`)}rect(e,i,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}};function of(){return new sf}of.prototype=sf.prototype;function mh(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(i==null)e=null;else{let r=Math.floor(i);if(!(r>=0))throw new RangeError(`invalid digits: ${i}`);e=r}return t},()=>new sf(e)}function Xce(t){return t.innerRadius}function Yce(t){return t.outerRadius}function Kce(t){return t.startAngle}function Jce(t){return t.endAngle}function Zce(t){return t&&t.padAngle}function Qce(t,e,i,r,n,s,o,a){var l=i-t,u=r-e,c=o-n,h=a-s,d=h*l-c*u;if(!(d*d<Or))return d=(c*(e-s)-h*(t-n))/d,[t+d*l,e+d*u]}function c_(t,e,i,r,n,s,o){var a=t-i,l=e-r,u=(o?s:-s)/Nu(a*a+l*l),c=u*l,h=-u*a,d=t+c,p=e+h,f=i+c,m=r+h,g=(d+f)/2,b=(p+m)/2,v=f-d,y=m-p,x=v*v+y*y,_=n-s,w=d*m-f*p,C=(y<0?-1:1)*Nu(NN(0,_*_*x-w*w)),E=(w*y-v*C)/x,A=(-w*v-y*C)/x,D=(w*y+v*C)/x,R=(-w*v+y*C)/x,I=E-g,z=A-b,B=D-g,N=R-b;return I*I+z*z>B*B+N*N&&(E=D,A=R),{cx:E,cy:A,x01:-c,y01:-h,x11:E*(n/_-1),y11:A*(n/_-1)}}function C8(){var t=Xce,e=Yce,i=Dt(0),r=null,n=Kce,s=Jce,o=Zce,a=null,l=mh(u);function u(){var c,h,d=+t.apply(this,arguments),p=+e.apply(this,arguments),f=n.apply(this,arguments)-Db,m=s.apply(this,arguments)-Db,g=y8(m-f),b=m>f;if(a||(a=c=l()),p<d&&(h=p,p=d,d=h),!(p>Or))a.moveTo(0,0);else if(g>u_-Or)a.moveTo(p*fh(f),p*xa(f)),a.arc(0,0,p,f,m,!b),d>Or&&(a.moveTo(d*fh(m),d*xa(m)),a.arc(0,0,d,m,f,b));else{var v=f,y=m,x=f,_=m,w=g,C=g,E=o.apply(this,arguments)/2,A=E>Or&&(r?+r.apply(this,arguments):Nu(d*d+p*p)),D=l_(y8(p-d)/2,+i.apply(this,arguments)),R=D,I=D,z,B;if(A>Or){var N=x8(A/d*xa(E)),H=x8(A/p*xa(E));(w-=N*2)>Or?(N*=b?1:-1,x+=N,_-=N):(w=0,x=_=(f+m)/2),(C-=H*2)>Or?(H*=b?1:-1,v+=H,y-=H):(C=0,v=y=(f+m)/2)}var T=p*fh(v),L=p*xa(v),P=d*fh(_),W=d*xa(_);if(D>Or){var Y=p*fh(y),ne=p*xa(y),ke=d*fh(x),Ae=d*xa(x),G;if(g<ph)if(G=Qce(T,L,ke,Ae,Y,ne,P,W)){var $=T-G[0],le=L-G[1],me=Y-G[0],ie=ne-G[1],ue=1/xa($N(($*me+le*ie)/(Nu($*$+le*le)*Nu(me*me+ie*ie)))/2),Me=Nu(G[0]*G[0]+G[1]*G[1]);R=l_(D,(d-Me)/(ue-1)),I=l_(D,(p-Me)/(ue+1))}else R=I=0}C>Or?I>Or?(z=c_(ke,Ae,T,L,p,I,b),B=c_(Y,ne,P,W,p,I,b),a.moveTo(z.cx+z.x01,z.cy+z.y01),I<D?a.arc(z.cx,z.cy,I,nn(z.y01,z.x01),nn(B.y01,B.x01),!b):(a.arc(z.cx,z.cy,I,nn(z.y01,z.x01),nn(z.y11,z.x11),!b),a.arc(0,0,p,nn(z.cy+z.y11,z.cx+z.x11),nn(B.cy+B.y11,B.cx+B.x11),!b),a.arc(B.cx,B.cy,I,nn(B.y11,B.x11),nn(B.y01,B.x01),!b))):(a.moveTo(T,L),a.arc(0,0,p,v,y,!b)):a.moveTo(T,L),!(d>Or)||!(w>Or)?a.lineTo(P,W):R>Or?(z=c_(P,W,Y,ne,d,-R,b),B=c_(T,L,ke,Ae,d,-R,b),a.lineTo(z.cx+z.x01,z.cy+z.y01),R<D?a.arc(z.cx,z.cy,R,nn(z.y01,z.x01),nn(B.y01,B.x01),!b):(a.arc(z.cx,z.cy,R,nn(z.y01,z.x01),nn(z.y11,z.x11),!b),a.arc(0,0,d,nn(z.cy+z.y11,z.cx+z.x11),nn(B.cy+B.y11,B.cx+B.x11),b),a.arc(B.cx,B.cy,R,nn(B.y11,B.x11),nn(B.y01,B.x01),!b))):a.arc(0,0,d,_,x,b)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+n.apply(this,arguments)+ +s.apply(this,arguments))/2-ph/2;return[fh(h)*c,xa(h)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Dt(+c),u):t},u.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Dt(+c),u):e},u.cornerRadius=function(c){return arguments.length?(i=typeof c=="function"?c:Dt(+c),u):i},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Dt(+c),u):r},u.startAngle=function(c){return arguments.length?(n=typeof c=="function"?c:Dt(+c),u):n},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Dt(+c),u):s},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Dt(+c),u):o},u.context=function(c){return arguments.length?(a=c??null,u):a},u}var ZHe=Array.prototype.slice;function h_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function UN(t){this._context=t}UN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function af(t){return new UN(t)}function d_(t){return t[0]}function f_(t){return t[1]}function Mb(t,e){var i=Dt(!0),r=null,n=af,s=null,o=mh(a);t=typeof t=="function"?t:t===void 0?d_:Dt(t),e=typeof e=="function"?e:e===void 0?f_:Dt(e);function a(l){var u,c=(l=h_(l)).length,h,d=!1,p;for(r==null&&(s=n(p=o())),u=0;u<=c;++u)!(u<c&&i(h=l[u],u,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(h,u,l),+e(h,u,l));if(p)return s=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Dt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Dt(+l),a):e},a.defined=function(l){return arguments.length?(i=typeof l=="function"?l:Dt(!!l),a):i},a.curve=function(l){return arguments.length?(n=l,r!=null&&(s=n(r)),a):n},a.context=function(l){return arguments.length?(l==null?r=s=null:s=n(r=l),a):r},a}function p_(t,e,i){var r=null,n=Dt(!0),s=null,o=af,a=null,l=mh(u);t=typeof t=="function"?t:t===void 0?d_:Dt(+t),e=typeof e=="function"?e:e===void 0?Dt(0):Dt(+e),i=typeof i=="function"?i:i===void 0?f_:Dt(+i);function u(h){var d,p,f,m=(h=h_(h)).length,g,b=!1,v,y=new Array(m),x=new Array(m);for(s==null&&(a=o(v=l())),d=0;d<=m;++d){if(!(d<m&&n(g=h[d],d,h))===b)if(b=!b)p=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),f=d-1;f>=p;--f)a.point(y[f],x[f]);a.lineEnd(),a.areaEnd()}b&&(y[d]=+t(g,d,h),x[d]=+e(g,d,h),a.point(r?+r(g,d,h):y[d],i?+i(g,d,h):x[d]))}if(v)return a=null,v+""||null}function c(){return Mb().defined(n).curve(o).context(s)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Dt(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Dt(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Dt(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Dt(+h),i=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Dt(+h),u):e},u.y1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:Dt(+h),u):i},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(i)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(h){return arguments.length?(n=typeof h=="function"?h:Dt(!!h),u):n},u.curve=function(h){return arguments.length?(o=h,s!=null&&(a=o(s)),u):o},u.context=function(h){return arguments.length?(h==null?s=a=null:a=o(s=h),u):s},u}var WN={draw(t,e){let i=Nu(e/ph);t.moveTo(i,0),t.arc(0,0,i,0,u_)}};function m_(t,e){let i=null,r=mh(n);t=typeof t=="function"?t:Dt(t||WN),e=typeof e=="function"?e:Dt(e===void 0?64:+e);function n(){let s;if(i||(i=s=r()),t.apply(this,arguments).draw(i,+e.apply(this,arguments)),s)return i=null,s+""||null}return n.type=function(s){return arguments.length?(t=typeof s=="function"?s:Dt(s),n):t},n.size=function(s){return arguments.length?(e=typeof s=="function"?s:Dt(+s),n):e},n.context=function(s){return arguments.length?(i=s??null,n):i},n}function Oo(){}function _0(t,e,i){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+i)/6)}function Fb(t){this._context=t}Fb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function S8(t){return new Fb(t)}function VN(t){this._context=t}VN.prototype={areaStart:Oo,areaEnd:Oo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function E8(t){return new VN(t)}function jN(t){this._context=t}jN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(i,r):this._context.moveTo(i,r);break;case 3:this._point=4;default:_0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function k8(t){return new jN(t)}function qN(t,e){this._basis=new Fb(t),this._beta=e}qN.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,i=t.length-1;if(i>0)for(var r=t[0],n=e[0],s=t[i]-r,o=e[i]-n,a=-1,l;++a<=i;)l=a/i,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(n+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var A8=(function t(e){function i(r){return e===1?new Fb(r):new qN(r,e)}return i.beta=function(r){return t(+r)},i})(.85);function C0(t,e,i){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-i),t._x2,t._y2)}function g_(t,e){this._context=t,this._k=(1-e)/6}g_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:C0(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:C0(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var T8=(function t(e){function i(r){return new g_(r,e)}return i.tension=function(r){return t(+r)},i})(0);function b_(t,e){this._context=t,this._k=(1-e)/6}b_.prototype={areaStart:Oo,areaEnd:Oo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:C0(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var R8=(function t(e){function i(r){return new b_(r,e)}return i.tension=function(r){return t(+r)},i})(0);function v_(t,e){this._context=t,this._k=(1-e)/6}v_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:C0(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var D8=(function t(e){function i(r){return new v_(r,e)}return i.tension=function(r){return t(+r)},i})(0);function Lb(t,e,i){var r=t._x1,n=t._y1,s=t._x2,o=t._y2;if(t._l01_a>Or){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,n=(n*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Or){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-i*t._l12_2a)/c}t._context.bezierCurveTo(r,n,s,o,t._x2,t._y2)}function GN(t,e){this._context=t,this._alpha=e}GN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Lb(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var M8=(function t(e){function i(r){return e?new GN(r,e):new g_(r,0)}return i.alpha=function(r){return t(+r)},i})(.5);function XN(t,e){this._context=t,this._alpha=e}XN.prototype={areaStart:Oo,areaEnd:Oo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Lb(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var F8=(function t(e){function i(r){return e?new XN(r,e):new b_(r,0)}return i.alpha=function(r){return t(+r)},i})(.5);function YN(t,e){this._context=t,this._alpha=e}YN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Lb(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var L8=(function t(e){function i(r){return e?new YN(r,e):new v_(r,0)}return i.alpha=function(r){return t(+r)},i})(.5);function KN(t){this._context=t}KN.prototype={areaStart:Oo,areaEnd:Oo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function O8(t){return new KN(t)}function JN(t){return t<0?-1:1}function ZN(t,e,i){var r=t._x1-t._x0,n=e-t._x1,s=(t._y1-t._y0)/(r||n<0&&-0),o=(i-t._y1)/(n||r<0&&-0),a=(s*n+o*r)/(r+n);return(JN(s)+JN(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function QN(t,e){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function P8(t,e,i){var r=t._x0,n=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,n+a*e,s-a,o-a*i,s,o)}function y_(t){this._context=t}y_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:P8(this,this._t0,QN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var i=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,P8(this,QN(this,i=ZN(this,t,e)),i);break;default:P8(this,this._t0,i=ZN(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=i}}};function e$(t){this._context=new t$(t)}(e$.prototype=Object.create(y_.prototype)).point=function(t,e){y_.prototype.point.call(this,e,t)};function t$(t){this._context=t}t$.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,i,r,n,s){this._context.bezierCurveTo(e,t,r,i,s,n)}};function z8(t){return new y_(t)}function I8(t){return new e$(t)}function r$(t){this._context=t}r$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,i=t.length;if(i)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),i===2)this._context.lineTo(t[1],e[1]);else for(var r=i$(t),n=i$(e),s=0,o=1;o<i;++s,++o)this._context.bezierCurveTo(r[0][s],n[0][s],r[1][s],n[1][s],t[o],e[o]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function i$(t){var e,i=t.length-1,r,n=new Array(i),s=new Array(i),o=new Array(i);for(n[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)n[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(n[i-1]=2,s[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)r=n[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(n[i-1]=o[i-1]/s[i-1],e=i-2;e>=0;--e)n[e]=(o[e]-n[e+1])/s[e];for(s[i-1]=(t[i]+n[i-1])/2,e=0;e<i-1;++e)s[e]=2*t[e+1]-n[e+1];return[n,s]}function B8(t){return new r$(t)}function x_(t,e){this._context=t,this._t=e}x_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,e)}break}}this._x=t,this._y=e}};function N8(t){return new x_(t,.5)}function $8(t){return new x_(t,0)}function H8(t){return new x_(t,1)}function Po(t,e){if(typeof document<"u"&&document.createElement){let i=document.createElement("canvas");if(i&&i.getContext)return i.width=t,i.height=e,i}return null}var n$=()=>typeof Image<"u"?Image:null;function lr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Sl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}var S0=Symbol("implicit");function lf(){var t=new s0,e=[],i=[],r=S0;function n(s){let o=t.get(s);if(o===void 0){if(r!==S0)return r;t.set(s,o=e.push(s)-1)}return i[o%i.length]}return n.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new s0;for(let o of s)t.has(o)||t.set(o,e.push(o)-1);return n},n.range=function(s){return arguments.length?(i=Array.from(s),n):i.slice()},n.unknown=function(s){return arguments.length?(r=s,n):r},n.copy=function(){return lf(e,i).unknown(r)},lr.apply(n,arguments),n}var tA={};br(tA,{interpolate:()=>Sn,interpolateArray:()=>D$,interpolateBasis:()=>T_,interpolateBasisClosed:()=>R_,interpolateCubehelix:()=>X$,interpolateCubehelixLong:()=>Y$,interpolateDate:()=>M_,interpolateDiscrete:()=>M$,interpolateHcl:()=>j$,interpolateHclLong:()=>q$,interpolateHsl:()=>U$,interpolateHslLong:()=>W$,interpolateHue:()=>F$,interpolateLab:()=>eA,interpolateNumber:()=>En,interpolateNumberArray:()=>R0,interpolateObject:()=>F_,interpolateRgb:()=>Ib,interpolateRgbBasis:()=>T$,interpolateRgbBasisClosed:()=>R$,interpolateRound:()=>Tl,interpolateString:()=>L_,interpolateTransformCss:()=>I$,interpolateTransformSvg:()=>B$,interpolateZoom:()=>$$,piecewise:()=>mf,quantize:()=>K$});function $u(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function gh(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function kl(){}var bh=.7,hf=1/bh,E0="\\s*([+-]?\\d+)\\s*",Ob="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",El="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",the=/^#([0-9a-f]{3,8})$/,ihe=new RegExp(`^rgb\\(${E0},${E0},${E0}\\)$`),rhe=new RegExp(`^rgb\\(${El},${El},${El}\\)$`),nhe=new RegExp(`^rgba\\(${E0},${E0},${E0},${Ob}\\)$`),she=new RegExp(`^rgba\\(${El},${El},${El},${Ob}\\)$`),ohe=new RegExp(`^hsl\\(${Ob},${El},${El}\\)$`),ahe=new RegExp(`^hsla\\(${Ob},${El},${El},${Ob}\\)$`),s$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$u(kl,vh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:o$,formatHex:o$,formatHex8:lhe,formatHsl:uhe,formatRgb:a$,toString:a$});function o$(){return this.rgb().formatHex()}function lhe(){return this.rgb().formatHex8()}function uhe(){return f$(this).formatHsl()}function a$(){return this.rgb().formatRgb()}function vh(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=the.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?l$(e):i===3?new ur(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?w_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?w_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ihe.exec(t))?new ur(e[1],e[2],e[3],1):(e=rhe.exec(t))?new ur(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nhe.exec(t))?w_(e[1],e[2],e[3],e[4]):(e=she.exec(t))?w_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ohe.exec(t))?h$(e[1],e[2]/100,e[3]/100,1):(e=ahe.exec(t))?h$(e[1],e[2]/100,e[3]/100,e[4]):s$.hasOwnProperty(t)?l$(s$[t]):t==="transparent"?new ur(NaN,NaN,NaN,0):null}function l$(t){return new ur(t>>16&255,t>>8&255,t&255,1)}function w_(t,e,i,r){return r<=0&&(t=e=i=NaN),new ur(t,e,i,r)}function Pb(t){return t instanceof kl||(t=vh(t)),t?(t=t.rgb(),new ur(t.r,t.g,t.b,t.opacity)):new ur}function zo(t,e,i,r){return arguments.length===1?Pb(t):new ur(t,e,i,r??1)}function ur(t,e,i,r){this.r=+t,this.g=+e,this.b=+i,this.opacity=+r}$u(ur,zo,gh(kl,{brighter(t){return t=t==null?hf:Math.pow(hf,t),new ur(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bh:Math.pow(bh,t),new ur(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ur(cf(this.r),cf(this.g),cf(this.b),C_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:u$,formatHex:u$,formatHex8:che,formatRgb:c$,toString:c$}));function u$(){return`#${uf(this.r)}${uf(this.g)}${uf(this.b)}`}function che(){return`#${uf(this.r)}${uf(this.g)}${uf(this.b)}${uf((isNaN(this.opacity)?1:this.opacity)*255)}`}function c$(){let t=C_(this.opacity);return`${t===1?"rgb(":"rgba("}${cf(this.r)}, ${cf(this.g)}, ${cf(this.b)}${t===1?")":`, ${t})`}`}function C_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function uf(t){return t=cf(t),(t<16?"0":"")+t.toString(16)}function h$(t,e,i,r){return r<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new wa(t,e,i,r)}function f$(t){if(t instanceof wa)return new wa(t.h,t.s,t.l,t.opacity);if(t instanceof kl||(t=vh(t)),!t)return new wa;if(t instanceof wa)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),o=NaN,a=s-n,l=(s+n)/2;return a?(e===s?o=(i-r)/a+(i<r)*6:i===s?o=(r-e)/a+2:o=(e-i)/a+4,a/=l<.5?s+n:2-s-n,o*=60):a=l>0&&l<1?0:o,new wa(o,a,l,t.opacity)}function df(t,e,i,r){return arguments.length===1?f$(t):new wa(t,e,i,r??1)}function wa(t,e,i,r){this.h=+t,this.s=+e,this.l=+i,this.opacity=+r}$u(wa,df,gh(kl,{brighter(t){return t=t==null?hf:Math.pow(hf,t),new wa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bh:Math.pow(bh,t),new wa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new ur(U8(t>=240?t-240:t+120,n,r),U8(t,n,r),U8(t<120?t+240:t-120,n,r),this.opacity)},clamp(){return new wa(d$(this.h),__(this.s),__(this.l),C_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=C_(this.opacity);return`${t===1?"hsl(":"hsla("}${d$(this.h)}, ${__(this.s)*100}%, ${__(this.l)*100}%${t===1?")":`, ${t})`}`}}));function d$(t){return t=(t||0)%360,t<0?t+360:t}function __(t){return Math.max(0,Math.min(1,t||0))}function U8(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}var S_=Math.PI/180,E_=180/Math.PI;var k_=18,p$=.96422,m$=1,g$=.82521,b$=4/29,k0=6/29,v$=3*k0*k0,hhe=k0*k0*k0;function y$(t){if(t instanceof Al)return new Al(t.l,t.a,t.b,t.opacity);if(t instanceof Hu)return x$(t);t instanceof ur||(t=Pb(t));var e=q8(t.r),i=q8(t.g),r=q8(t.b),n=W8((.2225045*e+.7168786*i+.0606169*r)/m$),s,o;return e===i&&i===r?s=o=n:(s=W8((.4360747*e+.3850649*i+.1430804*r)/p$),o=W8((.0139322*e+.0971045*i+.7141733*r)/g$)),new Al(116*n-16,500*(s-n),200*(n-o),t.opacity)}function yh(t,e,i,r){return arguments.length===1?y$(t):new Al(t,e,i,r??1)}function Al(t,e,i,r){this.l=+t,this.a=+e,this.b=+i,this.opacity=+r}$u(Al,yh,gh(kl,{brighter(t){return new Al(this.l+k_*(t??1),this.a,this.b,this.opacity)},darker(t){return new Al(this.l-k_*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,i=isNaN(this.b)?t:t-this.b/200;return e=p$*V8(e),t=m$*V8(t),i=g$*V8(i),new ur(j8(3.1338561*e-1.6168667*t-.4906146*i),j8(-.9787684*e+1.9161415*t+.033454*i),j8(.0719453*e-.2289914*t+1.4052427*i),this.opacity)}}));function W8(t){return t>hhe?Math.pow(t,1/3):t/v$+b$}function V8(t){return t>k0?t*t*t:v$*(t-b$)}function j8(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function q8(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function dhe(t){if(t instanceof Hu)return new Hu(t.h,t.c,t.l,t.opacity);if(t instanceof Al||(t=y$(t)),t.a===0&&t.b===0)return new Hu(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*E_;return new Hu(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ff(t,e,i,r){return arguments.length===1?dhe(t):new Hu(t,e,i,r??1)}function Hu(t,e,i,r){this.h=+t,this.c=+e,this.l=+i,this.opacity=+r}function x$(t){if(isNaN(t.h))return new Al(t.l,0,0,t.opacity);var e=t.h*S_;return new Al(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}$u(Hu,ff,gh(kl,{brighter(t){return new Hu(this.h,this.c,this.l+k_*(t??1),this.opacity)},darker(t){return new Hu(this.h,this.c,this.l-k_*(t??1),this.opacity)},rgb(){return x$(this).rgb()}}));var S$=-.14861,G8=1.78277,X8=-.29227,A_=-.90649,zb=1.97294,w$=zb*A_,_$=zb*G8,C$=G8*X8-A_*S$;function fhe(t){if(t instanceof pf)return new pf(t.h,t.s,t.l,t.opacity);t instanceof ur||(t=Pb(t));var e=t.r/255,i=t.g/255,r=t.b/255,n=(C$*r+w$*e-_$*i)/(C$+w$-_$),s=r-n,o=(zb*(i-n)-X8*s)/A_,a=Math.sqrt(o*o+s*s)/(zb*n*(1-n)),l=a?Math.atan2(o,s)*E_-120:NaN;return new pf(l<0?l+360:l,a,n,t.opacity)}function A0(t,e,i,r){return arguments.length===1?fhe(t):new pf(t,e,i,r??1)}function pf(t,e,i,r){this.h=+t,this.s=+e,this.l=+i,this.opacity=+r}$u(pf,A0,gh(kl,{brighter(t){return t=t==null?hf:Math.pow(hf,t),new pf(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bh:Math.pow(bh,t),new pf(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*S_,e=+this.l,i=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),n=Math.sin(t);return new ur(255*(e+i*(S$*r+G8*n)),255*(e+i*(X8*r+A_*n)),255*(e+i*(zb*r)),this.opacity)}}));function Y8(t,e,i,r,n){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*i+(1+3*t+3*s-3*o)*r+o*n)/6}function T_(t){var e=t.length-1;return function(i){var r=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),n=t[r],s=t[r+1],o=r>0?t[r-1]:2*n-s,a=r<e-1?t[r+2]:2*s-n;return Y8((i-r/e)*e,o,n,s,a)}}function R_(t){var e=t.length;return function(i){var r=Math.floor(((i%=1)<0?++i:i)*e),n=t[(r+e-1)%e],s=t[r%e],o=t[(r+1)%e],a=t[(r+2)%e];return Y8((i-r/e)*e,n,s,o,a)}}var T0=t=>()=>t;function E$(t,e){return function(i){return t+i*e}}function phe(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function xh(t,e){var i=e-t;return i?E$(t,i>180||i<-180?i-360*Math.round(i/360):i):T0(isNaN(t)?e:t)}function k$(t){return(t=+t)==1?Ci:function(e,i){return i-e?phe(e,i,t):T0(isNaN(e)?i:e)}}function Ci(t,e){var i=e-t;return i?E$(t,i):T0(isNaN(t)?e:t)}var Ib=(function t(e){var i=k$(e);function r(n,s){var o=i((n=zo(n)).r,(s=zo(s)).r),a=i(n.g,s.g),l=i(n.b,s.b),u=Ci(n.opacity,s.opacity);return function(c){return n.r=o(c),n.g=a(c),n.b=l(c),n.opacity=u(c),n+""}}return r.gamma=t,r})(1);function A$(t){return function(e){var i=e.length,r=new Array(i),n=new Array(i),s=new Array(i),o,a;for(o=0;o<i;++o)a=zo(e[o]),r[o]=a.r||0,n[o]=a.g||0,s[o]=a.b||0;return r=t(r),n=t(n),s=t(s),a.opacity=1,function(l){return a.r=r(l),a.g=n(l),a.b=s(l),a+""}}}var T$=A$(T_),R$=A$(R_);function R0(t,e){e||(e=[]);var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function D_(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function D$(t,e){return(D_(e)?R0:K8)(t,e)}function K8(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),o;for(o=0;o<r;++o)n[o]=Sn(t[o],e[o]);for(;o<i;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=n[o](a);return s}}function M_(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function En(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function F_(t,e){var i={},r={},n;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in t?i[n]=Sn(t[n],e[n]):r[n]=e[n];return function(s){for(n in i)r[n]=i[n](s);return r}}var Z8=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,J8=new RegExp(Z8.source,"g");function mhe(t){return function(){return t}}function ghe(t){return function(e){return t(e)+""}}function L_(t,e){var i=Z8.lastIndex=J8.lastIndex=0,r,n,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Z8.exec(t))&&(n=J8.exec(e));)(s=n.index)>i&&(s=e.slice(i,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,l.push({i:o,x:En(r,n)})),i=J8.lastIndex;return i<e.length&&(s=e.slice(i),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?ghe(l[0].x):mhe(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}function Sn(t,e){var i=typeof e,r;return e==null||i==="boolean"?T0(e):(i==="number"?En:i==="string"?(r=vh(e))?(e=r,Ib):L_:e instanceof vh?Ib:e instanceof Date?M_:D_(e)?R0:Array.isArray(e)?K8:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?F_:En)(t,e)}function M$(t){var e=t.length;return function(i){return t[Math.max(0,Math.min(e-1,Math.floor(i*e)))]}}function F$(t,e){var i=xh(+t,+e);return function(r){var n=i(r);return n-360*Math.floor(n/360)}}function Tl(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var L$=180/Math.PI,O_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Q8(t,e,i,r,n,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*i+e*r)&&(i-=t*l,r-=e*l),(a=Math.sqrt(i*i+r*r))&&(i/=a,r/=a,l/=a),t*r<e*i&&(t=-t,e=-e,l=-l,o=-o),{translateX:n,translateY:s,rotate:Math.atan2(e,t)*L$,skewX:Math.atan(l)*L$,scaleX:o,scaleY:a}}var P_;function O$(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?O_:Q8(e.a,e.b,e.c,e.d,e.e,e.f)}function P$(t){return t==null?O_:(P_||(P_=document.createElementNS("http://www.w3.org/2000/svg","g")),P_.setAttribute("transform",t),(t=P_.transform.baseVal.consolidate())?(t=t.matrix,Q8(t.a,t.b,t.c,t.d,t.e,t.f)):O_)}function z$(t,e,i,r){function n(u){return u.length?u.pop()+" ":""}function s(u,c,h,d,p,f){if(u!==h||c!==d){var m=p.push("translate(",null,e,null,i);f.push({i:m-4,x:En(u,h)},{i:m-2,x:En(c,d)})}else(h||d)&&p.push("translate("+h+e+d+i)}function o(u,c,h,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:h.push(n(h)+"rotate(",null,r)-2,x:En(u,c)})):c&&h.push(n(h)+"rotate("+c+r)}function a(u,c,h,d){u!==c?d.push({i:h.push(n(h)+"skewX(",null,r)-2,x:En(u,c)}):c&&h.push(n(h)+"skewX("+c+r)}function l(u,c,h,d,p,f){if(u!==h||c!==d){var m=p.push(n(p)+"scale(",null,",",null,")");f.push({i:m-4,x:En(u,h)},{i:m-2,x:En(c,d)})}else(h!==1||d!==1)&&p.push(n(p)+"scale("+h+","+d+")")}return function(u,c){var h=[],d=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,h,d),o(u.rotate,c.rotate,h,d),a(u.skewX,c.skewX,h,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,d),u=c=null,function(p){for(var f=-1,m=d.length,g;++f<m;)h[(g=d[f]).i]=g.x(p);return h.join("")}}}var I$=z$(O$,"px, ","px)","deg)"),B$=z$(P$,", ",")",")");var bhe=1e-12;function N$(t){return((t=Math.exp(t))+1/t)/2}function vhe(t){return((t=Math.exp(t))-1/t)/2}function yhe(t){return((t=Math.exp(2*t))-1)/(t+1)}var $$=(function t(e,i,r){function n(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],h=o[1],d=o[2],p=c-a,f=h-l,m=p*p+f*f,g,b;if(m<bhe)b=Math.log(d/u)/e,g=function(C){return[a+C*p,l+C*f,u*Math.exp(e*C*b)]};else{var v=Math.sqrt(m),y=(d*d-u*u+r*m)/(2*u*i*v),x=(d*d-u*u-r*m)/(2*d*i*v),_=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(x*x+1)-x);b=(w-_)/e,g=function(C){var E=C*b,A=N$(_),D=u/(i*v)*(A*yhe(e*E+_)-vhe(_));return[a+D*p,l+D*f,u*A/N$(e*E+_)]}}return g.duration=b*1e3*e/Math.SQRT2,g}return n.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},n})(Math.SQRT2,2,4);function H$(t){return function(e,i){var r=t((e=df(e)).h,(i=df(i)).h),n=Ci(e.s,i.s),s=Ci(e.l,i.l),o=Ci(e.opacity,i.opacity);return function(a){return e.h=r(a),e.s=n(a),e.l=s(a),e.opacity=o(a),e+""}}}var U$=H$(xh),W$=H$(Ci);function eA(t,e){var i=Ci((t=yh(t)).l,(e=yh(e)).l),r=Ci(t.a,e.a),n=Ci(t.b,e.b),s=Ci(t.opacity,e.opacity);return function(o){return t.l=i(o),t.a=r(o),t.b=n(o),t.opacity=s(o),t+""}}function V$(t){return function(e,i){var r=t((e=ff(e)).h,(i=ff(i)).h),n=Ci(e.c,i.c),s=Ci(e.l,i.l),o=Ci(e.opacity,i.opacity);return function(a){return e.h=r(a),e.c=n(a),e.l=s(a),e.opacity=o(a),e+""}}}var j$=V$(xh),q$=V$(Ci);function G$(t){return(function e(i){i=+i;function r(n,s){var o=t((n=A0(n)).h,(s=A0(s)).h),a=Ci(n.s,s.s),l=Ci(n.l,s.l),u=Ci(n.opacity,s.opacity);return function(c){return n.h=o(c),n.s=a(c),n.l=l(Math.pow(c,i)),n.opacity=u(c),n+""}}return r.gamma=e,r})(1)}var X$=G$(xh),Y$=G$(Ci);function mf(t,e){e===void 0&&(e=t,t=Sn);for(var i=0,r=e.length-1,n=e[0],s=new Array(r<0?0:r);i<r;)s[i]=t(n,n=e[++i]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function K$(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t(r/(e-1));return i}function iA(t){return function(){return t}}function D0(t){return+t}var J$=[0,1];function sn(t){return t}function rA(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:iA(isNaN(e)?NaN:.5)}function xhe(t,e){var i;return t>e&&(i=t,t=e,e=i),function(r){return Math.max(t,Math.min(e,r))}}function whe(t,e,i){var r=t[0],n=t[1],s=e[0],o=e[1];return n<r?(r=rA(n,r),s=i(o,s)):(r=rA(r,n),s=i(s,o)),function(a){return s(r(a))}}function _he(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)n[o]=rA(t[o],t[o+1]),s[o]=i(e[o],e[o+1]);return function(a){var l=va(t,a,1,r)-1;return s[l](n[l](a))}}function Rl(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gf(){var t=J$,e=J$,i=Sn,r,n,s,o=sn,a,l,u;function c(){var d=Math.min(t.length,e.length);return o!==sn&&(o=xhe(t[0],t[d-1])),a=d>2?_he:whe,l=u=null,h}function h(d){return d==null||isNaN(d=+d)?s:(l||(l=a(t.map(r),e,i)))(r(o(d)))}return h.invert=function(d){return o(n((u||(u=a(e,t.map(r),En)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,D0),c()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),i=Tl,c()},h.clamp=function(d){return arguments.length?(o=d?!0:sn,c()):o!==sn},h.interpolate=function(d){return arguments.length?(i=d,c()):i},h.unknown=function(d){return arguments.length?(s=d,h):s},function(d,p){return r=d,n=p,c()}}function Bb(){return gf()(sn,sn)}function M0(t,e,i,r){var n=Jn(t,e,i),s;switch(r=io(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=tb(n,o))&&(r.precision=s),u0(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=ib(n,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=eb(n))&&(r.precision=s-(r.type==="%")*2);break}}return ih(r)}function no(t){var e=t.domain;return t.ticks=function(i){var r=e();return jd(r[0],r[r.length-1],i??10)},t.tickFormat=function(i,r){var n=e();return M0(n[0],n[n.length-1],i??10,r)},t.nice=function(i){i==null&&(i=10);var r=e(),n=0,s=r.length-1,o=r[n],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=n,n=s,s=u);c-- >0;){if(u=K1(o,a,i),u===l)return r[n]=o,r[s]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function Nb(){var t=Bb();return t.copy=function(){return Rl(t,Nb())},lr.apply(t,arguments),no(t)}function $b(t){var e;function i(r){return r==null||isNaN(r=+r)?e:r}return i.invert=i,i.domain=i.range=function(r){return arguments.length?(t=Array.from(r,D0),i):t.slice()},i.unknown=function(r){return arguments.length?(e=r,i):e},i.copy=function(){return $b(t).unknown(e)},t=arguments.length?Array.from(t,D0):[0,1],no(i)}function Hb(t,e){t=t.slice();var i=0,r=t.length-1,n=t[i],s=t[r],o;return s<n&&(o=i,i=r,r=o,o=n,n=s,s=o),t[i]=e.floor(n),t[r]=e.ceil(s),t}function Z$(t){return Math.log(t)}function Q$(t){return Math.exp(t)}function Che(t){return-Math.log(-t)}function She(t){return-Math.exp(-t)}function Ehe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function khe(t){return t===10?Ehe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Ahe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function eH(t){return(e,i)=>-t(-e,i)}function Ub(t){let e=t(Z$,Q$),i=e.domain,r=10,n,s;function o(){return n=Ahe(r),s=khe(r),i()[0]<0?(n=eH(n),s=eH(s),t(Che,She)):t(Z$,Q$),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(i(a),o()):i()},e.ticks=a=>{let l=i(),u=l[0],c=l[l.length-1],h=c<u;h&&([u,c]=[c,u]);let d=n(u),p=n(c),f,m,g=a==null?10:+a,b=[];if(!(r%1)&&p-d<g){if(d=Math.floor(d),p=Math.ceil(p),u>0){for(;d<=p;++d)for(f=1;f<r;++f)if(m=d<0?f/s(-d):f*s(d),!(m<u)){if(m>c)break;b.push(m)}}else for(;d<=p;++d)for(f=r-1;f>=1;--f)if(m=d>0?f/s(-d):f*s(d),!(m<u)){if(m>c)break;b.push(m)}b.length*2<g&&(b=jd(u,c,g))}else b=jd(d,p,Math.min(p-d,g)).map(s);return h?b.reverse():b},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=io(l)).precision==null&&(l.trim=!0),l=ih(l)),a===1/0)return l;let u=Math.max(1,r*a/e.ticks().length);return c=>{let h=c/s(Math.round(n(c)));return h*r<r-.5&&(h*=r),h<=u?l(c):""}},e.nice=()=>i(Hb(i(),{floor:a=>s(Math.floor(n(a))),ceil:a=>s(Math.ceil(n(a)))})),e}function Wb(){let t=Ub(gf()).domain([1,10]);return t.copy=()=>Rl(t,Wb()).base(t.base()),lr.apply(t,arguments),t}function tH(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function iH(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Vb(t){var e=1,i=t(tH(e),iH(e));return i.constant=function(r){return arguments.length?t(tH(e=+r),iH(e)):e},no(i)}function jb(){var t=Vb(gf());return t.copy=function(){return Rl(t,jb()).constant(t.constant())},lr.apply(t,arguments)}function rH(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function The(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Rhe(t){return t<0?-t*t:t*t}function qb(t){var e=t(sn,sn),i=1;function r(){return i===1?t(sn,sn):i===.5?t(The,Rhe):t(rH(i),rH(1/i))}return e.exponent=function(n){return arguments.length?(i=+n,r()):i},no(e)}function F0(){var t=qb(gf());return t.copy=function(){return Rl(t,F0()).exponent(t.exponent())},lr.apply(t,arguments),t}function nA(){return F0.apply(null,arguments).exponent(.5)}function Gb(){var t=[],e=[],i=[],r;function n(){var o=0,a=Math.max(1,e.length);for(i=new Array(a-1);++o<a;)i[o-1]=Z1(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[va(i,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?i[a-1]:t[0],a<i.length?i[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(_n),n()},s.range=function(o){return arguments.length?(e=Array.from(o),n()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return i.slice()},s.copy=function(){return Gb().domain(t).range(e).unknown(r)},lr.apply(s,arguments)}function Xb(){var t=0,e=1,i=1,r=[.5],n=[0,1],s;function o(l){return l!=null&&l<=l?n[va(r,l,0,i)]:s}function a(){var l=-1;for(r=new Array(i);++l<i;)r[l]=((l+1)*e-(l-i)*t)/(i+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(i=(n=Array.from(l)).length-1,a()):n.slice()},o.invertExtent=function(l){var u=n.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=i?[r[i-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Xb().domain([t,e]).range(n).unknown(s)},lr.apply(no(o),arguments)}function Yb(){var t=[.5],e=[0,1],i,r=1;function n(s){return s!=null&&s<=s?e[va(t,s,0,r)]:i}return n.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),n):t.slice()},n.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),n):e.slice()},n.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},n.unknown=function(s){return arguments.length?(i=s,n):i},n.copy=function(){return Yb().domain(t).range(e).unknown(i)},lr.apply(n,arguments)}function Dhe(t){return new Date(t)}function Mhe(t){return t instanceof Date?+t:+new Date(+t)}function z_(t,e,i,r,n,s,o,a,l,u){var c=Bb(),h=c.invert,d=c.domain,p=u(".%L"),f=u(":%S"),m=u("%I:%M"),g=u("%I %p"),b=u("%a %d"),v=u("%b %d"),y=u("%B"),x=u("%Y");function _(w){return(l(w)<w?p:a(w)<w?f:o(w)<w?m:s(w)<w?g:r(w)<w?n(w)<w?b:v:i(w)<w?y:x)(w)}return c.invert=function(w){return new Date(h(w))},c.domain=function(w){return arguments.length?d(Array.from(w,Mhe)):d().map(Dhe)},c.ticks=function(w){var C=d();return t(C[0],C[C.length-1],w??10)},c.tickFormat=function(w,C){return C==null?_:u(C)},c.nice=function(w){var C=d();return(!w||typeof w.range!="function")&&(w=e(C[0],C[C.length-1],w??10)),w?d(Hb(C,w)):c},c.copy=function(){return Rl(c,z_(t,e,i,r,n,s,o,a,l,u))},c}function I_(){return lr.apply(z_(Kk,Jk,Zn,Mu,Mo,ks,sh,rh,Cn,m0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function B_(){return lr.apply(z_(Xk,Yk,Qn,Fu,Fo,Do,oh,nh,Cn,g0).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function N_(){var t=0,e=1,i,r,n,s,o=sn,a=!1,l;function u(h){return h==null||isNaN(h=+h)?l:o(n===0?.5:(h=(s(h)-i)*n,a?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,i=s(t=+t),r=s(e=+e),n=i===r?0:1/(r-i),u):[t,e]},u.clamp=function(h){return arguments.length?(a=!!h,u):a},u.interpolator=function(h){return arguments.length?(o=h,u):o};function c(h){return function(d){var p,f;return arguments.length?([p,f]=d,o=h(p,f),u):[o(0),o(1)]}}return u.range=c(Sn),u.rangeRound=c(Tl),u.unknown=function(h){return arguments.length?(l=h,u):l},function(h){return s=h,i=h(t),r=h(e),n=i===r?0:1/(r-i),u}}function Uu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function L0(){var t=no(N_()(sn));return t.copy=function(){return Uu(t,L0())},Sl.apply(t,arguments)}function $_(){var t=Ub(N_()).domain([1,10]);return t.copy=function(){return Uu(t,$_()).base(t.base())},Sl.apply(t,arguments)}function H_(){var t=Vb(N_());return t.copy=function(){return Uu(t,H_()).constant(t.constant())},Sl.apply(t,arguments)}function Kb(){var t=qb(N_());return t.copy=function(){return Uu(t,Kb()).exponent(t.exponent())},Sl.apply(t,arguments)}function sA(){return Kb.apply(null,arguments).exponent(.5)}function U_(){var t=0,e=.5,i=1,r=1,n,s,o,a,l,u=sn,c,h=!1,d;function p(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(h?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,i]=m,n=c(t=+t),s=c(e=+e),o=c(i=+i),a=n===s?0:.5/(s-n),l=s===o?0:.5/(o-s),r=s<n?-1:1,p):[t,e,i]},p.clamp=function(m){return arguments.length?(h=!!m,p):h},p.interpolator=function(m){return arguments.length?(u=m,p):u};function f(m){return function(g){var b,v,y;return arguments.length?([b,v,y]=g,u=mf(m,[b,v,y]),p):[u(0),u(.5),u(1)]}}return p.range=f(Sn),p.rangeRound=f(Tl),p.unknown=function(m){return arguments.length?(d=m,p):d},function(m){return c=m,n=m(t),s=m(e),o=m(i),a=n===s?0:.5/(s-n),l=s===o?0:.5/(o-s),r=s<n?-1:1,p}}function Jb(){var t=no(U_()(sn));return t.copy=function(){return Uu(t,Jb())},Sl.apply(t,arguments)}function W_(){var t=Ub(U_()).domain([.1,1,10]);return t.copy=function(){return Uu(t,W_()).base(t.base())},Sl.apply(t,arguments)}function V_(){var t=Vb(U_());return t.copy=function(){return Uu(t,V_()).constant(t.constant())},Sl.apply(t,arguments)}function Zb(){var t=qb(U_());return t.copy=function(){return Uu(t,Zb()).exponent(t.exponent())},Sl.apply(t,arguments)}function oA(){return Zb.apply(null,arguments).exponent(.5)}function cr(t){for(var e=t.length/6|0,i=new Array(e),r=0;r<e;)i[r]="#"+t.slice(r*6,++r*6);return i}var aA=cr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var lA=cr("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");var uA=cr("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");var cA=cr("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0");var hA=cr("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var dA=cr("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");var fA=cr("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");var pA=cr("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");var mA=cr("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");var gA=cr("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Qb(t,e,i){let r=t-e+i*2;return t?r>0?r:1:0}var Lhe="identity",vf="linear",Dl="log",O0="pow",P0="sqrt",ev="symlog",wh="time",_h="utc",_a="sequential",yf="diverging",bf="quantile",tv="quantize",iv="threshold",q_="ordinal",G_="point",vA="band",X_="bin-ordinal",xr="continuous",rv="discrete",nv="discretizing",Io="interpolating",yA="temporal";function Ohe(t){return function(e){let i=e[0],r=e[1],n;return r<i&&(n=i,i=r,r=n),[t.invert(i),t.invert(r)]}}function Phe(t){return function(e){let i=t.range(),r=e[0],n=e[1],s=-1,o,a,l,u;for(n<r&&(a=r,r=n,n=a),l=0,u=i.length;l<u;++l)i[l]>=r&&i[l]<=n&&(s<0&&(s=l),o=l);if(!(s<0))return r=t.invertExtent(i[s]),n=t.invertExtent(i[o]),[r[0]===void 0?r[1]:r[0],n[1]===void 0?n[0]:n[1]]}}function xA(){let t=lf().unknown(void 0),e=t.domain,i=t.range,r=[0,1],n,s,o=!1,a=0,l=0,u=.5;delete t.unknown;function c(){let h=e().length,d=r[1]<r[0],p=r[1-d],f=Qb(h,a,l),m=r[d-0];n=(p-m)/(f||1),o&&(n=Math.floor(n)),m+=(p-m-n*(h-a))*u,s=n*(1-a),o&&(m=Math.round(m),s=Math.round(s));let g=Ji(h).map(b=>m+n*b);return i(d?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),c()):e()},t.range=function(h){return arguments.length?(r=[+h[0],+h[1]],c()):r.slice()},t.rangeRound=function(h){return r=[+h[0],+h[1]],o=!0,c()},t.bandwidth=function(){return s},t.step=function(){return n},t.round=function(h){return arguments.length?(o=!!h,c()):o},t.padding=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),a=l,c()):a},t.paddingInner=function(h){return arguments.length?(a=Math.max(0,Math.min(1,h)),c()):a},t.paddingOuter=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),c()):l},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),c()):u},t.invertRange=function(h){if(h[0]==null||h[1]==null)return;let d=r[1]<r[0],p=d?i().reverse():i(),f=p.length-1,m=+h[0],g=+h[1],b,v,y;if(!(m!==m||g!==g)&&(g<m&&(y=m,m=g,g=y),!(g<p[0]||m>r[1-d])))return b=Math.max(0,Vd(p,m)-1),v=m===g?b:Vd(p,g)-1,m-p[b]>s+1e-10&&++b,d&&(y=b,b=f-v,v=f-y),b>v?void 0:e().slice(b,v+1)},t.invert=function(h){let d=t.invertRange([h,h]);return d&&d[0]},t.copy=function(){return xA().domain(e()).range(r).round(o).paddingInner(a).paddingOuter(l).align(u)},c()}function aH(t){let e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return aH(e())},t}function zhe(){return aH(xA().paddingInner(1))}var Ihe=Array.prototype.map;function Bhe(t){return Ihe.call(t,Ki)}var Nhe=Array.prototype.slice;function lH(){let t=[],e=[];function i(r){return r==null||r!==r?void 0:e[(va(t,r)-1)%e.length]}return i.domain=function(r){return arguments.length?(t=Bhe(r),i):t.slice()},i.range=function(r){return arguments.length?(e=Nhe.call(r),i):e.slice()},i.tickFormat=function(r,n){return M0(t[0],ht(t),r??10,n)},i.copy=function(){return lH().domain(i.domain()).range(i.range())},i}var j_=new Map,uH=Symbol("vega_scale");function wA(t){return t[uH]=!0,t}function _A(t){return t&&t[uH]===!0}function $he(t,e,i){let r=function(){let s=e();return s.invertRange||(s.invertRange=s.invert?Ohe(s):s.invertExtent?Phe(s):void 0),s.type=t,wA(s)};return r.metadata=or(ve(i)),r}function St(t,e,i){return arguments.length>1?(j_.set(t,$he(t,e,i)),this):CA(t)?j_.get(t):void 0}St(Lhe,$b);St(vf,Nb,xr);St(Dl,Wb,[xr,Dl]);St(O0,F0,xr);St(P0,nA,xr);St(ev,jb,xr);St(wh,I_,[xr,yA]);St(_h,B_,[xr,yA]);St(_a,L0,[xr,Io]);St(`${_a}-${vf}`,L0,[xr,Io]);St(`${_a}-${Dl}`,$_,[xr,Io,Dl]);St(`${_a}-${O0}`,Kb,[xr,Io]);St(`${_a}-${P0}`,sA,[xr,Io]);St(`${_a}-${ev}`,H_,[xr,Io]);St(`${yf}-${vf}`,Jb,[xr,Io]);St(`${yf}-${Dl}`,W_,[xr,Io,Dl]);St(`${yf}-${O0}`,Zb,[xr,Io]);St(`${yf}-${P0}`,oA,[xr,Io]);St(`${yf}-${ev}`,V_,[xr,Io]);St(bf,Gb,[nv,bf]);St(tv,Xb,nv);St(iv,Yb,nv);St(X_,lH,[rv,nv]);St(q_,lf,rv);St(vA,xA,rv);St(G_,zhe,rv);function CA(t){return j_.has(t)}function xf(t,e){let i=j_.get(t);return i&&i.metadata[e]}function sv(t){return xf(t,xr)}function Ch(t){return xf(t,rv)}function Y_(t){return xf(t,nv)}function SA(t){return xf(t,Dl)}function Hhe(t){return xf(t,yA)}function EA(t){return xf(t,Io)}function kA(t){return xf(t,bf)}var Uhe=["clamp","base","constant","exponent"];function K_(t,e){let i=e[0],r=ht(e)-i;return function(n){return t(i+n*r)}}function z0(t,e,i){return mf(ov(e||"rgb",i),t)}function J_(t,e){let i=new Array(e),r=e+1;for(let n=0;n<e;)i[n]=t(++n/r);return i}function Z_(t,e,i){let r=i-e,n,s,o;return!r||!Number.isFinite(r)?wi(.5):(n=(s=t.type).indexOf("-"),s=n<0?s:s.slice(n+1),o=St(s)().domain([e,i]).range([0,1]),Uhe.forEach(a=>t[a]?o[a](t[a]()):0),o)}function ov(t,e){let i=tA[Whe(t)];return e!=null&&i&&i.gamma?i.gamma(e):i}function Whe(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}var Vhe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},jhe={accent:lA,category10:aA,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:uA,observable10:cA,paired:hA,pastel1:dA,pastel2:fA,set1:pA,set2:mA,set3:gA,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function cH(t){if(K(t))return t;let e=t.length/6|0,i=new Array(e);for(let r=0;r<e;)i[r]="#"+t.slice(r*6,++r*6);return i}function hH(t,e){for(let i in t)av(i,e(t[i]))}var nH={};hH(jhe,cH);hH(Vhe,t=>z0(cH(t)));function av(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(nH[t]=e,this):nH[t]}var lv="symbol",qhe="discrete",dH="gradient",Ghe=t=>K(t)?t.map(e=>String(e)):String(t),Xhe=(t,e)=>t[1]-e[1],Yhe=(t,e)=>e[1]-t[1];function Q_(t,e,i){let r;return ct(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),i!=null&&(e=Math.min(e,Math.floor(Tu(t.domain())/i||1)+1))),ge(e)&&(r=e.step,e=e.interval),fe(e)&&(e=t.type===wh?Lu(e):t.type==_h?Ou(e):te("Only time and utc scales accept interval strings."),r&&(e=e.every(r))),e}function AA(t,e,i){let r=t.range(),n=r[0],s=ht(r),o=Xhe;if(n>s&&(r=s,s=n,n=r,o=Yhe),n=Math.floor(n),s=Math.ceil(s),e=e.map(a=>[a,t(a)]).filter(a=>n<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),i>0&&e.length>1){let a=[e[0],ht(e)];for(;e.length>i&&e.length>=3;)e=e.filter((l,u)=>!(u%2));e.length<3&&(e=a)}return e}function eC(t,e){return t.bins?AA(t,t.bins,e):t.ticks?t.ticks(e):t.domain()}function TA(t,e,i,r,n,s){let o=e.type,a=Ghe;if(o===wh||n===wh)a=t.timeFormat(r);else if(o===_h||n===_h)a=t.utcFormat(r);else if(SA(o)){let l=t.formatFloat(r);if(s||e.bins)a=l;else{let u=fH(e,i,!1);a=c=>u(c)?l(c):""}}else if(e.tickFormat){let l=e.domain();a=t.formatSpan(l[0],l[l.length-1],i,r)}else r&&(a=t.format(r));return a}function fH(t,e,i){let r=eC(t,e),n=t.base(),s=Math.log(n),o=Math.max(1,n*e/r.length),a=l=>{let u=l/Math.pow(n,Math.round(Math.log(l)/s));return u*n<n-.5&&(u*=n),u<=o};return i?r.filter(a):a}var bA={[bf]:"quantiles",[tv]:"thresholds",[iv]:"domain"},pH={[bf]:"quantiles",[tv]:"domain"};function RA(t,e){return t.bins?Zhe(t.bins):t.type===Dl?fH(t,e,!0):bA[t.type]?Jhe(t[bA[t.type]]()):eC(t,e)}function Khe(t,e,i){let r=e[pH[e.type]](),n=r.length,s=n>1?r[1]-r[0]:r[0],o;for(o=1;o<n;++o)s=Math.min(s,r[o]-r[o-1]);return t.formatSpan(0,s,30,i)}function Jhe(t){let e=[-1/0].concat(t);return e.max=1/0,e}function Zhe(t){let e=t.slice(0,-1);return e.max=ht(t),e}var Qhe=t=>bA[t.type]||t.bins;function DA(t,e,i,r,n,s,o){let a=pH[e.type]&&s!==wh&&s!==_h?Khe(t,e,n):TA(t,e,i,n,s,o);return r===lv&&Qhe(e)?ede(a):r===qhe?tde(a):ide(a)}var ede=t=>(e,i,r)=>{let n=sH(r[i+1],sH(r.max,1/0)),s=oH(e,t),o=oH(n,t);return s&&o?s+" \u2013 "+o:o?"< "+o:"\u2265 "+s},sH=(t,e)=>t??e,tde=t=>(e,i)=>i?t(e):null,ide=t=>e=>t(e),oH=(t,e)=>Number.isFinite(t)?e(t):null;function mH(t){let e=t.domain(),i=e.length-1,r=+e[0],n=+ht(e),s=n-r;if(t.type===iv){let o=i?s/i:.1;r-=o,n+=o,s=n-r}return o=>(o-r)/s}function rde(t,e,i,r){let n=r||e.type;return fe(i)&&Hhe(n)&&(i=i.replace(/%a/g,"%A").replace(/%b/g,"%B")),!i&&n===wh?t.timeFormat("%A, %d %B %Y, %X"):!i&&n===_h?t.utcFormat("%A, %d %B %Y, %X UTC"):DA(t,e,5,null,i,r,!0)}function MA(t,e,i){i=i||{};let r=Math.max(3,i.maxlen||7),n=rde(t,e,i.format,i.formatType);if(Y_(e.type)){let s=RA(e).slice(1).map(n),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Ch(e.type)){let s=e.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(n).join(", ")+", ending with "+s.slice(-1).map(n):s.map(n).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{let s=e.domain();return`values from ${n(s[0])} to ${n(ht(s))}`}}var $H=0;function nde(){$H=0}var cC="p_";function XA(t){return t&&t.gradient}function HH(t,e,i){let r=t.gradient,n=t.id,s=r==="radial"?cC:"";return n||(n=t.id="gradient_"+$H++,r==="radial"?(t.x1=Ml(t.x1,.5),t.y1=Ml(t.y1,.5),t.r1=Ml(t.r1,0),t.x2=Ml(t.x2,.5),t.y2=Ml(t.y2,.5),t.r2=Ml(t.r2,.5),s=cC):(t.x1=Ml(t.x1,0),t.y1=Ml(t.y1,0),t.x2=Ml(t.x2,1),t.y2=Ml(t.y2,0))),e[n]=t,"url("+(i||"")+"#"+s+n+")"}function Ml(t,e){return t??e}function YA(t,e){var i=[],r;return r={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:i,stop:function(n,s){return i.push({offset:n,color:s}),r}}}var gH={basis:{curve:S8},"basis-closed":{curve:E8},"basis-open":{curve:k8},bundle:{curve:A8,tension:"beta",value:.85},cardinal:{curve:T8,tension:"tension",value:0},"cardinal-open":{curve:D8,tension:"tension",value:0},"cardinal-closed":{curve:R8,tension:"tension",value:0},"catmull-rom":{curve:M8,tension:"alpha",value:.5},"catmull-rom-closed":{curve:F8,tension:"alpha",value:.5},"catmull-rom-open":{curve:L8,tension:"alpha",value:.5},linear:{curve:af},"linear-closed":{curve:O8},monotone:{horizontal:I8,vertical:z8},natural:{curve:B8},step:{curve:N8},"step-after":{curve:H8},"step-before":{curve:$8}};function KA(t,e,i){var r=_e(gH,t)&&gH[t],n=null;return r&&(n=r.curve||r[e||"vertical"],r.tension&&i!=null&&(n=n[r.tension](i))),n}var sde={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},ode=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,ade=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,lde=/^((\s+,?\s*)|(,\s*))/,ude=/^[01]/;function kf(t){let e=[];return(t.match(ode)||[]).forEach(r=>{let n=r[0],s=n.toLowerCase(),o=sde[s],a=cde(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([n,...a.slice(0,o)]),l!==o){s==="m"&&(n=n==="M"?"L":"l");for(let u=o;u<l;u+=o)e.push([n,...a.slice(u,u+o)])}}),e}function cde(t,e,i){let r=[];for(let n=0;e&&n<i.length;)for(let s=0;s<e;++s){let o=t==="a"&&(s===3||s===4)?ude:ade,a=i.slice(n).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");n+=a[0].length,r.push(+a[0]);let l=i.slice(n).match(lde);l!==null&&(n+=l[0].length)}return r}var Rh=Math.PI/180,hde=1e-14,wf=Math.PI/2,Fl=Math.PI*2,I0=Math.sqrt(3)/2,FA={},LA={},UH=[].join;function dde(t,e,i,r,n,s,o,a,l){let u=UH.call(arguments);if(FA[u])return FA[u];let c=o*Rh,h=Math.sin(c),d=Math.cos(c);i=Math.abs(i),r=Math.abs(r);let p=d*(a-t)*.5+h*(l-e)*.5,f=d*(l-e)*.5-h*(a-t)*.5,m=p*p/(i*i)+f*f/(r*r);m>1&&(m=Math.sqrt(m),i*=m,r*=m);let g=d/i,b=h/i,v=-h/r,y=d/r,x=g*a+b*l,_=v*a+y*l,w=g*t+b*e,C=v*t+y*e,A=1/((w-x)*(w-x)+(C-_)*(C-_))-.25;A<0&&(A=0);let D=Math.sqrt(A);s==n&&(D=-D);let R=.5*(x+w)-D*(C-_),I=.5*(_+C)+D*(w-x),z=Math.atan2(_-I,x-R),N=Math.atan2(C-I,w-R)-z;N<0&&s===1?N+=Fl:N>0&&s===0&&(N-=Fl);let H=Math.ceil(Math.abs(N/(wf+.001))),T=[];for(let L=0;L<H;++L){let P=z+L*N/H,W=z+(L+1)*N/H;T[L]=[R,I,P,W,i,r,h,d]}return FA[u]=T}function fde(t){let e=UH.call(t);if(LA[e])return LA[e];var i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7];let c=u*o,h=-l*a,d=l*o,p=u*a,f=Math.cos(n),m=Math.sin(n),g=Math.cos(s),b=Math.sin(s),v=.5*(s-n),y=Math.sin(v*.5),x=8/3*y*y/Math.sin(v),_=i+f-x*m,w=r+m+x*f,C=i+g,E=r+b,A=C+x*b,D=E-x*g;return LA[e]=[c*_+h*w,d*_+p*w,c*A+h*D,d*A+p*D,c*C+h*E,d*C+p*E]}var Bo=["l",0,0,0,0,0,0,0];function pde(t,e,i){let r=Bo[0]=t[0];if(r==="a"||r==="A")Bo[1]=e*t[1],Bo[2]=i*t[2],Bo[3]=t[3],Bo[4]=t[4],Bo[5]=t[5],Bo[6]=e*t[6],Bo[7]=i*t[7];else if(r==="h"||r==="H")Bo[1]=e*t[1];else if(r==="v"||r==="V")Bo[1]=i*t[1];else for(var n=1,s=t.length;n<s;++n)Bo[n]=(n%2==1?e:i)*t[n];return Bo}function N0(t,e,i,r,n,s){var o,a=null,l=0,u=0,c=0,h=0,d,p,f,m,g=0,b=0;i==null&&(i=0),r==null&&(r=0),n==null&&(n=1),s==null&&(s=n),t.beginPath&&t.beginPath();for(var v=0,y=e.length;v<y;++v){switch(o=e[v],(n!==1||s!==1)&&(o=pde(o,n,s)),o[0]){case"l":l+=o[1],u+=o[2],t.lineTo(l+i,u+r);break;case"L":l=o[1],u=o[2],t.lineTo(l+i,u+r);break;case"h":l+=o[1],t.lineTo(l+i,u+r);break;case"H":l=o[1],t.lineTo(l+i,u+r);break;case"v":u+=o[1],t.lineTo(l+i,u+r);break;case"V":u=o[1],t.lineTo(l+i,u+r);break;case"m":l+=o[1],u+=o[2],g=l,b=u,t.moveTo(l+i,u+r);break;case"M":l=o[1],u=o[2],g=l,b=u,t.moveTo(l+i,u+r);break;case"c":d=l+o[5],p=u+o[6],c=l+o[3],h=u+o[4],t.bezierCurveTo(l+o[1]+i,u+o[2]+r,c+i,h+r,d+i,p+r),l=d,u=p;break;case"C":l=o[5],u=o[6],c=o[3],h=o[4],t.bezierCurveTo(o[1]+i,o[2]+r,c+i,h+r,l+i,u+r);break;case"s":d=l+o[3],p=u+o[4],c=2*l-c,h=2*u-h,t.bezierCurveTo(c+i,h+r,l+o[1]+i,u+o[2]+r,d+i,p+r),c=l+o[1],h=u+o[2],l=d,u=p;break;case"S":d=o[3],p=o[4],c=2*l-c,h=2*u-h,t.bezierCurveTo(c+i,h+r,o[1]+i,o[2]+r,d+i,p+r),l=d,u=p,c=o[1],h=o[2];break;case"q":d=l+o[3],p=u+o[4],c=l+o[1],h=u+o[2],t.quadraticCurveTo(c+i,h+r,d+i,p+r),l=d,u=p;break;case"Q":d=o[3],p=o[4],t.quadraticCurveTo(o[1]+i,o[2]+r,d+i,p+r),l=d,u=p,c=o[1],h=o[2];break;case"t":d=l+o[1],p=u+o[2],a[0].match(/[QqTt]/)===null?(c=l,h=u):a[0]==="t"?(c=2*l-f,h=2*u-m):a[0]==="q"&&(c=2*l-c,h=2*u-h),f=c,m=h,t.quadraticCurveTo(c+i,h+r,d+i,p+r),l=d,u=p,c=l+o[1],h=u+o[2];break;case"T":d=o[1],p=o[2],c=2*l-c,h=2*u-h,t.quadraticCurveTo(c+i,h+r,d+i,p+r),l=d,u=p;break;case"a":bH(t,l+i,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+l+i,o[7]+u+r]),l+=o[6],u+=o[7];break;case"A":bH(t,l+i,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+i,o[7]+r]),l=o[6],u=o[7];break;case"z":case"Z":l=g,u=b,t.closePath();break}a=o}}function bH(t,e,i,r){let n=dde(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,i);for(let s=0;s<n.length;++s){let o=fde(n[s]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var vH=.5773502691896257,yH={circle:{draw:function(t,e){let i=Math.sqrt(e)/2;t.moveTo(i,0),t.arc(0,0,i,0,Fl)}},cross:{draw:function(t,e){var i=Math.sqrt(e)/2,r=i/2.5;t.moveTo(-i,-r),t.lineTo(-i,r),t.lineTo(-r,r),t.lineTo(-r,i),t.lineTo(r,i),t.lineTo(r,r),t.lineTo(i,r),t.lineTo(i,-r),t.lineTo(r,-r),t.lineTo(r,-i),t.lineTo(-r,-i),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){let i=Math.sqrt(e)/2;t.moveTo(-i,0),t.lineTo(0,-i),t.lineTo(i,0),t.lineTo(0,i),t.closePath()}},square:{draw:function(t,e){var i=Math.sqrt(e),r=-i/2;t.rect(r,r,i,i)}},arrow:{draw:function(t,e){var i=Math.sqrt(e)/2,r=i/7,n=i/2.5,s=i/8;t.moveTo(-r,i),t.lineTo(r,i),t.lineTo(r,-s),t.lineTo(n,-s),t.lineTo(0,-i),t.lineTo(-n,-s),t.lineTo(-r,-s),t.closePath()}},wedge:{draw:function(t,e){var i=Math.sqrt(e)/2,r=I0*i,n=r-i*vH,s=i/4;t.moveTo(0,-r-n),t.lineTo(-s,r-n),t.lineTo(s,r-n),t.closePath()}},triangle:{draw:function(t,e){var i=Math.sqrt(e)/2,r=I0*i,n=r-i*vH;t.moveTo(0,-r-n),t.lineTo(-i,r-n),t.lineTo(i,r-n),t.closePath()}},"triangle-up":{draw:function(t,e){var i=Math.sqrt(e)/2,r=I0*i;t.moveTo(0,-r),t.lineTo(-i,r),t.lineTo(i,r),t.closePath()}},"triangle-down":{draw:function(t,e){var i=Math.sqrt(e)/2,r=I0*i;t.moveTo(0,r),t.lineTo(-i,-r),t.lineTo(i,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var i=Math.sqrt(e)/2,r=I0*i;t.moveTo(r,0),t.lineTo(-r,-i),t.lineTo(-r,i),t.closePath()}},"triangle-left":{draw:function(t,e){var i=Math.sqrt(e)/2,r=I0*i;t.moveTo(-r,0),t.lineTo(r,-i),t.lineTo(r,i),t.closePath()}},stroke:{draw:function(t,e){let i=Math.sqrt(e)/2;t.moveTo(-i,0),t.lineTo(i,0)}}};function WH(t){return _e(yH,t)?yH[t]:mde(t)}var OA={};function mde(t){if(!_e(OA,t)){let e=kf(t);OA[t]={draw:function(i,r){N0(i,e,0,0,Math.sqrt(r)/2)}}}return OA[t]}var Sh=.448084975506;function gde(t){return t.x}function bde(t){return t.y}function vde(t){return t.width}function yde(t){return t.height}function Wu(t){return typeof t=="function"?t:()=>+t}function tC(t,e,i){return Math.max(e,Math.min(t,i))}function VH(){var t=gde,e=bde,i=vde,r=yde,n=Wu(0),s=n,o=n,a=n,l=null;function u(c,h,d){var p,f=h??+t.call(this,c),m=d??+e.call(this,c),g=+i.call(this,c),b=+r.call(this,c),v=Math.min(g,b)/2,y=tC(+n.call(this,c),0,v),x=tC(+s.call(this,c),0,v),_=tC(+o.call(this,c),0,v),w=tC(+a.call(this,c),0,v);if(l||(l=p=of()),y<=0&&x<=0&&_<=0&&w<=0)l.rect(f,m,g,b);else{var C=f+g,E=m+b;l.moveTo(f+y,m),l.lineTo(C-x,m),l.bezierCurveTo(C-Sh*x,m,C,m+Sh*x,C,m+x),l.lineTo(C,E-w),l.bezierCurveTo(C,E-Sh*w,C-Sh*w,E,C-w,E),l.lineTo(f+_,E),l.bezierCurveTo(f+Sh*_,E,f,E-Sh*_,f,E-_),l.lineTo(f,m+y),l.bezierCurveTo(f,m+Sh*y,f+Sh*y,m,f+y,m),l.closePath()}if(p)return l=null,p+""||null}return u.x=function(c){return arguments.length?(t=Wu(c),u):t},u.y=function(c){return arguments.length?(e=Wu(c),u):e},u.width=function(c){return arguments.length?(i=Wu(c),u):i},u.height=function(c){return arguments.length?(r=Wu(c),u):r},u.cornerRadius=function(c,h,d,p){return arguments.length?(n=Wu(c),s=h!=null?Wu(h):n,a=d!=null?Wu(d):n,o=p!=null?Wu(p):s,u):n},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function jH(){var t,e,i,r,n=null,s,o,a,l;function u(h,d,p){let f=p/2;if(s){var m=a-d,g=h-o;if(m||g){var b=Math.hypot(m,g),v=(m/=b)*l,y=(g/=b)*l,x=Math.atan2(g,m);n.moveTo(o-v,a-y),n.lineTo(h-m*f,d-g*f),n.arc(h,d,f,x-Math.PI,x),n.lineTo(o+v,a+y),n.arc(o,a,l,x,x+Math.PI)}else n.arc(h,d,f,0,Fl);n.closePath()}else s=1;o=h,a=d,l=f}function c(h){var d,p=h.length,f,m=!1,g;for(n==null&&(n=g=of()),d=0;d<=p;++d)!(d<p&&r(f=h[d],d,h))===m&&(m=!m)&&(s=0),m&&u(+t(f,d,h),+e(f,d,h),+i(f,d,h));if(g)return n=null,g+""||null}return c.x=function(h){return arguments.length?(t=h,c):t},c.y=function(h){return arguments.length?(e=h,c):e},c.size=function(h){return arguments.length?(i=h,c):i},c.defined=function(h){return arguments.length?(r=h,c):r},c.context=function(h){return arguments.length?(h==null?n=null:n=h,c):n},c}function wv(t,e){return t??e}var _v=t=>t.x||0,Cv=t=>t.y||0,xde=t=>t.width||0,wde=t=>t.height||0,_de=t=>(t.x||0)+(t.width||0),Cde=t=>(t.y||0)+(t.height||0),Sde=t=>t.startAngle||0,Ede=t=>t.endAngle||0,kde=t=>t.padAngle||0,Ade=t=>t.innerRadius||0,Tde=t=>t.outerRadius||0,Rde=t=>t.cornerRadius||0,Dde=t=>wv(t.cornerRadiusTopLeft,t.cornerRadius)||0,Mde=t=>wv(t.cornerRadiusTopRight,t.cornerRadius)||0,Fde=t=>wv(t.cornerRadiusBottomRight,t.cornerRadius)||0,Lde=t=>wv(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Ode=t=>wv(t.size,64),Pde=t=>t.size||1,kC=t=>t.defined!==!1,zde=t=>WH(t.shape||"circle"),Ide=C8().startAngle(Sde).endAngle(Ede).padAngle(kde).innerRadius(Ade).outerRadius(Tde).cornerRadius(Rde),Bde=p_().x(_v).y1(Cv).y0(Cde).defined(kC),Nde=p_().y(Cv).x1(_v).x0(_de).defined(kC),$de=Mb().x(_v).y(Cv).defined(kC),Hde=VH().x(_v).y(Cv).width(xde).height(wde).cornerRadius(Dde,Mde,Fde,Lde),Ude=m_().type(zde).size(Ode),Wde=jH().x(_v).y(Cv).defined(kC).size(Pde);function JA(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function Vde(t,e){return Ide.context(t)(e)}function jde(t,e){let i=e[0],r=i.interpolate||"linear";return(i.orient==="horizontal"?Nde:Bde).curve(KA(r,i.orient,i.tension)).context(t)(e)}function qde(t,e){let i=e[0],r=i.interpolate||"linear";return $de.curve(KA(r,i.orient,i.tension)).context(t)(e)}function W0(t,e,i,r){return Hde.context(t)(e,i,r)}function Gde(t,e){return(e.mark.shape||e.shape).context(t)(e)}function Xde(t,e){return Ude.context(t)(e)}function Yde(t,e){return Wde.context(t)(e)}var qH=1;function GH(){qH=1}function ZA(t,e,i){var r=e.clip,n=t._defs,s=e.clip_id||(e.clip_id="clip"+qH++),o=n.clipping[s]||(n.clipping[s]={id:s});return Je(r)?o.path=r(null):JA(i)?o.path=W0(null,i,0,0):(o.width=i.width||0,o.height=i.height||0),"url(#"+s+")"}function Hi(t){this.clear(),t&&this.union(t)}Hi.prototype={clone(){return new Hi(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,i,r){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,i){let r=this.rotatedPoints(t,e,i);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(t,e,i){var{x1:r,y1:n,x2:s,y2:o}=this,a=Math.cos(t),l=Math.sin(t),u=e-e*a+i*l,c=i-e*l-i*a;return[a*r-l*n+u,l*r+a*n+c,a*r-l*o+u,l*r+a*o+c,a*s-l*n+u,l*s+a*n+c,a*s-l*o+u,l*s+a*o+c]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Sv(t){this.mark=t,this.bounds=this.bounds||new Hi}function Ev(t){Sv.call(this,t),this.items=this.items||[]}we(Ev,Sv);var hC=class{constructor(e){this._pending=0,this._loader=e||b0()}pending(){return this._pending}sanitizeURL(e){let i=this;return xH(i),i._loader.sanitize(e,{context:"href"}).then(r=>(uv(i),r)).catch(()=>(uv(i),null))}loadImage(e){let i=this,r=n$();return xH(i),i._loader.sanitize(e,{context:"image"}).then(n=>{let s=n.href;if(!s||!r)throw{url:s};let o=new r,a=_e(n,"crossOrigin")?n.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>uv(i),o.onerror=()=>uv(i),o.src=s,o}).catch(n=>(uv(i),{complete:!1,width:0,height:0,src:n&&n.url||""}))}ready(){let e=this;return new Promise(i=>{function r(n){e.pending()?setTimeout(()=>{r(!0)},10):i(n)}r(!1)})}};function xH(t){t._pending+=1}function uv(t){t._pending-=1}function Ll(t,e,i){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){let r=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(r+(i?Kde(e,r):0))}return t}function Kde(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e}var Jde=Fl-1e-8,AC,iC,rC,Sf,NA,nC,$A,HA,Eh=(t,e)=>AC.add(t,e),sC=(t,e)=>Eh(iC=t,rC=e),wH=t=>Eh(t,AC.y1),_H=t=>Eh(AC.x1,t),_f=(t,e)=>NA*t+$A*e,Cf=(t,e)=>nC*t+HA*e,PA=(t,e)=>Eh(_f(t,e),Cf(t,e)),zA=(t,e)=>sC(_f(t,e),Cf(t,e));function kv(t,e){return AC=t,e?(Sf=e*Rh,NA=HA=Math.cos(Sf),nC=Math.sin(Sf),$A=-nC):(NA=HA=1,Sf=nC=$A=0),Zde}var Zde={beginPath(){},closePath(){},moveTo:zA,lineTo:zA,rect(t,e,i,r){Sf?(PA(t+i,e),PA(t+i,e+r),PA(t,e+r),zA(t,e)):(Eh(t+i,e+r),sC(t,e))},quadraticCurveTo(t,e,i,r){let n=_f(t,e),s=Cf(t,e),o=_f(i,r),a=Cf(i,r);CH(iC,n,o,wH),CH(rC,s,a,_H),sC(o,a)},bezierCurveTo(t,e,i,r,n,s){let o=_f(t,e),a=Cf(t,e),l=_f(i,r),u=Cf(i,r),c=_f(n,s),h=Cf(n,s);SH(iC,o,l,c,wH),SH(rC,a,u,h,_H),sC(c,h)},arc(t,e,i,r,n,s){if(r+=Sf,n+=Sf,iC=i*Math.cos(n)+t,rC=i*Math.sin(n)+e,Math.abs(n-r)>Jde)Eh(t-i,e-i),Eh(t+i,e+i);else{let o=u=>Eh(i*Math.cos(u)+t,i*Math.sin(u)+e),a,l;if(o(r),o(n),n!==r)if(r=r%Fl,r<0&&(r+=Fl),n=n%Fl,n<0&&(n+=Fl),n<r&&(s=!s,a=r,r=n,n=a),s)for(n-=Fl,a=r-r%wf,l=0;l<4&&a>n;++l,a-=wf)o(a);else for(a=r-r%wf+wf,l=0;l<4&&a<n;++l,a=a+wf)o(a)}}};function CH(t,e,i,r){let n=(t-e)/(t+i-2*e);0<n&&n<1&&r(t+(e-t)*n)}function SH(t,e,i,r,n){let s=r-t+3*e-3*i,o=t+i-2*e,a=t-e,l=0,u=0,c;Math.abs(s)>hde?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),l=(-o+c)/s,u=(-o-c)/s)):l=.5*a/o,0<l&&l<1&&n(EH(l,t,e,i,r)),0<u&&u<1&&n(EH(u,t,e,i,r))}function EH(t,e,i,r,n){let s=1-t,o=s*s,a=t*t;return o*s*e+3*o*t*i+3*s*a*r+a*t*n}var Th=(Th=Po(1,1))?Th.getContext("2d"):null,UA=new Hi;function QA(t){return function(e,i){if(!Th)return!0;t(Th,e),UA.clear().union(e.bounds).intersect(i).round();let{x1:r,y1:n,x2:s,y2:o}=UA;for(let a=n;a<=o;++a)for(let l=r;l<=s;++l)if(Th.isPointInPath(l,a))return!0;return!1}}function e9(t,e){return e.contains(t.x||0,t.y||0)}function XH(t,e){let i=t.x||0,r=t.y||0,n=t.width||0,s=t.height||0;return e.intersects(UA.set(i,r,i+n,r+s))}function YH(t,e){let i=t.x||0,r=t.y||0,n=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r;return B0(e,i,r,n,s)}function B0(t,e,i,r,n){let{x1:s,y1:o,x2:a,y2:l}=t,u=r-e,c=n-i,h=0,d=1,p,f,m,g;for(g=0;g<4;++g){if(g===0&&(p=-u,f=-(s-e)),g===1&&(p=u,f=a-e),g===2&&(p=-c,f=-(o-i)),g===3&&(p=c,f=l-i),Math.abs(p)<1e-10&&f<0)return!1;if(m=f/p,p<0){if(m>d)return!1;m>h&&(h=m)}else if(p>0){if(m<h)return!1;m<d&&(d=m)}}return!0}function $0(t,e){t.globalCompositeOperation=e.blend||"source-over"}function Ca(t,e){return t??e}function kH(t,e){let i=e.length;for(let r=0;r<i;++r)t.addColorStop(e[r].offset,e[r].color);return t}function Qde(t,e,i){let r=i.width(),n=i.height(),s;if(e.gradient==="radial")s=t.createRadialGradient(i.x1+Ca(e.x1,.5)*r,i.y1+Ca(e.y1,.5)*n,Math.max(r,n)*Ca(e.r1,0),i.x1+Ca(e.x2,.5)*r,i.y1+Ca(e.y2,.5)*n,Math.max(r,n)*Ca(e.r2,.5));else{let o=Ca(e.x1,0),a=Ca(e.y1,0),l=Ca(e.x2,1),u=Ca(e.y2,0);if(o===l||a===u||r===n)s=t.createLinearGradient(i.x1+o*r,i.y1+a*n,i.x1+l*r,i.y1+u*n);else{let c=Po(Math.ceil(r),Math.ceil(n)),h=c.getContext("2d");return h.scale(r,n),h.fillStyle=kH(h.createLinearGradient(o,a,l,u),e.stops),h.fillRect(0,0,r,n),t.createPattern(c,"no-repeat")}}return kH(s,e.stops)}function KH(t,e,i){return XA(i)?Qde(t,i,e.bounds):i}function dC(t,e,i){return i*=e.fillOpacity==null?1:e.fillOpacity,i>0?(t.globalAlpha=i,t.fillStyle=KH(t,e,e.fill),!0):!1}var efe=[];function H0(t,e,i){var r=(r=e.strokeWidth)!=null?r:1;return r<=0?!1:(i*=e.strokeOpacity==null?1:e.strokeOpacity,i>0?(t.globalAlpha=i,t.strokeStyle=KH(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||efe),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function tfe(t,e){return t.zindex-e.zindex||t.index-e.index}function t9(t){if(!t.zdirty)return t.zitems;var e=t.items,i=[],r,n,s;for(n=0,s=e.length;n<s;++n)r=e[n],r.index=n,r.zindex&&i.push(r);return t.zdirty=!1,t.zitems=i.sort(tfe)}function Ea(t,e){var i=t.items,r,n;if(!i||!i.length)return;let s=t9(t);if(s&&s.length){for(r=0,n=i.length;r<n;++r)i[r].zindex||e(i[r]);i=s}for(r=0,n=i.length;r<n;++r)e(i[r])}function fC(t,e){var i=t.items,r,n;if(!i||!i.length)return null;let s=t9(t);for(s&&s.length&&(i=s),n=i.length;--n>=0;)if(r=e(i[n]))return r;if(i===s){for(i=t.items,n=i.length;--n>=0;)if(!i[n].zindex&&(r=e(i[n])))return r}return null}function i9(t){return function(e,i,r){Ea(i,n=>{(!r||r.intersects(n.bounds))&&JH(t,e,n,n)})}}function ife(t){return function(e,i,r){i.items.length&&(!r||r.intersects(i.bounds))&&JH(t,e,i.items[0],i.items)}}function JH(t,e,i,r){var n=i.opacity==null?1:i.opacity;n!==0&&(t(e,r)||($0(e,i),i.fill&&dC(e,i,n)&&e.fill(),i.stroke&&H0(e,i,n)&&e.stroke()))}function TC(t){return t=t||yr,function(e,i,r,n,s,o){return r*=e.pixelRatio,n*=e.pixelRatio,fC(i,a=>{let l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&t(e,a,r,n,s,o))return a})}}function Av(t,e){return function(i,r,n,s){var o=Array.isArray(r)?r[0]:r,a=e??o.fill,l=o.stroke&&i.isPointInStroke,u,c;return l&&(u=o.strokeWidth,c=o.strokeCap,i.lineWidth=u??1,i.lineCap=c??"butt"),t(i,r)?!1:a&&i.isPointInPath(n,s)||l&&i.isPointInStroke(n,s)}}function r9(t){return TC(Av(t))}function Ef(t,e){return"translate("+t+","+e+")"}function n9(t){return"rotate("+t+")"}function rfe(t,e){return"scale("+t+","+e+")"}function ZH(t){return Ef(t.x||0,t.y||0)}function nfe(t){return Ef(t.x||0,t.y||0)+(t.angle?" "+n9(t.angle):"")}function sfe(t){return Ef(t.x||0,t.y||0)+(t.angle?" "+n9(t.angle):"")+(t.scaleX||t.scaleY?" "+rfe(t.scaleX||1,t.scaleY||1):"")}function s9(t,e,i){function r(o,a){o("transform",nfe(a)),o("d",e(null,a))}function n(o,a){return e(kv(o,a.angle),a),Ll(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,c=a.angle||0;o.translate(l,u),c&&o.rotate(c*=Rh),o.beginPath(),e(o,a),c&&o.rotate(-c),o.translate(-l,-u)}return{type:t,tag:"path",nested:!1,attr:r,bound:n,draw:i9(s),pick:r9(s),isect:i||QA(s)}}var ofe=s9("arc",Vde);function afe(t,e){for(var i=t[0].orient==="horizontal"?e[1]:e[0],r=t[0].orient==="horizontal"?"y":"x",n=t.length,s=1/0,o,a;--n>=0;)t[n].defined!==!1&&(a=Math.abs(t[n][r]-i),a<s&&(s=a,o=t[n]));return o}function lfe(t,e){for(var i=Math.pow(t[0].strokeWidth||1,2),r=t.length,n,s,o;--r>=0;)if(t[r].defined!==!1&&(n=t[r].x-e[0],s=t[r].y-e[1],o=n*n+s*s,o<i))return t[r];return null}function ufe(t,e){for(var i=t.length,r,n,s;--i>=0;)if(t[i].defined!==!1&&(r=t[i].x-e[0],n=t[i].y-e[1],s=r*r+n*n,r=t[i].size||1,s<r*r))return t[i];return null}function o9(t,e,i){function r(l,u){var c=u.mark.items;c.length&&l("d",e(null,c))}function n(l,u){var c=u.items;return c.length===0?l:(e(kv(l),c),Ll(l,c[0]))}function s(l,u){l.beginPath(),e(l,u)}let o=Av(s);function a(l,u,c,h,d,p){var f=u.items,m=u.bounds;return!f||!f.length||m&&!m.contains(d,p)?null:(c*=l.pixelRatio,h*=l.pixelRatio,o(l,f,c,h)?f[0]:null)}return{type:t,tag:"path",nested:!0,attr:r,bound:n,draw:ife(s),pick:a,isect:e9,tip:i}}var cfe=o9("area",jde,afe);function hfe(t,e){var i=e.clip;t.save(),Je(i)?(t.beginPath(),i(t),t.clip()):QH(t,e.group)}function QH(t,e){t.beginPath(),JA(e)?W0(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function eU(t){let e=Ca(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function dfe(t,e){t("transform",ZH(e))}function tU(t,e){let i=eU(e);t("d",W0(null,e,i,i))}function ffe(t,e){t("class","background"),t("aria-hidden",!0),tU(t,e)}function pfe(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?tU(t,e):t("d","")}function mfe(t,e,i){let r=e.clip?ZA(i,e,e):null;t("clip-path",r)}function gfe(t,e){if(!e.clip&&e.items){let i=e.items,r=i.length;for(let n=0;n<r;++n)t.union(i[n].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),Ll(t,e),t.translate(e.x||0,e.y||0)}function mv(t,e,i,r){let n=eU(e);t.beginPath(),W0(t,e,(i||0)+n,(r||0)+n)}var bfe=Av(mv),vfe=Av(mv,!1),yfe=Av(mv,!0);function xfe(t,e,i,r){Ea(e,n=>{let s=n.x||0,o=n.y||0,a=n.strokeForeground,l=n.opacity==null?1:n.opacity;(n.stroke||n.fill)&&l&&(mv(t,n,s,o),$0(t,n),n.fill&&dC(t,n,l)&&t.fill(),n.stroke&&!a&&H0(t,n,l)&&t.stroke()),t.save(),t.translate(s,o),n.clip&&QH(t,n),i&&i.translate(-s,-o),Ea(n,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(t,u,i,r)}),i&&i.translate(s,o),t.restore(),a&&n.stroke&&l&&(mv(t,n,s,o),$0(t,n),H0(t,n,l)&&t.stroke())})}function wfe(t,e,i,r,n,s){if(e.bounds&&!e.bounds.contains(n,s)||!e.items)return null;let o=i*t.pixelRatio,a=r*t.pixelRatio;return fC(e,l=>{let u,c,h,d=l.bounds;if(d&&!d.contains(n,s))return;c=l.x||0,h=l.y||0;let p=c+(l.width||0),f=h+(l.height||0),m=l.clip;if(m&&(n<c||n>p||s<h||s>f))return;if(t.save(),t.translate(c,h),c=n-c,h=s-h,m&&JA(l)&&!yfe(t,l,o,a))return t.restore(),null;let g=l.strokeForeground,b=e.interactive!==!1;return b&&g&&l.stroke&&vfe(t,l,o,a)?(t.restore(),l):(u=fC(l,v=>_fe(v,c,h)?this.pick(v,i,r,c,h):null),!u&&b&&(l.fill||!g&&l.stroke)&&bfe(t,l,o,a)&&(u=l),t.restore(),u||null)})}function _fe(t,e,i){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,i)}var Cfe={type:"group",tag:"g",nested:!1,attr:dfe,bound:gfe,draw:xfe,pick:wfe,isect:XH,content:mfe,background:ffe,foreground:pfe},gv={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function a9(t,e){var i=t.image;return(!i||t.url&&t.url!==i.url)&&(i={complete:!1,width:0,height:0},e.loadImage(t.url).then(r=>{t.image=r,t.image.url=t.url})),i}function l9(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width}function u9(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height}function RC(t,e){return t==="center"?e/2:t==="right"?e:0}function DC(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function Sfe(t,e,i){let r=a9(e,i),n=l9(e,r),s=u9(e,r),o=(e.x||0)-RC(e.align,n),a=(e.y||0)-DC(e.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";t("href",l,gv["xmlns:xlink"],"xlink:href"),t("transform",Ef(o,a)),t("width",n),t("height",s),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid")}function Efe(t,e){let i=e.image,r=l9(e,i),n=u9(e,i),s=(e.x||0)-RC(e.align,r),o=(e.y||0)-DC(e.baseline,n);return t.set(s,o,s+r,o+n)}function kfe(t,e,i){Ea(e,r=>{if(i&&!i.intersects(r.bounds))return;let n=a9(r,this),s=l9(r,n),o=u9(r,n);if(s===0||o===0)return;let a=(r.x||0)-RC(r.align,s),l=(r.y||0)-DC(r.baseline,o),u,c,h,d;r.aspect!==!1&&(c=n.width/n.height,h=r.width/r.height,c===c&&h===h&&c!==h&&(h<c?(d=s/c,l+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(n.complete||n.toDataURL)&&($0(t,r),t.globalAlpha=(u=r.opacity)!=null?u:1,t.imageSmoothingEnabled=r.smooth!==!1,t.drawImage(n,a,l,s,o))})}var Afe={type:"image",tag:"image",nested:!1,attr:Sfe,bound:Efe,draw:kfe,pick:TC(),isect:yr,get:a9,xOffset:RC,yOffset:DC},Tfe=o9("line",qde,lfe);function Rfe(t,e){var i=e.scaleX||1,r=e.scaleY||1;(i!==1||r!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",sfe(e)),t("d",e.path)}function oC(t,e){var i=e.path;if(i==null)return!0;var r=e.x||0,n=e.y||0,s=e.scaleX||1,o=e.scaleY||1,a=(e.angle||0)*Rh,l=e.pathCache;(!l||l.path!==i)&&((e.pathCache=l=kf(i)).path=i),a&&t.rotate&&t.translate?(t.translate(r,n),t.rotate(a),N0(t,l,0,0,s,o),t.rotate(-a),t.translate(-r,-n)):N0(t,l,r,n,s,o)}function Dfe(t,e){return oC(kv(t,e.angle),e)?t.set(0,0,0,0):Ll(t,e,!0)}var Mfe={type:"path",tag:"path",nested:!1,attr:Rfe,bound:Dfe,draw:i9(oC),pick:r9(oC),isect:QA(oC)};function Ffe(t,e){t("d",W0(null,e))}function Lfe(t,e){var i,r;return Ll(t.set(i=e.x||0,r=e.y||0,i+e.width||0,r+e.height||0),e)}function AH(t,e){t.beginPath(),W0(t,e)}var Ofe={type:"rect",tag:"path",nested:!1,attr:Ffe,bound:Lfe,draw:i9(AH),pick:r9(AH),isect:XH};function Pfe(t,e){t("transform",ZH(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function zfe(t,e){var i,r;return Ll(t.set(i=e.x||0,r=e.y||0,e.x2!=null?e.x2:i,e.y2!=null?e.y2:r),e)}function iU(t,e,i){var r,n,s,o;return e.stroke&&H0(t,e,i)?(r=e.x||0,n=e.y||0,s=e.x2!=null?e.x2:r,o=e.y2!=null?e.y2:n,t.beginPath(),t.moveTo(r,n),t.lineTo(s,o),!0):!1}function Ife(t,e,i){Ea(e,r=>{if(!(i&&!i.intersects(r.bounds))){var n=r.opacity==null?1:r.opacity;n&&iU(t,r,n)&&($0(t,r),t.stroke())}})}function Bfe(t,e,i,r){return t.isPointInStroke?iU(t,e,1)&&t.isPointInStroke(i,r):!1}var Nfe={type:"rule",tag:"line",nested:!1,attr:Pfe,bound:zfe,draw:Ife,pick:TC(Bfe),isect:YH},$fe=s9("shape",Gde),Hfe=s9("symbol",Xde,e9),TH=Sk(),Rs={height:Ol,measureWidth:c9,estimateWidth:pC,width:pC,canvas:rU};rU(!0);function rU(t){Rs.width=t&&Th?c9:pC}function pC(t,e){return nU(Mh(t,e),Ol(t))}function nU(t,e){return~~(.8*t.length*e)}function c9(t,e){return Ol(t)<=0||!(e=Mh(t,e))?0:sU(e,FC(t))}function sU(t,e){let i=`(${e}) ${t}`,r=TH.get(i);return r===void 0&&(Th.font=e,r=Th.measureText(t).width,TH.set(i,r)),r}function Ol(t){return t.fontSize!=null?+t.fontSize||0:11}function Dh(t){return t.lineHeight!=null?t.lineHeight:Ol(t)+2}function Ufe(t){return K(t)?t.length>1?t:t[0]:t}function Tv(t){return Ufe(t.lineBreak&&t.text&&!K(t.text)?t.text.split(t.lineBreak):t.text)}function MC(t){let e=Tv(t);return(K(e)?e.length-1:0)*Dh(t)}function Mh(t,e){let i=e==null?"":(e+"").trim();return t.limit>0&&i.length?Vfe(t,i):i}function Wfe(t){if(Rs.width===c9){let e=FC(t);return i=>sU(i,e)}else if(Rs.width===pC){let e=Ol(t);return i=>nU(i,e)}else return e=>Rs.width(t,e)}function Vfe(t,e){var i=+t.limit,r=Wfe(t);if(r(e)<i)return e;var n=t.ellipsis||"\u2026",s=t.dir==="rtl",o=0,a=e.length,l;if(i-=r(n),s){for(;o<a;)l=o+a>>>1,r(e.slice(l))>i?o=l+1:a=l;return n+e.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),r(e.slice(0,l))<i?o=l:a=l-1;return e.slice(0,o)+n}}function Rv(t,e){var i=t.font;return(e&&i?String(i).replace(/"/g,"'"):i)||"sans-serif"}function FC(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Ol(t)+"px "+Rv(t,e)}function h9(t){var e=t.baseline,i=Ol(t);return Math.round(e==="top"?.79*i:e==="middle"?.3*i:e==="bottom"?-.21*i:e==="line-top"?.29*i+.5*Dh(t):e==="line-bottom"?.29*i-.5*Dh(t):0)}var jfe={left:"start",center:"middle",right:"end"},dv=new Hi;function LC(t){var e=t.x||0,i=t.y||0,r=t.radius||0,n;return r&&(n=(t.theta||0)-wf,e+=r*Math.cos(n),i+=r*Math.sin(n)),dv.x1=e,dv.y1=i,dv}function qfe(t,e){var i=e.dx||0,r=(e.dy||0)+h9(e),n=LC(e),s=n.x1,o=n.y1,a=e.angle||0,l;t("text-anchor",jfe[e.align]||"start"),a?(l=Ef(s,o)+" "+n9(a),(i||r)&&(l+=" "+Ef(i,r))):l=Ef(s+i,o+r),t("transform",l)}function d9(t,e,i){var r=Rs.height(e),n=e.align,s=LC(e),o=s.x1,a=s.y1,l=e.dx||0,u=(e.dy||0)+h9(e)-Math.round(.8*r),c=Tv(e),h;if(K(c)?(r+=Dh(e)*(c.length-1),h=c.reduce((d,p)=>Math.max(d,Rs.width(e,p)),0)):h=Rs.width(e,c),n==="center"?l-=h/2:n==="right"&&(l-=h),t.set(l+=o,u+=a,l+h,u+r),e.angle&&!i)t.rotate(e.angle*Rh,o,a);else if(i===2)return t.rotatedPoints(e.angle*Rh,o,a);return t}function Gfe(t,e,i){Ea(e,r=>{var n=r.opacity==null?1:r.opacity,s,o,a,l,u,c,h;if(!(i&&!i.intersects(r.bounds)||n===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(t.font=FC(r),t.textAlign=r.align||"left",s=LC(r),o=s.x1,a=s.y1,r.angle&&(t.save(),t.translate(o,a),t.rotate(r.angle*Rh),o=a=0),o+=r.dx||0,a+=(r.dy||0)+h9(r),c=Tv(r),$0(t,r),K(c))for(u=Dh(r),l=0;l<c.length;++l)h=Mh(r,c[l]),r.fill&&dC(t,r,n)&&t.fillText(h,o,a),r.stroke&&H0(t,r,n)&&t.strokeText(h,o,a),a+=u;else h=Mh(r,c),r.fill&&dC(t,r,n)&&t.fillText(h,o,a),r.stroke&&H0(t,r,n)&&t.strokeText(h,o,a);r.angle&&t.restore()}})}function Xfe(t,e,i,r,n,s){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=LC(e),a=o.x1,l=o.y1,u=d9(dv,e,1),c=-e.angle*Rh,h=Math.cos(c),d=Math.sin(c),p=h*n-d*s+(a-h*a+d*l),f=d*n+h*s+(l-d*a-h*l);return u.contains(p,f)}function Yfe(t,e){let i=d9(dv,t,2);return B0(e,i[0],i[1],i[2],i[3])||B0(e,i[0],i[1],i[4],i[5])||B0(e,i[4],i[5],i[6],i[7])||B0(e,i[2],i[3],i[6],i[7])}var Kfe={type:"text",tag:"text",nested:!1,attr:qfe,bound:d9,draw:Gfe,pick:TC(Xfe),isect:Yfe},Jfe=o9("trail",Yde,ufe),ns={arc:ofe,area:cfe,group:Cfe,image:Afe,line:Tfe,path:Mfe,rect:Ofe,rule:Nfe,shape:$fe,symbol:Hfe,text:Kfe,trail:Jfe};function WA(t,e,i){var r=ns[t.mark.marktype],n=e||r.bound;return r.nested&&(t=t.mark),n(t.bounds||(t.bounds=new Hi),t,i)}var RH={mark:null};function oU(t,e,i){var r=ns[t.marktype],n=r.bound,s=t.items,o=s&&s.length,a,l,u,c;if(r.nested)return o?u=s[0]:(RH.mark=t,u=RH),c=WA(u,n,i),e=e&&e.union(c)||c,e;if(e=e||t.bounds&&t.bounds.clear()||new Hi,o)for(a=0,l=s.length;a<l;++a)e.union(WA(s[a],n,i));return t.bounds=e}var Zfe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function aU(t,e){return JSON.stringify(t,Zfe,e)}function lU(t){let e=typeof t=="string"?JSON.parse(t):t;return uU(e)}function uU(t){var e=t.marktype,i=t.items,r,n,s;if(i)for(n=0,s=i.length;n<s;++n)r=e?"mark":"group",i[n][r]=t,i[n].zindex&&(i[n][r].zdirty=!0),(e||r)==="group"&&uU(i[n]);return e&&oU(t),t}var bv=class{constructor(e){arguments.length?this.root=lU(e):(this.root=DH({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Ev(this.root)])}toJSON(e){return aU(this.root,e||0)}mark(e,i,r){i=i||this.root.items[0];let n=DH(e,i);return i.items[r]=n,n.zindex&&(n.group.zdirty=!0),n}};function DH(t,e){let i={bounds:new Hi,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(i.aria=t.aria),t.description&&(i.description=t.description),i}function kh(t,e,i){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?i?t.createElementNS(i,e):t.createElement(e):null}function f9(t,e){e=e.toLowerCase();for(var i=t.childNodes,r=0,n=i.length;r<n;++r)if(i[r].tagName.toLowerCase()===e)return i[r]}function _r(t,e,i,r){var n=t.childNodes[e],s;return(!n||n.tagName.toLowerCase()!==i.toLowerCase())&&(s=n||null,n=kh(t.ownerDocument,i,r),t.insertBefore(n,s)),n}function No(t,e){for(var i=t.childNodes,r=i.length;r>e;)t.removeChild(i[--r]);return t}function cU(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function Dv(t,e){let i=e.getBoundingClientRect();return[t.clientX-i.left-(e.clientLeft||0),t.clientY-i.top-(e.clientTop||0)]}function Qfe(t,e,i,r){var n=t&&t.mark,s,o;if(n&&(s=ns[n.marktype]).tip){for(o=Dv(e,i),o[0]-=r[0],o[1]-=r[1];t=t.mark.group;)o[0]-=t.x||0,o[1]-=t.y||0;t=s.tip(n.items,o)}return t}var vv=class{constructor(e,i){this._active=null,this._handlers={},this._loader=e||b0(),this._tooltip=i||epe}initialize(e,i,r){return this._el=e,this._obj=r||null,this.origin(i)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()}scene(e){return arguments.length?(this._scene=e,this):this._scene}on(){}off(){}_handlerIndex(e,i,r){for(let n=e?e.length:0;--n>=0;)if(e[n].type===i&&(!r||e[n].handler===r))return n;return-1}handlers(e){let i=this._handlers,r=[];if(e)r.push(...i[this.eventName(e)]);else for(let n in i)r.push(...i[n]);return r}eventName(e){let i=e.indexOf(".");return i<0?e:e.slice(0,i)}handleHref(e,i,r){this._loader.sanitize(r,{context:"href"}).then(n=>{let s=new MouseEvent(e.type,e),o=kh(null,"a");for(let a in n)o.setAttribute(a,n[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(e,i,r){if(i&&i.tooltip!=null){i=Qfe(i,e,this.canvas(),this._origin);let n=r&&i&&i.tooltip||null;this._tooltip.call(this._obj,this,e,i,n)}}getItemBoundingClientRect(e){let i=this.canvas();if(!i)return;let r=i.getBoundingClientRect(),n=this._origin,s=e.bounds,o=s.width(),a=s.height(),l=s.x1+n[0]+r.left,u=s.y1+n[1]+r.top;for(;e.mark&&(e=e.mark.group);)l+=e.x||0,u+=e.y||0;return{x:l,y:u,width:o,height:a,left:l,top:u,right:l+o,bottom:u+a}}};function epe(t,e,i,r){t.element().setAttribute("title",r||"")}var Af=class{constructor(e){this._el=null,this._bgcolor=null,this._loader=new hC(e)}initialize(e,i,r,n,s){return this._el=e,this.resize(i,r,n,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)}resize(e,i,r,n){return this._width=e,this._height=i,this._origin=r||[0,0],this._scale=n||1,this}dirty(){}render(e,i){let r=this;return r._call=function(){r._render(e,i)},r._call(),r._call=null,r}_render(){}renderAsync(e,i){let r=this.render(e,i);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(e,i){var r=this,n=r._loader[e](i);if(!r._ready){let s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return n}sanitizeURL(e){return this._load("sanitizeURL",e)}loadImage(e){return this._load("loadImage",e)}},tpe="keydown",ipe="keypress",rpe="keyup",hU="dragenter",aC="dragleave",dU="dragover",VA="pointerdown",npe="pointerup",mC="pointermove",lC="pointerout",fU="pointerover",jA="mousedown",spe="mouseup",pU="mousemove",gC="mouseout",mU="mouseover",bC="click",ope="dblclick",ape="wheel",gU="mousewheel",vC="touchstart",yC="touchmove",xC="touchend",lpe=[tpe,ipe,rpe,hU,aC,dU,VA,npe,mC,lC,fU,jA,spe,pU,gC,mU,bC,ope,ape,gU,vC,yC,xC],qA=mC,fv=gC,GA=bC,Fh=class extends vv{constructor(e,i){super(e,i),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=lpe,this.pointermove=FH([mC,pU],[fU,mU],[lC,gC]),this.dragover=FH([dU],[hU],[aC]),this.pointerout=LH([lC,gC]),this.dragleave=LH([aC])}initialize(e,i,r){return this._canvas=e&&f9(e,"canvas"),[bC,jA,VA,mC,lC,aC].forEach(n=>MH(this,n)),super.initialize(e,i,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(e){this.fire(gU,e)}pointerdown(e){this._down=this._active,this.fire(VA,e)}mousedown(e){this._down=this._active,this.fire(jA,e)}click(e){this._down===this._active&&(this.fire(bC,e),this._down=null)}touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(vC,e,!0)}touchmove(e){this.fire(yC,e,!0)}touchend(e){this.fire(xC,e,!0),this._touch=null}fire(e,i,r){let n=r?this._touch:this._active,s=this._handlers[e];if(i.vegaType=e,e===GA&&n&&n.href?this.handleHref(i,n,n.href):(e===qA||e===fv)&&this.handleTooltip(i,n,e!==fv),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,i,n)}on(e,i){let r=this.eventName(e),n=this._handlers;return this._handlerIndex(n[r],e,i)<0&&(MH(this,e),(n[r]||(n[r]=[])).push({type:e,handler:i})),this}off(e,i){let r=this.eventName(e),n=this._handlers[r],s=this._handlerIndex(n,e,i);return s>=0&&n.splice(s,1),this}pickEvent(e){let i=Dv(e,this._canvas),r=this._origin;return this.pick(this._scene,i[0],i[1],i[0]-r[0],i[1]-r[1])}pick(e,i,r,n,s){let o=this.context();return ns[e.marktype].pick.call(this,o,e,i,r,n,s)}},upe=t=>t===vC||t===yC||t===xC?[vC,yC,xC]:[t];function MH(t,e){upe(e).forEach(i=>cpe(t,i))}function cpe(t,e){let i=t.canvas();i&&!t._events[e]&&(t._events[e]=1,i.addEventListener(e,t[e]?r=>t[e](r):r=>t.fire(e,r)))}function hv(t,e,i){e.forEach(r=>t.fire(r,i))}function FH(t,e,i){return function(r){let n=this._active,s=this.pickEvent(r);s===n?hv(this,t,r):((!n||!n.exit)&&hv(this,i,r),this._active=s,hv(this,e,r),hv(this,t,r))}}function LH(t){return function(e){hv(this,t,e),this._active=null}}function hpe(){return typeof window<"u"&&window.devicePixelRatio||1}function dpe(t,e,i,r,n,s){let o=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,a=t.getContext("2d"),l=o?hpe():n;t.width=e*l,t.height=i*l;for(let u in s)a[u]=s[u];return o&&l!==1&&(t.style.width=e+"px",t.style.height=i+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),t}var U0=class extends Af{constructor(e){super(e),this._options={},this._redraw=!1,this._dirty=new Hi,this._tempb=new Hi}initialize(e,i,r,n,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Po(1,1,this._options.type),e&&this._canvas&&(No(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(e,i,r,n,s)}resize(e,i,r,n){if(super.resize(e,i,r,n),this._canvas)dpe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let s=this._options.externalContext;s||te("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(e){let i=this._tempb.clear().union(e.bounds),r=e.mark.group;for(;r;)i.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(i)}_render(e,i){let r=this.context(),n=this._origin,s=this._width,o=this._height,a=this._dirty,l=fpe(n,s,o);r.save();let u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):ppe(r,l.intersect(a),n);return this.clear(-n[0],-n[1],s,o),this.draw(r,e,u,i),r.restore(),a.clear(),this}draw(e,i,r,n){if(i.marktype!=="group"&&n!=null&&!n.includes(i.marktype))return;let s=ns[i.marktype];i.clip&&hfe(e,i),s.draw.call(this,e,i,r,n),i.clip&&e.restore()}clear(e,i,r,n){let s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(e,i,r,n),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,i,r,n))}},fpe=(t,e,i)=>new Hi().set(0,0,e,i).translate(-t[0],-t[1]);function ppe(t,e,i){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(i[0]%1),-(i[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}var wC=class extends vv{constructor(e,i){super(e,i);let r=this;r._hrefHandler=IA(r,(n,s)=>{s&&s.href&&r.handleHref(n,s,s.href)}),r._tooltipHandler=IA(r,(n,s)=>{r.handleTooltip(n,s,n.type!==fv)})}initialize(e,i,r){let n=this._svg;return n&&(n.removeEventListener(GA,this._hrefHandler),n.removeEventListener(qA,this._tooltipHandler),n.removeEventListener(fv,this._tooltipHandler)),this._svg=n=e&&f9(e,"svg"),n&&(n.addEventListener(GA,this._hrefHandler),n.addEventListener(qA,this._tooltipHandler),n.addEventListener(fv,this._tooltipHandler)),super.initialize(e,i,r)}canvas(){return this._svg}on(e,i){let r=this.eventName(e),n=this._handlers;if(this._handlerIndex(n[r],e,i)<0){let o={type:e,handler:i,listener:IA(this,i)};(n[r]||(n[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(e,i){let r=this.eventName(e),n=this._handlers[r],s=this._handlerIndex(n,e,i);return s>=0&&(this._svg&&this._svg.removeEventListener(r,n[s].listener),n.splice(s,1)),this}},IA=(t,e)=>i=>{let r=i.target.__data__;r=Array.isArray(r)?r[0]:r,i.vegaType=i.type,e.call(t._obj,i,r)},bU="aria-hidden",p9="aria-label",m9="role",g9="aria-roledescription",vU="graphics-object",b9="graphics-symbol",yU=(t,e,i)=>({[m9]:t,[g9]:e,[p9]:i||void 0}),mpe=or(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),OH={axis:{desc:"axis",caption:vpe},legend:{desc:"legend",caption:ype},"title-text":{desc:"title",caption:t=>`Title text '${zH(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${zH(t)}'`}},PH={ariaRole:m9,ariaRoleDescription:g9,description:p9};function xU(t,e){let i=e.aria===!1;if(t(bU,i||void 0),i||e.description==null)for(let r in PH)t(PH[r],void 0);else{let r=e.mark.marktype;t(p9,e.description),t(m9,e.ariaRole||(r==="group"?vU:b9)),t(g9,e.ariaRoleDescription||`${r} mark`)}}function wU(t){return t.aria===!1?{[bU]:!0}:mpe[t.role]?null:OH[t.role]?bpe(t,OH[t.role]):gpe(t)}function gpe(t){let e=t.marktype,i=e==="group"||e==="text"||t.items.some(r=>r.description!=null&&r.aria!==!1);return yU(i?vU:b9,`${e} mark container`,t.description)}function bpe(t,e){try{let i=t.items[0],r=e.caption||(()=>"");return yU(e.role||b9,e.desc,i.description||r(i))}catch{return null}}function zH(t){return ve(t.text).join(" ")}function vpe(t){let e=t.datum,i=t.orient,r=e.title?_U(t):null,n=t.context,s=n.scales[e.scale].value,o=n.dataflow.locale(),a=s.type;return`${i==="left"||i==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Ch(a)?"discrete":a} scale with ${MA(o,s,t)}`}function ype(t){let e=t.datum,i=e.title?_U(t):null,r=`${e.type||""} legend`.trim(),n=e.scales,s=Object.keys(n),o=t.context,a=o.scales[n[s[0]]].value,l=o.dataflow.locale();return wpe(r)+(i?` titled '${i}'`:"")+` for ${xpe(s)} with ${MA(l,a,t)}`}function _U(t){try{return ve(ht(t.items).items[0].text).join(" ")}catch{return null}}function xpe(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+ht(t)}function wpe(t){return t.length?t[0].toUpperCase()+t.slice(1):t}var CU=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),_pe=t=>CU(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function v9(){let t="",e="",i="",r=[],n=()=>e=i="",s=l=>{e&&(t+=`${e}>${i}`,n()),r.push(l)},o=(l,u)=>(u!=null&&(e+=` ${l}="${_pe(u)}"`),a),a={open(l){s(l),e="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),h=1;h<u;h++)c[h-1]=arguments[h];for(let d of c)for(let p in d)o(p,d[p]);return a},close(){let l=r.pop();return e?t+=e+(i?`>${i}</${l}>`:"/>"):t+=`</${l}>`,n(),a},attr:o,text:l=>(i+=CU(l),a),toString:()=>t};return a}var SU=t=>EU(v9(),t)+"";function EU(t,e){if(t.open(e.tagName),e.hasAttributes()){let i=e.attributes,r=i.length;for(let n=0;n<r;++n)t.attr(i[n].name,i[n].value)}if(e.hasChildNodes()){let i=e.childNodes;for(let r of i)r.nodeType===3?t.text(r.nodeValue):EU(t,r)}return t.close()}var _C={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},CC={blend:"mix-blend-mode"},kU={fill:"none","stroke-miterlimit":10},cv=0,IH="http://www.w3.org/2000/xmlns/",wr=gv.xmlns,yv=class extends Af{constructor(e){super(e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(e,i,r,n,s){return this._defs={},this._clearDefs(),e&&(this._svg=_r(e,0,"svg",wr),this._svg.setAttributeNS(IH,"xmlns",wr),this._svg.setAttributeNS(IH,"xmlns:xlink",gv["xmlns:xlink"]),this._svg.setAttribute("version",gv.version),this._svg.setAttribute("class","marks"),No(e,1),this._root=_r(this._svg,cv,"g",wr),Ah(this._root,kU),No(this._svg,cv+1)),this.background(this._bgcolor),super.initialize(e,i,r,n,s)}background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),super.background(...arguments)}resize(e,i,r,n){return super.resize(e,i,r,n),this._svg&&(Ah(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){let e=this._svg,i=this._bgcolor;if(!e)return null;let r;i&&(e.removeAttribute("style"),r=_r(e,cv,"rect",wr),Ah(r,{width:this._width,height:this._height,fill:i}));let n=SU(e);return i&&(e.removeChild(r),this._svg.style.setProperty("background-color",i)),n}_render(e,i){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,i),No(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))}isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;let e=this._dirty;if(!e.length||!this._dirtyID)return!0;let i=++this._dirtyID,r,n,s,o,a,l,u;for(a=0,l=e.length;a<l;++a)if(r=e[a],n=r.mark,n.marktype!==s&&(s=n.marktype,o=ns[s]),n.zdirty&&n.dirty!==i&&(this._dirtyAll=!1,BH(r,i),n.items.forEach(c=>{c.dirty=i})),!n.zdirty){if(r.exit){o.nested&&n.items.length?(u=n.items[0],u._svg&&this._update(o,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=o.nested?n.items[0]:r,r._update!==i&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,BH(r,i)):this._update(o,r._svg,r),r._update=i)}return!this._dirtyAll}mark(e,i,r,n){if(!this.isDirty(i))return i._svg;let s=this._svg,o=i.marktype,a=ns[o],l=i.interactive===!1?"none":null,u=a.tag==="g",c=NH(i,e,r,"g",s);if(o!=="group"&&n!=null&&!n.includes(o))return No(c,0),i._svg;c.setAttribute("class",cU(i));let h=wU(i);for(let m in h)rs(c,m,h[m]);u||rs(c,"pointer-events",l),rs(c,"clip-path",i.clip?ZA(this,i,i.group):null);let d=null,p=0,f=m=>{let g=this.isDirty(m),b=NH(m,c,d,a.tag,s);g&&(this._update(a,b,m),u&&Epe(this,b,m,n)),d=b,++p};return a.nested?i.items.length&&f(i.items[0]):Ea(i,f),No(c,p),c}_update(e,i,r){Vu=i,kn=i.__values__,xU(pv,r),e.attr(pv,r,this);let n=Ape[e.type];n&&n.call(this,e,i,r),Vu&&this.style(Vu,r)}style(e,i){if(i!=null){for(let r in _C){let n=r==="font"?Rv(i):i[r];if(n===kn[r])continue;let s=_C[r];n==null?e.removeAttribute(s):(XA(n)&&(n=HH(n,this._defs.gradient,AU())),e.setAttribute(s,n+"")),kn[r]=n}for(let r in CC)uC(e,CC[r],i[r])}}defs(){let e=this._svg,i=this._defs,r=i.el,n=0;for(let s in i.gradient)r||(i.el=r=_r(e,cv+1,"defs",wr)),n=Cpe(r,i.gradient[s],n);for(let s in i.clipping)r||(i.el=r=_r(e,cv+1,"defs",wr)),n=Spe(r,i.clipping[s],n);r&&(n===0?(e.removeChild(r),i.el=null):No(r,n))}_clearDefs(){let e=this._defs;e.gradient={},e.clipping={}}};function BH(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}function Cpe(t,e,i){let r,n,s;if(e.gradient==="radial"){let o=_r(t,i++,"pattern",wr);Ah(o,{id:cC+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=_r(o,0,"rect",wr),Ah(o,{width:1,height:1,fill:`url(${AU()}#${e.id})`}),t=_r(t,i++,"radialGradient",wr),Ah(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=_r(t,i++,"linearGradient",wr),Ah(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(r=0,n=e.stops.length;r<n;++r)s=_r(t,r,"stop",wr),s.setAttribute("offset",e.stops[r].offset),s.setAttribute("stop-color",e.stops[r].color);return No(t,r),i}function Spe(t,e,i){let r;return t=_r(t,i,"clipPath",wr),t.setAttribute("id",e.id),e.path?(r=_r(t,0,"path",wr),r.setAttribute("d",e.path)):(r=_r(t,0,"rect",wr),Ah(r,{x:0,y:0,width:e.width,height:e.height})),No(t,1),i+1}function Epe(t,e,i,r){e=e.lastChild.previousSibling;let n,s=0;Ea(i,o=>{n=t.mark(e,o,n,r),++s}),No(e,1+s)}function NH(t,e,i,r,n){let s=t._svg,o;if(!s&&(o=e.ownerDocument,s=kh(o,r,wr),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},r==="g"))){let a=kh(o,"path",wr);s.appendChild(a),a.__data__=t;let l=kh(o,"g",wr);s.appendChild(l),l.__data__=t;let u=kh(o,"path",wr);s.appendChild(u),u.__data__=t,u.__values__={fill:"default"}}return(s.ownerSVGElement!==n||kpe(s,i))&&e.insertBefore(s,i?i.nextSibling:e.firstChild),s}function kpe(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}var Vu=null,kn=null,Ape={group(t,e,i){let r=Vu=e.childNodes[2];kn=r.__values__,t.foreground(pv,i,this),kn=e.__values__,Vu=e.childNodes[1],t.content(pv,i,this);let n=Vu=e.childNodes[0];t.background(pv,i,this);let s=i.mark.interactive===!1?"none":null;if(s!==kn.events&&(rs(r,"pointer-events",s),rs(n,"pointer-events",s),kn.events=s),i.strokeForeground&&i.stroke){let o=i.fill;rs(r,"display",null),this.style(n,i),rs(n,"stroke",null),o&&(i.fill=null),kn=r.__values__,this.style(r,i),o&&(i.fill=o),Vu=null}else rs(r,"display","none")},image(t,e,i){i.smooth===!1?(uC(e,"image-rendering","optimizeSpeed"),uC(e,"image-rendering","pixelated")):uC(e,"image-rendering",null)},text(t,e,i){let r=Tv(i),n,s,o,a;K(r)?(s=r.map(l=>Mh(i,l)),n=s.join(`
`),n!==kn.text&&(No(e,0),o=e.ownerDocument,a=Dh(i),s.forEach((l,u)=>{let c=kh(o,"tspan",wr);c.__data__=i,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),e.appendChild(c)}),kn.text=n)):(s=Mh(i,r),s!==kn.text&&(e.textContent=s,kn.text=s)),rs(e,"font-family",Rv(i)),rs(e,"font-size",Ol(i)+"px"),rs(e,"font-style",i.fontStyle),rs(e,"font-variant",i.fontVariant),rs(e,"font-weight",i.fontWeight)}};function pv(t,e,i){e!==kn[t]&&(i?Tpe(Vu,t,e,i):rs(Vu,t,e),kn[t]=e)}function uC(t,e,i){i!==kn[e]&&(i==null?t.style.removeProperty(e):t.style.setProperty(e,i+""),kn[e]=i)}function Ah(t,e){for(let i in e)rs(t,i,e[i])}function rs(t,e,i){i!=null?t.setAttribute(e,i):t.removeAttribute(e)}function Tpe(t,e,i,r){i!=null?t.setAttributeNS(r,e,i):t.removeAttributeNS(r,e)}function AU(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}var SC=class extends Af{constructor(e){super(e),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(e){let i=v9();i.open("svg",Ze({},gv,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&i.open("rect",{width:this._width,height:this._height,fill:r}).close(),i.open("g",kU,{transform:"translate("+this._origin+")"}),this.mark(i,e),i.close(),this.defs(i),this._text=i.close()+"",this}mark(e,i){let r=ns[i.marktype],n=r.tag,s=[xU,r.attr];e.open("g",{class:cU(i),"clip-path":i.clip?ZA(this,i,i.group):null},wU(i),{"pointer-events":n!=="g"&&i.interactive===!1?"none":null});let o=a=>{let l=this.href(a);if(l&&e.open("a",l),e.open(n,this.attr(i,a,s,n!=="g"?n:null)),n==="text"){let u=Tv(a);if(K(u)){let c={x:0,dy:Dh(a)};for(let h=0;h<u.length;++h)e.open("tspan",h?c:null).text(Mh(a,u[h])).close()}else e.text(Mh(a,u))}else if(n==="g"){let u=a.strokeForeground,c=a.fill,h=a.stroke;u&&h&&(a.stroke=null),e.open("path",this.attr(i,a,r.background,"bgrect")).close(),e.open("g",this.attr(i,a,r.content)),Ea(a,d=>this.mark(e,d)),e.close(),u&&h?(c&&(a.fill=null),a.stroke=h,e.open("path",this.attr(i,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):e.open("path",this.attr(i,a,r.foreground,"bgfore")).close()}e.close(),l&&e.close()};return r.nested?i.items&&i.items.length&&o(i.items[0]):Ea(i,o),e.close()}href(e){let i=e.href,r;if(i){if(r=this._hrefs&&this._hrefs[i])return r;this.sanitizeURL(i).then(n=>{n["xlink:href"]=n.href,n.href=null,(this._hrefs||(this._hrefs={}))[i]=n})}return null}attr(e,i,r,n){let s={},o=(a,l,u,c)=>{s[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(o,i,this)):r(o,i,this),n&&Rpe(s,i,e,n,this._defs),s}defs(e){let i=this._defs.gradient,r=this._defs.clipping;if(Object.keys(i).length+Object.keys(r).length!==0){e.open("defs");for(let s in i){let o=i[s],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:cC+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),e.close(),e.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<a.length;++l)e.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();e.close()}for(let s in r){let o=r[s];e.open("clipPath",{id:s}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}};function Rpe(t,e,i,r,n){let s;if(e==null||(r==="bgrect"&&i.interactive===!1&&(t["pointer-events"]="none"),r==="bgfore"&&(i.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null)))return t;r==="image"&&e.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(t["font-family"]=Rv(e),t["font-size"]=Ol(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(let o in _C){let a=e[o],l=_C[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(XA(a)&&(a=HH(a,n.gradient,"")),t[l]=a)}for(let o in CC){let a=e[o];a!=null&&(s=s||[],s.push(`${CC[o]}: ${a};`))}return s&&(t.style=s.join(" ")),t}var Sa={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Dpe(t){Sa.svgMarkTypes=t.svgMarkTypes??["text"],Sa.svgOnTop=t.svgOnTop??!0,Sa.debug=t.debug??!1}var xv=class extends Af{constructor(e){super(e),this._svgRenderer=new yv(e),this._canvasRenderer=new U0(e)}initialize(e,i,r,n,s){this._root_el=_r(e,0,"div");let o=_r(this._root_el,0,"div"),a=_r(this._root_el,1,"div");return this._root_el.style.position="relative",Sa.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Sa.svgOnTop?a:o,this._canvasEl=Sa.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,i,r,n,s),this._svgRenderer.initialize(this._svgEl,i,r,n,s),super.initialize(e,i,r,n,s)}dirty(e){return Sa.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this}_render(e,i){let n=(i??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Sa.svgMarkTypes.includes(s));this._svgRenderer.render(e,Sa.svgMarkTypes),this._canvasRenderer.render(e,n)}resize(e,i,r,n){return super.resize(e,i,r,n),this._svgRenderer.resize(e,i,r,n),this._canvasRenderer.resize(e,i,r,n),this}background(e){return Sa.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}},EC=class extends Fh{constructor(e,i){super(e,i)}initialize(e,i,r){let n=_r(_r(e,0,"div"),Sa.svgOnTop?0:1,"div");return super.initialize(n,i,r)}},TU="canvas",RU="hybrid",DU="png",MU="svg",FU="none",ju={Canvas:TU,PNG:DU,SVG:MU,Hybrid:RU,None:FU},Tf={};Tf[TU]=Tf[DU]={renderer:U0,headless:U0,handler:Fh};Tf[MU]={renderer:yv,headless:SC,handler:wC};Tf[RU]={renderer:xv,headless:xv,handler:EC};Tf[FU]={};function Mv(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(Tf[t]=e,this):Tf[t]}function y9(t,e,i){let r=[],n=new Hi().union(e),s=t.marktype;return s?LU(t,n,i,r):s==="group"?OU(t,n,i,r):te("Intersect scene must be mark node or group item.")}function LU(t,e,i,r){if(Mpe(t,e,i)){let n=t.items,s=t.marktype,o=n.length,a=0;if(s==="group")for(;a<o;++a)OU(n[a],e,i,r);else for(let l=ns[s].isect;a<o;++a){let u=n[a];PU(u,e,l)&&r.push(u)}}return r}function Mpe(t,e,i){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!i||i(t)))}function OU(t,e,i,r){i&&i(t.mark)&&PU(t,e,ns.group.isect)&&r.push(t);let n=t.items,s=n&&n.length;if(s){let o=t.x||0,a=t.y||0;e.translate(-o,-a);for(let l=0;l<s;++l)LU(n[l],e,i,r);e.translate(o,a)}return r}function PU(t,e,i){let r=t.bounds;return e.encloses(r)||e.intersects(r)&&i(t,e)}var BA=new Hi;function x9(t){let e=t.clip;if(Je(e))e(kv(BA.clear()));else if(e)BA.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(BA)}var Fpe=1e-9;function w9(t,e,i){return t===e?!0:i==="path"?zU(t,e):t instanceof Date&&e instanceof Date?+t==+e:ct(t)&&ct(e)?Math.abs(t-e)<=Fpe:!t||!e||!ge(t)&&!ge(e)?t==e:Lpe(t,e)}function zU(t,e){return w9(kf(t),kf(e))}function Lpe(t,e){var i=Object.keys(t),r=Object.keys(e),n,s;if(i.length!==r.length)return!1;for(i.sort(),r.sort(),s=i.length-1;s>=0;s--)if(i[s]!=r[s])return!1;for(s=i.length-1;s>=0;s--)if(n=i[s],!w9(t[n],e[n],n))return!1;return typeof t==typeof e}function Ope(){GH(),nde()}var q0="top",ka="left",Aa="right",Ph="bottom",Ppe="top-left",zpe="top-right",Ipe="bottom-left",Bpe="bottom-right",S9="start",_9="middle",ss="end",Npe="x",$pe="y",BC="group",E9="axis",k9="title",Hpe="frame",Upe="scope",A9="legend",qU="row-header",GU="row-footer",XU="row-title",YU="column-header",KU="column-footer",JU="column-title",Wpe="padding",Vpe="symbol",ZU="fit",QU="fit-x",eW="fit-y",jpe="pad",T9="none",OC="all",C9="each",R9="flush",Lh="column",Oh="row";function tW(t){ee.call(this,null,t)}we(tW,ee,{transform(t,e){let i=e.dataflow,r=t.mark,n=r.marktype,s=ns[n],o=s.bound,a=r.bounds,l;if(s.nested)r.items.length&&i.dirty(r.items[0]),a=PC(r,o),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(n===BC||t.modified())switch(e.visit(e.MOD,u=>i.dirty(u)),a.clear(),r.items.forEach(u=>a.union(PC(u,o))),r.role){case E9:case A9:case k9:e.reflow()}else l=e.changed(e.REM),e.visit(e.ADD,u=>{a.union(PC(u,o))}),e.visit(e.MOD,u=>{l=l||a.alignsWith(u.bounds),i.dirty(u),a.union(PC(u,o))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return x9(r),e.modifies("bounds")}});function PC(t,e,i){return e(t.bounds.clear(),t,i)}var IU=":vega_identifier:";function D9(t){ee.call(this,0,t)}D9.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};we(D9,ee,{transform(t,e){let i=qpe(e.dataflow),r=t.as,n=i.value;return e.visit(e.ADD,s=>s[r]=s[r]||++n),i.set(this.value=n),e}});function qpe(t){return t._signals[IU]||(t._signals[IU]=t.add(0))}function iW(t){ee.call(this,null,t)}we(iW,ee,{transform(t,e){let i=this.value;i||(i=e.dataflow.scenegraph().mark(t.markdef,Gpe(t),t.index),i.group.context=t.context,t.context.group||(t.context.group=i.group),i.source=this.source,i.clip=t.clip,i.interactive=t.interactive,this.value=i);let r=i.marktype===BC?Ev:Sv;return e.visit(e.ADD,n=>r.call(n,i)),(t.modified("clip")||t.modified("interactive"))&&(i.clip=t.clip,i.interactive=!!t.interactive,i.zdirty=!0,e.reflow()),i.items=e.source,e}});function Gpe(t){let e=t.groups,i=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&i?e.lookup(i):null}function rW(t){ee.call(this,null,t)}var BU={parity:t=>t.filter((e,i)=>i%2?e.opacity=0:1),greedy:(t,e)=>{let i;return t.filter((r,n)=>!n||!nW(i.bounds,r.bounds,e)?(i=r,1):r.opacity=0)}},nW=(t,e,i)=>i>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),NU=(t,e)=>{for(var i=1,r=t.length,n=t[0].bounds,s;i<r;n=s,++i)if(nW(n,s=t[i].bounds,e))return!0},Xpe=t=>{let e=t.bounds;return e.width()>1&&e.height()>1},Ype=(t,e,i)=>{var r=t.range(),n=new Hi;return e===q0||e===Ph?n.set(r[0],-1/0,r[1],1/0):n.set(-1/0,r[0],1/0,r[1]),n.expand(i||1),s=>n.encloses(s.bounds)},$U=t=>(t.forEach(e=>e.opacity=1),t),HU=(t,e)=>t.reflow(e.modified()).modifies("opacity");we(rW,ee,{transform(t,e){let i=BU[t.method]||BU.parity,r=t.separation||0,n=e.materialize(e.SOURCE).source,s,o;if(!n||!n.length)return;if(!t.method)return t.modified("method")&&($U(n),e=HU(e,t)),e;if(n=n.filter(Xpe),!n.length)return;if(t.sort&&(n=n.slice().sort(t.sort)),s=$U(n),e=HU(e,t),s.length>=3&&NU(s,r)){do s=i(s,r);while(s.length>=3&&NU(s,r));s.length<3&&!ht(n).opacity&&(s.length>1&&(ht(s).opacity=0),ht(n).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(o=Ype(t.boundScale,t.boundOrient,+t.boundTolerance),n.forEach(l=>{o(l)||(l.opacity=0)}));let a=s[0].mark.bounds.clear();return n.forEach(l=>{l.opacity&&a.union(l.bounds)}),e}});function sW(t){ee.call(this,null,t)}we(sW,ee,{transform(t,e){let i=e.dataflow;if(e.visit(e.ALL,r=>i.dirty(r)),e.fields&&e.fields.zindex){let r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}}});var An=new Hi;function j0(t,e,i){return t[e]===i?0:(t[e]=i,1)}function Kpe(t){var e=t.items[0].orient;return e===ka||e===Aa}function Jpe(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function Zpe(t,e,i,r){var n=e.items[0],s=n.datum,o=n.translate!=null?n.translate:.5,a=n.orient,l=Jpe(s),u=n.range,c=n.offset,h=n.position,d=n.minExtent,p=n.maxExtent,f=s.title&&n.items[l[2]].items[0],m=n.titlePadding,g=n.bounds,b=f&&MC(f),v=0,y=0,x,_;switch(An.clear().union(g),g.clear(),(x=l[0])>-1&&g.union(n.items[x].bounds),(x=l[1])>-1&&g.union(n.items[x].bounds),a){case q0:v=h||0,y=-c,_=Math.max(d,Math.min(p,-g.y1)),g.add(0,-_).add(u,0),f&&zC(t,f,_,m,b,0,-1,g);break;case ka:v=-c,y=h||0,_=Math.max(d,Math.min(p,-g.x1)),g.add(-_,0).add(0,u),f&&zC(t,f,_,m,b,1,-1,g);break;case Aa:v=i+c,y=h||0,_=Math.max(d,Math.min(p,g.x2)),g.add(0,0).add(_,u),f&&zC(t,f,_,m,b,1,1,g);break;case Ph:v=h||0,y=r+c,_=Math.max(d,Math.min(p,g.y2)),g.add(0,0).add(u,_),f&&zC(t,f,_,m,0,0,1,g);break;default:v=n.x,y=n.y}return Ll(g.translate(v,y),n),j0(n,"x",v+o)|j0(n,"y",y+o)&&(n.bounds=An,t.dirty(n),n.bounds=g,t.dirty(n)),n.mark.bounds.clear().union(g)}function zC(t,e,i,r,n,s,o,a){let l=e.bounds;if(e.auto){let u=o*(i+n+r),c=0,h=0;t.dirty(e),s?c=(e.x||0)-(e.x=u):h=(e.y||0)-(e.y=u),e.mark.bounds.clear().union(l.translate(-c,-h)),t.dirty(e)}a.union(l)}var UU=(t,e)=>Math.floor(Math.min(t,e)),WU=(t,e)=>Math.ceil(Math.max(t,e));function Qpe(t){var e=t.items,i=e.length,r=0,n,s;let o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<i;++r)if(n=e[r],s=n.items,n.marktype===BC)switch(n.role){case E9:case A9:case k9:break;case qU:o.rowheaders.push(...s);break;case GU:o.rowfooters.push(...s);break;case YU:o.colheaders.push(...s);break;case KU:o.colfooters.push(...s);break;case XU:o.rowtitle=s[0];break;case JU:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function e0e(t){return new Hi().set(0,0,t.width||0,t.height||0)}function t0e(t){let e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function Si(t,e,i){let r=ge(t)?t[e]:t;return r??(i!==void 0?i:0)}function VU(t){return t<0?Math.ceil(-t):0}function oW(t,e,i){var r=!i.nodirty,n=i.bounds===R9?e0e:t0e,s=An.set(0,0,0,0),o=Si(i.align,Lh),a=Si(i.align,Oh),l=Si(i.padding,Lh),u=Si(i.padding,Oh),c=i.columns||e.length,h=c<=0?1:Math.ceil(e.length/c),d=e.length,p=Array(d),f=Array(c),m=0,g=Array(d),b=Array(h),v=0,y=Array(d),x=Array(d),_=Array(d),w,C,E,A,D,R,I,z,B,N,H;for(C=0;C<c;++C)f[C]=0;for(C=0;C<h;++C)b[C]=0;for(C=0;C<d;++C)R=e[C],D=_[C]=n(R),R.x=R.x||0,y[C]=0,R.y=R.y||0,x[C]=0,E=C%c,A=~~(C/c),m=Math.max(m,I=Math.ceil(D.x2)),v=Math.max(v,z=Math.ceil(D.y2)),f[E]=Math.max(f[E],I),b[A]=Math.max(b[A],z),p[C]=l+VU(D.x1),g[C]=u+VU(D.y1),r&&t.dirty(e[C]);for(C=0;C<d;++C)C%c===0&&(p[C]=0),C<c&&(g[C]=0);if(o===C9)for(E=1;E<c;++E){for(H=0,C=E;C<d;C+=c)H<p[C]&&(H=p[C]);for(C=E;C<d;C+=c)p[C]=H+f[E-1]}else if(o===OC){for(H=0,C=0;C<d;++C)C%c&&H<p[C]&&(H=p[C]);for(C=0;C<d;++C)C%c&&(p[C]=H+m)}else for(o=!1,E=1;E<c;++E)for(C=E;C<d;C+=c)p[C]+=f[E-1];if(a===C9)for(A=1;A<h;++A){for(H=0,C=A*c,w=C+c;C<w;++C)H<g[C]&&(H=g[C]);for(C=A*c;C<w;++C)g[C]=H+b[A-1]}else if(a===OC){for(H=0,C=c;C<d;++C)H<g[C]&&(H=g[C]);for(C=c;C<d;++C)g[C]=H+v}else for(a=!1,A=1;A<h;++A)for(C=A*c,w=C+c;C<w;++C)g[C]+=b[A-1];for(B=0,C=0;C<d;++C)B=p[C]+(C%c?B:0),y[C]+=B-e[C].x;for(E=0;E<c;++E)for(N=0,C=E;C<d;C+=c)N+=g[C],x[C]+=N-e[C].y;if(o&&Si(i.center,Lh)&&h>1)for(C=0;C<d;++C)D=o===OC?m:f[C%c],B=D-_[C].x2-e[C].x-y[C],B>0&&(y[C]+=B/2);if(a&&Si(i.center,Oh)&&c!==1)for(C=0;C<d;++C)D=a===OC?v:b[~~(C/c)],N=D-_[C].y2-e[C].y-x[C],N>0&&(x[C]+=N/2);for(C=0;C<d;++C)s.union(_[C].translate(y[C],x[C]));switch(B=Si(i.anchor,Npe),N=Si(i.anchor,$pe),Si(i.anchor,Lh)){case ss:B-=s.width();break;case _9:B-=s.width()/2}switch(Si(i.anchor,Oh)){case ss:N-=s.height();break;case _9:N-=s.height()/2}for(B=Math.round(B),N=Math.round(N),s.clear(),C=0;C<d;++C)e[C].mark.bounds.clear();for(C=0;C<d;++C)R=e[C],R.x+=y[C]+=B,R.y+=x[C]+=N,s.union(R.mark.bounds.union(R.bounds.translate(y[C],x[C]))),r&&t.dirty(R);return s}function i0e(t,e,i){var r=Qpe(e),n=r.marks,s=i.bounds===R9?r0e:n0e,o=i.offset,a=i.columns||n.length,l=a<=0?1:Math.ceil(n.length/a),u=l*a,c,h,d,p,f,m,g;let b=oW(t,n,i);b.empty()&&b.set(0,0,0,0),r.rowheaders&&(m=Si(i.headerBand,Oh,null),c=IC(t,r.rowheaders,n,a,l,-Si(o,"rowHeader"),UU,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Si(i.headerBand,Lh,null),h=IC(t,r.colheaders,n,a,a,-Si(o,"columnHeader"),UU,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Si(i.footerBand,Oh,null),d=IC(t,r.rowfooters,n,a,l,Si(o,"rowFooter"),WU,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Si(i.footerBand,Lh,null),p=IC(t,r.colfooters,n,a,a,Si(o,"columnFooter"),WU,1,s,"y2",u-a,1,a,m)),r.rowtitle&&(f=Si(i.titleAnchor,Oh),g=Si(o,"rowTitle"),g=f===ss?d+g:c-g,m=Si(i.titleBand,Oh,.5),jU(t,r.rowtitle,g,0,b,m)),r.coltitle&&(f=Si(i.titleAnchor,Lh),g=Si(o,"columnTitle"),g=f===ss?p+g:h-g,m=Si(i.titleBand,Lh,.5),jU(t,r.coltitle,g,1,b,m))}function r0e(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function n0e(t,e){return t.bounds[e]}function IC(t,e,i,r,n,s,o,a,l,u,c,h,d,p){var f=i.length,m=0,g=0,b,v,y,x,_,w,C,E,A;if(!f)return m;for(b=c;b<f;b+=h)i[b]&&(m=o(m,l(i[b],u)));if(!e.length)return m;for(e.length>n&&(t.warn("Grid headers exceed limit: "+n),e=e.slice(0,n)),m+=s,v=0,x=e.length;v<x;++v)t.dirty(e[v]),e[v].mark.bounds.clear();for(b=c,v=0,x=e.length;v<x;++v,b+=h){for(w=e[v],_=w.mark.bounds,y=b;y>=0&&(C=i[y])==null;y-=d);a?(E=p==null?C.x:Math.round(C.bounds.x1+p*C.bounds.width()),A=m):(E=m,A=p==null?C.y:Math.round(C.bounds.y1+p*C.bounds.height())),_.union(w.bounds.translate(E-(w.x||0),A-(w.y||0))),w.x=E,w.y=A,t.dirty(w),g=o(g,_[u])}return g}function jU(t,e,i,r,n,s){if(e){t.dirty(e);var o=i,a=i;r?o=Math.round(n.x1+s*n.width()):a=Math.round(n.y1+s*n.height()),e.bounds.translate(o-(e.x||0),a-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=a,t.dirty(e)}}function s0e(t,e){let i=t[e]||{};return(r,n)=>i[r]!=null?i[r]:t[r]!=null?t[r]:n}function o0e(t,e){let i=-1/0;return t.forEach(r=>{r.offset!=null&&(i=Math.max(i,r.offset))}),i>-1/0?i:e}function a0e(t,e,i,r,n,s,o){let a=s0e(i,e),l=o0e(t,a("offset",0)),u=a("anchor",S9),c=u===ss?1:u===_9?.5:0,h={align:C9,bounds:a("bounds",R9),columns:a("direction")==="vertical"?1:t.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(e){case ka:h.anchor={x:Math.floor(r.x1)-l,column:ss,y:c*(o||r.height()+2*r.y1),row:u};break;case Aa:h.anchor={x:Math.ceil(r.x2)+l,y:c*(o||r.height()+2*r.y1),row:u};break;case q0:h.anchor={y:Math.floor(n.y1)-l,row:ss,x:c*(s||n.width()+2*n.x1),column:u};break;case Ph:h.anchor={y:Math.ceil(n.y2)+l,x:c*(s||n.width()+2*n.x1),column:u};break;case Ppe:h.anchor={x:l,y:l};break;case zpe:h.anchor={x:s-l,y:l,column:ss};break;case Ipe:h.anchor={x:l,y:o-l,row:ss};break;case Bpe:h.anchor={x:s-l,y:o-l,column:ss,row:ss};break}return h}function l0e(t,e){var i=e.items[0],r=i.datum,n=i.orient,s=i.bounds,o=i.x,a=i.y,l,u;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),c0e(t,i,i.items[0].items[0]),s=u0e(i,s),l=2*i.padding,u=2*i.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===Vpe&&h0e(i.items[0].items[0].items[0].items),n!==T9&&(i.x=o=0,i.y=a=0),i.width=l,i.height=u,Ll(s.set(o,a,o+l,a+u),i),i.mark.bounds.clear().union(s),i}function u0e(t,e){return t.items.forEach(i=>e.union(i.bounds)),e.x1=t.padding,e.y1=t.padding,e}function c0e(t,e,i){var r=e.padding,n=r-i.x,s=r-i.y;if(!e.datum.title)(n||s)&&Fv(t,i,n,s);else{var o=e.items[1].items[0],a=o.anchor,l=e.titlePadding||0,u=r-o.x,c=r-o.y;switch(o.orient){case ka:n+=Math.ceil(o.bounds.width())+l;break;case Aa:case Ph:break;default:s+=o.bounds.height()+l}switch((n||s)&&Fv(t,i,n,s),o.orient){case ka:c+=V0(e,i,o,a,1,1);break;case Aa:u+=V0(e,i,o,ss,0,0)+l,c+=V0(e,i,o,a,1,1);break;case Ph:u+=V0(e,i,o,a,0,0),c+=V0(e,i,o,ss,-1,0,1)+l;break;default:u+=V0(e,i,o,a,0,0)}(u||c)&&Fv(t,o,u,c),(u=Math.round(o.bounds.x1-r))<0&&(Fv(t,i,-u,0),Fv(t,o,-u,0))}}function V0(t,e,i,r,n,s,o){let a=t.datum.type!=="symbol",l=i.datum.vgrad,u=a&&(s||!l)&&!o?e.items[0]:e,c=u.bounds[n?"y2":"x2"]-t.padding,h=l&&s?c:0,d=l&&s?0:c,p=n<=0?0:MC(i);return Math.round(r===S9?h:r===ss?d-p:.5*(c-p))}function Fv(t,e,i,r){e.x+=i,e.y+=r,e.bounds.translate(i,r),e.mark.bounds.translate(i,r),t.dirty(e)}function h0e(t){let e=t.reduce((i,r)=>(i[r.column]=Math.max(r.bounds.x2-r.x,i[r.column]||0),i),{});t.forEach(i=>{i.width=e[i.column],i.height=i.bounds.y2-i.y})}function d0e(t,e,i,r,n){var s=e.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,c=s.padding,h=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],p=a===ka||a===Aa?r:i,f=0,m=0,g=0,b=0,v=0,y;if(o!==BC?a===ka?(f=n.y2,p=n.y1):a===Aa?(f=n.y1,p=n.y2):(f=n.x1,p=n.x2):a===ka&&(f=r,p=0),y=l===S9?f:l===ss?p:(f+p)/2,d&&d.text){switch(a){case q0:case Ph:v=h.bounds.height()+c;break;case ka:b=h.bounds.width()+c;break;case Aa:b=-h.bounds.width()-c;break}An.clear().union(d.bounds),An.translate(b-(d.x||0),v-(d.y||0)),j0(d,"x",b)|j0(d,"y",v)&&(t.dirty(d),d.bounds.clear().union(An),d.mark.bounds.clear().union(An),t.dirty(d)),An.clear().union(d.bounds)}else An.clear();switch(An.union(h.bounds),a){case q0:m=y,g=n.y1-An.height()-u;break;case ka:m=n.x1-An.width()-u,g=y;break;case Aa:m=n.x2+An.width()+u,g=y;break;case Ph:m=y,g=n.y2+u;break;default:m=s.x,g=s.y}return j0(s,"x",m)|j0(s,"y",g)&&(An.translate(m,g),t.dirty(s),s.bounds.clear().union(An),e.bounds.clear().union(An),t.dirty(s)),s.bounds}function aW(t){ee.call(this,null,t)}we(aW,ee,{transform(t,e){let i=e.dataflow;return t.mark.items.forEach(r=>{t.layout&&i0e(i,r,t.layout),p0e(i,r,t)}),f0e(t.mark.group)?e.reflow():e}});function f0e(t){return t&&t.mark.role!=="legend-entry"}function p0e(t,e,i){var r=e.items,n=Math.max(0,e.width||0),s=Math.max(0,e.height||0),o=new Hi().set(0,0,n,s),a=o.clone(),l=o.clone(),u=[],c,h,d,p,f,m;for(f=0,m=r.length;f<m;++f)switch(h=r[f],h.role){case E9:p=Kpe(h)?a:l,p.union(Zpe(t,h,n,s));break;case k9:c=h;break;case A9:u.push(l0e(t,h));break;case Hpe:case Upe:case qU:case GU:case XU:case YU:case KU:case JU:a.union(h.bounds),l.union(h.bounds);break;default:o.union(h.bounds)}if(u.length){let g={};u.forEach(b=>{d=b.orient||Aa,d!==T9&&(g[d]||(g[d]=[])).push(b)});for(let b in g){let v=g[b];oW(t,v,a0e(v,b,i.legends,a,l,n,s))}u.forEach(b=>{let v=b.bounds;if(v.equals(b._bounds)||(b.bounds=b._bounds,t.dirty(b),b.bounds=v,t.dirty(b)),i.autosize&&(i.autosize.type===ZU||i.autosize.type===QU||i.autosize.type===eW))switch(b.orient){case ka:case Aa:o.add(v.x1,0).add(v.x2,0);break;case q0:case Ph:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(l),c&&o.union(d0e(t,c,n,s,o)),e.clip&&o.set(0,0,e.width||0,e.height||0),m0e(t,e,o,i)}function m0e(t,e,i,r){let n=r.autosize||{},s=n.type;if(t._autosize<1||!s)return;let o=t._width,a=t._height,l=Math.max(0,e.width||0),u=Math.max(0,Math.ceil(-i.x1)),c=Math.max(0,e.height||0),h=Math.max(0,Math.ceil(-i.y1)),d=Math.max(0,Math.ceil(i.x2-l)),p=Math.max(0,Math.ceil(i.y2-c));if(n.contains===Wpe){let f=t.padding();o-=f.left+f.right,a-=f.top+f.bottom}s===T9?(u=0,h=0,l=o,c=a):s===ZU?(l=Math.max(0,o-u-d),c=Math.max(0,a-h-p)):s===QU?(l=Math.max(0,o-u-d),a=c+h+p):s===eW?(o=l+u+d,c=Math.max(0,a-h-p)):s===jpe&&(o=l+u+d,a=c+h+p),t._resizeView(o,a,l,c,[u,h],n.resize)}var z9={};br(z9,{axisticks:()=>hW,datajoin:()=>dW,encode:()=>fW,legendentries:()=>pW,linkpath:()=>L9,pie:()=>O9,scale:()=>yW,sortitems:()=>wW,stack:()=>P9});function hW(t){ee.call(this,null,t)}we(hW,ee,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var i=e.dataflow.locale(),r=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=this.value,s=t.scale,o=t.count==null?t.values?t.values.length:10:t.count,a=Q_(s,o,t.minstep),l=t.format||TA(i,s,a,t.formatSpecifier,t.formatType,!!t.values),u=t.values?AA(s,t.values,a):eC(s,a);return n&&(r.rem=n),n=u.map((c,h)=>_t({index:h/(u.length-1||1),value:c,label:l(c)})),t.extra&&n.length&&n.push(_t({index:-1,extra:{value:n[0].value},label:""})),r.source=n,r.add=n,this.value=n,r}});function dW(t){ee.call(this,null,t)}function g0e(){return _t({})}function b0e(t){let e=eh().test(i=>i.exit);return e.lookup=i=>e.get(t(i)),e}we(dW,ee,{transform(t,e){var i=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=t.item||g0e,s=t.key||Ve,o=this.value;return K(r.encode)&&(r.encode=null),o&&(t.modified("key")||e.modified(s))&&te("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=b0e(s)),e.visit(e.ADD,a=>{let l=s(a),u=o.get(l);u?u.exit?(o.empty--,r.add.push(u)):r.mod.push(u):(u=n(a),o.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),e.visit(e.MOD,a=>{let l=s(a),u=o.get(l);u&&(u.datum=a,r.mod.push(u))}),e.visit(e.REM,a=>{let l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),(e.clean()||t.clean&&o.empty>i.cleanThreshold)&&i.runAfter(o.clean),r}});function fW(t){ee.call(this,null,t)}we(fW,ee,{transform(t,e){var i=e.fork(e.ADD_REM),r=t.mod||!1,n=t.encoders,s=e.encode;if(K(s))if(i.changed()||s.every(h=>n[h]))s=s[0],i.encode=null;else return e.StopPropagation;var o=s==="enter",a=n.update||Eu,l=n.enter||Eu,u=n.exit||Eu,c=(s&&!o?n[s]:a)||Eu;if(e.changed(e.ADD)&&(e.visit(e.ADD,h=>{l(h,t),a(h,t)}),i.modifies(l.output),i.modifies(a.output),c!==Eu&&c!==a&&(e.visit(e.ADD,h=>{c(h,t)}),i.modifies(c.output))),e.changed(e.REM)&&u!==Eu&&(e.visit(e.REM,h=>{u(h,t)}),i.modifies(u.output)),o||c!==Eu){let h=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(h,d=>{let p=l(d,t)||r;(c(d,t)||p)&&i.mod.push(d)}),i.mod.length&&i.modifies(l.output)):e.visit(h,d=>{(c(d,t)||r)&&i.mod.push(d)}),i.mod.length&&i.modifies(c.output)}return i.changed()?i:e.StopPropagation}});function pW(t){ee.call(this,[],t)}we(pW,ee,{transform(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var i=e.dataflow.locale(),r=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=this.value,s=t.type||lv,o=t.scale,a=+t.limit,l=Q_(o,t.count==null?5:t.count,t.minstep),u=!!t.values||s===lv,c=t.format||DA(i,o,l,s,t.formatSpecifier,t.formatType,u),h=t.values||RA(o,l),d,p,f,m,g;return n&&(r.rem=n),s===lv?(a&&h.length>a?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),n=h.slice(0,a-1),g=!0):n=h,Je(f=t.size)?(!t.values&&o(n[0])===0&&(n=n.slice(1)),m=n.reduce((b,v)=>Math.max(b,f(v,t)),0)):f=wi(m=f||8),n=n.map((b,v)=>_t({index:v,label:c(b,v,n),value:b,offset:m,size:f(b,t)})),g&&(g=h[n.length],n.push(_t({index:n.length,label:`\u2026${h.length-n.length} entries`,value:g,offset:m,size:f(g,t)})))):s===dH?(d=o.domain(),p=Z_(o,d[0],ht(d)),h.length<3&&!t.values&&d[0]!==ht(d)&&(h=[d[0],ht(d)]),n=h.map((b,v)=>_t({index:v,label:c(b,v,h),value:b,perc:p(b)}))):(f=h.length-1,p=mH(o),n=h.map((b,v)=>_t({index:v,label:c(b,v,h),value:b,perc:v?p(b):0,perc2:v===f?1:p(h[v+1])}))),r.source=n,r.add=n,this.value=n,r}});var v0e=t=>t.source.x,y0e=t=>t.source.y,x0e=t=>t.target.x,w0e=t=>t.target.y;function L9(t){ee.call(this,{},t)}L9.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};we(L9,ee,{transform(t,e){var i=t.sourceX||v0e,r=t.sourceY||y0e,n=t.targetX||x0e,s=t.targetY||w0e,o=t.as||"path",a=t.orient||"vertical",l=t.shape||"line",u=lW.get(l+"-"+a)||lW.get(l);return u||te("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,c=>{c[o]=u(i(c),r(c),n(c),s(c))}),e.reflow(t.modified()).modifies(o)}});var mW=(t,e,i,r)=>"M"+t+","+e+"L"+i+","+r,_0e=(t,e,i,r)=>mW(e*Math.cos(t),e*Math.sin(t),r*Math.cos(i),r*Math.sin(i)),gW=(t,e,i,r)=>{var n=i-t,s=r-e,o=Math.hypot(n,s)/2,a=180*Math.atan2(s,n)/Math.PI;return"M"+t+","+e+"A"+o+","+o+" "+a+" 0 1 "+i+","+r},C0e=(t,e,i,r)=>gW(e*Math.cos(t),e*Math.sin(t),r*Math.cos(i),r*Math.sin(i)),bW=(t,e,i,r)=>{let n=i-t,s=r-e,o=.2*(n+s),a=.2*(s-n);return"M"+t+","+e+"C"+(t+o)+","+(e+a)+" "+(i+a)+","+(r-o)+" "+i+","+r},S0e=(t,e,i,r)=>bW(e*Math.cos(t),e*Math.sin(t),r*Math.cos(i),r*Math.sin(i)),E0e=(t,e,i,r)=>"M"+t+","+e+"V"+r+"H"+i,k0e=(t,e,i,r)=>"M"+t+","+e+"H"+i+"V"+r,A0e=(t,e,i,r)=>{let n=Math.cos(t),s=Math.sin(t),o=Math.cos(i),a=Math.sin(i),l=Math.abs(i-t)>Math.PI?i<=t:i>t;return"M"+e*n+","+e*s+"A"+e+","+e+" 0 0,"+(l?1:0)+" "+e*o+","+e*a+"L"+r*o+","+r*a},T0e=(t,e,i,r)=>{let n=(t+i)/2;return"M"+t+","+e+"C"+n+","+e+" "+n+","+r+" "+i+","+r},R0e=(t,e,i,r)=>{let n=(e+r)/2;return"M"+t+","+e+"C"+t+","+n+" "+i+","+n+" "+i+","+r},D0e=(t,e,i,r)=>{let n=Math.cos(t),s=Math.sin(t),o=Math.cos(i),a=Math.sin(i),l=(e+r)/2;return"M"+e*n+","+e*s+"C"+l*n+","+l*s+" "+l*o+","+l*a+" "+r*o+","+r*a},lW=eh({line:mW,"line-radial":_0e,arc:gW,"arc-radial":C0e,curve:bW,"curve-radial":S0e,"orthogonal-horizontal":E0e,"orthogonal-vertical":k0e,"orthogonal-radial":A0e,"diagonal-horizontal":T0e,"diagonal-vertical":R0e,"diagonal-radial":D0e});function O9(t){ee.call(this,null,t)}O9.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};we(O9,ee,{transform(t,e){var i=t.as||["startAngle","endAngle"],r=i[0],n=i[1],s=t.field||bl,o=t.startAngle||0,a=t.endAngle!=null?t.endAngle:2*Math.PI,l=e.source,u=l.map(s),c=u.length,h=o,d=(a-o)/l0(u),p=Ji(c),f,m,g;for(t.sort&&p.sort((b,v)=>u[b]-u[v]),f=0;f<c;++f)g=u[p[f]],m=l[p[f]],m[r]=h,m[n]=h+=g*d;return this.value=u,e.reflow(t.modified()).modifies(i)}});var M0e=5;function F0e(t){let e=t.type;return!t.bins&&(e===vf||e===O0||e===P0)}function vW(t){return sv(t)&&t!==_a}var L0e=or(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function yW(t){ee.call(this,null,t),this.modified(!0)}we(yW,ee,{transform(t,e){var i=e.dataflow,r=this.value,n=O0e(t);(!r||n!==r.type)&&(this.value=r=St(n)());for(n in t)if(!L0e[n]){if(n==="padding"&&vW(r.type))continue;Je(r[n])?r[n](t[n]):i.warn("Unsupported scale property: "+n)}return $0e(r,t,N0e(r,t,z0e(r,t,i))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function O0e(t){var e=t.type,i="",r;return e===_a?_a+"-"+vf:(P0e(t)&&(r=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,i=r===2?_a+"-":r===3?yf+"-":""),(i+e||vf).toLowerCase())}function P0e(t){let e=t.type;return sv(e)&&e!==wh&&e!==_h&&(t.scheme||t.range&&t.range.length&&t.range.every(fe))}function z0e(t,e,i){let r=I0e(t,e.domainRaw,i);if(r>-1)return r;var n=e.domain,s=t.type,o=e.zero||e.zero===void 0&&F0e(t),a,l;if(!n)return 0;if((o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(a=(n=n.slice()).length-1||1,o&&(n[0]>0&&(n[0]=0),n[a]<0&&(n[a]=0)),e.domainMin!=null&&(n[0]=e.domainMin),e.domainMax!=null&&(n[a]=e.domainMax),e.domainMid!=null)){l=e.domainMid;let u=l>n[a]?a+1:l<n[0]?0:a;u!==a&&i.warn("Scale domainMid exceeds domain min or max.",l),n.splice(u,0,l)}return vW(s)&&e.padding&&n[0]!==ht(n)&&(n=B0e(s,n,e.range,e.padding,e.exponent,e.constant)),t.domain(xW(s,n,i)),s===q_&&t.unknown(e.domainImplicit?S0:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&Q_(t,e.nice)||null),n.length}function I0e(t,e,i){return e?(t.domain(xW(t.type,e,i)),e.length):-1}function B0e(t,e,i,r,n,s){var o=Math.abs(ht(i)-i[0]),a=o/(o-2*r),l=t===Dl?$1(e,null,a):t===P0?n0(e,null,a,.5):t===O0?n0(e,null,a,n||1):t===ev?H1(e,null,a,s||1):N1(e,null,a);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function xW(t,e,i){if(SA(t)){var r=Math.abs(e.reduce((n,s)=>n+(s<0?-1:s>0?1:0),0));r!==e.length&&i.warn("Log scale domain includes zero: "+pe(e))}return e}function N0e(t,e,i){let r=e.bins;if(r&&!K(r)){let n=t.domain(),s=n[0],o=ht(n),a=r.step,l=r.start==null?s:r.start,u=r.stop==null?o:r.stop;a||te("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),r=Ji(l,u+a/2,a)}return r?t.bins=r:t.bins&&delete t.bins,t.type===X_&&(r?!e.domain&&!e.domainRaw&&(t.domain(r),i=r.length):t.bins=t.domain()),i}function $0e(t,e,i){var r=t.type,n=e.round||!1,s=e.range;if(e.rangeStep!=null)s=H0e(r,e,i);else if(e.scheme&&(s=U0e(r,e,i),Je(s))){if(t.interpolator)return t.interpolator(s);te(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&EA(r))return t.interpolator(z0(F9(s,e.reverse),e.interpolate,e.interpolateGamma));s&&e.interpolate&&t.interpolate?t.interpolate(ov(e.interpolate,e.interpolateGamma)):Je(t.round)?t.round(n):Je(t.rangeRound)&&t.interpolate(n?Tl:Sn),s&&t.range(F9(s,e.reverse))}function H0e(t,e,i){t!==vA&&t!==G_&&te("Only band and point scales support rangeStep.");var r=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,n=t===G_?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*Qb(i,n,r)]}function U0e(t,e,i){var r=e.schemeExtent,n,s;return K(e.scheme)?s=z0(e.scheme,e.interpolate,e.interpolateGamma):(n=e.scheme.toLowerCase(),s=av(n),s||te(`Unrecognized scheme name: ${e.scheme}`)),i=t===iv?i+1:t===X_?i-1:t===bf||t===tv?+e.schemeCount||M0e:i,EA(t)?uW(s,r,e.reverse):Je(s)?J_(uW(s,r),i):t===q_?s:s.slice(0,i)}function uW(t,e,i){return Je(t)&&(e||i)?K_(t,F9(e||[0,1],i)):t}function F9(t,e){return e?t.slice().reverse():t}function wW(t){ee.call(this,null,t)}we(wW,ee,{transform(t,e){let i=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return i&&e.source.sort(Cl(t.sort)),this.modified(i),e}});var cW="zero",_W="center",CW="normalize",SW=["y0","y1"];function P9(t){ee.call(this,null,t)}P9.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:cW,values:[cW,_W,CW]},{name:"as",type:"string",array:!0,length:2,default:SW}]};we(P9,ee,{transform(t,e){var i=t.as||SW,r=i[0],n=i[1],s=Cl(t.sort),o=t.field||bl,a=t.offset===_W?W0e:t.offset===CW?V0e:j0e,l,u,c,h;for(l=q0e(e.source,t.groupby,s,o),u=0,c=l.length,h=l.max;u<c;++u)a(l[u],h,o,r,n);return e.reflow(t.modified()).modifies(i)}});function W0e(t,e,i,r,n){for(var s=(e-t.sum)/2,o=t.length,a=0,l;a<o;++a)l=t[a],l[r]=s,l[n]=s+=Math.abs(i(l))}function V0e(t,e,i,r,n){for(var s=1/t.sum,o=0,a=t.length,l=0,u=0,c;l<a;++l)c=t[l],c[r]=o,c[n]=o=s*(u+=Math.abs(i(c)))}function j0e(t,e,i,r,n){for(var s=0,o=0,a=t.length,l=0,u,c;l<a;++l)c=t[l],u=+i(c),u<0?(c[r]=o,c[n]=o+=u):(c[r]=s,c[n]=s+=u)}function q0e(t,e,i,r){var n=[],s=m=>m(c),o,a,l,u,c,h,d,p,f;if(e==null)n.push(t.slice());else for(o={},a=0,l=t.length;a<l;++a)c=t[a],h=e.map(s),d=o[h],d||(o[h]=d=[],n.push(d)),d.push(c);for(h=0,f=0,u=n.length;h<u;++h){for(d=n[h],a=0,p=0,l=d.length;a<l;++a)p+=Math.abs(r(d[a]));d.sum=p,p>f&&(f=p),i&&d.sort(i)}return n.max=f,n}var eR={};br(eR,{contour:()=>qT,geojson:()=>XT,geopath:()=>YT,geopoint:()=>KT,geoshape:()=>JT,graticule:()=>ZT,heatmap:()=>QT,isocontour:()=>VT,kde2d:()=>jT,projection:()=>OV});var Pe=1e-6,Rf=1e-12,ut=Math.PI,ti=ut/2,G0=ut/4,Zi=ut*2,ii=180/ut,st=ut/180,nt=Math.abs,$o=Math.atan,Ui=Math.atan2,Le=Math.cos,Lv=Math.ceil,NC=Math.exp;var $C=Math.hypot,Df=Math.log,HC=Math.pow,Fe=Math.sin,Tn=Math.sign||function(t){return t>0?1:t<0?-1:0},ri=Math.sqrt,X0=Math.tan;function UC(t){return t>1?0:t<-1?ut:Math.acos(t)}function bi(t){return t>1?ti:t<-1?-ti:Math.asin(t)}function vi(){}function WC(t,e){t&&kW.hasOwnProperty(t.type)&&kW[t.type](t,e)}var EW={Feature:function(t,e){WC(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,r=-1,n=i.length;++r<n;)WC(i[r].geometry,e)}},kW={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)t=i[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){I9(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)I9(i[r],e,0)},Polygon:function(t,e){AW(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)AW(i[r],e)},GeometryCollection:function(t,e){for(var i=t.geometries,r=-1,n=i.length;++r<n;)WC(i[r],e)}};function I9(t,e,i){var r=-1,n=t.length-i,s;for(e.lineStart();++r<n;)s=t[r],e.point(s[0],s[1],s[2]);e.lineEnd()}function AW(t,e){var i=-1,r=t.length;for(e.polygonStart();++i<r;)I9(t[i],e,1);e.polygonEnd()}function Ds(t,e){t&&EW.hasOwnProperty(t.type)?EW[t.type](t,e):WC(t,e)}var Ov=new _i,VC=new _i,TW,RW,B9,N9,$9,Ta={point:vi,lineStart:vi,lineEnd:vi,polygonStart:function(){Ov=new _i,Ta.lineStart=G0e,Ta.lineEnd=X0e},polygonEnd:function(){var t=+Ov;VC.add(t<0?Zi+t:t),this.lineStart=this.lineEnd=this.point=vi},sphere:function(){VC.add(Zi)}};function G0e(){Ta.point=Y0e}function X0e(){DW(TW,RW)}function Y0e(t,e){Ta.point=DW,TW=t,RW=e,t*=st,e*=st,B9=t,N9=Le(e=e/2+G0),$9=Fe(e)}function DW(t,e){t*=st,e*=st,e=e/2+G0;var i=t-B9,r=i>=0?1:-1,n=r*i,s=Le(e),o=Fe(e),a=$9*o,l=N9*s+a*Le(n),u=a*r*Fe(n);Ov.add(Ui(u,l)),B9=t,N9=s,$9=o}function H9(t){return VC=new _i,Ds(t,Ta),VC*2}function Mf(t){return[Ui(t[1],t[0]),bi(t[2])]}function Ho(t){var e=t[0],i=t[1],r=Le(i);return[r*Le(e),r*Fe(e),Fe(i)]}function Pv(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qu(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function jC(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function zv(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ff(t){var e=ri(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Di,Ms,Wi,oo,Lf,OW,PW,Y0,Iv,zh,Xu,Gu={point:U9,lineStart:MW,lineEnd:FW,polygonStart:function(){Gu.point=IW,Gu.lineStart=K0e,Gu.lineEnd=J0e,Iv=new _i,Ta.polygonStart()},polygonEnd:function(){Ta.polygonEnd(),Gu.point=U9,Gu.lineStart=MW,Gu.lineEnd=FW,Ov<0?(Di=-(Wi=180),Ms=-(oo=90)):Iv>Pe?oo=90:Iv<-Pe&&(Ms=-90),Xu[0]=Di,Xu[1]=Wi},sphere:function(){Di=-(Wi=180),Ms=-(oo=90)}};function U9(t,e){zh.push(Xu=[Di=t,Wi=t]),e<Ms&&(Ms=e),e>oo&&(oo=e)}function zW(t,e){var i=Ho([t*st,e*st]);if(Y0){var r=qu(Y0,i),n=[r[1],-r[0],0],s=qu(n,r);Ff(s),s=Mf(s);var o=t-Lf,a=o>0?1:-1,l=s[0]*ii*a,u,c=nt(o)>180;c^(a*Lf<l&&l<a*t)?(u=s[1]*ii,u>oo&&(oo=u)):(l=(l+360)%360-180,c^(a*Lf<l&&l<a*t)?(u=-s[1]*ii,u<Ms&&(Ms=u)):(e<Ms&&(Ms=e),e>oo&&(oo=e))),c?t<Lf?so(Di,t)>so(Di,Wi)&&(Wi=t):so(t,Wi)>so(Di,Wi)&&(Di=t):Wi>=Di?(t<Di&&(Di=t),t>Wi&&(Wi=t)):t>Lf?so(Di,t)>so(Di,Wi)&&(Wi=t):so(t,Wi)>so(Di,Wi)&&(Di=t)}else zh.push(Xu=[Di=t,Wi=t]);e<Ms&&(Ms=e),e>oo&&(oo=e),Y0=i,Lf=t}function MW(){Gu.point=zW}function FW(){Xu[0]=Di,Xu[1]=Wi,Gu.point=U9,Y0=null}function IW(t,e){if(Y0){var i=t-Lf;Iv.add(nt(i)>180?i+(i>0?360:-360):i)}else OW=t,PW=e;Ta.point(t,e),zW(t,e)}function K0e(){Ta.lineStart()}function J0e(){IW(OW,PW),Ta.lineEnd(),nt(Iv)>Pe&&(Di=-(Wi=180)),Xu[0]=Di,Xu[1]=Wi,Y0=null}function so(t,e){return(e-=t)<0?e+360:e}function Z0e(t,e){return t[0]-e[0]}function LW(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function W9(t){var e,i,r,n,s,o,a;if(oo=Wi=-(Di=Ms=1/0),zh=[],Ds(t,Gu),i=zh.length){for(zh.sort(Z0e),e=1,r=zh[0],s=[r];e<i;++e)n=zh[e],LW(r,n[0])||LW(r,n[1])?(so(r[0],n[1])>so(r[0],r[1])&&(r[1]=n[1]),so(n[0],r[1])>so(r[0],r[1])&&(r[0]=n[0])):s.push(r=n);for(o=-1/0,i=s.length-1,e=0,r=s[i];e<=i;r=n,++e)n=s[e],(a=so(r[1],n[0]))>o&&(o=a,Di=n[0],Wi=r[1])}return zh=Xu=null,Di===1/0||Ms===1/0?[[NaN,NaN],[NaN,NaN]]:[[Di,Ms],[Wi,oo]]}var Bv,qC,GC,XC,YC,KC,JC,ZC,V9,j9,q9,$W,HW,os,as,ls,Ra={sphere:vi,point:G9,lineStart:BW,lineEnd:NW,polygonStart:function(){Ra.lineStart=tme,Ra.lineEnd=ime},polygonEnd:function(){Ra.lineStart=BW,Ra.lineEnd=NW}};function G9(t,e){t*=st,e*=st;var i=Le(e);Nv(i*Le(t),i*Fe(t),Fe(e))}function Nv(t,e,i){++Bv,GC+=(t-GC)/Bv,XC+=(e-XC)/Bv,YC+=(i-YC)/Bv}function BW(){Ra.point=Q0e}function Q0e(t,e){t*=st,e*=st;var i=Le(e);os=i*Le(t),as=i*Fe(t),ls=Fe(e),Ra.point=eme,Nv(os,as,ls)}function eme(t,e){t*=st,e*=st;var i=Le(e),r=i*Le(t),n=i*Fe(t),s=Fe(e),o=Ui(ri((o=as*s-ls*n)*o+(o=ls*r-os*s)*o+(o=os*n-as*r)*o),os*r+as*n+ls*s);qC+=o,KC+=o*(os+(os=r)),JC+=o*(as+(as=n)),ZC+=o*(ls+(ls=s)),Nv(os,as,ls)}function NW(){Ra.point=G9}function tme(){Ra.point=rme}function ime(){UW($W,HW),Ra.point=G9}function rme(t,e){$W=t,HW=e,t*=st,e*=st,Ra.point=UW;var i=Le(e);os=i*Le(t),as=i*Fe(t),ls=Fe(e),Nv(os,as,ls)}function UW(t,e){t*=st,e*=st;var i=Le(e),r=i*Le(t),n=i*Fe(t),s=Fe(e),o=as*s-ls*n,a=ls*r-os*s,l=os*n-as*r,u=$C(o,a,l),c=bi(u),h=u&&-c/u;V9.add(h*o),j9.add(h*a),q9.add(h*l),qC+=c,KC+=c*(os+(os=r)),JC+=c*(as+(as=n)),ZC+=c*(ls+(ls=s)),Nv(os,as,ls)}function X9(t){Bv=qC=GC=XC=YC=KC=JC=ZC=0,V9=new _i,j9=new _i,q9=new _i,Ds(t,Ra);var e=+V9,i=+j9,r=+q9,n=$C(e,i,r);return n<Rf&&(e=KC,i=JC,r=ZC,qC<Pe&&(e=GC,i=XC,r=YC),n=$C(e,i,r),n<Rf)?[NaN,NaN]:[Ui(i,e)*ii,bi(r/n)*ii]}function $v(t,e){function i(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(i.invert=function(r,n){return r=e.invert(r,n),r&&t.invert(r[0],r[1])}),i}function Y9(t,e){return nt(t)>ut&&(t-=Math.round(t/Zi)*Zi),[t,e]}Y9.invert=Y9;function K9(t,e,i){return(t%=Zi)?e||i?$v(VW(t),jW(e,i)):VW(t):e||i?jW(e,i):Y9}function WW(t){return function(e,i){return e+=t,nt(e)>ut&&(e-=Math.round(e/Zi)*Zi),[e,i]}}function VW(t){var e=WW(t);return e.invert=WW(-t),e}function jW(t,e){var i=Le(t),r=Fe(t),n=Le(e),s=Fe(e);function o(a,l){var u=Le(l),c=Le(a)*u,h=Fe(a)*u,d=Fe(l),p=d*i+c*r;return[Ui(h*n-p*s,c*i-d*r),bi(p*n+h*s)]}return o.invert=function(a,l){var u=Le(l),c=Le(a)*u,h=Fe(a)*u,d=Fe(l),p=d*n-h*s;return[Ui(h*n+d*s,c*i+p*r),bi(p*i-c*r)]},o}function qW(t){t=K9(t[0]*st,t[1]*st,t.length>2?t[2]*st:0);function e(i){return i=t(i[0]*st,i[1]*st),i[0]*=ii,i[1]*=ii,i}return e.invert=function(i){return i=t.invert(i[0]*st,i[1]*st),i[0]*=ii,i[1]*=ii,i},e}function XW(t,e,i,r,n,s){if(i){var o=Le(e),a=Fe(e),l=r*i;n==null?(n=e+r*Zi,s=e-l/2):(n=GW(o,n),s=GW(o,s),(r>0?n<s:n>s)&&(n+=r*Zi));for(var u,c=n;r>0?c>s:c<s;c-=l)u=Mf([o,-a*Le(c),-a*Fe(c)]),t.point(u[0],u[1])}}function GW(t,e){e=Ho(e),e[0]-=t,Ff(e);var i=UC(-e[1]);return((-e[2]<0?-i:i)+Zi-Pe)%Zi}function QC(){var t=[],e;return{point:function(i,r,n){e.push([i,r,n])},lineStart:function(){t.push(e=[])},lineEnd:vi,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],e=null,i}}}function K0(t,e){return nt(t[0]-e[0])<Pe&&nt(t[1]-e[1])<Pe}function e4(t,e,i,r){this.x=t,this.z=e,this.o=i,this.e=r,this.v=!1,this.n=this.p=null}function t4(t,e,i,r,n){var s=[],o=[],a,l;if(t.forEach(function(f){if(!((m=f.length-1)<=0)){var m,g=f[0],b=f[m],v;if(K0(g,b)){if(!g[2]&&!b[2]){for(n.lineStart(),a=0;a<m;++a)n.point((g=f[a])[0],g[1]);n.lineEnd();return}b[0]+=2*Pe}s.push(v=new e4(g,f,null,!0)),o.push(v.o=new e4(g,null,v,!1)),s.push(v=new e4(b,f,null,!1)),o.push(v.o=new e4(b,null,v,!0))}}),!!s.length){for(o.sort(e),YW(s),YW(o),a=0,l=o.length;a<l;++a)o[a].e=i=!i;for(var u=s[0],c,h;;){for(var d=u,p=!0;d.v;)if((d=d.n)===u)return;c=d.z,n.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(a=0,l=c.length;a<l;++a)n.point((h=c[a])[0],h[1]);else r(d.x,d.n.x,1,n);d=d.n}else{if(p)for(c=d.p.z,a=c.length-1;a>=0;--a)n.point((h=c[a])[0],h[1]);else r(d.x,d.p.x,-1,n);d=d.p}d=d.o,c=d.z,p=!p}while(!d.v);n.lineEnd()}}}function YW(t){if(e=t.length){for(var e,i=0,r=t[0],n;++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function J9(t){return nt(t[0])<=ut?t[0]:Tn(t[0])*((nt(t[0])+ut)%Zi-ut)}function KW(t,e){var i=J9(e),r=e[1],n=Fe(r),s=[Fe(i),-Le(i),0],o=0,a=0,l=new _i;n===1?r=ti+Pe:n===-1&&(r=-ti-Pe);for(var u=0,c=t.length;u<c;++u)if(d=(h=t[u]).length)for(var h,d,p=h[d-1],f=J9(p),m=p[1]/2+G0,g=Fe(m),b=Le(m),v=0;v<d;++v,f=x,g=w,b=C,p=y){var y=h[v],x=J9(y),_=y[1]/2+G0,w=Fe(_),C=Le(_),E=x-f,A=E>=0?1:-1,D=A*E,R=D>ut,I=g*w;if(l.add(Ui(I*A*Fe(D),b*C+I*Le(D))),o+=R?E+A*Zi:E,R^f>=i^x>=i){var z=qu(Ho(p),Ho(y));Ff(z);var B=qu(s,z);Ff(B);var N=(R^E>=0?-1:1)*bi(B[2]);(r>N||r===N&&(z[0]||z[1]))&&(a+=R^E>=0?1:-1)}}return(o<-Pe||o<Pe&&l<-Rf)^a&1}function i4(t,e,i,r){return function(n){var s=e(n),o=QC(),a=e(o),l=!1,u,c,h,d={point:p,lineStart:m,lineEnd:g,polygonStart:function(){d.point=b,d.lineStart=v,d.lineEnd=y,c=[],u=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=g,c=a0(c);var x=KW(u,r);c.length?(l||(n.polygonStart(),l=!0),t4(c,sme,x,i,n)):x&&(l||(n.polygonStart(),l=!0),n.lineStart(),i(null,null,1,n),n.lineEnd()),l&&(n.polygonEnd(),l=!1),c=u=null},sphere:function(){n.polygonStart(),n.lineStart(),i(null,null,1,n),n.lineEnd(),n.polygonEnd()}};function p(x,_){t(x,_)&&n.point(x,_)}function f(x,_){s.point(x,_)}function m(){d.point=f,s.lineStart()}function g(){d.point=p,s.lineEnd()}function b(x,_){h.push([x,_]),a.point(x,_)}function v(){a.lineStart(),h=[]}function y(){b(h[0][0],h[0][1]),a.lineEnd();var x=a.clean(),_=o.result(),w,C=_.length,E,A,D;if(h.pop(),u.push(h),h=null,!!C){if(x&1){if(A=_[0],(E=A.length-1)>0){for(l||(n.polygonStart(),l=!0),n.lineStart(),w=0;w<E;++w)n.point((D=A[w])[0],D[1]);n.lineEnd()}return}C>1&&x&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(nme))}}return d}}function nme(t){return t.length>1}function sme(t,e){return((t=t.x)[0]<0?t[1]-ti-Pe:ti-t[1])-((e=e.x)[0]<0?e[1]-ti-Pe:ti-e[1])}var Z9=i4(function(){return!0},ome,lme,[-ut,-ti]);function ome(t){var e=NaN,i=NaN,r=NaN,n;return{lineStart:function(){t.lineStart(),n=1},point:function(s,o){var a=s>0?ut:-ut,l=nt(s-e);nt(l-ut)<Pe?(t.point(e,i=(i+o)/2>0?ti:-ti),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(s,i),n=0):r!==a&&l>=ut&&(nt(e-r)<Pe&&(e-=r*Pe),nt(s-a)<Pe&&(s-=a*Pe),i=ame(e,i,s,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),n=0),t.point(e=s,i=o),r=a},lineEnd:function(){t.lineEnd(),e=i=NaN},clean:function(){return 2-n}}}function ame(t,e,i,r){var n,s,o=Fe(t-i);return nt(o)>Pe?$o((Fe(e)*(s=Le(r))*Fe(i)-Fe(r)*(n=Le(e))*Fe(t))/(n*s*o)):(e+r)/2}function lme(t,e,i,r){var n;if(t==null)n=i*ti,r.point(-ut,n),r.point(0,n),r.point(ut,n),r.point(ut,0),r.point(ut,-n),r.point(0,-n),r.point(-ut,-n),r.point(-ut,0),r.point(-ut,n);else if(nt(t[0]-e[0])>Pe){var s=t[0]<e[0]?ut:-ut;n=i*s/2,r.point(-s,n),r.point(0,n),r.point(s,n)}else r.point(e[0],e[1])}function JW(t){var e=Le(t),i=2*st,r=e>0,n=nt(e)>Pe;function s(c,h,d,p){XW(p,t,i,d,c,h)}function o(c,h){return Le(c)*Le(h)>e}function a(c){var h,d,p,f,m;return{lineStart:function(){f=p=!1,m=1},point:function(g,b){var v=[g,b],y,x=o(g,b),_=r?x?0:u(g,b):x?u(g+(g<0?ut:-ut),b):0;if(!h&&(f=p=x)&&c.lineStart(),x!==p&&(y=l(h,v),(!y||K0(h,y)||K0(v,y))&&(v[2]=1)),x!==p)m=0,x?(c.lineStart(),y=l(v,h),c.point(y[0],y[1])):(y=l(h,v),c.point(y[0],y[1],2),c.lineEnd()),h=y;else if(n&&h&&r^x){var w;!(_&d)&&(w=l(v,h,!0))&&(m=0,r?(c.lineStart(),c.point(w[0][0],w[0][1]),c.point(w[1][0],w[1][1]),c.lineEnd()):(c.point(w[1][0],w[1][1]),c.lineEnd(),c.lineStart(),c.point(w[0][0],w[0][1],3)))}x&&(!h||!K0(h,v))&&c.point(v[0],v[1]),h=v,p=x,d=_},lineEnd:function(){p&&c.lineEnd(),h=null},clean:function(){return m|(f&&p)<<1}}}function l(c,h,d){var p=Ho(c),f=Ho(h),m=[1,0,0],g=qu(p,f),b=Pv(g,g),v=g[0],y=b-v*v;if(!y)return!d&&c;var x=e*b/y,_=-e*v/y,w=qu(m,g),C=zv(m,x),E=zv(g,_);jC(C,E);var A=w,D=Pv(C,A),R=Pv(A,A),I=D*D-R*(Pv(C,C)-1);if(!(I<0)){var z=ri(I),B=zv(A,(-D-z)/R);if(jC(B,C),B=Mf(B),!d)return B;var N=c[0],H=h[0],T=c[1],L=h[1],P;H<N&&(P=N,N=H,H=P);var W=H-N,Y=nt(W-ut)<Pe,ne=Y||W<Pe;if(!Y&&L<T&&(P=T,T=L,L=P),ne?Y?T+L>0^B[1]<(nt(B[0]-N)<Pe?T:L):T<=B[1]&&B[1]<=L:W>ut^(N<=B[0]&&B[0]<=H)){var ke=zv(A,(-D+z)/R);return jC(ke,C),[B,Mf(ke)]}}}function u(c,h){var d=r?t:ut-t,p=0;return c<-d?p|=1:c>d&&(p|=2),h<-d?p|=4:h>d&&(p|=8),p}return i4(o,a,s,r?[0,-t]:[-ut,t-ut])}function ZW(t,e,i,r,n,s){var o=t[0],a=t[1],l=e[0],u=e[1],c=0,h=1,d=l-o,p=u-a,f;if(f=i-o,!(!d&&f>0)){if(f/=d,d<0){if(f<c)return;f<h&&(h=f)}else if(d>0){if(f>h)return;f>c&&(c=f)}if(f=n-o,!(!d&&f<0)){if(f/=d,d<0){if(f>h)return;f>c&&(c=f)}else if(d>0){if(f<c)return;f<h&&(h=f)}if(f=r-a,!(!p&&f>0)){if(f/=p,p<0){if(f<c)return;f<h&&(h=f)}else if(p>0){if(f>h)return;f>c&&(c=f)}if(f=s-a,!(!p&&f<0)){if(f/=p,p<0){if(f>h)return;f>c&&(c=f)}else if(p>0){if(f<c)return;f<h&&(h=f)}return c>0&&(t[0]=o+c*d,t[1]=a+c*p),h<1&&(e[0]=o+h*d,e[1]=a+h*p),!0}}}}}var Hv=1e9,r4=-Hv;function Uv(t,e,i,r){function n(u,c){return t<=u&&u<=i&&e<=c&&c<=r}function s(u,c,h,d){var p=0,f=0;if(u==null||(p=o(u,h))!==(f=o(c,h))||l(u,c)<0^h>0)do d.point(p===0||p===3?t:i,p>1?r:e);while((p=(p+h+4)%4)!==f);else d.point(c[0],c[1])}function o(u,c){return nt(u[0]-t)<Pe?c>0?0:3:nt(u[0]-i)<Pe?c>0?2:1:nt(u[1]-e)<Pe?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var h=o(u,1),d=o(c,1);return h!==d?h-d:h===0?c[1]-u[1]:h===1?u[0]-c[0]:h===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,h=QC(),d,p,f,m,g,b,v,y,x,_,w,C={point:E,lineStart:I,lineEnd:z,polygonStart:D,polygonEnd:R};function E(N,H){n(N,H)&&c.point(N,H)}function A(){for(var N=0,H=0,T=p.length;H<T;++H)for(var L=p[H],P=1,W=L.length,Y=L[0],ne,ke,Ae=Y[0],G=Y[1];P<W;++P)ne=Ae,ke=G,Y=L[P],Ae=Y[0],G=Y[1],ke<=r?G>r&&(Ae-ne)*(r-ke)>(G-ke)*(t-ne)&&++N:G<=r&&(Ae-ne)*(r-ke)<(G-ke)*(t-ne)&&--N;return N}function D(){c=h,d=[],p=[],w=!0}function R(){var N=A(),H=w&&N,T=(d=a0(d)).length;(H||T)&&(u.polygonStart(),H&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),T&&t4(d,a,N,s,u),u.polygonEnd()),c=u,d=p=f=null}function I(){C.point=B,p&&p.push(f=[]),_=!0,x=!1,v=y=NaN}function z(){d&&(B(m,g),b&&x&&h.rejoin(),d.push(h.result())),C.point=E,x&&c.lineEnd()}function B(N,H){var T=n(N,H);if(p&&f.push([N,H]),_)m=N,g=H,b=T,_=!1,T&&(c.lineStart(),c.point(N,H));else if(T&&x)c.point(N,H);else{var L=[v=Math.max(r4,Math.min(Hv,v)),y=Math.max(r4,Math.min(Hv,y))],P=[N=Math.max(r4,Math.min(Hv,N)),H=Math.max(r4,Math.min(Hv,H))];ZW(L,P,t,e,i,r)?(x||(c.lineStart(),c.point(L[0],L[1])),c.point(P[0],P[1]),T||c.lineEnd(),w=!1):T&&(c.lineStart(),c.point(N,H),w=!1)}v=N,y=H,x=T}return C}}function QW(t,e,i){var r=Ji(t,e-Pe,i).concat(e);return function(n){return r.map(function(s){return[n,s]})}}function eV(t,e,i){var r=Ji(t,e-Pe,i).concat(e);return function(n){return r.map(function(s){return[s,n]})}}function n4(){var t,e,i,r,n,s,o,a,l=10,u=l,c=90,h=360,d,p,f,m,g=2.5;function b(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ji(Lv(r/c)*c,i,c).map(f).concat(Ji(Lv(a/h)*h,o,h).map(m)).concat(Ji(Lv(e/l)*l,t,l).filter(function(y){return nt(y%c)>Pe}).map(d)).concat(Ji(Lv(s/u)*u,n,u).filter(function(y){return nt(y%h)>Pe}).map(p))}return b.lines=function(){return v().map(function(y){return{type:"LineString",coordinates:y}})},b.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(m(o).slice(1),f(i).reverse().slice(1),m(a).reverse().slice(1))]}},b.extent=function(y){return arguments.length?b.extentMajor(y).extentMinor(y):b.extentMinor()},b.extentMajor=function(y){return arguments.length?(r=+y[0][0],i=+y[1][0],a=+y[0][1],o=+y[1][1],r>i&&(y=r,r=i,i=y),a>o&&(y=a,a=o,o=y),b.precision(g)):[[r,a],[i,o]]},b.extentMinor=function(y){return arguments.length?(e=+y[0][0],t=+y[1][0],s=+y[0][1],n=+y[1][1],e>t&&(y=e,e=t,t=y),s>n&&(y=s,s=n,n=y),b.precision(g)):[[e,s],[t,n]]},b.step=function(y){return arguments.length?b.stepMajor(y).stepMinor(y):b.stepMinor()},b.stepMajor=function(y){return arguments.length?(c=+y[0],h=+y[1],b):[c,h]},b.stepMinor=function(y){return arguments.length?(l=+y[0],u=+y[1],b):[l,u]},b.precision=function(y){return arguments.length?(g=+y,d=QW(s,n,90),p=eV(e,t,g),f=QW(a,o,90),m=eV(r,i,g),b):g},b.extentMajor([[-180,-90+Pe],[180,90-Pe]]).extentMinor([[-180,-80-Pe],[180,80+Pe]])}var Ih=t=>t;var Q9=new _i,eT=new _i,tV,iV,tT,iT,Bh={point:vi,lineStart:vi,lineEnd:vi,polygonStart:function(){Bh.lineStart=ume,Bh.lineEnd=hme},polygonEnd:function(){Bh.lineStart=Bh.lineEnd=Bh.point=vi,Q9.add(nt(eT)),eT=new _i},result:function(){var t=Q9/2;return Q9=new _i,t}};function ume(){Bh.point=cme}function cme(t,e){Bh.point=rV,tV=tT=t,iV=iT=e}function rV(t,e){eT.add(iT*t-tT*e),tT=t,iT=e}function hme(){rV(tV,iV)}var rT=Bh;var J0=1/0,s4=J0,Wv=-J0,o4=Wv,dme={point:fme,lineStart:vi,lineEnd:vi,polygonStart:vi,polygonEnd:vi,result:function(){var t=[[J0,s4],[Wv,o4]];return Wv=o4=-(s4=J0=1/0),t}};function fme(t,e){t<J0&&(J0=t),t>Wv&&(Wv=t),e<s4&&(s4=e),e>o4&&(o4=e)}var Z0=dme;var nT=0,sT=0,Vv=0,a4=0,l4=0,Q0=0,oT=0,aT=0,jv=0,oV,aV,Pl,zl,Da={point:Of,lineStart:nV,lineEnd:sV,polygonStart:function(){Da.lineStart=gme,Da.lineEnd=bme},polygonEnd:function(){Da.point=Of,Da.lineStart=nV,Da.lineEnd=sV},result:function(){var t=jv?[oT/jv,aT/jv]:Q0?[a4/Q0,l4/Q0]:Vv?[nT/Vv,sT/Vv]:[NaN,NaN];return nT=sT=Vv=a4=l4=Q0=oT=aT=jv=0,t}};function Of(t,e){nT+=t,sT+=e,++Vv}function nV(){Da.point=pme}function pme(t,e){Da.point=mme,Of(Pl=t,zl=e)}function mme(t,e){var i=t-Pl,r=e-zl,n=ri(i*i+r*r);a4+=n*(Pl+t)/2,l4+=n*(zl+e)/2,Q0+=n,Of(Pl=t,zl=e)}function sV(){Da.point=Of}function gme(){Da.point=vme}function bme(){lV(oV,aV)}function vme(t,e){Da.point=lV,Of(oV=Pl=t,aV=zl=e)}function lV(t,e){var i=t-Pl,r=e-zl,n=ri(i*i+r*r);a4+=n*(Pl+t)/2,l4+=n*(zl+e)/2,Q0+=n,n=zl*t-Pl*e,oT+=n*(Pl+t),aT+=n*(zl+e),jv+=n*3,Of(Pl=t,zl=e)}var lT=Da;function u4(t){this._context=t}u4.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Zi);break}}},result:vi};var cT=new _i,uT,uV,cV,qv,Gv,c4={point:vi,lineStart:function(){c4.point=yme},lineEnd:function(){uT&&hV(uV,cV),c4.point=vi},polygonStart:function(){uT=!0},polygonEnd:function(){uT=null},result:function(){var t=+cT;return cT=new _i,t}};function yme(t,e){c4.point=hV,uV=qv=t,cV=Gv=e}function hV(t,e){qv-=t,Gv-=e,cT.add(ri(qv*qv+Gv*Gv)),qv=t,Gv=e}var hT=c4;var dV,h4,fV,pV,em=class{constructor(e){this._append=e==null?mV:xme(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,i){switch(this._point){case 0:{this._append`M${e},${i}`,this._point=1;break}case 1:{this._append`L${e},${i}`;break}default:{if(this._append`M${e},${i}`,this._radius!==fV||this._append!==h4){let r=this._radius,n=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,fV=r,h4=this._append,pV=this._,this._=n}this._+=pV;break}}}result(){let e=this._;return this._="",e.length?e:null}};function mV(t){let e=1;this._+=t[0];for(let i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function xme(t){let e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return mV;if(e!==dV){let i=10**e;dV=e,h4=function(n){let s=1;this._+=n[0];for(let o=n.length;s<o;++s)this._+=Math.round(arguments[s]*i)/i+n[s]}}return h4}function d4(t,e){let i=3,r=4.5,n,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Ds(a,n(s))),s.result()}return o.area=function(a){return Ds(a,n(rT)),rT.result()},o.measure=function(a){return Ds(a,n(hT)),hT.result()},o.bounds=function(a){return Ds(a,n(Z0)),Z0.result()},o.centroid=function(a){return Ds(a,n(lT)),lT.result()},o.projection=function(a){return arguments.length?(n=a==null?(t=null,Ih):(t=a).stream,o):t},o.context=function(a){return arguments.length?(s=a==null?(e=null,new em(i)):new u4(e=a),typeof r!="function"&&s.pointRadius(r),o):e},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return i;if(a==null)i=null;else{let l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);i=l}return e===null&&(s=new em(i)),o},o.projection(t).digits(i).context(e)}function Pf(t){return function(e){var i=new dT;for(var r in t)i[r]=t[r];return i.stream=e,i}}function dT(){}dT.prototype={constructor:dT,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fT(t,e,i){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Ds(i,t.stream(Z0)),e(Z0.result()),r!=null&&t.clipExtent(r),t}function zf(t,e,i){return fT(t,function(r){var n=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(n/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+e[0][0]+(n-o*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(s-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,l])},i)}function tm(t,e,i){return zf(t,[[0,0],e],i)}function im(t,e,i){return fT(t,function(r){var n=+e,s=n/(r[1][0]-r[0][0]),o=(n-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];t.scale(150*s).translate([o,a])},i)}function rm(t,e,i){return fT(t,function(r){var n=+e,s=n/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(n-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([o,a])},i)}var gV=16,wme=Le(30*st);function pT(t,e){return+e?Cme(t,e):_me(t)}function _me(t){return Pf({point:function(e,i){e=t(e,i),this.stream.point(e[0],e[1])}})}function Cme(t,e){function i(r,n,s,o,a,l,u,c,h,d,p,f,m,g){var b=u-r,v=c-n,y=b*b+v*v;if(y>4*e&&m--){var x=o+d,_=a+p,w=l+f,C=ri(x*x+_*_+w*w),E=bi(w/=C),A=nt(nt(w)-1)<Pe||nt(s-h)<Pe?(s+h)/2:Ui(_,x),D=t(A,E),R=D[0],I=D[1],z=R-r,B=I-n,N=v*z-b*B;(N*N/y>e||nt((b*z+v*B)/y-.5)>.3||o*d+a*p+l*f<wme)&&(i(r,n,s,o,a,l,R,I,A,x/=C,_/=C,w,m,g),g.point(R,I),i(R,I,A,x,_,w,u,c,h,d,p,f,m,g))}}return function(r){var n,s,o,a,l,u,c,h,d,p,f,m,g={point:b,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function b(E,A){E=t(E,A),r.point(E[0],E[1])}function v(){h=NaN,g.point=y,r.lineStart()}function y(E,A){var D=Ho([E,A]),R=t(E,A);i(h,d,c,p,f,m,h=R[0],d=R[1],c=E,p=D[0],f=D[1],m=D[2],gV,r),r.point(h,d)}function x(){g.point=b,r.lineEnd()}function _(){v(),g.point=w,g.lineEnd=C}function w(E,A){y(n=E,A),s=h,o=d,a=p,l=f,u=m,g.point=y}function C(){i(h,d,c,p,f,m,s,o,n,a,l,u,gV,r),g.lineEnd=x,x()}return g}}var Sme=Pf({point:function(t,e){this.stream.point(t*st,e*st)}});function Eme(t){return Pf({point:function(e,i){var r=t(e,i);return this.stream.point(r[0],r[1])}})}function kme(t,e,i,r,n){function s(o,a){return o*=r,a*=n,[e+t*o,i-t*a]}return s.invert=function(o,a){return[(o-e)/t*r,(i-a)/t*n]},s}function bV(t,e,i,r,n,s){if(!s)return kme(t,e,i,r,n);var o=Le(s),a=Fe(s),l=o*t,u=a*t,c=o/t,h=a/t,d=(a*i-o*e)/t,p=(a*e+o*i)/t;function f(m,g){return m*=r,g*=n,[l*m-u*g+e,i-u*m-l*g]}return f.invert=function(m,g){return[r*(c*m-h*g+d),n*(p-h*m-c*g)]},f}function Vi(t){return f4(function(){return t})()}function f4(t){var e,i=150,r=480,n=250,s=0,o=0,a=0,l=0,u=0,c,h=0,d=1,p=1,f=null,m=Z9,g=null,b,v,y,x=Ih,_=.5,w,C,E,A,D;function R(N){return E(N[0]*st,N[1]*st)}function I(N){return N=E.invert(N[0],N[1]),N&&[N[0]*ii,N[1]*ii]}R.stream=function(N){return A&&D===N?A:A=Sme(Eme(c)(m(w(x(D=N)))))},R.preclip=function(N){return arguments.length?(m=N,f=void 0,B()):m},R.postclip=function(N){return arguments.length?(x=N,g=b=v=y=null,B()):x},R.clipAngle=function(N){return arguments.length?(m=+N?JW(f=N*st):(f=null,Z9),B()):f*ii},R.clipExtent=function(N){return arguments.length?(x=N==null?(g=b=v=y=null,Ih):Uv(g=+N[0][0],b=+N[0][1],v=+N[1][0],y=+N[1][1]),B()):g==null?null:[[g,b],[v,y]]},R.scale=function(N){return arguments.length?(i=+N,z()):i},R.translate=function(N){return arguments.length?(r=+N[0],n=+N[1],z()):[r,n]},R.center=function(N){return arguments.length?(s=N[0]%360*st,o=N[1]%360*st,z()):[s*ii,o*ii]},R.rotate=function(N){return arguments.length?(a=N[0]%360*st,l=N[1]%360*st,u=N.length>2?N[2]%360*st:0,z()):[a*ii,l*ii,u*ii]},R.angle=function(N){return arguments.length?(h=N%360*st,z()):h*ii},R.reflectX=function(N){return arguments.length?(d=N?-1:1,z()):d<0},R.reflectY=function(N){return arguments.length?(p=N?-1:1,z()):p<0},R.precision=function(N){return arguments.length?(w=pT(C,_=N*N),B()):ri(_)},R.fitExtent=function(N,H){return zf(R,N,H)},R.fitSize=function(N,H){return tm(R,N,H)},R.fitWidth=function(N,H){return im(R,N,H)},R.fitHeight=function(N,H){return rm(R,N,H)};function z(){var N=bV(i,0,0,d,p,h).apply(null,e(s,o)),H=bV(i,r-N[0],n-N[1],d,p,h);return c=K9(a,l,u),C=$v(e,H),E=$v(c,C),w=pT(C,_),B()}function B(){return A=D=null,R}return function(){return e=t.apply(this,arguments),R.invert=e.invert&&I,z()}}function nm(t){var e=0,i=ut/3,r=f4(t),n=r(e,i);return n.parallels=function(s){return arguments.length?r(e=s[0]*st,i=s[1]*st):[e*ii,i*ii]},n}function vV(t){var e=Le(t);function i(r,n){return[r*e,Fe(n)/e]}return i.invert=function(r,n){return[r/e,bi(n*e)]},i}function yV(t,e){var i=Fe(t),r=(i+Fe(e))/2;if(nt(r)<Pe)return vV(t);var n=1+i*(2*r-i),s=ri(n)/r;function o(a,l){var u=ri(n-2*r*Fe(l))/r;return[u*Fe(a*=r),s-u*Le(a)]}return o.invert=function(a,l){var u=s-l,c=Ui(a,nt(u))*Tn(u);return u*r<0&&(c-=ut*Tn(a)*Tn(u)),[c/r,bi((n-(a*a+u*u)*r*r)/(2*r))]},o}function Nh(){return nm(yV).scale(155.424).center([0,33.6442])}function Xv(){return Nh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ame(t){var e=t.length;return{point:function(i,r){for(var n=-1;++n<e;)t[n].point(i,r)},sphere:function(){for(var i=-1;++i<e;)t[i].sphere()},lineStart:function(){for(var i=-1;++i<e;)t[i].lineStart()},lineEnd:function(){for(var i=-1;++i<e;)t[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<e;)t[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<e;)t[i].polygonEnd()}}}function mT(){var t,e,i=Xv(),r,n=Nh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=Nh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,p){l=[d,p]}};function c(d){var p=d[0],f=d[1];return l=null,r.point(p,f),l||(s.point(p,f),l)||(a.point(p,f),l)}c.invert=function(d){var p=i.scale(),f=i.translate(),m=(d[0]-f[0])/p,g=(d[1]-f[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?n:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:i).invert(d)},c.stream=function(d){return t&&e===d?t:t=Ame([i.stream(e=d),n.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(i.precision(d),n.precision(d),o.precision(d),h()):i.precision()},c.scale=function(d){return arguments.length?(i.scale(d),n.scale(d*.35),o.scale(d),c.translate(i.translate())):i.scale()},c.translate=function(d){if(!arguments.length)return i.translate();var p=i.scale(),f=+d[0],m=+d[1];return r=i.translate(d).clipExtent([[f-.455*p,m-.238*p],[f+.455*p,m+.238*p]]).stream(u),s=n.translate([f-.307*p,m+.201*p]).clipExtent([[f-.425*p+Pe,m+.12*p+Pe],[f-.214*p-Pe,m+.234*p-Pe]]).stream(u),a=o.translate([f-.205*p,m+.212*p]).clipExtent([[f-.214*p+Pe,m+.166*p+Pe],[f-.115*p-Pe,m+.234*p-Pe]]).stream(u),h()},c.fitExtent=function(d,p){return zf(c,d,p)},c.fitSize=function(d,p){return tm(c,d,p)},c.fitWidth=function(d,p){return im(c,d,p)},c.fitHeight=function(d,p){return rm(c,d,p)};function h(){return t=e=null,c}return c.scale(1070)}function p4(t){return function(e,i){var r=Le(e),n=Le(i),s=t(r*n);return s===1/0?[2,0]:[s*n*Fe(e),s*Fe(i)]}}function Il(t){return function(e,i){var r=ri(e*e+i*i),n=t(r),s=Fe(n),o=Le(n);return[Ui(e*s,r*o),bi(r&&i*s/r)]}}var gT=p4(function(t){return ri(2/(1+t))});gT.invert=Il(function(t){return 2*bi(t/2)});function bT(){return Vi(gT).scale(124.75).clipAngle(180-.001)}var vT=p4(function(t){return(t=UC(t))&&t/Fe(t)});vT.invert=Il(function(t){return t});function yT(){return Vi(vT).scale(79.4188).clipAngle(180-.001)}function sm(t,e){return[t,Df(X0((ti+e)/2))]}sm.invert=function(t,e){return[t,2*$o(NC(e))-ti]};function xT(){return wT(sm).scale(961/Zi)}function wT(t){var e=Vi(t),i=e.center,r=e.scale,n=e.translate,s=e.clipExtent,o=null,a,l,u;e.scale=function(h){return arguments.length?(r(h),c()):r()},e.translate=function(h){return arguments.length?(n(h),c()):n()},e.center=function(h){return arguments.length?(i(h),c()):i()},e.clipExtent=function(h){return arguments.length?(h==null?o=a=l=u=null:(o=+h[0][0],a=+h[0][1],l=+h[1][0],u=+h[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var h=ut*r(),d=e(qW(e.rotate()).invert([0,0]));return s(o==null?[[d[0]-h,d[1]-h],[d[0]+h,d[1]+h]]:t===sm?[[Math.max(d[0]-h,o),a],[Math.min(d[0]+h,l),u]]:[[o,Math.max(d[1]-h,a)],[l,Math.min(d[1]+h,u)]])}return c()}function m4(t){return X0((ti+t)/2)}function xV(t,e){var i=Le(t),r=t===e?Fe(t):Df(i/Le(e))/Df(m4(e)/m4(t)),n=i*HC(m4(t),r)/r;if(!r)return sm;function s(o,a){n>0?a<-ti+Pe&&(a=-ti+Pe):a>ti-Pe&&(a=ti-Pe);var l=n/HC(m4(a),r);return[l*Fe(r*o),n-l*Le(r*o)]}return s.invert=function(o,a){var l=n-a,u=Tn(r)*ri(o*o+l*l),c=Ui(o,nt(l))*Tn(l);return l*r<0&&(c-=ut*Tn(o)*Tn(l)),[c/r,2*$o(HC(n/u,1/r))-ti]},s}function _T(){return nm(xV).scale(109.5).parallels([30,30])}function om(t,e){return[t,e]}om.invert=om;function CT(){return Vi(om).scale(152.63)}function wV(t,e){var i=Le(t),r=t===e?Fe(t):(i-Le(e))/(e-t),n=i/r+t;if(nt(r)<Pe)return om;function s(o,a){var l=n-a,u=r*o;return[l*Fe(u),n-l*Le(u)]}return s.invert=function(o,a){var l=n-a,u=Ui(o,nt(l))*Tn(l);return l*r<0&&(u-=ut*Tn(o)*Tn(l)),[u/r,n-Tn(r)*ri(o*o+l*l)]},s}function ST(){return nm(wV).scale(131.154).center([0,13.9389])}var Yv=1.340264,Kv=-.081106,Jv=893e-6,Zv=.003796,g4=ri(3)/2,Tme=12;function ET(t,e){var i=bi(g4*Fe(e)),r=i*i,n=r*r*r;return[t*Le(i)/(g4*(Yv+3*Kv*r+n*(7*Jv+9*Zv*r))),i*(Yv+Kv*r+n*(Jv+Zv*r))]}ET.invert=function(t,e){for(var i=e,r=i*i,n=r*r*r,s=0,o,a,l;s<Tme&&(a=i*(Yv+Kv*r+n*(Jv+Zv*r))-e,l=Yv+3*Kv*r+n*(7*Jv+9*Zv*r),i-=o=a/l,r=i*i,n=r*r*r,!(nt(o)<Rf));++s);return[g4*t*(Yv+3*Kv*r+n*(7*Jv+9*Zv*r))/Le(i),bi(Fe(i)/g4)]};function kT(){return Vi(ET).scale(177.158)}function AT(t,e){var i=Le(e),r=Le(t)*i;return[i*Fe(t)/r,Fe(e)/r]}AT.invert=Il($o);function TT(){return Vi(AT).scale(144.049).clipAngle(60)}function RT(){var t=1,e=0,i=0,r=1,n=1,s=0,o,a,l=null,u,c,h,d=1,p=1,f=Pf({point:function(x,_){var w=y([x,_]);this.stream.point(w[0],w[1])}}),m=Ih,g,b;function v(){return d=t*r,p=t*n,g=b=null,y}function y(x){var _=x[0]*d,w=x[1]*p;if(s){var C=w*o-_*a;_=_*o+w*a,w=C}return[_+e,w+i]}return y.invert=function(x){var _=x[0]-e,w=x[1]-i;if(s){var C=w*o+_*a;_=_*o-w*a,w=C}return[_/d,w/p]},y.stream=function(x){return g&&b===x?g:g=f(m(b=x))},y.postclip=function(x){return arguments.length?(m=x,l=u=c=h=null,v()):m},y.clipExtent=function(x){return arguments.length?(m=x==null?(l=u=c=h=null,Ih):Uv(l=+x[0][0],u=+x[0][1],c=+x[1][0],h=+x[1][1]),v()):l==null?null:[[l,u],[c,h]]},y.scale=function(x){return arguments.length?(t=+x,v()):t},y.translate=function(x){return arguments.length?(e=+x[0],i=+x[1],v()):[e,i]},y.angle=function(x){return arguments.length?(s=x%360*st,a=Fe(s),o=Le(s),v()):s*ii},y.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},y.reflectY=function(x){return arguments.length?(n=x?-1:1,v()):n<0},y.fitExtent=function(x,_){return zf(y,x,_)},y.fitSize=function(x,_){return tm(y,x,_)},y.fitWidth=function(x,_){return im(y,x,_)},y.fitHeight=function(x,_){return rm(y,x,_)},y}function DT(t,e){var i=e*e,r=i*i;return[t*(.8707-.131979*i+r*(-.013791+r*(.003971*i-.001529*r))),e*(1.007226+i*(.015085+r*(-.044475+.028874*i-.005916*r)))]}DT.invert=function(t,e){var i=e,r=25,n;do{var s=i*i,o=s*s;i-=n=(i*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-e)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(nt(n)>Pe&&--r>0);return[t/(.8707+(s=i*i)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),i]};function MT(){return Vi(DT).scale(175.295)}function FT(t,e){return[Le(e)*Fe(t),Fe(e)]}FT.invert=Il(bi);function LT(){return Vi(FT).scale(249.5).clipAngle(90+Pe)}function OT(t,e){var i=Le(e),r=1+Le(t)*i;return[i*Fe(t)/r,Fe(e)/r]}OT.invert=Il(function(t){return 2*$o(t)});function PT(){return Vi(OT).scale(250).clipAngle(142)}function zT(t,e){return[Df(X0((ti+e)/2)),-t]}zT.invert=function(t,e){return[-e,2*$o(NC(t))-ti]};function IT(){var t=wT(zT),e=t.center,i=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?i([r[0],r[1],r.length>2?r[2]+90:90]):(r=i(),[r[0],r[1],r[2]-90])},i([0,0,90]).scale(159.155)}var _V=Math.abs;var v4=Math.cos;var Qv=Math.sin;var CV=1e-6;var $h=Math.PI,b4=$h/2,AJe=$h/4;var BT=SV(2),TJe=SV($h),RJe=$h*2,DJe=180/$h,MJe=$h/180;function NT(t){return t>1?b4:t<-1?-b4:Math.asin(t)}function SV(t){return t>0?Math.sqrt(t):0}function Rme(t,e){var i=t*Qv(e),r=30,n;do e-=n=(e+Qv(e)-i)/(1+v4(e));while(_V(n)>CV&&--r>0);return e/2}function Dme(t,e,i){function r(n,s){return[t*n*v4(s=Rme(i,s)),e*Qv(s)]}return r.invert=function(n,s){return s=NT(s/e),[n/(t*v4(s)),NT((2*s+Qv(2*s))/i)]},r}var EV=Dme(BT/b4,BT,$h);function $T(){return Vi(EV).scale(169.529)}var Mme=d4(),x4=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Fme(t,e){return function i(){let r=e();return r.type=t,r.path=d4().projection(r),r.copy=r.copy||function(){let n=i();return x4.forEach(s=>{r[s]&&n[s](r[s]())}),n.path.pointRadius(r.path.pointRadius()),n},wA(r)}}function ey(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(y4[t]=Fme(t,e),this):y4[t]||null}function HT(t){return t&&t.path||Mme}var y4={albers:Xv,albersusa:mT,azimuthalequalarea:bT,azimuthalequidistant:yT,conicconformal:_T,conicequalarea:Nh,conicequidistant:ST,equalEarth:kT,equirectangular:CT,gnomonic:TT,identity:RT,mercator:xT,mollweide:$T,naturalEarth1:MT,orthographic:LT,stereographic:PT,transversemercator:IT};for(let t in y4)ey(t,y4[t]);function Lme(){}var Yu=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function TV(){var t=1,e=1,i=a;function r(l,u){return u.map(c=>n(l,c))}function n(l,u){var c=[],h=[];return s(l,u,d=>{i(d,l,u),Ome(d)>0?c.push([d]):h.push(d)}),h.forEach(d=>{for(var p=0,f=c.length,m;p<f;++p)if(Pme((m=c[p])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var h=[],d=[],p,f,m,g,b,v;for(p=f=-1,g=l[0]>=u,Yu[g<<1].forEach(y);++p<t-1;)m=g,g=l[p+1]>=u,Yu[m|g<<1].forEach(y);for(Yu[g<<0].forEach(y);++f<e-1;){for(p=-1,g=l[f*t+t]>=u,b=l[f*t]>=u,Yu[g<<1|b<<2].forEach(y);++p<t-1;)m=g,g=l[f*t+t+p+1]>=u,v=b,b=l[f*t+p+1]>=u,Yu[m|g<<1|b<<2|v<<3].forEach(y);Yu[g|b<<3].forEach(y)}for(p=-1,b=l[f*t]>=u,Yu[b<<2].forEach(y);++p<t-1;)v=b,b=l[f*t+p+1]>=u,Yu[b<<2|v<<3].forEach(y);Yu[b<<3].forEach(y);function y(x){var _=[x[0][0]+p,x[0][1]+f],w=[x[1][0]+p,x[1][1]+f],C=o(_),E=o(w),A,D;(A=d[C])?(D=h[E])?(delete d[A.end],delete h[D.start],A===D?(A.ring.push(w),c(A.ring)):h[A.start]=d[D.end]={start:A.start,end:D.end,ring:A.ring.concat(D.ring)}):(delete d[A.end],A.ring.push(w),d[A.end=E]=A):(A=h[E])?(D=d[C])?(delete h[A.start],delete d[D.end],A===D?(A.ring.push(w),c(A.ring)):h[D.start]=d[A.end]={start:D.start,end:A.end,ring:D.ring.concat(A.ring)}):(delete h[A.start],A.ring.unshift(_),h[A.start=C]=A):h[C]=d[E]={start:C,end:E,ring:[_,w]}}}function o(l){return l[0]*2+l[1]*(t+1)*4}function a(l,u,c){l.forEach(h=>{var d=h[0],p=h[1],f=d|0,m=p|0,g,b=u[m*t+f];d>0&&d<t&&f===d&&(g=u[m*t+f-1],h[0]=d+(c-g)/(b-g)-.5),p>0&&p<e&&m===p&&(g=u[(m-1)*t+f],h[1]=p+(c-g)/(b-g)-.5)})}return r.contour=n,r.size=function(l){if(!arguments.length)return[t,e];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||te("invalid size"),t=u,e=c,r},r.smooth=function(l){return arguments.length?(i=l?a:Lme,r):i===a},r}function Ome(t){for(var e=0,i=t.length,r=t[i-1][1]*t[0][0]-t[i-1][0]*t[0][1];++e<i;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}function Pme(t,e){for(var i=-1,r=e.length,n;++i<r;)if(n=zme(t,e[i]))return n;return 0}function zme(t,e){for(var i=e[0],r=e[1],n=-1,s=0,o=t.length,a=o-1;s<o;a=s++){var l=t[s],u=l[0],c=l[1],h=t[a],d=h[0],p=h[1];if(Ime(l,h,e))return 0;c>r!=p>r&&i<(d-u)*(r-c)/(p-c)+u&&(n=-n)}return n}function Ime(t,e,i){var r;return Bme(t,e,i)&&Nme(t[r=+(t[0]===e[0])],i[r],e[r])}function Bme(t,e,i){return(e[0]-t[0])*(i[1]-t[1])===(i[0]-t[0])*(e[1]-t[1])}function Nme(t,e,i){return t<=e&&e<=i||i<=e&&e<=t}function RV(t,e,i){return function(r){var n=Kn(r),s=i?Math.min(n[0],0):n[0],o=n[1],a=o-s,l=e?Jn(s,o,t):a/(t+1);return Ji(s+l,o,l)}}function VT(t){ee.call(this,null,t)}VT.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};we(VT,ee,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,n=t.field||$i,s=TV().smooth(t.smooth!==!1),o=t.thresholds||$me(r,n,t),a=t.as===null?null:t.as||"contour",l=[];return r.forEach(u=>{let c=n(u),h=s.size([c.width,c.height])(c.values,K(o)?o:o(c.values));Hme(h,c,u,t),h.forEach(d=>{l.push(rf(u,_t(a!=null?{[a]:d}:d)))})}),this.value&&(i.rem=this.value),this.value=i.source=i.add=l,i}});function $me(t,e,i){let r=RV(i.levels||10,i.nice,i.zero!==!1);return i.resolve!=="shared"?r:r(t.map(n=>Ro(e(n).values)))}function Hme(t,e,i,r){let n=r.scale||e.scale,s=r.translate||e.translate;if(Je(n)&&(n=n(i,r)),Je(s)&&(s=s(i,r)),(n===1||n==null)&&!s)return;let o=(ct(n)?n:n[0])||1,a=(ct(n)?n:n[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;t.forEach(DV(e,o,a,l,u))}function DV(t,e,i,r,n){let s=t.x1||0,o=t.y1||0,a=e*i<0;function l(h){h.forEach(u)}function u(h){a&&h.reverse(),h.forEach(c)}function c(h){h[0]=(h[0]-s)*e+r,h[1]=(h[1]-o)*i+n}return function(h){return h.coordinates.forEach(l),h}}function kV(t,e,i){let r=t>=0?t:V2(e,i);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function UT(t){return Je(t)?t:wi(+t)}function MV(){var t=l=>l[0],e=l=>l[1],i=bl,r=[-1,-1],n=960,s=500,o=2;function a(l,u){let c=kV(r[0],l,t)>>o,h=kV(r[1],l,e)>>o,d=c?c+2:0,p=h?h+2:0,f=2*d+(n>>o),m=2*p+(s>>o),g=new Float32Array(f*m),b=new Float32Array(f*m),v=g;l.forEach(x=>{let _=d+(+t(x)>>o),w=p+(+e(x)>>o);_>=0&&_<f&&w>=0&&w<m&&(g[_+w*f]+=+i(x))}),c>0&&h>0?(am(f,m,g,b,c),lm(f,m,b,g,h),am(f,m,g,b,c),lm(f,m,b,g,h),am(f,m,g,b,c),lm(f,m,b,g,h)):c>0?(am(f,m,g,b,c),am(f,m,b,g,c),am(f,m,g,b,c),v=b):h>0&&(lm(f,m,g,b,h),lm(f,m,b,g,h),lm(f,m,g,b,h),v=b);let y=u?Math.pow(2,-2*o):1/l0(v);for(let x=0,_=f*m;x<_;++x)v[x]*=y;return{values:v,scale:1<<o,width:f,height:m,x1:d,y1:p,x2:d+(n>>o),y2:p+(s>>o)}}return a.x=function(l){return arguments.length?(t=UT(l),a):t},a.y=function(l){return arguments.length?(e=UT(l),a):e},a.weight=function(l){return arguments.length?(i=UT(l),a):i},a.size=function(l){if(!arguments.length)return[n,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||te("invalid size"),n=u,s=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||te("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=ve(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&te("invalid bandwidth"),r=l,a):r},a}function am(t,e,i,r,n){let s=(n<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+n;++a)a<t&&(l+=i[a+o*t]),a>=n&&(a>=s&&(l-=i[a-s+o*t]),r[a-n+o*t]=l/Math.min(a+1,t-1+s-a,s))}function lm(t,e,i,r,n){let s=(n<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+n;++a)a<e&&(l+=i[o+a*t]),a>=n&&(a>=s&&(l-=i[o+(a-s)*t]),r[o+(a-n)*t]=l/Math.min(a+1,e-1+s-a,s))}function jT(t){ee.call(this,null,t)}jT.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var Ume=["x","y","weight","size","cellSize","bandwidth"];function FV(t,e){return Ume.forEach(i=>e[i]!=null?t[i](e[i]):0),t}we(jT,ee,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,n=Wme(r,t.groupby),s=(t.groupby||[]).map(gi),o=FV(MV(),t),a=t.as||"grid",l=[];function u(c,h){for(let d=0;d<s.length;++d)c[s[d]]=h[d];return c}return l=n.map(c=>_t(u({[a]:o(c,t.counts)},c.dims))),this.value&&(i.rem=this.value),this.value=i.source=i.add=l,i}});function Wme(t,e){var i=[],r=c=>c(a),n,s,o,a,l,u;if(e==null)i.push(t);else for(n={},s=0,o=t.length;s<o;++s)a=t[s],l=e.map(r),u=n[l],u||(n[l]=u=[],u.dims=l,i.push(u)),u.push(a);return i}function qT(t){ee.call(this,null,t)}qT.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};we(qT,ee,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=TV().smooth(t.smooth!==!1),n=t.values,s=t.thresholds||RV(t.count||10,t.nice,!!n),o=t.size,a,l;return n||(n=e.materialize(e.SOURCE).source,a=FV(MV(),t)(n,!0),l=DV(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],n=a.values),s=K(s)?s:s(n),n=r.size(o)(n,s),l&&n.forEach(l),this.value&&(i.rem=this.value),this.value=i.source=i.add=(n||[]).map(_t),i}});var WT="Feature",GT="FeatureCollection",Vme="MultiPoint";function XT(t){ee.call(this,null,t)}XT.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};we(XT,ee,{transform(t,e){var i=this._features,r=this._points,n=t.fields,s=n&&n[0],o=n&&n[1],a=t.geojson||!n&&$i,l=e.ADD,u;u=t.modified()||e.changed(e.REM)||e.modified(vr(a))||s&&e.modified(vr(s))||o&&e.modified(vr(o)),(!this.value||u)&&(l=e.SOURCE,this._features=i=[],this._points=r=[]),a&&e.visit(l,c=>i.push(a(c))),s&&o&&(e.visit(l,c=>{var h=s(c),d=o(c);h!=null&&d!=null&&(h=+h)===h&&(d=+d)===d&&r.push([h,d])}),i=i.concat({type:WT,geometry:{type:Vme,coordinates:r}})),this.value={type:GT,features:i}}});function YT(t){ee.call(this,null,t)}YT.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};we(YT,ee,{transform(t,e){var i=e.fork(e.ALL),r=this.value,n=t.field||$i,s=t.as||"path",o=i.SOURCE;!r||t.modified()?(this.value=r=HT(t.projection),i.materialize().reflow()):o=n===$i||e.modified(n.fields)?i.ADD_MOD:i.ADD;let a=jme(r,t.pointRadius);return i.visit(o,l=>l[s]=r(n(l))),r.pointRadius(a),i.modifies(s)}});function jme(t,e){let i=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),i}function KT(t){ee.call(this,null,t)}KT.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};we(KT,ee,{transform(t,e){var i=t.projection,r=t.fields[0],n=t.fields[1],s=t.as||["x","y"],o=s[0],a=s[1],l;function u(c){let h=i([r(c),n(c)]);h?(c[o]=h[0],c[a]=h[1]):(c[o]=void 0,c[a]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(l=e.modified(r.fields)||e.modified(n.fields),e.visit(l?e.ADD_MOD:e.ADD,u)),e.modifies(s)}});function JT(t){ee.call(this,null,t)}JT.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};we(JT,ee,{transform(t,e){var i=e.fork(e.ALL),r=this.value,n=t.as||"shape",s=i.ADD;return(!r||t.modified())&&(this.value=r=qme(HT(t.projection),t.field||Mr("datum"),t.pointRadius),i.materialize().reflow(),s=i.SOURCE),i.visit(s,o=>o[n]=r),i.modifies(n)}});function qme(t,e,i){let r=i==null?n=>t(e(n)):n=>{var s=t.pointRadius(),o=t.pointRadius(i)(e(n));return t.pointRadius(s),o};return r.context=n=>(t.context(n),r),r}function ZT(t){ee.call(this,[],t),this.generator=n4()}ZT.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};we(ZT,ee,{transform(t,e){var i=this.value,r=this.generator,n;if(!i.length||t.modified())for(let s in t)Je(r[s])&&r[s](t[s]);return n=r(),i.length?e.mod.push(N2(i[0],n)):e.add.push(_t(n)),i[0]=n,e}});function QT(t){ee.call(this,null,t)}QT.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};we(QT,ee,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var i=e.materialize(e.SOURCE).source,r=t.resolve==="shared",n=t.field||$i,s=Xme(t.opacity,t),o=Gme(t.color,t),a=t.as||"image",l={$x:0,$y:0,$value:0,$max:r?Ro(i.map(u=>Ro(n(u).values))):0};return i.forEach(u=>{let c=n(u),h=Ze({},u,l);r||(h.$max=Ro(c.values||[])),u[a]=Yme(c,h,o.dep?o:wi(o(h)),s.dep?s:wi(s(h)))}),e.reflow(!0).modifies(a)}});function Gme(t,e){let i;return Je(t)?(i=r=>zo(t(r,e)),i.dep=LV(t)):i=wi(zo(t||"#888")),i}function Xme(t,e){let i;return Je(t)?(i=r=>t(r,e),i.dep=LV(t)):t?i=wi(t):(i=r=>r.$value/r.$max||0,i.dep=!0),i}function LV(t){if(!Je(t))return!1;let e=or(vr(t));return e.$x||e.$y||e.$value||e.$max}function Yme(t,e,i,r){let n=t.width,s=t.height,o=t.x1||0,a=t.y1||0,l=t.x2||n,u=t.y2||s,c=t.values,h=c?g=>c[g]:ga,d=Po(l-o,u-a),p=d.getContext("2d"),f=p.getImageData(0,0,l-o,u-a),m=f.data;for(let g=a,b=0;g<u;++g){e.$y=g-a;for(let v=o,y=g*n;v<l;++v,b+=4){e.$x=v-o,e.$value=h(v+y);let x=i(e);m[b+0]=x.r,m[b+1]=x.g,m[b+2]=x.b,m[b+3]=~~(255*r(e))}}return p.putImageData(f,0,0),d}function OV(t){ee.call(this,null,t),this.modified(!0)}we(OV,ee,{transform(t,e){let i=this.value;return!i||t.modified("type")?(this.value=i=Jme(t.type),x4.forEach(r=>{t[r]!=null&&AV(i,r,t[r])})):x4.forEach(r=>{t.modified(r)&&AV(i,r,t[r])}),t.pointRadius!=null&&i.path.pointRadius(t.pointRadius),t.fit&&Kme(i,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function Kme(t,e){let i=Zme(e.fit);e.extent?t.fitExtent(e.extent,i):e.size&&t.fitSize(e.size,i)}function Jme(t){let e=ey((t||"mercator").toLowerCase());return e||te("Unrecognized projection type: "+t),e()}function AV(t,e,i){Je(t[e])&&t[e](i)}function Zme(t){return t=ve(t),t.length===1?t[0]:{type:GT,features:t.reduce((e,i)=>e.concat(Qme(i)),[])}}function Qme(t){return t.type===GT?t.features:ve(t).filter(e=>e!=null).map(e=>e.type===WT?e:{type:WT,geometry:e})}var pR={};br(pR,{force:()=>fR});function tR(t,e){var i,r=1;t==null&&(t=0),e==null&&(e=0);function n(){var s,o=i.length,a,l=0,u=0;for(s=0;s<o;++s)a=i[s],l+=a.x,u+=a.y;for(l=(l/o-t)*r,u=(u/o-e)*r,s=0;s<o;++s)a=i[s],a.x-=l,a.y-=u}return n.initialize=function(s){i=s},n.x=function(s){return arguments.length?(t=+s,n):t},n.y=function(s){return arguments.length?(e=+s,n):e},n.strength=function(s){return arguments.length?(r=+s,n):r},n}function PV(t){let e=+this._x.call(null,t),i=+this._y.call(null,t);return zV(this.cover(e,i),e,i,t)}function zV(t,e,i,r){if(isNaN(e)||isNaN(i))return t;var n,s=t._root,o={data:r},a=t._x0,l=t._y0,u=t._x1,c=t._y1,h,d,p,f,m,g,b,v;if(!s)return t._root=o,t;for(;s.length;)if((m=e>=(h=(a+u)/2))?a=h:u=h,(g=i>=(d=(l+c)/2))?l=d:c=d,n=s,!(s=s[b=g<<1|m]))return n[b]=o,t;if(p=+t._x.call(null,s.data),f=+t._y.call(null,s.data),e===p&&i===f)return o.next=s,n?n[b]=o:t._root=o,t;do n=n?n[b]=new Array(4):t._root=new Array(4),(m=e>=(h=(a+u)/2))?a=h:u=h,(g=i>=(d=(l+c)/2))?l=d:c=d;while((b=g<<1|m)===(v=(f>=d)<<1|p>=h));return n[v]=s,n[b]=o,t}function IV(t){var e,i,r=t.length,n,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,h=-1/0;for(i=0;i<r;++i)isNaN(n=+this._x.call(null,e=t[i]))||isNaN(s=+this._y.call(null,e))||(o[i]=n,a[i]=s,n<l&&(l=n),n>c&&(c=n),s<u&&(u=s),s>h&&(h=s));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),i=0;i<r;++i)zV(this,o[i],a[i],t[i]);return this}function BV(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,r=this._y0,n=this._x1,s=this._y1;if(isNaN(i))n=(i=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var o=n-i||1,a=this._root,l,u;i>t||t>=n||r>e||e>=s;)switch(u=(e<r)<<1|t<i,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:n=i+o,s=r+o;break;case 1:i=n-o,s=r+o;break;case 2:n=i+o,r=s-o;break;case 3:i=n-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=i,this._y0=r,this._x1=n,this._y1=s,this}function NV(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function $V(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Pr(t,e,i,r,n){this.node=t,this.x0=e,this.y0=i,this.x1=r,this.y1=n}function HV(t,e,i){var r,n=this._x0,s=this._y0,o,a,l,u,c=this._x1,h=this._y1,d=[],p=this._root,f,m;for(p&&d.push(new Pr(p,n,s,c,h)),i==null?i=1/0:(n=t-i,s=e-i,c=t+i,h=e+i,i*=i);f=d.pop();)if(!(!(p=f.node)||(o=f.x0)>c||(a=f.y0)>h||(l=f.x1)<n||(u=f.y1)<s))if(p.length){var g=(o+l)/2,b=(a+u)/2;d.push(new Pr(p[3],g,b,l,u),new Pr(p[2],o,b,g,u),new Pr(p[1],g,a,l,b),new Pr(p[0],o,a,g,b)),(m=(e>=b)<<1|t>=g)&&(f=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=f)}else{var v=t-+this._x.call(null,p.data),y=e-+this._y.call(null,p.data),x=v*v+y*y;if(x<i){var _=Math.sqrt(i=x);n=t-_,s=e-_,c=t+_,h=e+_,r=p.data}}return r}function UV(t){if(isNaN(c=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var e,i=this._root,r,n,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,h,d,p,f,m,g,b;if(!i)return this;if(i.length)for(;;){if((f=c>=(d=(o+l)/2))?o=d:l=d,(m=h>=(p=(a+u)/2))?a=p:u=p,e=i,!(i=i[g=m<<1|f]))return this;if(!i.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(r=e,b=g)}for(;i.data!==t;)if(n=i,!(i=i.next))return this;return(s=i.next)&&delete i.next,n?(s?n.next=s:delete n.next,this):e?(s?e[g]=s:delete e[g],(i=e[0]||e[1]||e[2]||e[3])&&i===(e[3]||e[2]||e[1]||e[0])&&!i.length&&(r?r[b]=i:this._root=i),this):(this._root=s,this)}function WV(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this}function VV(){return this._root}function jV(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function qV(t){var e=[],i,r=this._root,n,s,o,a,l;for(r&&e.push(new Pr(r,this._x0,this._y0,this._x1,this._y1));i=e.pop();)if(!t(r=i.node,s=i.x0,o=i.y0,a=i.x1,l=i.y1)&&r.length){var u=(s+a)/2,c=(o+l)/2;(n=r[3])&&e.push(new Pr(n,u,c,a,l)),(n=r[2])&&e.push(new Pr(n,s,c,u,l)),(n=r[1])&&e.push(new Pr(n,u,o,a,c)),(n=r[0])&&e.push(new Pr(n,s,o,u,c))}return this}function GV(t){var e=[],i=[],r;for(this._root&&e.push(new Pr(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var n=r.node;if(n.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(o+l)/2,h=(a+u)/2;(s=n[0])&&e.push(new Pr(s,o,a,c,h)),(s=n[1])&&e.push(new Pr(s,c,a,l,h)),(s=n[2])&&e.push(new Pr(s,o,h,c,u)),(s=n[3])&&e.push(new Pr(s,c,h,l,u))}i.push(r)}for(;r=i.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function XV(t){return t[0]}function YV(t){return arguments.length?(this._x=t,this):this._x}function KV(t){return t[1]}function JV(t){return arguments.length?(this._y=t,this):this._y}function If(t,e,i){var r=new iR(e??XV,i??KV,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function iR(t,e,i,r,n,s){this._x=t,this._y=e,this._x0=i,this._y0=r,this._x1=n,this._y1=s,this._root=void 0}function ZV(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}var us=If.prototype=iR.prototype;us.copy=function(){var t=new iR(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,i,r;if(!e)return t;if(!e.length)return t._root=ZV(e),t;for(i=[{source:e,target:t._root=new Array(4)}];e=i.pop();)for(var n=0;n<4;++n)(r=e.source[n])&&(r.length?i.push({source:r,target:e.target[n]=new Array(4)}):e.target[n]=ZV(r));return t};us.add=PV;us.addAll=IV;us.cover=BV;us.data=NV;us.extent=$V;us.find=HV;us.remove=UV;us.removeAll=WV;us.root=VV;us.size=jV;us.visit=qV;us.visitAfter=GV;us.x=YV;us.y=JV;function hr(t){return function(){return t}}function Ma(t){return(t()-.5)*1e-6}function ege(t){return t.x+t.vx}function tge(t){return t.y+t.vy}function rR(t){var e,i,r,n=1,s=1;typeof t!="function"&&(t=hr(t==null?1:+t));function o(){for(var u,c=e.length,h,d,p,f,m,g,b=0;b<s;++b)for(h=If(e,ege,tge).visitAfter(a),u=0;u<c;++u)d=e[u],m=i[d.index],g=m*m,p=d.x+d.vx,f=d.y+d.vy,h.visit(v);function v(y,x,_,w,C){var E=y.data,A=y.r,D=m+A;if(E){if(E.index>d.index){var R=p-E.x-E.vx,I=f-E.y-E.vy,z=R*R+I*I;z<D*D&&(R===0&&(R=Ma(r),z+=R*R),I===0&&(I=Ma(r),z+=I*I),z=(D-(z=Math.sqrt(z)))/z*n,d.vx+=(R*=z)*(D=(A*=A)/(g+A)),d.vy+=(I*=z)*D,E.vx-=R*(D=1-D),E.vy-=I*D)}return}return x>p+D||w<p-D||_>f+D||C<f-D}}function a(u){if(u.data)return u.r=i[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(e){var u,c=e.length,h;for(i=new Array(c),u=0;u<c;++u)h=e[u],i[h.index]=+t(h,u,e)}}return o.initialize=function(u,c){e=u,r=c,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(n=+u,o):n},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:hr(+u),l(),o):t},o}function ige(t){return t.index}function QV(t,e){var i=t.get(e);if(!i)throw new Error("node not found: "+e);return i}function nR(t){var e=ige,i=h,r,n=hr(30),s,o,a,l,u,c=1;t==null&&(t=[]);function h(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var b=0,v=t.length;b<c;++b)for(var y=0,x,_,w,C,E,A,D;y<v;++y)x=t[y],_=x.source,w=x.target,C=w.x+w.vx-_.x-_.vx||Ma(u),E=w.y+w.vy-_.y-_.vy||Ma(u),A=Math.sqrt(C*C+E*E),A=(A-s[y])/A*g*r[y],C*=A,E*=A,w.vx-=C*(D=l[y]),w.vy-=E*D,_.vx+=C*(D=1-D),_.vy+=E*D}function p(){if(o){var g,b=o.length,v=t.length,y=new Map(o.map((_,w)=>[e(_,w,o),_])),x;for(g=0,a=new Array(b);g<v;++g)x=t[g],x.index=g,typeof x.source!="object"&&(x.source=QV(y,x.source)),typeof x.target!="object"&&(x.target=QV(y,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(g=0,l=new Array(v);g<v;++g)x=t[g],l[g]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(v),f(),s=new Array(v),m()}}function f(){if(o)for(var g=0,b=t.length;g<b;++g)r[g]=+i(t[g],g,t)}function m(){if(o)for(var g=0,b=t.length;g<b;++g)s[g]=+n(t[g],g,t)}return d.initialize=function(g,b){o=g,u=b,p()},d.links=function(g){return arguments.length?(t=g,p(),d):t},d.id=function(g){return arguments.length?(e=g,d):e},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(i=typeof g=="function"?g:hr(+g),f(),d):i},d.distance=function(g){return arguments.length?(n=typeof g=="function"?g:hr(+g),m(),d):n},d}var rge={value:()=>{}};function tj(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new w4(i)}function w4(t){this._=t}function nge(t,e){return t.trim().split(/^|\s+/).map(function(i){var r="",n=i.indexOf(".");if(n>=0&&(r=i.slice(n+1),i=i.slice(0,n)),i&&!e.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:r}})}w4.prototype=tj.prototype={constructor:w4,on:function(t,e){var i=this._,r=nge(t+"",i),n,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((n=(t=r[s]).type)&&(n=sge(i[n],t.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=r[s]).type)i[n]=ej(i[n],t.name,e);else if(e==null)for(n in i)i[n]=ej(i[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new w4(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function sge(t,e){for(var i=0,r=t.length,n;i<r;++i)if((n=t[i]).name===e)return n.value}function ej(t,e,i){for(var r=0,n=t.length;r<n;++r)if(t[r].name===e){t[r]=rge,t=t.slice(0,r).concat(t.slice(r+1));break}return i!=null&&t.push({name:e,value:i}),t}var sR=tj;var um=0,iy=0,ty=0,rj=1e3,_4,ry,C4=0,Bf=0,S4=0,ny=typeof performance=="object"&&performance.now?performance:Date,nj=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function oy(){return Bf||(nj(oge),Bf=ny.now()+S4)}function oge(){Bf=0}function sy(){this._call=this._time=this._next=null}sy.prototype=E4.prototype={constructor:sy,restart:function(t,e,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?oy():+i)+(e==null?0:+e),!this._next&&ry!==this&&(ry?ry._next=this:_4=this,ry=this),this._call=t,this._time=i,oR()},stop:function(){this._call&&(this._call=null,this._time=1/0,oR())}};function E4(t,e,i){var r=new sy;return r.restart(t,e,i),r}function sj(){oy(),++um;for(var t=_4,e;t;)(e=Bf-t._time)>=0&&t._call.call(void 0,e),t=t._next;--um}function ij(){Bf=(C4=ny.now())+S4,um=iy=0;try{sj()}finally{um=0,lge(),Bf=0}}function age(){var t=ny.now(),e=t-C4;e>rj&&(S4-=e,C4=t)}function lge(){for(var t,e=_4,i,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(i=e._next,e._next=null,e=t?t._next=i:_4=i);ry=t,oR(r)}function oR(t){if(!um){iy&&(iy=clearTimeout(iy));var e=t-Bf;e>24?(t<1/0&&(iy=setTimeout(ij,t-ny.now()-S4)),ty&&(ty=clearInterval(ty))):(ty||(C4=ny.now(),ty=setInterval(age,rj)),um=1,nj(ij))}}function aR(t,e,i){var r=new sy,n=e;return e==null?(r.restart(t,e,i),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?oy():+a,r._restart(function l(u){u+=n,r._restart(l,n+=o,a),s(u)},o,a)},r.restart(t,e,i),r)}function oj(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function aj(t){return t.x}function lj(t){return t.y}var uge=10,cge=Math.PI*(3-Math.sqrt(5));function lR(t){var e,i=1,r=.001,n=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=E4(h),u=sR("tick","end"),c=oj();t==null&&(t=[]);function h(){d(),u.call("tick",e),i<r&&(l.stop(),u.call("end",e))}function d(m){var g,b=t.length,v;m===void 0&&(m=1);for(var y=0;y<m;++y)for(i+=(s-i)*n,a.forEach(function(x){x(i)}),g=0;g<b;++g)v=t[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return e}function p(){for(var m=0,g=t.length,b;m<g;++m){if(b=t[m],b.index=m,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var v=uge*Math.sqrt(.5+m),y=m*cge;b.x=v*Math.cos(y),b.y=v*Math.sin(y)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function f(m){return m.initialize&&m.initialize(t,c),m}return p(),e={tick:d,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(m){return arguments.length?(t=m,p(),a.forEach(f),e):t},alpha:function(m){return arguments.length?(i=+m,e):i},alphaMin:function(m){return arguments.length?(r=+m,e):r},alphaDecay:function(m){return arguments.length?(n=+m,e):+n},alphaTarget:function(m){return arguments.length?(s=+m,e):s},velocityDecay:function(m){return arguments.length?(o=1-m,e):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(f),e):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,f(g)),e):a.get(m)},find:function(m,g,b){var v=0,y=t.length,x,_,w,C,E;for(b==null?b=1/0:b*=b,v=0;v<y;++v)C=t[v],x=m-C.x,_=g-C.y,w=x*x+_*_,w<b&&(E=C,b=w);return E},on:function(m,g){return arguments.length>1?(u.on(m,g),e):u.on(m)}}}function uR(){var t,e,i,r,n=hr(-30),s,o=1,a=1/0,l=.81;function u(p){var f,m=t.length,g=If(t,aj,lj).visitAfter(h);for(r=p,f=0;f<m;++f)e=t[f],g.visit(d)}function c(){if(t){var p,f=t.length,m;for(s=new Array(f),p=0;p<f;++p)m=t[p],s[m.index]=+n(m,p,t)}}function h(p){var f=0,m,g,b=0,v,y,x;if(p.length){for(v=y=x=0;x<4;++x)(m=p[x])&&(g=Math.abs(m.value))&&(f+=m.value,b+=g,v+=g*m.x,y+=g*m.y);p.x=v/b,p.y=y/b}else{m=p,m.x=m.data.x,m.y=m.data.y;do f+=s[m.data.index];while(m=m.next)}p.value=f}function d(p,f,m,g){if(!p.value)return!0;var b=p.x-e.x,v=p.y-e.y,y=g-f,x=b*b+v*v;if(y*y/l<x)return x<a&&(b===0&&(b=Ma(i),x+=b*b),v===0&&(v=Ma(i),x+=v*v),x<o&&(x=Math.sqrt(o*x)),e.vx+=b*p.value*r/x,e.vy+=v*p.value*r/x),!0;if(p.length||x>=a)return;(p.data!==e||p.next)&&(b===0&&(b=Ma(i),x+=b*b),v===0&&(v=Ma(i),x+=v*v),x<o&&(x=Math.sqrt(o*x)));do p.data!==e&&(y=s[p.data.index]*r/x,e.vx+=b*y,e.vy+=v*y);while(p=p.next)}return u.initialize=function(p,f){t=p,i=f,c()},u.strength=function(p){return arguments.length?(n=typeof p=="function"?p:hr(+p),c(),u):n},u.distanceMin=function(p){return arguments.length?(o=p*p,u):Math.sqrt(o)},u.distanceMax=function(p){return arguments.length?(a=p*p,u):Math.sqrt(a)},u.theta=function(p){return arguments.length?(l=p*p,u):Math.sqrt(l)},u}function cR(t){var e=hr(.1),i,r,n;typeof t!="function"&&(t=hr(t==null?0:+t));function s(a){for(var l=0,u=i.length,c;l<u;++l)c=i[l],c.vx+=(n[l]-c.x)*r[l]*a}function o(){if(i){var a,l=i.length;for(r=new Array(l),n=new Array(l),a=0;a<l;++a)r[a]=isNaN(n[a]=+t(i[a],a,i))?0:+e(i[a],a,i)}}return s.initialize=function(a){i=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:hr(+a),o(),s):e},s.x=function(a){return arguments.length?(t=typeof a=="function"?a:hr(+a),o(),s):t},s}function hR(t){var e=hr(.1),i,r,n;typeof t!="function"&&(t=hr(t==null?0:+t));function s(a){for(var l=0,u=i.length,c;l<u;++l)c=i[l],c.vy+=(n[l]-c.y)*r[l]*a}function o(){if(i){var a,l=i.length;for(r=new Array(l),n=new Array(l),a=0;a<l;++a)r[a]=isNaN(n[a]=+t(i[a],a,i))?0:+e(i[a],a,i)}}return s.initialize=function(a){i=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:hr(+a),o(),s):e},s.y=function(a){return arguments.length?(t=typeof a=="function"?a:hr(+a),o(),s):t},s}var uj={center:tR,collide:rR,nbody:uR,link:nR,x:cR,y:hR},ay="forces",dR=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],hge=["static","iterations"],cj=["x","y","vx","vy"];function fR(t){ee.call(this,null,t)}fR.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:cj}]};we(fR,ee,{transform(t,e){var i=this.value,r=e.changed(e.ADD_REM),n=t.modified(dR),s=t.iterations||300;if(i?(r&&(e.modifies("index"),i.nodes(e.source)),(n||e.changed(e.MOD))&&hj(i,t,0,e)):(this.value=i=fge(e.source,t),i.on("tick",dge(e.dataflow,this)),t.static||(r=!0,i.tick()),e.modifies("index")),n||r||t.modified(hge)||e.changed()&&t.restart){if(i.alpha(Math.max(i.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),t.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!r)return e.StopPropagation}return this.finish(t,e)},finish(t,e){let i=e.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==ay||c.op._argval.force!=="link")){for(var r=c.op._argops,n=0,s=r.length,o;n<s;++n)if(r[n].name==="links"&&(o=r[n].op.source)){i.pulse(o,i.changeset().reflow());break}}return e.reflow(t.modified()).modifies(cj)}});function dge(t,e){return()=>t.touch(e).run()}function fge(t,e){let i=lR(t),r=i.stop,n=i.restart,s=!1;return i.stopped=()=>s,i.restart=()=>(s=!1,n()),i.stop=()=>(s=!0,r()),hj(i,e,!0).on("end",()=>s=!0)}function hj(t,e,i,r){var n=ve(e.forces),s,o,a,l;for(s=0,o=dR.length;s<o;++s)a=dR[s],a!==ay&&e.modified(a)&&t[a](e[a]);for(s=0,o=n.length;s<o;++s)l=ay+s,a=i||e.modified(ay,s)?mge(n[s]):r&&pge(n[s],r)?t.force(l):null,a&&t.force(l,a);for(o=t.numForces||0;s<o;++s)t.force(ay+s,null);return t.numForces=n.length,t}function pge(t,e){var i,r;for(i in t)if(Je(r=t[i])&&e.modified(vr(r)))return 1;return 0}function mge(t){var e,i;_e(uj,t.force)||te("Unrecognized force: "+t.force),e=uj[t.force]();for(i in t)Je(e[i])&&gge(e[i],t[i],t);return e}function gge(t,e,i){t(Je(e)?r=>e(r,i):e)}var jR={};br(jR,{nest:()=>BR,pack:()=>NR,partition:()=>$R,stratify:()=>HR,tree:()=>UR,treelinks:()=>WR,treemap:()=>VR});function bge(t,e){return t.parent===e.parent?1:2}function vge(t){return t.reduce(yge,0)/t.length}function yge(t,e){return t+e.x}function xge(t){return 1+t.reduce(wge,0)}function wge(t,e){return Math.max(t,e.y)}function _ge(t){for(var e;e=t.children;)t=e[0];return t}function Cge(t){for(var e;e=t.children;)t=e[e.length-1];return t}function mR(){var t=bge,e=1,i=1,r=!1;function n(s){var o,a=0;s.eachAfter(function(d){var p=d.children;p?(d.x=vge(p),d.y=xge(p)):(d.x=o?a+=t(d,o):0,d.y=0,o=d)});var l=_ge(s),u=Cge(s),c=l.x-t(l,u)/2,h=u.x+t(u,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*e,d.y=(s.y-d.y)*i}:function(d){d.x=(d.x-c)/(h-c)*e,d.y=(1-(s.y?d.y/s.y:1))*i})}return n.separation=function(s){return arguments.length?(t=s,n):t},n.size=function(s){return arguments.length?(r=!1,e=+s[0],i=+s[1],n):r?null:[e,i]},n.nodeSize=function(s){return arguments.length?(r=!0,e=+s[0],i=+s[1],n):r?[e,i]:null},n}function Sge(t){var e=0,i=t.children,r=i&&i.length;if(!r)e=1;else for(;--r>=0;)e+=i[r].value;t.value=e}function dj(){return this.eachAfter(Sge)}function fj(t,e){let i=-1;for(let r of this)t.call(e,r,++i,this);return this}function pj(t,e){for(var i=this,r=[i],n,s,o=-1;i=r.pop();)if(t.call(e,i,++o,this),n=i.children)for(s=n.length-1;s>=0;--s)r.push(n[s]);return this}function mj(t,e){for(var i=this,r=[i],n=[],s,o,a,l=-1;i=r.pop();)if(n.push(i),s=i.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;i=n.pop();)t.call(e,i,++l,this);return this}function gj(t,e){let i=-1;for(let r of this)if(t.call(e,r,++i,this))return r}function bj(t){return this.eachAfter(function(e){for(var i=+t(e.data)||0,r=e.children,n=r&&r.length;--n>=0;)i+=r[n].value;e.value=i})}function vj(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function yj(t){for(var e=this,i=Ege(e,t),r=[e];e!==i;)e=e.parent,r.push(e);for(var n=r.length;t!==i;)r.splice(n,0,t),t=t.parent;return r}function Ege(t,e){if(t===e)return t;var i=t.ancestors(),r=e.ancestors(),n=null;for(t=i.pop(),e=r.pop();t===e;)n=t,t=i.pop(),e=r.pop();return n}function xj(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function wj(){return Array.from(this)}function _j(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Cj(){var t=this,e=[];return t.each(function(i){i!==t&&e.push({source:i.parent,target:i})}),e}function*Sj(){var t=this,e,i=[t],r,n,s;do for(e=i.reverse(),i=[];t=e.pop();)if(yield t,r=t.children)for(n=0,s=r.length;n<s;++n)i.push(r[n]);while(i.length)}function cm(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Tge)):e===void 0&&(e=Age);for(var i=new Ku(t),r,n=[i],s,o,a,l;r=n.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)n.push(s=o[a]=new Ku(o[a])),s.parent=r,s.depth=r.depth+1;return i.eachBefore(gR)}function kge(){return cm(this).eachBefore(Rge)}function Age(t){return t.children}function Tge(t){return Array.isArray(t)?t[1]:null}function Rge(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function gR(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Ku(t){this.data=t,this.depth=this.height=0,this.parent=null}Ku.prototype=cm.prototype={constructor:Ku,count:dj,each:fj,eachAfter:mj,eachBefore:pj,find:gj,sum:bj,sort:vj,path:yj,ancestors:xj,descendants:wj,leaves:_j,links:Cj,copy:kge,[Symbol.iterator]:Sj};function hm(t){return t==null?null:bR(t)}function bR(t){if(typeof t!="function")throw new Error;return t}function Ju(){return 0}function Hh(t){return function(){return t}}function Ej(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function kj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Aj(t,e){let i=t.length,r,n;for(;i;)n=e()*i--|0,r=t[i],t[i]=t[n],t[n]=r;return t}function Tj(t,e){for(var i=0,r=(t=Aj(Array.from(t),e)).length,n=[],s,o;i<r;)s=t[i],o&&Rj(o,s)?++i:(o=Mge(n=Dge(n,s)),i=0);return o}function Dge(t,e){var i,r;if(vR(e,t))return[e];for(i=0;i<t.length;++i)if(k4(e,t[i])&&vR(ly(t[i],e),t))return[t[i],e];for(i=0;i<t.length-1;++i)for(r=i+1;r<t.length;++r)if(k4(ly(t[i],t[r]),e)&&k4(ly(t[i],e),t[r])&&k4(ly(t[r],e),t[i])&&vR(Dj(t[i],t[r],e),t))return[t[i],t[r],e];throw new Error}function k4(t,e){var i=t.r-e.r,r=e.x-t.x,n=e.y-t.y;return i<0||i*i<r*r+n*n}function Rj(t,e){var i=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,n=e.y-t.y;return i>0&&i*i>r*r+n*n}function vR(t,e){for(var i=0;i<e.length;++i)if(!Rj(t,e[i]))return!1;return!0}function Mge(t){switch(t.length){case 1:return Fge(t[0]);case 2:return ly(t[0],t[1]);case 3:return Dj(t[0],t[1],t[2])}}function Fge(t){return{x:t.x,y:t.y,r:t.r}}function ly(t,e){var i=t.x,r=t.y,n=t.r,s=e.x,o=e.y,a=e.r,l=s-i,u=o-r,c=a-n,h=Math.sqrt(l*l+u*u);return{x:(i+s+l/h*c)/2,y:(r+o+u/h*c)/2,r:(h+n+a)/2}}function Dj(t,e,i){var r=t.x,n=t.y,s=t.r,o=e.x,a=e.y,l=e.r,u=i.x,c=i.y,h=i.r,d=r-o,p=r-u,f=n-a,m=n-c,g=l-s,b=h-s,v=r*r+n*n-s*s,y=v-o*o-a*a+l*l,x=v-u*u-c*c+h*h,_=p*f-d*m,w=(f*x-m*y)/(_*2)-r,C=(m*g-f*b)/_,E=(p*y-d*x)/(_*2)-n,A=(d*b-p*g)/_,D=C*C+A*A-1,R=2*(s+w*C+E*A),I=w*w+E*E-s*s,z=-(Math.abs(D)>1e-6?(R+Math.sqrt(R*R-4*D*I))/(2*D):I/R);return{x:r+w+C*z,y:n+E+A*z,r:z}}function Mj(t,e,i){var r=t.x-e.x,n,s,o=t.y-e.y,a,l,u=r*r+o*o;u?(s=e.r+i.r,s*=s,l=t.r+i.r,l*=l,s>l?(n=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-n*n)),i.x=t.x-n*r-a*o,i.y=t.y-n*o+a*r):(n=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-n*n)),i.x=e.x+n*r-a*o,i.y=e.y+n*o+a*r)):(i.x=e.x+i.r,i.y=e.y)}function Fj(t,e){var i=t.r+e.r-1e-6,r=e.x-t.x,n=e.y-t.y;return i>0&&i*i>r*r+n*n}function Lj(t){var e=t._,i=t.next._,r=e.r+i.r,n=(e.x*i.r+i.x*e.r)/r,s=(e.y*i.r+i.y*e.r)/r;return n*n+s*s}function A4(t){this._=t,this.next=null,this.previous=null}function Oj(t,e){if(!(s=(t=kj(t)).length))return 0;var i,r,n,s,o,a,l,u,c,h,d;if(i=t[0],i.x=0,i.y=0,!(s>1))return i.r;if(r=t[1],i.x=-r.r,r.x=i.r,r.y=0,!(s>2))return i.r+r.r;Mj(r,i,n=t[2]),i=new A4(i),r=new A4(r),n=new A4(n),i.next=n.previous=r,r.next=i.previous=n,n.next=r.previous=i;e:for(l=3;l<s;++l){Mj(i._,r._,n=t[l]),n=new A4(n),u=r.next,c=i.previous,h=r._.r,d=i._.r;do if(h<=d){if(Fj(u._,n._)){r=u,i.next=r,r.previous=i,--l;continue e}h+=u._.r,u=u.next}else{if(Fj(c._,n._)){i=c,i.next=r,r.previous=i,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(n.previous=i,n.next=r,i.next=r.previous=r=n,o=Lj(i);(n=n.next)!==r;)(a=Lj(n))<o&&(i=n,o=a);r=i.next}for(i=[r._],n=r;(n=n.next)!==r;)i.push(n._);for(n=Tj(i,e),l=0;l<s;++l)i=t[l],i.x-=n.x,i.y-=n.y;return n.r}function Lge(t){return Math.sqrt(t.value)}function xR(){var t=null,e=1,i=1,r=Ju;function n(s){let o=Ej();return s.x=e/2,s.y=i/2,t?s.eachBefore(Pj(t)).eachAfter(yR(r,.5,o)).eachBefore(zj(1)):s.eachBefore(Pj(Lge)).eachAfter(yR(Ju,1,o)).eachAfter(yR(r,s.r/Math.min(e,i),o)).eachBefore(zj(Math.min(e,i)/(2*s.r))),s}return n.radius=function(s){return arguments.length?(t=hm(s),n):t},n.size=function(s){return arguments.length?(e=+s[0],i=+s[1],n):[e,i]},n.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Hh(+s),n):r},n}function Pj(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function yR(t,e,i){return function(r){if(n=r.children){var n,s,o=n.length,a=t(r)*e||0,l;if(a)for(s=0;s<o;++s)n[s].r+=a;if(l=Oj(n,i),a)for(s=0;s<o;++s)n[s].r-=a;r.r=l+a}}}function zj(t){return function(e){var i=e.parent;e.r*=t,i&&(e.x=i.x+t*e.x,e.y=i.y+t*e.y)}}function T4(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Fa(t,e,i,r,n){for(var s=t.children,o,a=-1,l=s.length,u=t.value&&(r-e)/t.value;++a<l;)o=s[a],o.y0=i,o.y1=n,o.x0=e,o.x1=e+=o.value*u}function wR(){var t=1,e=1,i=0,r=!1;function n(o){var a=o.height+1;return o.x0=o.y0=i,o.x1=t,o.y1=e/a,o.eachBefore(s(e,a)),r&&o.eachBefore(T4),o}function s(o,a){return function(l){l.children&&Fa(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,c=l.y0,h=l.x1-i,d=l.y1-i;h<u&&(u=h=(u+h)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=h,l.y1=d}}return n.round=function(o){return arguments.length?(r=!!o,n):r},n.size=function(o){return arguments.length?(t=+o[0],e=+o[1],n):[t,e]},n.padding=function(o){return arguments.length?(i=+o,n):i},n}var Oge={depth:-1},Ij={},_R={};function Pge(t){return t.id}function zge(t){return t.parentId}function R4(){var t=Pge,e=zge,i;function r(n){var s=Array.from(n),o=t,a=e,l,u,c,h,d,p,f,m,g=new Map;if(i!=null){let b=s.map((x,_)=>Ige(i(x,_,n))),v=b.map(Bj),y=new Set(b).add("");for(let x of v)y.has(x)||(y.add(x),b.push(x),v.push(Bj(x)),s.push(_R));o=(x,_)=>b[_],a=(x,_)=>v[_]}for(c=0,l=s.length;c<l;++c)u=s[c],p=s[c]=new Ku(u),(f=o(u,c,n))!=null&&(f+="")&&(m=p.id=f,g.set(m,g.has(m)?Ij:p)),(f=a(u,c,n))!=null&&(f+="")&&(p.parent=f);for(c=0;c<l;++c)if(p=s[c],f=p.parent){if(d=g.get(f),!d)throw new Error("missing: "+f);if(d===Ij)throw new Error("ambiguous: "+f);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(h)throw new Error("multiple roots");h=p}if(!h)throw new Error("no root");if(i!=null){for(;h.data===_R&&h.children.length===1;)h=h.children[0],--l;for(let b=s.length-1;b>=0&&(p=s[b],p.data===_R);--b)p.data=null}if(h.parent=Oge,h.eachBefore(function(b){b.depth=b.parent.depth+1,--l}).eachBefore(gR),h.parent=null,l>0)throw new Error("cycle");return h}return r.id=function(n){return arguments.length?(t=hm(n),r):t},r.parentId=function(n){return arguments.length?(e=hm(n),r):e},r.path=function(n){return arguments.length?(i=hm(n),r):i},r}function Ige(t){t=`${t}`;let e=t.length;return CR(t,e-1)&&!CR(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function Bj(t){let e=t.length;if(e<2)return"";for(;--e>1&&!CR(t,e););return t.slice(0,e)}function CR(t,e){if(t[e]==="/"){let i=0;for(;e>0&&t[--e]==="\\";)++i;if((i&1)===0)return!0}return!1}function Bge(t,e){return t.parent===e.parent?1:2}function SR(t){var e=t.children;return e?e[0]:t.t}function ER(t){var e=t.children;return e?e[e.length-1]:t.t}function Nge(t,e,i){var r=i/(e.i-t.i);e.c-=r,e.s+=i,t.c+=r,e.z+=i,e.m+=i}function $ge(t){for(var e=0,i=0,r=t.children,n=r.length,s;--n>=0;)s=r[n],s.z+=e,s.m+=e,e+=s.s+(i+=s.c)}function Hge(t,e,i){return t.a.parent===e.parent?t.a:i}function D4(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}D4.prototype=Object.create(Ku.prototype);function Uge(t){for(var e=new D4(t,0),i,r=[e],n,s,o,a;i=r.pop();)if(s=i._.children)for(i.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(n=i.children[o]=new D4(s[o],o)),n.parent=i;return(e.parent=new D4(null,0)).children=[e],e}function kR(){var t=Bge,e=1,i=1,r=null;function n(u){var c=Uge(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var h=u,d=u,p=u;u.eachBefore(function(v){v.x<h.x&&(h=v),v.x>d.x&&(d=v),v.depth>p.depth&&(p=v)});var f=h===d?1:t(h,d)/2,m=f-h.x,g=e/(d.x+f+m),b=i/(p.depth||1);u.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*b})}return u}function s(u){var c=u.children,h=u.parent.children,d=u.i?h[u.i-1]:null;if(c){$ge(u);var p=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+t(u._,d._),u.m=u.z-p):u.z=p}else d&&(u.z=d.z+t(u._,d._));u.parent.A=a(u,d,u.parent.A||h[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,h){if(c){for(var d=u,p=u,f=c,m=d.parent.children[0],g=d.m,b=p.m,v=f.m,y=m.m,x;f=ER(f),d=SR(d),f&&d;)m=SR(m),p=ER(p),p.a=u,x=f.z+v-d.z-g+t(f._,d._),x>0&&(Nge(Hge(f,u,h),u,x),g+=x,b+=x),v+=f.m,g+=d.m,y+=m.m,b+=p.m;f&&!ER(p)&&(p.t=f,p.m+=v-b),d&&!SR(m)&&(m.t=d,m.m+=g-y,h=u)}return h}function l(u){u.x*=e,u.y=u.depth*i}return n.separation=function(u){return arguments.length?(t=u,n):t},n.size=function(u){return arguments.length?(r=!1,e=+u[0],i=+u[1],n):r?null:[e,i]},n.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],i=+u[1],n):r?[e,i]:null},n}function Zu(t,e,i,r,n){for(var s=t.children,o,a=-1,l=s.length,u=t.value&&(n-i)/t.value;++a<l;)o=s[a],o.x0=e,o.x1=r,o.y0=i,o.y1=i+=o.value*u}var AR=(1+Math.sqrt(5))/2;function TR(t,e,i,r,n,s){for(var o=[],a=e.children,l,u,c=0,h=0,d=a.length,p,f,m=e.value,g,b,v,y,x,_,w;c<d;){p=n-i,f=s-r;do g=a[h++].value;while(!g&&h<d);for(b=v=g,_=Math.max(f/p,p/f)/(m*t),w=g*g*_,x=Math.max(v/w,w/b);h<d;++h){if(g+=u=a[h].value,u<b&&(b=u),u>v&&(v=u),w=g*g*_,y=Math.max(v/w,w/b),y>x){g-=u;break}x=y}o.push(l={value:g,dice:p<f,children:a.slice(c,h)}),l.dice?Fa(l,i,r,n,m?r+=f*g/m:s):Zu(l,i,r,m?i+=p*g/m:n,s),m-=g,c=h}return o}var uy=(function t(e){function i(r,n,s,o,a){TR(e,r,n,s,o,a)}return i.ratio=function(r){return t((r=+r)>1?r:1)},i})(AR);function RR(){var t=uy,e=!1,i=1,r=1,n=[0],s=Ju,o=Ju,a=Ju,l=Ju,u=Ju;function c(d){return d.x0=d.y0=0,d.x1=i,d.y1=r,d.eachBefore(h),n=[0],e&&d.eachBefore(T4),d}function h(d){var p=n[d.depth],f=d.x0+p,m=d.y0+p,g=d.x1-p,b=d.y1-p;g<f&&(f=g=(f+g)/2),b<m&&(m=b=(m+b)/2),d.x0=f,d.y0=m,d.x1=g,d.y1=b,d.children&&(p=n[d.depth+1]=s(d)/2,f+=u(d)-p,m+=o(d)-p,g-=a(d)-p,b-=l(d)-p,g<f&&(f=g=(f+g)/2),b<m&&(m=b=(m+b)/2),t(d,f,m,g,b))}return c.round=function(d){return arguments.length?(e=!!d,c):e},c.size=function(d){return arguments.length?(i=+d[0],r=+d[1],c):[i,r]},c.tile=function(d){return arguments.length?(t=bR(d),c):t},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:Hh(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:Hh(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Hh(+d),c):a},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:Hh(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:Hh(+d),c):u},c}function DR(t,e,i,r,n){var s=t.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;c(0,a,t.value,e,i,r,n);function c(h,d,p,f,m,g,b){if(h>=d-1){var v=s[h];v.x0=f,v.y0=m,v.x1=g,v.y1=b;return}for(var y=u[h],x=p/2+y,_=h+1,w=d-1;_<w;){var C=_+w>>>1;u[C]<x?_=C+1:w=C}x-u[_-1]<u[_]-x&&h+1<_&&--_;var E=u[_]-y,A=p-E;if(g-f>b-m){var D=p?(f*A+g*E)/p:g;c(h,_,E,f,m,D,b),c(_,d,A,D,m,g,b)}else{var R=p?(m*A+b*E)/p:b;c(h,_,E,f,m,g,R),c(_,d,A,f,R,g,b)}}}function MR(t,e,i,r,n){(t.depth&1?Zu:Fa)(t,e,i,r,n)}var FR=(function t(e){function i(r,n,s,o,a){if((l=r._squarify)&&l.ratio===e)for(var l,u,c,h,d=-1,p,f=l.length,m=r.value;++d<f;){for(u=l[d],c=u.children,h=u.value=0,p=c.length;h<p;++h)u.value+=c[h].value;u.dice?Fa(u,n,s,o,m?s+=(a-s)*u.value/m:a):Zu(u,n,s,m?n+=(o-n)*u.value/m:o,a),m-=u.value}else r._squarify=l=TR(e,r,n,s,o,a),l.ratio=e}return i.ratio=function(r){return t((r=+r)>1?r:1)},i})(AR);function LR(t,e,i){let r={};return t.each(n=>{let s=n.data;i(s)&&(r[e(s)]=n)}),t.lookup=r,t}function BR(t){ee.call(this,null,t)}BR.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var Wge=t=>t.values;we(BR,ee,{transform(t,e){e.source||te("Nest transform requires an upstream data source.");var i=t.generate,r=t.modified(),n=e.clone(),s=this.value;return(!s||r||e.changed())&&(s&&s.each(o=>{o.children&&tf(o.data)&&n.rem.push(o.data)}),this.value=s=cm({values:ve(t.keys).reduce((o,a)=>(o.key(a),o),Vge()).entries(n.source)},Wge),i&&s.each(o=>{o.children&&(o=_t(o.data),n.add.push(o),n.source.push(o))}),LR(s,Ve,Ve)),n.source.root=s,n}});function Vge(){let t=[],e={entries:n=>r(i(n,0),0),key:n=>(t.push(n),e)};function i(n,s){if(s>=t.length)return n;let o=n.length,a=t[s++],l={},u={},c=-1,h,d,p;for(;++c<o;)h=a(d=n[c])+"",(p=l[h])?p.push(d):l[h]=[d];for(h in l)u[h]=i(l[h],s);return u}function r(n,s){if(++s>t.length)return n;let o=[];for(let a in n)o.push({key:a,values:r(n[a],s)});return o}return e}function Qu(t){ee.call(this,null,t)}var jge=(t,e)=>t.parent===e.parent?1:2;we(Qu,ee,{transform(t,e){(!e.source||!e.source.root)&&te(this.constructor.name+" transform requires a backing tree data source.");let i=this.layout(t.method),r=this.fields,n=e.source.root,s=t.as||r;t.field?n.sum(t.field):n.count(),t.sort&&n.sort(Cl(t.sort,o=>o.data)),qge(i,this.params,t),i.separation&&i.separation(t.separation!==!1?jge:bl);try{this.value=i(n)}catch(o){te(o)}return n.each(o=>Gge(o,r,s)),e.reflow(t.modified()).modifies(s).modifies("leaf")}});function qge(t,e,i){for(let r,n=0,s=e.length;n<s;++n)r=e[n],r in i&&t[r](i[r])}function Gge(t,e,i){let r=t.data,n=e.length-1;for(let s=0;s<n;++s)r[i[s]]=t[e[s]];r[i[n]]=t.children?t.children.length:0}var OR=["x","y","r","depth","children"];function NR(t){Qu.call(this,t)}NR.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OR.length,default:OR}]};we(NR,Qu,{layout:xR,params:["radius","size","padding"],fields:OR});var PR=["x0","y0","x1","y1","depth","children"];function $R(t){Qu.call(this,t)}$R.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:PR.length,default:PR}]};we($R,Qu,{layout:wR,params:["size","round","padding"],fields:PR});function HR(t){ee.call(this,null,t)}HR.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};we(HR,ee,{transform(t,e){e.source||te("Stratify transform requires an upstream data source.");let i=this.value,r=t.modified(),n=e.fork(e.ALL).materialize(e.SOURCE),s=!i||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return n.source=n.source.slice(),s&&(i=n.source.length?LR(R4().id(t.key).parentId(t.parentKey)(n.source),t.key,yr):LR(R4()([{}]),t.key,t.key)),n.source.root=this.value=i,n}});var Nj={tidy:kR,cluster:mR},zR=["x","y","depth","children"];function UR(t){Qu.call(this,t)}UR.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:zR.length,default:zR}]};we(UR,Qu,{layout(t){let e=t||"tidy";if(_e(Nj,e))return Nj[e]();te("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:zR});function WR(t){ee.call(this,[],t)}WR.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};we(WR,ee,{transform(t,e){let i=this.value,r=e.source&&e.source.root,n=e.fork(e.NO_SOURCE),s={};return r||te("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(n.rem=i,e.visit(e.SOURCE,o=>s[Ve(o)]=1),r.each(o=>{let a=o.data,l=o.parent&&o.parent.data;l&&s[Ve(a)]&&s[Ve(l)]&&n.add.push(_t({source:l,target:a}))}),this.value=n.add):e.changed(e.MOD)&&(e.visit(e.MOD,o=>s[Ve(o)]=1),i.forEach(o=>{(s[Ve(o.source)]||s[Ve(o.target)])&&n.mod.push(o)})),n}});var $j={binary:DR,dice:Fa,slice:Zu,slicedice:MR,squarify:uy,resquarify:FR},IR=["x0","y0","x1","y1","depth","children"];function VR(t){Qu.call(this,t)}VR.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:IR.length,default:IR}]};we(VR,Qu,{layout(){let t=RR();return t.ratio=e=>{let i=t.tile();i.ratio&&t.tile(i.ratio(e))},t.method=e=>{_e($j,e)?t.tile($j[e]):te("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:IR});var iD={};br(iD,{label:()=>tD});var qR=4278190080;function Xge(t,e){let i=t.bitmap();return(e||[]).forEach(r=>i.set(t(r.boundary[0]),t(r.boundary[3]))),[i,void 0]}function Yge(t,e,i,r,n){let s=t.width,o=t.height,a=r||n,l=Po(s,o).getContext("2d"),u=Po(s,o).getContext("2d"),c=a&&Po(s,o).getContext("2d");i.forEach(E=>M4(l,E,!1)),M4(u,e,!1),a&&M4(c,e,!0);let h=GR(l,s,o),d=GR(u,s,o),p=a&&GR(c,s,o),f=t.bitmap(),m=a&&t.bitmap(),g,b,v,y,x,_,w,C;for(b=0;b<o;++b)for(g=0;g<s;++g)x=b*s+g,_=h[x]&qR,C=d[x]&qR,w=a&&p[x]&qR,(_||w||C)&&(v=t(g),y=t(b),!n&&(_||C)&&f.set(v,y),a&&(_||w)&&m.set(v,y));return[f,m]}function GR(t,e,i){return new Uint32Array(t.getImageData(0,0,e,i).data.buffer)}function M4(t,e,i){if(!e.length)return;let r=e[0].mark.marktype;r==="group"?e.forEach(n=>{n.items.forEach(s=>M4(t,s.items,i))}):ns[r].draw(t,{items:i?e.map(Kge):e})}function Kge(t){let e=rf(t,{});return e.stroke&&e.strokeOpacity!==0||e.fill&&e.fillOpacity!==0?{...e,strokeOpacity:1,stroke:"#000",fillOpacity:0}:e}var ec=5,cs=31,cy=32,Uh=new Uint32Array(cy+1),La=new Uint32Array(cy+1);La[0]=0;Uh[0]=~La[0];for(let t=1;t<=cy;++t)La[t]=La[t-1]<<1|1,Uh[t]=~La[t];function Jge(t,e){let i=new Uint32Array(~~((t*e+cy)/cy));function r(s,o){i[s]|=o}function n(s,o){i[s]&=o}return{array:i,get:(s,o)=>{let a=o*t+s;return i[a>>>ec]&1<<(a&cs)},set:(s,o)=>{let a=o*t+s;r(a>>>ec,1<<(a&cs))},clear:(s,o)=>{let a=o*t+s;n(a>>>ec,~(1<<(a&cs)))},getRange:(s,o,a,l)=>{let u=l,c,h,d,p;for(;u>=o;--u)if(c=u*t+s,h=u*t+a,d=c>>>ec,p=h>>>ec,d===p){if(i[d]&Uh[c&cs]&La[(h&cs)+1])return!0}else{if(i[d]&Uh[c&cs]||i[p]&La[(h&cs)+1])return!0;for(let f=d+1;f<p;++f)if(i[f])return!0}return!1},setRange:(s,o,a,l)=>{let u,c,h,d,p;for(;o<=l;++o)if(u=o*t+s,c=o*t+a,h=u>>>ec,d=c>>>ec,h===d)r(h,Uh[u&cs]&La[(c&cs)+1]);else for(r(h,Uh[u&cs]),r(d,La[(c&cs)+1]),p=h+1;p<d;++p)r(p,4294967295)},clearRange:(s,o,a,l)=>{let u,c,h,d,p;for(;o<=l;++o)if(u=o*t+s,c=o*t+a,h=u>>>ec,d=c>>>ec,h===d)n(h,La[u&cs]|Uh[(c&cs)+1]);else for(n(h,La[u&cs]),n(d,Uh[(c&cs)+1]),p=h+1;p<d;++p)n(p,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=e||a>=t}}function Zge(t,e,i){let r=Math.max(1,Math.sqrt(t*e/1e6)),n=~~((t+2*i+r)/r),s=~~((e+2*i+r)/r),o=a=>~~((a+i)/r);return o.invert=a=>a*r-i,o.bitmap=()=>Jge(n,s),o.ratio=r,o.padding=i,o.width=t,o.height=e,o}function Qge(t,e,i,r){let n=t.width,s=t.height;return function(o){let a=o.datum.datum.items[r].items,l=a.length,u=o.datum.fontSize,c=Rs.width(o.datum,o.datum.text),h=0,d,p,f,m,g,b,v;for(let y=0;y<l;++y)d=a[y].x,f=a[y].y,p=a[y].x2===void 0?d:a[y].x2,m=a[y].y2===void 0?f:a[y].y2,g=(d+p)/2,b=(f+m)/2,v=Math.abs(p-d+m-f),v>=h&&(h=v,o.x=g,o.y=b);return g=c/2,b=u/2,d=o.x-g,p=o.x+g,f=o.y-b,m=o.y+b,o.align="center",d<0&&p<=n?o.align="left":0<=d&&n<p&&(o.align="right"),o.baseline="middle",f<0&&m<=s?o.baseline="top":0<=f&&s<m&&(o.baseline="bottom"),!0}}function F4(t,e,i,r,n,s){let o=i/2;return t-o<0||t+o>n||e-(o=r/2)<0||e+o>s}function Wh(t,e,i,r,n,s,o,a){let l=n*s/(r*2),u=t(e-l),c=t(e+l),h=t(i-(s=s/2)),d=t(i+s);return o.outOfBounds(u,h,c,d)||o.getRange(u,h,c,d)||a&&a.getRange(u,h,c,d)}function e1e(t,e,i,r){let n=t.width,s=t.height,o=e[0],a=e[1];function l(u,c,h,d,p){let f=t.invert(u),m=t.invert(c),g=h,b=s,v;if(!F4(f,m,d,p,n,s)&&!Wh(t,f,m,p,d,g,o,a)&&!Wh(t,f,m,p,d,p,o,null)){for(;b-g>=1;)v=(g+b)/2,Wh(t,f,m,p,d,v,o,a)?b=v:g=v;if(g>h)return[f,m,g,!0]}}return function(u){let c=u.datum.datum.items[r].items,h=c.length,d=u.datum.fontSize,p=Rs.width(u.datum,u.datum.text),f=i?d:0,m=!1,g=!1,b=0,v,y,x,_,w,C,E,A,D,R,I,z,B,N,H,T,L;for(let P=0;P<h;++P){for(v=c[P].x,x=c[P].y,y=c[P].x2===void 0?v:c[P].x2,_=c[P].y2===void 0?x:c[P].y2,v>y&&(L=v,v=y,y=L),x>_&&(L=x,x=_,_=L),D=t(v),I=t(y),R=~~((D+I)/2),z=t(x),N=t(_),B=~~((z+N)/2),E=R;E>=D;--E)for(A=B;A>=z;--A)T=l(E,A,f,p,d),T&&([u.x,u.y,f,m]=T);for(E=R;E<=I;++E)for(A=B;A<=N;++A)T=l(E,A,f,p,d),T&&([u.x,u.y,f,m]=T);!m&&!i&&(H=Math.abs(y-v+_-x),w=(v+y)/2,C=(x+_)/2,H>=b&&!F4(w,C,p,d,n,s)&&!Wh(t,w,C,d,p,d,o,null)&&(b=H,u.x=w,u.y=C,g=!0))}return m||g?(w=p/2,C=d/2,o.setRange(t(u.x-w),t(u.y-C),t(u.x+w),t(u.y+C)),u.align="center",u.baseline="middle",!0):!1}}var t1e=[-1,-1,1,1],i1e=[-1,1,-1,1];function r1e(t,e,i,r){let n=t.width,s=t.height,o=e[0],a=e[1],l=t.bitmap();return function(u){let c=u.datum.datum.items[r].items,h=c.length,d=u.datum.fontSize,p=Rs.width(u.datum,u.datum.text),f=[],m=i?d:0,g=!1,b=!1,v=0,y,x,_,w,C,E,A,D,R,I,z,B;for(let N=0;N<h;++N){for(y=c[N].x,_=c[N].y,x=c[N].x2===void 0?y:c[N].x2,w=c[N].y2===void 0?_:c[N].y2,f.push([t((y+x)/2),t((_+w)/2)]);f.length;)if([A,D]=f.pop(),!(o.get(A,D)||a.get(A,D)||l.get(A,D))){l.set(A,D);for(let H=0;H<4;++H)C=A+t1e[H],E=D+i1e[H],l.outOfBounds(C,E,C,E)||f.push([C,E]);if(C=t.invert(A),E=t.invert(D),R=m,I=s,!F4(C,E,p,d,n,s)&&!Wh(t,C,E,d,p,R,o,a)&&!Wh(t,C,E,d,p,d,o,null)){for(;I-R>=1;)z=(R+I)/2,Wh(t,C,E,d,p,z,o,a)?I=z:R=z;R>m&&(u.x=C,u.y=E,m=R,g=!0)}}!g&&!i&&(B=Math.abs(x-y+w-_),C=(y+x)/2,E=(_+w)/2,B>=v&&!F4(C,E,p,d,n,s)&&!Wh(t,C,E,d,p,d,o,null)&&(v=B,u.x=C,u.y=E,b=!0))}return g||b?(C=p/2,E=d/2,o.setRange(t(u.x-C),t(u.y-E),t(u.x+C),t(u.y+E)),u.align="center",u.baseline="middle",!0):!1}}var n1e=["right","center","left"],s1e=["bottom","middle","top"];function o1e(t,e,i,r){let n=t.width,s=t.height,o=e[0],a=e[1],l=r.length;return function(u){let c=u.boundary,h=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>n||c[3]>s)return!1;let d=u.textWidth??0,p,f,m,g,b,v,y,x,_,w,C,E,A,D,R;for(let I=0;I<l;++I){if(p=(i[I]&3)-1,f=(i[I]>>>2&3)-1,m=p===0&&f===0||r[I]<0,g=p&&f?Math.SQRT1_2:1,b=r[I]<0?-1:1,v=c[1+p]+r[I]*p*g,C=c[4+f]+b*h*f/2+r[I]*f*g,x=C-h/2,_=C+h/2,E=t(v),D=t(x),R=t(_),!d)if(Hj(E,E,D,R,o,a,v,v,x,_,c,m))d=Rs.width(u.datum,u.datum.text);else continue;if(w=v+b*d*p/2,v=w-d/2,y=w+d/2,E=t(v),A=t(y),Hj(E,A,D,R,o,a,v,y,x,_,c,m))return u.x=p?p*b<0?y:v:w,u.y=f?f*b<0?_:x:C,u.align=n1e[p*b+1],u.baseline=s1e[f*b+1],o.setRange(E,D,A,R),!0}return!1}}function Hj(t,e,i,r,n,s,o,a,l,u,c,h){return!(n.outOfBounds(t,i,e,r)||(h&&s||n).getRange(t,i,e,r))}var XR=0,YR=4,KR=8,JR=0,ZR=1,QR=2,a1e={"top-left":XR+JR,top:XR+ZR,"top-right":XR+QR,left:YR+JR,middle:YR+ZR,right:YR+QR,"bottom-left":KR+JR,bottom:KR+ZR,"bottom-right":KR+QR},l1e={naive:Qge,"reduced-search":e1e,floodfill:r1e};function u1e(t,e,i,r,n,s,o,a,l,u,c){if(!t.length)return t;let h=Math.max(r.length,n.length),d=c1e(r,h),p=h1e(n,h),f=d1e(t[0].datum),m=f==="group"&&t[0].datum.items[l].marktype,g=m==="area",b=f1e(f,m,a,l),v=u===null||u===1/0,y=g&&c==="naive",x=-1,_=-1,w=t.map(D=>{let R=v?Rs.width(D,D.text):void 0;return x=Math.max(x,R),_=Math.max(_,D.fontSize),{datum:D,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(D),textWidth:R}});u=u===null||u===1/0?Math.max(x,_)+Math.max(...r):u;let C=Zge(e[0],e[1],u),E;if(!y){i&&w.sort((I,z)=>i(I.datum,z.datum));let D=!1;for(let I=0;I<p.length&&!D;++I)D=p[I]===5||d[I]<0;let R=(f&&o||g)&&t.map(I=>I.datum);E=s.length||R?Yge(C,R||[],s,D,g):Xge(C,o&&w)}let A=g?l1e[c](C,E,o,l):o1e(C,E,p,d);return w.forEach(D=>D.opacity=+A(D)),w}function c1e(t,e){let i=new Float64Array(e),r=t.length;for(let n=0;n<r;++n)i[n]=t[n]||0;for(let n=r;n<e;++n)i[n]=i[r-1];return i}function h1e(t,e){let i=new Int8Array(e),r=t.length;for(let n=0;n<r;++n)i[n]|=a1e[t[n]];for(let n=r;n<e;++n)i[n]=i[r-1];return i}function d1e(t){return t&&t.mark&&t.mark.marktype}function f1e(t,e,i,r){let n=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return t?t==="line"||t==="area"?s=>n(s.datum):e==="line"?s=>{let o=s.datum.items[r].items;return n(o.length?o[i==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{let o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:n}var eD=["x","y","opacity","align","baseline"],Uj=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function tD(t){ee.call(this,null,t)}tD.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Uj},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:eD.length,default:eD}]};we(tD,ee,{transform(t,e){function i(s){let o=t[s];return Je(o)&&e.modified(o.fields)}let r=t.modified();if(!(r||e.changed(e.ADD_REM)||i("sort")))return;(!t.size||t.size.length!==2)&&te("Size parameter should be specified as a [width, height] array.");let n=t.as||eD;return u1e(e.materialize(e.SOURCE).source||[],t.size,t.sort,ve(t.offset==null?1:t.offset),ve(t.anchor||Uj),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(s=>{let o=s.datum;o[n[0]]=s.x,o[n[1]]=s.y,o[n[2]]=s.opacity,o[n[3]]=s.align,o[n[4]]=s.baseline}),e.reflow(r).modifies(n)}});var oD={};br(oD,{loess:()=>nD,regression:()=>sD});function Wj(t,e){var i=[],r=function(c){return c(a)},n,s,o,a,l,u;if(e==null)i.push(t);else for(n={},s=0,o=t.length;s<o;++s)a=t[s],l=e.map(r),u=n[l],u||(n[l]=u=[],u.dims=l,i.push(u)),u.push(a);return i}function nD(t){ee.call(this,null,t)}nD.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};we(nD,ee,{transform(t,e){let i=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let r=e.materialize(e.SOURCE).source,n=Wj(r,t.groupby),s=(t.groupby||[]).map(gi),o=s.length,a=t.as||[gi(t.x),gi(t.y)],l=[];n.forEach(u=>{W7(u,t.x,t.y,t.bandwidth||.3).forEach(c=>{let h={};for(let d=0;d<o;++d)h[s[d]]=u.dims[d];h[a[0]]=c[0],h[a[1]]=c[1],l.push(_t(h))})}),this.value&&(i.rem=this.value),this.value=i.add=i.source=l}return i}});var rD={constant:i_,linear:n_,log:N7,exp:$7,pow:H7,quad:s_,poly:U7},p1e=(t,e)=>t==="poly"?e:t==="quad"?2:1;function sD(t){ee.call(this,null,t)}sD.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(rD)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};we(sD,ee,{transform(t,e){let i=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let r=e.materialize(e.SOURCE).source,n=Wj(r,t.groupby),s=(t.groupby||[]).map(gi),o=t.method||"linear",a=t.order==null?3:t.order,l=p1e(o,a),u=t.as||[gi(t.x),gi(t.y)],c=rD[o],h=[],d=t.extent;_e(rD,o)||te("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),n.forEach(p=>{if(p.length<=l){e.dataflow.warn("Skipping regression with more parameters than data points.");return}let m=c(p,t.x,t.y,a);if(t.params){h.push(_t({keys:p.dims,coef:m.coef,rSquared:m.rSquared}));return}let g=d||Kn(p,t.x),b=v=>{let y={};for(let x=0;x<s.length;++x)y[s[x]]=p.dims[x];y[u[0]]=v[0],y[u[1]]=v[1],h.push(_t(y))};o==="linear"||o==="constant"?g.forEach(v=>b([v,m.predict(v)])):w0(m.predict,g,25,200).forEach(b)}),this.value&&(i.rem=this.value),this.value=i.add=i.source=h}return i}});var uD={};br(uD,{voronoi:()=>lD});var Mt=11102230246251565e-32,dr=134217729,hy=(3+8*Mt)*Mt;function Nf(t,e,i,r,n){let s,o,a,l,u=e[0],c=r[0],h=0,d=0;c>u==c>-u?(s=u,u=e[++h]):(s=c,c=r[++d]);let p=0;if(h<t&&d<i)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=e[++h]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(n[p++]=a);h<t&&d<i;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++h]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++d]),s=o,a!==0&&(n[p++]=a);for(;h<t;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++h],s=o,a!==0&&(n[p++]=a);for(;d<i;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++d],s=o,a!==0&&(n[p++]=a);return(s!==0||p===0)&&(n[p++]=s),p}function dy(t,e){let i=e[0];for(let r=1;r<t;r++)i+=e[r];return i}function ye(t){return new Float64Array(t)}var m1e=(3+16*Mt)*Mt,g1e=(2+12*Mt)*Mt,b1e=(9+64*Mt)*Mt*Mt,dm=ye(4),Vj=ye(8),jj=ye(12),qj=ye(16),hs=ye(4);function v1e(t,e,i,r,n,s,o){let a,l,u,c,h,d,p,f,m,g,b,v,y,x,_,w,C,E,A=t-n,D=i-n,R=e-s,I=r-s;x=A*I,d=dr*A,p=d-(d-A),f=A-p,d=dr*I,m=d-(d-I),g=I-m,_=f*g-(x-p*m-f*m-p*g),w=R*D,d=dr*R,p=d-(d-R),f=R-p,d=dr*D,m=d-(d-D),g=D-m,C=f*g-(w-p*m-f*m-p*g),b=_-C,h=_-b,dm[0]=_-(b+h)+(h-C),v=x+b,h=v-x,y=x-(v-h)+(b-h),b=y-w,h=y-b,dm[1]=y-(b+h)+(h-w),E=v+b,h=E-v,dm[2]=v-(E-h)+(b-h),dm[3]=E;let z=dy(4,dm),B=g1e*o;if(z>=B||-z>=B||(h=t-A,a=t-(A+h)+(h-n),h=i-D,u=i-(D+h)+(h-n),h=e-R,l=e-(R+h)+(h-s),h=r-I,c=r-(I+h)+(h-s),a===0&&l===0&&u===0&&c===0)||(B=b1e*o+hy*Math.abs(z),z+=A*c+I*a-(R*u+D*l),z>=B||-z>=B))return z;x=a*I,d=dr*a,p=d-(d-a),f=a-p,d=dr*I,m=d-(d-I),g=I-m,_=f*g-(x-p*m-f*m-p*g),w=l*D,d=dr*l,p=d-(d-l),f=l-p,d=dr*D,m=d-(d-D),g=D-m,C=f*g-(w-p*m-f*m-p*g),b=_-C,h=_-b,hs[0]=_-(b+h)+(h-C),v=x+b,h=v-x,y=x-(v-h)+(b-h),b=y-w,h=y-b,hs[1]=y-(b+h)+(h-w),E=v+b,h=E-v,hs[2]=v-(E-h)+(b-h),hs[3]=E;let N=Nf(4,dm,4,hs,Vj);x=A*c,d=dr*A,p=d-(d-A),f=A-p,d=dr*c,m=d-(d-c),g=c-m,_=f*g-(x-p*m-f*m-p*g),w=R*u,d=dr*R,p=d-(d-R),f=R-p,d=dr*u,m=d-(d-u),g=u-m,C=f*g-(w-p*m-f*m-p*g),b=_-C,h=_-b,hs[0]=_-(b+h)+(h-C),v=x+b,h=v-x,y=x-(v-h)+(b-h),b=y-w,h=y-b,hs[1]=y-(b+h)+(h-w),E=v+b,h=E-v,hs[2]=v-(E-h)+(b-h),hs[3]=E;let H=Nf(N,Vj,4,hs,jj);x=a*c,d=dr*a,p=d-(d-a),f=a-p,d=dr*c,m=d-(d-c),g=c-m,_=f*g-(x-p*m-f*m-p*g),w=l*u,d=dr*l,p=d-(d-l),f=l-p,d=dr*u,m=d-(d-u),g=u-m,C=f*g-(w-p*m-f*m-p*g),b=_-C,h=_-b,hs[0]=_-(b+h)+(h-C),v=x+b,h=v-x,y=x-(v-h)+(b-h),b=y-w,h=y-b,hs[1]=y-(b+h)+(h-w),E=v+b,h=E-v,hs[2]=v-(E-h)+(b-h),hs[3]=E;let T=Nf(H,jj,4,hs,qj);return qj[T-1]}function fm(t,e,i,r,n,s){let o=(e-s)*(i-n),a=(t-n)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=m1e*u?l:-v1e(t,e,i,r,n,s,u)}var ltt=(7+56*Mt)*Mt,utt=(3+28*Mt)*Mt,ctt=(26+288*Mt)*Mt*Mt,htt=ye(4),dtt=ye(4),ftt=ye(4),ptt=ye(4),mtt=ye(4),gtt=ye(4),btt=ye(4),vtt=ye(4),ytt=ye(4),xtt=ye(8),wtt=ye(8),_tt=ye(8),Ctt=ye(4),Stt=ye(8),Ett=ye(8),ktt=ye(8),Att=ye(12),Ttt=ye(192),Rtt=ye(192);var Ftt=(10+96*Mt)*Mt,Ltt=(4+48*Mt)*Mt,Ott=(44+576*Mt)*Mt*Mt,Ptt=ye(4),ztt=ye(4),Itt=ye(4),Btt=ye(4),Ntt=ye(4),$tt=ye(4),Htt=ye(4),Utt=ye(4),Wtt=ye(8),Vtt=ye(8),jtt=ye(8),qtt=ye(8),Gtt=ye(8),Xtt=ye(8),Ytt=ye(8),Ktt=ye(8),Jtt=ye(8),Ztt=ye(4),Qtt=ye(4),eit=ye(4),tit=ye(8),iit=ye(16),rit=ye(16),nit=ye(16),sit=ye(32),oit=ye(32),ait=ye(48),lit=ye(64),uit=ye(1152),cit=ye(1152);var pit=(16+224*Mt)*Mt,mit=(5+72*Mt)*Mt,git=(71+1408*Mt)*Mt*Mt,bit=ye(4),vit=ye(4),yit=ye(4),xit=ye(4),wit=ye(4),_it=ye(4),Cit=ye(4),Sit=ye(4),Eit=ye(4),kit=ye(4),Ait=ye(24),Tit=ye(24),Rit=ye(24),Dit=ye(24),Mit=ye(24),Fit=ye(24),Lit=ye(24),Oit=ye(24),Pit=ye(24),zit=ye(24),Iit=ye(1152),Bit=ye(1152),Nit=ye(1152),$it=ye(1152),Hit=ye(1152),Uit=ye(2304),Wit=ye(2304),Vit=ye(3456),jit=ye(5760),qit=ye(8),Git=ye(8),Xit=ye(8),Yit=ye(16),Kit=ye(24),Jit=ye(48),Zit=ye(48),Qit=ye(96),ert=ye(192),trt=ye(384),irt=ye(384),rrt=ye(384),nrt=ye(768);var srt=ye(96),ort=ye(96),art=ye(96),lrt=ye(1152);var Xj=Math.pow(2,-52),L4=new Uint32Array(512),mm=class t{static from(e,i=S1e,r=E1e){let n=e.length,s=new Float64Array(n*2);for(let o=0;o<n;o++){let a=e[o];s[2*o]=i(a),s[2*o+1]=r(a)}return new t(s)}constructor(e){let i=e.length>>1;if(i>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;let r=Math.max(2*i-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(i)),this._hullPrev=new Uint32Array(i),this._hullNext=new Uint32Array(i),this._hullTri=new Uint32Array(i),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(i),this._dists=new Float64Array(i),this.update()}update(){let{coords:e,_hullPrev:i,_hullNext:r,_hullTri:n,_hullHash:s}=this,o=e.length>>1,a=1/0,l=1/0,u=-1/0,c=-1/0;for(let A=0;A<o;A++){let D=e[2*A],R=e[2*A+1];D<a&&(a=D),R<l&&(l=R),D>u&&(u=D),R>c&&(c=R),this._ids[A]=A}let h=(a+u)/2,d=(l+c)/2,p,f,m;for(let A=0,D=1/0;A<o;A++){let R=aD(h,d,e[2*A],e[2*A+1]);R<D&&(p=A,D=R)}let g=e[2*p],b=e[2*p+1];for(let A=0,D=1/0;A<o;A++){if(A===p)continue;let R=aD(g,b,e[2*A],e[2*A+1]);R<D&&R>0&&(f=A,D=R)}let v=e[2*f],y=e[2*f+1],x=1/0;for(let A=0;A<o;A++){if(A===p||A===f)continue;let D=_1e(g,b,v,y,e[2*A],e[2*A+1]);D<x&&(m=A,x=D)}let _=e[2*m],w=e[2*m+1];if(x===1/0){for(let R=0;R<o;R++)this._dists[R]=e[2*R]-e[0]||e[2*R+1]-e[1];pm(this._ids,this._dists,0,o-1);let A=new Uint32Array(o),D=0;for(let R=0,I=-1/0;R<o;R++){let z=this._ids[R],B=this._dists[z];B>I&&(A[D++]=z,I=B)}this.hull=A.subarray(0,D),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(fm(g,b,v,y,_,w)<0){let A=f,D=v,R=y;f=m,v=_,y=w,m=A,_=D,w=R}let C=C1e(g,b,v,y,_,w);this._cx=C.x,this._cy=C.y;for(let A=0;A<o;A++)this._dists[A]=aD(e[2*A],e[2*A+1],C.x,C.y);pm(this._ids,this._dists,0,o-1),this._hullStart=p;let E=3;r[p]=i[m]=f,r[f]=i[p]=m,r[m]=i[f]=p,n[p]=0,n[f]=1,n[m]=2,s.fill(-1),s[this._hashKey(g,b)]=p,s[this._hashKey(v,y)]=f,s[this._hashKey(_,w)]=m,this.trianglesLen=0,this._addTriangle(p,f,m,-1,-1,-1);for(let A=0,D,R;A<this._ids.length;A++){let I=this._ids[A],z=e[2*I],B=e[2*I+1];if(A>0&&Math.abs(z-D)<=Xj&&Math.abs(B-R)<=Xj||(D=z,R=B,I===p||I===f||I===m))continue;let N=0;for(let W=0,Y=this._hashKey(z,B);W<this._hashSize&&(N=s[(Y+W)%this._hashSize],!(N!==-1&&N!==r[N]));W++);N=i[N];let H=N,T;for(;T=r[H],fm(z,B,e[2*H],e[2*H+1],e[2*T],e[2*T+1])>=0;)if(H=T,H===N){H=-1;break}if(H===-1)continue;let L=this._addTriangle(H,I,r[H],-1,-1,n[H]);n[I]=this._legalize(L+2),n[H]=L,E++;let P=r[H];for(;T=r[P],fm(z,B,e[2*P],e[2*P+1],e[2*T],e[2*T+1])<0;)L=this._addTriangle(P,I,T,n[I],-1,n[P]),n[I]=this._legalize(L+2),r[P]=P,E--,P=T;if(H===N)for(;T=i[H],fm(z,B,e[2*T],e[2*T+1],e[2*H],e[2*H+1])<0;)L=this._addTriangle(T,I,H,-1,n[H],n[T]),this._legalize(L+2),n[T]=L,r[H]=H,E--,H=T;this._hullStart=i[I]=H,r[H]=i[P]=I,r[I]=P,s[this._hashKey(z,B)]=I,s[this._hashKey(e[2*H],e[2*H+1])]=H}this.hull=new Uint32Array(E);for(let A=0,D=this._hullStart;A<E;A++)this.hull[A]=D,D=r[D];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,i){return Math.floor(x1e(e-this._cx,i-this._cy)*this._hashSize)%this._hashSize}_legalize(e){let{_triangles:i,_halfedges:r,coords:n}=this,s=0,o=0;for(;;){let a=r[e],l=e-e%3;if(o=l+(e+2)%3,a===-1){if(s===0)break;e=L4[--s];continue}let u=a-a%3,c=l+(e+1)%3,h=u+(a+2)%3,d=i[o],p=i[e],f=i[c],m=i[h];if(w1e(n[2*d],n[2*d+1],n[2*p],n[2*p+1],n[2*f],n[2*f+1],n[2*m],n[2*m+1])){i[e]=m,i[a]=d;let b=r[h];if(b===-1){let y=this._hullStart;do{if(this._hullTri[y]===h){this._hullTri[y]=e;break}y=this._hullPrev[y]}while(y!==this._hullStart)}this._link(e,b),this._link(a,r[o]),this._link(o,h);let v=u+(a+1)%3;s<L4.length&&(L4[s++]=v)}else{if(s===0)break;e=L4[--s]}}return o}_link(e,i){this._halfedges[e]=i,i!==-1&&(this._halfedges[i]=e)}_addTriangle(e,i,r,n,s,o){let a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=i,this._triangles[a+2]=r,this._link(a,n),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}};function x1e(t,e){let i=t/(Math.abs(t)+Math.abs(e));return(e>0?3-i:1+i)/4}function aD(t,e,i,r){let n=t-i,s=e-r;return n*n+s*s}function w1e(t,e,i,r,n,s,o,a){let l=t-o,u=e-a,c=i-o,h=r-a,d=n-o,p=s-a,f=l*l+u*u,m=c*c+h*h,g=d*d+p*p;return l*(h*g-m*p)-u*(c*g-m*d)+f*(c*p-h*d)<0}function _1e(t,e,i,r,n,s){let o=i-t,a=r-e,l=n-t,u=s-e,c=o*o+a*a,h=l*l+u*u,d=.5/(o*u-a*l),p=(u*c-a*h)*d,f=(o*h-l*c)*d;return p*p+f*f}function C1e(t,e,i,r,n,s){let o=i-t,a=r-e,l=n-t,u=s-e,c=o*o+a*a,h=l*l+u*u,d=.5/(o*u-a*l),p=t+(u*c-a*h)*d,f=e+(o*h-l*c)*d;return{x:p,y:f}}function pm(t,e,i,r){if(r-i<=20)for(let n=i+1;n<=r;n++){let s=t[n],o=e[s],a=n-1;for(;a>=i&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=s}else{let n=i+r>>1,s=i+1,o=r;fy(t,n,s),e[t[i]]>e[t[r]]&&fy(t,i,r),e[t[s]]>e[t[r]]&&fy(t,s,r),e[t[i]]>e[t[s]]&&fy(t,i,s);let a=t[s],l=e[a];for(;;){do s++;while(e[t[s]]<l);do o--;while(e[t[o]]>l);if(o<s)break;fy(t,s,o)}t[i+1]=t[o],t[o]=a,r-s+1>=o-i?(pm(t,e,s,r),pm(t,e,i,o-1)):(pm(t,e,i,o-1),pm(t,e,s,r))}}function fy(t,e,i){let r=t[e];t[e]=t[i],t[i]=r}function S1e(t){return t[0]}function E1e(t){return t[1]}var Uo=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,i){this._+=`L${this._x1=+e},${this._y1=+i}`}arc(e,i,r){e=+e,i=+i,r=+r;let n=e+r,s=i;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${n},${s}`:(Math.abs(this._x1-n)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+n+","+s),r&&(this._+=`A${r},${r},0,1,1,${e-r},${i}A${r},${r},0,1,1,${this._x1=n},${this._y1=s}`)}rect(e,i,r,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${+r}v${+n}h${-r}Z`}value(){return this._||null}};var Vh=class{constructor(){this._=[]}moveTo(e,i){this._.push([e,i])}closePath(){this._.push(this._[0].slice())}lineTo(e,i){this._.push([e,i])}value(){return this._.length?this._:null}};var py=class{constructor(e,[i,r,n,s]=[0,0,960,500]){if(!((n=+n)>=(i=+i))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=n,this.xmin=i,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:e,hull:i,triangles:r},vectors:n}=this,s,o,a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,b=r.length,v,y;m<b;m+=3,g+=2){let x=r[m]*2,_=r[m+1]*2,w=r[m+2]*2,C=e[x],E=e[x+1],A=e[_],D=e[_+1],R=e[w],I=e[w+1],z=A-C,B=D-E,N=R-C,H=I-E,T=(z*H-B*N)*2;if(Math.abs(T)<1e-9){if(s===void 0){s=o=0;for(let P of i)s+=e[P*2],o+=e[P*2+1];s/=i.length,o/=i.length}let L=1e9*Math.sign((s-C)*H-(o-E)*N);v=(C+R)/2-L*H,y=(E+I)/2+L*N}else{let L=1/T,P=z*z+B*B,W=N*N+H*H;v=C+(H*P-B*W)*L,y=E+(z*W-N*P)*L}a[g]=v,a[g+1]=y}let l=i[i.length-1],u,c=l*4,h,d=e[2*l],p,f=e[2*l+1];n.fill(0);for(let m=0;m<i.length;++m)l=i[m],u=c,h=d,p=f,c=l*4,d=e[2*l],f=e[2*l+1],n[u+2]=n[c]=p-f,n[u+3]=n[c+1]=d-h}render(e){let i=e==null?e=new Uo:void 0,{delaunay:{halfedges:r,inedges:n,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,h=r.length;c<h;++c){let d=r[c];if(d<c)continue;let p=Math.floor(c/3)*2,f=Math.floor(d/3)*2,m=o[p],g=o[p+1],b=o[f],v=o[f+1];this._renderSegment(m,g,b,v,e)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];let h=Math.floor(n[u]/3)*2,d=o[h],p=o[h+1],f=l*4,m=this._project(d,p,a[f+2],a[f+3]);m&&this._renderSegment(d,p,m[0],m[1],e)}return i&&i.value()}renderBounds(e){let i=e==null?e=new Uo:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),i&&i.value()}renderCell(e,i){let r=i==null?i=new Uo:void 0,n=this._clip(e);if(n===null||!n.length)return;i.moveTo(n[0],n[1]);let s=n.length;for(;n[0]===n[s-2]&&n[1]===n[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(n[o]!==n[o-2]||n[o+1]!==n[o-1])&&i.lineTo(n[o],n[o+1]);return i.closePath(),r&&r.value()}*cellPolygons(){let{delaunay:{points:e}}=this;for(let i=0,r=e.length/2;i<r;++i){let n=this.cellPolygon(i);n&&(n.index=i,yield n)}}cellPolygon(e){let i=new Vh;return this.renderCell(e,i),i.value()}_renderSegment(e,i,r,n,s){let o,a=this._regioncode(e,i),l=this._regioncode(r,n);a===0&&l===0?(s.moveTo(e,i),s.lineTo(r,n)):(o=this._clipSegment(e,i,r,n,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,i,r){return i=+i,i!==i||(r=+r,r!==r)?!1:this.delaunay._step(e,i,r)===e}*neighbors(e){let i=this._clip(e);if(i)for(let r of this.delaunay.neighbors(e)){let n=this._clip(r);if(n){e:for(let s=0,o=i.length;s<o;s+=2)for(let a=0,l=n.length;a<l;a+=2)if(i[s]===n[a]&&i[s+1]===n[a+1]&&i[(s+2)%o]===n[(a+l-2)%l]&&i[(s+3)%o]===n[(a+l-1)%l]){yield r;break e}}}}_cell(e){let{circumcenters:i,delaunay:{inedges:r,halfedges:n,triangles:s}}=this,o=r[e];if(o===-1)return null;let a=[],l=o;do{let u=Math.floor(l/3);if(a.push(i[u*2],i[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==e)break;l=n[l]}while(l!==o&&l!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let i=this._cell(e);if(i===null)return null;let{vectors:r}=this,n=e*4;return this._simplify(r[n]||r[n+1]?this._clipInfinite(e,i,r[n],r[n+1],r[n+2],r[n+3]):this._clipFinite(e,i))}_clipFinite(e,i){let r=i.length,n=null,s,o,a=i[r-2],l=i[r-1],u,c=this._regioncode(a,l),h,d=0;for(let p=0;p<r;p+=2)if(s=a,o=l,a=i[p],l=i[p+1],u=c,c=this._regioncode(a,l),u===0&&c===0)h=d,d=0,n?n.push(a,l):n=[a,l];else{let f,m,g,b,v;if(u===0){if((f=this._clipSegment(s,o,a,l,u,c))===null)continue;[m,g,b,v]=f}else{if((f=this._clipSegment(a,l,s,o,c,u))===null)continue;[b,v,m,g]=f,h=d,d=this._edgecode(m,g),h&&d&&this._edge(e,h,d,n,n.length),n?n.push(m,g):n=[m,g]}h=d,d=this._edgecode(b,v),h&&d&&this._edge(e,h,d,n,n.length),n?n.push(b,v):n=[b,v]}if(n)h=d,d=this._edgecode(n[0],n[1]),h&&d&&this._edge(e,h,d,n,n.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return n}_clipSegment(e,i,r,n,s,o){let a=s<o;for(a&&([e,i,r,n,s,o]=[r,n,e,i,o,s]);;){if(s===0&&o===0)return a?[r,n,e,i]:[e,i,r,n];if(s&o)return null;let l,u,c=s||o;c&8?(l=e+(r-e)*(this.ymax-i)/(n-i),u=this.ymax):c&4?(l=e+(r-e)*(this.ymin-i)/(n-i),u=this.ymin):c&2?(u=i+(n-i)*(this.xmax-e)/(r-e),l=this.xmax):(u=i+(n-i)*(this.xmin-e)/(r-e),l=this.xmin),s?(e=l,i=u,s=this._regioncode(e,i)):(r=l,n=u,o=this._regioncode(r,n))}}_clipInfinite(e,i,r,n,s,o){let a=Array.from(i),l;if((l=this._project(a[0],a[1],r,n))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(e,a))for(let u=0,c=a.length,h,d=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)h=d,d=this._edgecode(a[u],a[u+1]),h&&d&&(u=this._edge(e,h,d,a,u),c=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,i,r,n,s){for(;i!==r;){let o,a;switch(i){case 5:i=4;continue;case 4:i=6,o=this.xmax,a=this.ymin;break;case 6:i=2;continue;case 2:i=10,o=this.xmax,a=this.ymax;break;case 10:i=8;continue;case 8:i=9,o=this.xmin,a=this.ymax;break;case 9:i=1;continue;case 1:i=5,o=this.xmin,a=this.ymin;break}(n[s]!==o||n[s+1]!==a)&&this.contains(e,o,a)&&(n.splice(s,0,o,a),s+=2)}return s}_project(e,i,r,n){let s=1/0,o,a,l;if(n<0){if(i<=this.ymin)return null;(o=(this.ymin-i)/n)<s&&(l=this.ymin,a=e+(s=o)*r)}else if(n>0){if(i>=this.ymax)return null;(o=(this.ymax-i)/n)<s&&(l=this.ymax,a=e+(s=o)*r)}if(r>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/r)<s&&(a=this.xmax,l=i+(s=o)*n)}else if(r<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/r)<s&&(a=this.xmin,l=i+(s=o)*n)}return[a,l]}_edgecode(e,i){return(e===this.xmin?1:e===this.xmax?2:0)|(i===this.ymin?4:i===this.ymax?8:0)}_regioncode(e,i){return(e<this.xmin?1:e>this.xmax?2:0)|(i<this.ymin?4:i>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let i=0;i<e.length;i+=2){let r=(i+2)%e.length,n=(i+4)%e.length;(e[i]===e[r]&&e[r]===e[n]||e[i+1]===e[r+1]&&e[r+1]===e[n+1])&&(e.splice(r,2),i-=2)}e.length||(e=null)}return e}};var k1e=2*Math.PI,gm=Math.pow;function A1e(t){return t[0]}function T1e(t){return t[1]}function R1e(t){let{triangles:e,coords:i}=t;for(let r=0;r<e.length;r+=3){let n=2*e[r],s=2*e[r+1],o=2*e[r+2];if((i[o]-i[n])*(i[s+1]-i[n+1])-(i[s]-i[n])*(i[o+1]-i[n+1])>1e-10)return!1}return!0}function D1e(t,e,i){return[t+Math.sin(t+e)*i,e+Math.cos(t-e)*i]}var bm=class t{static from(e,i=A1e,r=T1e,n){return new t("length"in e?M1e(e,i,r,n):Float64Array.from(F1e(e,i,r,n)))}constructor(e){this._delaunator=new mm(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let e=this._delaunator,i=this.points;if(e.hull&&e.hull.length>2&&R1e(e)){this.collinear=Int32Array.from({length:i.length/2},(d,p)=>p).sort((d,p)=>i[2*d]-i[2*p]||i[2*d+1]-i[2*p+1]);let l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[i[2*l],i[2*l+1],i[2*u],i[2*u+1]],h=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,p=i.length/2;d<p;++d){let f=D1e(i[2*d],i[2*d+1],h);i[2*d]=f[0],i[2*d+1]=f[1]}this._delaunator=new mm(i)}else delete this.collinear;let r=this.halfedges=this._delaunator.halfedges,n=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){let c=s[l%3===2?l-2:l+1];(r[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=n.length;l<u;++l)a[n[l]]=l;n.length<=2&&n.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=n[0],o[n[0]]=1,n.length===2&&(o[n[1]]=0,this.triangles[1]=n[1],this.triangles[2]=n[1]))}voronoi(e){return new py(this,e)}*neighbors(e){let{inedges:i,hull:r,_hullIndex:n,halfedges:s,triangles:o,collinear:a}=this;if(a){let h=a.indexOf(e);h>0&&(yield a[h-1]),h<a.length-1&&(yield a[h+1]);return}let l=i[e];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==e)return;if(u=s[u],u===-1){let h=r[(n[e]+1)%r.length];h!==c&&(yield h);return}}while(u!==l)}find(e,i,r=0){if(e=+e,e!==e||(i=+i,i!==i))return-1;let n=r,s;for(;(s=this._step(r,e,i))>=0&&s!==r&&s!==n;)r=s;return s}_step(e,i,r){let{inedges:n,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(n[e]===-1||!u.length)return(e+1)%(u.length>>1);let c=e,h=gm(i-u[e*2],2)+gm(r-u[e*2+1],2),d=n[e],p=d;do{let f=l[p],m=gm(i-u[f*2],2)+gm(r-u[f*2+1],2);if(m<h&&(h=m,c=f),p=p%3===2?p-2:p+1,l[p]!==e)break;if(p=a[p],p===-1){if(p=s[(o[e]+1)%s.length],p!==f&&gm(i-u[p*2],2)+gm(r-u[p*2+1],2)<h)return p;break}}while(p!==d);return c}render(e){let i=e==null?e=new Uo:void 0,{points:r,halfedges:n,triangles:s}=this;for(let o=0,a=n.length;o<a;++o){let l=n[o];if(l<o)continue;let u=s[o]*2,c=s[l]*2;e.moveTo(r[u],r[u+1]),e.lineTo(r[c],r[c+1])}return this.renderHull(e),i&&i.value()}renderPoints(e,i){i===void 0&&(!e||typeof e.moveTo!="function")&&(i=e,e=null),i=i==null?2:+i;let r=e==null?e=new Uo:void 0,{points:n}=this;for(let s=0,o=n.length;s<o;s+=2){let a=n[s],l=n[s+1];e.moveTo(a+i,l),e.arc(a,l,i,0,k1e)}return r&&r.value()}renderHull(e){let i=e==null?e=new Uo:void 0,{hull:r,points:n}=this,s=r[0]*2,o=r.length;e.moveTo(n[s],n[s+1]);for(let a=1;a<o;++a){let l=2*r[a];e.lineTo(n[l],n[l+1])}return e.closePath(),i&&i.value()}hullPolygon(){let e=new Vh;return this.renderHull(e),e.value()}renderTriangle(e,i){let r=i==null?i=new Uo:void 0,{points:n,triangles:s}=this,o=s[e*=3]*2,a=s[e+1]*2,l=s[e+2]*2;return i.moveTo(n[o],n[o+1]),i.lineTo(n[a],n[a+1]),i.lineTo(n[l],n[l+1]),i.closePath(),r&&r.value()}*trianglePolygons(){let{triangles:e}=this;for(let i=0,r=e.length/3;i<r;++i)yield this.trianglePolygon(i)}trianglePolygon(e){let i=new Vh;return this.renderTriangle(e,i),i.value()}};function M1e(t,e,i,r){let n=t.length,s=new Float64Array(n*2);for(let o=0;o<n;++o){let a=t[o];s[o*2]=e.call(r,a,o,t),s[o*2+1]=i.call(r,a,o,t)}return s}function*F1e(t,e,i,r){let n=0;for(let s of t)yield e.call(r,s,n,t),yield i.call(r,s,n,t),++n}function lD(t){ee.call(this,null,t)}lD.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var L1e=[-1e5,-1e5,1e5,1e5];we(lD,ee,{transform(t,e){let i=t.as||"path",r=e.source;if(!r||!r.length)return e;let n=t.size;n=n?[0,0,n[0],n[1]]:(n=t.extent)?[n[0][0],n[0][1],n[1][0],n[1][1]]:L1e;let s=this.value=bm.from(r,t.x,t.y).voronoi(n);for(let o=0,a=r.length;o<a;++o){let l=s.cellPolygon(o);r[o][i]=l&&!P1e(l)?O1e(l):null}return e.reflow(t.modified()).modifies(i)}});function O1e(t){let e=t[0][0],i=t[0][1],r=t.length-1;for(;t[r][0]===e&&t[r][1]===i;--r);return"M"+t.slice(0,r+1).join("L")+"Z"}function P1e(t){return t.length===2&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]}var dD={};br(dD,{wordcloud:()=>hD});var cD=Math.PI/180,my=64,O4=2048;function z1e(){var t=[256,256],e,i,r,n,s,o,a,l=Yj,u=[],c=Math.random,h={};h.layout=function(){for(var f=d(Po()),m=U1e((t[0]>>5)*t[1]),g=null,b=u.length,v=-1,y=[],x=u.map(w=>({text:e(w),font:i(w),style:n(w),weight:s(w),rotate:o(w),size:~~(r(w)+1e-14),padding:a(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,C)=>C.size-w.size);++v<b;){var _=x[v];_.x=t[0]*(c()+.5)>>1,_.y=t[1]*(c()+.5)>>1,I1e(f,_,x,v),_.hasText&&p(m,_,g)&&(y.push(_),g?N1e(g,_):g=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=t[0]>>1,_.y-=t[1]>>1)}return y};function d(f){f.width=f.height=1;var m=Math.sqrt(f.getContext("2d").getImageData(0,0,1,1).data.length>>2);f.width=(my<<5)/m,f.height=O4/m;var g=f.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function p(f,m,g){for(var b=m.x,v=m.y,y=Math.hypot(t[0],t[1]),x=l(t),_=c()<.5?1:-1,w=-_,C,E,A;(C=x(w+=_))&&(E=~~C[0],A=~~C[1],!(Math.min(Math.abs(E),Math.abs(A))>=y));)if(m.x=b+E,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>t[0]||m.y+m.y1>t[1])&&(!g||!B1e(m,f,t[0]))&&(!g||$1e(m,g))){for(var D=m.sprite,R=m.width>>5,I=t[0]>>5,z=m.x-(R<<4),B=z&127,N=32-B,H=m.y1-m.y0,T=(m.y+m.y0)*I+(z>>5),L,P=0;P<H;P++){L=0;for(var W=0;W<=R;W++)f[T+W]|=L<<N|(W<R?(L=D[P*R+W])>>>B:0);T+=I}return m.sprite=null,!0}return!1}return h.words=function(f){return arguments.length?(u=f,h):u},h.size=function(f){return arguments.length?(t=[+f[0],+f[1]],h):t},h.font=function(f){return arguments.length?(i=$f(f),h):i},h.fontStyle=function(f){return arguments.length?(n=$f(f),h):n},h.fontWeight=function(f){return arguments.length?(s=$f(f),h):s},h.rotate=function(f){return arguments.length?(o=$f(f),h):o},h.text=function(f){return arguments.length?(e=$f(f),h):e},h.spiral=function(f){return arguments.length?(l=W1e[f]||f,h):l},h.fontSize=function(f){return arguments.length?(r=$f(f),h):r},h.padding=function(f){return arguments.length?(a=$f(f),h):a},h.random=function(f){return arguments.length?(c=f,h):c},h}function I1e(t,e,i,r){if(!e.sprite){var n=t.context,s=t.ratio;n.clearRect(0,0,(my<<5)/s,O4/s);var o=0,a=0,l=0,u=i.length,c,h,d,p,f;for(--r;++r<u;){if(e=i[r],n.save(),n.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font,c=n.measureText(e.text+"m").width*s,d=e.size<<1,e.rotate){var m=Math.sin(e.rotate*cD),g=Math.cos(e.rotate*cD),b=c*g,v=c*m,y=d*g,x=d*m;c=Math.max(Math.abs(b+x),Math.abs(b-x))+31>>5<<5,d=~~Math.max(Math.abs(v+y),Math.abs(v-y))}else c=c+31>>5<<5;if(d>l&&(l=d),o+c>=my<<5&&(o=0,a+=l,l=0),a+d>=O4)break;n.translate((o+(c>>1))/s,(a+(d>>1))/s),e.rotate&&n.rotate(e.rotate*cD),n.fillText(e.text,0,0),e.padding&&(n.lineWidth=2*e.padding,n.strokeText(e.text,0,0)),n.restore(),e.width=c,e.height=d,e.xoff=o,e.yoff=a,e.x1=c>>1,e.y1=d>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=c}for(var _=n.getImageData(0,0,(my<<5)/s,O4/s).data,w=[];--r>=0;)if(e=i[r],!!e.hasText){for(c=e.width,h=c>>5,d=e.y1-e.y0,p=0;p<d*h;p++)w[p]=0;if(o=e.xoff,o==null)return;a=e.yoff;var C=0,E=-1;for(f=0;f<d;f++){for(p=0;p<c;p++){var A=h*f+(p>>5),D=_[(a+f)*(my<<5)+(o+p)<<2]?1<<31-p%32:0;w[A]|=D,C|=D}C?E=f:(e.y0++,d--,f--,a++)}e.y1=e.y0+E,e.sprite=w.slice(0,(e.y1-e.y0)*h)}}}function B1e(t,e,i){i>>=5;for(var r=t.sprite,n=t.width>>5,s=t.x-(n<<4),o=s&127,a=32-o,l=t.y1-t.y0,u=(t.y+t.y0)*i+(s>>5),c,h=0;h<l;h++){c=0;for(var d=0;d<=n;d++)if((c<<a|(d<n?(c=r[h*n+d])>>>o:0))&e[u+d])return!0;u+=i}return!1}function N1e(t,e){var i=t[0],r=t[1];e.x+e.x0<i.x&&(i.x=e.x+e.x0),e.y+e.y0<i.y&&(i.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function $1e(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function Yj(t){var e=t[0]/t[1];return function(i){return[e*(i*=.1)*Math.cos(i),i*Math.sin(i)]}}function H1e(t){var e=4,i=e*t[0]/t[1],r=0,n=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=i;break;case 1:n+=e;break;case 2:r-=i;break;default:n-=e;break}return[r,n]}}function U1e(t){for(var e=[],i=-1;++i<t;)e[i]=0;return e}function $f(t){return typeof t=="function"?t:function(){return t}}var W1e={archimedean:Yj,rectangular:H1e},Kj=["x","y","font","fontSize","fontStyle","fontWeight","angle"],V1e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function hD(t){ee.call(this,z1e(),t)}hD.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Kj}]};we(hD,ee,{transform(t,e){t.size&&!(t.size[0]&&t.size[1])&&te("Wordcloud size dimensions must be non-zero.");function i(f){let m=t[f];return Je(m)&&e.modified(m.fields)}let r=t.modified();if(!(r||e.changed(e.ADD_REM)||V1e.some(i)))return;let n=e.materialize(e.SOURCE).source,s=this.value,o=t.as||Kj,a=t.fontSize||14,l;if(Je(a)?l=t.fontSizeRange:a=wi(a),l){let f=a,m=St("sqrt")().domain(Kn(n,f)).range(l);a=g=>m(f(g))}n.forEach(f=>{f[o[0]]=NaN,f[o[1]]=NaN,f[o[3]]=0});let u=s.words(n).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(a).random(is).layout(),c=s.size(),h=c[0]>>1,d=c[1]>>1,p=u.length;for(let f=0,m,g;f<p;++f)m=u[f],g=m.datum,g[o[0]]=m.x+h,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return e.reflow(r).modifies(o)}});var mD={};br(mD,{crossfilter:()=>fD,resolvefilter:()=>pD});var j1e=t=>new Uint8Array(t),q1e=t=>new Uint16Array(t),gy=t=>new Uint32Array(t);function G1e(){let t=8,e=[],i=gy(0),r=P4(0,t),n=P4(0,t);return{data:()=>e,seen:()=>i=X1e(i,e.length),add(s){for(let o=0,a=e.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,e.push(u)},remove(s,o){let a=e.length,l=Array(a-s),u=e,c,h,d;for(h=0;!o[h]&&h<a;++h)l[h]=e[h],u[h]=h;for(d=h;h<a;++h)c=e[h],o[h]?u[h]=-1:(u[h]=d,r[d]=r[h],n[d]=n[h],l[d]=c,c._index=d++),r[h]=0;return e=l,u},size:()=>e.length,curr:()=>r,prev:()=>n,reset:s=>n[s]=r[s],all:()=>t<257?255:t<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){let a=r.length;(s>a||o>t)&&(t=Math.max(o,t),r=P4(s,t,r),n=P4(s,t))}}}function X1e(t,e,i){return t.length>=e?t:(i=i||new t.constructor(e),i.set(t),i)}function P4(t,e,i){let r=(e<257?j1e:e<65537?q1e:gy)(t);return i&&r.set(i),r}function Jj(t,e,i){let r=1<<e;return{one:r,zero:~r,range:i.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(n,s){let o=this,a=o.bisect(o.range,n.value),l=n.index,u=a[0],c=a[1],h=l.length,d;for(d=0;d<u;++d)s[l[d]]|=r;for(d=c;d<h;++d)s[l[d]]|=r;return o}}}function Zj(){let t=gy(0),e=[],i=0;function r(a,l,u){if(!l.length)return[];let c=i,h=l.length,d=gy(h),p=Array(h),f,m,g;for(g=0;g<h;++g)p[g]=a(l[g]),d[g]=g;if(p=Y1e(p,d),c)f=e,m=t,e=Array(c+h),t=gy(c+h),K1e(u,f,m,c,p,d,h,e,t);else{if(u>0)for(g=0;g<h;++g)d[g]+=u;e=p,t=d}return i=c+h,{index:d,value:p}}function n(a,l){let u=i,c,h,d;for(h=0;!l[t[h]]&&h<u;++h);for(d=h;h<u;++h)l[c=t[h]]||(t[d]=c,e[d]=e[h],++d);i=u-a}function s(a){for(let l=0,u=i;l<u;++l)t[l]=a[t[l]]}function o(a,l){let u;return l?u=l.length:(l=e,u=i),[Ik(l,a[0],0,u),Vd(l,a[1],0,u)]}return{insert:r,remove:n,bisect:o,reindex:s,index:()=>t,size:()=>i}}function Y1e(t,e){return t.sort.call(e,(i,r)=>{let n=t[i],s=t[r];return n<s?-1:n>s?1:0}),b2(t,e)}function K1e(t,e,i,r,n,s,o,a,l){let u=0,c=0,h;for(h=0;u<r&&c<o;++h)e[u]<n[c]?(a[h]=e[u],l[h]=i[u++]):(a[h]=n[c],l[h]=s[c++]+t);for(;u<r;++u,++h)a[h]=e[u],l[h]=i[u];for(;c<o;++c,++h)a[h]=n[c],l[h]=s[c]+t}function fD(t){ee.call(this,G1e(),t),this._indices=null,this._dims=null}fD.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};we(fD,ee,{transform(t,e){if(this._dims){var i=t.modified("fields")||t.fields.some(r=>e.modified(r.fields));return i?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)},init(t,e){let i=t.fields,r=t.query,n=this._indices={},s=this._dims=[],o=r.length,a=0,l,u;for(;a<o;++a)l=i[a].fname,u=n[l]||(n[l]=Zj()),s.push(Jj(u,a,r[a]));return this.eval(t,e)},reinit(t,e){let i=e.materialize().fork(),r=t.fields,n=t.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),h=i.rem=i.add,d=i.mod,p=n.length,f={},m,g,b,v,y,x,_,w,C;if(u.set(l),e.rem.length&&(y=this.remove(t,e,i)),e.add.length&&a.add(e.add),e.mod.length)for(x={},v=e.mod,_=0,w=v.length;_<w;++_)x[v[_]._index]=1;for(_=0;_<p;++_)C=r[_],(!o[_]||t.modified("fields",_)||e.modified(C.fields))&&(b=C.fname,(m=f[b])||(s[b]=g=Zj(),f[b]=m=g.insert(C,e.source,0)),o[_]=Jj(g,_,n[_]).onAdd(m,l));for(_=0,w=a.data().length;_<w;++_)y[_]||(u[_]!==l[_]?h.push(_):x[_]&&l[_]!==c&&d.push(_));return a.mask=(1<<p)-1,i},eval(t,e){let i=e.materialize().fork(),r=this._dims.length,n=0;return e.rem.length&&(this.remove(t,e,i),n|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(n|=this.update(t,e,i)),e.add.length&&(this.insert(t,e,i),n|=(1<<r)-1),e.mod.length&&(this.modify(e,i),n|=(1<<r)-1),this.value.mask=n,i},insert(t,e,i){let r=e.add,n=this.value,s=this._dims,o=this._indices,a=t.fields,l={},u=i.add,c=n.size()+r.length,h=s.length,d=n.size(),p,f,m;n.resize(c,h),n.add(r);let g=n.curr(),b=n.prev(),v=n.all();for(p=0;p<h;++p)f=a[p].fname,m=l[f]||(l[f]=o[f].insert(a[p],r,d)),s[p].onAdd(m,g);for(;d<c;++d)b[d]=v,g[d]!==v&&u.push(d)},modify(t,e){let i=e.mod,r=this.value,n=r.curr(),s=r.all(),o=t.mod,a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,n[u]!==s&&i.push(u)},remove(t,e,i){let r=this._indices,n=this.value,s=n.curr(),o=n.prev(),a=n.all(),l={},u=i.rem,c=e.rem,h,d,p,f;for(h=0,d=c.length;h<d;++h)p=c[h]._index,l[p]=1,o[p]=f=s[p],s[p]=a,f!==a&&u.push(p);for(p in r)r[p].remove(d,l);return this.reindex(e,d,l),l},reindex(t,e,i){let r=this._indices,n=this.value;t.runAfter(()=>{let s=n.remove(e,i);for(let o in r)r[o].reindex(s)})},update(t,e,i){let r=this._dims,n=t.query,s=e.stamp,o=r.length,a=0,l,u;for(i.filters=0,u=0;u<o;++u)t.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],n[l],i.add,i.rem);else for(u=0,a=0;u<o;++u)t.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],n[u],s,i.add),i.rem=i.add);return a},incrementAll(t,e,i,r){let n=this.value,s=n.seen(),o=n.curr(),a=n.prev(),l=t.index(),u=t.bisect(t.range),c=t.bisect(e),h=c[0],d=c[1],p=u[0],f=u[1],m=t.one,g,b,v;if(h<p)for(g=h,b=Math.min(p,d);g<b;++g)v=l[g],s[v]!==i&&(a[v]=o[v],s[v]=i,r.push(v)),o[v]^=m;else if(h>p)for(g=p,b=Math.min(h,f);g<b;++g)v=l[g],s[v]!==i&&(a[v]=o[v],s[v]=i,r.push(v)),o[v]^=m;if(d>f)for(g=Math.max(h,f),b=d;g<b;++g)v=l[g],s[v]!==i&&(a[v]=o[v],s[v]=i,r.push(v)),o[v]^=m;else if(d<f)for(g=Math.max(p,d),b=f;g<b;++g)v=l[g],s[v]!==i&&(a[v]=o[v],s[v]=i,r.push(v)),o[v]^=m;t.range=e.slice()},incrementOne(t,e,i,r){let n=this.value,s=n.curr(),o=t.index(),a=t.bisect(t.range),l=t.bisect(e),u=l[0],c=l[1],h=a[0],d=a[1],p=t.one,f,m,g;if(u<h)for(f=u,m=Math.min(h,c);f<m;++f)g=o[f],s[g]^=p,i.push(g);else if(u>h)for(f=h,m=Math.min(u,d);f<m;++f)g=o[f],s[g]^=p,r.push(g);if(c>d)for(f=Math.max(u,d),m=c;f<m;++f)g=o[f],s[g]^=p,i.push(g);else if(c<d)for(f=Math.max(h,c),m=d;f<m;++f)g=o[f],s[g]^=p,r.push(g);t.range=e.slice()}});function pD(t){ee.call(this,null,t)}pD.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};we(pD,ee,{transform(t,e){let i=~(t.ignore||0),r=t.filter,n=r.mask;if((n&i)===0)return e.StopPropagation;let s=e.fork(e.ALL),o=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&i?null:o[c];return s.filter(s.MOD,u),n&n-1?(s.filter(s.ADD,c=>{let h=a[c]&i;return!h&&h^l[c]&i?o[c]:null}),s.filter(s.REM,c=>{let h=a[c]&i;return h&&!(h^(h^l[c]&i))?o[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(a[c]&i)===n?o[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});var J1e="RawCode",ic="Literal",Z1e="Property",Q1e="Identifier",ebe="ArrayExpression",tbe="BinaryExpression",wD="CallExpression",ibe="ConditionalExpression",rbe="LogicalExpression",nbe="MemberExpression",sbe="ObjectExpression",obe="UnaryExpression";function Oa(t){this.type=t}Oa.prototype.visit=function(t){let e,i,r;if(t(this))return 1;for(e=abe(this),i=0,r=e.length;i<r;++i)if(e[i].visit(t))return 1};function abe(t){switch(t.type){case ebe:return t.elements;case tbe:case rbe:return[t.left,t.right];case wD:return[t.callee].concat(t.arguments);case ibe:return[t.test,t.consequent,t.alternate];case nbe:return[t.object,t.property];case sbe:return t.properties;case Z1e:return[t.key,t.value];case obe:return[t.argument];case Q1e:case ic:case J1e:default:return[]}}var Bl,Ue,se,Rn,Yt,B4=1,wy=2,Hf=3,jh=4,N4=5,Wf=6,Fs=7,_y=8,lbe=9;Bl={};Bl[B4]="Boolean";Bl[wy]="<end>";Bl[Hf]="Identifier";Bl[jh]="Keyword";Bl[N4]="Null";Bl[Wf]="Numeric";Bl[Fs]="Punctuator";Bl[_y]="String";Bl[lbe]="RegularExpression";var ube="ArrayExpression",cbe="BinaryExpression",hbe="CallExpression",dbe="ConditionalExpression",oq="Identifier",fbe="Literal",pbe="LogicalExpression",mbe="MemberExpression",gbe="ObjectExpression",bbe="Property",vbe="UnaryExpression",zr="Unexpected token %0",ybe="Unexpected number",xbe="Unexpected string",wbe="Unexpected identifier",_be="Unexpected reserved word",Cbe="Unexpected end of input",yD="Invalid regular expression",gD="Invalid regular expression: missing /",aq="Octal literals are not allowed in strict mode.",Sbe="Duplicate data property in object literal not allowed in strict mode",on="ILLEGAL",yy="Disabled.",Ebe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),kbe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function $4(t,e){if(!t)throw new Error("ASSERT: "+e)}function tc(t){return t>=48&&t<=57}function _D(t){return"0123456789abcdefABCDEF".includes(t)}function vy(t){return"01234567".includes(t)}function Abe(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t)}function xy(t){return t===10||t===13||t===8232||t===8233}function Cy(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&Ebe.test(String.fromCharCode(t))}function I4(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&kbe.test(String.fromCharCode(t))}var Tbe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function lq(){for(;se<Rn;){let t=Ue.charCodeAt(se);if(Abe(t)||xy(t))++se;else break}}function xD(t){var e,i,r,n=0;for(i=t==="u"?4:2,e=0;e<i;++e)se<Rn&&_D(Ue[se])?(r=Ue[se++],n=n*16+"0123456789abcdef".indexOf(r.toLowerCase())):$t({},zr,on);return String.fromCharCode(n)}function Rbe(){var t,e,i,r;for(t=Ue[se],e=0,t==="}"&&$t({},zr,on);se<Rn&&(t=Ue[se++],!!_D(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&$t({},zr,on),e<=65535?String.fromCharCode(e):(i=(e-65536>>10)+55296,r=(e-65536&1023)+56320,String.fromCharCode(i,r))}function uq(){var t,e;for(t=Ue.charCodeAt(se++),e=String.fromCharCode(t),t===92&&(Ue.charCodeAt(se)!==117&&$t({},zr,on),++se,t=xD("u"),(!t||t==="\\"||!Cy(t.charCodeAt(0)))&&$t({},zr,on),e=t);se<Rn&&(t=Ue.charCodeAt(se),!!I4(t));)++se,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),Ue.charCodeAt(se)!==117&&$t({},zr,on),++se,t=xD("u"),(!t||t==="\\"||!I4(t.charCodeAt(0)))&&$t({},zr,on),e+=t);return e}function Dbe(){var t,e;for(t=se++;se<Rn;){if(e=Ue.charCodeAt(se),e===92)return se=t,uq();if(I4(e))++se;else break}return Ue.slice(t,se)}function Mbe(){var t,e,i;return t=se,e=Ue.charCodeAt(se)===92?uq():Dbe(),e.length===1?i=Hf:Tbe.hasOwnProperty(e)?i=jh:e==="null"?i=N4:e==="true"||e==="false"?i=B4:i=Hf,{type:i,value:e,start:t,end:se}}function bD(){var t=se,e=Ue.charCodeAt(se),i,r=Ue[se],n,s,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++se,{type:Fs,value:String.fromCharCode(e),start:t,end:se};default:if(i=Ue.charCodeAt(se+1),i===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return se+=2,{type:Fs,value:String.fromCharCode(e)+String.fromCharCode(i),start:t,end:se};case 33:case 61:return se+=2,Ue.charCodeAt(se)===61&&++se,{type:Fs,value:Ue.slice(t,se),start:t,end:se}}}if(o=Ue.substr(se,4),o===">>>=")return se+=4,{type:Fs,value:o,start:t,end:se};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return se+=3,{type:Fs,value:s,start:t,end:se};if(n=s.substr(0,2),r===n[1]&&"+-<>&|".includes(r)||n==="=>")return se+=2,{type:Fs,value:n,start:t,end:se};if(n==="//"&&$t({},zr,on),"<>=!+-*%&|^/".includes(r))return++se,{type:Fs,value:r,start:t,end:se};$t({},zr,on)}function Fbe(t){let e="";for(;se<Rn&&_D(Ue[se]);)e+=Ue[se++];return e.length===0&&$t({},zr,on),Cy(Ue.charCodeAt(se))&&$t({},zr,on),{type:Wf,value:parseInt("0x"+e,16),start:t,end:se}}function Lbe(t){let e="0"+Ue[se++];for(;se<Rn&&vy(Ue[se]);)e+=Ue[se++];return(Cy(Ue.charCodeAt(se))||tc(Ue.charCodeAt(se)))&&$t({},zr,on),{type:Wf,value:parseInt(e,8),octal:!0,start:t,end:se}}function Qj(){var t,e,i;if(i=Ue[se],$4(tc(i.charCodeAt(0))||i===".","Numeric literal must start with a decimal digit or a decimal point"),e=se,t="",i!=="."){if(t=Ue[se++],i=Ue[se],t==="0"){if(i==="x"||i==="X")return++se,Fbe(e);if(vy(i))return Lbe(e);i&&tc(i.charCodeAt(0))&&$t({},zr,on)}for(;tc(Ue.charCodeAt(se));)t+=Ue[se++];i=Ue[se]}if(i==="."){for(t+=Ue[se++];tc(Ue.charCodeAt(se));)t+=Ue[se++];i=Ue[se]}if(i==="e"||i==="E")if(t+=Ue[se++],i=Ue[se],(i==="+"||i==="-")&&(t+=Ue[se++]),tc(Ue.charCodeAt(se)))for(;tc(Ue.charCodeAt(se));)t+=Ue[se++];else $t({},zr,on);return Cy(Ue.charCodeAt(se))&&$t({},zr,on),{type:Wf,value:parseFloat(t),start:e,end:se}}function Obe(){var t="",e,i,r,n,s=!1;for(e=Ue[se],$4(e==="'"||e==='"',"String literal must starts with a quote"),i=se,++se;se<Rn;)if(r=Ue[se++],r===e){e="";break}else if(r==="\\")if(r=Ue[se++],!r||!xy(r.charCodeAt(0)))switch(r){case"u":case"x":Ue[se]==="{"?(++se,t+=Rbe()):t+=xD(r);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:vy(r)?(n="01234567".indexOf(r),n!==0&&(s=!0),se<Rn&&vy(Ue[se])&&(s=!0,n=n*8+"01234567".indexOf(Ue[se++]),"0123".includes(r)&&se<Rn&&vy(Ue[se])&&(n=n*8+"01234567".indexOf(Ue[se++]))),t+=String.fromCharCode(n)):t+=r;break}else r==="\r"&&Ue[se]===`
`&&++se;else{if(xy(r.charCodeAt(0)))break;t+=r}return e!==""&&$t({},zr,on),{type:_y,value:t,octal:s,start:i,end:se}}function Pbe(t,e){let i=t;e.includes("u")&&(i=i.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,n)=>{if(parseInt(n,16)<=1114111)return"x";$t({},yD)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(i)}catch{$t({},yD)}try{return new RegExp(t,e)}catch{return null}}function zbe(){var t,e,i,r,n;for(t=Ue[se],$4(t==="/","Regular expression literal must start with a slash"),e=Ue[se++],i=!1,r=!1;se<Rn;)if(t=Ue[se++],e+=t,t==="\\")t=Ue[se++],xy(t.charCodeAt(0))&&$t({},gD),e+=t;else if(xy(t.charCodeAt(0)))$t({},gD);else if(i)t==="]"&&(i=!1);else if(t==="/"){r=!0;break}else t==="["&&(i=!0);return r||$t({},gD),n=e.substr(1,e.length-2),{value:n,literal:e}}function Ibe(){var t,e,i;for(e="",i="";se<Rn&&(t=Ue[se],!!I4(t.charCodeAt(0)));)++se,t==="\\"&&se<Rn?$t({},zr,on):(i+=t,e+=t);return i.search(/[^gimuy]/g)>=0&&$t({},yD,i),{value:i,literal:e}}function Bbe(){var t,e,i,r;return Yt=null,lq(),t=se,e=zbe(),i=Ibe(),r=Pbe(e.value,i.value),{literal:e.literal+i.literal,value:r,regex:{pattern:e.value,flags:i.value},start:t,end:se}}function Nbe(t){return t.type===Hf||t.type===jh||t.type===B4||t.type===N4}function cq(){if(lq(),se>=Rn)return{type:wy,start:se,end:se};let t=Ue.charCodeAt(se);return Cy(t)?Mbe():t===40||t===41||t===59?bD():t===39||t===34?Obe():t===46?tc(Ue.charCodeAt(se+1))?Qj():bD():tc(t)?Qj():bD()}function Ls(){let t=Yt;return se=t.end,Yt=cq(),se=t.end,t}function hq(){let t=se;Yt=cq(),se=t}function $be(t){let e=new Oa(ube);return e.elements=t,e}function eq(t,e,i){let r=new Oa(t==="||"||t==="&&"?pbe:cbe);return r.operator=t,r.left=e,r.right=i,r}function Hbe(t,e){let i=new Oa(hbe);return i.callee=t,i.arguments=e,i}function Ube(t,e,i){let r=new Oa(dbe);return r.test=t,r.consequent=e,r.alternate=i,r}function CD(t){let e=new Oa(oq);return e.name=t,e}function by(t){let e=new Oa(fbe);return e.value=t.value,e.raw=Ue.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function tq(t,e,i){let r=new Oa(mbe);return r.computed=t==="[",r.object=e,r.property=i,r.computed||(i.member=!0),r}function Wbe(t){let e=new Oa(gbe);return e.properties=t,e}function iq(t,e,i){let r=new Oa(bbe);return r.key=e,r.value=i,r.kind=t,r}function Vbe(t,e){let i=new Oa(vbe);return i.operator=t,i.argument=e,i.prefix=!0,i}function $t(t,e){var i,r=Array.prototype.slice.call(arguments,2),n=e.replace(/%(\d)/g,(s,o)=>($4(o<r.length,"Message reference must be in range"),r[o]));throw i=new Error(n),i.index=se,i.description=n,i}function H4(t){t.type===wy&&$t(t,Cbe),t.type===Wf&&$t(t,ybe),t.type===_y&&$t(t,xbe),t.type===Hf&&$t(t,wbe),t.type===jh&&$t(t,_be),$t(t,zr,t.value)}function Dn(t){let e=Ls();(e.type!==Fs||e.value!==t)&&H4(e)}function yi(t){return Yt.type===Fs&&Yt.value===t}function vD(t){return Yt.type===jh&&Yt.value===t}function jbe(){let t=[];for(se=Yt.start,Dn("[");!yi("]");)yi(",")?(Ls(),t.push(null)):(t.push(Uf()),yi("]")||Dn(","));return Ls(),$be(t)}function rq(){se=Yt.start;let t=Ls();return t.type===_y||t.type===Wf?(t.octal&&$t(t,aq),by(t)):CD(t.value)}function qbe(){var t,e,i,r;if(se=Yt.start,t=Yt,t.type===Hf)return i=rq(),Dn(":"),r=Uf(),iq("init",i,r);if(t.type===wy||t.type===Fs)H4(t);else return e=rq(),Dn(":"),r=Uf(),iq("init",e,r)}function Gbe(){var t=[],e,i,r,n={},s=String;for(se=Yt.start,Dn("{");!yi("}");)e=qbe(),e.key.type===oq?i=e.key.name:i=s(e.key.value),r="$"+i,Object.prototype.hasOwnProperty.call(n,r)?$t({},Sbe):n[r]=!0,t.push(e),yi("}")||Dn(",");return Dn("}"),Wbe(t)}function Xbe(){Dn("(");let t=SD();return Dn(")"),t}var Ybe={if:1};function Kbe(){var t,e,i;if(yi("("))return Xbe();if(yi("["))return jbe();if(yi("{"))return Gbe();if(t=Yt.type,se=Yt.start,t===Hf||Ybe[Yt.value])i=CD(Ls().value);else if(t===_y||t===Wf)Yt.octal&&$t(Yt,aq),i=by(Ls());else{if(t===jh)throw new Error(yy);t===B4?(e=Ls(),e.value=e.value==="true",i=by(e)):t===N4?(e=Ls(),e.value=null,i=by(e)):yi("/")||yi("/=")?(i=by(Bbe()),hq()):H4(Ls())}return i}function Jbe(){let t=[];if(Dn("("),!yi(")"))for(;se<Rn&&(t.push(Uf()),!yi(")"));)Dn(",");return Dn(")"),t}function Zbe(){se=Yt.start;let t=Ls();return Nbe(t)||H4(t),CD(t.value)}function Qbe(){return Dn("."),Zbe()}function eve(){Dn("[");let t=SD();return Dn("]"),t}function tve(){var t,e,i;for(t=Kbe();;)if(yi("."))i=Qbe(),t=tq(".",t,i);else if(yi("("))e=Jbe(),t=Hbe(t,e);else if(yi("["))i=eve(),t=tq("[",t,i);else break;return t}function nq(){let t=tve();if(Yt.type===Fs&&(yi("++")||yi("--")))throw new Error(yy);return t}function z4(){var t,e;if(Yt.type!==Fs&&Yt.type!==jh)e=nq();else{if(yi("++")||yi("--"))throw new Error(yy);if(yi("+")||yi("-")||yi("~")||yi("!"))t=Ls(),e=z4(),e=Vbe(t.value,e);else{if(vD("delete")||vD("void")||vD("typeof"))throw new Error(yy);e=nq()}}return e}function sq(t){let e=0;if(t.type!==Fs&&t.type!==jh)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function ive(){var t,e,i,r,n,s,o,a,l,u;if(t=Yt,l=z4(),r=Yt,n=sq(r),n===0)return l;for(r.prec=n,Ls(),e=[t,Yt],o=z4(),s=[l,r,o];(n=sq(Yt))>0;){for(;s.length>2&&n<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),e.pop(),i=eq(a,l,o),s.push(i);r=Ls(),r.prec=n,s.push(r),e.push(Yt),i=z4(),s.push(i)}for(u=s.length-1,i=s[u],e.pop();u>1;)e.pop(),i=eq(s[u-1].value,s[u-2],i),u-=2;return i}function Uf(){var t,e,i;return t=ive(),yi("?")&&(Ls(),e=Uf(),Dn(":"),i=Uf(),t=Ube(t,e,i)),t}function SD(){let t=Uf();if(yi(","))throw new Error(yy);return t}function U4(t){Ue=t,se=0,Rn=Ue.length,Yt=null,hq();let e=SD();if(Yt.type!==wy)throw new Error("Unexpect token after expression.");return e}var ED={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function kD(t){function e(o,a,l,u){let c=t(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(t).join(",")+")")}function i(o,a,l){return u=>e(o,u,a,l)}let r="new Date",n="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&te("Missing arguments to clamp function."),o.length>3&&te("Too many arguments to clamp function.");let a=o.map(t);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:i("getDate",r,0),day:i("getDay",r,0),year:i("getFullYear",r,0),month:i("getMonth",r,0),hours:i("getHours",r,0),minutes:i("getMinutes",r,0),seconds:i("getSeconds",r,0),milliseconds:i("getMilliseconds",r,0),time:i("getTime",r,0),timezoneoffset:i("getTimezoneOffset",r,0),utcdate:i("getUTCDate",r,0),utcday:i("getUTCDay",r,0),utcyear:i("getUTCFullYear",r,0),utcmonth:i("getUTCMonth",r,0),utchours:i("getUTCHours",r,0),utcminutes:i("getUTCMinutes",r,0),utcseconds:i("getUTCSeconds",r,0),utcmilliseconds:i("getUTCMilliseconds",r,0),length:i("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:i("toUpperCase",n,0),lower:i("toLowerCase",n,0),substring:i("substring",n),split:i("split",n),trim:i("trim",n,0),btoa:"btoa",atob:"atob",regexp:s,test:i("test",s),if:function(o){o.length<3&&te("Missing arguments to if function."),o.length>3&&te("Too many arguments to if function.");let a=o.map(t);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function rve(t){let e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function W4(t){t=t||{};let e=t.allowed?or(t.allowed):{},i=t.forbidden?or(t.forbidden):{},r=t.constants||ED,n=(t.functions||kD)(h),s=t.globalvar,o=t.fieldvar,a=Je(s)?s:f=>`${s}["${f}"]`,l={},u={},c=0;function h(f){if(fe(f))return f;let m=d[f.type];return m==null&&te("Unsupported type: "+f.type),m(f)}let d={Literal:f=>f.raw,Identifier:f=>{let m=f.name;return c>0?m:_e(i,m)?te("Illegal identifier: "+m):_e(r,m)?r[m]:_e(e,m)?m:(l[m]=1,a(m))},MemberExpression:f=>{let m=!f.computed,g=h(f.object);m&&(c+=1);let b=h(f.property);return g===o&&(u[rve(b)]=1),m&&(c-=1),g+(m?"."+b:"["+b+"]")},CallExpression:f=>{f.callee.type!=="Identifier"&&te("Illegal callee type: "+f.callee.type);let m=f.callee.name,g=f.arguments,b=_e(n,m)&&n[m];return b||te("Unrecognized function: "+m),Je(b)?b(g):b+"("+g.map(h).join(",")+")"},ArrayExpression:f=>"["+f.elements.map(h).join(",")+"]",BinaryExpression:f=>"("+h(f.left)+" "+f.operator+" "+h(f.right)+")",UnaryExpression:f=>"("+f.operator+h(f.argument)+")",ConditionalExpression:f=>"("+h(f.test)+"?"+h(f.consequent)+":"+h(f.alternate)+")",LogicalExpression:f=>"("+h(f.left)+f.operator+h(f.right)+")",ObjectExpression:f=>"{"+f.properties.map(h).join(",")+"}",Property:f=>{c+=1;let m=h(f.key);return c-=1,m+":"+h(f.value)}};function p(f){let m={code:h(f),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},m}return p.functions=n,p.constants=r,p}var dq=Symbol("vega_selection_getter");function gq(t){return(!t.getter||!t.getter[dq])&&(t.getter=Mr(t.field),t.getter[dq]=!0),t.getter}var TD="intersect",fq="union",nve="vlMulti",sve="vlPoint",pq="or",ove="and",Nl="_vgsid_",Sy=Mr(Nl),ave="E",lve="R",uve="R-E",cve="R-LE",hve="R-RE",dve="E-LT",fve="E-LTE",pve="E-GT",mve="E-GTE",gve="E-VALID",bve="E-ONE",V4="index:unit";function mq(t,e){for(var i=e.fields,r=e.values,n=i.length,s=0,o,a;s<n;++s)if(a=i[s],o=gq(a)(t),ba(o)&&(o=Ki(o)),ba(r[s])&&(r[s]=Ki(r[s])),K(r[s])&&ba(r[s][0])&&(r[s]=r[s].map(Ki)),a.type===ave){if(K(r[s])?!r[s].includes(o):o!==r[s])return!1}else if(a.type===lve){if(!th(o,r[s]))return!1}else if(a.type===hve){if(!th(o,r[s],!0,!1))return!1}else if(a.type===uve){if(!th(o,r[s],!1,!1))return!1}else if(a.type===cve){if(!th(o,r[s],!1,!0))return!1}else if(a.type===dve){if(o>=r[s])return!1}else if(a.type===fve){if(o>r[s])return!1}else if(a.type===pve){if(o<=r[s])return!1}else if(a.type===mve){if(o<r[s])return!1}else if(a.type===gve){if(o===null||isNaN(o))return!1}else if(a.type===bve&&r[s].indexOf(o)===-1)return!1;return!0}function bq(t,e,i){for(var r=this.context.data[t],n=r?r.values.value:[],s=r?r[V4]&&r[V4].value:void 0,o=i===TD,a=n.length,l=0,u,c,h,d,p;l<a;++l)if(u=n[l],s&&o){if(c=c||{},h=c[d=u.unit]||0,h===-1)continue;if(p=mq(e,u),c[d]=p?-1:++h,p&&s.size===1)return!0;if(!p&&h===s.get(d).count)return!1}else if(p=mq(e,u),o^p)return p;return a&&o}var vq=to(Sy),vve=vq.left,yve=vq.right;function yq(t,e,i){let r=this.context.data[t],n=r?r.values.value:[],s=r?r[V4]&&r[V4].value:void 0,o=i===TD,a=Sy(e),l=vve(n,a);if(l===n.length||Sy(n[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(yve(n,a)-l<s.size)return!1}return!0}function xq(t,e){return t.map(i=>Ze(e.fields?{values:e.fields.map(r=>gq(r)(i.datum))}:{[Nl]:Sy(i.datum)},e))}function wq(t,e,i,r){for(var n=this.context.data[t],s=n?n.values.value:[],o={},a={},l={},u,c,h,d,p,f,m,g,b,v,y=s.length,x=0,_,w;x<y;++x)if(u=s[x],d=u.unit,c=u.fields,h=u.values,c&&h){for(_=0,w=c.length;_<w;++_)p=c[_],m=o[p.field]||(o[p.field]={}),g=m[d]||(m[d]=[]),l[p.field]=b=p.type.charAt(0),v=AD[`${b}_union`],m[d]=v(g,ve(h[_]));i&&(g=a[d]||(a[d]=[]),g.push(ve(h).reduce((C,E,A)=>(C[c[A].field]=E,C),{})))}else p=Nl,f=Sy(u),m=o[p]||(o[p]={}),g=m[d]||(m[d]=[]),g.push(f),i&&(g=a[d]||(a[d]=[]),g.push({[Nl]:f}));if(e=e||fq,o[Nl]?o[Nl]=AD[`${Nl}_${e}`](...Object.values(o[Nl])):Object.keys(o).forEach(C=>{o[C]=Object.keys(o[C]).map(E=>o[C][E]).reduce((E,A)=>E===void 0?A:AD[`${l[C]}_${e}`](E,A))}),s=Object.keys(a),i&&s.length){let C=r?sve:nve;o[C]=e===fq?{[pq]:s.reduce((E,A)=>(E.push(...a[A]),E),[])}:{[ove]:s.map(E=>({[pq]:a[E]}))}}return o}var AD={[`${Nl}_union`]:_2,[`${Nl}_intersect`]:w2,E_union:function(t,e){if(!t.length)return e;for(var i=0,r=e.length;i<r;++i)t.includes(e[i])||t.push(e[i]);return t},E_intersect:function(t,e){return t.length?t.filter(i=>e.includes(i)):e},R_union:function(t,e){var i=Ki(e[0]),r=Ki(e[1]);return i>r&&(i=e[1],r=e[0]),t.length?(t[0]>i&&(t[0]=i),t[1]<r&&(t[1]=r),t):[i,r]},R_intersect:function(t,e){var i=Ki(e[0]),r=Ki(e[1]);return i>r&&(i=e[1],r=e[0]),t.length?r<t[0]||t[1]<i?[]:(t[0]<i&&(t[0]=i),t[1]>r&&(t[1]=r),t):[i,r]}},xve=":",wve="@";function j4(t,e,i,r){e[0].type!==ic&&te("First argument to selection functions must be a string literal.");let n=e[0].value,s=e.length>=2&&ht(e).value,o="unit",a=wve+o,l=xve+n;s===TD&&!_e(r,a)&&(r[a]=i.getData(n).indataRef(i,o)),_e(r,l)||(r[l]=i.getData(n).tuplesRef())}function Eq(t){let e=this.context.data[t];return e?e.values.value:[]}function _ve(t,e,i){let r=this.context.data[t]["index:"+e],n=r?r.value.get(i):void 0;return n&&n.count}function Cve(t,e){let i=this.context.dataflow,r=this.context.data[t],n=r.input;return i.pulse(n,i.changeset().remove(yr).insert(e)),1}function Sve(t,e,i){if(t){let r=this.context.dataflow,n=t.mark.source;r.pulse(n,r.changeset().encode(t,e))}return i!==void 0?i:t}var Ey=t=>function(e,i){let r=this.context.dataflow.locale();return e===null?"null":r[t](i)(e)},Eve=Ey("format"),kq=Ey("timeFormat"),kve=Ey("utcFormat"),Ave=Ey("timeParse"),Tve=Ey("utcParse"),q4=new Date(2e3,0,1);function G4(t,e,i){return!Number.isInteger(t)||!Number.isInteger(e)?"":(q4.setYear(2e3),q4.setMonth(t),q4.setDate(e),kq.call(this,q4,i))}function Rve(t){return G4.call(this,t,1,"%B")}function Dve(t){return G4.call(this,t,1,"%b")}function Mve(t){return G4.call(this,0,2+t,"%A")}function Fve(t){return G4.call(this,0,2+t,"%a")}var Lve=":",Ove="@",DD="%",Aq="$";function LD(t,e,i,r){e[0].type!==ic&&te("First argument to data functions must be a string literal.");let n=e[0].value,s=Lve+n;if(!_e(s,r))try{r[s]=i.getData(n).tuplesRef()}catch{}}function Pve(t,e,i,r){e[0].type!==ic&&te("First argument to indata must be a string literal."),e[1].type!==ic&&te("Second argument to indata must be a string literal.");let n=e[0].value,s=e[1].value,o=Ove+s;_e(o,r)||(r[o]=i.getData(n).indataRef(i,s))}function ds(t,e,i,r){if(e[0].type===ic)_q(i,r,e[0].value);else for(t in i.scales)_q(i,r,t)}function _q(t,e,i){let r=DD+i;if(!_e(e,r))try{e[r]=t.scaleRef(i)}catch{}}function $l(t,e){if(fe(t)){let i=e.scales[t];return i&&_A(i.value)?i.value:void 0}else if(Je(t))return _A(t)?t:void 0}function zve(t,e,i){e.__bandwidth=n=>n&&n.bandwidth?n.bandwidth():0,i._bandwidth=ds,i._range=ds,i._scale=ds;let r=n=>"_["+(n.type===ic?pe(DD+n.value):pe(DD)+"+"+t(n))+"]";return{_bandwidth:n=>`this.__bandwidth(${r(n[0])})`,_range:n=>`${r(n[0])}.range()`,_scale:n=>`${r(n[0])}(${t(n[1])})`}}function OD(t,e){return function(i,r,n){if(i){let s=$l(i,(n||this).context);return s&&s.path[t](r)}else return e(r)}}var Ive=OD("area",H9),Bve=OD("bounds",W9),Nve=OD("centroid",X9);function $ve(t,e){let i=$l(t,(e||this).context);return i&&i.scale()}function Hve(t){let e=this.context.group,i=!1;if(e)for(;t;){if(t===e){i=!0;break}t=t.mark.group}return i}function PD(t,e,i){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(i)))}catch(r){t.warn(r)}return i[i.length-1]}function Uve(){return PD(this.context.dataflow,"warn",arguments)}function Wve(){return PD(this.context.dataflow,"info",arguments)}function Vve(){return PD(this.context.dataflow,"debug",arguments)}function RD(t){let e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function MD(t){let e=zo(t),i=RD(e.r),r=RD(e.g),n=RD(e.b);return .2126*i+.7152*r+.0722*n}function jve(t,e){let i=MD(t),r=MD(e),n=Math.max(i,r),s=Math.min(i,r);return(n+.05)/(s+.05)}function qve(){let t=[].slice.call(arguments);return t.unshift({}),Ze(...t)}function Tq(t,e){return t===e||t!==t&&e!==e?!0:K(t)?K(e)&&t.length===e.length?Gve(t,e):!1:ge(t)&&ge(e)?Rq(t,e):!1}function Gve(t,e){for(let i=0,r=t.length;i<r;++i)if(!Tq(t[i],e[i]))return!1;return!0}function Rq(t,e){for(let i in t)if(!Tq(t[i],e[i]))return!1;return!0}function Cq(t){return e=>Rq(t,e)}function Xve(t,e,i,r,n,s){let o=this.context.dataflow,a=this.context.data[t],l=a.input,u=o.stamp(),c=a.changes,h,d;if(o._trigger===!1||!(l.value.length||e||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=o.changeset(),c.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,c).run()},!0,1)),i&&(h=i===!0?yr:K(i)||tf(i)?i:Cq(i),c.remove(h)),e&&c.insert(e),r&&(h=Cq(r),l.value.some(h)?c.remove(h):c.insert(r)),n)for(d in s)c.modify(n,d,s[d]);return 1}function Yve(t){let e=t.touches,i=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.hypot(i,r)}function Kve(t){let e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}var Sq={};function Jve(t,e){let i=Sq[e]||(Sq[e]=Mr(e));return K(t)?t.map(i):i(t)}function X4(t){return K(t)||ArrayBuffer.isView(t)?t:null}function zD(t){return X4(t)||(fe(t)?t:null)}function Zve(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return X4(t).join(...i)}function Qve(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return zD(t).indexOf(...i)}function eye(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return zD(t).lastIndexOf(...i)}function tye(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return zD(t).slice(...i)}function iye(t,e,i){return Je(i)&&te("Function argument passed to replace."),!fe(e)&&!f2(e)&&te("Please pass a string or RegExp argument to replace."),String(t).replace(e,i)}function rye(t){return X4(t).slice().reverse()}function nye(t){return X4(t).slice().sort(Au)}function sye(t,e,i){return Qb(t||0,e||0,i||0)}function oye(t,e){let i=$l(t,(e||this).context);return i&&i.bandwidth?i.bandwidth():0}function aye(t,e){let i=$l(t,(e||this).context);return i?i.copy():void 0}function lye(t,e){let i=$l(t,(e||this).context);return i?i.domain():[]}function uye(t,e,i){let r=$l(t,(i||this).context);return r?K(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}function cye(t,e){let i=$l(t,(e||this).context);return i&&i.range?i.range():[]}function hye(t,e,i){let r=$l(t,(i||this).context);return r?r(e):void 0}function dye(t,e,i,r,n){t=$l(t,(n||this).context);let s=YA(e,i),o=t.domain(),a=o[0],l=ht(o),u=$i;return l-a?u=Z_(t,a,l):t=(t.interpolator?St("sequential")().interpolator(t.interpolator()):St("linear")().interpolate(t.interpolate()).range(t.range())).domain([a=0,l=1]),t.ticks&&(o=t.ticks(+r||15),a!==o[0]&&o.unshift(a),l!==ht(o)&&o.push(l)),o.forEach(c=>s.stop(u(c),t(c))),s}function fye(t,e,i){let r=$l(t,(i||this).context);return function(n){return r?r.path.context(n)(e):""}}function pye(t){let e=null;return function(i){return i?N0(i,e=e||kf(t)):t}}var Dq=t=>t.data;function Mq(t,e){let i=Eq.call(e,t);return i.root&&i.root.lookup||{}}function mye(t,e,i){let r=Mq(t,this),n=r[e],s=r[i];return n&&s?n.path(s).map(Dq):void 0}function gye(t,e){let i=Mq(t,this)[e];return i?i.ancestors().map(Dq):void 0}var Fq=()=>typeof window<"u"&&window||null;function bye(){let t=Fq();return t?t.screen:{}}function vye(){let t=Fq();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function yye(){let t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function Lq(t,e,i){if(!t)return[];let[r,n]=t,s=new Hi().set(r[0],r[1],n[0],n[1]),o=i||this.context.dataflow.scenegraph().root;return y9(o,s,xye(e))}function xye(t){let e=null;if(t){let i=ve(t.marktype),r=ve(t.markname);e=n=>(!i.length||i.some(s=>n.marktype===s))&&(!r.length||r.some(s=>n.name===s))}return e}function wye(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;t=ve(t);let n=t[t.length-1];return n===void 0||Math.hypot(n[0]-e,n[1]-i)>r?[...t,[e,i]]:t}function _ye(t){return ve(t).reduce((e,i,r)=>{let[n,s]=i;return e+=r==0?`M ${n},${s} `:r===t.length-1?" Z":`L ${n},${s} `},"")}function Cye(t,e,i){let{x:r,y:n,mark:s}=i,o=new Hi().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let[l,u]of e)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,n),Lq([[o.x1,o.y1],[o.x2,o.y2]],t,s).filter(l=>Sye(l.x,l.y,e))}function Sye(t,e,i){let r=0;for(let n=0,s=i.length-1;n<i.length;s=n++){let[o,a]=i[s],[l,u]=i[n];u>e!=a>e&&t<(o-l)*(e-u)/(a-u)+l&&r++}return r&1}var vm={random(){return is()},cumulativeNormal:Cb,cumulativeLogNormal:K2,cumulativeUniform:e_,densityNormal:j2,densityLogNormal:Y2,densityUniform:Q2,quantileNormal:Sb,quantileLogNormal:J2,quantileUniform:t_,sampleNormal:_b,sampleLogNormal:X2,sampleUniform:Z2,isArray:K,isBoolean:Ss,isDate:ba,isDefined(t){return t!==void 0},isNumber:ct,isObject:ge,isRegExp:f2,isString:fe,isTuple:tf,isValid(t){return t!=null&&t===t},toBoolean:j1,toDate(t){return q1(t)},toNumber:Ki,toString:G1,indexof:Qve,join:Zve,lastindexof:eye,replace:iye,reverse:rye,sort:nye,slice:tye,flush:wk,lerp:Ck,merge:qve,pad:kk,peek:ht,pluck:Jve,span:Tu,inrange:th,truncate:Ak,rgb:zo,lab:yh,hcl:ff,hsl:df,luminance:MD,contrast:jve,sequence:Ji,format:Eve,utcFormat:kve,utcParse:Tve,utcOffset:f7,utcSequence:m7,timeFormat:kq,timeParse:Ave,timeOffset:d7,timeSequence:p7,timeUnitSpecifier:n7,monthFormat:Rve,monthAbbrevFormat:Dve,dayFormat:Mve,dayAbbrevFormat:Fve,quarter:bk,utcquarter:vk,week:a7,utcweek:u7,dayofyear:o7,utcdayofyear:l7,warn:Uve,info:Wve,debug:Vve,extent(t){return Kn(t)},inScope:Hve,intersect:Lq,clampRange:yk,pinchDistance:Yve,pinchAngle:Kve,screen:bye,containerSize:yye,windowSize:vye,bandspace:sye,setdata:Cve,pathShape:pye,panLinear:fk,panLog:pk,panPow:mk,panSymlog:gk,zoomLinear:N1,zoomLog:$1,zoomPow:n0,zoomSymlog:H1,encode:Sve,modify:Xve,lassoAppend:wye,lassoPath:_ye,intersectLasso:Cye},Eye=["view","item","group","xy","x","y"],kye="event.vega.",Oq="this.",ID={},Pq={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${pe(Aq+t)}]`,functions:Aye,constants:ED,visitors:ID},FD=W4(Pq);function Aye(t){let e=kD(t);Eye.forEach(i=>e[i]=kye+i);for(let i in vm)e[i]=Oq+i;return Ze(e,zve(t,vm,ID)),e}function ji(t,e,i){return arguments.length===1?vm[t]:(vm[t]=e,i&&(ID[t]=i),FD&&(FD.functions[t]=Oq+t),this)}ji("bandwidth",oye,ds);ji("copy",aye,ds);ji("domain",lye,ds);ji("range",cye,ds);ji("invert",uye,ds);ji("scale",hye,ds);ji("gradient",dye,ds);ji("geoArea",Ive,ds);ji("geoBounds",Bve,ds);ji("geoCentroid",Nve,ds);ji("geoShape",fye,ds);ji("geoScale",$ve,ds);ji("indata",_ve,Pve);ji("data",Eq,LD);ji("treePath",mye,LD);ji("treeAncestors",gye,LD);ji("vlSelectionTest",bq,j4);ji("vlSelectionIdTest",yq,j4);ji("vlSelectionResolve",wq,j4);ji("vlSelectionTuples",xq);function Pa(t,e){let i={},r;try{t=fe(t)?t:pe(t)+"",r=U4(t)}catch{te("Expression parse error: "+t)}r.visit(s=>{if(s.type!==wD)return;let o=s.callee.name,a=Pq.visitors[o];a&&a(o,s.arguments,e,i)});let n=FD(r);return n.globals.forEach(s=>{let o=Aq+s;!_e(i,o)&&e.getSignal(s)&&(i[o]=e.signalRef(s))}),{$expr:Ze({code:n.code},e.options.ast?{ast:r}:null),$fields:n.fields,$params:i}}function Tye(t){let e=this,i=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),i.forEach(r=>e.parseOperator(r)),i.forEach(r=>e.parseOperatorParameters(r)),(t.streams||[]).forEach(r=>e.parseStream(r)),(t.updates||[]).forEach(r=>e.parseUpdate(r)),e.resolve()}var Rye=or(["rule"]),zq=or(["group","image","rect"]);function Dye(t,e){let i="";return Rye[e]||(t.x2&&(t.x?(zq[e]&&(i+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),i+="o.width=o.x2-o.x;"):i+="o.x=o.x2-(o.width||0);"),t.xc&&(i+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(zq[e]&&(i+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),i+="o.height=o.y2-o.y;"):i+="o.y=o.y2-(o.height||0);"),t.yc&&(i+="o.y=o.yc-(o.height||0)/2;")),i}function BD(t){return(t+"").toLowerCase()}function Mye(t){return BD(t)==="operator"}function Fye(t){return BD(t)==="collect"}function ky(t,e,i){i.endsWith(";")||(i="return("+i+");");let r=Function(...e.concat(i));return t&&t.functions?r.bind(t.functions):r}function Lye(t,e,i,r){return`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${i}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${i}
  : v !== v && u === u ? ${r} : `}var Oye={operator:(t,e)=>ky(t,["_"],e.code),parameter:(t,e)=>ky(t,["datum","_"],e.code),event:(t,e)=>ky(t,["event"],e.code),handler:(t,e)=>{let i=`var datum=event.item&&event.item.datum;return ${e.code};`;return ky(t,["_","event"],i)},encode:(t,e)=>{let{marktype:i,channels:r}=e,n="var o=item,datum=o.datum,m=0,$;";for(let s in r){let o="o["+pe(s)+"]";n+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return n+=Dye(r,i),n+="return m;",ky(t,["item","_"],n)},codegen:{get(t){let e=`[${t.map(pe).join("][")}]`,i=Function("_",`return _${e};`);return i.path=e,i},comparator(t,e){let i,r=(s,o)=>{let a=e[o],l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((i=i||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),Lye(l,u,-a,a)},n=Function("a","b","var u, v; return "+t.map(r).join("")+"0;");return i?n.bind(i):n}}};function Pye(t){let e=this;Mye(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function zye(t){let e=this;if(t.params){let i=e.get(t.id);i||te("Invalid operator id: "+t.id),e.dataflow.connect(i,i.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function Iye(t,e){e=e||{};let i=this;for(let r in t){let n=t[r];e[r]=K(n)?n.map(s=>Iq(s,i,e)):Iq(n,i,e)}return e}function Iq(t,e,i){if(!t||!ge(t))return t;for(let r=0,n=Bq.length,s;r<n;++r)if(s=Bq[r],_e(t,s.key))return s.parse(t,e,i);return t}var Bq=[{key:"$ref",parse:Bye},{key:"$key",parse:$ye},{key:"$expr",parse:Nye},{key:"$field",parse:Hye},{key:"$encode",parse:Wye},{key:"$compare",parse:Uye},{key:"$context",parse:Vye},{key:"$subflow",parse:jye},{key:"$tupleid",parse:qye}];function Bye(t,e){return e.get(t.$ref)||te("Operator not defined: "+t.$ref)}function Nye(t,e,i){t.$params&&e.parseParameters(t.$params,i);let r="e:"+t.$expr.code;return e.fn[r]||(e.fn[r]=wn(e.parameterExpression(t.$expr),t.$fields))}function $ye(t,e){let i="k:"+t.$key+"_"+!!t.$flat;return e.fn[i]||(e.fn[i]=V1(t.$key,t.$flat,e.expr.codegen))}function Hye(t,e){if(!t.$field)return null;let i="f:"+t.$field+"_"+t.$name;return e.fn[i]||(e.fn[i]=Mr(t.$field,t.$name,e.expr.codegen))}function Uye(t,e){let i="c:"+t.$compare+"_"+t.$order,r=ve(t.$compare).map(n=>n&&n.$tupleid?Ve:n);return e.fn[i]||(e.fn[i]=U1(r,t.$order,e.expr.codegen))}function Wye(t,e){let i=t.$encode,r={};for(let n in i){let s=i[n];r[n]=wn(e.encodeExpression(s.$expr),s.$fields),r[n].output=s.$output}return r}function Vye(t,e){return e}function jye(t,e){let i=t.$subflow;return function(r,n,s){let o=e.fork().parse(i),a=o.get(i.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>e.detach(o),a}}function qye(){return Ve}function Gye(t){var e=this,i=t.filter!=null?e.eventExpression(t.filter):void 0,r=t.stream!=null?e.get(t.stream):void 0,n;t.source?r=e.events(t.source,t.type,i):t.merge&&(n=t.merge.map(s=>e.get(s)),r=n[0].merge.apply(n[0],n.slice(1))),t.between&&(n=t.between.map(s=>e.get(s)),r=r.between(n[0],n[1])),t.filter&&(r=r.filter(i)),t.throttle!=null&&(r=r.throttle(+t.throttle)),t.debounce!=null&&(r=r.debounce(+t.debounce)),r==null&&te("Invalid stream definition: "+JSON.stringify(t)),t.consume&&r.consume(!0),e.stream(t,r)}function Xye(t){var e=this,i=ge(i=t.source)?i.$ref:i,r=e.get(i),n=null,s=t.update,o=void 0;r||te("Source not defined: "+t.source),n=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),s&&s.$expr&&(s.$params&&(o=e.parseParameters(s.$params)),s=e.handlerExpression(s.$expr)),e.update(t,r,n,s,o)}var Yye={skip:!0};function Kye(t){var e=this,i={};if(t.signals){var r=i.signals={};Object.keys(e.signals).forEach(s=>{let o=e.signals[s];t.signals(s,o)&&(r[s]=o.value)})}if(t.data){var n=i.data={};Object.keys(e.data).forEach(s=>{let o=e.data[s];t.data(s,o)&&(n[s]=o.input.value)})}return e.subcontext&&t.recurse!==!1&&(i.subcontext=e.subcontext.map(s=>s.getState(t))),i}function Jye(t){var e=this,i=e.dataflow,r=t.data,n=t.signals;Object.keys(n||{}).forEach(s=>{i.update(e.signals[s],n[s],Yye)}),Object.keys(r||{}).forEach(s=>{i.pulse(e.data[s].input,i.changeset().remove(yr).insert(r[s]))}),(t.subcontext||[]).forEach((s,o)=>{let a=e.subcontext[o];a&&a.setState(s)})}function Y4(t,e,i,r){return new $q(t,e,i,r)}function $q(t,e,i,r){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=r||Oye,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},i&&(this.functions=Object.create(i),this.functions.context=this)}function Nq(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}$q.prototype=Nq.prototype={fork(){let t=new Nq(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(i=>i!==t);let e=Object.keys(t.nodes);for(let i of e)t.nodes[i]._targets=null;for(let i of e)t.nodes[i].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){let i=this,r=i.dataflow,n=t.value;if(i.set(t.id,e),Fye(t.type)&&n&&(n.$ingest?r.ingest(e,n.$ingest,n.$format):n.$request?r.preload(e,n.$request,n.$format):r.pulse(e,r.changeset().insert(n))),t.root&&(i.root=e),t.parent){let s=i.get(t.parent.$ref);s?(r.connect(s,[e]),e.targets().add(s)):(i.unresolved=i.unresolved||[]).push(()=>{s=i.get(t.parent.$ref),r.connect(s,[e]),e.targets().add(s)})}if(t.signal&&(i.signals[t.signal]=e),t.scale&&(i.scales[t.scale]=e),t.data)for(let s in t.data){let o=i.data[s]||(i.data[s]={});t.data[s].forEach(a=>o[a]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[BD(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,i,r,n){this.dataflow.on(e,i,r,n,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:Tye,parseOperator:Pye,parseOperatorParameters:zye,parseParameters:Iye,parseStream:Gye,parseUpdate:Xye,getState:Kye,setState:Jye};function Zye(t){let e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),Yq(e,t.description()))}function Yq(t,e){t&&(e==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function Qye(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}var ND="default";function exe(t){let e=t._signals.cursor||(t._signals.cursor=t.add({user:ND,item:null}));t.on(t.events("view","pointermove"),e,(i,r)=>{let n=e.value,s=n?fe(n)?n:n.user:ND,o=r.item&&r.item.cursor||null;return n&&s===n.user&&o==n.item?n:{user:s,item:o}}),t.add(null,function(i){let r=i.cursor,n=this.value;return fe(r)||(n=r.item,r=r.user),HD(t,r&&r!==ND?r:n||r),n},{cursor:e})}function HD(t,e){let i=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(i)return e==null?i.style.removeProperty("cursor"):i.style.cursor=e}function Z4(t,e){var i=t._runtime.data;return _e(i,e)||te("Unrecognized data set: "+e),i[e]}function txe(t,e){return arguments.length<2?Z4(this,t).values.value:e5.call(this,t,Bu().remove(yr).insert(e))}function e5(t,e){D7(e)||te("Second argument to changes must be a changeset.");let i=Z4(this,t);return i.modified=!0,this.pulse(i.input,e)}function ixe(t,e){return e5.call(this,t,Bu().insert(e))}function rxe(t,e){return e5.call(this,t,Bu().remove(e))}function Kq(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function Jq(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function t5(t){var e=t.padding(),i=t._origin;return[e.left+i[0],e.top+i[1]]}function nxe(t){var e=t5(t),i=Kq(t),r=Jq(t);t._renderer.background(t.background()),t._renderer.resize(i,r,e),t._handler.origin(e),t._resizeListeners.forEach(n=>{try{n(i,r)}catch(s){t.error(s)}})}function sxe(t,e,i){var r=t._renderer,n=r&&r.canvas(),s,o,a;return n&&(a=t5(t),o=e.changedTouches?e.changedTouches[0]:e,s=Dv(o,n),s[0]-=a[0],s[1]-=a[1]),e.dataflow=t,e.item=i,e.vega=oxe(t,i,s),e}function oxe(t,e,i){let r=e?e.mark.marktype==="group"?e:e.mark.group:null;function n(o){var a=r,l;if(o){for(l=e;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return i;fe(o)&&(o=n(o));let a=i.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:wi(t),item:wi(e||{}),group:n,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}var Hq="view",axe="timer",lxe="window",uxe={trap:!1};function cxe(t){let e=Ze({defaults:{}},t),i=(r,n)=>{n.forEach(s=>{K(r[s])&&(r[s]=or(r[s]))})};return i(e.defaults,["prevent","allow"]),i(e,["view","window","selector"]),e}function Zq(t,e,i,r){t._eventListeners.push({type:i,sources:ve(e),handler:r})}function hxe(t,e){var i=t._eventConfig.defaults,r=i.prevent,n=i.allow;return r===!1||n===!0?!1:r===!0||n===!1?!0:r?r[e]:n?!n[e]:t.preventDefault()}function K4(t,e,i){let r=t._eventConfig&&t._eventConfig[e];return r===!1||ge(r)&&!r[i]?(t.warn(`Blocked ${e} ${i} event listener.`),!1):!0}function dxe(t,e,i){var r=this,n=new y0(i),s=function(u,c){r.runAsync(null,()=>{t===Hq&&hxe(r,e)&&u.preventDefault(),n.receive(sxe(r,u,c))})},o;if(t===axe)K4(r,"timer",e)&&r.timer(s,e);else if(t===Hq)K4(r,"view",e)&&r.addEventListener(e,s,uxe);else if(t===lxe?K4(r,"window",e)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&K4(r,"selector",e)&&(o=Array.from(document.querySelectorAll(t))),!o)r.warn("Can not resolve event source: "+t);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(e,s);Zq(r,o,e,s)}return n}function Uq(t){return t.item}function Wq(t){return t.item.mark.source}function Vq(t){return function(e,i){return i.vega.view().changeset().encode(i.item,t)}}function fxe(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","pointerover",Uq),Wq,Vq(t)),this.on(this.events("view","pointerout",Uq),Wq,Vq(e)),this}function pxe(){var t=this._tooltip,e=this._timers,i=this._handler.handlers(),r=this._eventListeners,n,s,o,a,l;for(n=e.length;--n>=0;)e[n].stop();for(n=r.length;--n>=0;)for(o=r[n],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(t&&t.call(this,this._handler,null,null,null),n=i.length;--n>=0;)l=i[n].type,a=i[n].handler,this._handler.off(l,a);return this}function ao(t,e,i){let r=document.createElement(t);for(let n in e)r.setAttribute(n,e[n]);return i!=null&&(r.textContent=i),r}var mxe="vega-bind",gxe="vega-bind-name",bxe="vega-bind-radio";function vxe(t,e,i){if(!e)return;let r=i.param,n=i.state;return n||(n=i.state={elements:null,active:!1,set:null,update:o=>{o!=t.signal(r.signal)&&t.runAsync(null,()=>{n.source=!0,t.signal(r.signal,o)})}},r.debounce&&(n.update=W1(r.debounce,n.update))),(r.input==null&&r.element?yxe:wxe)(n,e,r,t),n.active||(t.on(t._signals[r.signal],null,()=>{n.source?n.source=!1:n.set(t.signal(r.signal))}),n.active=!0),n}function yxe(t,e,i,r){let n=i.event||"input",s=()=>t.update(e.value);r.signal(i.signal,e.value),e.addEventListener(n,s),Zq(r,e,n,s),t.set=o=>{e.value=o,e.dispatchEvent(xxe(n))}}function xxe(t){return typeof Event<"u"?new Event(t):{type:t}}function wxe(t,e,i,r){let n=r.signal(i.signal),s=ao("div",{class:mxe}),o=i.input==="radio"?s:s.appendChild(ao("label"));o.appendChild(ao("span",{class:gxe},i.name||i.signal)),e.appendChild(s);let a=_xe;switch(i.input){case"checkbox":a=Cxe;break;case"select":a=Sxe;break;case"radio":a=Exe;break;case"range":a=kxe;break}a(t,o,i,n)}function _xe(t,e,i,r){let n=ao("input");for(let s in i)s!=="signal"&&s!=="element"&&n.setAttribute(s==="input"?"type":s,i[s]);n.setAttribute("name",i.signal),n.value=r,e.appendChild(n),n.addEventListener("input",()=>t.update(n.value)),t.elements=[n],t.set=s=>n.value=s}function Cxe(t,e,i,r){let n={type:"checkbox",name:i.signal};r&&(n.checked=!0);let s=ao("input",n);e.appendChild(s),s.addEventListener("change",()=>t.update(s.checked)),t.elements=[s],t.set=o=>s.checked=!!o||null}function Sxe(t,e,i,r){let n=ao("select",{name:i.signal}),s=i.labels||[];i.options.forEach((o,a)=>{let l={value:o};Q4(o,r)&&(l.selected=!0),n.appendChild(ao("option",l,(s[a]||o)+""))}),e.appendChild(n),n.addEventListener("change",()=>{t.update(i.options[n.selectedIndex])}),t.elements=[n],t.set=o=>{for(let a=0,l=i.options.length;a<l;++a)if(Q4(i.options[a],o)){n.selectedIndex=a;return}}}function Exe(t,e,i,r){let n=ao("span",{class:bxe}),s=i.labels||[];e.appendChild(n),t.elements=i.options.map((o,a)=>{let l={type:"radio",name:i.signal,value:o};Q4(o,r)&&(l.checked=!0);let u=ao("input",l);u.addEventListener("change",()=>t.update(o));let c=ao("label",{},(s[a]||o)+"");return c.prepend(u),n.appendChild(c),u}),t.set=o=>{let a=t.elements,l=a.length;for(let u=0;u<l;++u)Q4(a[u].value,o)&&(a[u].checked=!0)}}function kxe(t,e,i,r){r=r!==void 0?r:(+i.max+ +i.min)/2;let n=i.max!=null?i.max:Math.max(100,+r)||100,s=i.min||Math.min(0,n,+r)||0,o=i.step||Jn(s,n,100),a=ao("input",{type:"range",name:i.signal,min:s,max:n,step:o});a.value=r;let l=ao("span",{},+r);e.appendChild(a),e.appendChild(l);let u=()=>{l.textContent=a.value,t.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),t.elements=[a],t.set=c=>{a.value=c,l.textContent=c}}function Q4(t,e){return t===e||t+""==e+""}function Qq(t,e,i,r,n,s){return e=e||new r(t.loader()),e.initialize(i,Kq(t),Jq(t),t5(t),n,s).background(t.background())}function UD(t,e){return e?function(){try{e.apply(this,arguments)}catch(i){t.error(i)}}:null}function Axe(t,e,i,r){let n=new r(t.loader(),UD(t,t.tooltip())).scene(t.scenegraph().root).initialize(i,t5(t),t);return e&&e.handlers().forEach(s=>{n.on(s.type,s.handler)}),n}function Txe(t,e){let i=this,r=i._renderType,n=i._eventConfig.bind,s=Mv(r);t=i._el=t?$D(i,t,!0):null,Zye(i),s||i.error("Unrecognized renderer type: "+r);let o=s.handler||Fh,a=t?s.renderer:s.headless;return i._renderer=a?Qq(i,i._renderer,t,a):null,i._handler=Axe(i,i._handler,t,o),i._redraw=!0,t&&n!=="none"&&(e=e?i._elBind=$D(i,e,!0):t.appendChild(ao("form",{class:"vega-bindings"})),i._bind.forEach(l=>{l.param.element&&n!=="container"&&(l.element=$D(i,l.param.element,!!l.param.input))}),i._bind.forEach(l=>{vxe(i,l.element||e,l)})),i}function $D(t,e,i){if(typeof e=="string")if(typeof document<"u"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e&&i)try{e.textContent=""}catch(r){e=null,t.error(r)}return e}var Ay=t=>+t||0,Rxe=t=>({top:t,bottom:t,left:t,right:t});function jq(t){return ge(t)?{top:Ay(t.top),bottom:Ay(t.bottom),left:Ay(t.left),right:Ay(t.right)}:Rxe(Ay(t))}async function WD(t,e,i,r){let n=Mv(e),s=n&&n.headless;return s||te("Unrecognized renderer type: "+e),await t.runAsync(),Qq(t,null,null,s,i,r).renderAsync(t._scenegraph.root)}async function Dxe(t,e){t!==ju.Canvas&&t!==ju.SVG&&t!==ju.PNG&&te("Unrecognized image type: "+t);let i=await WD(this,t,e);return t===ju.SVG?Mxe(i.svg(),"image/svg+xml"):i.canvas().toDataURL("image/png")}function Mxe(t,e){let i=new Blob([t],{type:e});return window.URL.createObjectURL(i)}async function Fxe(t,e){return(await WD(this,ju.Canvas,t,e)).canvas()}async function Lxe(t){return(await WD(this,ju.SVG,t)).svg()}function Oxe(t,e,i){return Y4(t,Iu,vm,i).parse(e)}function Pxe(t){var e=this._runtime.scales;return _e(e,t)||te("Unrecognized scale or projection: "+t),e[t].value}var eG="width",tG="height",VD="padding",qq={skip:!0};function iG(t,e){var i=t.autosize(),r=t.padding();return e-(i&&i.contains===VD?r.left+r.right:0)}function rG(t,e){var i=t.autosize(),r=t.padding();return e-(i&&i.contains===VD?r.top+r.bottom:0)}function zxe(t){var e=t._signals,i=e[eG],r=e[tG],n=e[VD];function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,a=>{t._width=a.size,t._viewWidth=iG(t,a.size),s()},{size:i}),t._resizeHeight=t.add(null,a=>{t._height=a.size,t._viewHeight=rG(t,a.size),s()},{size:r});let o=t.add(null,s,{pad:n});t._resizeWidth.rank=i.rank+1,t._resizeHeight.rank=r.rank+1,o.rank=n.rank+1}function Ixe(t,e,i,r,n,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==i&&(a=1,o.signal(eG,i,qq),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(tG,r,qq),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),(o._origin[0]!==n[0]||o._origin[1]!==n[1])&&(o._resize=1,o._origin=n),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function Bxe(t){return this._runtime.getState(t||{data:Nxe,signals:$xe,recurse:!0})}function Nxe(t,e){return e.modified&&K(e.input.value)&&!t.startsWith("_:vega:_")}function $xe(t,e){return!(t==="parent"||e instanceof Iu.proxy)}function Hxe(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},e=>{e._trigger=!0}),this}function Uxe(t,e){function i(r){t({timestamp:Date.now(),elapsed:r})}this._timers.push(aR(i,e))}function Wxe(t,e,i,r){let n=t.element();n&&n.setAttribute("title",Vxe(r))}function Vxe(t){return t==null?"":K(t)?nG(t):ge(t)&&!ba(t)?jxe(t):t+""}function jxe(t){return Object.keys(t).map(e=>{let i=t[e];return e+": "+(K(i)?nG(i):sG(i))}).join(`
`)}function nG(t){return"["+t.map(sG).join(", ")+"]"}function sG(t){return K(t)?"[\u2026]":ge(t)&&!ba(t)?"{\u2026}":t}function qxe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let t=null,e=()=>{t?.();let i=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);i.addEventListener("change",e),t=()=>{i.removeEventListener("change",e)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};e()}}function jD(t,e){let i=this;if(e=e||{},hh.call(i),e.loader&&i.loader(e.loader),e.logger&&i.logger(e.logger),e.logLevel!=null&&i.logLevel(e.logLevel),e.locale||t.locale){let s=Ze({},t.locale,e.locale);i.locale(M2(s.number,s.time))}i._el=null,i._elBind=null,i._renderType=e.renderer||ju.Canvas,i._scenegraph=new bv;let r=i._scenegraph.root;i._renderer=null,i._tooltip=e.tooltip||Wxe,i._redraw=!0,i._handler=new Fh().scene(r),i._globalCursor=!1,i._preventDefault=!1,i._timers=[],i._eventListeners=[],i._resizeListeners=[],i._eventConfig=cxe(t.eventConfig),i.globalCursor(i._eventConfig.globalCursor);let n=Oxe(i,t,e.expr);i._runtime=n,i._signals=n.signals,i._bind=(t.bindings||[]).map(s=>({state:null,param:Ze({},s)})),n.root&&n.root.set(r),r.source=n.data.root.input,i.pulse(n.data.root.input,i.changeset().insert(r.items)),i._width=i.width(),i._height=i.height(),i._viewWidth=iG(i,i._width),i._viewHeight=rG(i,i._height),i._origin=[0,0],i._resize=0,i._autosize=1,zxe(i),Qye(i),exe(i),i.description(t.description),e.hover&&i.hover(),e.container&&i.initialize(e.container,e.bind),e.watchPixelRatio&&i._watchPixelRatio()}function J4(t,e){return _e(t._signals,e)?t._signals[e]:te("Unrecognized signal name: "+pe(e))}function oG(t,e){let i=(t._targets||[]).filter(r=>r._update&&r._update.handler===e);return i.length?i[0]:null}function Gq(t,e,i,r){let n=oG(i,r);return n||(n=UD(t,()=>r(e,i.value)),n.handler=r,t.on(i,null,n)),t}function Xq(t,e,i){let r=oG(e,i);return r&&e._targets.remove(r),t}we(jD,hh,{async evaluate(t,e,i){if(await hh.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,nxe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return i&&yb(this,i),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){let e=t!=null?t+"":null;return e!==this._desc&&Yq(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,i){let r=J4(this,t);return arguments.length===1?r.value:this.update(r,e,i)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",jq(t)):jq(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(Mv(t)||te("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(hh.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(J4(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Ixe,addEventListener(t,e,i){let r=e;return i&&i.trap===!1||(r=UD(this,e),r.raw=e),this._handler.on(t,r),this},removeEventListener(t,e){for(var i=this._handler.handlers(t),r=i.length,n,s;--r>=0;)if(s=i[r].type,n=i[r].handler,t===s&&(e===n||e===n.raw)){this._handler.off(s,n);break}return this},addResizeListener(t){let e=this._resizeListeners;return e.includes(t)||e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,i=e.indexOf(t);return i>=0&&e.splice(i,1),this},addSignalListener(t,e){return Gq(this,t,J4(this,t),e)},removeSignalListener(t,e){return Xq(this,J4(this,t),e)},addDataListener(t,e){return Gq(this,t,Z4(this,t).values,e)},removeDataListener(t,e){return Xq(this,Z4(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){let e=HD(this,null);this._globalCursor=!!t,e&&HD(this,e)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:Uxe,events:dxe,finalize:pxe,hover:fxe,data:txe,change:e5,insert:ixe,remove:rxe,scale:Pxe,initialize:Txe,toImageURL:Dxe,toCanvas:Fxe,toSVG:Lxe,getState:Bxe,setState:Hxe,_watchPixelRatio:qxe});var Gxe="view";var Xxe=/[[\]{}]/,Yxe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},aG,lG;function Mn(t,e,i){return aG=e||Gxe,lG=i||Yxe,uG(t.trim()).map(qD)}function Kxe(t){return lG[t]}function Ty(t,e,i,r,n){let s=t.length,o=0,a;for(;e<s;++e){if(a=t[e],!o&&a===i)return e;n&&n.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return e}function uG(t){let e=[],i=t.length,r=0,n=0;for(;n<i;)n=Ty(t,n,",","[{","]}"),e.push(t.substring(r,n).trim()),r=++n;if(e.length===0)throw"Empty event selector: "+t;return e}function qD(t){return t[0]==="["?Jxe(t):Zxe(t)}function Jxe(t){let e=t.length,i=1,r;if(i=Ty(t,i,"]","[","]"),i===e)throw"Empty between selector: "+t;if(r=uG(t.substring(1,i)),r.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(i+1).trim(),t[0]!==">")throw"Expected '>' after between selector: "+t;r=r.map(qD);let n=qD(t.slice(1).trim());return n.between?{between:r,stream:n}:(n.between=r,n)}function Zxe(t){let e={source:aG},i=[],r=[0,0],n=0,s=0,o=t.length,a=0,l,u;if(t[o-1]==="}"){if(a=t.lastIndexOf("{"),a>=0){try{r=Qxe(t.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,a).trim(),o=t.length}else throw"Unmatched right brace: "+t;a=0}if(!o)throw t;if(t[0]==="@"&&(n=++a),l=Ty(t,a,":"),l<o&&(i.push(t.substring(s,l).trim()),s=a=++l),a=Ty(t,a,"["),a===o)i.push(t.substring(s,o).trim());else if(i.push(t.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+t;for(;a<o;){if(a=Ty(t,a,"]"),a===o)throw"Unmatched left bracket: "+t;if(u.push(t.substring(s,a).trim()),a<o-1&&t[++a]!=="[")throw"Expected left bracket: "+t;s=++a}if(!(o=i.length)||Xxe.test(i[o-1]))throw"Invalid event selector: "+t;return o>1?(e.type=i[1],n?e.markname=i[0].slice(1):Kxe(i[0])?e.marktype=i[0]:e.source=i[0]):e.type=i[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),u!=null&&(e.filter=u),r[0]&&(e.throttle=r[0]),r[1]&&(e.debounce=r[1]),e}function Qxe(t){let e=t.split(",");if(!t.length||e.length>2)throw t;return e.map(i=>{let r=+i;if(r!==r)throw t;return r})}function ewe(t){return ge(t)?t:{type:t||"pad"}}var Ry=t=>+t||0,twe=t=>({top:t,bottom:t,left:t,right:t});function iwe(t){return ge(t)?t.signal?t:{top:Ry(t.top),bottom:Ry(t.bottom),left:Ry(t.left),right:Ry(t.right)}:twe(Ry(t))}var Ir=t=>ge(t)&&!K(t)?Ze({},t):{value:t};function cG(t,e,i,r){return i!=null?(ge(i)&&!K(i)||K(i)&&i.length&&ge(i[0])?t.update[e]=i:t[r||"enter"][e]={value:i},1):0}function an(t,e,i){for(let r in e)cG(t,r,e[r]);for(let r in i)cG(t,r,i[r],"update")}function Sm(t,e,i){for(let r in e)i&&_e(i,r)||(t[r]=Ze(t[r]||{},e[r]));return t}function xm(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}var rM="mark",nM="frame",sM="scope",rwe="axis",nwe="axis-domain",swe="axis-grid",owe="axis-label",awe="axis-tick",lwe="axis-title",uwe="legend",cwe="legend-band",hwe="legend-entry",dwe="legend-gradient",RG="legend-label",fwe="legend-symbol",pwe="legend-title",mwe="title",gwe="title-text",bwe="title-subtitle";function vwe(t,e,i,r,n){let s={},o={},a,l,u,c;l="lineBreak",e==="text"&&n[l]!=null&&!xm(l,t)&&GD(s,l,n[l]),(i=="legend"||String(i).startsWith("axis"))&&(i=null),c=i===nM?n.group:i===rM?Ze({},n.mark,n[e]):null;for(l in c)u=xm(l,t)||(l==="fill"||l==="stroke")&&(xm("fill",t)||xm("stroke",t)),u||GD(s,l,c[l]);ve(r).forEach(h=>{let d=n.style&&n.style[h];for(let p in d)xm(p,t)||GD(s,p,d[p])}),t=Ze({},t);for(l in s)c=s[l],c.signal?(a=a||{})[l]=c:o[l]=c;return t.enter=Ze(o,t.enter),a&&(t.update=Ze(a,t.update)),t}function GD(t,e,i){t[e]=i&&i.signal?{signal:i.signal}:{value:i}}var DG=t=>fe(t)?pe(t):t.signal?`(${t.signal})`:MG(t);function u5(t){if(t.gradient!=null)return xwe(t);let e=t.signal?`(${t.signal})`:t.color?ywe(t.color):t.field!=null?MG(t.field):t.value!==void 0?pe(t.value):void 0;return t.scale!=null&&(e=wwe(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${r5(t.exponent)})`),t.mult!=null&&(e+=`*${r5(t.mult)}`),t.offset!=null&&(e+=`+${r5(t.offset)}`),t.round&&(e=`round(${e})`),e}var i5=(t,e,i,r)=>`(${t}(${[e,i,r].map(u5).join(",")})+'')`;function ywe(t){return t.c?i5("hcl",t.h,t.c,t.l):t.h||t.s?i5("hsl",t.h,t.s,t.l):t.l||t.a?i5("lab",t.l,t.a,t.b):t.r||t.g||t.b?i5("rgb",t.r,t.g,t.b):null}function xwe(t){let e=[t.start,t.stop,t.count].map(i=>i==null?null:pe(i));for(;e.length&&ht(e)==null;)e.pop();return e.unshift(DG(t.gradient)),`gradient(${e.join(",")})`}function r5(t){return ge(t)?"("+u5(t)+")":t}function MG(t){return FG(ge(t)?t:{datum:t})}function FG(t){let e,i,r;if(t.signal)e="datum",r=t.signal;else if(t.group||t.parent){for(i=Math.max(1,t.level||1),e="item";i-- >0;)e+=".mark.group";t.parent?(r=t.parent,e+=".datum"):r=t.group}else t.datum?(e="datum",r=t.datum):te("Invalid field reference: "+pe(t));return t.signal||(r=fe(r)?To(r).map(pe).join("]["):FG(r)),e+"["+r+"]"}function wwe(t,e){let i=DG(t.scale);return t.range!=null?e=`lerp(_range(${i}), ${+t.range})`:(e!==void 0&&(e=`_scale(${i}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${i})`+(+t.band==1?"":"*"+r5(t.band)),t.extra&&(e=`(datum.extra ? _scale(${i}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e}function _we(t){let e="";return t.forEach(i=>{let r=u5(i);e+=i.test?`(${i.test})?${r}:`:r}),ht(e)===":"&&(e+="null"),e}function LG(t,e,i,r,n,s){let o={};s=s||{},s.encoders={$encode:o},t=vwe(t,e,i,r,n.config);for(let a in t)o[a]=Cwe(t[a],e,s,n);return s}function Cwe(t,e,i,r){let n={},s={};for(let o in t)t[o]!=null&&(n[o]=Ewe(Swe(t[o]),r,i,s));return{$expr:{marktype:e,channels:n},$fields:Object.keys(s),$output:Object.keys(t)}}function Swe(t){return K(t)?_we(t):u5(t)}function Ewe(t,e,i,r){let n=Pa(t,e);return n.$fields.forEach(s=>r[s]=1),Ze(i,n.$params),n.$expr}var kwe="outer",Awe=["value","update","init","react","bind"];function hG(t,e){te(t+' for "outer" push: '+pe(e))}function OG(t,e){let i=t.name;if(t.push===kwe)e.signals[i]||hG("No prior signal definition",i),Awe.forEach(r=>{t[r]!==void 0&&hG("Invalid property ",r)});else{let r=e.addSignal(i,t.value);t.react===!1&&(r.react=!1),t.bind&&e.addBinding(i,t.bind)}}function KD(t,e,i,r){this.id=-1,this.type=t,this.value=e,this.params=i,r&&(this.parent=r)}function c5(t,e,i,r){return new KD(t,e,i,r)}function l5(t,e){return c5("operator",t,e)}function Ye(t){let e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function Fy(t,e){return e?{$field:t,$name:e}:{$field:t}}var JD=Fy("key");function dG(t,e){return{$compare:t,$order:e}}function Twe(t,e){let i={$key:t};return e&&(i.$flat=!0),i}var Rwe="ascending",Dwe="descending";function Mwe(t){return ge(t)?(t.order===Dwe?"-":"+")+h5(t.op,t.field):""}function h5(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}var oM="scope",ZD="view";function Cr(t){return t&&t.signal}function Fwe(t){return t&&t.expr}function n5(t){if(Cr(t))return!0;if(ge(t)){for(let e in t)if(n5(t[e]))return!0}return!1}function za(t,e){return t??e}function jf(t){return t&&t.signal||t}var fG="timer";function Ly(t,e){return(t.merge?Owe:t.stream?Pwe:t.type?zwe:te("Invalid stream specification: "+pe(t)))(t,e)}function Lwe(t){return t===oM?ZD:t||ZD}function Owe(t,e){let i=t.merge.map(n=>Ly(n,e)),r=aM({merge:i},t,e);return e.addStream(r).id}function Pwe(t,e){let i=Ly(t.stream,e),r=aM({stream:i},t,e);return e.addStream(r).id}function zwe(t,e){let i;t.type===fG?(i=e.event(fG,t.throttle),t={between:t.between,filter:t.filter}):i=e.event(Lwe(t.source),t.type);let r=aM({stream:i},t,e);return Object.keys(r).length===1?i:e.addStream(r).id}function aM(t,e,i){let r=e.between;return r&&(r.length!==2&&te('Stream "between" parameter must have 2 entries: '+pe(e)),t.between=[Ly(r[0],i),Ly(r[1],i)]),r=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(Iwe(e.marktype,e.markname,e.markrole)),e.source===oM&&r.push("inScope(event.item)"),r.length&&(t.filter=Pa("("+r.join(")&&(")+")",i).$expr),(r=e.throttle)!=null&&(t.throttle=+r),(r=e.debounce)!=null&&(t.debounce=+r),e.consume&&(t.consume=!0),t}function Iwe(t,e,i){let r="event.item";return r+(t&&t!=="*"?"&&"+r+".mark.marktype==='"+t+"'":"")+(i?"&&"+r+".mark.role==='"+i+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}var Bwe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Nwe(t,e,i){let r=t.encode,n={target:i},s=t.events,o=t.update,a=[];s||te("Signal update missing events specification."),fe(s)&&(s=Mn(s,e.isSubscope()?oM:ZD)),s=ve(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[Hwe(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&te("Signal encode and update are mutually exclusive."),o="encode(item(),"+pe(r)+")"),n.update=fe(o)?Pa(o,e):o.expr!=null?Pa(o.expr,e):o.value!=null?o.value:o.signal!=null?{$expr:Bwe,$params:{$value:e.signalRef(o.signal)}}:te("Invalid signal update specification."),t.force&&(n.options={force:!0}),a.forEach(l=>e.addUpdate(Ze($we(l,e),n)))}function $we(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):Ly(t,e)}}function Hwe(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function Uwe(t,e){let i=e.getSignal(t.name),r=t.update;t.init&&(r?te("Signals can not include both init and update expressions."):(r=t.init,i.initonly=!0)),r&&(r=Pa(r,e),i.update=r.$expr,i.params=r.$params),t.on&&t.on.forEach(n=>Nwe(n,e,i.id))}var ni=t=>(e,i,r)=>c5(t,i,e||void 0,r),PG=ni("aggregate"),Wwe=ni("axisticks"),zG=ni("bound"),Ba=ni("collect"),pG=ni("compare"),Vwe=ni("datajoin"),IG=ni("encode"),jwe=ni("expression"),qwe=ni("facet"),Gwe=ni("field"),Xwe=ni("key"),Ywe=ni("legendentries"),Kwe=ni("load"),Jwe=ni("mark"),Zwe=ni("multiextent"),Qwe=ni("multivalues"),e2e=ni("overlap"),t2e=ni("params"),BG=ni("prefacet"),i2e=ni("projection"),r2e=ni("proxy"),n2e=ni("relay"),NG=ni("render"),s2e=ni("scale"),Gf=ni("sieve"),o2e=ni("sortitems"),$G=ni("viewlayout"),a2e=ni("values"),l2e=0,HG={min:"min",max:"max",count:"sum"};function u2e(t,e){let i=t.type||"linear";CA(i)||te("Unrecognized scale type: "+pe(i)),e.addScale(t.name,{type:i,domain:void 0})}function c2e(t,e){let i=e.getScale(t.name).params,r;i.domain=UG(t.domain,t,e),t.range!=null&&(i.range=VG(t,e,i)),t.interpolate!=null&&x2e(t.interpolate,i),t.nice!=null&&(i.nice=y2e(t.nice,e)),t.bins!=null&&(i.bins=v2e(t.bins,e));for(r in t)_e(i,r)||r==="name"||(i[r]=Wo(t[r],e))}function Wo(t,e){return ge(t)?t.signal?e.signalRef(t.signal):te("Unsupported object: "+pe(t)):t}function s5(t,e){return t.signal?e.signalRef(t.signal):t.map(i=>Wo(i,e))}function d5(t){te("Can not find data set: "+pe(t))}function UG(t,e,i){if(!t){(e.domainMin!=null||e.domainMax!=null)&&te("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?i.signalRef(t.signal):(K(t)?h2e:t.fields?f2e:d2e)(t,e,i)}function h2e(t,e,i){return t.map(r=>Wo(r,i))}function d2e(t,e,i){let r=i.getData(t.data);return r||d5(t.data),Ch(e.type)?r.valuesRef(i,t.field,WG(t.sort,!1)):kA(e.type)?r.domainRef(i,t.field):r.extentRef(i,t.field)}function f2e(t,e,i){let r=t.data,n=t.fields.reduce((s,o)=>(o=fe(o)?{data:r,field:o}:K(o)||o.signal?p2e(o,i):o,s.push(o),s),[]);return(Ch(e.type)?m2e:kA(e.type)?g2e:b2e)(t,i,n)}function p2e(t,e){let i="_:vega:_"+l2e++,r=Ba({});if(K(t))r.value={$ingest:t};else if(t.signal){let n="setdata("+pe(i)+","+t.signal+")";r.params.input=e.signalRef(n)}return e.addDataPipeline(i,[r,Gf({})]),{data:i,field:"data"}}function m2e(t,e,i){let r=WG(t.sort,!0),n,s,o=i.map(u=>{let c=e.getData(u.data);return c||d5(u.data),c.countsRef(e,u.field,r)}),a={groupby:JD,pulse:o};r&&(n=r.op||"count",s=r.field?h5(n,r.field):"count",a.ops=[HG[n]],a.fields=[e.fieldRef(s)],a.as=[s]),n=e.add(PG(a));let l=e.add(Ba({pulse:Ye(n)}));return s=e.add(a2e({field:JD,sort:e.sortRef(r),pulse:Ye(l)})),Ye(s)}function WG(t,e){return t&&(!t.field&&!t.op?ge(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?te("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!HG[t.op]&&te("Multiple domain scales can not be sorted using "+t.op)),t}function g2e(t,e,i){let r=i.map(n=>{let s=e.getData(n.data);return s||d5(n.data),s.domainRef(e,n.field)});return Ye(e.add(Qwe({values:r})))}function b2e(t,e,i){let r=i.map(n=>{let s=e.getData(n.data);return s||d5(n.data),s.extentRef(e,n.field)});return Ye(e.add(Zwe({extents:r})))}function v2e(t,e){return t.signal||K(t)?s5(t,e):e.objectProperty(t)}function y2e(t,e){return t.signal?e.signalRef(t.signal):ge(t)?{interval:Wo(t.interval),step:Wo(t.step)}:Wo(t)}function x2e(t,e){e.interpolate=Wo(t.type||t),t.gamma!=null&&(e.interpolateGamma=Wo(t.gamma))}function VG(t,e,i){let r=e.config.range,n=t.range;if(n.signal)return e.signalRef(n.signal);if(fe(n)){if(r&&_e(r,n))return t=Ze({},t,{range:r[n]}),VG(t,e,i);n==="width"?n=[0,{signal:"width"}]:n==="height"?n=Ch(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:te("Unrecognized scale range value: "+pe(n))}else if(n.scheme){i.scheme=K(n.scheme)?s5(n.scheme,e):Wo(n.scheme,e),n.extent&&(i.schemeExtent=s5(n.extent,e)),n.count&&(i.schemeCount=Wo(n.count,e));return}else if(n.step){i.rangeStep=Wo(n.step,e);return}else{if(Ch(t.type)&&!K(n))return UG(n,t,e);K(n)||te("Unsupported range type: "+pe(n))}return n.map(s=>(K(s)?s5:Wo)(s,e))}function w2e(t,e){let i=e.config.projection||{},r={};for(let n in t)n!=="name"&&(r[n]=QD(t[n],n,e));for(let n in i)r[n]==null&&(r[n]=QD(i[n],n,e));e.addProjection(t.name,r)}function QD(t,e,i){return K(t)?t.map(r=>QD(r,e,i)):ge(t)?t.signal?i.signalRef(t.signal):e==="fit"?t:te("Unsupported parameter object: "+pe(t)):t}var Na="top",Em="left",km="right",qh="bottom",jG="center",_2e="vertical",C2e="start",S2e="middle",E2e="end",eM="index",lM="label",k2e="offset",Cm="perc",A2e="perc2",Vo="value",Py="guide-label",uM="guide-title",T2e="group-title",R2e="group-subtitle",mG="symbol",o5="gradient",tM="discrete",iM="size",D2e="shape",M2e="fill",F2e="stroke",L2e="strokeWidth",O2e="strokeDash",P2e="opacity",cM=[iM,D2e,M2e,F2e,L2e,O2e,P2e],zy={name:1,style:1,interactive:1},Ft={value:0},jo={value:1},f5="group",qG="rect",hM="rule",z2e="symbol",Xf="text";function Oy(t){return t.type=f5,t.interactive=t.interactive||!1,t}function Os(t,e){let i=(r,n)=>za(t[r],za(e[r],n));return i.isVertical=r=>_2e===za(t.direction,e.direction||(r?e.symbolDirection:e.gradientDirection)),i.gradientLength=()=>za(t.gradientLength,e.gradientLength||e.gradientWidth),i.gradientThickness=()=>za(t.gradientThickness,e.gradientThickness||e.gradientHeight),i.entryColumns=()=>za(t.columns,za(e.columns,+i.isVertical(!0))),i}function GG(t,e){let i=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return i&&i.signal?i:i?i.value:null}function I2e(t,e,i){let r=e.config.style[i];return r&&r[t]}function p5(t,e,i){return`item.anchor === '${C2e}' ? ${t} : item.anchor === '${E2e}' ? ${e} : ${i}`}var dM=p5(pe(Em),pe(km),pe(jG));function B2e(t){let e=t("tickBand"),i=t("tickOffset"),r,n;return e?e.signal?(r={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},n={signal:`(${e.signal}) === 'extent'`},ge(i)||(i={signal:`(${e.signal}) === 'extent' ? 0 : ${i}`})):e==="extent"?(r=1,n=!0,i=0):(r=.5,n=!1):(r=t("bandPosition"),n=t("tickExtra")),{extra:n,band:r,offset:i}}function XG(t,e){return e?t?ge(t)?Object.assign({},t,{offset:XG(t.offset,e)}):{value:t,offset:e}:e:t}function lo(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=Sm(t.encode,e,zy)):t.interactive=!1,t}function N2e(t,e,i,r){let n=Os(t,i),s=n.isVertical(),o=n.gradientThickness(),a=n.gradientLength(),l,u,c,h,d;s?(u=[0,1],c=[0,0],h=o,d=a):(u=[0,0],c=[1,0],h=a,d=o);let p={enter:l={opacity:Ft,x:Ft,y:Ft,width:Ir(h),height:Ir(d)},update:Ze({},l,{opacity:jo,fill:{gradient:e,start:u,stop:c}}),exit:{opacity:Ft}};return an(p,{stroke:n("gradientStrokeColor"),strokeWidth:n("gradientStrokeWidth")},{opacity:n("gradientOpacity")}),lo({type:qG,role:dwe,encode:p},r)}function $2e(t,e,i,r,n){let s=Os(t,i),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength(),u,c,h,d,p="";o?(u="y",h="y2",c="x",d="width",p="1-"):(u="x",h="x2",c="y",d="height");let f={opacity:Ft,fill:{scale:e,field:Vo}};f[u]={signal:p+"datum."+Cm,mult:l},f[c]=Ft,f[h]={signal:p+"datum."+A2e,mult:l},f[d]=Ir(a);let m={enter:f,update:Ze({},f,{opacity:jo}),exit:{opacity:Ft}};return an(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),lo({type:qG,role:cwe,key:Vo,from:n,encode:m},r)}var H2e=`datum.${Cm}<=0?"${Em}":datum.${Cm}>=1?"${km}":"${jG}"`,U2e=`datum.${Cm}<=0?"${qh}":datum.${Cm}>=1?"${Na}":"${S2e}"`;function gG(t,e,i,r){let n=Os(t,e),s=n.isVertical(),o=Ir(n.gradientThickness()),a=n.gradientLength(),l=n("labelOverlap"),u,c,h,d,p="",f={enter:u={opacity:Ft},update:c={opacity:jo,text:{field:lM}},exit:{opacity:Ft}};return an(f,{fill:n("labelColor"),fillOpacity:n("labelOpacity"),font:n("labelFont"),fontSize:n("labelFontSize"),fontStyle:n("labelFontStyle"),fontWeight:n("labelFontWeight"),limit:za(t.labelLimit,e.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:U2e},h="y",d="x",p="1-"):(u.align=c.align={signal:H2e},u.baseline={value:"top"},h="x",d="y"),u[h]=c[h]={signal:p+"datum."+Cm,mult:a},u[d]=c[d]=o,o.offset=za(t.labelOffset,e.gradientLabelOffset)||0,l=l?{separation:n("labelSeparation"),method:l,order:"datum."+eM}:void 0,lo({type:Xf,role:RG,style:Py,key:Vo,from:r,encode:f,overlap:l},i)}function W2e(t,e,i,r,n){let s=Os(t,e),o=i.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),h={data:"value"},d=`(${n}) ? datum.${k2e} : datum.${iM}`,p=u?Ir(u):{field:iM},f=`datum.${eM}`,m=`max(1, ${n})`,g,b,v,y,x;p.mult=.5,g={enter:b={opacity:Ft,x:{signal:d,mult:.5,offset:c},y:p},update:v={opacity:jo,x:b.x,y:b.y},exit:{opacity:Ft}};let _=null,w=null;t.fill||(_=e.symbolBaseFillColor,w=e.symbolBaseStrokeColor),an(g,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",w),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),cM.forEach(D=>{t[D]&&(v[D]=b[D]={scale:t[D],field:Vo})});let C=lo({type:z2e,role:fwe,key:Vo,from:h,clip:u?!0:void 0,encode:g},i.symbols),E=Ir(c);E.offset=s("labelOffset"),g={enter:b={opacity:Ft,x:{signal:d,offset:E},y:p},update:v={opacity:jo,text:{field:lM},x:b.x,y:b.y},exit:{opacity:Ft}},an(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});let A=lo({type:Xf,role:RG,style:Py,key:Vo,from:h,encode:g},i.labels);return g={enter:{noBound:{value:!u},width:Ft,height:u?Ir(u):Ft,opacity:Ft},exit:{opacity:Ft},update:v={opacity:jo,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(y=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${f}%${y}`,v.column.signal=`floor(${f} / ${y})`,x={field:["row",f]}):(v.row.signal=`floor(${f} / ${m})`,v.column.signal=`${f} % ${m}`,x={field:f}),v.column.signal=`(${n})?${v.column.signal}:${f}`,r={facet:{data:r,name:"value",groupby:eM}},Oy({role:sM,from:r,encode:Sm(g,o,zy),marks:[C,A],name:l,interactive:a,sort:x})}function V2e(t,e){let i=Os(t,e);return{align:i("gridAlign"),columns:i.entryColumns(),center:{row:!0,column:!1},padding:{row:i("rowPadding"),column:i("columnPadding")}}}var fM='item.orient === "left"',pM='item.orient === "right"',m5=`(${fM} || ${pM})`,j2e=`datum.vgrad && ${m5}`,q2e=p5('"top"','"bottom"','"middle"'),G2e=p5('"right"','"left"','"center"'),X2e=`datum.vgrad && ${pM} ? (${G2e}) : (${m5} && !(datum.vgrad && ${fM})) ? "left" : ${dM}`,Y2e=`item._anchor || (${m5} ? "middle" : "start")`,K2e=`${j2e} ? (${fM} ? -90 : 90) : 0`,J2e=`${m5} ? (datum.vgrad ? (${pM} ? "bottom" : "top") : ${q2e}) : "top"`;function Z2e(t,e,i,r){let n=Os(t,e),s={enter:{opacity:Ft},update:{opacity:jo,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ft}};return an(s,{orient:n("titleOrient"),_anchor:n("titleAnchor"),anchor:{signal:Y2e},angle:{signal:K2e},align:{signal:X2e},baseline:{signal:J2e},text:t.title,fill:n("titleColor"),fillOpacity:n("titleOpacity"),font:n("titleFont"),fontSize:n("titleFontSize"),fontStyle:n("titleFontStyle"),fontWeight:n("titleFontWeight"),limit:n("titleLimit"),lineHeight:n("titleLineHeight")},{align:n("titleAlign"),baseline:n("titleBaseline")}),lo({type:Xf,role:pwe,style:uM,from:r,encode:s},i)}function Q2e(t,e){let i;return ge(t)&&(t.signal?i=t.signal:t.path?i="pathShape("+bG(t.path)+")":t.sphere&&(i="geoShape("+bG(t.sphere)+', {type: "Sphere"})')),i?e.signalRef(i):!!t}function bG(t){return ge(t)&&t.signal?t.signal:pe(t)}function YG(t){let e=t.role||"";return e.startsWith("axis")||e.startsWith("legend")||e.startsWith("title")?e:t.type===f5?sM:e||rM}function e_e(t){return{marktype:t.type,name:t.name||void 0,role:t.role||YG(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function t_e(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function mM(t,e){let i=H2(t.type);i||te("Unrecognized transform type: "+pe(t.type));let r=c5(i.type.toLowerCase(),null,KG(i,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=i.metadata||{},r}function KG(t,e,i){let r={},n=t.params.length;for(let s=0;s<n;++s){let o=t.params[s];r[o.name]=i_e(o,e,i)}return r}function i_e(t,e,i){let r=t.type,n=e[t.name];if(r==="index")return r_e(t,e,i);if(n===void 0){t.required&&te("Missing required "+pe(e.type)+" parameter: "+pe(t.name));return}else{if(r==="param")return n_e(t,e,i);if(r==="projection")return i.projectionRef(e[t.name])}return t.array&&!Cr(n)?n.map(s=>vG(t,s,i)):vG(t,n,i)}function vG(t,e,i){let r=t.type;if(Cr(e))return xG(r)?te("Expression references can not be signals."):XD(r)?i.fieldRef(e):wG(r)?i.compareRef(e):i.signalRef(e.signal);{let n=t.expr||XD(r);return n&&s_e(e)?i.exprRef(e.expr,e.as):n&&o_e(e)?Fy(e.field,e.as):xG(r)?Pa(e,i):a_e(r)?Ye(i.getData(e).values):XD(r)?Fy(e):wG(r)?i.compareRef(e):e}}function r_e(t,e,i){return fe(e.from)||te('Lookup "from" parameter must be a string literal.'),i.getData(e.from).lookupRef(i,e.key)}function n_e(t,e,i){let r=e[t.name];return t.array?(K(r)||te("Expected an array of sub-parameters. Instead: "+pe(r)),r.map(n=>yG(t,n,i))):yG(t,r,i)}function yG(t,e,i){let r=t.params.length,n;for(let o=0;o<r;++o){n=t.params[o];for(let a in n.key)if(n.key[a]!==e[a]){n=null;break}if(n)break}n||te("Unsupported parameter: "+pe(e));let s=Ze(KG(n,e,i),n.key);return Ye(i.add(t2e(s)))}var s_e=t=>t&&t.expr,o_e=t=>t&&t.field,a_e=t=>t==="data",xG=t=>t==="expr",XD=t=>t==="field",wG=t=>t==="compare";function l_e(t,e,i){let r,n,s,o,a;return t?(r=t.facet)&&(e||te("Only group marks can be faceted."),r.field!=null?o=a=a5(r,i):(t.data?a=Ye(i.getData(t.data).aggregate):(s=mM(Ze({type:"aggregate",groupby:ve(r.groupby)},r.aggregate),i),s.params.key=i.keyRef(r.groupby),s.params.pulse=a5(r,i),o=a=Ye(i.add(s))),n=i.keyRef(r.groupby,!0))):o=Ye(i.add(Ba(null,[{}]))),o||(o=a5(t,i)),{key:n,pulse:o,parent:a}}function a5(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:Ye(e.getData(t.data).output)}function qf(t,e,i,r,n){this.scope=t,this.input=e,this.output=i,this.values=r,this.aggregate=n,this.index={}}qf.fromEntries=function(t,e){let i=e.length,r=e[i-1],n=e[i-2],s=e[0],o=null,a=1;for(s&&s.type==="load"&&(s=e[1]),t.add(e[0]);a<i;++a)e[a].params.pulse=Ye(e[a-1]),t.add(e[a]),e[a].type==="aggregate"&&(o=e[a]);return new qf(t,s,n,r,o)};function JG(t){return fe(t)?t:null}function _G(t,e,i){let r=h5(i.op,i.field),n;if(e.ops){for(let s=0,o=e.as.length;s<o;++s)if(e.as[s]===r)return}else e.ops=["count"],e.fields=[null],e.as=["count"];i.op&&(e.ops.push((n=i.op.signal)?t.signalRef(n):i.op),e.fields.push(t.fieldRef(i.field)),e.as.push(r))}function Dy(t,e,i,r,n,s,o){let a=e[i]||(e[i]={}),l=Mwe(s),u=JG(n),c,h;if(u!=null&&(t=e.scope,u=u+(l?"|"+l:""),c=a[u]),!c){let d=s?{field:JD,pulse:e.countsRef(t,n,s)}:{field:t.fieldRef(n),pulse:Ye(e.output)};l&&(d.sort=t.sortRef(s)),h=t.add(c5(r,void 0,d)),o&&(e.index[n]=h),c=Ye(h),u!=null&&(a[u]=c)}return c}qf.prototype={countsRef(t,e,i){let r=this,n=r.counts||(r.counts={}),s=JG(e),o,a,l;return s!=null&&(t=r.scope,o=n[s]),o?i&&i.field&&_G(t,o.agg.params,i):(l={groupby:t.fieldRef(e,"key"),pulse:Ye(r.output)},i&&i.field&&_G(t,l,i),a=t.add(PG(l)),o=t.add(Ba({pulse:Ye(a)})),o={agg:a,ref:Ye(o)},s!=null&&(n[s]=o)),o.ref},tuplesRef(){return Ye(this.values)},extentRef(t,e){return Dy(t,this,"extent","extent",e,!1)},domainRef(t,e){return Dy(t,this,"domain","values",e,!1)},valuesRef(t,e,i){return Dy(t,this,"vals","values",e,i||!0)},lookupRef(t,e){return Dy(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return Dy(t,this,"indata","tupleindex",e,!0,!0)}};function u_e(t,e,i){let r=t.from.facet,n=r.name,s=a5(r,e),o;r.name||te("Facet must have a name: "+pe(r)),r.data||te("Facet must reference a data set: "+pe(r)),r.field?o=e.add(BG({field:e.fieldRef(r.field),pulse:s})):r.groupby?o=e.add(qwe({key:e.keyRef(r.groupby),group:Ye(e.proxy(i.parent)),pulse:s})):te("Facet must specify groupby or field: "+pe(r));let a=e.fork(),l=a.add(Ba()),u=a.add(Gf({pulse:Ye(l)}));a.addData(n,new qf(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(t).toRuntime()}}function c_e(t,e,i){let r=e.add(BG({pulse:i.pulse})),n=e.fork();n.add(Gf()),n.addSignal("parent",null),r.params.subflow={$subflow:n.parse(t).toRuntime()}}function ZG(t,e,i){let r=t.remove,n=t.insert,s=t.toggle,o=t.modify,a=t.values,l=e.add(l5()),u="if("+t.trigger+',modify("'+i+'",'+[n,r,s,o,a].map(h=>h??"null").join(",")+"),0)",c=Pa(u,e);l.update=c.$expr,l.params=c.$params}function g5(t,e){let i=YG(t),r=t.type===f5,n=t.from&&t.from.facet,s=t.overlap,o=t.layout||i===sM||i===nM,a,l,u,c,h,d,p,f=i===rM||o||n,m=l_e(t.from,r,e);l=e.add(Vwe({key:m.key||(t.key?Fy(t.key):void 0),pulse:m.pulse,clean:!r}));let g=Ye(l);l=u=e.add(Ba({pulse:g})),l=e.add(Jwe({markdef:e_e(t),interactive:t_e(t.interactive,e),clip:Q2e(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:Ye(l)}));let b=Ye(l);l=c=e.add(IG(LG(t.encode,t.type,i,t.style,e,{mod:!1,pulse:b}))),l.params.parent=e.encode(),t.transform&&t.transform.forEach(w=>{let C=mM(w,e),E=C.metadata;(E.generates||E.changes)&&te("Mark transforms should not generate new data."),E.nomod||(c.params.mod=!0),C.params.pulse=Ye(l),e.add(l=C)}),t.sort&&(l=e.add(o2e({sort:e.compareRef(t.sort),pulse:Ye(l)})));let v=Ye(l);(n||o)&&(o=e.add($G({layout:e.objectProperty(t.layout),legends:e.legends,mark:b,pulse:v})),d=Ye(o));let y=e.add(zG({mark:b,pulse:d||v}));p=Ye(y),r&&(f&&(a=e.operators,a.pop(),o&&a.pop()),e.pushState(v,d||p,g),n?u_e(t,e,m):f?c_e(t,e,m):e.parse(t),e.popState(),f&&(o&&a.push(o),a.push(y))),s&&(p=h_e(s,p,e));let x=e.add(NG({pulse:p})),_=e.add(Gf({pulse:Ye(x)},void 0,e.parent()));t.name!=null&&(h=t.name,e.addData(h,new qf(e,u,x,_)),t.on&&t.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&te("Marks only support modify triggers."),ZG(w,e,h)}))}function h_e(t,e,i){let r=t.method,n=t.bound,s=t.separation,o={separation:Cr(s)?i.signalRef(s.signal):s,method:Cr(r)?i.signalRef(r.signal):r,pulse:e};if(t.order&&(o.sort=i.compareRef({field:t.order})),n){let a=n.tolerance;o.boundTolerance=Cr(a)?i.signalRef(a.signal):+a,o.boundScale=i.scaleRef(n.scale),o.boundOrient=n.orient}return Ye(i.add(e2e(o)))}function d_e(t,e){let i=e.config.legend,r=t.encode||{},n=Os(t,i),s=r.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={},c=0,h,d,p;cM.forEach(y=>t[y]?(u[y]=t[y],c=c||t[y]):0),c||te("Missing valid scale for legend.");let f=f_e(t,e.scaleType(c)),m={title:t.title!=null,scales:u,type:f,vgrad:f!=="symbol"&&n.isVertical()},g=Ye(e.add(Ba(null,[m]))),b={enter:{x:{value:0},y:{value:0}}},v=Ye(e.add(Ywe(d={type:f,scale:e.scaleRef(c),count:e.objectProperty(n("tickCount")),limit:e.property(n("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return f===o5?(p=[N2e(t,c,i,r.gradient),gG(t,i,r.labels,v)],d.count=d.count||e.signalRef(`max(2,2*floor((${jf(n.gradientLength())})/100))`)):f===tM?p=[$2e(t,c,i,r.gradient,v),gG(t,i,r.labels,v)]:(h=V2e(t,i),p=[W2e(t,i,r,v,jf(h.columns))],d.size=g_e(t,e,p[0].marks)),p=[Oy({role:hwe,from:g,encode:b,marks:p,layout:h,interactive:a})],m.title&&p.push(Z2e(t,i,r.title,g)),g5(Oy({role:uwe,from:g,encode:Sm(m_e(n,t,i),s,zy),marks:p,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:l}),e)}function f_e(t,e){let i=t.type||mG;return!t.type&&p_e(t)===1&&(t.fill||t.stroke)&&(i=sv(e)?o5:Y_(e)?tM:mG),i!==o5?i:Y_(e)?tM:o5}function p_e(t){return cM.reduce((e,i)=>e+(t[i]?1:0),0)}function m_e(t,e,i){let r={enter:{},update:{}};return an(r,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:i.strokeWidth,strokeDash:i.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),r}function g_e(t,e,i){let r=jf(CG("size",t,i)),n=jf(CG("strokeWidth",t,i)),s=jf(b_e(i[1].encode,e,Py));return Pa(`max(ceil(sqrt(${r})+${n}),${s})`,e)}function CG(t,e,i){return e[t]?`scale("${e[t]}",datum)`:GG(t,i[0].encode)}function b_e(t,e,i){return GG("fontSize",t)||I2e("fontSize",e,i)}var v_e=`item.orient==="${Em}"?-90:item.orient==="${km}"?90:0`;function y_e(t,e){t=fe(t)?{text:t}:t;let i=Os(t,e.config.title),r=t.encode||{},n=r.group||{},s=n.name||void 0,o=n.interactive,a=n.style,l=[],u={},c=Ye(e.add(Ba(null,[u])));return l.push(__e(t,i,x_e(t),c)),t.subtitle&&l.push(C_e(t,i,r.subtitle,c)),g5(Oy({role:mwe,from:c,encode:w_e(i,n),marks:l,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:o,style:a}),e)}function x_e(t){let e=t.encode;return e&&e.title||Ze({name:t.name,interactive:t.interactive,style:t.style},e)}function w_e(t,e){let i={enter:{},update:{}};return an(i,{orient:t("orient"),anchor:t("anchor"),align:{signal:dM},angle:{signal:v_e},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),Sm(i,e,zy)}function __e(t,e,i,r){let n={value:0},s=t.text,o={enter:{opacity:n},update:{opacity:{value:1}},exit:{opacity:n}};return an(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),lo({type:Xf,role:gwe,style:T2e,from:r,encode:o},i)}function C_e(t,e,i,r){let n={value:0},s=t.subtitle,o={enter:{opacity:n},update:{opacity:{value:1}},exit:{opacity:n}};return an(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),lo({type:Xf,role:bwe,style:R2e,from:r,encode:o},i)}function S_e(t,e){let i=[];t.transform&&t.transform.forEach(r=>{i.push(mM(r,e))}),t.on&&t.on.forEach(r=>{ZG(r,e,t.name)}),e.addDataPipeline(t.name,E_e(t,e,i))}function E_e(t,e,i){let r=[],n=null,s=!1,o=!1,a,l,u,c,h;for(t.values?Cr(t.values)||n5(t.format)?(r.push(SG(e,t)),r.push(n=Vf())):r.push(n=Vf({$ingest:t.values,$format:t.format})):t.url?n5(t.url)||n5(t.format)?(r.push(SG(e,t)),r.push(n=Vf())):r.push(n=Vf({$request:t.url,$format:t.format})):t.source&&(n=a=ve(t.source).map(d=>Ye(e.getData(d).output)),r.push(null)),l=0,u=i.length;l<u;++l)c=i[l],h=c.metadata,!n&&!h.source&&r.push(n=Vf()),r.push(c),h.generates&&(o=!0),h.modifies&&!o&&(s=!0),h.source?n=c:h.changes&&(n=null);return a&&(u=a.length-1,r[0]=n2e({derive:s,pulse:u?a:a[0]}),(s||u)&&r.splice(1,0,Vf())),n||r.push(Vf()),r.push(Gf({})),r}function Vf(t){let e=Ba({},t);return e.metadata={source:!0},e}function SG(t,e){return Kwe({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}var QG=t=>t===qh||t===Na,b5=(t,e,i)=>Cr(t)?R_e(t.signal,e,i):t===Em||t===Na?e:i,Br=(t,e,i)=>Cr(t)?A_e(t.signal,e,i):QG(t)?e:i,Ia=(t,e,i)=>Cr(t)?T_e(t.signal,e,i):QG(t)?i:e,eX=(t,e,i)=>Cr(t)?D_e(t.signal,e,i):t===Na?{value:e}:{value:i},k_e=(t,e,i)=>Cr(t)?M_e(t.signal,e,i):t===km?{value:e}:{value:i},A_e=(t,e,i)=>tX(`${t} === '${Na}' || ${t} === '${qh}'`,e,i),T_e=(t,e,i)=>tX(`${t} !== '${Na}' && ${t} !== '${qh}'`,e,i),R_e=(t,e,i)=>gM(`${t} === '${Em}' || ${t} === '${Na}'`,e,i),D_e=(t,e,i)=>gM(`${t} === '${Na}'`,e,i),M_e=(t,e,i)=>gM(`${t} === '${km}'`,e,i),tX=(t,e,i)=>(e=e!=null?Ir(e):e,i=i!=null?Ir(i):i,EG(e)&&EG(i)?(e=e?e.signal||pe(e.value):null,i=i?i.signal||pe(i.value):null,{signal:`${t} ? (${e}) : (${i})`}):[Ze({test:t},e)].concat(i||[])),EG=t=>t==null||Object.keys(t).length===1,gM=(t,e,i)=>({signal:`${t} ? (${wm(e)}) : (${wm(i)})`}),F_e=(t,e,i,r,n)=>({signal:(r!=null?`${t} === '${Em}' ? (${wm(r)}) : `:"")+(i!=null?`${t} === '${qh}' ? (${wm(i)}) : `:"")+(n!=null?`${t} === '${km}' ? (${wm(n)}) : `:"")+(e!=null?`${t} === '${Na}' ? (${wm(e)}) : `:"")+"(null)"}),wm=t=>Cr(t)?t.signal:t==null?null:pe(t),L_e=(t,e)=>e===0?0:Cr(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},_m=(t,e)=>{let i=t.signal;return i&&i.endsWith("(null)")?{signal:i.slice(0,-6)+e.signal}:t};function ym(t,e,i,r){let n;if(e&&_e(e,t))return e[t];if(_e(i,t))return i[t];if(t.startsWith("title")){switch(t){case"titleColor":n="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":n=t[5].toLowerCase()+t.slice(6)}return r[uM][n]}else if(t.startsWith("label")){switch(t){case"labelColor":n="fill";break;case"labelFont":case"labelFontSize":n=t[5].toLowerCase()+t.slice(6)}return r[Py][n]}return null}function kG(t){let e={};for(let i of t)if(i)for(let r in i)e[r]=1;return Object.keys(e)}function O_e(t,e){var i=e.config,r=i.style,n=i.axis,s=e.scaleType(t.scale)==="band"&&i.axisBand,o=t.orient,a,l,u;if(Cr(o)){let h=kG([i.axisX,i.axisY]),d=kG([i.axisTop,i.axisBottom,i.axisLeft,i.axisRight]);a={};for(u of h)a[u]=Br(o,ym(u,i.axisX,n,r),ym(u,i.axisY,n,r));l={};for(u of d)l[u]=F_e(o.signal,ym(u,i.axisTop,n,r),ym(u,i.axisBottom,n,r),ym(u,i.axisLeft,n,r),ym(u,i.axisRight,n,r))}else a=o===Na||o===qh?i.axisX:i.axisY,l=i["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?Ze({},n,a,l,s):n}function P_e(t,e,i,r){let n=Os(t,e),s=t.orient,o,a,l={enter:o={opacity:Ft},update:a={opacity:jo},exit:{opacity:Ft}};an(l,{stroke:n("domainColor"),strokeCap:n("domainCap"),strokeDash:n("domainDash"),strokeDashOffset:n("domainDashOffset"),strokeWidth:n("domainWidth"),strokeOpacity:n("domainOpacity")});let u=AG(t,0),c=AG(t,1);return o.x=a.x=Br(s,u,Ft),o.x2=a.x2=Br(s,c),o.y=a.y=Ia(s,u,Ft),o.y2=a.y2=Ia(s,c),lo({type:hM,role:nwe,from:r,encode:l},i)}function AG(t,e){return{scale:t.scale,range:e}}function z_e(t,e,i,r,n){let s=Os(t,e),o=t.orient,a=t.gridScale,l=b5(o,1,-1),u=I_e(t.offset,l),c,h,d,p={enter:c={opacity:Ft},update:d={opacity:jo},exit:h={opacity:Ft}};an(p,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});let f={scale:t.scale,field:Vo,band:n.band,extra:n.extra,offset:n.offset,round:s("tickRound")},m=Br(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},b=a?{scale:a,range:1,mult:l,offset:u}:Ze(m,{mult:l,offset:u});return c.x=d.x=Br(o,f,g),c.y=d.y=Ia(o,f,g),c.x2=d.x2=Ia(o,b),c.y2=d.y2=Br(o,b),h.x=Br(o,f),h.y=Ia(o,f),lo({type:hM,role:swe,key:Vo,from:r,encode:p},i)}function I_e(t,e){if(e!==1)if(!ge(t))t=Cr(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let i=t=Ze({},t);for(;i.mult!=null;)if(ge(i.mult))i=i.mult=Ze({},i.mult);else return i.mult=Cr(e)?{signal:`(${i.mult}) * (${e.signal})`}:i.mult*e,t;i.mult=e}return t}function B_e(t,e,i,r,n,s){let o=Os(t,e),a=t.orient,l=b5(a,-1,1),u,c,h,d={enter:u={opacity:Ft},update:h={opacity:jo},exit:c={opacity:Ft}};an(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});let p=Ir(n);p.mult=l;let f={scale:t.scale,field:Vo,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return h.y=u.y=Br(a,Ft,f),h.y2=u.y2=Br(a,p),c.x=Br(a,f),h.x=u.x=Ia(a,Ft,f),h.x2=u.x2=Ia(a,p),c.y=Ia(a,f),lo({type:hM,role:awe,key:Vo,from:r,encode:d},i)}function YD(t,e,i,r,n){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+i+","+r+","+n+")"}}function N_e(t,e,i,r,n,s){let o=Os(t,e),a=t.orient,l=t.scale,u=b5(a,-1,1),c=jf(o("labelFlush")),h=jf(o("labelFlushOffset")),d=o("labelAlign"),p=o("labelBaseline"),f=c===0||!!c,m,g=Ir(n);g.mult=u,g.offset=Ir(o("labelPadding")||0),g.offset.mult=u;let b={scale:l,field:Vo,band:.5,offset:XG(s.offset,o("labelOffset"))},v=Br(a,f?YD(l,c,'"left"','"right"','"center"'):{value:"center"},k_e(a,"left","right")),y=Br(a,eX(a,"bottom","top"),f?YD(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=YD(l,c,`-(${h})`,h,0);f=f&&h;let _={opacity:Ft,x:Br(a,b,g),y:Ia(a,b,g)},w={enter:_,update:m={opacity:jo,text:{field:lM},x:_.x,y:_.y,align:v,baseline:y},exit:{opacity:Ft,x:_.x,y:_.y}};an(w,{dx:!d&&f?Br(a,x):null,dy:!p&&f?Ia(a,x):null}),an(w,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:p});let C=o("labelBound"),E=o("labelOverlap");return E=E||C?{separation:o("labelSeparation"),method:E,order:"datum.index",bound:C?{scale:l,orient:a,tolerance:C}:null}:void 0,m.align!==v&&(m.align=_m(m.align,v)),m.baseline!==y&&(m.baseline=_m(m.baseline,y)),lo({type:Xf,role:owe,style:Py,key:Vo,from:r,encode:w,overlap:E},i)}function $_e(t,e,i,r){let n=Os(t,e),s=t.orient,o=b5(s,-1,1),a,l,u={enter:a={opacity:Ft,anchor:Ir(n("titleAnchor",null)),align:{signal:dM}},update:l=Ze({},a,{opacity:jo,text:Ir(t.title)}),exit:{opacity:Ft}},c={signal:`lerp(range("${t.scale}"), ${p5(0,1,.5)})`};return l.x=Br(s,c),l.y=Ia(s,c),a.angle=Br(s,Ft,L_e(o,90)),a.baseline=Br(s,eX(s,qh,Na),{value:qh}),l.angle=a.angle,l.baseline=a.baseline,an(u,{fill:n("titleColor"),fillOpacity:n("titleOpacity"),font:n("titleFont"),fontSize:n("titleFontSize"),fontStyle:n("titleFontStyle"),fontWeight:n("titleFontWeight"),limit:n("titleLimit"),lineHeight:n("titleLineHeight")},{align:n("titleAlign"),angle:n("titleAngle"),baseline:n("titleBaseline")}),H_e(n,s,u,i),u.update.align=_m(u.update.align,a.align),u.update.angle=_m(u.update.angle,a.angle),u.update.baseline=_m(u.update.baseline,a.baseline),lo({type:Xf,role:lwe,style:uM,from:r,encode:u},i)}function H_e(t,e,i,r){let n=(a,l)=>a!=null?(i.update[l]=_m(Ir(a),i.update[l]),!1):!xm(l,r),s=n(t("titleX"),"x"),o=n(t("titleY"),"y");i.enter.auto=o===s?Ir(o):Br(e,Ir(o),Ir(s))}function U_e(t,e){let i=O_e(t,e),r=t.encode||{},n=r.axis||{},s=n.name||void 0,o=n.interactive,a=n.style,l=Os(t,i),u=B2e(l),c={scale:t.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:t.title!=null},h=Ye(e.add(Ba({},[c]))),d=Ye(e.add(Wwe({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),p=[],f;return c.grid&&p.push(z_e(t,i,r.grid,d,u)),c.ticks&&(f=l("tickSize"),p.push(B_e(t,i,r.ticks,d,f,u))),c.labels&&(f=c.ticks?f:0,p.push(N_e(t,i,r.labels,d,f,u))),c.domain&&p.push(P_e(t,i,r.domain,h)),c.title&&p.push($_e(t,i,r.title,h)),g5(Oy({role:rwe,from:h,encode:Sm(W_e(l,t),n,zy),marks:p,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),e)}function W_e(t,e){let i={enter:{},update:{}};return an(i,{orient:t("orient"),offset:t("offset")||0,position:za(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),i}function iX(t,e,i){let r=ve(t.signals),n=ve(t.scales);return i||r.forEach(s=>OG(s,e)),ve(t.projections).forEach(s=>w2e(s,e)),n.forEach(s=>u2e(s,e)),ve(t.data).forEach(s=>S_e(s,e)),n.forEach(s=>c2e(s,e)),(i||r).forEach(s=>Uwe(s,e)),ve(t.axes).forEach(s=>U_e(s,e)),ve(t.marks).forEach(s=>g5(s,e)),ve(t.legends).forEach(s=>d_e(s,e)),t.title&&y_e(t.title,e),e.parseLambdas(),e}var V_e=t=>Sm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function j_e(t,e){let i=e.config,r=Ye(e.root=e.add(l5())),n=q_e(t,i);n.forEach(u=>OG(u,e)),e.description=t.description||i.description,e.eventConfig=i.events,e.legends=e.objectProperty(i.legend&&i.legend.layout),e.locale=i.locale;let s=e.add(Ba()),o=e.add(IG(LG(V_e(t.encode),f5,nM,t.style,e,{pulse:Ye(s)}))),a=e.add($G({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:r,pulse:Ye(o)}));e.operators.pop(),e.pushState(Ye(o),Ye(a),null),iX(t,e,n),e.operators.push(a);let l=e.add(zG({mark:r,pulse:Ye(a)}));return l=e.add(NG({pulse:Ye(l)})),l=e.add(Gf({pulse:Ye(l)})),e.addData("root",new qf(e,s,s,l)),e}function My(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function q_e(t,e){let i=o=>za(t[o],e[o]),r=[My("background",i("background")),My("autosize",ewe(i("autosize"))),My("padding",iwe(i("padding"))),My("width",i("width")||0),My("height",i("height")||0)],n=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ve(t.signals).forEach(o=>{_e(n,o.name)?o=Ze(n[o.name],o):r.push(o),s[o.name]=o}),ve(e.signals).forEach(o=>{!_e(s,o.name)&&!_e(n,o.name)&&r.push(o)}),r}function rX(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function TG(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}rX.prototype=TG.prototype={parse(t){return iX(t,this)},fork(){return new TG(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){let e=t instanceof KD?Ye(t):t;return this.add(r2e({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function i(r,n,s){let o,a;r&&(o=r.data||(r.data={}),a=o[n]||(o[n]=[]),a.push(s))}for(t in this.data){e=this.data[t],i(e.input,t,"input"),i(e.output,t,"output"),i(e.values,t,"values");for(let r in e.index)i(e.index[r],t,"index:"+r)}return this},pushState(t,e,i){this._encode.push(Ye(this.add(Gf({pulse:t})))),this._parent.push(e),this._lookup.push(i?Ye(this.proxy(i)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return ht(this._parent)},encode(){return ht(this._encode)},lookup(){return ht(this._lookup)},markpath(){let t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(fe(t))return Fy(t,e);t.signal||te("Unsupported field reference: "+pe(t));let i=t.signal,r=this.field[i];if(!r){let n={name:this.signalRef(i)};e&&(n.as=e),this.field[i]=r=Ye(this.add(Gwe(n)))}return r},compareRef(t){let e=!1,i=s=>Cr(s)?(e=!0,this.signalRef(s.signal)):Fwe(s)?(e=!0,this.exprRef(s.expr)):s,r=ve(t.field).map(i),n=ve(t.order).map(i);return e?Ye(this.add(pG({fields:r,orders:n}))):dG(r,n)},keyRef(t,e){let i=!1,r=s=>Cr(s)?(i=!0,Ye(n[s.signal])):s,n=this.signals;return t=ve(t).map(r),i?Ye(this.add(Xwe({fields:t,flat:e}))):Twe(t,e)},sortRef(t){if(!t)return t;let e=h5(t.op,t.field),i=t.order||Rwe;return i.signal?Ye(this.add(pG({fields:e,orders:this.signalRef(i.signal)}))):dG(e,i)},event(t,e){let i=t+":"+e;if(!this.events[i]){let r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[i]=r}return this.events[i]},hasOwnSignal(t){return _e(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&te("Duplicate signal name: "+pe(t));let i=e instanceof KD?e:this.add(l5(e));return this.signals[t]=i},getSignal(t){return this.signals[t]||te("Unrecognized signal name: "+pe(t)),this.signals[t]},signalRef(t){return this.signals[t]?Ye(this.signals[t]):(_e(this.lambdas,t)||(this.lambdas[t]=this.add(l5(null))),Ye(this.lambdas[t]))},parseLambdas(){let t=Object.keys(this.lambdas);for(let e=0,i=t.length;e<i;++e){let r=t[e],n=Pa(r,this),s=this.lambdas[r];s.params=n.$params,s.update=n.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!ge(t)?t:this.signalRef(t.signal||bM(t))},exprRef(t,e){let i={expr:Pa(t,this)};return e&&(i.expr.$name=e),Ye(this.add(jwe(i)))},addBinding(t,e){this.bindings||te("Nested signals do not support binding: "+pe(t)),this.bindings.push(Ze({signal:t},e))},addScaleProj(t,e){_e(this.scales,t)&&te("Duplicate scale or projection name: "+pe(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,s2e(e))},addProjection(t,e){this.addScaleProj(t,i2e(e))},getScale(t){return this.scales[t]||te("Unrecognized scale name: "+pe(t)),this.scales[t]},scaleRef(t){return Ye(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return _e(this.data,t)&&te("Duplicate data set name: "+pe(t)),this.data[t]=e},getData(t){return this.data[t]||te("Undefined data set name: "+pe(t)),this.data[t]},addDataPipeline(t,e){return _e(this.data,t)&&te("Duplicate data set name: "+pe(t)),this.addData(t,qf.fromEntries(this,e))}};function bM(t){return(K(t)?G_e:X_e)(t)}function G_e(t){let e=t.length,i="[";for(let r=0;r<e;++r){let n=t[r];i+=(r>0?",":"")+(ge(n)?n.signal||bM(n):pe(n))}return i+"]"}function X_e(t){let e="{",i=0,r,n;for(r in t)n=t[r],e+=(++i>1?",":"")+pe(r)+":"+(ge(n)?n.signal||bM(n):pe(n));return e+"}"}function Y_e(){let t="sans-serif",r="#4c78a8",n="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:n},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:n,font:t,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:n,font:t,fontSize:10},"guide-title":{fill:n,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function nX(t,e,i){return ge(t)||te("Input Vega specification must be an object."),e=vl(Y_e(),e,t.config),j_e(t,new rX(e,i)).toRuntime()}var K_e="5.33.0";Ze(Iu,v8,M9,z9,eR,pR,iD,jR,oD,uD,dD,mD);function J_e(t,e,i){let r;e.x2&&(e.x?(i&&t.x>t.x2&&(r=t.x,t.x=t.x2,t.x2=r),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),e.xc&&(t.x=t.xc-(t.width||0)/2),e.y2&&(e.y?(i&&t.y>t.y2&&(r=t.y,t.y=t.y2,t.y2=r),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),e.yc&&(t.y=t.yc-(t.height||0)/2)}var Z_e={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Q_e={"*":(t,e)=>t*e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,">":(t,e)=>t>e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e},eCe={"+":t=>+t,"-":t=>-t,"~":t=>~t,"!":t=>!t},tCe=Array.prototype.slice,Yf=(t,e,i)=>{let r=i?i(e[0]):e[0];return r[t].apply(r,tCe.call(e,1))},iCe=(t,e,i,r,n,s,o)=>new Date(t,e||0,i??1,r||0,n||0,s||0,o||0),rCe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(t,e,i)=>Math.max(e,Math.min(i,t)),now:Date.now,utc:Date.UTC,datetime:iCe,date:t=>new Date(t).getDate(),day:t=>new Date(t).getDay(),year:t=>new Date(t).getFullYear(),month:t=>new Date(t).getMonth(),hours:t=>new Date(t).getHours(),minutes:t=>new Date(t).getMinutes(),seconds:t=>new Date(t).getSeconds(),milliseconds:t=>new Date(t).getMilliseconds(),time:t=>new Date(t).getTime(),timezoneoffset:t=>new Date(t).getTimezoneOffset(),utcdate:t=>new Date(t).getUTCDate(),utcday:t=>new Date(t).getUTCDay(),utcyear:t=>new Date(t).getUTCFullYear(),utcmonth:t=>new Date(t).getUTCMonth(),utchours:t=>new Date(t).getUTCHours(),utcminutes:t=>new Date(t).getUTCMinutes(),utcseconds:t=>new Date(t).getUTCSeconds(),utcmilliseconds:t=>new Date(t).getUTCMilliseconds(),length:t=>t.length,join:function(){return Yf("join",arguments)},indexof:function(){return Yf("indexOf",arguments)},lastindexof:function(){return Yf("lastIndexOf",arguments)},slice:function(){return Yf("slice",arguments)},reverse:t=>t.slice().reverse(),sort:t=>t.slice().sort(Au),parseFloat,parseInt,upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),substring:function(){return Yf("substring",arguments,String)},split:function(){return Yf("split",arguments,String)},replace:function(){return Yf("replace",arguments,String)},trim:t=>String(t).trim(),btoa:t=>btoa(t),atob:t=>atob(t),regexp:RegExp,test:(t,e)=>RegExp(t).test(e)},nCe=["view","item","group","xy","x","y"],yM=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&yM.add(setImmediate);var sCe={Literal:(t,e)=>e.value,Identifier:(t,e)=>{let i=e.name;return t.memberDepth>0?i:i==="datum"?t.datum:i==="event"?t.event:i==="item"?t.item:Z_e[i]||t.params["$"+i]},MemberExpression:(t,e)=>{let i=!e.computed,r=t(e.object);i&&(t.memberDepth+=1);let n=t(e.property);if(i&&(t.memberDepth-=1),yM.has(r[n])){console.error(`Prevented interpretation of member "${n}" which could lead to insecure code execution`);return}return r[n]},CallExpression:(t,e)=>{let i=e.arguments,r=e.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?t(i[0])?t(i[1]):t(i[2]):(t.fn[r]||rCe[r]).apply(t.fn,i.map(t))},ArrayExpression:(t,e)=>e.elements.map(t),BinaryExpression:(t,e)=>Q_e[e.operator](t(e.left),t(e.right)),UnaryExpression:(t,e)=>eCe[e.operator](t(e.argument)),ConditionalExpression:(t,e)=>t(e.test)?t(e.consequent):t(e.alternate),LogicalExpression:(t,e)=>e.operator==="&&"?t(e.left)&&t(e.right):t(e.left)||t(e.right),ObjectExpression:(t,e)=>e.properties.reduce((i,r)=>{t.memberDepth+=1;let n=t(r.key);return t.memberDepth-=1,yM.has(t(r.value))?console.error(`Prevented interpretation of property "${n}" which could lead to insecure code execution`):i[n]=t(r.value),i},{})};function Iy(t,e,i,r,n,s){let o=a=>sCe[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(e),o.params=i,o.datum=r,o.event=n,o.item=s,nCe.forEach(a=>o.fn[a]=function(){return n.vega[a](...arguments)}),o(t)}var sX={operator(t,e){let i=e.ast,r=t.functions;return n=>Iy(i,r,n)},parameter(t,e){let i=e.ast,r=t.functions;return(n,s)=>Iy(i,r,s,n)},event(t,e){let i=e.ast,r=t.functions;return n=>Iy(i,r,void 0,void 0,n)},handler(t,e){let i=e.ast,r=t.functions;return(n,s)=>{let o=s.item&&s.item.datum;return Iy(i,r,n,o,s)}},encode(t,e){let{marktype:i,channels:r}=e,n=t.functions,s=i==="group"||i==="image"||i==="rect";return(o,a)=>{let l=o.datum,u=0,c;for(let h in r)c=Iy(r[h].ast,n,a,l,void 0,o),o[h]!==c&&(o[h]=c,u=1);return i!=="rule"&&J_e(o,r,s),u}}};var RL={};br(RL,{accessPathDepth:()=>Kf,accessPathWithDatum:()=>$y,accessWithDatumToUnescapedPath:()=>Ht,compile:()=>kQ,contains:()=>qe,deepEqual:()=>Nr,deleteNestedProperty:()=>Ny,duplicate:()=>De,entries:()=>Ps,every:()=>_5,fieldIntersection:()=>S5,flatAccessWithDatum:()=>SM,getFirstDefined:()=>wt,hasIntersection:()=>C5,hasProperty:()=>ae,hash:()=>$e,internalField:()=>kM,isBoolean:()=>Tm,isEmpty:()=>ft,isEqual:()=>lCe,isInternalField:()=>uX,isNullOrFalse:()=>w5,isNumeric:()=>Hy,keys:()=>Z,logicalExpr:()=>Am,mergeDeep:()=>_M,never:()=>wM,normalize:()=>$3,normalizeAngle:()=>Kh,omit:()=>qi,pick:()=>rc,prefixGenerator:()=>xM,removePathFromField:()=>nc,replaceAll:()=>$a,replacePathInField:()=>fr,resetIdCounter:()=>cCe,setEqual:()=>CM,some:()=>Xh,stringify:()=>kt,titleCase:()=>Yh,unique:()=>Fn,uniqueId:()=>EM,vals:()=>ci,varName:()=>Et,version:()=>K6e});var oX={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"5.23.0",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",keywords:["vega","chart","visualization"],main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},files:["bin","build","src","vega-lite*","tsconfig.json"],scripts:{changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},dependencies:{"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},peerDependencies:{vega:"^5.24.0"},engines:{node:">=18"},packageManager:"yarn@1.22.22"};function v5(t){return ae(t,"or")}function y5(t){return ae(t,"and")}function x5(t){return ae(t,"not")}function By(t,e){if(x5(t))By(t.not,e);else if(y5(t))for(let i of t.and)By(i,e);else if(v5(t))for(let i of t.or)By(i,e);else e(t)}function Gh(t,e){return x5(t)?{not:Gh(t.not,e)}:y5(t)?{and:t.and.map(i=>Gh(i,e))}:v5(t)?{or:t.or.map(i=>Gh(i,e))}:e(t)}var De=structuredClone;function wM(t){throw new Error(t)}function rc(t,e){let i={};for(let r of e)_e(t,r)&&(i[r]=t[r]);return i}function qi(t,e){let i={...t};for(let r of e)delete i[r];return i}Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>kt(t)).join(",")})`};function $e(t){if(ct(t))return t;let e=fe(t)?t:kt(t);if(e.length<250)return e;let i=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);i=(i<<5)-i+n,i=i&i}return i}function w5(t){return t===!1||t===null}function qe(t,e){return t.includes(e)}function Xh(t,e){let i=0;for(let[r,n]of t.entries())if(e(n,r,i++))return!0;return!1}function _5(t,e){let i=0;for(let[r,n]of t.entries())if(!e(n,r,i++))return!1;return!0}function _M(t,...e){for(let i of e)aCe(t,i??{});return t}function aCe(t,e){for(let i of Z(e))ku(t,i,e[i],!0)}function Fn(t,e){let i=[],r={},n;for(let s of t)n=e(s),!(n in r)&&(r[n]=1,i.push(s));return i}function lCe(t,e){let i=Z(t),r=Z(e);if(i.length!==r.length)return!1;for(let n of i)if(t[n]!==e[n])return!1;return!0}function CM(t,e){if(t.size!==e.size)return!1;for(let i of t)if(!e.has(i))return!1;return!0}function C5(t,e){for(let i of t)if(e.has(i))return!0;return!1}function xM(t){let e=new Set;for(let i of t){let n=To(i).map((o,a)=>a===0?o:`[${o}]`),s=n.map((o,a)=>n.slice(0,a+1).join(""));for(let o of s)e.add(o)}return e}function S5(t,e){return t===void 0||e===void 0?!0:C5(xM(t),xM(e))}function ft(t){return Z(t).length===0}var Z=Object.keys,ci=Object.values,Ps=Object.entries;function Tm(t){return t===!0||t===!1}function Et(t){let e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function Am(t,e){return x5(t)?`!(${Am(t.not,e)})`:y5(t)?`(${t.and.map(i=>Am(i,e)).join(") && (")})`:v5(t)?`(${t.or.map(i=>Am(i,e)).join(") || (")})`:e(t)}function Ny(t,e){if(e.length===0)return!0;let i=e.shift();return i in t&&Ny(t[i],e)&&delete t[i],ft(t)}function Yh(t){return t.charAt(0).toUpperCase()+t.substr(1)}function $y(t,e="datum"){let i=To(t),r=[];for(let n=1;n<=i.length;n++){let s=`[${i.slice(0,n).map(pe).join("][")}]`;r.push(`${e}${s}`)}return r.join(" && ")}function SM(t,e="datum"){return`${e}[${pe(To(t).join("."))}]`}function Ht(t){return`datum['${t.replaceAll("'","\\'")}']`}function uCe(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function fr(t){return`${To(t).map(uCe).join("\\.")}`}function $a(t,e,i){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),i)}function nc(t){return`${To(t).join(".")}`}function Kf(t){return t?To(t).length:0}function wt(...t){return t.find(e=>e!==void 0)}var lX=42;function EM(t){let e=++lX;return t?String(t)+e:e}function cCe(){lX=42}function kM(t){return uX(t)?t:`__${t}`}function uX(t){return t.startsWith("__")}function Kh(t){if(t!==void 0)return(t%360+360)%360}function Hy(t){return ct(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}var aX=Object.getPrototypeOf(structuredClone({}));function Nr(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor.name!==e.constructor.name)return!1;let i,r;if(Array.isArray(t)){if(i=t.length,i!=e.length)return!1;for(r=i;r--!==0;)if(!Nr(t[r],e[r]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(let s of t.entries())if(!e.has(s[0]))return!1;for(let s of t.entries())if(!Nr(s[1],e.get(s[0])))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(let s of t.entries())if(!e.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(i=t.length,i!=e.length)return!1;for(r=i;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&t.valueOf!==aX.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&t.toString!==aX.toString)return t.toString()===e.toString();let n=Object.keys(t);if(i=n.length,i!==Object.keys(e).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,n[r]))return!1;for(r=i;r--!==0;){let s=n[r];if(!Nr(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function kt(t){let e=[];return(function i(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let n,s;if(Array.isArray(r)){for(s="[",n=0;n<r.length;n++)n&&(s+=","),s+=i(r[n])||"null";return s+"]"}if(r===null)return"null";if(e.includes(r))throw new TypeError("Converting circular structure to JSON");let o=e.push(r)-1,a=Object.keys(r).sort();for(s="",n=0;n<a.length;n++){let l=a[n],u=i(r[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return e.splice(o,1),`{${s}}`})(t)}function ae(t,e){return ge(t)&&_e(t,e)&&t[e]!==void 0}var zs="row",Is="column",Rm="facet",Lt="x",hi="y",Bs="x2",uo="y2",qo="xOffset",Hl="yOffset",Ln="radius",Ha="radius2",ln="theta",Ua="theta2",un="latitude",cn="longitude",On="latitude2",hn="longitude2",co="time",Gi="color",Pn="fill",zn="stroke",Mi="shape",Ns="size",Wa="angle",fs="opacity",ho="fillOpacity",fo="strokeOpacity",po="strokeWidth",mo="strokeDash",Jf="text",Jh="order",Zf="detail",Dm="key",sc="tooltip",Mm="href",Fm="url",Lm="description",hCe={x:1,y:1,x2:1,y2:1},cX={theta:1,theta2:1,radius:1,radius2:1};function AM(t){return _e(cX,t)}var TM={longitude:1,longitude2:1,latitude:1,latitude2:1};function k5(t){switch(t){case un:return"y";case On:return"y2";case cn:return"x";case hn:return"x2"}}function A5(t){return _e(TM,t)}var hX=Z(TM),RM={...hCe,...cX,...TM,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function oc(t){return t===Gi||t===Pn||t===zn}var dX={row:1,column:1,facet:1},$r=Z(dX),DM={...RM,...dX},fX=Z(DM),{order:ist,detail:rst,tooltip:nst,...pX}=DM,{row:sst,column:ost,facet:ast,...mX}=pX,lst=Z(pX),ust=Z(mX);function gX(t){return _e(mX,t)}function T5(t){return _e(DM,t)}var bX=[Bs,uo,On,hn,Ua,Ha];function R5(t){return go(t)!==t}function go(t){switch(t){case Bs:return Lt;case uo:return hi;case On:return un;case hn:return cn;case Ua:return ln;case Ha:return Ln}return t}function Go(t){if(AM(t))switch(t){case ln:return"startAngle";case Ua:return"endAngle";case Ln:return"outerRadius";case Ha:return"innerRadius"}return t}function Hr(t){switch(t){case Lt:return Bs;case hi:return uo;case un:return On;case cn:return hn;case ln:return Ua;case Ln:return Ha}}function Fi(t){switch(t){case Lt:case Bs:return"width";case hi:case uo:return"height"}}function MM(t){switch(t){case Lt:return"xOffset";case hi:return"yOffset";case Bs:return"x2Offset";case uo:return"y2Offset";case ln:return"thetaOffset";case Ln:return"radiusOffset";case Ua:return"theta2Offset";case Ha:return"radius2Offset"}}function Om(t){switch(t){case Lt:return"xOffset";case hi:return"yOffset"}}function vX(t){switch(t){case"xOffset":return"x";case"yOffset":return"y"}}var yX=Z(RM),{x:cst,y:hst,x2:dst,y2:fst,xOffset:pst,yOffset:mst,latitude:gst,longitude:bst,latitude2:vst,longitude2:yst,theta:xst,theta2:wst,radius:_st,radius2:Cst,...FM}=RM,xX=Z(FM),LM={x:1,y:1},dn=Z(LM);function Ot(t){return _e(LM,t)}var D5={theta:1,radius:1},wX=Z(D5);function Zh(t){return t==="width"?Lt:hi}var OM={xOffset:1,yOffset:1},Sst=Z(OM);function ac(t){return _e(OM,t)}var _X={time:1},Est=Z(_X);function M5(t){return t in _X}var{text:kst,tooltip:Ast,href:Tst,url:Rst,description:Dst,detail:Mst,key:Fst,order:Lst,...CX}=FM,SX=Z(CX);function EX(t){return _e(FM,t)}function kX(t){switch(t){case Gi:case Pn:case zn:case Ns:case Mi:case fs:case po:case mo:return!0;case ho:case fo:case Wa:case co:return!1}}var AX={...LM,...D5,...OM,...CX},Pm=Z(AX);function pr(t){return _e(AX,t)}function TX(t,e){return fCe(t)[e]}var RX={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Ost,...dCe}=RX;function fCe(t){switch(t){case Gi:case Pn:case zn:case Lm:case Zf:case Dm:case sc:case Mm:case Jh:case fs:case ho:case fo:case po:case Rm:case zs:case Is:return RX;case Lt:case hi:case qo:case Hl:case un:case cn:case co:return dCe;case Bs:case uo:case On:case hn:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ns:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case mo:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Mi:return{point:"always",geoshape:"always"};case Jf:return{text:"always"};case Wa:return{point:"always",square:"always",text:"always"};case Fm:return{image:"always"};case ln:return{text:"always",arc:"always"};case Ln:return{text:"always",arc:"always"};case Ua:case Ha:return{arc:"always"}}}function F5(t){switch(t){case Lt:case hi:case ln:case Ln:case qo:case Hl:case Ns:case Wa:case po:case fs:case ho:case fo:case co:case Bs:case uo:case Ua:case Ha:return;case Rm:case zs:case Is:case Mi:case mo:case Jf:case sc:case Mm:case Fm:case Lm:return"discrete";case Gi:case Pn:case zn:return"flexible";case un:case cn:case On:case hn:case Zf:case Dm:case Jh:return}}var mCe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},DX={count:1,min:1,max:1};function bo(t){return ae(t,"argmin")}function Xo(t){return ae(t,"argmax")}function zm(t){return fe(t)&&_e(mCe,t)}var gCe=new Set(["count","valid","missing","distinct"]);function Qh(t){return fe(t)&&gCe.has(t)}function MX(t){return fe(t)&&qe(["min","max"],t)}var FX=new Set(["count","sum","distinct","valid","missing"]),LX=new Set(["mean","average","median","q1","q3","min","max"]);function L5(t){return Ss(t)&&(t=Bm(t,void 0)),"bin"+Z(t).map(e=>Im(t[e])?Et(`_${e}_${Ps(t[e])}`):Et(`_${e}_${t[e]}`)).join("")}function yt(t){return t===!0||Va(t)&&!t.binned}function di(t){return t==="binned"||Va(t)&&t.binned===!0}function Va(t){return ge(t)}function Im(t){return ae(t,"param")}function PM(t){switch(t){case zs:case Is:case Ns:case Gi:case Pn:case zn:case po:case fs:case ho:case fo:case Mi:return 6;case mo:return 4;default:return 10}}function ed(t){return ae(t,"expr")}function Ei(t,{level:e}={level:0}){let i=Z(t||{}),r={};for(let n of i)r[n]=e===0?Ur(t[n]):Ei(t[n],{level:e-1});return r}function O5(t){let{anchor:e,frame:i,offset:r,orient:n,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:h,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:f,...m}=t,g={...m,...a?{fill:a}:{}},b={...e?{anchor:e}:{},...i?{frame:i}:{},...r?{offset:r}:{},...n?{orient:n}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...h?{subtitleFontStyle:h}:{},...d?{subtitleFontWeight:d}:{},...p?{subtitleLineHeight:p}:{},...f?{subtitlePadding:f}:{}},y=rc(t,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:y,nonMarkTitleProperties:b,subtitle:v}}function ja(t){return fe(t)||K(t)&&fe(t[0])}function Te(t){return ae(t,"signal")}function $s(t){return ae(t,"step")}function OX(t){return K(t)?!1:ae(t,"fields")&&!ae(t,"data")}function PX(t){return K(t)?!1:ae(t,"fields")&&ae(t,"data")}function qa(t){return K(t)?!1:ae(t,"field")&&ae(t,"data")}var bCe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},zX=Z(bCe),IX={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},P5=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function z5(t){let e=K(t.condition)?t.condition.map(BX):BX(t.condition);return{...Ur(t),condition:e}}function Ur(t){if(ed(t)){let{expr:e,...i}=t;return{signal:e,...i}}return t}function BX(t){if(ed(t)){let{expr:e,...i}=t;return{signal:e,...i}}return t}function xt(t){if(ed(t)){let{expr:e,...i}=t;return{signal:e,...i}}return Te(t)?t:t!==void 0?{value:t}:void 0}function NX(t){return Te(t)?t.signal:pe(t)}function zM(t){return Te(t)?t.signal:pe(t.value)}function ps(t){return Te(t)?t.signal:t==null?null:pe(t)}function $X(t,e,i){for(let r of i){let n=ms(r,e.markDef,e.config);n!==void 0&&(t[r]=xt(n))}return t}function IM(t){return[].concat(t.type,t.style??[])}function pt(t,e,i,r={}){let{vgChannel:n,ignoreVgConfig:s}=r;return n&&ae(e,n)?e[n]:e[t]!==void 0?e[t]:s&&(!n||n===t)?void 0:ms(t,e,i,r)}function ms(t,e,i,{vgChannel:r}={}){let n=I5(t,e,i.style);return wt(r?n:void 0,n,r?i[e.type][r]:void 0,i[e.type][t],r?i.mark[r]:i.mark[t])}function I5(t,e,i){return BM(t,IM(e),i)}function BM(t,e,i){e=ve(e);let r;for(let n of e){let s=i[n];ae(s,t)&&(r=s[t])}return r}function B5(t,e){return ve(t).reduce((i,r)=>(i.field.push(be(r,e)),i.order.push(r.sort??"ascending"),i),{field:[],order:[]})}function NM(t,e){let i=[...t];return e.forEach(r=>{for(let n of i)if(Nr(n,r))return;i.push(r)}),i}function $M(t,e){return Nr(t,e)||!e?t:t?[...ve(t),...ve(e)].join(", "):e}function N5(t,e){let i=t.value,r=e.value;if(i==null||r===null)return{explicit:t.explicit,value:null};if((ja(i)||Te(i))&&(ja(r)||Te(r)))return{explicit:t.explicit,value:$M(i,r)};if(ja(i)||Te(i))return{explicit:t.explicit,value:i};if(ja(r)||Te(r))return{explicit:t.explicit,value:r};if(!ja(i)&&!Te(i)&&!ja(r)&&!Te(r))return{explicit:t.explicit,value:NM(i,r)};throw new Error("It should never reach here")}var Q={};br(Q,{ADD_SAME_CHILD_TWICE:()=>HCe,CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>f4e,CONCAT_CANNOT_SHARE_AXIS:()=>BCe,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>D4e,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>M4e,FACETED_INDEPENDENT_SAME_SOURCE:()=>F4e,FIT_NON_SINGLE:()=>yCe,INTERVAL_INITIALIZED_WITH_POS:()=>PCe,INVALID_CHANNEL_FOR_AXIS:()=>L4e,LEGEND_BINDINGS_MUST_HAVE_PROJECTION:()=>MCe,LINE_WITH_VARYING_SIZE:()=>i4e,MORE_THAN_ONE_SORT:()=>R4e,MULTIPLE_TIMER_ANIMATION_SELECTION:()=>HM,MULTI_VIEW_ANIMATION_UNSUPPORTED:()=>Qf,NEEDS_SAME_SELECTION:()=>OCe,NO_FIELDS_NEEDS_AS:()=>WCe,REPLACE_ANGLE_WITH_THETA:()=>qCe,SCALE_BINDINGS_CONTINUOUS:()=>RCe,SEQUENTIAL_SCALE_DEPRECATED:()=>DCe,cannotApplySizeToNonOrientedMark:()=>y4e,cannotLookupVariableParameter:()=>FCe,cannotProjectAggregate:()=>ECe,cannotProjectOnChannelWithoutField:()=>SCe,cannotStackRangedMark:()=>O4e,cannotUseRelativeBandSizeWithNonBandScale:()=>m4e,cannotUseScalePropertyWithNonColor:()=>p4e,channelRequiredForBinned:()=>W4e,channelShouldBeDiscrete:()=>o4e,channelShouldBeDiscreteOrDiscretizing:()=>a4e,channelShouldNotBeUsedForBinned:()=>V4e,columnsNotSupportByRowCol:()=>ICe,containerSizeNonSingle:()=>xCe,containerSizeNotCompatibleWithAutosize:()=>wCe,customFormatTypeNotAllowed:()=>VCe,differentParse:()=>$Ce,discreteChannelCannotEncode:()=>u4e,domainRequiredForThresholdScale:()=>j4e,domainSortDropped:()=>T4e,droppedDay:()=>B4e,droppingColor:()=>QCe,droppingFit:()=>_Ce,emptyFieldDef:()=>t4e,errorBand1DNotSupport:()=>U4e,errorBarCenterAndExtentAreNotNeeded:()=>N4e,errorBarCenterIsUsedWithWrongExtent:()=>$4e,errorBarContinuousAxisHasCustomizedAggregate:()=>H4e,facetChannelDropped:()=>l4e,incompatibleChannel:()=>r4e,independentScaleMeansIndependentGuide:()=>A4e,invalidAggregate:()=>JCe,invalidEncodingChannel:()=>s4e,invalidFieldType:()=>YCe,invalidFieldTypeForCountAggregate:()=>KCe,invalidSpec:()=>vCe,invalidTimeUnit:()=>I4e,invalidTransformIgnored:()=>UCe,lineWithRange:()=>h4e,mergeConflictingDomainProperty:()=>k4e,mergeConflictingProperty:()=>E4e,missingFieldType:()=>ZCe,nearestNotSupportForContinuous:()=>kCe,noSameUnitLookup:()=>LCe,noSuchRepeatedValue:()=>zCe,offsetEncodingScaleIgnored:()=>n4e,offsetNestedInsideContinuousPositionScaleDropped:()=>GCe,orientOverridden:()=>d4e,primitiveChannelDef:()=>XCe,projectionOverridden:()=>jCe,rangeMarkAlignmentCannotBeExpression:()=>c4e,relativeBandSizeNotSupported:()=>e4e,scalePropertyNotWorkWithScaleType:()=>_4e,scaleTypeNotWorkWithChannel:()=>x4e,scaleTypeNotWorkWithFieldDef:()=>w4e,scaleTypeNotWorkWithMark:()=>C4e,selectionAsScaleDomainWithoutField:()=>UM,selectionAsScaleDomainWrongEncodings:()=>WM,selectionNotFound:()=>TCe,selectionNotSupported:()=>ACe,stackNonLinearScale:()=>P4e,stackNonSummativeAggregate:()=>z4e,stepDropped:()=>S4e,unaggregateDomainHasNoEffectForRawField:()=>g4e,unaggregateDomainWithNonSharedDomainOp:()=>b4e,unaggregatedDomainWithLogScale:()=>v4e,unknownField:()=>CCe,unrecognizedParse:()=>NCe});function vCe(t){return`Invalid specification ${kt(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}var yCe='Autosize "fit" only works for single views and layered views.';function xCe(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function wCe(t){let e=t=="width"?"Width":"Height",i=t=="width"?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${i}".`}function _Ce(t){return t?`Dropping "fit-${t}" because spec has discrete ${Fi(t)}.`:'Dropping "fit" because spec has discrete size.'}function CCe(t){return`Unknown field for ${t}. Cannot calculate view size.`}function SCe(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function ECe(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function kCe(t){return`The "nearest" transform is not supported for ${t} marks.`}function ACe(t){return`Selection not supported for ${t} yet.`}function TCe(t){return`Cannot find a selection named "${t}".`}var RCe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",DCe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",MCe="Legend bindings are only supported for selections over an individual field or encoding channel.";function FCe(t){return`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`}function LCe(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}var OCe="The same selection must be used to override scale domains in a layered view.",PCe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function zCe(t){return`Unknown repeated value "${t}".`}function ICe(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}var HM="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",Qf="Animation involving facet, layer, or concat is currently unsupported.";function UM(t){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${pe(t)}.`}function WM(t,e,i,r){return(t.length?"Multiple ":"No ")+`matching ${pe(e)} encoding found for selection ${pe(i.param)}. Using "field": ${pe(r)}.`}var BCe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function NCe(t){return`Unrecognized parse "${t}".`}function $Ce(t,e,i){return`An ancestor parsed field "${t}" as ${i} but a child wants to parse the field as ${e}.`}var HCe="Attempt to add the same child twice.";function UCe(t){return`Ignoring an invalid transform: ${kt(t)}.`}var WCe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function VCe(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function jCe(t){let{parentProjection:e,projection:i}=t;return`Layer's shared projection ${kt(e)} is overridden by a child projection ${kt(i)}.`}var qCe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function GCe(t){return`${t}Offset dropped because ${t} is continuous`}function XCe(t,e,i){return`Channel ${t} is a ${e}. Converted to {value: ${kt(i)}}.`}function YCe(t){return`Invalid field type "${t}".`}function KCe(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function JCe(t){return`Invalid aggregation operator "${t}".`}function ZCe(t,e){return`Missing type for channel "${t}", using "${e}" instead.`}function QCe(t,e){let{fill:i,stroke:r}=e;return`Dropping color ${t} as the plot also has ${i&&r?"fill and stroke":i?"fill":"stroke"}.`}function e4e(t){return`Position range does not support relative band size for ${t}.`}function t4e(t,e){return`Dropping ${kt(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}var i4e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function r4e(t,e,i){return`${t} dropped as it is incompatible with "${e}"${i?` when ${i}`:""}.`}function n4e(t){return`${t} encoding has no scale, so specified scale is ignored.`}function s4e(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function o4e(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function a4e(t){return`${t} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function l4e(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function u4e(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${e==="ordinal"?"order":"magnitude"}.`}function c4e(t){return`The ${t} for range marks cannot be an expression`}function h4e(t,e){return`Line mark is for continuous lines and thus cannot be used with ${t&&e?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function d4e(t,e){return`Specified orient "${t}" overridden with "${e}".`}var f4e="Custom domain scale cannot be unioned with default field-based domain.";function p4e(t){return`Cannot use the scale property "${t}" with non-color channel.`}function m4e(t){return`Cannot use the relative band size with ${t} scale.`}function g4e(t){return`Using unaggregated domain with raw field has no effect (${kt(t)}).`}function b4e(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function v4e(t){return`Unaggregated domain is currently unsupported for log scale (${kt(t)}).`}function y4e(t){return`Cannot apply size to non-oriented mark "${t}".`}function x4e(t,e,i){return`Channel "${t}" does not work with "${e}" scale. We are using "${i}" scale instead.`}function w4e(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function _4e(t,e,i){return`${i}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function C4e(t,e){return`Scale type "${e}" does not work with mark "${t}".`}function S4e(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function E4e(t,e,i,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${kt(i)} and ${kt(r)}). Using ${kt(i)}.`}function k4e(t,e,i,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${kt(i)} and ${kt(r)}). Using the union of the two domains.`}function A4e(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function T4e(t){return`Dropping sort property ${kt(t)} as unioned domains only support boolean or op "count", "min", and "max".`}var R4e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",D4e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",M4e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",F4e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",L4e="Invalid channel for axis.";function O4e(t){return`Cannot stack "${t}" if there is already "${t}2".`}function P4e(t){return`Stack is applied to a non-linear scale (${t}).`}function z4e(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function I4e(t,e){return`Invalid ${t}: ${kt(e)}.`}function B4e(t){return`Dropping day from datetime ${kt(t)} as day cannot be combined with other units.`}function N4e(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function $4e(t,e,i){return`${t} is not usually used with ${e} for ${i}.`}function H4e(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function U4e(t){return`1D error band does not support ${t}.`}function W4e(t){return`Channel ${t} is required for "binned" bin.`}function V4e(t){return`Channel ${t} should not be used with "binned" bin.`}function j4e(t){return`Domain for ${t} is required for threshold scale.`}var q4e,HX=B1(c2),ep=HX;q4e=new WeakMap;function UX(t){return ep=t,ep}function WX(){return ep=HX,ep}function Nm(...t){ep.error(...t)}function re(...t){ep.warn(...t)}function VX(...t){ep.debug(...t)}function Yo(t){if(t&&ge(t)){for(let e of $5)if(ae(t,e))return!0}return!1}var jX=["january","february","march","april","may","june","july","august","september","october","november","december"],G4e=jX.map(t=>t.substr(0,3)),qX=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],X4e=qX.map(t=>t.substr(0,3));function Y4e(t){if(Hy(t)&&(t=+t),ct(t))return t>4&&re(Q.invalidTimeUnit("quarter",t)),t-1;throw new Error(Q.invalidTimeUnit("quarter",t))}function K4e(t){if(Hy(t)&&(t=+t),ct(t))return t-1;{let e=t.toLowerCase(),i=jX.indexOf(e);if(i!==-1)return i;let r=e.substr(0,3),n=G4e.indexOf(r);if(n!==-1)return n;throw new Error(Q.invalidTimeUnit("month",t))}}function J4e(t){if(Hy(t)&&(t=+t),ct(t))return t%7;{let e=t.toLowerCase(),i=qX.indexOf(e);if(i!==-1)return i;let r=e.substr(0,3),n=X4e.indexOf(r);if(n!==-1)return n;throw new Error(Q.invalidTimeUnit("day",t))}}function VM(t,e){let i=[];if(e&&t.day!==void 0&&Z(t).length>1&&(re(Q.droppedDay(t)),t=De(t),delete t.day),t.year!==void 0?i.push(t.year):i.push(2012),t.month!==void 0){let r=e?K4e(t.month):t.month;i.push(r)}else if(t.quarter!==void 0){let r=e?Y4e(t.quarter):t.quarter;i.push(ct(r)?r*3:`${r}*3`)}else i.push(0);if(t.date!==void 0)i.push(t.date);else if(t.day!==void 0){let r=e?J4e(t.day):t.day;i.push(ct(r)?r+1:`${r}+1`)}else i.push(1);for(let r of["hours","minutes","seconds","milliseconds"]){let n=t[r];i.push(typeof n>"u"?0:n)}return i}function Ga(t){let i=VM(t,!0).join(", ");return t.utc?`utc(${i})`:`datetime(${i})`}function GX(t){let i=VM(t,!1).join(", ");return t.utc?`utc(${i})`:`datetime(${i})`}function XX(t){let e=VM(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}var YX={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},$5=Z(YX);function KX(t){return _e(YX,t)}var Z4e={binnedyear:1,binnedyearquarter:1,binnedyearquartermonth:1,binnedyearmonth:1,binnedyearmonthdate:1,binnedyearmonthdatehours:1,binnedyearmonthdatehoursminutes:1,binnedyearmonthdatehoursminutesseconds:1,binnedyearweek:1,binnedyearweekday:1,binnedyearweekdayhours:1,binnedyearweekdayhoursminutes:1,binnedyearweekdayhoursminutesseconds:1,binnedyeardayofyear:1},Q4e={binnedutcyear:1,binnedutcyearquarter:1,binnedutcyearquartermonth:1,binnedutcyearmonth:1,binnedutcyearmonthdate:1,binnedutcyearmonthdatehours:1,binnedutcyearmonthdatehoursminutes:1,binnedutcyearmonthdatehoursminutesseconds:1,binnedutcyearweek:1,binnedutcyearweekday:1,binnedutcyearweekdayhours:1,binnedutcyearweekdayhoursminutes:1,binnedutcyearweekdayhoursminutesseconds:1,binnedutcyeardayofyear:1},bot={...Z4e,...Q4e};function Xa(t){return ge(t)?t.binned:JX(t)}function JX(t){return t&&t.startsWith("binned")}function jM(t){return t.startsWith("utc")}function e5e(t){return t.substring(3)}var t5e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function $m(t){return $5.filter(e=>ZX(t,e))}function qM(t){let e=$m(t);return e[e.length-1]}function ZX(t,e){let i=t.indexOf(e);return!(i<0||i>0&&e==="seconds"&&t.charAt(i-1)==="i"||t.length>i+3&&e==="day"&&t.charAt(i+3)==="o"||i>0&&e==="year"&&t.charAt(i-1)==="f")}function QX(t,e,{end:i}={end:!1}){let r=$y(e),n=jM(t)?"utc":"";function s(l){return l==="quarter"?`(${n}quarter(${r})-1)`:`${n}${l}(${r})`}let o,a={};for(let l of $5)ZX(t,l)&&(a[l]=s(l),o=l);return i&&(a[o]+="+1"),GX(a)}function GM(t){if(!t)return;let e=$m(t);return`timeUnitSpecifier(${kt(e)}, ${kt(t5e)})`}function eY(t,e,i){if(!t)return;let r=GM(t);return`${i||jM(t)?"utc":"time"}Format(${e}, ${r})`}function fi(t){if(!t)return;let e;return fe(t)?JX(t)?e={unit:t.substring(6),binned:!0}:e={unit:t}:ge(t)&&(e={...t,...t.unit?{unit:t.unit}:{}}),jM(e.unit)&&(e.utc=!0,e.unit=e5e(e.unit)),e}function tY(t){let{utc:e,...i}=fi(t);return i.unit?(e?"utc":"")+Z(i).map(r=>Et(`${r==="unit"?"":`_${r}_`}${i[r]}`)).join(""):(e?"utc":"")+"timeunit"+Z(i).map(r=>Et(`_${r}_${i[r]}`)).join("")}function H5(t,e=i=>i){let i=fi(t),r=qM(i.unit);if(r&&r!=="day"){let n={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=XM(r,i.step),a={...n,[o]:+n[o]+s};return`${e(Ga(a))} - ${e(Ga(n))}`}}var i5e={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function r5e(t){return _e(i5e,t)}function XM(t,e=1){if(r5e(t))return{part:t,step:e};switch(t){case"day":case"dayofyear":return{part:"date",step:e};case"quarter":return{part:"month",step:e*3};case"week":return{part:"date",step:e*7}}}function iY(t){return ae(t,"param")}function U5(t){return!!t?.field&&t.equal!==void 0}function W5(t){return!!t?.field&&t.lt!==void 0}function V5(t){return!!t?.field&&t.lte!==void 0}function j5(t){return!!t?.field&&t.gt!==void 0}function q5(t){return!!t?.field&&t.gte!==void 0}function G5(t){if(t?.field){if(K(t.range)&&t.range.length===2)return!0;if(Te(t.range))return!0}return!1}function X5(t){return!!t?.field&&(K(t.oneOf)||K(t.in))}function n5e(t){return!!t?.field&&t.valid!==void 0}function YM(t){return X5(t)||U5(t)||G5(t)||W5(t)||j5(t)||V5(t)||q5(t)}function Ul(t,e){return ip(t,{timeUnit:e,wrapTime:!0})}function s5e(t,e){return t.map(i=>Ul(i,e))}function Y5(t,e=!0){let{field:i}=t,r=fi(t.timeUnit),{unit:n,binned:s}=r||{},o=be(t,{expr:"datum"}),a=n?`time(${s?o:QX(n,i)})`:o;if(U5(t))return`${a}===${Ul(t.equal,n)}`;if(W5(t)){let l=t.lt;return`${a}<${Ul(l,n)}`}else if(j5(t)){let l=t.gt;return`${a}>${Ul(l,n)}`}else if(V5(t)){let l=t.lte;return`${a}<=${Ul(l,n)}`}else if(q5(t)){let l=t.gte;return`${a}>=${Ul(l,n)}`}else{if(X5(t))return`indexof([${s5e(t.oneOf,n).join(",")}], ${a}) !== -1`;if(n5e(t))return tp(a,t.valid);if(G5(t)){let{range:l}=Ei(t),u=Te(l)?{signal:`${l.signal}[0]`}:l[0],c=Te(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&e)return"inrange("+a+", ["+Ul(u,n)+", "+Ul(c,n)+"])";let h=[];return u!==null&&h.push(`${a} >= ${Ul(u,n)}`),c!==null&&h.push(`${a} <= ${Ul(c,n)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${kt(t)}`)}function tp(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function rY(t){return YM(t)&&t.timeUnit?{...t,timeUnit:fi(t.timeUnit)}:t}var Hm={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function nY(t){return t==="quantitative"||t==="temporal"}function K5(t){return t==="ordinal"||t==="nominal"}var Ko=Hm.quantitative,Uy=Hm.ordinal,Wl=Hm.temporal,Wy=Hm.nominal,Ya=Hm.geojson,Tot=Z(Hm);function sY(t){if(t)switch(t=t.toLowerCase(),t){case"q":case Ko:return"quantitative";case"t":case Wl:return"temporal";case"o":case Uy:return"ordinal";case"n":case Wy:return"nominal";case Ya:return"geojson"}}var Qi={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Vy={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},Oot=Z(Vy);function oY(t,e){let i=Vy[t],r=Vy[e];return i===r||i==="ordinal-position"&&r==="time"||r==="ordinal-position"&&i==="time"}var o5e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function KM(t){return o5e[t]}var aY=new Set(["linear","log","pow","sqrt","symlog"]),lY=new Set([...aY,"time","utc"]);function JM(t){return aY.has(t)}var uY=new Set(["quantile","quantize","threshold"]),a5e=new Set([...lY,...uY,"sequential","identity"]),l5e=new Set(["ordinal","bin-ordinal","point","band"]);function Kt(t){return l5e.has(t)}function Wr(t){return a5e.has(t)}function Jo(t){return lY.has(t)}function lc(t){return uY.has(t)}var cY={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function hY(t){return!fe(t)&&ae(t,"name")}function ZM(t){return ae(t,"param")}function dY(t){return ae(t,"unionWith")}function fY(t){return ge(t)&&"field"in t}var pY={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Pot=Z(pY),{type:zot,domain:Iot,range:Bot,rangeMax:Not,rangeMin:$ot,scheme:Hot,...u5e}=pY,mY=Z(u5e);function jy(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return Jo(t)||t==="band"||t==="point";case"padding":case"rangeMin":case"rangeMax":return Jo(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return t==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Jo(t);case"nice":return Jo(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return Wr(t)&&!qe(["log","time","utc","threshold","quantile"],t)}}function J5(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return oc(t)?void 0:Q.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function gY(t,e){return qe([Uy,Wy],e)?t===void 0||Kt(t):e===Wl?qe([Qi.TIME,Qi.UTC,void 0],t):e===Ko?JM(t)||lc(t)||t===void 0:!0}function bY(t,e,i=!1){if(!pr(t))return!1;switch(t){case Lt:case hi:case qo:case Hl:case ln:case Ln:return Jo(e)||e==="band"?!0:e==="point"?!i:!1;case co:return qe(["linear","band"],e);case Ns:case po:case fs:case ho:case fo:case Wa:return Jo(e)||lc(e)||qe(["band","point","ordinal"],e);case Gi:case Pn:case zn:return e!=="band";case mo:case Mi:return e==="ordinal"||lc(e)}}function vY(t){return ge(t)&&"value"in t}var gs={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},eF=gs.arc,rp=gs.area,np=gs.bar,yY=gs.image,sp=gs.line,Um=gs.point,xY=gs.rect,Wm=gs.rule,Z5=gs.text,qy=gs.tick,wY=gs.trail,Gy=gs.circle,Xy=gs.square,Q5=gs.geoshape;function In(t){return["line","area","trail"].includes(t)}function uc(t){return["rect","bar","image","arc","tick"].includes(t)}var _Y=new Set(Z(gs));function fn(t){return ae(t,"type")}var c5e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],h5e=["fill","fillOpacity"],CY=[...c5e,...h5e],d5e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},tF=Z(d5e),QM=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],SY={area:["line","point"],bar:QM,rect:QM,line:["point"],tick:["bandSize","thickness",...QM]},EY={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},f5e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},e3=Z(f5e);function Vl(t){return ae(t,"band")}var kY={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},p5e=5,t3={binSpacing:0,continuousBandSize:p5e,minBandSize:.25,timeUnitBandPosition:.5},AY={...t3,binSpacing:1},TY={...t3,thickness:1};function RY(t){return fn(t)?t.type:t}function i3(t,{isPath:e}){return t===void 0||t==="break-paths-show-path-domains"?e?"break-paths-show-domains":"filter":t===null?"show":t}function Vm({markDef:t,config:e,scaleChannel:i,scaleType:r,isCountAggregate:n}){if(!r||!Wr(r)||n)return"always-valid";let s=i3(pt("invalid",t,e),{isPath:In(t.type)});return e.scale?.invalid?.[i]!==void 0?"show":s}function DY(t){return t==="break-paths-filter-domains"||t==="break-paths-show-domains"}function r3({scaleName:t,scale:e,mode:i}){let r=`domain('${t}')`;if(!e||!t)return;let n=`${r}[0]`,s=`peek(${r})`,o=e.domainHasZero();return o==="definitely"?{scale:t,value:0}:o==="maybe"?{signal:`scale('${t}', inrange(0, ${r}) ? 0 : ${i==="zeroOrMin"?n:s})`}:{signal:`scale('${t}', ${i==="zeroOrMin"?n:s})`}}function n3({scaleChannel:t,channelDef:e,scale:i,scaleName:r,markDef:n,config:s}){let o=i?.get("type"),a=Sr(e),l=Qh(a?.aggregate),u=Vm({scaleChannel:t,markDef:n,config:s,scaleType:o,isCountAggregate:l});if(a&&u==="show"){let c=s.scale.invalid?.[t]??"zero-or-min";return{test:tp(be(a,{expr:"datum"}),!1),...g5e(c,i,r)}}}function g5e(t,e,i){if(vY(t)){let{value:r}=t;return Te(r)?{signal:r.signal}:{value:r}}return r3({scale:e,scaleName:i,mode:"zeroOrMin"})}function qm(t){let{channel:e,channelDef:i,markDef:r,scale:n,scaleName:s,config:o}=t,a=go(e),l=Yy(t),u=n3({scaleChannel:a,channelDef:i,scale:n,scaleName:s,markDef:r,config:o});return u!==void 0?[u,l]:l}function MY(t){let{datum:e}=t;return Yo(e)?Ga(e):`${kt(e)}`}function jl(t,e,i,r){let n={};if(e&&(n.scale=e),Bn(t)){let{datum:s}=t;Yo(s)?n.signal=Ga(s):Te(s)?n.signal=s.signal:ed(s)?n.signal=s.expr:n.value=s}else n.field=be(t,i);if(r){let{offset:s,band:o}=r;s&&(n.offset=s),o&&(n.band=o)}return n}function jm({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:i,offset:r,startSuffix:n,endSuffix:s="end",bandPosition:o=.5}){let a=!Te(o)&&0<o&&o<1?"datum":void 0,l=be(e,{expr:a,suffix:n}),u=i!==void 0?be(i,{expr:a}):be(e,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=t;let h=o===0?l:u;c.field=h}else{let h=Te(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;c.signal=`scale("${t}", ${h})`}return r&&(c.offset=r),c}function FY({scaleName:t,fieldDef:e}){let i=be(e,{expr:"datum"}),r=be(e,{expr:"datum",suffix:"end"});return`abs(scale("${t}", ${r}) - scale("${t}", ${i}))`}function Yy({channel:t,channelDef:e,channel2Def:i,markDef:r,config:n,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(e){if(Ke(e)){let h=o?.get("type");if(Li(e)){c??(c=Hs({fieldDef:e,fieldDef2:i,markDef:r,config:n}));let{bin:d,timeUnit:p,type:f}=e;if(yt(d)||c&&p&&f===Wl)return a?.impute?jl(e,s,{binSuffix:"mid"},{offset:l}):c&&!Kt(h)?jm({scaleName:s,fieldOrDatumDef:e,bandPosition:c,offset:l}):jl(e,s,ql(e,t)?{binSuffix:"range"}:{},{offset:l});if(di(d)){if(ce(i))return jm({scaleName:s,fieldOrDatumDef:e,fieldOrDatumDef2:i,bandPosition:c,offset:l});{let m=t===Lt?Bs:uo;re(Q.channelRequiredForBinned(m))}}}return jl(e,s,Kt(h)?{binSuffix:"range"}:{},{offset:l,band:h==="band"?c??e.bandPosition??.5:void 0})}else if(mr(e)){let h=e.value,d=l?{offset:l}:{};return{...op(t,h),...d}}}return Je(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function op(t,e){return qe(["x","x2"],t)&&e==="width"?{field:{group:"width"}}:qe(["y","y2"],t)&&e==="height"?{field:{group:"height"}}:xt(e)}function Gl(t){return t&&t!=="number"&&t!=="time"}function OY(t,e,i){return`${t}(${e}${i?`, ${kt(i)}`:""})`}var b5e=" \u2013 ";function Gm({fieldOrDatumDef:t,format:e,formatType:i,expr:r,normalizeStack:n,config:s}){if(Gl(i))return vo({fieldOrDatumDef:t,format:e,formatType:i,expr:r,config:s});let o=PY(t,r,n),a=cc(t);if(e===void 0&&i===void 0&&s.customFormatTypes){if(a==="quantitative"){if(n&&s.normalizedNumberFormatType)return vo({fieldOrDatumDef:t,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return vo({fieldOrDatumDef:t,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&ce(t)&&t.timeUnit===void 0)return vo({fieldOrDatumDef:t,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(dc(t)){let l=y5e({field:o,timeUnit:ce(t)?fi(t.timeUnit)?.unit:void 0,format:e,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Zo(t)&&t.scale?.type===Qi.UTC});return l?{signal:l}:void 0}if(e=iF({type:a,specifiedFormat:e,config:s,normalizeStack:n}),ce(t)&&yt(t.bin)){let l=be(t,{expr:r,binSuffix:"end"});return{signal:ap(o,l,e,i,s)}}else return e||cc(t)==="quantitative"?{signal:`${zY(o,e)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function PY(t,e,i){return ce(t)?i?`${be(t,{expr:e,suffix:"end"})}-${be(t,{expr:e,suffix:"start"})}`:be(t,{expr:e}):MY(t)}function vo({fieldOrDatumDef:t,format:e,formatType:i,expr:r,normalizeStack:n,config:s,field:o}){if(o??(o=PY(t,r,n)),o!=="datum.value"&&ce(t)&&yt(t.bin)){let a=be(t,{expr:r,binSuffix:"end"});return{signal:ap(o,a,e,i,s)}}return{signal:OY(i,o,e)}}function o3(t,e,i,r,n,s){if(!(fe(r)&&Gl(r))&&!(i===void 0&&r===void 0&&n.customFormatTypes&&cc(t)==="quantitative"&&(n.normalizedNumberFormatType&&hc(t)&&t.stack==="normalize"||n.numberFormatType))){if(hc(t)&&t.stack==="normalize"&&n.normalizedNumberFormat)return iF({type:"quantitative",config:n,normalizeStack:!0});if(dc(t)){let o=ce(t)?fi(t.timeUnit)?.unit:void 0;return o===void 0&&n.customFormatTypes&&n.timeFormatType?void 0:v5e({specifiedFormat:i,timeUnit:o,config:n,omitTimeFormatConfig:s})}return iF({type:e,specifiedFormat:i,config:n})}}function a3(t,e,i){if(t&&(Te(t)||t==="number"||t==="time"))return t;if(dc(e)&&i!=="time"&&i!=="utc")return ce(e)&&fi(e?.timeUnit)?.utc?"utc":"time"}function iF({type:t,specifiedFormat:e,config:i,normalizeStack:r}){if(fe(e))return e;if(t===Ko)return r?i.normalizedNumberFormat:i.numberFormat}function v5e({specifiedFormat:t,timeUnit:e,config:i,omitTimeFormatConfig:r}){return t||(e?{signal:GM(e)}:r?void 0:i.timeFormat)}function zY(t,e){return`format(${t}, "${e||""}")`}function LY(t,e,i,r){return Gl(i)?OY(i,t,e):zY(t,(fe(e)?e:void 0)??r.numberFormat)}function ap(t,e,i,r,n){if(i===void 0&&r===void 0&&n.customFormatTypes&&n.numberFormatType)return ap(t,e,n.numberFormat,n.numberFormatType,n);let s=LY(t,i,r,n),o=LY(e,i,r,n);return`${tp(t,!1)} ? "null" : ${s} + "${b5e}" + ${o}`}function y5e({field:t,timeUnit:e,format:i,formatType:r,rawTimeFormat:n,isUTCScale:s}){return!e||i?!e&&r?`${r}(${t}, '${i}')`:(i=fe(i)?i:n,`${s?"utc":"time"}Format(${t}, '${i}')`):eY(e,t,s)}var td="min",x5e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function rF(t){return _e(x5e,t)}function IY(t){return ae(t,"encoding")}function Nn(t){return t&&(t.op==="count"||ae(t,"field"))}function l3(t){return t&&K(t)}function Xl(t){return ae(t,"row")||ae(t,"column")}function u3(t){return ae(t,"header")}function fc(t){return ae(t,"facet")}function BY(t){return ae(t,"param")}function NY(t){return!fe(t)&&ae(t,"repeat")}function nF(t){let{field:e,timeUnit:i,bin:r,aggregate:n}=t;return{...i?{timeUnit:i}:{},...r?{bin:r}:{},...n?{aggregate:n}:{},field:e}}function h3(t){return ae(t,"sort")}function Hs({fieldDef:t,fieldDef2:e,markDef:i,config:r}){if(Ke(t)&&t.bandPosition!==void 0)return t.bandPosition;if(ce(t)){let{timeUnit:n,bin:s}=t;if(n&&!e)return ms("timeUnitBandPosition",i,r);if(yt(s))return .5}}function sF({channel:t,fieldDef:e,fieldDef2:i,markDef:r,config:n,scaleType:s,useVlSizeChannel:o}){let a=Fi(t),l=pt(o?"size":a,r,n,{vgChannel:a});if(l!==void 0)return l;if(ce(e)){let{timeUnit:u,bin:c}=e;if(u&&!i)return{band:ms("timeUnitBandSize",r,n)};if(yt(c)&&!Kt(s))return{band:1}}if(uc(r.type))return s?Kt(s)?n[r.type]?.discreteBandSize||{band:1}:n[r.type]?.continuousBandSize:n[r.type]?.discreteBandSize}function d3(t,e,i,r){return yt(t.bin)||t.timeUnit&&Li(t)&&t.type==="temporal"?Hs({fieldDef:t,fieldDef2:e,markDef:i,config:r})!==void 0:!1}function f3(t){return ae(t,"sort")&&!ae(t,"field")}function Yl(t){return ae(t,"condition")}function Ym(t){let e=t?.condition;return!!e&&!K(e)&&ce(e)}function id(t){let e=t?.condition;return!!e&&!K(e)&&Ke(e)}function $Y(t){let e=t?.condition;return!!e&&(K(e)||mr(e))}function ce(t){return ae(t,"field")||t?.aggregate==="count"}function cc(t){return t?.type}function Bn(t){return ae(t,"datum")}function Ka(t){return Li(t)&&!Ky(t)||Jy(t)}function oF(t){return Li(t)&&t.type==="quantitative"&&!t.bin||Jy(t)}function Jy(t){return Bn(t)&&ct(t.datum)}function Ke(t){return ce(t)||Bn(t)}function Li(t){return t&&(ae(t,"field")||t.aggregate==="count")&&ae(t,"type")}function mr(t){return ae(t,"value")}function Zo(t){return ae(t,"scale")||ae(t,"sort")}function hc(t){return ae(t,"axis")||ae(t,"stack")||ae(t,"impute")}function HY(t){return ae(t,"legend")}function UY(t){return ae(t,"format")||ae(t,"formatType")}function WY(t){return qi(t,["legend","axis","header","scale"])}function w5e(t){return ae(t,"op")}function be(t,e={}){let i=t.field,r=e.prefix,n=e.suffix,s="";if(C5e(t))i=kM("count");else{let o;if(!e.nofn)if(w5e(t))o=t.op;else{let{bin:a,aggregate:l,timeUnit:u}=t;yt(a)?(o=L5(a),n=(e.binSuffix??"")+(e.suffix??"")):l?Xo(l)?(s=`["${i}"]`,i=`argmax_${l.argmax}`):bo(l)?(s=`["${i}"]`,i=`argmin_${l.argmin}`):o=String(l):u&&!Xa(u)&&(o=tY(u),n=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+(e.suffix??""))}o&&(i=i?`${o}_${i}`:o)}return n&&(i=`${i}_${n}`),r&&(i=`${r}_${i}`),e.forAs?nc(i):e.expr?SM(i,e.expr)+s:fr(i)+s}function Ky(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ce(t)&&!!t.bin;case"temporal":return!1}throw new Error(Q.invalidFieldType(t.type))}function _5e(t){return Zo(t)&&lc(t.scale?.type)}function C5e(t){return t.aggregate==="count"}function S5e(t,e){let{field:i,bin:r,timeUnit:n,aggregate:s}=t;if(s==="count")return e.countTitle;if(yt(r))return`${i} (binned)`;if(n&&!Xa(n)){let o=fi(n)?.unit;if(o)return`${i} (${$m(o).join("-")})`}else if(s)return Xo(s)?`${i} for max ${s.argmax}`:bo(s)?`${i} for min ${s.argmin}`:`${Yh(s)} of ${i}`;return i}function E5e(t){let{aggregate:e,bin:i,timeUnit:r,field:n}=t;if(Xo(e))return`${n} for argmax(${e.argmax})`;if(bo(e))return`${n} for argmin(${e.argmin})`;let s=r&&!Xa(r)?fi(r):void 0,o=e||s?.unit||s?.maxbins&&"timeunit"||yt(i)&&"bin";return o?`${o.toUpperCase()}(${n})`:n}var VY=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return E5e(t);default:return S5e(t,e)}},jY=VY;function aF(t){jY=t}function qY(){aF(VY)}function Kl(t,e,{allowDisabling:i,includeDefault:r=!0}){let n=p3(t)?.title;if(!ce(t))return n??t.title;let s=t,o=r?Zy(s,e):void 0;return i?wt(n,s.title,o):n??s.title??o}function p3(t){if(hc(t)&&t.axis)return t.axis;if(HY(t)&&t.legend)return t.legend;if(u3(t)&&t.header)return t.header}function Zy(t,e){return jY(t,e)}function Km(t){if(UY(t)){let{format:e,formatType:i}=t;return{format:e,formatType:i}}else{let e=p3(t)??{},{format:i,formatType:r}=e;return{format:i,formatType:r}}}function k5e(t,e){switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(h3(t)&&K(t.sort))return"ordinal";let{aggregate:i,bin:r,timeUnit:n}=t;if(n)return"temporal";if(r||i&&!Xo(i)&&!bo(i))return"quantitative";if(Zo(t)&&t.scale?.type)switch(Vy[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Sr(t){if(ce(t))return t;if(Ym(t))return t.condition}function qt(t){if(Ke(t))return t;if(id(t))return t.condition}function lF(t,e,i,r={}){if(fe(t)||ct(t)||Ss(t)){let n=fe(t)?"string":ct(t)?"number":"boolean";return re(Q.primitiveChannelDef(e,n,t)),{value:t}}return Ke(t)?c3(t,e,i,r):id(t)?{...t,condition:c3(t.condition,e,i,r)}:t}function c3(t,e,i,r){if(UY(t)){let{format:n,formatType:s,...o}=t;if(Gl(s)&&!i.customFormatTypes)return re(Q.customFormatTypeNotAllowed(e)),c3(o,e,i,r)}else{let n=hc(t)?"axis":HY(t)?"legend":u3(t)?"header":null;if(n&&t[n]){let{format:s,formatType:o,...a}=t[n];if(Gl(o)&&!i.customFormatTypes)return re(Q.customFormatTypeNotAllowed(e)),c3({...t,[n]:a},e,i,r)}}return ce(t)?Qy(t,e,r):A5e(t)}function A5e(t){let e=t.type;if(e)return t;let{datum:i}=t;return e=ct(i)?"quantitative":fe(i)?"nominal":Yo(i)?"temporal":void 0,{...t,type:e}}function Qy(t,e,{compositeMark:i=!1}={}){let{aggregate:r,timeUnit:n,bin:s,field:o}=t,a={...t};if(!i&&r&&!zm(r)&&!Xo(r)&&!bo(r)&&(re(Q.invalidAggregate(r)),delete a.aggregate),n&&(a.timeUnit=fi(n)),o&&(a.field=`${o}`),yt(s)&&(a.bin=Bm(s,e)),di(s)&&!Ot(e)&&re(Q.channelShouldNotBeUsedForBinned(e)),Li(a)){let{type:l}=a,u=sY(l);l!==u&&(a.type=u),l!=="quantitative"&&Qh(r)&&(re(Q.invalidFieldTypeForCountAggregate(l,r)),a.type="quantitative")}else if(!R5(e)){let l=k5e(a,e);a.type=l}if(Li(a)){let{compatible:l,warning:u}=T5e(a,e)||{};l===!1&&re(u)}if(h3(a)&&fe(a.sort)){let{sort:l}=a;if(rF(l))return{...a,sort:{encoding:l}};let u=l.substring(1);if(l.charAt(0)==="-"&&rF(u))return{...a,sort:{encoding:u,order:"descending"}}}if(u3(a)){let{header:l}=a;if(l){let{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function Bm(t,e){return Ss(t)?{maxbins:PM(e)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?{...t,maxbins:PM(e)}:t}var Xm={compatible:!0};function T5e(t,e){let i=t.type;if(i==="geojson"&&e!=="shape")return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case zs:case Is:case Rm:return Ky(t)?Xm:{compatible:!1,warning:Q.channelShouldBeDiscrete(e)};case Lt:case hi:case qo:case Hl:case Gi:case Pn:case zn:case Jf:case Zf:case Dm:case sc:case Mm:case Fm:case Wa:case ln:case Ln:case Lm:return Xm;case cn:case hn:case un:case On:return i!==Ko?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:Xm;case fs:case ho:case fo:case po:case Ns:case Ua:case Ha:case Bs:case uo:case co:return i==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`}:Xm;case Mi:case mo:return!Ky(t)&&!_5e(t)?{compatible:!1,warning:Q.channelShouldBeDiscreteOrDiscretizing(e)}:Xm;case Jh:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Xm}}function dc(t){let{formatType:e}=Km(t);return e==="time"||!e&&R5e(t)}function R5e(t){return t&&(t.type==="temporal"||ce(t)&&!!t.timeUnit)}function ip(t,{timeUnit:e,type:i,wrapTime:r,undefinedIfExprNotRequired:n}){let s=e&&fi(e)?.unit,o=s||i==="temporal",a;return ed(t)?a=t.expr:Te(t)?a=t.signal:Yo(t)?(o=!0,a=Ga(t)):(fe(t)||ct(t))&&o&&(a=`datetime(${kt(t)})`,KX(s)&&(ct(t)&&t<1e4||fe(t)&&isNaN(Date.parse(t)))&&(a=Ga({[s]:t}))),a?r&&o?`time(${a})`:a:n?void 0:kt(t)}function m3(t,e){let{type:i}=t;return e.map(r=>{let n=ce(t)&&!Xa(t.timeUnit)?t.timeUnit:void 0,s=ip(r,{timeUnit:n,type:i,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function ql(t,e){return yt(t.bin)?pr(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}var uF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function pc(t){return t?.condition}var g3=["domain","grid","labels","ticks","title"],GY={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},cF={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},XY={...cF,style:1,labelExpr:1,encoding:1};function hF(t){return _e(XY,t)}var elt=Z(XY),M5e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},dF=Z(M5e);function Er(t){return ae(t,"mark")}var Jl=class{constructor(e,i){this.name=e,this.run=i}hasMatchingType(e){return Er(e)?RY(e.mark)===this.name:!1}};function Zl(t,e){let i=t&&t[e];return i?K(i)?Xh(i,r=>!!r.field):ce(i)||Ym(i):!1}function fF(t,e){let i=t&&t[e];return i?K(i)?Xh(i,r=>!!r.field):ce(i)||Bn(i)||id(i):!1}function b3(t,e){if(Ot(e)){let i=t[e];if((ce(i)||Bn(i))&&(K5(i.type)||ce(i)&&i.timeUnit)){let r=Om(e);return fF(t,r)}}return!1}function v3(t){return Xh(fX,e=>{if(Zl(t,e)){let i=t[e];if(K(i))return Xh(i,r=>!!r.aggregate);{let r=Sr(i);return r&&!!r.aggregate}}return!1})}function y3(t,e){let i=[],r=[],n=[],s=[],o={};return ex(t,(a,l)=>{if(ce(a)){let{field:u,aggregate:c,bin:h,timeUnit:d,...p}=a;if(c||d||h){let m=p3(a)?.title,g=be(a,{forAs:!0}),b={...m?[]:{title:Kl(a,e,{allowDisabling:!0})},...p,field:g};if(c){let v;if(Xo(c)?(v="argmax",g=be({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${g}.${u}`):bo(c)?(v="argmin",g=be({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${g}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){let y={op:v,as:g};u&&(y.field=u),s.push(y)}}else if(i.push(g),Li(a)&&yt(h)){if(r.push({bin:h,field:u,as:g}),i.push(be(a,{binSuffix:"end"})),ql(a,l)&&i.push(be(a,{binSuffix:"range"})),Ot(l)){let v={field:`${g}_end`};o[`${l}2`]=v}b.bin="binned",R5(l)||(b.type=Ko)}else if(d&&!Xa(d)){n.push({timeUnit:d,field:u,as:g});let v=Li(a)&&a.type!==Wl&&"time";v&&(l===Jf||l===sc?b.formatType=v:EX(l)?b.legend={formatType:v,...b.legend}:Ot(l)&&(b.axis={formatType:v,...b.axis}))}o[l]=b}else i.push(u),o[l]=t[l]}else o[l]=t[l]}),{bins:r,timeUnits:n,aggregate:s,groupby:i,encoding:o}}function F5e(t,e,i){let r=TX(e,i);if(r){if(r==="binned"){let n=t[e===Bs?Lt:hi];return!!(ce(n)&&ce(t[e])&&di(n.bin))}}else return!1;return!0}function YY(t,e,i,r){let n={};for(let s of Z(t))T5(s)||re(Q.invalidEncodingChannel(s));for(let s of yX){if(!t[s])continue;let o=t[s];if(ac(s)){let a=vX(s),l=n[a];if(ce(l)&&nY(l.type)&&ce(o)&&!l.timeUnit){re(Q.offsetNestedInsideContinuousPositionScaleDropped(a));continue}}if(s==="angle"&&e==="arc"&&!t.theta&&(re(Q.REPLACE_ANGLE_WITH_THETA),s=ln),!F5e(t,s,e)){re(Q.incompatibleChannel(s,e));continue}if(s===Ns&&e==="line"&&Sr(t[s])?.aggregate){re(Q.LINE_WITH_VARYING_SIZE);continue}if(s===Gi&&(i?"fill"in t:"stroke"in t)){re(Q.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t}));continue}if(s===Zf||s===Jh&&!K(o)&&!mr(o)||s===sc&&K(o)){if(o){if(s===Jh){let a=t[s];if(f3(a)){n[s]=a;continue}}n[s]=ve(o).reduce((a,l)=>(ce(l)?a.push(Qy(l,s)):re(Q.emptyFieldDef(l,s)),a),[])}}else{if(s===sc&&o===null)n[s]=null;else if(!ce(o)&&!Bn(o)&&!mr(o)&&!Yl(o)&&!Te(o)){re(Q.emptyFieldDef(o,s));continue}n[s]=lF(o,s,r)}}return n}function rd(t,e){let i={};for(let r of Z(t)){let n=lF(t[r],r,e,{compositeMark:!0});i[r]=n}return i}function KY(t){let e=[];for(let i of Z(t))if(Zl(t,i)){let r=t[i],n=ve(r);for(let s of n)ce(s)?e.push(s):Ym(s)&&e.push(s.condition)}return e}function ex(t,e,i){if(t)for(let r of Z(t)){let n=t[r];if(K(n))for(let s of n)e.call(i,s,r);else e.call(i,n,r)}}function JY(t,e,i,r){return t?Z(t).reduce((n,s)=>{let o=t[s];return K(o)?o.reduce((a,l)=>e.call(r,a,l,s),n):e.call(r,n,o,s)},i):i}function x3(t,e){return Z(e).reduce((i,r)=>{switch(r){case Lt:case hi:case Mm:case Lm:case Fm:case Bs:case uo:case qo:case Hl:case ln:case Ua:case Ln:case Ha:case co:case un:case cn:case On:case hn:case Jf:case Mi:case Wa:case sc:return i;case Jh:if(t==="line"||t==="trail")return i;case Zf:case Dm:{let n=e[r];if(K(n)||ce(n))for(let s of ve(n))s.aggregate||i.push(be(s,{}));return i}case Ns:if(t==="trail")return i;case Gi:case Pn:case zn:case fs:case ho:case fo:case mo:case po:{let n=Sr(e[r]);return n&&!n.aggregate&&i.push(be(n,{})),i}}},[])}function ZY(t){let{tooltip:e,...i}=t;if(!e)return{filteredEncoding:i};let r,n;if(K(e)){for(let s of e)s.aggregate?(r||(r=[]),r.push(s)):(n||(n=[]),n.push(s));r&&(i.tooltip=r)}else e.aggregate?i.tooltip=e:n=e;return K(n)&&n.length===1&&(n=n[0]),{customTooltipWithoutAggregatedField:n,filteredEncoding:i}}function tx(t,e,i,r=!0){if("tooltip"in i)return{tooltip:i.tooltip};let n=t.map(({fieldPrefix:o,titlePrefix:a})=>{let l=r?` of ${_3(e)}`:"";return{field:o+e.field,type:e.type,title:Te(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=KY(i).map(WY);return{tooltip:[...n,...Fn(s,$e)]}}function _3(t){let{title:e,field:i}=t;return wt(e,i)}function Jm(t,e,i,r,n){let{scale:s,axis:o}=i;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:h={}})=>{let d=_3(i);return pF(t,a,n,{mark:l,encoding:{[e]:{field:`${u}_${i.field}`,type:i.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...fe(c)?{[`${e}2`]:{field:`${c}_${i.field}`}}:{},...r,...h}})}}function pF(t,e,i,r){let{clip:n,color:s,opacity:o}=t,a=t.type;return t[e]||t[e]===void 0&&i[e]?[{...r,mark:{...i[e],...n?{clip:n}:{},...s?{color:s}:{},...o?{opacity:o}:{},...fn(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(e)}`,...Ss(t[e])?{}:t[e]}}]:[]}function C3(t,e,i){let{encoding:r}=t,n=e==="vertical"?"y":"x",s=r[n],o=r[`${n}2`],a=r[`${n}Error`],l=r[`${n}Error2`];return{continuousAxisChannelDef:w3(s,i),continuousAxisChannelDef2:w3(o,i),continuousAxisChannelDefError:w3(a,i),continuousAxisChannelDefError2:w3(l,i),continuousAxis:n}}function w3(t,e){if(t?.aggregate){let{aggregate:i,...r}=t;return i!==e&&re(Q.errorBarContinuousAxisHasCustomizedAggregate(i,e)),r}else return t}function S3(t,e){let{mark:i,encoding:r}=t,{x:n,y:s}=r;if(fn(i)&&i.orient)return i.orient;if(Ka(n)){if(Ka(s)){let o=ce(n)&&n.aggregate,a=ce(s)&&s.aggregate;if(!o&&a===e)return"vertical";if(!a&&o===e)return"horizontal";if(o===e&&a===e)throw new Error("Both x and y cannot have aggregate");return dc(s)&&!dc(n)?"horizontal":"vertical"}return"horizontal"}else{if(Ka(s))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}}var ix="boxplot",QY=["box","median","outliers","rule","ticks"],eK=new Jl(ix,mF);function tK(t){return ct(t)?"tukey":t}function mF(t,{config:e}){t={...t,encoding:rd(t.encoding,e)};let{mark:i,encoding:r,params:n,projection:s,...o}=t,a=fn(i)?i:{type:i};n&&re(Q.selectionNotSupported("boxplot"));let l=a.extent??e.boxplot.extent,u=pt("size",a,e),c=a.invalid,h=tK(l),{bins:d,timeUnits:p,transform:f,continuousAxisChannelDef:m,continuousAxis:g,groupby:b,aggregate:v,encodingWithoutContinuousAxis:y,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:w}=O5e(t,l,e),C=nc(m.field),{color:E,size:A,...D}=y,R=eo=>Jm(a,g,m,eo,e.boxplot),I=R(D),z=R(y),B=(ge(e.boxplot.box)?e.boxplot.box.color:e.mark.color)||"#4c78a8",N=R({...D,...A?{size:A}:{},color:{condition:{test:`${Ht(`lower_box_${m.field}`)} >= ${Ht(`upper_box_${m.field}`)}`,...E||{value:B}}}}),H=tx([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,y),T={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},L=h==="min-max"?H:tx([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,y),P=[...I({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:L}),...I({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:L}),...I({partName:"ticks",mark:T,positionPrefix:"lower_whisker",extraEncoding:L}),...I({partName:"ticks",mark:T,positionPrefix:"upper_whisker",extraEncoding:L})],W=[...h!=="tukey"?P:[],...z({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:_,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:H}),...N({partName:"median",mark:{type:"tick",invalid:c,...ge(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{},...u?{size:u}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:H})];if(h==="min-max")return{...o,transform:(o.transform??[]).concat(f),layer:W};let Y=Ht(`lower_box_${m.field}`),ne=Ht(`upper_box_${m.field}`),ke=`(${ne} - ${Y})`,Ae=`${Y} - ${l} * ${ke}`,G=`${ne} + ${l} * ${ke}`,$=Ht(m.field),le={joinaggregate:iK(m.field),groupby:b},me={transform:[{filter:`(${Ae} <= ${$}) && (${$} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${C}`},{op:"max",field:m.field,as:`upper_whisker_${C}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${C}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${C}`},...v],groupby:b}],layer:P},{tooltip:ie,...ue}=D,{scale:Me,axis:he}=m,gt=_3(m),ot=qi(he,["title"]),He=pF(a,"outliers",e.boxplot,{transform:[{filter:`(${$} < ${Ae}) || (${$} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...gt!==void 0?{title:gt}:{},...Me!==void 0?{scale:Me}:{},...ft(ot)?{}:{axis:ot}},...ue,...E?{color:E}:{},...w?{tooltip:w}:{}}})[0],oi,Rr=[...d,...p,le];return He?oi={transform:Rr,layer:[He,me]}:(oi=me,oi.transform.unshift(...Rr)),{...o,layer:[oi,{transform:f,layer:W}]}}function iK(t){let e=nc(t);return[{op:"q1",field:t,as:`lower_box_${e}`},{op:"q3",field:t,as:`upper_box_${e}`}]}function O5e(t,e,i){let r=S3(t,ix),{continuousAxisChannelDef:n,continuousAxis:s}=C3(t,r,ix),o=n.field,a=nc(o),l=tK(e),u=[...iK(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`${Ht(`upper_box_${a}`)} - ${Ht(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${Ht(`upper_box_${a}`)} + ${Ht(`iqr_${a}`)} * ${e}, ${Ht(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${Ht(`lower_box_${a}`)} - ${Ht(`iqr_${a}`)} * ${e}, ${Ht(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:h,...d}=t.encoding,{customTooltipWithoutAggregatedField:p,filteredEncoding:f}=ZY(d),{bins:m,timeUnits:g,aggregate:b,groupby:v,encoding:y}=y3(f,i),x=r==="vertical"?"horizontal":"vertical",_=r,w=[...m,...g,{aggregate:[...b,...u],groupby:v},...c];return{bins:m,timeUnits:g,transform:w,groupby:v,aggregate:b,continuousAxisChannelDef:n,continuousAxis:s,encodingWithoutContinuousAxis:y,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:p}}var E3="errorbar",nK=["ticks","rule"],sK=new Jl(E3,gF);function gF(t,{config:e}){t={...t,encoding:rd(t.encoding,e)};let{transform:i,continuousAxisChannelDef:r,continuousAxis:n,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=bF(t,E3,e);delete s.size;let c=Jm(a,n,r,s,e.errorbar),h=a.thickness,d=a.size,p={type:"tick",orient:o,aria:!1,...h!==void 0?{thickness:h}:{},...d!==void 0?{size:d}:{}},f=[...c({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:i,...f.length>1?{layer:f}:{...f[0]}}}function P5e(t,e){let{encoding:i}=t;if(z5e(i))return{orient:S3(t,e),inputType:"raw"};let r=I5e(i),n=B5e(i),s=i.x,o=i.y;if(r){if(n)throw new Error(`${e} cannot be both type aggregated-upper-lower and aggregated-error`);let a=i.x2,l=i.y2;if(Ke(a)&&Ke(l))throw new Error(`${e} cannot have both x2 and y2`);if(Ke(a)){if(Ka(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${e}`)}else if(Ke(l)){if(Ka(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${e}`)}throw new Error("No ranged axis")}else{let a=i.xError,l=i.xError2,u=i.yError,c=i.yError2;if(Ke(l)&&!Ke(a))throw new Error(`${e} cannot have xError2 without xError`);if(Ke(c)&&!Ke(u))throw new Error(`${e} cannot have yError2 without yError`);if(Ke(a)&&Ke(u))throw new Error(`${e} cannot have both xError and yError with both are quantiative`);if(Ke(a)){if(Ka(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ke(u)){if(Ka(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function z5e(t){return(Ke(t.x)||Ke(t.y))&&!Ke(t.x2)&&!Ke(t.y2)&&!Ke(t.xError)&&!Ke(t.xError2)&&!Ke(t.yError)&&!Ke(t.yError2)}function I5e(t){return Ke(t.x2)||Ke(t.y2)}function B5e(t){return Ke(t.xError)||Ke(t.xError2)||Ke(t.yError)||Ke(t.yError2)}function bF(t,e,i){let{mark:r,encoding:n,params:s,projection:o,...a}=t,l=fn(r)?r:{type:r};s&&re(Q.selectionNotSupported(e));let{orient:u,inputType:c}=P5e(t,e),{continuousAxisChannelDef:h,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:f,continuousAxis:m}=C3(t,u,e),{errorBarSpecificAggregate:g,postAggregateCalculates:b,tooltipSummary:v,tooltipTitleWithFieldName:y}=N5e(l,h,d,p,f,c,e,i),{[m]:x,[m==="x"?"x2":"y2"]:_,[m==="x"?"xError":"yError"]:w,[m==="x"?"xError2":"yError2"]:C,...E}=n,{bins:A,timeUnits:D,aggregate:R,groupby:I,encoding:z}=y3(E,i),B=[...R,...g],N=c!=="raw"?[]:I,H=tx(v,h,z,y);return{transform:[...a.transform??[],...A,...D,...B.length===0?[]:[{aggregate:B,groupby:N}],...b],groupby:N,continuousAxisChannelDef:h,continuousAxis:m,encodingWithoutContinuousAxis:z,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:H}}function N5e(t,e,i,r,n,s,o,a){let l=[],u=[],c=e.field,h,d=!1;if(s==="raw"){let p=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":a.errorbar.center,f=t.extent?t.extent:p==="mean"?"stderr":"iqr";if(p==="median"!=(f==="iqr")&&re(Q.errorBarCenterIsUsedWithWrongExtent(p,f,o)),f==="stderr"||f==="stdev")l=[{op:f,field:c,as:`extent_${c}`},{op:p,field:c,as:`center_${c}`}],u=[{calculate:`${Ht(`center_${c}`)} + ${Ht(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${Ht(`center_${c}`)} - ${Ht(`extent_${c}`)}`,as:`lower_${c}`}],h=[{fieldPrefix:"center_",titlePrefix:Yh(p)},{fieldPrefix:"upper_",titlePrefix:rK(p,f,"+")},{fieldPrefix:"lower_",titlePrefix:rK(p,f,"-")}],d=!0;else{let m,g,b;f==="ci"?(m="mean",g="ci0",b="ci1"):(m="median",g="q1",b="q3"),l=[{op:g,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],h=[{fieldPrefix:"upper_",titlePrefix:Kl({field:c,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Kl({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Kl({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&re(Q.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),s==="aggregated-upper-lower"?(h=[],u=[{calculate:Ht(i.field),as:`upper_${c}`},{calculate:Ht(c),as:`lower_${c}`}]):s==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`${Ht(c)} + ${Ht(r.field)}`,as:`upper_${c}`}],n?u.push({calculate:`${Ht(c)} + ${Ht(n.field)}`,as:`lower_${c}`}):u.push({calculate:`${Ht(c)} - ${Ht(r.field)}`,as:`lower_${c}`}));for(let p of u)h.push({fieldPrefix:p.as.substring(0,6),titlePrefix:$a($a(p.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:h,tooltipTitleWithFieldName:d}}function rK(t,e,i){return`${Yh(t)} ${i} ${e}`}var k3="errorband",oK=["band","borders"],aK=new Jl(k3,vF);function vF(t,{config:e}){t={...t,encoding:rd(t.encoding,e)};let{transform:i,continuousAxisChannelDef:r,continuousAxis:n,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=bF(t,k3,e),u=o,c=Jm(u,n,r,s,e.errorband),h=t.encoding.x!==void 0&&t.encoding.y!==void 0,d={type:h?"area":"rect"},p={type:h?"line":"rule"},f={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return h?(d={...d,...f,ariaRoleDescription:"errorband"},p={...p,...f,aria:!1}):u.interpolate?re(Q.errorBand1DNotSupport("interpolate")):u.tension&&re(Q.errorBand1DNotSupport("tension")),{...a,transform:i,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:l})]}}var lK={};function yF(t,e,i){let r=new Jl(t,e);lK[t]={normalizer:r,parts:i}}function uK(){return Z(lK)}yF(ix,mF,QY);yF(E3,gF,nK);yF(k3,vF,oK);var cK=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"];var xF={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},wF={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},hK=Z(xF),dK=Z(wF),$5e={header:1,headerRow:1,headerColumn:1,headerFacet:1},_F=Z($5e);var A3=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],fK={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},CF={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},eut=Z(CF);var pn="_vgsid_",pK={point:{on:"click",fields:[pn],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function rx(t){return t==="legend"||!!t?.legend}function T3(t){return rx(t)&&ge(t)}function Zm(t){return!!t?.select}function R3(t){let e=[];for(let i of t||[]){if(Zm(i))continue;let{expr:r,bind:n,...s}=i;if(n&&r){let o={...s,bind:n,init:r};e.push(o)}else{let o={...s,...r?{update:r}:{},...n?{bind:n}:{}};e.push(o)}}return e}function SF(t){return nd(t)||Qm(t)||nx(t)}function nx(t){return ae(t,"concat")}function nd(t){return ae(t,"vconcat")}function Qm(t){return ae(t,"hconcat")}function EF({step:t,offsetIsDiscrete:e}){return e?t.for??"offset":"position"}function Us(t){return ae(t,"step")}function kF(t){return ae(t,"view")||ae(t,"width")||ae(t,"height")}var AF=20,H5e={align:1,bounds:1,center:1,columns:1,spacing:1},U5e=Z(H5e);function mK(t,e,i){let r=i[e],n={},{spacing:s,columns:o}=r;s!==void 0&&(n.spacing=s),o!==void 0&&(fc(t)&&!Xl(t.facet)||nx(t))&&(n.columns=o),nd(t)&&(n.columns=1);for(let a of U5e)if(t[a]!==void 0)if(a==="spacing"){let l=t[a];n[a]=ct(l)?l:{row:l.row??s,column:l.column??s}}else n[a]=t[a];return n}function sx(t,e){return t[e]??t[e==="width"?"continuousWidth":"continuousHeight"]}function ox(t,e){let i=eg(t,e);return Us(i)?i.step:vK}function eg(t,e){let i=t[e]??t[e==="width"?"discreteWidth":"discreteHeight"];return wt(i,{step:t.step})}var vK=20,W5e={continuousWidth:200,continuousHeight:200,step:vK};var V5e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:W5e,mark:EY,arc:{},area:{},bar:AY,circle:{},geoshape:{},image:{},line:{},point:{},rect:t3,rule:{color:"black"},square:{},text:{color:"black"},tick:TY,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:cY,projection:{},legend:fK,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:pK,style:{},title:{},facet:{spacing:AF},concat:{spacing:AF},normalizedNumberFormat:".0%"},mc=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],gK={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},bK={blue:mc[0],orange:mc[1],red:mc[2],teal:mc[3],green:mc[4],yellow:mc[5],purple:mc[6],pink:mc[7],brown:mc[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function j5e(t={}){return{signals:[{name:"color",value:ge(t)?{...bK,...t}:bK}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function q5e(t){return{signals:[{name:"fontSize",value:ge(t)?{...gK,...t}:gK}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function G5e(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function yK(t){let e=Z(t||{}),i={};for(let r of e){let n=t[r];i[r]=pc(n)?z5(n):Ur(n)}return i}function X5e(t){let e=Z(t),i={};for(let r of e)i[r]=yK(t[r]);return i}var Y5e=[...e3,...dF,..._F,"background","padding","legend","lineBreak","scale","style","title","view"];function D3(t={}){let{color:e,font:i,fontSize:r,selection:n,...s}=t,o=vl({},De(V5e),i?G5e(i):{},e?j5e(e):{},r?q5e(r):{},s||{});n&&ku(o,"selection",n,!0);let a=qi(o,Y5e);for(let l of["background","lineBreak","padding"])o[l]&&(a[l]=Ur(o[l]));for(let l of e3)o[l]&&(a[l]=Ei(o[l]));for(let l of dF)o[l]&&(a[l]=yK(o[l]));for(let l of _F)o[l]&&(a[l]=Ei(o[l]));if(o.legend&&(a.legend=Ei(o.legend)),o.scale){let{invalid:l,...u}=o.scale,c=Ei(l,{level:1});a.scale={...Ei(u),...Z(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=X5e(o.style)),o.title&&(a.title=Ei(o.title)),o.view&&(a.view=Ei(o.view)),a}var K5e=new Set(["view",..._Y]),J5e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Z5e={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...SY};function xK(t){t=De(t);for(let e of J5e)delete t[e];if(t.axis)for(let e in t.axis)pc(t.axis[e])&&delete t.axis[e];if(t.legend)for(let e of cK)delete t.legend[e];if(t.mark){for(let e of tF)delete t.mark[e];t.mark.tooltip&&ge(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(R3(t.params)),delete t.params);for(let e of K5e){for(let r of tF)delete t[e][r];let i=Z5e[e];if(i)for(let r of i)delete t[e][r];e3e(t,e)}for(let e of uK())delete t[e];Q5e(t);for(let e in t)ge(t[e])&&ft(t[e])&&delete t[e];return ft(t)?void 0:t}function Q5e(t){let{titleMarkConfig:e,subtitleMarkConfig:i,subtitle:r}=O5(t.title);ft(e)||(t.style["group-title"]={...t.style["group-title"],...e}),ft(i)||(t.style["group-subtitle"]={...t.style["group-subtitle"],...i}),ft(r)?delete t.title:t.title=r}function e3e(t,e,i,r){let n=r?t[e][r]:t[e];e==="view"&&(i="cell");let s={...n,...t.style[i??e]};ft(s)||(t.style[i??e]=s),r||delete t[e]}function gc(t){return ae(t,"layer")}function TF(t){return ae(t,"repeat")}function wK(t){return!K(t.repeat)&&ae(t.repeat,"layer")}var sd=class{map(e,i){return fc(e)?this.mapFacet(e,i):TF(e)?this.mapRepeat(e,i):Qm(e)?this.mapHConcat(e,i):nd(e)?this.mapVConcat(e,i):nx(e)?this.mapConcat(e,i):this.mapLayerOrUnit(e,i)}mapLayerOrUnit(e,i){if(gc(e))return this.mapLayer(e,i);if(Er(e))return this.mapUnit(e,i);throw new Error(Q.invalidSpec(e))}mapLayer(e,i){return{...e,layer:e.layer.map(r=>this.mapLayerOrUnit(r,i))}}mapHConcat(e,i){return{...e,hconcat:e.hconcat.map(r=>this.map(r,i))}}mapVConcat(e,i){return{...e,vconcat:e.vconcat.map(r=>this.map(r,i))}}mapConcat(e,i){let{concat:r,...n}=e;return{...n,concat:r.map(s=>this.map(s,i))}}mapFacet(e,i){return{...e,spec:this.map(e.spec,i)}}mapRepeat(e,i){return{...e,spec:this.map(e.spec,i)}}};var t3e={zero:1,center:1,normalize:1};function i3e(t){return _e(t3e,t)}var r3e=new Set([eF,np,rp,Wm,Um,Gy,Xy,sp,Z5,qy]),n3e=new Set([np,rp,eF]);function tg(t){return ce(t)&&cc(t)==="quantitative"&&!t.bin}function _K(t,e,{orient:i,type:r}){let n=e==="x"?"y":"radius",s=e==="x"&&["bar","area"].includes(r),o=t[e],a=t[n];if(ce(o)&&ce(a))if(tg(o)&&tg(a)){if(o.stack)return e;if(a.stack)return n;let l=ce(o)&&!!o.aggregate,u=ce(a)&&!!a.aggregate;if(l!==u)return l?e:n;if(s){if(i==="vertical")return n;if(i==="horizontal")return e}}else{if(tg(o))return e;if(tg(a))return n}else{if(tg(o))return s&&i==="vertical"?void 0:e;if(tg(a))return s&&i==="horizontal"?void 0:n}}function s3e(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function M3(t,e){let i=fn(t)?t:{type:t},r=i.type;if(!r3e.has(r))return null;let n=_K(e,"x",i)||_K(e,"theta",i);if(!n)return null;let s=e[n],o=ce(s)?be(s,{}):void 0,a=s3e(n),l=[],u=new Set;if(e[a]){let m=e[a],g=ce(m)?be(m,{}):void 0;g&&g!==o&&(l.push(a),u.add(g))}let c=a==="x"?"xOffset":"yOffset",h=e[c],d=ce(h)?be(h,{}):void 0;d&&d!==o&&(l.push(c),u.add(d));let p=xX.reduce((m,g)=>{if(g!=="tooltip"&&Zl(e,g)){let b=e[g];for(let v of ve(b)){let y=Sr(v);if(y.aggregate)continue;let x=be(y,{});(!x||!u.has(x))&&m.push({channel:g,fieldDef:y})}}return m},[]),f;return s.stack!==void 0?Ss(s.stack)?f=s.stack?"zero":null:f=s.stack:n3e.has(r)&&(f="zero"),!f||!i3e(f)||v3(e)&&p.length===0?null:(s?.scale?.type&&s?.scale?.type!==Qi.LINEAR&&s?.stack&&re(Q.stackNonLinearScale(s.scale.type)),Ke(e[Hr(n)])?(s.stack!==void 0&&re(Q.cannotStackRangedMark(n)),null):(ce(s)&&s.aggregate&&!FX.has(s.aggregate)&&re(Q.stackNonSummativeAggregate(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:n,impute:s.impute===null?!1:In(r),stackBy:p,offset:f}))}function F3(t,e,i){let r=Ei(t),n=pt("orient",r,i);if(r.orient=l3e(r.type,e,n),n!==void 0&&n!==r.orient&&re(Q.orientOverridden(r.orient,n)),r.type==="bar"&&r.orient){let l=pt("cornerRadiusEnd",r,i);if(l!==void 0){let u=r.orient==="horizontal"&&e.x2||r.orient==="vertical"&&e.y2?["cornerRadius"]:kY[r.orient];for(let c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}let s=pt("opacity",r,i),o=pt("fillOpacity",r,i);return s===void 0&&o===void 0&&(r.opacity=a3e(r.type,e)),pt("cursor",r,i)===void 0&&(r.cursor=o3e(r,e,i)),r}function o3e(t,e,i){return e.href||t.href||pt("href",t,i)?"pointer":t.cursor}function a3e(t,e){if(qe([Um,qy,Gy,Xy],t)&&!v3(e))return .7}function CK(t,e,{graticule:i}){if(i)return!1;let r=ms("filled",t,e),n=t.type;return wt(r,n!==Um&&n!==sp&&n!==Wm)}function l3e(t,e,i){switch(t){case Um:case Gy:case Xy:case Z5:case xY:case yY:return}let{x:r,y:n,x2:s,y2:o}=e;switch(t){case np:if(ce(r)&&(di(r.bin)||ce(n)&&n.aggregate&&!r.aggregate))return"vertical";if(ce(n)&&(di(n.bin)||ce(r)&&r.aggregate&&!n.aggregate))return"horizontal";if(o||s){if(i)return i;if(!s)return(ce(r)&&r.type===Ko&&!yt(r.bin)||Jy(r))&&ce(n)&&di(n.bin)?"horizontal":"vertical";if(!o)return(ce(n)&&n.type===Ko&&!yt(n.bin)||Jy(n))&&ce(r)&&di(r.bin)?"vertical":"horizontal"}case Wm:if(s&&!(ce(r)&&di(r.bin))&&o&&!(ce(n)&&di(n.bin)))return;case rp:if(o)return ce(n)&&di(n.bin)?"horizontal":"vertical";if(s)return ce(r)&&di(r.bin)?"vertical":"horizontal";if(t===Wm){if(r&&!n)return"vertical";if(n&&!r)return"horizontal"}case sp:case qy:{let a=oF(r),l=oF(n);if(i)return i;if(a&&!l)return t!=="tick"?"horizontal":"vertical";if(!a&&l)return t!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{let u=Li(r)&&r.type===Wl,c=Li(n)&&n.type===Wl;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function u3e(t){let{point:e,line:i,...r}=t;return Z(r).length>1?r:r.type}function c3e(t){for(let e of["line","area","rule","trail"])t[e]&&(t={...t,[e]:qi(t[e],["point","line"])});return t}function RF(t,e={},i){return t.point==="transparent"?{opacity:0}:t.point?ge(t.point)?t.point:{}:t.point!==void 0?null:e.point||i.shape?ge(e.point)?e.point:{}:void 0}function SK(t,e={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:e.line?e.line===!0?{}:e.line:void 0}var L3=class{constructor(){this.name="path-overlay"}hasMatchingType(e,i){if(Er(e)){let{mark:r,encoding:n}=e,s=fn(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!RF(s,i[s.type],n);case"area":return!!RF(s,i[s.type],n)||!!SK(s,i[s.type])}}return!1}run(e,i,r){let{config:n}=i,{params:s,projection:o,mark:a,name:l,encoding:u,...c}=e,h=rd(u,n),d=fn(a)?a:{type:a},p=RF(d,n[d.type],h),f=d.type==="area"&&SK(d,n[d.type]),m=[{name:l,...s?{params:s}:{},mark:u3e({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:qi(h,["shape"])}],g=M3(F3(d,h,n),h),b=h;if(g){let{fieldChannel:v,offset:y}=g;b={...h,[v]:{...h[v],...y?{stack:y}:{}}}}return b=qi(b,["y2","x2"]),f&&m.push({...o?{projection:o}:{},mark:{type:"line",...rc(d,["clip","interpolate","tension","tooltip"]),...f},encoding:b}),p&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...rc(d,["clip","tooltip"]),...p},encoding:b}),r({...c,layer:m},{...i,config:c3e(n)})}};function AK(t,e){return e?Xl(t)?RK(t,e):TK(t,e):t}function O3(t,e){return e?RK(t,e):t}function DF(t,e,i){let r=e[t];if(NY(r)){if(r.repeat in i)return{...e,[t]:i[r.repeat]};re(Q.noSuchRepeatedValue(r.repeat));return}return e}function TK(t,e){if(t=DF("field",t,e),t!==void 0){if(t===null)return null;if(h3(t)&&Nn(t.sort)){let i=DF("field",t.sort,e);t={...t,...i?{sort:i}:{}}}return t}}function EK(t,e){if(ce(t))return TK(t,e);{let i=DF("datum",t,e);return i!==t&&!i.type&&(i.type="nominal"),i}}function kK(t,e){if(Ke(t)){let i=EK(t,e);if(i)return i;if(Yl(t))return{condition:t.condition}}else{if(id(t)){let i=EK(t.condition,e);if(i)return{...t,condition:i};{let{condition:r,...n}=t;return n}}return t}}function RK(t,e){let i={};for(let r in t)if(ae(t,r)){let n=t[r];if(K(n))i[r]=n.map(s=>kK(s,e)).filter(s=>s);else{let s=kK(n,e);s!==void 0&&(i[r]=s)}}return i}var P3=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(Er(e)){let{encoding:i,mark:r}=e;if(r==="line"||fn(r)&&r.type==="line")for(let n of bX){let s=go(n),o=i[s];if(i[n]&&(ce(o)&&!di(o.bin)||Bn(o)))return!0}}return!1}run(e,i,r){let{encoding:n,mark:s}=e;return re(Q.lineWithRange(!!n.x2,!!n.y2)),r({...e,mark:ge(s)?{...s,type:"rule"}:"rule"},i)}};var z3=class extends sd{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[eK,sK,aK,new L3,new P3]}map(e,i){if(Er(e)){let r=Zl(e.encoding,zs),n=Zl(e.encoding,Is),s=Zl(e.encoding,Rm);if(r||n||s)return this.mapFacetedUnit(e,i)}return super.map(e,i)}mapUnit(e,i){let{parentEncoding:r,parentProjection:n}=i,s=O3(e.encoding,i.repeater),o={...e,...e.name?{name:[i.repeaterPrefix,e.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||n)return this.mapUnitWithParentEncodingOrProjection(o,i);let a=this.mapLayerOrUnit.bind(this);for(let l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,i.config))return l.run(o,i,a);return o}mapRepeat(e,i){return wK(e)?this.mapLayerRepeat(e,i):this.mapNonLayerRepeat(e,i)}mapLayerRepeat(e,i){let{repeat:r,spec:n,...s}=e,{row:o,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=i;return o||a?this.mapRepeat({...e,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:n}},i):{...s,layer:l.map(h=>{let d={...u,layer:h},p=`${(n.name?`${n.name}_`:"")+c}child__layer_${Et(h)}`,f=this.mapLayerOrUnit(n,{...i,repeater:d,repeaterPrefix:p});return f.name=p,f})}}mapNonLayerRepeat(e,i){let{repeat:r,spec:n,data:s,...o}=e;!K(r)&&e.columns&&(e=qi(e,["columns"]),re(Q.columnsNotSupportByRowCol("repeat")));let a=[],{repeater:l={},repeaterPrefix:u=""}=i,c=!K(r)&&r.row||[l?l.row:null],h=!K(r)&&r.column||[l?l.column:null],d=K(r)&&r||[l?l.repeat:null];for(let f of d)for(let m of c)for(let g of h){let b={repeat:f,row:m,column:g,layer:l.layer},v=(n.name?`${n.name}_`:"")+u+"child__"+(K(r)?`${Et(f)}`:(r.row?`row_${Et(m)}`:"")+(r.column?`column_${Et(g)}`:"")),y=this.map(n,{...i,repeater:b,repeaterPrefix:v});y.name=v,a.push(qi(y,["data"]))}let p=K(r)?e.columns:r.column?r.column.length:1;return{data:n.data??s,align:"all",...o,columns:p,concat:a}}mapFacet(e,i){let{facet:r}=e;return Xl(r)&&e.columns&&(e=qi(e,["columns"]),re(Q.columnsNotSupportByRowCol("facet"))),super.mapFacet(e,i)}mapUnitWithParentEncodingOrProjection(e,i){let{encoding:r,projection:n}=e,{parentEncoding:s,parentProjection:o,config:a}=i,l=MK({parentProjection:o,projection:n}),u=DK({parentEncoding:s,encoding:O3(r,i.repeater)});return this.mapUnit({...e,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(e,i){let{row:r,column:n,facet:s,...o}=e.encoding,{mark:a,width:l,projection:u,height:c,view:h,params:d,encoding:p,...f}=e,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:n,facet:s},i),b=O3(o,i.repeater);return this.mapFacet({...f,...g,facet:m,spec:{...l?{width:l}:{},...c?{height:c}:{},...h?{view:h}:{},...u?{projection:u}:{},mark:a,encoding:b,...d?{params:d}:{}}},i)}getFacetMappingAndLayout(e,i){let{row:r,column:n,facet:s}=e;if(r||n){s&&re(Q.facetChannelDropped([...r?[zs]:[],...n?[Is]:[]]));let o={},a={};for(let l of[zs,Is]){let u=e[l];if(u){let{align:c,center:h,spacing:d,columns:p,...f}=u;o[l]=f;for(let m of["align","center","spacing"])u[m]!==void 0&&(a[m]??(a[m]={}),a[m][l]=u[m])}}return{facetMapping:o,layout:a}}else{let{align:o,center:a,spacing:l,columns:u,...c}=s;return{facetMapping:AK(c,i.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(e,{parentEncoding:i,parentProjection:r,...n}){let{encoding:s,projection:o,...a}=e,l={...n,parentEncoding:DK({parentEncoding:i,encoding:s,layer:!0}),parentProjection:MK({parentProjection:r,projection:o})};return super.mapLayer({...a,...e.name?{name:[l.repeaterPrefix,e.name].filter(u=>u).join("_")}:{}},l)}};function DK({parentEncoding:t,encoding:e={},layer:i}){let r={};if(t){let n=new Set([...Z(t),...Z(e)]);for(let s of n){let o=e[s],a=t[s];if(Ke(o)){let l={...a,...o};r[s]=l}else id(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(i||mr(a)||Te(a)||Ke(a)||K(a))&&(r[s]=a)}}else r=e;return!r||ft(r)?void 0:r}function MK(t){let{parentProjection:e,projection:i}=t;return e&&i&&re(Q.projectionOverridden({parentProjection:e,projection:i})),i??e}function ax(t){return ae(t,"filter")}function FK(t){return ae(t,"stop")}function I3(t){return ae(t,"lookup")}function LK(t){return ae(t,"data")}function OK(t){return ae(t,"param")}function PK(t){return ae(t,"pivot")}function zK(t){return ae(t,"density")}function IK(t){return ae(t,"quantile")}function BK(t){return ae(t,"regression")}function NK(t){return ae(t,"loess")}function $K(t){return ae(t,"sample")}function HK(t){return ae(t,"window")}function UK(t){return ae(t,"joinaggregate")}function WK(t){return ae(t,"flatten")}function VK(t){return ae(t,"calculate")}function B3(t){return ae(t,"bin")}function jK(t){return ae(t,"impute")}function qK(t){return ae(t,"timeUnit")}function GK(t){return ae(t,"aggregate")}function XK(t){return ae(t,"stack")}function YK(t){return ae(t,"fold")}function KK(t){return ae(t,"extent")&&!ae(t,"density")&&!ae(t,"regression")}function JK(t){return t.map(e=>ax(e)?{filter:Gh(e.filter,rY)}:e)}var N3=class extends sd{map(e,i){return i.emptySelections??(i.emptySelections={}),i.selectionPredicates??(i.selectionPredicates={}),e=ZK(e,i),super.map(e,i)}mapLayerOrUnit(e,i){if(e=ZK(e,i),e.encoding){let r={};for(let[n,s]of Ps(e.encoding))r[n]=QK(s,i);e={...e,encoding:r}}return super.mapLayerOrUnit(e,i)}mapUnit(e,i){let{selection:r,...n}=e;return r?{...n,params:Ps(r).map(([s,o])=>{let{init:a,bind:l,empty:u,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),i.emptySelections[s]=u!=="none";for(let h of ci(i.selectionPredicates[s]??{}))h.empty=u!=="none";return{name:s,value:a,select:c,bind:l}})}:e}};function ZK(t,e){let{transform:i,...r}=t;if(i){let n=i.map(s=>{if(ax(s))return{filter:MF(s,e)};if(B3(s)&&Va(s.bin))return{...s,bin:eJ(s.bin)};if(I3(s)){let{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:n}}return t}function QK(t,e){let i=De(t);if(ce(i)&&Va(i.bin)&&(i.bin=eJ(i.bin)),Zo(i)&&i.scale?.domain?.selection){let{selection:r,...n}=i.scale.domain;i.scale.domain={...n,...r?{param:r}:{}}}if(Yl(i))if(K(i.condition))i.condition=i.condition.map(r=>{let{selection:n,param:s,test:o,...a}=r;return s?r:{...a,test:MF(r,e)}});else{let{selection:r,param:n,test:s,...o}=QK(i.condition,e);i.condition=n?i.condition:{...o,test:MF(i.condition,e)}}return i}function eJ(t){let e=t.extent;if(e?.selection){let{selection:i,...r}=e;return{...t,extent:{...r,param:i}}}return t}function MF(t,e){let i=r=>Gh(r,n=>{var s;let o=e.emptySelections[n]??!0,a={param:n,empty:o};return(s=e.selectionPredicates)[n]??(s[n]=[]),e.selectionPredicates[n].push(a),a});return t.selection?i(t.selection):Gh(t.test||t.filter,r=>r.selection?i(r.selection):r)}var ig=class extends sd{map(e,i){let r=i.selections??[];if(e.params&&!Er(e)){let n=[];for(let s of e.params)Zm(s)?r.push(s):n.push(s);e.params=n}return i.selections=r,super.map(e,i)}mapUnit(e,i){let r=i.selections;if(!r||!r.length)return e;let n=(i.path??[]).concat(e.name),s=[];for(let o of r)if(!o.views||!o.views.length)s.push(o);else for(let a of o.views)(fe(a)&&(a===e.name||n.includes(a))||K(a)&&a.map(l=>n.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&s.push(o);return s.length&&(e.params=s),e}};for(let t of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){let e=ig.prototype[t];ig.prototype[t]=function(i,r){return e.call(this,i,h3e(i,r))}}function h3e(t,e){return t.name?{...e,path:(e.path??[]).concat(t.name)}:e}function $3(t,e){e===void 0&&(e=D3(t.config));let i=m3e(t,e),{width:r,height:n}=t,s=g3e(i,{width:r,height:n,autosize:t.autosize},e);return{...i,...s?{autosize:s}:{}}}var d3e=new z3,f3e=new N3,p3e=new ig;function m3e(t,e={}){let i={config:e};return p3e.map(d3e.map(f3e.map(t,i),i),i)}function tJ(t){return fe(t)?{type:t}:t??{}}function g3e(t,e,i){let{width:r,height:n}=e,s=Er(t)||gc(t),o={};s?r=="container"&&n=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):n=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(re(Q.containerSizeNonSingle("width")),r=void 0),n=="container"&&(re(Q.containerSizeNonSingle("height")),n=void 0));let a={type:"pad",...o,...i?tJ(i.autosize):{},...tJ(t.autosize)};if(a.type==="fit"&&!s&&(re(Q.FIT_NON_SINGLE),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&re(Q.containerSizeNotCompatibleWithAutosize("width")),n=="container"&&!(a.type=="fit"||a.type=="fit-y")&&re(Q.containerSizeNotCompatibleWithAutosize("height")),!Nr(a,{type:"pad"}))return a}function iJ(t){return["fit","fit-x","fit-y"].includes(t)}function rJ(t){return t?`fit-${Zh(t)}`:"fit"}var b3e=["background","padding"];function FF(t,e){let i={};for(let r of b3e)t&&t[r]!==void 0&&(i[r]=Ur(t[r]));return e&&(i.params=t.params),i}var $n=class t{constructor(e={},i={}){this.explicit=e,this.implicit=i}clone(){return new t(De(this.explicit),De(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return wt(this.explicit[e],this.implicit[e])}getWithExplicit(e){return this.explicit[e]!==void 0?{explicit:!0,value:this.explicit[e]}:this.implicit[e]!==void 0?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:i,explicit:r}){i!==void 0&&this.set(e,i,r)}set(e,i,r){return delete this[r?"implicit":"explicit"][e],this[r?"explicit":"implicit"][e]=i,this}copyKeyFromSplit(e,{explicit:i,implicit:r}){i[e]!==void 0?this.set(e,i[e],!0):r[e]!==void 0&&this.set(e,r[e],!1)}copyKeyFromObject(e,i){i[e]!==void 0&&this.set(e,i[e],!0)}copyAll(e){for(let i of Z(e.combine())){let r=e.getWithExplicit(i);this.setWithExplicit(i,r)}}};function Qo(t){return{explicit:!0,value:t}}function Hn(t){return{explicit:!1,value:t}}function H3(t){return(e,i,r,n)=>{let s=t(e.value,i.value);return s>0?e:s<0?i:rg(e,i,r,n)}}function rg(t,e,i,r){return t.explicit&&e.explicit&&re(Q.mergeConflictingProperty(i,r,t.value,e.value)),t}function Ws(t,e,i,r,n=rg){return t===void 0||t.value===void 0?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:Nr(t.value,e.value)?t:n(t,e,i,r)}var U3=class extends $n{constructor(e={},i={},r=!1){super(e,i),this.explicit=e,this.implicit=i,this.parseNothing=r}clone(){let e=super.clone();return e.parseNothing=this.parseNothing,e}};function bc(t){return ae(t,"url")}function lp(t){return ae(t,"values")}function W3(t){return ae(t,"name")&&!bc(t)&&!lp(t)&&!Ja(t)}function Ja(t){return t&&(LF(t)||OF(t)||lx(t))}function LF(t){return ae(t,"sequence")}function OF(t){return ae(t,"sphere")}function lx(t){return ae(t,"graticule")}var Pt;(function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup",t[t.PreFilterInvalid=5]="PreFilterInvalid",t[t.PostFilterInvalid=6]="PostFilterInvalid"})(Pt||(Pt={}));function PF({invalid:t,isPath:e}){switch(i3(t,{isPath:e})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:e?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:e?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function nJ(t){let{marks:e,scales:i}=PF(t);return e===i?Pt.Main:i==="include-invalid-values"?Pt.PreFilterInvalid:Pt.PostFilterInvalid}var Ge=class{constructor(e,i){this.debugName=i,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,i){if(this._children.includes(e)){re(Q.ADD_SAME_CHILD_TWICE);return}i!==void 0?this._children.splice(i,0,e):this._children.push(e)}removeChild(e){let i=this._children.indexOf(e);return this._children.splice(i,1),i}remove(){let e=this._parent.removeChild(this);for(let i of this._children)i._parent=this._parent,this._parent.addChild(i,e++)}insertAsParentOf(e){let i=e.parent;i.removeChild(this),this.parent=i,e.parent=this}swapWithParent(){let e=this._parent,i=e.parent;for(let n of this._children)n.parent=e;this._children=[],e.removeChild(this);let r=e.parent.removeChild(e);this._parent=i,i.addChild(this,r),e.parent=this}},Xi=class extends Ge{clone(){let e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}constructor(e,i,r,n){super(e,i),this.type=r,this.refCounts=n,this._source=this._name=i,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${EM()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}};function zF(t){return t.as!==void 0}function sJ(t){return`${t}_end`}var ea=class t extends Ge{clone(){return new t(null,De(this.timeUnits))}constructor(e,i){super(e),this.timeUnits=i}static makeFromEncoding(e,i){let r=i.reduceFieldDef((n,s,o)=>{let{field:a,timeUnit:l}=s;if(l){let u;if(Xa(l)){if(Rt(i)){let{mark:c,markDef:h,config:d}=i,p=Hs({fieldDef:s,markDef:h,config:d});(uc(c)||p)&&(u={timeUnit:fi(l),field:a})}}else u={as:be(s,{forAs:!0}),field:a,timeUnit:l};if(Rt(i)){let{mark:c,markDef:h,config:d}=i,p=Hs({fieldDef:s,markDef:h,config:d});uc(c)&&Ot(o)&&p!==.5&&(u.rectBandPosition=p)}u&&(n[$e(u)]=u)}return n},{});return ft(r)?null:new t(e,r)}static makeFromTransform(e,i){let{timeUnit:r,...n}={...i},s=fi(r),o={...n,timeUnit:s};return new t(e,{[$e(o)]:o})}merge(e){this.timeUnits={...this.timeUnits};for(let i in e.timeUnits)this.timeUnits[i]||(this.timeUnits[i]=e.timeUnits[i]);for(let i of e.children)e.removeChild(i),i.parent=this;e.remove()}removeFormulas(e){let i={};for(let[r,n]of Ps(this.timeUnits)){let s=zF(n)?n.as:`${n.field}_end`;e.has(s)||(i[r]=n)}this.timeUnits=i}producedFields(){return new Set(ci(this.timeUnits).map(e=>zF(e)?e.as:sJ(e.field)))}dependentFields(){return new Set(ci(this.timeUnits).map(e=>e.field))}hash(){return`TimeUnit ${$e(this.timeUnits)}`}assemble(){let e=[];for(let i of ci(this.timeUnits)){let{rectBandPosition:r}=i,n=fi(i.timeUnit);if(zF(i)){let{field:s,as:o}=i,{unit:a,utc:l,...u}=n,c=[o,`${o}_end`];e.push({field:fr(s),type:"timeunit",...a?{units:$m(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),e.push(...oJ(c,r,n))}else if(i){let{field:s}=i,o=s.replaceAll("\\.","."),a=lJ({timeUnit:n,field:o}),l=sJ(o);e.push({type:"formula",expr:a,as:l}),e.push(...oJ([o,l],r,n))}}return e}},up="offsetted_rect_start",cp="offsetted_rect_end";function lJ({timeUnit:t,field:e,reverse:i}){let{unit:r,utc:n}=t,s=qM(r),{part:o,step:a}=XM(s,t.step);return`${n?"utcOffset":"timeOffset"}('${o}', ${Ht(e)}, ${i?-a:a})`}function oJ([t,e],i,r){if(i!==void 0&&i!==.5){let n=Ht(t),s=Ht(e);return[{type:"formula",expr:aJ([lJ({timeUnit:r,field:t,reverse:!0}),n],i+.5),as:`${t}_${up}`},{type:"formula",expr:aJ([n,s],i+.5),as:`${t}_${cp}`}]}return[]}function aJ([t,e],i){return`${1-i} * ${t} + ${i} * ${e}`}var vc="_tuple_fields",IF=class{constructor(...e){this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}},v3e={defined:()=>!0,parse:(t,e,i)=>{let r=e.name,n=e.project??(e.project=new IF),s={},o={},a=new Set,l=(f,m)=>{let g=m==="visual"?f.channel:f.field,b=Et(`${r}_${g}`);for(let v=1;a.has(b);v++)b=Et(`${r}_${g}_${v}`);return a.add(b),{[m]:b}},u=e.type,c=t.config.selection[u],h=i.value!==void 0?ve(i.value):null,{fields:d,encodings:p}=ge(i.select)?i.select:{};if(!d&&!p&&h){for(let f of h)if(ge(f))for(let m of Z(f))gX(m)?(p||(p=[])).push(m):u==="interval"?(re(Q.INTERVAL_INITIALIZED_WITH_POS),p=c.encodings):(d??(d=[])).push(m)}!d&&!p&&(p=c.encodings,"fields"in c&&(d=c.fields));for(let f of p??[]){let m=t.fieldDef(f);if(m){let g=m.field;if(m.aggregate){re(Q.cannotProjectAggregate(f,m.aggregate));continue}else if(!g){re(Q.cannotProjectOnChannelWithoutField(f));continue}if(m.timeUnit&&!Xa(m.timeUnit)){g=t.vgField(f);let b={timeUnit:m.timeUnit,as:g,field:m.field};o[$e(b)]=b}if(!s[g]){let b=u==="interval"&&pr(f)&&Wr(t.getScaleComponent(f).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:f,type:b,index:n.items.length};v.signals={...l(v,"data"),...l(v,"visual")},n.items.push(s[g]=v),n.hasField[g]=s[g],n.hasSelectionId=n.hasSelectionId||g===pn,A5(f)?(v.geoChannel=f,v.channel=k5(f),n.hasChannel[v.channel]=s[g]):n.hasChannel[f]=s[g]}}else re(Q.cannotProjectOnChannelWithoutField(f))}for(let f of d??[]){if(n.hasField[f])continue;let m={type:"E",field:f,index:n.items.length};m.signals={...l(m,"data")},n.items.push(m),n.hasField[f]=m,n.hasSelectionId=n.hasSelectionId||f===pn}h&&(e.init=h.map(f=>n.items.map(m=>ge(f)?f[m.geoChannel||m.channel]!==void 0?f[m.geoChannel||m.channel]:f[m.field]:f))),ft(o)||(n.timeUnit=new ea(null,o))},signals:(t,e,i)=>{let r=e.name+vc;return i.filter(s=>s.name===r).length>0||e.project.hasSelectionId?i:i.concat({name:r,value:e.project.items.map(BF)})}},uJ=v3e;var j3="_curr",V3="anim_value",ng="anim_clock",HF="eased_anim_clock",cJ="min_extent",hJ="max_range_extent",NF="last_tick_at",$F="is_playing",y3e=1/60*1e3,x3e=(t,e)=>[{name:HF,update:ng},{name:`${t}_domain`,init:`domain('${e}')`},{name:cJ,init:`extent(${t}_domain)[0]`},{name:hJ,init:`extent(range('${e}'))[1]`},{name:V3,update:`invert('${e}', ${HF})`}],w3e={defined:t=>t.type==="point",topLevelSignals:(t,e,i)=>(Vr(e)&&(i=i.concat([{name:ng,init:"0",on:[{events:{type:"timer",throttle:y3e},update:`${$F} ? (${ng} + (now() - ${NF}) > ${hJ} ? 0 : ${ng} + (now() - ${NF})) : ${ng}`}]},{name:NF,init:"now()",on:[{events:[{signal:ng},{signal:$F}],update:"now()"}]},{name:$F,init:"true"}])),i),signals:(t,e,i)=>{let r=e.name,n=r+vc,s=e.project,o="(item().isVoronoi ? datum.datum : datum)",a=ci(t.component.selection??{}).reduce((c,h)=>h.type==="interval"?c.concat(h.name+yc):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`,u=`unit: ${Za(t)}, `;if(e.project.hasSelectionId)u+=`${pn}: ${o}[${pe(pn)}]`;else if(Vr(e))u+=`fields: ${n}, values: [${V3} ? ${V3} : ${cJ}]`;else{let c=s.items.map(h=>t.fieldDef(h.channel)?.bin?`[${o}[${pe(t.vgField(h.channel,{}))}], ${o}[${pe(t.vgField(h.channel,{binSuffix:"end"}))}]]`:`${o}[${pe(h.field)}]`).join(", ");u+=`fields: ${n}, values: [${c}]`}if(Vr(e))return i.concat(x3e(e.name,t.scaleName(co)),[{name:r+Un,on:[{events:[{signal:HF},{signal:V3}],update:`{${u}}`,force:!0}]}]);{let c=e.events;return i.concat([{name:r+Un,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}},dJ=w3e;function BF(t){let{signals:e,hasLegend:i,index:r,...n}=t;return n.field=fr(n.field),n}function xc(t,e=!0,i=$i){if(K(t)){let r=t.map(n=>xc(n,e,i));return e?`[${r.join(", ")}]`:r}else if(Yo(t))return i(e?Ga(t):XX(t));return e?i(kt(t)):t}function fJ(t,e){for(let i of ci(t.component.selection??{})){let r=i.name,n=`${r}${Un}, ${i.resolve==="global"?"true":`{unit: ${Za(t)}}`}`;for(let s of sg)s.defined(i)&&(s.signals&&(e=s.signals(t,i,e)),s.modifyExpr&&(n=s.modifyExpr(t,i,n)));e.push({name:r+yJ,on:[{events:{signal:i.name+Un},update:`modify(${pe(i.name+Qa)}, ${n})`}]})}return WF(e)}function pJ(t,e){if(t.component.selection&&Z(t.component.selection).length){let i=pe(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:Mn("pointermove","scope"),update:`isTuple(facet) ? facet : group(${i}).datum`}]})}return WF(e)}function mJ(t,e){let i=!1;for(let r of ci(t.component.selection??{})){let n=r.name,s=pe(n+Qa);if(e.filter(a=>a.name===n).length===0){let a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";e.push({name:r.name,update:`${q3}(${s}, ${pe(a)}${l}`})}i=!0;for(let a of sg)a.defined(r)&&a.topLevelSignals&&(e=a.topLevelSignals(t,r,e))}return i&&e.filter(n=>n.name==="unit").length===0&&e.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),WF(e)}function gJ(t,e){let i=[],r=[],n=Za(t,{escape:!1});for(let s of ci(t.component.selection??{})){let o={name:s.name+Qa};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:pn}}]),s.init){let l=s.project.items.map(BF);o.values=s.project.hasSelectionId?s.init.map(u=>({unit:n,[pn]:xc(u,!1)[0]})):s.init.map(u=>({unit:n,fields:l,values:xc(u,!1)}))}if([...i,...e].filter(l=>l.name===s.name+Qa).length||i.push(o),Vr(s)&&e.length){let l=t.lookupDataSource(t.getDataName(Pt.Main)),u=e.find(h=>h.name===l),c=u.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(c){u.transform=u.transform.filter(d=>d!==c);let h={name:u.name+j3,source:u.name,transform:[c]};r.push(h)}}}return i.concat(e,r)}function UF(t,e){for(let i of ci(t.component.selection??{}))for(let r of sg)r.defined(i)&&r.marks&&(e=r.marks(t,i,e));return e}function bJ(t,e){for(let i of t.children)Rt(i)&&(e=UF(i,e));return e}function vJ(t,e,i,r){let n=G3(t,e.param,e);return{signal:Wr(i.get("type"))&&K(r)&&r[0]>r[1]?`isValid(${n}) && reverse(${n})`:n}}function WF(t){return t.map(e=>(e.on&&!e.on.length&&delete e.on,e))}var _3e={defined:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,e)=>{let i=e.scales=[];for(let r of e.project.items){let n=r.channel;if(!pr(n))continue;let s=t.getScaleComponent(n),o=s?s.get("type"):void 0;if(o=="sequential"&&re(Q.SEQUENTIAL_SCALE_DEPRECATED),!s||!Wr(o)){re(Q.SCALE_BINDINGS_CONTINUOUS);continue}s.set("selectionExtent",{param:e.name,field:r.field},!0),i.push(r)}},topLevelSignals:(t,e,i)=>{let r=e.scales.filter(o=>i.filter(a=>a.name===o.signals.data).length===0);if(!t.parent||VF(t)||r.length===0)return i;let n=i.find(o=>o.name===e.name),s=n.update;if(s.includes(q3))n.update=`{${r.map(o=>`${pe(fr(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(let o of r){let a=`${pe(fr(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}n.update=s}return i.concat(r.map(o=>({name:o.signals.data})))},signals:(t,e,i)=>{if(t.parent&&!VF(t))for(let r of e.scales){let n=i.find(s=>s.name===r.signals.data);n.push="outer",delete n.value,delete n.update}return i}},yo=_3e;function ux(t,e){return`domain(${pe(t.scaleName(e))})`}function VF(t){return t.parent&&ta(t.parent)&&(!t.parent.parent||VF(t.parent.parent))}var yc="_brush",xJ="_scale_trigger",cx="geo_interval_init_tick",wJ="_init",C3e="_center",S3e={defined:t=>t.type==="interval",parse:(t,e,i)=>{var r;if(t.hasProjection){let n={...ge(i.select)?i.select:{}};n.fields=[pn],n.encodings||(n.encodings=i.value?Z(i.value):[cn,un]),i.select={type:"interval",...n}}if(e.translate&&!yo.defined(e)){let n=`!event.item || event.item.mark.name !== ${pe(e.name+yc)}`;for(let s of e.events){if(!s.between){re(`${s} is not an ordered event stream for interval selections.`);continue}let o=ve((r=s.between[0]).filter??(r.filter=[]));o.includes(n)||o.push(n)}}},signals:(t,e,i)=>{let r=e.name,n=r+Un,s=ci(e.project.hasChannel).filter(a=>a.channel===Lt||a.channel===hi),o=e.init?e.init[0]:null;if(i.push(...s.reduce((a,l)=>a.concat(E3e(t,e,l,o&&o[l.index])),[])),t.hasProjection){let a=pe(t.projectionName()),l=t.projectionName()+C3e,{x:u,y:c}=e.project.hasChannel,h=u&&u.signals.visual,d=c&&c.signals.visual,p=u?o&&o[u.index]:`${l}[0]`,f=c?o&&o[c.index]:`${l}[1]`,m=_=>t.getSizeSignalRef(_).signal,g=`[[${h?h+"[0]":"0"}, ${d?d+"[0]":"0"}],[${h?h+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(i.unshift({name:r+wJ,init:`[scale(${a}, [${u?p[0]:p}, ${c?f[0]:f}]), scale(${a}, [${u?p[1]:p}, ${c?f[1]:f}])]`}),(!u||!c)&&(i.find(w=>w.name===l)||i.unshift({name:l,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));let b=`intersect(${g}, {markname: ${pe(t.getName("marks"))}}, unit.mark)`,v=`{unit: ${Za(t)}}`,y=`vlSelectionTuples(${b}, ${v})`,x=s.map(_=>_.signals.visual);return i.concat({name:n,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...o?[{signal:cx}]:[]],update:y}]})}else{if(!yo.defined(e)){let u=r+xJ,c=s.map(h=>{let d=h.channel,{data:p,visual:f}=h.signals,m=pe(t.scaleName(d)),g=t.getScaleComponent(d).get("type"),b=Wr(g)?"+":"";return`(!isArray(${p}) || (${b}invert(${m}, ${f})[0] === ${b}${p}[0] && ${b}invert(${m}, ${f})[1] === ${b}${p}[1]))`});c.length&&i.push({name:u,value:{},on:[{events:s.map(h=>({scale:t.scaleName(h.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}let a=s.map(u=>u.signals.data),l=`unit: ${Za(t)}, fields: ${r+vc}, values`;return i.concat({name:n,...o?{init:`{${l}: ${xc(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(t,e,i)=>(Rt(t)&&t.hasProjection&&e.init&&(i.filter(n=>n.name===cx).length||i.unshift({name:cx,value:null,on:[{events:"timer{1}",update:`${cx} === null ? {} : ${cx}`}]})),i),marks:(t,e,i)=>{let r=e.name,{x:n,y:s}=e.project.hasChannel,o=n?.signals.visual,a=s?.signals.visual,l=`data(${pe(e.name+Qa)})`;if(yo.defined(e)||!n&&!s)return i;let u={x:n!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:n!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(e.resolve==="global")for(let g of Z(u))u[g]=[{test:`${l}.length && ${l}[0].unit === ${Za(t)}`,...u[g]},{value:0}];let{fill:c,fillOpacity:h,cursor:d,...p}=e.mark,f=Z(p).reduce((g,b)=>(g[b]=[{test:[n!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:p[b]},{value:null}],g),{}),m=d??(e.translate?"move":null);return[{name:`${r+yc}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:h}},update:u}},...i,{name:r+yc,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...u,...f}}}]}},_J=S3e;function E3e(t,e,i,r){let n=!t.hasProjection,s=i.channel,o=i.signals.visual,a=pe(n?t.scaleName(s):t.projectionName()),l=d=>`scale(${a}, ${d})`,u=t.getSizeSignalRef(s===Lt?"width":"height").signal,c=`${s}(unit)`,h=e.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${c}, ${c}]`},{events:p,update:`[${o}[0], clamp(${c}, 0, ${u})]`}],[]);if(n){let d=i.signals.data,p=yo.defined(e),f=t.getScaleComponent(s),m=f?f.get("type"):void 0,g=r?{init:xc(r,!0,l)}:{value:[]};return h.push({events:{signal:e.name+xJ},update:Wr(m)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[{name:o,...g,on:h},{name:d,...r?{init:xc(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{let d=s===Lt?0:1,p=e.name+wJ,f=r?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[{name:o,...f,on:h}]}}function ia({model:t,channelDef:e,vgChannel:i,invalidValueRef:r,mainRefFn:n}){let s=Yl(e)&&e.condition,o=[];s&&(o=ve(s).map(u=>{let c=n(u);if(BY(u)){let{param:h,empty:d}=u;return{test:X3(t,{param:h,empty:d}),...c}}else return{test:hp(t,u.test),...c}})),r!==void 0&&o.push(r);let a=n(e);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[i]:o}:o.length===1?{[i]:o[0]}:{}}function od(t,e="text"){let i=t.encoding[e];return ia({model:t,channelDef:i,vgChannel:e,mainRefFn:r=>og(r,t.config),invalidValueRef:void 0})}function og(t,e,i="datum"){if(t){if(mr(t))return xt(t.value);if(Ke(t)){let{format:r,formatType:n}=Km(t);return Gm({fieldOrDatumDef:t,format:r,formatType:n,expr:i,config:e})}}}function ag(t,e={}){let{encoding:i,markDef:r,config:n,stack:s}=t,o=i.tooltip;if(K(o))return{tooltip:jF({tooltip:o},s,n,e)};{let a=e.reactiveGeom?"datum.datum":"datum";return ia({model:t,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{let c=og(u,n,a);if(c)return c;if(u===null)return;let h=pt("tooltip",r,n);if(h===!0&&(h={content:"encoding"}),fe(h))return{value:h};if(ge(h))return Te(h)?h:h.content==="encoding"?jF(i,s,n,e):{signal:a}},invalidValueRef:void 0})}}function qF(t,e,i,{reactiveGeom:r}={}){let n={...i,...i.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function l(c,h){let d=go(h),p=Li(c)?c:{...c,type:t[d].type},f=p.title||Zy(p,n),m=ve(f).join(", ").replaceAll(/"/g,'\\"'),g;if(Ot(h)){let b=h==="x"?"x2":"y2",v=Sr(t[b]);if(di(p.bin)&&v){let y=be(p,{expr:o}),x=be(v,{expr:o}),{format:_,formatType:w}=Km(p);g=ap(y,x,_,w,n),s.add(b)}}if((Ot(h)||h===ln||h===Ln)&&e&&e.fieldChannel===h&&e.offset==="normalize"){let{format:b,formatType:v}=Km(p);g=Gm({fieldOrDatumDef:p,format:b,formatType:v,expr:o,config:n,normalizeStack:!0}).signal}g??(g=og(p,n,o).signal),a.push({channel:h,key:m,value:g})}ex(t,(c,h)=>{ce(c)?l(c,h):Ym(c)&&l(c.condition,h)});let u={};for(let{channel:c,key:h,value:d}of a)!s.has(c)&&!u[h]&&(u[h]=d);return u}function jF(t,e,i,{reactiveGeom:r}={}){let n=qF(t,e,i,{reactiveGeom:r}),s=Ps(n).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function GF(t){let{markDef:e,config:i}=t,r=pt("aria",e,i);return r===!1?{}:{...r?{aria:r}:{},...k3e(t),...A3e(t)}}function k3e(t){let{mark:e,markDef:i,config:r}=t;if(r.aria===!1)return{};let n=pt("ariaRoleDescription",i,r);return n!=null?{ariaRoleDescription:{value:n}}:_e(IX,e)?{}:{ariaRoleDescription:{value:e}}}function A3e(t){let{encoding:e,markDef:i,config:r,stack:n}=t,s=e.description;if(s)return ia({model:t,channelDef:s,vgChannel:"description",mainRefFn:l=>og(l,t.config),invalidValueRef:void 0});let o=pt("description",i,r);if(o!=null)return{description:xt(o)};if(r.aria===!1)return{};let a=qF(e,n,r);if(!ft(a))return{description:{signal:Ps(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function pi(t,e,i={}){let{markDef:r,encoding:n,config:s}=e,{vgChannel:o}=i,{defaultRef:a,defaultValue:l}=i,u=n[t];a===void 0&&(l??(l=pt(t,r,s,{vgChannel:o,ignoreVgConfig:!Yl(u)})),l!==void 0&&(a=xt(l)));let c={markDef:r,config:s,scaleName:e.scaleName(t),scale:e.getScaleComponent(t)},h=n3({...c,scaleChannel:t,channelDef:u});return ia({model:e,channelDef:u,vgChannel:o??t,invalidValueRef:h,mainRefFn:p=>Yy({...c,channel:t,channelDef:p,stack:null,defaultRef:a})})}function lg(t,e={filled:void 0}){let{markDef:i,encoding:r,config:n}=t,{type:s}=i,o=e.filled??pt("filled",i,n),a=qe(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=pt(o===!0?"color":void 0,i,n,{vgChannel:"fill"})??n.mark[o===!0&&"color"]??a,u=pt(o===!1?"color":void 0,i,n,{vgChannel:"stroke"})??n.mark[o===!1&&"color"],c=o?"fill":"stroke",h={...l?{fill:xt(l)}:{},...u?{stroke:xt(u)}:{}};return i.color&&(o?i.fill:i.stroke)&&re(Q.droppingColor("property",{fill:"fill"in i,stroke:"stroke"in i})),{...h,...pi("color",t,{vgChannel:c,defaultValue:o?l:u}),...pi("fill",t,{defaultValue:r.fill?l:void 0}),...pi("stroke",t,{defaultValue:r.stroke?u:void 0})}}function CJ(t){let{encoding:e,mark:i}=t,r=e.order;return!In(i)&&mr(r)?ia({model:t,channelDef:r,vgChannel:"zindex",mainRefFn:n=>xt(n.value),invalidValueRef:void 0}):{}}function wc({channel:t,markDef:e,encoding:i={},model:r,bandPosition:n}){let s=`${t}Offset`,o=e[s],a=i[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Yy({channel:s,channelDef:a,markDef:e,config:r?.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:xt(o),bandPosition:n})};let l=e[s];return l?{offsetType:"visual",offset:l}:{}}function Oi(t,e,{defaultPos:i,vgChannel:r}){let{encoding:n,markDef:s,config:o,stack:a}=e,l=n[t],u=n[Hr(t)],c=e.scaleName(t),h=e.getScaleComponent(t),{offset:d,offsetType:p}=wc({channel:t,markDef:s,encoding:n,model:e,bandPosition:.5}),f=hx({model:e,defaultPos:i,channel:t,scaleName:c,scale:h}),m=!l&&Ot(t)&&(n.latitude||n.longitude)?{field:e.getName(t)}:T3e({channel:t,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:c,scale:h,stack:a,offset:d,defaultRef:f,bandPosition:p==="encoding"?0:void 0});return m?{[r||t]:m}:void 0}function T3e(t){let{channel:e,channelDef:i,scaleName:r,stack:n,offset:s,markDef:o}=t;if(Ke(i)&&n&&e===n.fieldChannel){if(ce(i)){let a=i.bandPosition;if(a===void 0&&o.type==="text"&&(e==="radius"||e==="theta")&&(a=.5),a!==void 0)return jm({scaleName:r,fieldOrDatumDef:i,startSuffix:"start",bandPosition:a,offset:s})}return jl(i,r,{suffix:"end"},{offset:s})}return qm(t)}function hx({model:t,defaultPos:e,channel:i,scaleName:r,scale:n}){let{markDef:s,config:o}=t;return()=>{let a=go(i),l=Go(i),u=pt(i,s,o,{vgChannel:l});if(u!==void 0)return op(i,u);switch(e){case"zeroOrMin":return SJ({scaleName:r,scale:n,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return SJ({scaleName:r,scale:n,mode:{zeroOrMax:{widthSignal:t.width.signal,heightSignal:t.height.signal}},mainChannel:a,config:o});case"mid":return{...t[Fi(i)],mult:.5}}}}function SJ({mainChannel:t,config:e,...i}){let r=r3(i),{mode:n}=i;if(r)return r;switch(t){case"radius":{if(n==="zeroOrMin")return{value:0};let{widthSignal:s,heightSignal:o}=n.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return n==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return n==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return n==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}var R3e={left:"x",center:"xc",right:"x2"},D3e={top:"y",middle:"yc",bottom:"y2"};function Y3(t,e,i,r="middle"){if(t==="radius"||t==="theta")return Go(t);let n=t==="x"?"align":"baseline",s=pt(n,e,i),o;return Te(s)?(re(Q.rangeMarkAlignmentCannotBeExpression(n)),o=void 0):o=s,t==="x"?R3e[o||(r==="top"?"left":"center")]:D3e[o||r]}function ad(t,e,{defaultPos:i,defaultPos2:r,range:n}){return n?dx(t,e,{defaultPos:i,defaultPos2:r}):Oi(t,e,{defaultPos:i})}function dx(t,e,{defaultPos:i,defaultPos2:r}){let{markDef:n,config:s}=e,o=Hr(t),a=Fi(t),l=M3e(e,r,o),u=l[a]?Y3(t,n,s):Go(t);return{...Oi(t,e,{defaultPos:i,vgChannel:u}),...l}}function M3e(t,e,i){let{encoding:r,mark:n,markDef:s,stack:o,config:a}=t,l=go(i),u=Fi(i),c=Go(i),h=r[l],d=t.scaleName(l),p=t.getScaleComponent(l),{offset:f}=i in r||i in s?wc({channel:i,markDef:s,encoding:r,model:t}):wc({channel:l,markDef:s,encoding:r,model:t});if(!h&&(i==="x2"||i==="y2")&&(r.latitude||r.longitude)){let g=Fi(i),b=t.markDef[g];return b!=null?{[g]:{value:b}}:{[c]:{field:t.getName(i)}}}let m=F3e({channel:i,channelDef:h,channel2Def:r[i],markDef:s,config:a,scaleName:d,scale:p,stack:o,offset:f,defaultRef:void 0});return m!==void 0?{[c]:m}:K3(i,s)||K3(i,{[i]:I5(i,s,a.style),[u]:I5(u,s,a.style)})||K3(i,a[n])||K3(i,a.mark)||{[c]:hx({model:t,defaultPos:e,channel:i,scaleName:d,scale:p})()}}function F3e({channel:t,channelDef:e,channel2Def:i,markDef:r,config:n,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return Ke(e)&&a&&t.charAt(0)===a.fieldChannel.charAt(0)?jl(e,s,{suffix:"start"},{offset:l}):qm({channel:t,channelDef:i,scaleName:s,scale:o,stack:a,markDef:r,config:n,offset:l,defaultRef:u})}function K3(t,e){let i=Fi(t),r=Go(t);if(e[r]!==void 0)return{[r]:op(t,e[r])};if(e[t]!==void 0)return{[r]:op(t,e[t])};if(e[i]){let n=e[i];if(Vl(n))re(Q.relativeBandSizeNotSupported(i));else return{[i]:op(t,n)}}}function Wn(t,e){let{config:i,encoding:r,markDef:n}=t,s=n.type,o=Hr(e),a=Fi(e),l=r[e],u=r[o],c=t.getScaleComponent(e),h=c?c.get("type"):void 0,d=n.orient,p=r[a]??r.size??pt("size",n,i,{vgChannel:a}),f=MM(e),m=s==="bar"&&(e==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(e==="y"?d==="vertical":d==="horizontal");return ce(l)&&(yt(l.bin)||di(l.bin)||l.timeUnit&&!u)&&!(p&&!Vl(p))&&!r[f]&&!Kt(h)?P3e({fieldDef:l,fieldDef2:u,channel:e,model:t}):(Ke(l)&&Kt(h)||m)&&!u?O3e(l,e,t):dx(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function L3e(t,e,i,r,n,s,o){if(Vl(n))if(i){let l=i.get("type");if(l==="band"){let u=`bandwidth('${e}')`;n.band!==1&&(u=`${n.band} * ${u}`);let c=ms("minBandSize",{type:o},r);return{signal:c?`max(${ps(c)}, ${u})`:u}}else n.band!==1&&(re(Q.cannotUseRelativeBandSizeWithNonBandScale(l)),n=void 0)}else return{mult:n.band,field:{group:t}};else{if(Te(n))return n;if(n)return{value:n}}if(i){let l=i.get("range");if($s(l)&&ct(l.step))return{value:l.step-2}}if(!s){let{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:h}=r.scale,d=wt(l,o==="tick"?h:o==="bar"?u:c);if(Te(d))return{signal:`(1 - (${d.signal})) * ${t}`};if(ct(d))return{signal:`${1-d} * ${t}`}}return{value:ox(r.view,t)-2}}function O3e(t,e,i){let{markDef:r,encoding:n,config:s,stack:o}=i,a=r.orient,l=i.scaleName(e),u=i.getScaleComponent(e),c=Fi(e),h=Hr(e),d=MM(e),p=i.scaleName(d),f=i.getScaleComponent(Om(e)),m=r.type==="tick"||a==="horizontal"&&e==="y"||a==="vertical"&&e==="x",g;(n.size||r.size)&&(m?g=pi("size",i,{vgChannel:c,defaultRef:xt(r.size)}):re(Q.cannotApplySizeToNonOrientedMark(r.type)));let b=!!g,v=sF({channel:e,fieldDef:t,markDef:r,config:s,scaleType:(u||f)?.get("type"),useVlSizeChannel:m});g=g||{[c]:L3e(c,p||l,f||u,s,v,!!t,r.type)};let y=(u||f)?.get("type")==="band"&&Vl(v)&&!b?"top":"middle",x=Y3(e,r,s,y),_=x==="xc"||x==="yc",{offset:w,offsetType:C}=wc({channel:e,markDef:r,encoding:n,model:i,bandPosition:_?.5:0}),E=qm({channel:e,channelDef:t,markDef:r,config:s,scaleName:l,scale:u,stack:o,offset:w,defaultRef:hx({model:i,defaultPos:"mid",channel:e,scaleName:l,scale:u}),bandPosition:_?C==="encoding"?0:.5:Te(v)?{signal:`(1-${v})/2`}:Vl(v)?(1-v.band)/2:0});if(c)return{[x]:E,...g};{let A=Go(h),D=g[c],R=w?{...D,offset:w}:D;return{[x]:E,[A]:K(E)?[E[0],{...E[1],offset:R}]:{...E,offset:R}}}}function EJ(t,e,i,r,n,s,o){if(AM(t))return 0;let a=t==="x"||t==="y2",l=a?-e/2:e/2;if(Te(i)||Te(n)||Te(r)||s){let u=ps(i),c=ps(n),h=ps(r),d=ps(s),f=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${l})`:l,m=h?`${h} + `:"",g=u?`(${u} ? -1 : 1) * `:"",b=c?`(${c} + ${f})`:f;return{signal:m+g+b}}else return n=n||0,r+(i?-n-l:+n+l)}function P3e({fieldDef:t,fieldDef2:e,channel:i,model:r}){let{config:n,markDef:s,encoding:o}=r,a=r.getScaleComponent(i),l=r.scaleName(i),u=a?a.get("type"):void 0,c=a.get("reverse"),h=sF({channel:i,fieldDef:t,markDef:s,config:n,scaleType:u}),p=r.component.axes[i]?.[0]?.get("translate")??.5,f=Ot(i)?pt("binSpacing",s,n)??0:0,m=Hr(i),g=Go(i),b=Go(m),v=ms("minBandSize",s,n),{offset:y}=wc({channel:i,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:x}=wc({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),_=FY({fieldDef:t,scaleName:l}),w=EJ(i,f,c,p,y,v,_),C=EJ(m,f,c,p,x??y,v,_),E=Te(h)?{signal:`(1-${h.signal})/2`}:Vl(h)?(1-h.band)/2:.5,A=Hs({fieldDef:t,fieldDef2:e,markDef:s,config:n});if(yt(t.bin)||t.timeUnit){let D=t.timeUnit&&A!==.5;return{[b]:kJ({fieldDef:t,scaleName:l,bandPosition:E,offset:C,useRectOffsetField:D}),[g]:kJ({fieldDef:t,scaleName:l,bandPosition:Te(E)?{signal:`1-${E.signal}`}:1-E,offset:w,useRectOffsetField:D})}}else if(di(t.bin)){let D=jl(t,l,{},{offset:C});if(ce(e))return{[b]:D,[g]:jl(e,l,{},{offset:w})};if(Va(t.bin)&&t.bin.step)return{[b]:D,[g]:{signal:`scale("${l}", ${be(t,{expr:"datum"})} + ${t.bin.step})`,offset:w}}}re(Q.channelRequiredForBinned(m))}function kJ({fieldDef:t,scaleName:e,bandPosition:i,offset:r,useRectOffsetField:n}){return jm({scaleName:e,fieldOrDatumDef:t,bandPosition:i,offset:r,...n?{startSuffix:up,endSuffix:cp}:{}})}var z3e=new Set(["aria","width","height"]);function ki(t,e){let{fill:i=void 0,stroke:r=void 0}=e.color==="include"?lg(t):{};return{...I3e(t.markDef,e),...AJ("fill",i),...AJ("stroke",r),...pi("opacity",t),...pi("fillOpacity",t),...pi("strokeOpacity",t),...pi("strokeWidth",t),...pi("strokeDash",t),...CJ(t),...ag(t),...od(t,"href"),...GF(t)}}function AJ(t,e){return e?{[t]:e}:{}}function I3e(t,e){return zX.reduce((i,r)=>(!z3e.has(r)&&ae(t,r)&&e[r]!=="ignore"&&(i[r]=xt(t[r])),i),{})}function ug(t){let{config:e,markDef:i}=t,r=new Set;if(t.forEachFieldDef((n,s)=>{let o;if(!pr(s)||!(o=t.getScaleType(s)))return;let a=Qh(n.aggregate),l=Vm({scaleChannel:s,markDef:i,config:e,scaleType:o,isCountAggregate:a});if(DY(l)){let u=t.vgField(s,{expr:"datum",binSuffix:t.stack?.impute?"mid":void 0});u&&r.add(u)}}),r.size>0)return{defined:{signal:[...r].map(s=>tp(s,!0)).join(" && ")}}}function J3(t,e){if(e!==void 0)return{[t]:xt(e)}}var XF="voronoi",B3e={defined:t=>t.type==="point"&&t.nearest,parse:(t,e)=>{if(e.events)for(let i of e.events)i.markname=t.getName(XF)},marks:(t,e,i)=>{let{x:r,y:n}=e.project.hasChannel,s=t.mark;if(In(s))return re(Q.nearestNotSupportForContinuous(s)),i;let o={name:t.getName(XF),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...ag(t,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!n?"datum.datum.x || 0":"0"},y:{expr:n||!r?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},a=0,l=!1;return i.forEach((u,c)=>{let h=u.name??"";h===t.component.mark[0].name?a=c:h.includes(XF)&&(l=!0)}),l||i.splice(a+1,0,o),i}},Z3=B3e;var N3e={defined:t=>t.type==="point"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!rx(t.bind),parse:(t,e,i)=>eS(e,i),topLevelSignals:(t,e,i)=>{let r=e.name,n=e.project,s=e.bind,o=e.init&&e.init[0],a=Z3.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return n.items.forEach((l,u)=>{let c=Et(`${r}_${l.field}`);i.filter(d=>d.name===c).length||i.unshift({name:c,...o?{init:xc(o[u])}:{value:null},on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${pe(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),i},signals:(t,e,i)=>{let r=e.name,n=e.project,s=i.find(u=>u.name===r+Un),o=r+vc,a=n.items.map(u=>Et(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,i}},Q3=N3e;var cg="_toggle",$3e={defined:t=>t.type==="point"&&!Vr(t)&&!!t.toggle,signals:(t,e,i)=>i.concat({name:e.name+cg,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{let i=e.name+Un,r=e.name+cg;return`${r} ? null : ${i}, `+(e.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Za(t)}}, `)+`${r} ? ${i} : null`}},tS=$3e;var H3e={defined:t=>t.clear!==void 0&&t.clear!==!1&&!Vr(t),parse:(t,e)=>{e.clear&&(e.clear=fe(e.clear)?Mn(e.clear,"view"):e.clear)},topLevelSignals:(t,e,i)=>{if(Q3.defined(e))for(let r of e.project.items){let n=i.findIndex(s=>s.name===Et(`${e.name}_${r.field}`));n!==-1&&i[n].on.push({events:e.clear,update:"null"})}return i},signals:(t,e,i)=>{function r(n,s){n!==-1&&i[n].on&&i[n].on.push({events:e.clear,update:s})}if(e.type==="interval")for(let n of e.project.items){let s=i.findIndex(o=>o.name===n.signals.visual);if(r(s,"[0, 0]"),s===-1){let o=i.findIndex(a=>a.name===n.signals.data);r(o,"null")}}else{let n=i.findIndex(s=>s.name===e.name+Un);r(n,"null"),tS.defined(e)&&(n=i.findIndex(s=>s.name===e.name+cg),r(n,"false"))}return i}},TJ=H3e;var RJ={defined:t=>{let e=t.resolve==="global"&&t.bind&&rx(t.bind),i=t.project.items.length===1&&t.project.items[0].field!==pn;return e&&!i&&re(Q.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),e&&i},parse:(t,e,i)=>{let r=De(i);if(r.select=fe(r.select)?{type:r.select,toggle:e.toggle}:{...r.select,toggle:e.toggle},eS(e,r),ge(i.select)&&(i.select.on||i.select.clear)){let o='event.item && indexof(event.item.mark.role, "legend") < 0';for(let a of e.events)a.filter=ve(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}let n=T3(e.bind)?e.bind.legend:"click",s=fe(n)?Mn(n,"view"):ve(n);e.bind={legend:{merge:s}}},topLevelSignals:(t,e,i)=>{let r=e.name,n=T3(e.bind)&&e.bind.legend,s=o=>a=>{let l=De(a);return l.markname=o,l};for(let o of e.project.items){if(!o.hasLegend)continue;let a=`${Et(o.field)}_legend`,l=`${r}_${a}`;if(i.filter(c=>c.name===l).length===0){let c=n.merge.map(s(`${a}_symbols`)).concat(n.merge.map(s(`${a}_labels`))).concat(n.merge.map(s(`${a}_entries`)));i.unshift({name:l,...e.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:n.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return i},signals:(t,e,i)=>{let r=e.name,n=e.project,s=i.find(d=>d.name===r+Un),o=r+vc,a=n.items.filter(d=>d.hasLegend).map(d=>Et(`${r}_${Et(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;e.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);let c=i.find(d=>d.name===r+cg),h=T3(e.bind)&&e.bind.legend;return c&&(e.events?c.on.push({...c.on[0],events:h}):c.on[0].events=h),i}},DJ=RJ;function MJ(t,e,i){let r=t.fieldDef(e)?.field;for(let n of ci(t.component.selection??{})){let s=n.project.hasField[r]??n.project.hasChannel[e];if(s&&RJ.defined(n)){let o=i.get("selections")??[];o.push(n.name),i.set("selections",o,!1),s.hasLegend=!0}}}var LJ="_translate_anchor",OJ="_translate_delta",U3e={defined:t=>t.type==="interval"&&t.translate,signals:(t,e,i)=>{let r=e.name,n=yo.defined(e),s=r+LJ,{x:o,y:a}=e.project.hasChannel,l=Mn(e.translate,"scope");return n||(l=l.map(u=>(u.between[0].markname=r+yc,u))),i.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${n?ux(t,Lt):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${n?ux(t,hi):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+OJ,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&FJ(t,e,o,"width",i),a!==void 0&&FJ(t,e,a,"height",i),i}},PJ=U3e;function FJ(t,e,i,r,n){let s=e.name,o=s+LJ,a=s+OJ,l=i.channel,u=yo.defined(e),c=n.find(_=>_.name===i.signals[u?"data":"visual"]),h=t.getSizeSignalRef(r).signal,d=t.getScaleComponent(l),p=d&&d.get("type"),f=d&&d.get("reverse"),m=u?l===Lt?f?"":"-":f?"-":"":"",g=`${o}.extent_${l}`,b=`${m}${a}.${l} / ${u?`${h}`:`span(${g})`}`,v=!u||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",y=u?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",x=`${v}(${g}, ${b}${y})`;c.on.push({events:{signal:a},update:u?x:`clampRange(${x}, 0, ${h})`})}var IJ="_zoom_anchor",BJ="_zoom_delta",W3e={defined:t=>t.type==="interval"&&t.zoom,signals:(t,e,i)=>{let r=e.name,n=yo.defined(e),s=r+BJ,{x:o,y:a}=e.project.hasChannel,l=pe(t.scaleName(Lt)),u=pe(t.scaleName(hi)),c=Mn(e.zoom,"scope");return n||(c=c.map(h=>(h.markname=r+yc,h))),i.push({name:r+IJ,on:[{events:c,update:n?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(h=>h).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&zJ(t,e,o,"width",i),a!==void 0&&zJ(t,e,a,"height",i),i}},NJ=W3e;function zJ(t,e,i,r,n){let s=e.name,o=i.channel,a=yo.defined(e),l=n.find(v=>v.name===i.signals[a?"data":"visual"]),u=t.getSizeSignalRef(r).signal,c=t.getScaleComponent(o),h=c&&c.get("type"),d=a?ux(t,o):l.name,p=s+BJ,f=`${s}${IJ}.${o}`,m=!a||!c?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",g=a?h==="pow"?`, ${c.get("exponent")??1}`:h==="symlog"?`, ${c.get("constant")??1}`:"":"",b=`${m}(${d}, ${f}, ${p}${g})`;l.on.push({events:{signal:p},update:a?b:`clampRange(${b}, 0, ${u})`})}var Qa="_store",Un="_tuple",yJ="_modify";var q3="vlSelectionResolve",sg=[dJ,_J,uJ,tS,Q3,yo,DJ,TJ,PJ,NJ,Z3];function V3e(t){let e=t.parent;for(;e&&!er(e);)e=e.parent;return e}function Za(t,{escape:e}={escape:!0}){let i=e?pe(t.name):t.name,r=V3e(t);if(r){let{facet:n}=r;for(let s of $r)n[s]&&(i+=` + '__facet_${s}_' + (facet[${pe(r.vgField(s))}])`)}return i}function fx(t){return ci(t.component.selection??{}).reduce((e,i)=>e||i.project.hasSelectionId,!1)}function eS(t,e){(fe(e.select)||!e.select.on)&&delete t.events,(fe(e.select)||!e.select.clear)&&delete t.clear,(fe(e.select)||!e.select.toggle)&&delete t.toggle}function Vr(t){return t.events?.find(e=>"type"in e&&e.type==="timer")}var j3e="RawCode",q3e="Literal",G3e="Property",X3e="Identifier",Y3e="ArrayExpression",K3e="BinaryExpression",J3e="CallExpression",Z3e="ConditionalExpression",Q3e="LogicalExpression",eSe="MemberExpression",tSe="ObjectExpression",iSe="UnaryExpression";function el(t){this.type=t}el.prototype.visit=function(t){let e,i,r;if(t(this))return 1;for(e=rSe(this),i=0,r=e.length;i<r;++i)if(e[i].visit(t))return 1};function rSe(t){switch(t.type){case Y3e:return t.elements;case K3e:case Q3e:return[t.left,t.right];case J3e:return[t.callee].concat(t.arguments);case Z3e:return[t.test,t.consequent,t.alternate];case eSe:return[t.object,t.property];case tSe:return t.properties;case G3e:return[t.key,t.value];case iSe:return[t.argument];case X3e:case q3e:case j3e:default:return[]}}var Ql,We,oe,Vn,Jt,nS=1,vx=2,dp=3,ld=4,sS=5,pp=6,Vs=7,yx=8,nSe=9;Ql={};Ql[nS]="Boolean";Ql[vx]="<end>";Ql[dp]="Identifier";Ql[ld]="Keyword";Ql[sS]="Null";Ql[pp]="Numeric";Ql[Vs]="Punctuator";Ql[yx]="String";Ql[nSe]="RegularExpression";var sSe="ArrayExpression",oSe="BinaryExpression",aSe="CallExpression",lSe="ConditionalExpression",GJ="Identifier",uSe="Literal",cSe="LogicalExpression",hSe="MemberExpression",dSe="ObjectExpression",fSe="Property",pSe="UnaryExpression",jr="Unexpected token %0",mSe="Unexpected number",gSe="Unexpected string",bSe="Unexpected identifier",vSe="Unexpected reserved word",ySe="Unexpected end of input",ZF="Invalid regular expression",YF="Invalid regular expression: missing /",XJ="Octal literals are not allowed in strict mode.",xSe="Duplicate data property in object literal not allowed in strict mode",mn="ILLEGAL",gx="Disabled.",wSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),_Se=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function oS(t,e){if(!t)throw new Error("ASSERT: "+e)}function _c(t){return t>=48&&t<=57}function eL(t){return"0123456789abcdefABCDEF".includes(t)}function mx(t){return"01234567".includes(t)}function CSe(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t)}function bx(t){return t===10||t===13||t===8232||t===8233}function xx(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&wSe.test(String.fromCharCode(t))}function rS(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&_Se.test(String.fromCharCode(t))}var SSe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function YJ(){for(;oe<Vn;){let t=We.charCodeAt(oe);if(CSe(t)||bx(t))++oe;else break}}function QF(t){var e,i,r,n=0;for(i=t==="u"?4:2,e=0;e<i;++e)oe<Vn&&eL(We[oe])?(r=We[oe++],n=n*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ut({},jr,mn);return String.fromCharCode(n)}function ESe(){var t,e,i,r;for(t=We[oe],e=0,t==="}"&&Ut({},jr,mn);oe<Vn&&(t=We[oe++],!!eL(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&Ut({},jr,mn),e<=65535?String.fromCharCode(e):(i=(e-65536>>10)+55296,r=(e-65536&1023)+56320,String.fromCharCode(i,r))}function KJ(){var t,e;for(t=We.charCodeAt(oe++),e=String.fromCharCode(t),t===92&&(We.charCodeAt(oe)!==117&&Ut({},jr,mn),++oe,t=QF("u"),(!t||t==="\\"||!xx(t.charCodeAt(0)))&&Ut({},jr,mn),e=t);oe<Vn&&(t=We.charCodeAt(oe),!!rS(t));)++oe,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),We.charCodeAt(oe)!==117&&Ut({},jr,mn),++oe,t=QF("u"),(!t||t==="\\"||!rS(t.charCodeAt(0)))&&Ut({},jr,mn),e+=t);return e}function kSe(){var t,e;for(t=oe++;oe<Vn;){if(e=We.charCodeAt(oe),e===92)return oe=t,KJ();if(rS(e))++oe;else break}return We.slice(t,oe)}function ASe(){var t,e,i;return t=oe,e=We.charCodeAt(oe)===92?KJ():kSe(),e.length===1?i=dp:SSe.hasOwnProperty(e)?i=ld:e==="null"?i=sS:e==="true"||e==="false"?i=nS:i=dp,{type:i,value:e,start:t,end:oe}}function KF(){var t=oe,e=We.charCodeAt(oe),i,r=We[oe],n,s,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++oe,{type:Vs,value:String.fromCharCode(e),start:t,end:oe};default:if(i=We.charCodeAt(oe+1),i===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return oe+=2,{type:Vs,value:String.fromCharCode(e)+String.fromCharCode(i),start:t,end:oe};case 33:case 61:return oe+=2,We.charCodeAt(oe)===61&&++oe,{type:Vs,value:We.slice(t,oe),start:t,end:oe}}}if(o=We.substr(oe,4),o===">>>=")return oe+=4,{type:Vs,value:o,start:t,end:oe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return oe+=3,{type:Vs,value:s,start:t,end:oe};if(n=s.substr(0,2),r===n[1]&&"+-<>&|".includes(r)||n==="=>")return oe+=2,{type:Vs,value:n,start:t,end:oe};if(n==="//"&&Ut({},jr,mn),"<>=!+-*%&|^/".includes(r))return++oe,{type:Vs,value:r,start:t,end:oe};Ut({},jr,mn)}function TSe(t){let e="";for(;oe<Vn&&eL(We[oe]);)e+=We[oe++];return e.length===0&&Ut({},jr,mn),xx(We.charCodeAt(oe))&&Ut({},jr,mn),{type:pp,value:parseInt("0x"+e,16),start:t,end:oe}}function RSe(t){let e="0"+We[oe++];for(;oe<Vn&&mx(We[oe]);)e+=We[oe++];return(xx(We.charCodeAt(oe))||_c(We.charCodeAt(oe)))&&Ut({},jr,mn),{type:pp,value:parseInt(e,8),octal:!0,start:t,end:oe}}function $J(){var t,e,i;if(i=We[oe],oS(_c(i.charCodeAt(0))||i===".","Numeric literal must start with a decimal digit or a decimal point"),e=oe,t="",i!=="."){if(t=We[oe++],i=We[oe],t==="0"){if(i==="x"||i==="X")return++oe,TSe(e);if(mx(i))return RSe(e);i&&_c(i.charCodeAt(0))&&Ut({},jr,mn)}for(;_c(We.charCodeAt(oe));)t+=We[oe++];i=We[oe]}if(i==="."){for(t+=We[oe++];_c(We.charCodeAt(oe));)t+=We[oe++];i=We[oe]}if(i==="e"||i==="E")if(t+=We[oe++],i=We[oe],(i==="+"||i==="-")&&(t+=We[oe++]),_c(We.charCodeAt(oe)))for(;_c(We.charCodeAt(oe));)t+=We[oe++];else Ut({},jr,mn);return xx(We.charCodeAt(oe))&&Ut({},jr,mn),{type:pp,value:parseFloat(t),start:e,end:oe}}function DSe(){var t="",e,i,r,n,s=!1;for(e=We[oe],oS(e==="'"||e==='"',"String literal must starts with a quote"),i=oe,++oe;oe<Vn;)if(r=We[oe++],r===e){e="";break}else if(r==="\\")if(r=We[oe++],!r||!bx(r.charCodeAt(0)))switch(r){case"u":case"x":We[oe]==="{"?(++oe,t+=ESe()):t+=QF(r);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:mx(r)?(n="01234567".indexOf(r),n!==0&&(s=!0),oe<Vn&&mx(We[oe])&&(s=!0,n=n*8+"01234567".indexOf(We[oe++]),"0123".includes(r)&&oe<Vn&&mx(We[oe])&&(n=n*8+"01234567".indexOf(We[oe++]))),t+=String.fromCharCode(n)):t+=r;break}else r==="\r"&&We[oe]===`
`&&++oe;else{if(bx(r.charCodeAt(0)))break;t+=r}return e!==""&&Ut({},jr,mn),{type:yx,value:t,octal:s,start:i,end:oe}}function MSe(t,e){let i=t;e.includes("u")&&(i=i.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,n)=>{if(parseInt(n,16)<=1114111)return"x";Ut({},ZF)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(i)}catch{Ut({},ZF)}try{return new RegExp(t,e)}catch{return null}}function FSe(){var t,e,i,r,n;for(t=We[oe],oS(t==="/","Regular expression literal must start with a slash"),e=We[oe++],i=!1,r=!1;oe<Vn;)if(t=We[oe++],e+=t,t==="\\")t=We[oe++],bx(t.charCodeAt(0))&&Ut({},YF),e+=t;else if(bx(t.charCodeAt(0)))Ut({},YF);else if(i)t==="]"&&(i=!1);else if(t==="/"){r=!0;break}else t==="["&&(i=!0);return r||Ut({},YF),n=e.substr(1,e.length-2),{value:n,literal:e}}function LSe(){var t,e,i;for(e="",i="";oe<Vn&&(t=We[oe],!!rS(t.charCodeAt(0)));)++oe,t==="\\"&&oe<Vn?Ut({},jr,mn):(i+=t,e+=t);return i.search(/[^gimuy]/g)>=0&&Ut({},ZF,i),{value:i,literal:e}}function OSe(){var t,e,i,r;return Jt=null,YJ(),t=oe,e=FSe(),i=LSe(),r=MSe(e.value,i.value),{literal:e.literal+i.literal,value:r,regex:{pattern:e.value,flags:i.value},start:t,end:oe}}function PSe(t){return t.type===dp||t.type===ld||t.type===nS||t.type===sS}function JJ(){if(YJ(),oe>=Vn)return{type:vx,start:oe,end:oe};let t=We.charCodeAt(oe);return xx(t)?ASe():t===40||t===41||t===59?KF():t===39||t===34?DSe():t===46?_c(We.charCodeAt(oe+1))?$J():KF():_c(t)?$J():KF()}function js(){let t=Jt;return oe=t.end,Jt=JJ(),oe=t.end,t}function ZJ(){let t=oe;Jt=JJ(),oe=t}function zSe(t){let e=new el(sSe);return e.elements=t,e}function HJ(t,e,i){let r=new el(t==="||"||t==="&&"?cSe:oSe);return r.operator=t,r.left=e,r.right=i,r}function ISe(t,e){let i=new el(aSe);return i.callee=t,i.arguments=e,i}function BSe(t,e,i){let r=new el(lSe);return r.test=t,r.consequent=e,r.alternate=i,r}function tL(t){let e=new el(GJ);return e.name=t,e}function px(t){let e=new el(uSe);return e.value=t.value,e.raw=We.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function UJ(t,e,i){let r=new el(hSe);return r.computed=t==="[",r.object=e,r.property=i,r.computed||(i.member=!0),r}function NSe(t){let e=new el(dSe);return e.properties=t,e}function WJ(t,e,i){let r=new el(fSe);return r.key=e,r.value=i,r.kind=t,r}function $Se(t,e){let i=new el(pSe);return i.operator=t,i.argument=e,i.prefix=!0,i}function Ut(t,e){var i,r=Array.prototype.slice.call(arguments,2),n=e.replace(/%(\d)/g,(s,o)=>(oS(o<r.length,"Message reference must be in range"),r[o]));throw i=new Error(n),i.index=oe,i.description=n,i}function aS(t){t.type===vx&&Ut(t,ySe),t.type===pp&&Ut(t,mSe),t.type===yx&&Ut(t,gSe),t.type===dp&&Ut(t,bSe),t.type===ld&&Ut(t,vSe),Ut(t,jr,t.value)}function jn(t){let e=js();(e.type!==Vs||e.value!==t)&&aS(e)}function xi(t){return Jt.type===Vs&&Jt.value===t}function JF(t){return Jt.type===ld&&Jt.value===t}function HSe(){let t=[];for(oe=Jt.start,jn("[");!xi("]");)xi(",")?(js(),t.push(null)):(t.push(fp()),xi("]")||jn(","));return js(),zSe(t)}function VJ(){oe=Jt.start;let t=js();return t.type===yx||t.type===pp?(t.octal&&Ut(t,XJ),px(t)):tL(t.value)}function USe(){var t,e,i,r;if(oe=Jt.start,t=Jt,t.type===dp)return i=VJ(),jn(":"),r=fp(),WJ("init",i,r);if(t.type===vx||t.type===Vs)aS(t);else return e=VJ(),jn(":"),r=fp(),WJ("init",e,r)}function WSe(){var t=[],e,i,r,n={},s=String;for(oe=Jt.start,jn("{");!xi("}");)e=USe(),e.key.type===GJ?i=e.key.name:i=s(e.key.value),r="$"+i,Object.prototype.hasOwnProperty.call(n,r)?Ut({},xSe):n[r]=!0,t.push(e),xi("}")||jn(",");return jn("}"),NSe(t)}function VSe(){jn("(");let t=iL();return jn(")"),t}var jSe={if:1};function qSe(){var t,e,i;if(xi("("))return VSe();if(xi("["))return HSe();if(xi("{"))return WSe();if(t=Jt.type,oe=Jt.start,t===dp||jSe[Jt.value])i=tL(js().value);else if(t===yx||t===pp)Jt.octal&&Ut(Jt,XJ),i=px(js());else{if(t===ld)throw new Error(gx);t===nS?(e=js(),e.value=e.value==="true",i=px(e)):t===sS?(e=js(),e.value=null,i=px(e)):xi("/")||xi("/=")?(i=px(OSe()),ZJ()):aS(js())}return i}function GSe(){let t=[];if(jn("("),!xi(")"))for(;oe<Vn&&(t.push(fp()),!xi(")"));)jn(",");return jn(")"),t}function XSe(){oe=Jt.start;let t=js();return PSe(t)||aS(t),tL(t.value)}function YSe(){return jn("."),XSe()}function KSe(){jn("[");let t=iL();return jn("]"),t}function JSe(){var t,e,i;for(t=qSe();;)if(xi("."))i=YSe(),t=UJ(".",t,i);else if(xi("("))e=GSe(),t=ISe(t,e);else if(xi("["))i=KSe(),t=UJ("[",t,i);else break;return t}function jJ(){let t=JSe();if(Jt.type===Vs&&(xi("++")||xi("--")))throw new Error(gx);return t}function iS(){var t,e;if(Jt.type!==Vs&&Jt.type!==ld)e=jJ();else{if(xi("++")||xi("--"))throw new Error(gx);if(xi("+")||xi("-")||xi("~")||xi("!"))t=js(),e=iS(),e=$Se(t.value,e);else{if(JF("delete")||JF("void")||JF("typeof"))throw new Error(gx);e=jJ()}}return e}function qJ(t){let e=0;if(t.type!==Vs&&t.type!==ld)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function ZSe(){var t,e,i,r,n,s,o,a,l,u;if(t=Jt,l=iS(),r=Jt,n=qJ(r),n===0)return l;for(r.prec=n,js(),e=[t,Jt],o=iS(),s=[l,r,o];(n=qJ(Jt))>0;){for(;s.length>2&&n<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),e.pop(),i=HJ(a,l,o),s.push(i);r=js(),r.prec=n,s.push(r),e.push(Jt),i=iS(),s.push(i)}for(u=s.length-1,i=s[u],e.pop();u>1;)e.pop(),i=HJ(s[u-1].value,s[u-2],i),u-=2;return i}function fp(){var t,e,i;return t=ZSe(),xi("?")&&(js(),e=fp(),jn(":"),i=fp(),t=BSe(t,e,i)),t}function iL(){let t=fp();if(xi(","))throw new Error(gx);return t}function QJ(t){We=t,oe=0,Vn=We.length,Jt=null,ZJ();let e=iL();if(Jt.type!==vx)throw new Error("Unexpect token after expression.");return e}function rL(t){let e=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(e.push(...rL(t.object)),e.push(...rL(t.property))),e)}function eZ(t){return t.object.type==="MemberExpression"?eZ(t.object):t.object.name==="datum"}function lS(t){let e=QJ(t),i=new Set;return e.visit(r=>{r.type==="MemberExpression"&&eZ(r)&&i.add(rL(r).slice(1).join("."))}),i}var eu=class t extends Ge{clone(){return new t(null,this.model,De(this.filter))}constructor(e,i,r){super(e),this.model=i,this.filter=r,this.expr=hp(this.model,this.filter,this),this._dependentFields=lS(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}};function tZ(t,e){let i={},r=t.config.selection;if(!e||!e.length)return i;let n=0;for(let s of e){let o=Et(s.name),a=s.select,l=fe(a)?a:a.type,u=ge(a)?De(a):{type:l},c=r[l];for(let p in c)p==="fields"||p==="encodings"||(p==="mark"&&(u.mark={...c.mark,...u.mark}),(u[p]===void 0||u[p]===!0)&&(u[p]=De(c[p]??u[p])));let h=i[o]={...u,name:o,type:l,init:s.value,bind:s.bind,events:fe(u.on)?Mn(u.on,"scope"):ve(De(u.on))};if(Vr(h)&&(n++,n>1)){delete i[o];continue}let d=De(s);for(let p of sg)p.defined(h)&&p.parse&&p.parse(t,h,d)}return n>1&&re(HM),i}function X3(t,e,i,r="datum"){let n=fe(e)?e:e.param,s=Et(n),o=pe(s+Qa),a;try{a=t.getSelectionComponent(s,n)}catch{return`!!${s}`}if(a.project.timeUnit){let d=i??t.component.data.raw,p=a.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}let l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${pe(a.resolve)})`,c=`${l}${o}, ${r}${u}`,h=`length(data(${o}))`;return e.empty===!1?`${h} && ${c}`:`!${h} || ${c}`}function G3(t,e,i){let r=Et(e),n=i.encoding,s=i.field,o;try{o=t.getSelectionComponent(r,e)}catch{return r}if(!n&&!s)s=o.project.items[0].field,o.project.items.length>1&&re(UM(s));else if(n&&!s){let a=o.project.items.filter(l=>l.channel===n);!a.length||a.length>1?(s=o.project.items[0].field,re(WM(a,n,i,s))):s=a[0].field}return`${o.name}[${pe(fr(s))}]`}function iZ(t,e){for(let[i,r]of Ps(t.component.selection??{})){let n=t.getName(`lookup_${i}`);t.component.data.outputNodes[n]=r.materialized=new Xi(new eu(e,t,{param:i}),n,Pt.Lookup,t.component.data.outputNodeRefCounts)}}function hp(t,e,i){return Am(e,r=>fe(r)?r:iY(r)?X3(t,r,i):Y5(r))}function QSe(t,e){if(t)return K(t)&&!ja(t)?t.map(i=>Zy(i,e)).join(", "):t}function nL(t,e,i,r){var n,s;t.encode??(t.encode={}),(n=t.encode)[e]??(n[e]={}),(s=t.encode[e]).update??(s.update={}),t.encode[e].update[i]=r}function hg(t,e,i,r={header:!1}){let{disable:n,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...c}=t.combine();if(!n){for(let h in c){let d=h,p=GY[d],f=c[d];if(p&&p!==e&&p!=="both")delete c[d];else if(pc(f)){let{condition:m,...g}=f,b=ve(m),v=uF[d];if(v){let{vgProp:y,part:x}=v,_=[...b.map(w=>{let{test:C,...E}=w;return{test:hp(null,C),...E}}),g];nL(c,x,y,_),delete c[d]}else if(v===null){let y={signal:b.map(x=>{let{test:_,...w}=x;return`${hp(null,_)} ? ${zM(w)} : `}).join("")+zM(g)};c[d]=y}}else if(Te(f)){let m=uF[d];if(m){let{vgProp:g,part:b}=m;nL(c,b,g,f),delete c[d]}}qe(["labelAlign","labelBaseline"],d)&&c[d]===null&&delete c[d]}if(e==="grid"){if(!c.grid)return;if(c.encode){let{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},ft(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:wt(u,0)}}else{if(!r.header&&t.mainExtracted)return;if(a!==void 0){let d=a;c.encode?.labels?.update&&Te(c.encode.labels.update.text)&&(d=$a(a,"datum.label",c.encode.labels.update.text.signal)),nL(c,"labels","text",{signal:d})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(let d of g3)t.hasAxisPart(d)||delete c.encode[d];ft(c.encode)&&delete c.encode}let h=QSe(l,i);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...i.aria===!1?{aria:!1}:{},zindex:wt(u,0)}}}}function uS(t){let{axes:e}=t.component,i=[];for(let r of dn)if(e[r]){for(let n of e[r])if(!n.get("disable")&&!n.get("gridScale")){let s=r==="x"?"height":"width",o=t.getSizeSignalRef(s).signal;s!==o&&i.push({name:s,update:o})}}return i}function rZ(t,e){let{x:i=[],y:r=[]}=t;return[...i.map(n=>hg(n,"grid",e)),...r.map(n=>hg(n,"grid",e)),...i.map(n=>hg(n,"main",e)),...r.map(n=>hg(n,"main",e))].filter(n=>n)}function nZ(t,e,i,r){return Object.assign.apply(null,[{},...t.map(n=>{if(n==="axisOrient"){let s=i==="x"?"bottom":"left",o=e[i==="x"?"axisBottom":"axisLeft"]||{},a=e[i==="x"?"axisTop":"axisRight"]||{},l=new Set([...Z(o),...Z(a)]),u={};for(let c of l.values())u[c]={signal:`${r.signal} === "${s}" ? ${ps(o[c])} : ${ps(a[c])}`};return u}return e[n]})])}function sZ(t,e,i,r){let n=e==="band"?["axisDiscrete","axisBand"]:e==="point"?["axisDiscrete","axisPoint"]:JM(e)?["axisQuantitative"]:e==="time"||e==="utc"?["axisTemporal"]:[],s=t==="x"?"axisX":"axisY",o=Te(i)?"axisOrient":`axis${Yh(i)}`,a=[...n,...n.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:nZ(a,r,t,i),vgAxisConfig:nZ(l,r,t,i),axisConfigStyle:eEe([...l,...a],r)}}function eEe(t,e){let i=[{}];for(let r of t){let n=e[r]?.style;if(n){n=ve(n);for(let s of n)i.push(e.style[s])}}return Object.assign.apply(null,i)}function wx(t,e,i,r={}){let n=BM(t,i,e);if(n!==void 0)return{configFrom:"style",configValue:n};for(let s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(r[s]?.[t]!==void 0)return{configFrom:s,configValue:r[s][t]};return{}}var oL={scale:({model:t,channel:e})=>t.scaleName(e),format:({format:t})=>t,formatType:({formatType:t})=>t,grid:({fieldOrDatumDef:t,axis:e,scaleType:i})=>e.grid??tEe(i,t),gridScale:({model:t,channel:e})=>iEe(t,e),labelAlign:({axis:t,labelAngle:e,orient:i,channel:r})=>t.labelAlign||lL(e,i,r),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:i,channel:r})=>t.labelBaseline||aL(e,i,r),labelFlush:({axis:t,fieldOrDatumDef:e,channel:i})=>t.labelFlush??rEe(e.type,i),labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:i})=>t.labelOverlap??nEe(e.type,i,ce(e)&&!!e.timeUnit,ce(e)?e.sort:void 0),orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:i,fieldOrDatumDef:r,scaleType:n})=>{let s=t==="x"?"width":t==="y"?"height":void 0,o=s?e.getSizeSignalRef(s):void 0;return i.tickCount??sEe({fieldOrDatumDef:r,scaleType:n,size:o,values:i.values})},tickMinStep:oEe,title:({axis:t,model:e,channel:i})=>{if(t.title!==void 0)return t.title;let r=uL(e,i);if(r!==void 0)return r;let n=e.typedFieldDef(i),s=i==="x"?"x2":"y2",o=e.fieldDef(s);return NM(n?[nF(n)]:[],ce(o)?[nF(o)]:[])},values:({axis:t,fieldOrDatumDef:e})=>aEe(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:i})=>t.zindex??lEe(i,e)};function tEe(t,e){return!Kt(t)&&ce(e)&&!yt(e?.bin)&&!di(e?.bin)}function iEe(t,e){let i=e==="x"?"y":"x";if(t.getScaleComponent(i))return t.scaleName(i)}function oZ(t,e,i,r,n){let s=e?.labelAngle;if(s!==void 0)return Te(s)?s:Kh(s);{let{configValue:o}=wx("labelAngle",r,e?.style,n);return o!==void 0?Kh(o):i===Lt&&qe([Wy,Uy],t.type)&&!(ce(t)&&t.timeUnit)?270:void 0}}function sL(t){return`(((${t.signal} % 360) + 360) % 360)`}function aL(t,e,i,r){if(t!==void 0)if(i==="x"){if(Te(t)){let n=sL(t),s=Te(e)?`(${e.signal} === "top")`:e==="top";return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${s} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(Te(e)){let n=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${n} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(e==="top")?"bottom":"top"}else{if(Te(t)){let n=sL(t),s=Te(e)?`(${e.signal} === "left")`:e==="left";return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${s} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return r?"middle":null;if(Te(e)){let n=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(e==="left")?"top":"bottom"}}function lL(t,e,i){if(t===void 0)return;let r=i==="x",n=r?0:90,s=r?"bottom":"left";if(Te(t)){let o=sL(t),a=Te(e)?`(${e.signal} === "${s}")`:e===s;return{signal:`(${n?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${n} < ${o} && ${o} < ${180+n}) === ${a} ? "left" : "right"`}}if((t+n)%180===0)return r?null:"center";if(Te(e)){let o=n<t&&t<180+n?"===":"!==";return{signal:`${`${e.signal} ${o} "${s}"`} ? "left" : "right"`}}return(n<t&&t<180+n)==(e===s)?"left":"right"}function rEe(t,e){if(e==="x"&&qe(["quantitative","temporal"],t))return!0}function nEe(t,e,i,r){if(i&&!ge(r)||t!=="nominal"&&t!=="ordinal")return e==="log"||e==="symlog"?"greedy":!0}function aZ(t){return t==="x"?"bottom":"left"}function sEe({fieldOrDatumDef:t,scaleType:e,size:i,values:r}){if(!r&&!Kt(e)&&e!=="log"){if(ce(t)){if(yt(t.bin))return{signal:`ceil(${i.signal}/10)`};if(t.timeUnit&&qe(["month","hours","day","quarter"],fi(t.timeUnit)?.unit))return}return{signal:`ceil(${i.signal}/40)`}}}function oEe({format:t,fieldOrDatumDef:e}){if(t==="d")return 1;if(ce(e)){let{timeUnit:i}=e;if(i){let r=H5(i);if(r)return{signal:r}}}}function uL(t,e){let i=e==="x"?"x2":"y2",r=t.fieldDef(e),n=t.fieldDef(i),s=r?r.title:void 0,o=n?n.title:void 0;if(s&&o)return $M(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function aEe(t,e){let i=t.values;if(K(i))return m3(e,i);if(Te(i))return i}function lEe(t,e){return t==="rect"&&Ky(e)?1:0}var mp=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i,this._dependentFields=lS(this.transform.calculate)}static parseAllForSortIndex(e,i){return i.forEachFieldDef((r,n)=>{if(Zo(r)&&l3(r.sort)){let{field:s,timeUnit:o}=r,a=r.sort,l=a.map((u,c)=>`${Y5({field:s,timeUnit:o,equal:u})} ? ${c} : `).join("")+a.length;e=new t(e,{calculate:l,as:tu(r,n,{forAs:!0})})}}),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${$e(this.transform)}`}};function tu(t,e,i){return be(t,{prefix:e,suffix:"sort_index",...i})}function dg(t,e){return qe(["top","bottom"],e)?"column":qe(["left","right"],e)||t==="row"?"row":"column"}function Cc(t,e,i,r){let n=r==="row"?i.headerRow:r==="column"?i.headerColumn:i.headerFacet;return wt((e||{})[t],n[t],i.header[t])}function _x(t,e,i,r){let n={};for(let s of t){let o=Cc(s,e||{},i,r);o!==void 0&&(n[s]=o)}return n}var fg=["row","column"],pg=["header","footer"];function lZ(t,e){let i=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,n=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=_x(["titleAnchor","titleAngle","titleOrient"],n.header,r,e),l=dg(e,a),u=Kh(o);return{name:`${e}-title`,type:"group",role:`${l}-title`,title:{text:i,...e==="row"?{orient:"left"}:{},style:"guide-title",...cZ(u,l),...uZ(l,u,s),...fZ(r,n,e,hK,xF)}}}function uZ(t,e,i="middle"){switch(i){case"start":return{align:"left"};case"end":return{align:"right"}}let r=lL(e,t==="row"?"left":"top",t==="row"?"y":"x");return r?{align:r}:{}}function cZ(t,e){let i=aL(t,e==="row"?"left":"top",e==="row"?"y":"x",!0);return i?{baseline:i}:{}}function hZ(t,e){let i=t.component.layoutHeaders[e],r=[];for(let n of pg)if(i[n])for(let s of i[n]){let o=cEe(t,e,n,i,s);o!=null&&r.push(o)}return r}function uEe(t,e){let{sort:i}=t;return Nn(i)?{field:be(i,{expr:"datum"}),order:i.order??"ascending"}:K(i)?{field:tu(t,e,{expr:"datum"}),order:"ascending"}:{field:be(t,{expr:"datum"}),order:i??"ascending"}}function cS(t,e,i){let{format:r,formatType:n,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=_x(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,i,e),u=Gm({fieldOrDatumDef:t,format:r,formatType:n,expr:"parent",config:i}).signal,c=dg(e,a);return{text:{signal:l?$a($a(l,"datum.label",u),"datum.value",be(t,{expr:"parent"})):u},...e==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...cZ(s,c),...uZ(c,s,o),...fZ(i,t,e,dK,wF)}}function cEe(t,e,i,r,n){if(n){let s=null,{facetFieldDef:o}=r,a=t.config?t.config:void 0;if(o&&n.labels){let{labelOrient:h}=_x(["labelOrient"],o.header,a,e);(e==="row"&&!qe(["top","bottom"],h)||e==="column"&&!qe(["left","right"],h))&&(s=cS(o,e,a))}let l=er(t)&&!Xl(t.facet),u=n.axes,c=u?.length>0;if(s||c){let h=e==="row"?"height":"width";return{name:t.getName(`${e}_${i}`),type:"group",role:`${e}-${i}`,...r.facetFieldDef?{from:{data:t.getName(`${e}_domain`)},sort:uEe(o,e)}:{},...c&&l?{from:{data:t.getName(`facet_domain_${e}`)}}:{},...s?{title:s}:{},...n.sizeSignal?{encode:{update:{[h]:n.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}var hEe={column:{start:0,end:1},row:{start:1,end:0}};function dEe(t,e){return hEe[e][t]}function dZ(t,e){let i={};for(let r of $r){let n=t[r];if(n?.facetFieldDef){let{titleAnchor:s,titleOrient:o}=_x(["titleAnchor","titleOrient"],n.facetFieldDef.header,e,r),a=dg(r,o),l=dEe(s,a);l!==void 0&&(i[a]=l)}}return ft(i)?void 0:i}function fZ(t,e,i,r,n){let s={};for(let o of r){if(!n[o])continue;let a=Cc(o,e?.header,t,i);a!==void 0&&(s[n[o]]=a)}return s}function mg(t){return[...hS(t,"width"),...hS(t,"height"),...hS(t,"childWidth"),...hS(t,"childHeight")]}function hS(t,e){let i=e==="width"?"x":"y",r=t.component.layoutSize.get(e);if(!r||r==="merged")return[];let n=t.getSizeSignalRef(e).signal;if(r==="step"){let s=t.getScaleComponent(i);if(s){let o=s.get("type"),a=s.get("range");if(Kt(o)&&$s(a)){let l=t.scaleName(i);return er(t.parent)&&t.parent.component.resolve.scale[i]==="independent"?[pZ(l,a)]:[pZ(l,a),{name:n,update:cL(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){let s=n.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=sx(t.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:n,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:n,value:r}]}function pZ(t,e){let i=`${t}_step`;return Te(e.step)?{name:i,update:e.step.signal}:{name:i,value:e.step}}function cL(t,e,i){let r=e.get("type"),n=e.get("padding"),s=wt(e.get("paddingOuter"),n),o=e.get("paddingInner");return o=r==="band"?o!==void 0?o:n:1,`bandspace(${i}, ${ps(o)}, ${ps(s)}) * ${t}_step`}function dS(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}function fS(t,e){return Z(t).reduce((i,r)=>({...i,...ia({model:e,channelDef:t[r],vgChannel:r,mainRefFn:n=>xt(n.value),invalidValueRef:void 0})}),{})}function pS(t,e){if(er(e))return t==="theta"?"independent":"shared";if(ta(e))return"shared";if(bg(e))return Ot(t)||t==="theta"||t==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function gg(t,e){let i=t.scale[e],r=Ot(e)?"axis":"legend";return i==="independent"?(t[r][e]==="shared"&&re(Q.independentScaleMeansIndependentGuide(e)),"independent"):t[r][e]||"shared"}var fEe={...CF,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},hL=Z(fEe),mS=class extends $n{};var dL={symbols:pEe,gradient:mEe,labels:gEe,entries:bEe};function pEe(t,{fieldOrDatumDef:e,model:i,channel:r,legendCmpt:n,legendType:s}){if(s!=="symbol")return;let{markDef:o,encoding:a,config:l,mark:u}=i,c=o.filled&&u!=="trail",h={...$X({},i,CY),...lg(i,{filled:c})},d=n.get("symbolOpacity")??l.legend.symbolOpacity,p=n.get("symbolFillColor")??l.legend.symbolFillColor,f=n.get("symbolStrokeColor")??l.legend.symbolStrokeColor,m=d===void 0?mZ(a.opacity)??o.opacity:void 0;if(h.fill){if(r==="fill"||c&&r===Gi)delete h.fill;else if(ae(h.fill,"field"))p?delete h.fill:(h.fill=xt(l.legend.symbolBaseFillColor??"black"),h.fillOpacity=xt(m??1));else if(K(h.fill)){let g=gS(a.fill??a.color)??o.fill??(c&&o.color);g&&(h.fill=xt(g))}}if(h.stroke){if(r==="stroke"||!c&&r===Gi)delete h.stroke;else if(ae(h.stroke,"field")||f)delete h.stroke;else if(K(h.stroke)){let g=wt(gS(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(h.stroke={value:g})}}if(r!==fs){let g=ce(e)&&bZ(i,n,e);g?h.opacity=[{test:g,...xt(m??1)},xt(l.legend.unselectedOpacity)]:m&&(h.opacity=xt(m))}return h={...h,...t},ft(h)?void 0:h}function mEe(t,{model:e,legendType:i,legendCmpt:r}){if(i!=="gradient")return;let{config:n,markDef:s,encoding:o}=e,a={},u=(r.get("gradientOpacity")??n.legend.gradientOpacity)===void 0?mZ(o.opacity)||s.opacity:void 0;return u&&(a.opacity=xt(u)),a={...a,...t},ft(a)?void 0:a}function gEe(t,{fieldOrDatumDef:e,model:i,channel:r,legendCmpt:n}){let s=i.legend(r)||{},o=i.config,a=ce(e)?bZ(i,n,e):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s,h;Gl(c)?h=vo({fieldOrDatumDef:e,field:"datum.value",format:u,formatType:c,config:o}):u===void 0&&c===void 0&&o.customFormatTypes&&(e.type==="quantitative"&&o.numberFormatType?h=vo({fieldOrDatumDef:e,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):e.type==="temporal"&&o.timeFormatType&&ce(e)&&e.timeUnit===void 0&&(h=vo({fieldOrDatumDef:e,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));let d={...l?{opacity:l}:{},...h?{text:h}:{},...t};return ft(d)?void 0:d}function bEe(t,{legendCmpt:e}){return e.get("selections")?.length?{...t,fill:{value:"transparent"}}:t}function mZ(t){return gZ(t,(e,i)=>Math.max(e,i.value))}function gS(t){return gZ(t,(e,i)=>wt(e,i.value))}function gZ(t,e){if($Y(t))return ve(t.condition).reduce(e,t.value);if(mr(t))return t.value}function bZ(t,e,i){let r=e.get("selections");if(!r?.length)return;let n=pe(i.field);return r.map(s=>`(!length(data(${pe(Et(s)+Qa)})) || (${s}[${n}] && indexof(${s}[${n}], datum.value) >= 0))`).join(" || ")}var fL={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:i})=>{let{format:r,formatType:n}=e;return o3(t,t.type,r,n,i,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:i})=>{let{formatType:r}=t;return a3(r,e,i)},gradientLength:t=>{let{legend:e,legendConfig:i}=t;return e.gradientLength??i.gradientLength??_Ee(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:i})=>t.labelOverlap??e.labelOverlap??CEe(i),symbolType:({legend:t,markDef:e,channel:i,encoding:r})=>t.symbolType??yEe(e.type,i,r.shape,e.shape),title:({fieldOrDatumDef:t,config:e})=>Kl(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:i})=>{if(oc(i)&&Jo(e)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:e})=>vEe(e,t)};function vEe(t,e){let i=t.values;if(K(i))return m3(e,i);if(Te(i))return i}function yEe(t,e,i,r){if(e!=="shape"){let n=gS(i)??r;if(n)return n}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function yZ(t){let{legend:e}=t;return wt(e.type,xEe(t))}function xEe({channel:t,timeUnit:e,scaleType:i}){if(oc(t)){if(qe(["quarter","month","day"],e))return"symbol";if(Jo(i))return"gradient"}return"symbol"}function xZ({legendConfig:t,legendType:e,orient:i,legend:r}){return r.direction??t[e?"gradientDirection":"symbolDirection"]??wEe(i,e)}function wEe(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return e==="gradient"?"horizontal":void 0}}function _Ee({legendConfig:t,model:e,direction:i,orient:r,scaleType:n}){let{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=t;if(Jo(n))return i==="horizontal"?r==="top"||r==="bottom"?vZ(e,"width",o,s):o:vZ(e,"height",l,a)}function vZ(t,e,i,r){return{signal:`clamp(${t.getSizeSignalRef(e).signal}, ${i}, ${r})`}}function CEe(t){if(qe(["quantile","threshold","log","symlog"],t))return"greedy"}function pL(t){let e=Rt(t)?SEe(t):TEe(t);return t.component.legends=e,e}function SEe(t){let{encoding:e}=t,i={};for(let r of[Gi,...A3]){let n=qt(e[r]);!n||!t.getScaleComponent(r)||r===Mi&&ce(n)&&n.type===Ya||(i[r]=AEe(t,r))}return i}function EEe(t,e){let i=t.scaleName(e);if(t.mark==="trail"){if(e==="color")return{stroke:i};if(e==="size")return{strokeWidth:i}}return e==="color"?t.markDef.filled?{fill:i}:{stroke:i}:{[e]:i}}function kEe(t,e,i,r){switch(e){case"disable":return i!==void 0;case"values":return!!i?.values;case"title":if(e==="title"&&t===r?.title)return!0}return t===(i||{})[e]}function AEe(t,e){let i=t.legend(e),{markDef:r,encoding:n,config:s}=t,o=s.legend,a=new mS({},EEe(t,e));MJ(t,e,a);let l=i!==void 0?!i:o.disable;if(a.set("disable",l,i!==void 0),l)return a;i=i||{};let u=t.getScaleComponent(e).get("type"),c=qt(n[e]),h=ce(c)?fi(c.timeUnit)?.unit:void 0,d=i.orient||s.legend.orient||"right",p=yZ({legend:i,channel:e,timeUnit:h,scaleType:u}),f=xZ({legend:i,legendType:p,orient:d,legendConfig:o}),m={legend:i,channel:e,model:t,markDef:r,encoding:n,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:u,orient:d,legendType:p,direction:f};for(let x of hL){if(p==="gradient"&&x.startsWith("symbol")||p==="symbol"&&x.startsWith("gradient"))continue;let _=x in fL?fL[x](m):i[x];if(_!==void 0){let w=kEe(_,x,i,t.fieldDef(e));(w||s.legend[x]===void 0)&&a.set(x,_,w)}}let g=i?.encoding??{},b=a.get("selections"),v={},y={fieldOrDatumDef:c,model:t,channel:e,legendCmpt:a,legendType:p};for(let x of["labels","legend","title","symbols","gradient","entries"]){let _=fS(g[x]??{},t),w=x in dL?dL[x](_,y):_;w!==void 0&&!ft(w)&&(v[x]={...b?.length&&ce(c)?{name:`${Et(c.field)}_legend_${x}`}:{},...b?.length?{interactive:!!b}:{},update:w})}return ft(v)||a.set("encode",v,!!i?.encoding),a}function TEe(t){let{legends:e,resolve:i}=t.component;for(let r of t.children){pL(r);for(let n of Z(r.component.legends))i.legend[n]=gg(t.component.resolve,n),i.legend[n]==="shared"&&(e[n]=mL(e[n],r.component.legends[n]),e[n]||(i.legend[n]="independent",delete e[n]))}for(let r of Z(e))for(let n of t.children)n.component.legends[r]&&i.legend[r]==="shared"&&delete n.component.legends[r];return e}function mL(t,e){if(!t)return e.clone();let i=t.getWithExplicit("orient"),r=e.getWithExplicit("orient");if(i.explicit&&r.explicit&&i.value!==r.value)return;let n=!1;for(let s of hL){let o=Ws(t.getWithExplicit(s),e.getWithExplicit(s),s,"legend",(a,l)=>{switch(s){case"symbolType":return REe(a,l);case"title":return N5(a,l);case"type":return n=!0,Hn("symbol")}return rg(a,l,s,"legend")});t.setWithExplicit(s,o)}return n&&(t.implicit?.encode?.gradient&&Ny(t.implicit,["encode","gradient"]),t.explicit?.encode?.gradient&&Ny(t.explicit,["encode","gradient"])),t}function REe(t,e){return e.value==="circle"?e:t}function DEe(t,e,i,r){var n,s;t.encode??(t.encode={}),(n=t.encode)[e]??(n[e]={}),(s=t.encode[e]).update??(s.update={}),t.encode[e].update[i]=r}function bS(t){let e=t.component.legends,i={};for(let n of Z(e)){let s=t.getScaleComponent(n),o=kt(s.get("domains"));if(i[o])for(let a of i[o])mL(a,e[n])||i[o].push(e[n]);else i[o]=[e[n].clone()]}return ci(i).flat().map(n=>MEe(n,t.config)).filter(n=>n!==void 0)}function MEe(t,e){let{disable:i,labelExpr:r,selections:n,...s}=t.combine();if(!i){if(e.aria===!1&&s.aria==null&&(s.aria=!1),s.encode?.symbols){let o=s.encode.symbols.update;o.fill&&o.fill.value!=="transparent"&&!o.stroke&&!s.stroke&&(o.stroke={value:"transparent"});for(let a of A3)s[a]&&delete o[a]}if(s.title||delete s.title,r!==void 0){let o=r;s.encode?.labels?.update&&Te(s.encode.labels.update.text)&&(o=$a(r,"datum.label",s.encode.labels.update.text.signal)),DEe(s,"labels","text",{signal:o})}return s}}function wZ(t){return ta(t)||bg(t)?FEe(t):_Z(t)}function FEe(t){return t.children.reduce((e,i)=>e.concat(i.assembleProjections()),_Z(t))}function _Z(t){let e=t.component.projection;if(!e||e.merged)return[];let i=e.combine(),{name:r}=i;if(e.data){let n={signal:`[${e.size.map(o=>o.signal).join(", ")}]`},s=e.data.reduce((o,a)=>{let l=Te(a)?a.signal:`data('${t.lookupDataSource(a)}')`;return qe(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:n,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...i}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...i}]}var CZ=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];var Cx=class extends $n{constructor(e,i,r,n){super({...i},{name:e}),this.specifiedProjection=i,this.size=r,this.data=n,this.merged=!1}get isFit(){return!!this.data}};function gL(t){t.component.projection=Rt(t)?LEe(t):zEe(t)}function LEe(t){if(t.hasProjection){let e=Ei(t.specifiedProjection),i=!(e&&(e.scale!=null||e.translate!=null)),r=i?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,n=i?OEe(t):void 0,s=new Cx(t.projectionName(!0),{...Ei(t.config.projection),...e},r,n);return s.get("type")||s.set("type","equalEarth",!1),s}}function OEe(t){let e=[],{encoding:i}=t;for(let r of[[cn,un],[hn,On]])(qt(i[r[0]])||qt(i[r[1]]))&&e.push({signal:t.getName(`geojson_${e.length}`)});return t.channelHasField(Mi)&&t.typedFieldDef(Mi).type===Ya&&e.push({signal:t.getName(`geojson_${e.length}`)}),e.length===0&&e.push(t.requestDataName(Pt.Main)),e}function PEe(t,e){let i=_5(CZ,n=>!!(!_e(t.explicit,n)&&!_e(e.explicit,n)||_e(t.explicit,n)&&_e(e.explicit,n)&&Nr(t.get(n),e.get(n))));if(Nr(t.size,e.size)){if(i)return t;if(Nr(t.explicit,{}))return e;if(Nr(e.explicit,{}))return t}return null}function zEe(t){if(t.children.length===0)return;let e;for(let r of t.children)gL(r);let i=_5(t.children,r=>{let n=r.component.projection;if(n)if(e){let s=PEe(e,n);return s&&(e=s),!!s}else return e=n,!0;else return!0});if(e&&i){let r=t.projectionName(!0),n=new Cx(r,e.specifiedProjection,e.size,De(e.data));for(let s of t.children){let o=s.component.projection;o&&(o.isFit&&n.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return n}}function IEe(t,e,i,r){if(ql(e,i)){let n=Rt(t)?t.axis(i)??t.legend(i)??{}:{},s=be(e,{expr:"datum"}),o=be(e,{expr:"datum",binSuffix:"end"});return{formulaAs:be(e,{binSuffix:"range",forAs:!0}),formula:ap(s,o,n.format,n.formatType,r)}}return{}}function EZ(t,e){return`${L5(t)}_${e}`}function BEe(t,e){return{signal:t.getName(`${e}_bins`),extentSignal:t.getName(`${e}_extent`)}}function vg(t,e,i){let r=Bm(i,void 0)??{},n=EZ(r,e);return t.getName(`${n}_bins`)}function NEe(t){return"as"in t}function SZ(t,e,i){let r,n;NEe(t)?r=fe(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:r=[be(t,{forAs:!0}),be(t,{binSuffix:"end",forAs:!0})];let s={...Bm(e,void 0)},o=EZ(s,t.field),{signal:a,extentSignal:l}=BEe(i,o);if(Im(s.extent)){let c=s.extent;n=G3(i,c.param,c),delete s.extent}let u={bin:s,field:t.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...n?{span:n}:{}};return{key:o,binComponent:u}}var tl=class t extends Ge{clone(){return new t(null,De(this.bins))}constructor(e,i){super(e),this.bins=i}static makeFromEncoding(e,i){let r=i.reduceFieldDef((n,s,o)=>{if(Li(s)&&yt(s.bin)){let{key:a,binComponent:l}=SZ(s,s.bin,i);n[a]={...l,...n[a],...IEe(i,s,o,i.config)}}return n},{});return ft(r)?null:new t(e,r)}static makeFromTransform(e,i,r){let{key:n,binComponent:s}=SZ(i,i.bin,r);return new t(e,{[n]:s})}merge(e,i){for(let r of Z(e.bins))r in this.bins?(i(e.bins[r].signal,this.bins[r].signal),this.bins[r].as=Fn([...this.bins[r].as,...e.bins[r].as],$e)):this.bins[r]=e.bins[r];for(let r of e.children)e.removeChild(r),r.parent=this;e.remove()}producedFields(){return new Set(ci(this.bins).map(e=>e.as).flat(2))}dependentFields(){return new Set(ci(this.bins).map(e=>e.field))}hash(){return`Bin ${$e(this.bins)}`}assemble(){return ci(this.bins).flatMap(e=>{let i=[],[r,...n]=e.as,{extent:s,...o}=e.bin,a={type:"bin",field:fr(e.field),as:r,signal:e.signal,...Im(s)?{extent:null}:{extent:s},...e.span?{span:{signal:`span(${e.span})`}}:{},...o};!s&&e.extentSignal&&(i.push({type:"extent",field:fr(e.field),signal:e.extentSignal}),a.extent={signal:e.extentSignal}),i.push(a);for(let l of n)for(let u=0;u<2;u++)i.push({type:"formula",expr:be({field:r[u]},{expr:"datum"}),as:l[u]});return e.formula&&i.push({type:"formula",expr:e.formula,as:e.formulaAs}),i})}};function $Ee(t,e,i,r){let n=Rt(r)?r.encoding[Hr(e)]:void 0;if(Li(i)&&Rt(r)&&d3(i,n,r.markDef,r.config)){t.add(be(i,{})),t.add(be(i,{suffix:"end"}));let{mark:s,markDef:o,config:a}=r,l=Hs({fieldDef:i,markDef:o,config:a});uc(s)&&l!==.5&&Ot(e)&&(t.add(be(i,{suffix:up})),t.add(be(i,{suffix:cp}))),i.bin&&ql(i,e)&&t.add(be(i,{binSuffix:"range"}))}else if(A5(e)){let s=k5(e);t.add(r.getName(s))}else t.add(be(i));return Zo(i)&&fY(i.scale?.range)&&t.add(i.scale.range.field),t}function HEe(t,e){for(let i of Z(e)){let r=e[i];for(let n of Z(r))i in t?t[i][n]=new Set([...t[i][n]??[],...r[n]]):t[i]={[n]:r[n]}}}var xo=class t extends Ge{clone(){return new t(null,new Set(this.dimensions),De(this.measures))}constructor(e,i,r){super(e),this.dimensions=i,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(e,i){let r=!1;i.forEachFieldDef(o=>{o.aggregate&&(r=!0)});let n={},s=new Set;return!r||(i.forEachFieldDef((o,a)=>{let{aggregate:l,field:u}=o;if(l)if(l==="count")n["*"]??(n["*"]={}),n["*"].count=new Set([be(o,{forAs:!0})]);else{if(bo(l)||Xo(l)){let c=bo(l)?"argmin":"argmax",h=l[c];n[h]??(n[h]={}),n[h][c]=new Set([be({op:c,field:h},{forAs:!0})])}else n[u]??(n[u]={}),n[u][l]=new Set([be(o,{forAs:!0})]);pr(a)&&i.scaleDomain(a)==="unaggregated"&&(n[u]??(n[u]={}),n[u].min=new Set([be({field:u,aggregate:"min"},{forAs:!0})]),n[u].max=new Set([be({field:u,aggregate:"max"},{forAs:!0})]))}else $Ee(s,a,o,i)}),s.size+Z(n).length===0)?null:new t(e,s,n)}static makeFromTransform(e,i){var r;let n=new Set,s={};for(let o of i.aggregate){let{op:a,field:l,as:u}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([u||be(o,{forAs:!0})])):(s[l]??(s[l]={}),(r=s[l])[a]??(r[a]=new Set),s[l][a].add(u||be(o,{forAs:!0}))))}for(let o of i.groupby??[])n.add(o);return n.size+Z(s).length===0?null:new t(e,n,s)}merge(e){return CM(this.dimensions,e.dimensions)?(HEe(this.measures,e.measures),!0):(VX("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Z(this.measures)])}producedFields(){let e=new Set;for(let i of Z(this.measures))for(let r of Z(this.measures[i])){let n=this.measures[i][r];n.size===0?e.add(`${r}_${i}`):n.forEach(e.add,e)}return e}hash(){return`Aggregate ${$e({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let e=[],i=[],r=[];for(let s of Z(this.measures))for(let o of Z(this.measures[s]))for(let a of this.measures[s][o])r.push(a),e.push(o),i.push(s==="*"?null:fr(s));return{type:"aggregate",groupby:[...this.dimensions].map(fr),ops:e,fields:i,as:r}}};var na=class extends Ge{constructor(e,i,r,n){super(e),this.model=i,this.name=r,this.data=n;for(let s of $r){let o=i.facet[s];if(o){let{bin:a,sort:l}=o;this[s]={name:i.getName(`${s}_domain`),fields:[be(o),...yt(a)?[be(o,{binSuffix:"end"})]:[]],...Nn(l)?{sortField:l}:K(l)?{sortIndexField:tu(o,s)}:{}}}}this.childModel=i.child}hash(){let e="Facet";for(let i of $r)this[i]&&(e+=` ${i.charAt(0)}:${$e(this[i])}`);return e}get fields(){let e=[];for(let i of $r)this[i]?.fields&&e.push(...this[i].fields);return e}dependentFields(){let e=new Set(this.fields);for(let i of $r)this[i]&&(this[i].sortField&&e.add(this[i].sortField.field),this[i].sortIndexField&&e.add(this[i].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let e={};for(let i of dn){let r=this.childModel.component.scales[i];if(r&&!r.merged){let n=r.get("type"),s=r.get("range");if(Kt(n)&&$s(s)){let o=ud(this.childModel,i),a=yg(o);a?e[i]=a:re(Q.unknownField(i))}}}return e}assembleRowColumnHeaderData(e,i,r){let n={row:"y",column:"x",facet:void 0}[e],s=[],o=[],a=[];n&&r&&r[n]&&(i?(s.push(`distinct_${r[n]}`),o.push("max")):(s.push(r[n]),o.push("distinct")),a.push(`distinct_${r[n]}`));let{sortField:l,sortIndexField:u}=this[e];if(l){let{op:c=td,field:h}=l;s.push(h),o.push(c),a.push(be(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[e].name,source:i??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(e){let{columns:i}=this.model.layout,{layoutHeaders:r}=this.model.component,n=[],s={};for(let l of fg){for(let u of pg){let c=(r[l]&&r[l][u])??[];for(let h of c)if(h.axes?.length>0){s[l]=!0;break}}if(s[l]){let u=`length(data("${this.facet.name}"))`,c=l==="row"?i?{signal:`ceil(${u} / ${i})`}:1:i?{signal:`min(${u}, ${i})`}:{signal:u};n.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:c}]})}}let{row:o,column:a}=s;return(o||a)&&n.unshift(this.assembleRowColumnHeaderData("facet",null,e)),n}assemble(){let e=[],i=null,r=this.getChildIndependentFieldsWithStep(),{column:n,row:s,facet:o}=this;if(n&&s&&(r.x||r.y)){i=`cross_${this.column.name}_${this.row.name}`;let a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");e.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(let a of[Is,zs])this[a]&&e.push(this.assembleRowColumnHeaderData(a,i,r));if(o){let a=this.assembleFacetHeaderData(r);a&&e.push(...a)}return e}};function kZ(t){return t.startsWith("'")&&t.endsWith("'")||t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function UEe(t,e){let i=$y(t);if(e==="number")return`toNumber(${i})`;if(e==="boolean")return`toBoolean(${i})`;if(e==="string")return`toString(${i})`;if(e==="date")return`toDate(${i})`;if(e==="flatten")return i;if(e.startsWith("date:")){let r=kZ(e.slice(5,e.length));return`timeParse(${i},'${r}')`}else if(e.startsWith("utc:")){let r=kZ(e.slice(4,e.length));return`utcParse(${i},'${r}')`}else return re(Q.unrecognizedParse(e)),null}function AZ(t){let e={};return By(t.filter,i=>{if(YM(i)){let r=null;U5(i)?r=Ur(i.equal):V5(i)?r=Ur(i.lte):W5(i)?r=Ur(i.lt):j5(i)?r=Ur(i.gt):q5(i)?r=Ur(i.gte):G5(i)?r=i.range[0]:X5(i)&&(r=(i.oneOf??i.in)[0]),r&&(Yo(r)?e[i.field]="date":ct(r)?e[i.field]="number":fe(r)&&(e[i.field]="string")),i.timeUnit&&(e[i.field]="date")}}),e}function TZ(t){let e={};function i(r){dc(r)?e[r.field]="date":r.type==="quantitative"&&MX(r.aggregate)?e[r.field]="number":Kf(r.field)>1?r.field in e||(e[r.field]="flatten"):Zo(r)&&Nn(r.sort)&&Kf(r.sort.field)>1&&(r.sort.field in e||(e[r.sort.field]="flatten"))}if((Rt(t)||er(t))&&t.forEachFieldDef((r,n)=>{if(Li(r))i(r);else{let s=go(n),o=t.fieldDef(s);i({...r,type:o.type})}}),Rt(t)){let{mark:r,markDef:n,encoding:s}=t;if(In(r)&&!t.encoding.order){let o=n.orient==="horizontal"?"y":"x",a=s[o];ce(a)&&a.type==="quantitative"&&!(a.field in e)&&(e[a.field]="number")}}return e}function RZ(t){let e={};if(Rt(t)&&t.component.selection)for(let i of Z(t.component.selection)){let r=t.component.selection[i];for(let n of r.project.items)!n.channel&&Kf(n.field)>1&&(e[n.field]="flatten")}return e}var qr=class t extends Ge{clone(){return new t(null,De(this._parse))}constructor(e,i){super(e),this._parse=i}hash(){return`Parse ${$e(this._parse)}`}static makeExplicit(e,i,r){let n={},s=i.data;return!Ja(s)&&s?.format?.parse&&(n=s.format.parse),this.makeWithAncestors(e,n,{},r)}static makeWithAncestors(e,i,r,n){for(let a of Z(r)){let l=n.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:re(Q.differentParse(a,r[a],l.value)))}for(let a of Z(i)){let l=n.get(a);l!==void 0&&(l===i[a]?delete i[a]:re(Q.differentParse(a,i[a],l)))}let s=new $n(i,r);n.copyAll(s);let o={};for(let a of Z(s.combine())){let l=s.get(a);l!==null&&(o[a]=l)}return Z(o).length===0||n.parseNothing?null:new t(e,o)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){let e={};for(let i of Z(this._parse)){let r=this._parse[i];Kf(i)===1&&(e[i]=r)}return e}producedFields(){return new Set(Z(this._parse))}dependentFields(){return new Set(Z(this._parse))}assembleTransforms(e=!1){return Z(this._parse).filter(i=>e?Kf(i)>1:!0).map(i=>{let r=UEe(i,this._parse[i]);return r?{type:"formula",expr:r,as:nc(i)}:null}).filter(i=>i!==null)}};var il=class t extends Ge{clone(){return new t(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([pn])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:pn}}};var cd=class t extends Ge{clone(){return new t(null,this.params)}constructor(e,i){super(e),this.params=i}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${$e(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}};var hd=class t extends Ge{clone(){return new t(null,this.params)}constructor(e,i){super(e),this.params=i}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${$e(this.params)}`}assemble(){return{type:"sequence",...this.params}}};var qs=class extends Ge{constructor(e){super(null),e??(e={name:"source"});let i;if(Ja(e)||(i=e.format?{...qi(e.format,["parse"])}:{}),lp(e))this._data={values:e.values};else if(bc(e)){if(this._data={url:e.url},!i.type){let r=/(?:\.([^.]+))?$/.exec(e.url)[1];qe(["json","csv","tsv","dsv","topojson"],r)||(r="json"),i.type=r}}else OF(e)?this._data={values:[{type:"Sphere"}]}:(W3(e)||Ja(e))&&(this._data={});this._generator=Ja(e),e.name&&(this._name=e.name),i&&!ft(i)&&(this._data.format=i)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}};var DZ=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},WEe=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Sx;function vS(t){return t instanceof qs||t instanceof cd||t instanceof hd}var xg=class{constructor(){Sx.set(this,void 0),DZ(this,Sx,!1,"f")}setModified(){DZ(this,Sx,!0,"f")}get modifiedFlag(){return WEe(this,Sx,"f")}};Sx=new WeakMap;var iu=class extends xg{getNodeDepths(e,i,r){r.set(e,i);for(let n of e.children)this.getNodeDepths(n,i+1,r);return r}optimize(e){let r=[...this.getNodeDepths(e,0,new Map).entries()].sort((n,s)=>s[1]-n[1]);for(let n of r)this.run(n[0]);return this.modifiedFlag}},wg=class extends xg{optimize(e){this.run(e);for(let i of e.children)this.optimize(i);return this.modifiedFlag}};var yS=class extends wg{mergeNodes(e,i){let r=i.shift();for(let n of i)e.removeChild(n),n.parent=r,n.remove()}run(e){let i=e.children.map(n=>n.hash()),r={};for(let n=0;n<i.length;n++)r[i[n]]===void 0?r[i[n]]=[e.children[n]]:r[i[n]].push(e.children[n]);for(let n of Z(r))r[n].length>1&&(this.setModified(),this.mergeNodes(e,r[n]))}},xS=class extends wg{constructor(e){super(),this.requiresSelectionId=e&&fx(e)}run(e){e instanceof il&&(this.requiresSelectionId&&(vS(e.parent)||e.parent instanceof xo||e.parent instanceof qr)||(this.setModified(),e.remove()))}},wS=class extends xg{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,i){let r=new Set;e instanceof ea&&(r=e.producedFields(),C5(r,i)&&(this.setModified(),e.removeFormulas(i),e.producedFields.length===0&&e.remove()));for(let n of e.children)this.run(n,new Set([...i,...r]))}},_S=class extends wg{constructor(){super()}run(e){e instanceof Xi&&!e.isRequired()&&(this.setModified(),e.remove())}},CS=class extends iu{run(e){if(!vS(e)&&!(e.numChildren()>1)){for(let i of e.children)if(i instanceof qr)if(e instanceof qr)this.setModified(),e.merge(i);else{if(S5(e.producedFields(),i.dependentFields()))continue;this.setModified(),i.swapWithParent()}}}},SS=class extends iu{run(e){let i=[...e.children],r=e.children.filter(n=>n instanceof qr);if(e.numChildren()>1&&r.length>=1){let n={},s=new Set;for(let o of r){let a=o.parse;for(let l of Z(a))l in n?n[l]!==a[l]&&s.add(l):n[l]=a[l]}for(let o of s)delete n[o];if(!ft(n)){this.setModified();let o=new qr(e,n);for(let a of i){if(a instanceof qr)for(let l of Z(n))delete a.parse[l];e.removeChild(a),a.parent=o,a instanceof qr&&Z(a.parse).length===0&&a.remove()}}}}},ES=class extends iu{run(e){e instanceof Xi||e.numChildren()>0||e instanceof na||e instanceof qs||(this.setModified(),e.remove())}},kS=class extends iu{run(e){let i=e.children.filter(n=>n instanceof ea),r=i.pop();for(let n of i)this.setModified(),r.merge(n)}},AS=class extends iu{run(e){let i=e.children.filter(n=>n instanceof xo),r={};for(let n of i){let s=$e(n.groupBy);s in r||(r[s]=[]),r[s].push(n)}for(let n of Z(r)){let s=r[n];if(s.length>1){let o=s.pop();for(let a of s)o.merge(a)&&(e.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}},TS=class extends iu{constructor(e){super(),this.model=e}run(e){let i=!(vS(e)||e instanceof eu||e instanceof qr||e instanceof il),r=[],n=[];for(let s of e.children)s instanceof tl&&(i&&!S5(e.producedFields(),s.dependentFields())?r.push(s):n.push(s));if(r.length>0){let s=r.pop();for(let o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof tl?e.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(n.length>1){let s=n.pop();for(let o of n)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}},RS=class extends iu{run(e){let i=[...e.children];if(!Xh(i,o=>o instanceof Xi)||e.numChildren()<=1)return;let n=[],s;for(let o of i)if(o instanceof Xi){let a=o;for(;a.numChildren()===1;){let[l]=a.children;if(l instanceof Xi)a=l;else break}n.push(...a.children),s?(e.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else n.push(o);if(n.length){this.setModified();for(let o of n)o.parent.removeChild(o),o.parent=s}}};var rl=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i}addDimensions(e){this.transform.groupby=Fn(this.transform.groupby.concat(e),i=>i)}dependentFields(){let e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map(i=>i.field).filter(i=>i!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??be(e)}hash(){return`JoinAggregateTransform ${$e(this.transform)}`}assemble(){let e=[],i=[],r=[];for(let s of this.transform.joinaggregate)i.push(s.op),r.push(this.getDefaultName(s)),e.push(s.field===void 0?null:s.field);let n=this.transform.groupby;return{type:"joinaggregate",as:r,ops:i,fields:e,...n!==void 0?{groupby:n}:{}}}};var gp=class t extends Ge{clone(){return new t(null,{...this.filter})}constructor(e,i){super(e),this.filter=i}static make(e,i,r){let{config:n,markDef:s}=i,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;let l=i.reduceFieldDef((u,c,h)=>{let d=pr(h)&&i.getScaleComponent(h);if(d){let p=d.get("type"),{aggregate:f}=c,m=Vm({scaleChannel:h,markDef:s,config:n,scaleType:p,isCountAggregate:Qh(f)});m!=="show"&&m!=="always-valid"&&(u[c.field]=c)}return u},{});return Z(l).length?new t(e,l):null}dependentFields(){return new Set(Z(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${$e(this.filter)}`}assemble(){let e=Z(this.filter).reduce((i,r)=>{let n=this.filter[r],s=be(n,{expr:"datum"});return n!==null&&(n.type==="temporal"?i.push(`(isDate(${s}) || (${DS(s)}))`):n.type==="quantitative"&&i.push(DS(s))),i},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}};function DS(t){return`isValid(${t}) && isFinite(+${t})`}function jEe(t){return t.stack.stackBy.reduce((e,i)=>{let r=i.fieldDef,n=be(r);return n&&e.push(n),e},[])}function qEe(t){return K(t)&&t.every(e=>fe(e))&&t.length>1}var ru=class t extends Ge{clone(){return new t(null,De(this._stack))}constructor(e,i){super(e),this._stack=i}static makeFromTransform(e,i){let{stack:r,groupby:n,as:s,offset:o="zero"}=i,a=[],l=[];if(i.sort!==void 0)for(let h of i.sort)a.push(h.field),l.push(wt(h.order,"ascending"));let u={field:a,order:l},c;return qEe(s)?c=s:fe(s)?c=[s,`${s}_end`]:c=[`${i.stack}_start`,`${i.stack}_end`],new t(e,{dimensionFieldDefs:[],stackField:r,groupby:n,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(e,i){let r=i.stack,{encoding:n}=i;if(!r)return null;let{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=r,u=s.map(p=>{let f=n[p];return Sr(f)}).filter(p=>!!p),c=jEe(i),h=i.encoding.order,d;if(K(h)||ce(h))d=B5(h);else{let p=f3(h)?h.sort:o==="y"?"descending":"ascending";d=c.reduce((f,m)=>(f.field.includes(m)||(f.field.push(m),f.order.push(p)),f),{field:[],order:[]})}return new t(e,{dimensionFieldDefs:u,stackField:i.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:l,as:[i.vgField(o,{suffix:"start",forAs:!0}),i.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){let e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${$e(this._stack)}`}getGroupbyFields(){let{dimensionFieldDefs:e,impute:i,groupby:r}=this._stack;return e.length>0?e.map(n=>n.bin?i?[be(n,{binSuffix:"mid"})]:[be(n,{}),be(n,{binSuffix:"end"})]:[be(n)]).flat():r??[]}assemble(){let e=[],{facetby:i,dimensionFieldDefs:r,stackField:n,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(let c of r){let{bandPosition:h=.5,bin:d}=c;if(d){let p=be(c,{expr:"datum"}),f=be(c,{expr:"datum",binSuffix:"end"});e.push({type:"formula",expr:`${DS(p)} ? ${h}*${p}+${1-h}*${f} : ${p}`,as:be(c,{binSuffix:"mid",forAs:!0})})}e.push({type:"impute",field:n,groupby:[...s,...i],key:be(c,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...i],field:n,sort:o,as:u,offset:a}),e}};var Sc=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i}addDimensions(e){this.transform.groupby=Fn(this.transform.groupby.concat(e),i=>i)}dependentFields(){let e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach(i=>e.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??be(e)}hash(){return`WindowTransform ${$e(this.transform)}`}assemble(){let e=[],i=[],r=[],n=[];for(let h of this.transform.window)i.push(h.op),r.push(this.getDefaultName(h)),n.push(h.param===void 0?null:h.param),e.push(h.field===void 0?null:h.field);let s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&i.every(h=>zm(h)))return{type:"joinaggregate",as:r,ops:i,fields:e,...o!==void 0?{groupby:o}:{}};let a=[],l=[];if(this.transform.sort!==void 0)for(let h of this.transform.sort)a.push(h.field),l.push(h.order??"ascending");let u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:n,as:r,ops:i,fields:e,sort:u,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}};function GEe(t){function e(i){if(!(i instanceof na)){let r=i.clone();if(r instanceof Xi){let n=Ex+r.getSource();r.setSource(n),t.model.component.data.outputNodes[n]=r}else(r instanceof xo||r instanceof ru||r instanceof Sc||r instanceof rl)&&r.addDimensions(t.fields);for(let n of i.children.flatMap(e))n.parent=r;return[r]}return i.children.flatMap(e)}return e}function MS(t){if(t instanceof na)if(t.numChildren()===1&&!(t.children[0]instanceof Xi)){let e=t.children[0];(e instanceof xo||e instanceof ru||e instanceof Sc||e instanceof rl)&&e.addDimensions(t.fields),e.swapWithParent(),MS(t)}else{let e=t.model.component.data.main;MZ(e);let i=GEe(t),r=t.children.map(i).flat();for(let n of r)n.parent=e}else t.children.map(MS)}function MZ(t){if(t instanceof Xi&&t.type===Pt.Main&&t.numChildren()===1){let e=t.children[0];e instanceof na||(e.swapWithParent(),MZ(t))}}var Ex="scale_",FS=5;function bL(t){for(let e of t){for(let i of e.children)if(i.parent!==e)return!1;if(!bL(e.children))return!1}return!0}function nl(t,e){let i=!1;for(let r of e)i=t.optimize(r)||i;return i}function FZ(t,e,i){let r=t.sources,n=!1;return n=nl(new _S,r)||n,n=nl(new xS(e),r)||n,r=r.filter(s=>s.numChildren()>0),n=nl(new ES,r)||n,r=r.filter(s=>s.numChildren()>0),i||(n=nl(new CS,r)||n,n=nl(new TS(e),r)||n,n=nl(new wS,r)||n,n=nl(new SS,r)||n,n=nl(new AS,r)||n,n=nl(new kS,r)||n,n=nl(new yS,r)||n,n=nl(new RS,r)||n),t.sources=r,n}function LZ(t,e){bL(t.sources);let i=0,r=0;for(let n=0;n<FS&&FZ(t,e,!0);n++)i++;t.sources.map(MS);for(let n=0;n<FS&&FZ(t,e,!1);n++)r++;bL(t.sources),Math.max(i,r)===FS&&re(`Maximum optimization runs(${FS}) reached.`)}var tr=class t{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,i){return new t(()=>e(i))}};function wL(t){Rt(t)?XEe(t):YEe(t)}function XEe(t){let e=t.component.scales;for(let i of Z(e)){let r=JEe(t,i);if(e[i].setWithExplicit("domains",r),QEe(t,i),t.component.data.isFaceted){let s=t;for(;!er(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[i]==="shared")for(let a of r.value)qa(a)&&(a.data=Ex+a.data.replace(Ex,""))}}}function YEe(t){for(let i of t.children)wL(i);let e=t.component.scales;for(let i of Z(e)){let r,n=null;for(let s of t.children){let o=s.component.scales[i];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Ws(r,o.getWithExplicit("domains"),"domains","scale",xL);let a=o.get("selectionExtent");n&&a&&n.param!==a.param&&re(Q.NEEDS_SAME_SELECTION),n=a}}e[i].setWithExplicit("domains",r),n&&e[i].set("selectionExtent",n,!0)}}function KEe(t,e,i,r){if(t==="unaggregated"){let{valid:n,reason:s}=OZ(e,i);if(!n){re(s);return}}else if(t===void 0&&r.useUnaggregatedDomain){let{valid:n}=OZ(e,i);if(n)return"unaggregated"}return t}function JEe(t,e){let i=t.getScaleComponent(e).get("type"),{encoding:r}=t,n=KEe(t.scaleDomain(e),t.typedFieldDef(e),i,t.config.scale);return n!==t.scaleDomain(e)&&(t.specifiedScales[e]={...t.specifiedScales[e],domain:n}),e==="x"&&qt(r.x2)?qt(r.x)?Ws(dd(i,n,t,"x"),dd(i,n,t,"x2"),"domain","scale",xL):dd(i,n,t,"x2"):e==="y"&&qt(r.y2)?qt(r.y)?Ws(dd(i,n,t,"y"),dd(i,n,t,"y2"),"domain","scale",xL):dd(i,n,t,"y2"):dd(i,n,t,e)}function ZEe(t,e,i){return t.map(r=>({signal:`{data: ${ip(r,{timeUnit:i,type:e})}}`}))}function vL(t,e,i){let r=fi(i)?.unit;return e==="temporal"||r?ZEe(t,e,r):[t]}function dd(t,e,i,r){let{encoding:n,markDef:s,mark:o,config:a,stack:l}=i,u=qt(n[r]),{type:c}=u,h=u.timeUnit,d=nJ({invalid:ms("invalid",s,a),isPath:In(o)});if(dY(e)){let m=dd(t,void 0,i,r),g=vL(e.unionWith,c,h);return Qo([...g,...m.value])}else{if(Te(e))return Qo([e]);if(e&&e!=="unaggregated"&&!ZM(e))return Qo(vL(e,c,h))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Hn([[0,1]]);let m=i.requestDataName(d);return Hn([{data:m,field:i.vgField(r,{suffix:"start"})},{data:m,field:i.vgField(r,{suffix:"end"})}])}let p=pr(r)&&ce(u)?e6e(i,r,t):void 0;if(Bn(u)){let m=vL([u.datum],c,h);return Hn(m)}let f=u;if(e==="unaggregated"){let{field:m}=u;return Hn([{data:i.requestDataName(d),field:be({field:m,aggregate:"min"})},{data:i.requestDataName(d),field:be({field:m,aggregate:"max"})}])}else if(yt(f.bin)){if(Kt(t))return t==="bin-ordinal"?Hn([]):Hn([{data:Tm(p)?i.requestDataName(d):i.requestDataName(Pt.Raw),field:i.vgField(r,ql(f,r)?{binSuffix:"range"}:{}),sort:p===!0||!ge(p)?{field:i.vgField(r,{}),op:"min"}:p}]);{let{bin:m}=f;if(yt(m)){let g=vg(i,f.field,m);return Hn([new tr(()=>{let b=i.getSignalName(g);return`[${b}.start, ${b}.stop]`})])}else return Hn([{data:i.requestDataName(d),field:i.vgField(r,{})}])}}else if(f.timeUnit&&qe(["time","utc"],t)){let m=n[Hr(r)];if(d3(f,m,s,a)){let g=i.requestDataName(d),b=Hs({fieldDef:f,fieldDef2:m,markDef:s,config:a}),v=uc(o)&&b!==.5&&Ot(r);return Hn([{data:g,field:i.vgField(r,v?{suffix:up}:{})},{data:g,field:i.vgField(r,{suffix:v?cp:"end"})}])}}return p?Hn([{data:Tm(p)?i.requestDataName(d):i.requestDataName(Pt.Raw),field:i.vgField(r),sort:p}]):Hn([{data:i.requestDataName(d),field:i.vgField(r)}])}function yL(t,e){let{op:i,field:r,order:n}=t;return{op:i??(e?"sum":td),...r?{field:fr(r)}:{},...n?{order:n}:{}}}function QEe(t,e){let i=t.component.scales[e],r=t.specifiedScales[e].domain,n=t.fieldDef(e)?.bin,s=ZM(r)?r:void 0,o=Va(n)&&Im(n.extent)?n.extent:void 0;(s||o)&&i.set("selectionExtent",s??o,!0)}function e6e(t,e,i){if(!Kt(i))return;let r=t.fieldDef(e),n=r.sort;if(l3(n))return{op:"min",field:tu(r,e),order:"ascending"};let{stack:s}=t,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Nn(n)){let a=s&&!o.has(n.field);return yL(n,a)}else if(IY(n)){let{encoding:a,order:l}=n,u=t.fieldDef(a),{aggregate:c,field:h}=u,d=s&&!o.has(h);if(bo(c)||Xo(c))return yL({field:be(u),order:l},d);if(zm(c)||!c)return yL({op:c,field:h,order:l},d)}else{if(n==="descending")return{op:"min",field:t.vgField(e),order:"descending"};if(qe(["ascending",void 0],n))return!0}}function OZ(t,e){let{aggregate:i,type:r}=t;return i?fe(i)&&!LX.has(i)?{valid:!1,reason:Q.unaggregateDomainWithNonSharedDomainOp(i)}:r==="quantitative"&&e==="log"?{valid:!1,reason:Q.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:Q.unaggregateDomainHasNoEffectForRawField(t)}}function xL(t,e,i,r){return t.explicit&&e.explicit&&re(Q.mergeConflictingDomainProperty(i,r,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function t6e(t){let e=Fn(t.map(o=>{if(qa(o)){let{sort:a,...l}=o;return l}return o}),$e),i=Fn(t.map(o=>{if(qa(o)){let a=o.sort;return a!==void 0&&!Tm(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),$e);if(e.length===0)return;if(e.length===1){let o=t[0];if(qa(o)&&i.length>0){let a=i[0];if(i.length>1){re(Q.MORE_THAN_ONE_SORT);let l=i.filter(u=>ge(u)&&"op"in u&&u.op!=="min");i.every(u=>ge(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(ge(a)&&"field"in a){let l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}let r=Fn(i.map(o=>Tm(o)||!("op"in o)||fe(o.op)&&_e(DX,o.op)?o:(re(Q.domainSortDropped(o)),!0)),$e),n;r.length===1?n=r[0]:r.length>1&&(re(Q.MORE_THAN_ONE_SORT),n=!0);let s=Fn(t.map(o=>qa(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:e.map(a=>a.field),...n?{sort:n}:{}}:{fields:e,...n?{sort:n}:{}}}function yg(t){if(qa(t)&&fe(t.field))return t.field;if(OX(t)){let e;for(let i of t.fields)if(qa(i)&&fe(i.field)){if(!e)e=i.field;else if(e!==i.field)return re(Q.FACETED_INDEPENDENT_DIFFERENT_SOURCES),e}return re(Q.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),e}else if(PX(t)){re(Q.FACETED_INDEPENDENT_SAME_SOURCE);let e=t.fields[0];return fe(e)?e:void 0}}function ud(t,e){let r=t.component.scales[e].get("domains").map(n=>(qa(n)&&(n.data=t.lookupDataSource(n.data)),n));return t6e(r)}function _L(t){return ta(t)||bg(t)?t.children.reduce((e,i)=>e.concat(_L(i)),PZ(t)):PZ(t)}function PZ(t){return Z(t.component.scales).reduce((e,i)=>{let r=t.component.scales[i];if(r.merged)return e;let n=r.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:c,...h}=n,d=i6e(n.range,s,i,t),p=ud(t,i),f=a?vJ(t,a,r,p):null;return e.push({name:s,type:o,...p?{domain:p}:{},...f?{domainRaw:f}:{},range:d,...c!==void 0?{reverse:c}:{},...h}),e},[])}function i6e(t,e,i,r){if(Ot(i)){if($s(t))return{step:{signal:`${e}_step`}}}else if(ge(t)&&qa(t))return{...t,data:r.lookupDataSource(t.data)};return t}var kx=class extends $n{constructor(e,i){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",i)}domainHasZero(){let e=this.get("type");if(qe([Qi.LOG,Qi.TIME,Qi.UTC],e))return"definitely-not";let i=this.get("zero");if(i===!0||i===void 0&&qe([Qi.LINEAR,Qi.SQRT,Qi.POW],e))return"definitely";let r=this.get("domains");if(r.length>0){let n=!1,s=!1,o=!1;for(let a of r){if(K(a)){let l=a[0],u=a[a.length-1];if(ct(l)&&ct(u))if(l<=0&&u>=0){n=!0;continue}else{s=!0;continue}}o=!0}if(n)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}};var r6e=["range","scheme"];function NZ(t){let e=t.component.scales;for(let i of Pm){let r=e[i];if(!r)continue;let n=n6e(i,t);r.setWithExplicit("range",n)}}function zZ(t,e){let i=t.fieldDef(e);if(i?.bin){let{bin:r,field:n}=i,s=Fi(e),o=t.getName(s);if(ge(r)&&r.binned&&r.step!==void 0)return new tr(()=>{let a=t.scaleName(e),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${t.getSignalName(o)} / (${l})`});if(yt(r)){let a=vg(t,n,r);return new tr(()=>{let l=t.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${t.getSignalName(o)} / (${u})`})}}}function n6e(t,e){let i=e.specifiedScales[t],{size:r}=e,s=e.getScaleComponent(t).get("type");for(let h of r6e)if(i[h]!==void 0){let d=jy(s,h),p=J5(t,h);if(!d)re(Q.scalePropertyNotWorkWithScaleType(s,h,t));else if(p)re(p);else switch(h){case"range":{let f=i.range;if(K(f)){if(Ot(t))return Qo(f.map(m=>{if(m==="width"||m==="height"){let g=e.getName(m),b=e.getSignalName.bind(e);return tr.fromName(b,g)}return m}))}else if(ge(f))return Qo({data:e.requestDataName(Pt.Main),field:f.field,sort:{op:"min",field:e.vgField(t)}});return Qo(f)}case"scheme":return Qo(s6e(i[h]))}}let o=t===Lt||t==="xOffset"?"width":"height",a=r[o];if(Us(a)){if(Ot(t))if(Kt(s)){let h=HZ(a,e,t);if(h)return Qo({step:h})}else re(Q.stepDropped(o));else if(ac(t)){let h=t===qo?"x":"y";if(e.getScaleComponent(h).get("type")==="band"){let f=UZ(a,s);if(f)return Qo(f)}}}let{rangeMin:l,rangeMax:u}=i,c=o6e(t,e);return(l!==void 0||u!==void 0)&&jy(s,"rangeMin")&&K(c)&&c.length===2?Qo([l??c[0],u??c[1]]):Hn(c)}function s6e(t){return hY(t)?{scheme:t.name,...qi(t,["name"])}:{scheme:t}}function $Z(t,e,i,{center:r}={}){let n=Fi(t),s=e.getName(n),o=e.getSignalName.bind(e);return t===hi&&Wr(i)?r?[tr.fromName(a=>`${o(a)}/2`,s),tr.fromName(a=>`-${o(a)}/2`,s)]:[tr.fromName(o,s),0]:r?[tr.fromName(a=>`-${o(a)}/2`,s),tr.fromName(a=>`${o(a)}/2`,s)]:[0,tr.fromName(o,s)]}function o6e(t,e){let{size:i,config:r,mark:n,encoding:s}=e,{type:o}=qt(s[t]),l=e.getScaleComponent(t).get("type"),{domain:u,domainMid:c}=e.specifiedScales[t];switch(t){case Lt:case hi:{if(qe(["point","band"],l)){let h=WZ(t,i,r.view);if(Us(h))return{step:HZ(h,e,t)}}return $Z(t,e,l)}case qo:case Hl:return a6e(t,e,l);case Ns:{let h=c6e(n,r),d=h6e(n,i,e,r);return lc(l)?u6e(h,d,l6e(l,r,u,t)):[h,d]}case ln:return[0,Math.PI*2];case Wa:return[0,360];case Ln:return[0,new tr(()=>{let h=e.getSignalName(er(e.parent)?"child_width":"width"),d=e.getSignalName(er(e.parent)?"child_height":"height");return`min(${h},${d})/2`})];case co:return{step:1e3/r.scale.framesPerSecond};case po:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case mo:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Mi:return"symbol";case Gi:case Pn:case zn:return l==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":n==="rect"||n==="geoshape"?"heatmap":"ramp";case fs:case ho:case fo:return[r.scale.minOpacity,r.scale.maxOpacity]}}function HZ(t,e,i){let{encoding:r}=e,n=e.getScaleComponent(i),s=Om(i),o=r[s];if(EF({step:t,offsetIsDiscrete:Ke(o)&&K5(o.type)})==="offset"&&fF(r,s)){let l=e.getScaleComponent(s),c=`domain('${e.scaleName(s)}').length`;if(l.get("type")==="band"){let d=l.get("paddingInner")??l.get("padding")??0,p=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${d}, ${p})`}let h=n.get("paddingInner")??n.get("padding");return{signal:`${t.step} * ${c} / (1-${NX(h)})`}}else return t.step}function UZ(t,e){if(EF({step:t,offsetIsDiscrete:Kt(e)})==="offset")return{step:t.step}}function a6e(t,e,i){let r=t===qo?"x":"y",n=e.getScaleComponent(r);if(!n)return $Z(r,e,i,{center:!0});let s=n.get("type"),o=e.scaleName(r),{markDef:a,config:l}=e;if(s==="band"){let u=WZ(r,e.size,e.config.view);if(Us(u)){let c=UZ(u,i);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{let u=e.encoding[r];if(ce(u)&&u.timeUnit){let c=H5(u.timeUnit,f=>`scale('${o}', ${f})`),h=e.config.scale.bandWithNestedOffsetPaddingInner,d=Hs({fieldDef:u,markDef:a,config:l})-.5,p=d!==0?` + ${d}`:"";if(h){let f=Te(h)?`${h.signal}/2`+p:`${h/2+d}`,m=Te(h)?`(1 - ${h.signal}/2)`+p:`${1-h/2+d}`;return[{signal:`${f} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return wM(`Cannot use ${t} scale if ${r} scale is not discrete.`)}}function WZ(t,e,i){let r=t===Lt?"width":"height",n=e[r];return n||eg(i,r)}function l6e(t,e,i,r){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return i!==void 0&&K(i)?i.length+1:(re(Q.domainRequiredForThresholdScale(r)),3)}}function u6e(t,e,i){let r=()=>{let n=ps(e),s=ps(t),o=`(${n} - ${s}) / (${i} - 1)`;return`sequence(${s}, ${n} + ${o}, ${o})`};return Te(e)?new tr(r):{signal:r()}}function c6e(t,e){switch(t){case"bar":case"tick":return e.scale.minBandSize;case"line":case"trail":case"rule":return e.scale.minStrokeWidth;case"text":return e.scale.minFontSize;case"point":case"square":case"circle":return e.scale.minSize}throw new Error(Q.incompatibleChannel("size",t))}var IZ=.95;function h6e(t,e,i,r){let n={x:zZ(i,"x"),y:zZ(i,"y")};switch(t){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;let s=BZ(e,n,r.view);return ct(s)?s-1:new tr(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;let s=BZ(e,n,r.view);return ct(s)?Math.pow(IZ*s,2):new tr(()=>`pow(${IZ} * ${s.signal}, 2)`)}}throw new Error(Q.incompatibleChannel("size",t))}function BZ(t,e,i){let r=Us(t.width)?t.width.step:ox(i,"width"),n=Us(t.height)?t.height.step:ox(i,"height");return e.x||e.y?new tr(()=>`min(${[e.x?e.x.signal:r,e.y?e.y.signal:n].join(", ")})`):Math.min(r,n)}function CL(t,e){Rt(t)?d6e(t,e):jZ(t,e)}function d6e(t,e){let i=t.component.scales,{config:r,encoding:n,markDef:s,specifiedScales:o}=t;for(let a of Z(i)){let l=o[a],u=i[a],c=t.getScaleComponent(a),h=qt(n[a]),d=l[e],p=c.get("type"),f=c.get("padding"),m=c.get("paddingInner"),g=jy(p,e),b=J5(a,e);if(d!==void 0&&(g?b&&re(b):re(Q.scalePropertyNotWorkWithScaleType(p,e,a))),g&&b===void 0)if(d!==void 0){let v=h.timeUnit,y=h.type;switch(e){case"domainMax":case"domainMin":Yo(l[e])||y==="temporal"||v?u.set(e,{signal:ip(l[e],{type:y,timeUnit:v})},!0):u.set(e,l[e],!0);break;default:u.copyKeyFromObject(e,l)}}else{let v=ae(VZ,e)?VZ[e]({model:t,channel:a,fieldOrDatumDef:h,scaleType:p,scalePadding:f,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:b3(n,a),hasSecondaryRangeChannel:!!n[Hr(a)]}):r.scale[e];v!==void 0&&u.set(e,v,!1)}}}var VZ={bins:({model:t,fieldOrDatumDef:e})=>ce(e)?f6e(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>p6e(t,e.type),nice:({scaleType:t,channel:e,domain:i,domainMin:r,domainMax:n,fieldOrDatumDef:s})=>m6e(t,e,i,r,n,s),padding:({channel:t,scaleType:e,fieldOrDatumDef:i,markDef:r,config:n})=>g6e(t,e,n.scale,i,r,n.bar),paddingInner:({scalePadding:t,channel:e,markDef:i,scaleType:r,config:n,hasNestedOffsetScale:s})=>b6e(t,e,i.type,r,n.scale,s),paddingOuter:({scalePadding:t,channel:e,scaleType:i,scalePaddingInner:r,config:n,hasNestedOffsetScale:s})=>v6e(t,e,i,r,n.scale,s),reverse:({fieldOrDatumDef:t,scaleType:e,channel:i,config:r})=>{let n=ce(t)?t.sort:void 0;return y6e(e,n,i,r.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:i,markDef:r,scaleType:n,config:s,hasSecondaryRangeChannel:o})=>x6e(t,e,i,r,n,s.scale,o)};function SL(t){Rt(t)?NZ(t):jZ(t,"range")}function jZ(t,e){let i=t.component.scales;for(let r of t.children)e==="range"?SL(r):CL(r,e);for(let r of Z(i)){let n;for(let s of t.children){let o=s.component.scales[r];if(o){let a=o.getWithExplicit(e);n=Ws(n,a,e,"scale",H3((l,u)=>{switch(e){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}i[r].setWithExplicit(e,n)}}function f6e(t,e){let i=e.bin;if(yt(i)){let r=vg(t,e.field,i);return new tr(()=>t.getSignalName(r))}else if(di(i)&&Va(i)&&i.step!==void 0)return{step:i.step}}function p6e(t,e){if(qe([Gi,Pn,zn],t)&&e!=="nominal")return"hcl"}function m6e(t,e,i,r,n,s){if(!(Sr(s)?.bin||K(i)||n!=null||r!=null||qe([Qi.TIME,Qi.UTC],t)))return Ot(e)?!0:void 0}function g6e(t,e,i,r,n,s){if(Ot(t)){if(Jo(e)){if(i.continuousPadding!==void 0)return i.continuousPadding;let{type:o,orient:a}=n;if(o==="bar"&&!(ce(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&t==="x"||a==="horizontal"&&t==="y"))return s.continuousBandSize}if(e===Qi.POINT)return i.pointPadding}}function b6e(t,e,i,r,n,s=!1){if(t===void 0){if(Ot(e)){let{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=n;return s?c:wt(o,i==="bar"?a:i==="tick"?u:l)}else if(ac(e)&&r===Qi.BAND)return n.offsetBandPaddingInner}}function v6e(t,e,i,r,n,s=!1){if(t===void 0){if(Ot(e)){let{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=n;if(s)return a;if(i===Qi.BAND)return wt(o,Te(r)?{signal:`${r.signal}/2`}:r/2)}else if(ac(e)){if(i===Qi.POINT)return .5;if(i===Qi.BAND)return n.offsetBandPaddingOuter}}}function y6e(t,e,i,r){if(i==="x"&&r.xReverse!==void 0)return Wr(t)&&e==="descending"?Te(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Wr(t)&&e==="descending")return!0}function x6e(t,e,i,r,n,s,o){if(!!i&&i!=="unaggregated"&&Wr(n)){if(K(i)){let l=i[0],u=i[i.length-1];if(ct(l)&&l<=0&&ct(u)&&u>=0)return!0}return!1}if(t==="size"&&e.type==="quantitative"&&!lc(n))return!0;if(!(ce(e)&&e.bin)&&qe([...dn,...wX],t)){let{orient:l,type:u}=r;return qe(["bar","area","line","trail"],u)&&(l==="horizontal"&&t==="y"||l==="vertical"&&t==="x")?!1:qe(["bar","area"],u)&&!o?!0:s?.zero}return!1}function qZ(t,e,i,r,n=!1){let s=w6e(e,i,r,n),{type:o}=t;return pr(e)?o!==void 0?bY(e,o)?ce(i)&&!gY(o,i.type)?(re(Q.scaleTypeNotWorkWithFieldDef(o,s)),s):o:(re(Q.scaleTypeNotWorkWithChannel(e,o,s)),s):s:null}function w6e(t,e,i,r){switch(e.type){case"nominal":case"ordinal":{if(oc(t)||F5(t)==="discrete")return t==="shape"&&e.type==="ordinal"&&re(Q.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(M5(t))return"band";if(Ot(t)||ac(t)){if(qe(["rect","bar","image","rule","tick"],i.type)||r)return"band"}else if(i.type==="arc"&&t in D5)return"band";let n=i[Fi(t)];return Vl(n)||hc(e)&&e.axis?.tickBand?"band":"point"}case"temporal":return oc(t)?"time":F5(t)==="discrete"?(re(Q.discreteChannelCannotEncode(t,"temporal")),"ordinal"):ce(e)&&e.timeUnit&&fi(e.timeUnit).utc?"utc":M5(t)?"band":"time";case"quantitative":return oc(t)?ce(e)&&yt(e.bin)?"bin-ordinal":"linear":F5(t)==="discrete"?(re(Q.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):M5(t)?"band":"linear";case"geojson":return}throw new Error(Q.invalidFieldType(e.type))}function GZ(t,{ignoreRange:e}={}){XZ(t),wL(t);for(let i of mY)CL(t,i);e||SL(t)}function XZ(t){Rt(t)?t.component.scales=_6e(t):t.component.scales=S6e(t)}function _6e(t){let{encoding:e,mark:i,markDef:r}=t,n={};for(let s of Pm){let o=qt(e[s]);if(o&&i===Q5&&s===Mi&&o.type===Ya)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});let l=b3(e,s),u=qZ(a,s,o,r,l);n[s]=new kx(t.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return n}var C6e=H3((t,e)=>KM(t)-KM(e));function S6e(t){var e;let i=t.component.scales={},r={},n=t.component.resolve;for(let s of t.children){XZ(s);for(let o of Z(s.component.scales))if((e=n.scale)[o]??(e[o]=pS(o,t)),n.scale[o]==="shared"){let a=r[o],l=s.component.scales[o].getWithExplicit("type");a?oY(a.value,l.value)?r[o]=Ws(a,l,"type","scale",C6e):(n.scale[o]="independent",delete r[o]):r[o]=l}}for(let s of Z(r)){let o=t.scaleName(s,!0),a=r[s];i[s]=new kx(o,a);for(let l of t.children){let u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return i}var Ax=class{constructor(){this.nameMap={}}rename(e,i){this.nameMap[e]=i}has(e){return this.nameMap[e]!==void 0}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}};function Rt(t){return t?.type==="unit"}function er(t){return t?.type==="facet"}function bg(t){return t?.type==="concat"}function ta(t){return t?.type==="layer"}var bp=class{constructor(e,i,r,n,s,o,a){this.type=i,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=Ei(a),this.name=e.name??n,this.title=ja(e.title)?{text:e.title}:e.title?Ei(e.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Ax,this.projectionNameMap=r?r.projectionNameMap:new Ax,this.signalNameMap=r?r.signalNameMap:new Ax,this.data=e.data,this.description=e.description,this.transforms=JK(e.transform??[]),this.layout=i==="layer"||i==="unit"?{}:mK(e,i,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:fc(e)||r?.component.data.isFaceted&&e.data===void 0},layoutSize:new $n,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?De(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){GZ(this)}parseProjection(){gL(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){pL(this)}assembleEncodeFromView(e){let{style:i,...r}=e,n={};for(let s of Z(r)){let o=r[s];o!==void 0&&(n[s]=xt(o))}return n}assembleGroupEncodeEntry(e){let i={};return this.view&&(i=this.assembleEncodeFromView(this.view)),!e&&(this.description&&(i.description=xt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...i}:ft(i)?void 0:i}assembleLayout(){if(!this.layout)return;let{spacing:e,...i}=this.layout,{component:r,config:n}=this,s=dZ(r.layoutHeaders,n);return{padding:e,...this.assembleDefaultLayout(),...i,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:e}=this.component,i=[];for(let r of $r)e[r].title&&i.push(lZ(this,r));for(let r of fg)i=i.concat(hZ(this,r));return i}assembleAxes(){return rZ(this.component.axes,this.config)}assembleLegends(){return bS(this)}assembleProjections(){return wZ(this)}assembleTitle(){let{encoding:e,...i}=this.title??{},r={...O5(this.config.title).nonMarkTitleProperties,...i,...e?{encode:{update:e}}:{}};if(r.text)return qe(["unit","layer"],this.type)?qe(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),ft(r)?void 0:r}assembleGroup(e=[]){let i={};e=e.concat(this.assembleSignals()),e.length>0&&(i.signals=e);let r=this.assembleLayout();r&&(i.layout=r),i.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let n=!this.parent||er(this.parent)?_L(this):[];n.length>0&&(i.scales=n);let s=this.assembleAxes();s.length>0&&(i.axes=s);let o=this.assembleLegends();return o.length>0&&(i.legends=o),i}getName(e){return Et((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(Pt[e].toLowerCase())}requestDataName(e){let i=this.getDataName(e),r=this.component.data.outputNodeRefCounts;return r[i]=(r[i]||0)+1,i}getSizeSignalRef(e){if(er(this.parent)){let i=dS(e),r=Zh(i),n=this.component.scales[r];if(n&&!n.merged){let s=n.get("type"),o=n.get("range");if(Kt(s)&&$s(o)){let a=n.get("name"),l=ud(this,r),u=yg(l);if(u){let c=be({aggregate:"distinct",field:u},{expr:"datum"});return{signal:cL(a,n,c)}}else return re(Q.unknownField(r)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){let i=this.component.data.outputNodes[e];return i?i.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,i){this.signalNameMap.rename(e,i)}renameScale(e,i){this.scaleNameMap.rename(e,i)}renameProjection(e,i){this.projectionNameMap.rename(e,i)}scaleName(e,i){if(i)return this.getName(e);if(T5(e)&&pr(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e)))return this.scaleNameMap.get(this.getName(e))}projectionName(e){if(e)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let i=this.component.scales[e];return i&&!i.merged?i:this.parent?this.parent.getScaleComponent(e):void 0}getScaleType(e){let i=this.getScaleComponent(e);return i?i.get("type"):void 0}getSelectionComponent(e,i){let r=this.component.selection[e];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(e,i)),!r)throw new Error(Q.selectionNotFound(i));return r}hasAxisOrientSignalRef(){return this.component.axes.x?.some(e=>e.hasOrientSignalRef())||this.component.axes.y?.some(e=>e.hasOrientSignalRef())}},_g=class extends bp{vgField(e,i={}){let r=this.fieldDef(e);if(r)return be(r,i)}reduceFieldDef(e,i){return JY(this.getMapping(),(r,n,s)=>{let o=Sr(n);return o?e(r,o,s):r},i)}forEachFieldDef(e,i){ex(this.getMapping(),(r,n)=>{let s=Sr(r);s&&e(s,n)},i)}};var Cg=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=De(i);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];let n=this.transform.resolve??"shared";this.transform.resolve=n}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${$e(this.transform)}`}assemble(){let{density:e,...i}=this.transform,r={type:"kde",field:e,...i};return r.resolve=this.transform.resolve,r}};var Sg=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=De(i)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${$e(this.transform)}`}assemble(){let{extent:e,param:i}=this.transform;return{type:"extent",field:e,signal:i}}};var Eg=class t extends Ge{clone(){return new t(this.parent,De(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=De(i);let{flatten:r,as:n=[]}=this.transform;this.transform.as=r.map((s,o)=>n[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${$e(this.transform)}`}assemble(){let{flatten:e,as:i}=this.transform;return{type:"flatten",fields:e,as:i}}};var kg=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=De(i);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${$e(this.transform)}`}assemble(){let{fold:e,as:i}=this.transform;return{type:"fold",fields:e,as:i}}};var Ag=class t extends Ge{clone(){return new t(null,De(this.fields),this.geojson,this.signal)}static parseAll(e,i){if(i.component.projection&&!i.component.projection.isFit)return e;let r=0;for(let n of[[cn,un],[hn,On]]){let s=n.map(o=>{let a=qt(i.encoding[o]);return ce(a)?a.field:Bn(a)?{expr:`${a.datum}`}:mr(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(e=new t(e,s,null,i.getName(`geojson_${r++}`)))}if(i.channelHasField(Mi)){let n=i.typedFieldDef(Mi);n.type===Ya&&(e=new t(e,null,n.field,i.getName(`geojson_${r++}`)))}return e}constructor(e,i,r,n){super(e),this.fields=i,this.geojson=r,this.signal=n}dependentFields(){let e=(this.fields??[]).filter(fe);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${$e(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}};var Tg=class t extends Ge{clone(){return new t(null,this.projection,De(this.fields),De(this.as))}constructor(e,i,r,n){super(e),this.projection=i,this.fields=r,this.as=n}static parseAll(e,i){if(!i.projectionName())return e;for(let r of[[cn,un],[hn,On]]){let n=r.map(o=>{let a=qt(i.encoding[o]);return ce(a)?a.field:Bn(a)?{expr:`${a.datum}`}:mr(a)?{expr:`${a.value}`}:void 0}),s=r[0]===hn?"2":"";(n[0]||n[1])&&(e=new t(e,i.projectionName(),n,[i.getName(`x${s}`),i.getName(`y${s}`)]))}return e}dependentFields(){return new Set(this.fields.filter(fe))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${$e(this.fields)} ${$e(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}};var vp=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){let{start:i=0,stop:r,step:n}=e;return{signal:`sequence(${[i,r,...n?[n]:[]].join(",")})`}}static makeFromTransform(e,i){return new t(e,i)}static makeFromEncoding(e,i){let r=i.encoding,n=r.x,s=r.y;if(ce(n)&&ce(s)){let o=n.impute?n:s.impute?s:void 0;if(o===void 0)return;let a=n.impute?s:s.impute?n:void 0,{method:l,value:u,frame:c,keyvals:h}=o.impute,d=x3(i.mark,r);return new t(e,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...h!==void 0?{keyvals:h}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${$e(this.transform)}`}assemble(){let{impute:e,key:i,keyvals:r,method:n,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:e,key:i,...r?{keyvals:FK(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!n||n==="value"?o:null};if(n&&n!=="value"){let u={type:"window",as:[`imputed_${e}_value`],ops:[n],fields:[e],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e};return[l,u,c]}else return[l]}};var Rg=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=De(i);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??i.on,r[1]??i.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${$e(this.transform)}`}assemble(){let{loess:e,on:i,...r}=this.transform;return{type:"loess",x:i,y:e,...r}}};var Dg=class t extends Ge{clone(){return new t(null,De(this.transform),this.secondary)}constructor(e,i,r){super(e),this.transform=i,this.secondary=r}static make(e,i,r,n){let s=i.component.data.sources,{from:o}=r,a=null;if(LK(o)){let l=EL(o.data,s);l||(l=new qs(o.data),s.push(l));let u=i.getName(`lookup_${n}`);a=new Xi(l,u,Pt.Lookup,i.component.data.outputNodeRefCounts),i.component.data.outputNodes[u]=a}else if(OK(o)){let l=o.param;r={as:l,...r};let u;try{u=i.getSelectionComponent(Et(l),l)}catch{throw new Error(Q.cannotLookupVariableParameter(l))}if(a=u.materialized,!a)throw new Error(Q.noSameUnitLookup(l))}return new t(e,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ve(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${$e({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:ve(this.transform.as)}:{}};else{let i=this.transform.as;fe(i)||(re(Q.NO_FIELDS_NEEDS_AS),i="_lookup"),e={as:[i]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}};var Mg=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=De(i);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${$e(this.transform)}`}assemble(){let{quantile:e,...i}=this.transform;return{type:"quantile",field:e,...i}}};var Fg=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=De(i);let r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??i.on,r[1]??i.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${$e(this.transform)}`}assemble(){let{regression:e,on:i,...r}=this.transform;return{type:"regression",x:i,y:e,...r}}};var Lg=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i}addDimensions(e){this.transform.groupby=Fn((this.transform.groupby??[]).concat(e),i=>i)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${$e(this.transform)}`}assemble(){let{pivot:e,value:i,groupby:r,limit:n,op:s}=this.transform;return{type:"pivot",field:e,value:i,...n!==void 0?{limit:n}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}};var Og=class t extends Ge{clone(){return new t(null,De(this.transform))}constructor(e,i){super(e),this.transform=i}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${$e(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}};function YZ(t){let e=0;function i(r,n){if(r instanceof qs&&!r.isGenerator&&!bc(r.data)&&(t.push(n),n={name:null,source:n.name,transform:[]}),r instanceof qr&&(r.parent instanceof qs&&!n.source?(n.format={...n.format,parse:r.assembleFormatParse()},n.transform.push(...r.assembleTransforms(!0))):n.transform.push(...r.assembleTransforms())),r instanceof na){n.name||(n.name=`data_${e++}`),!n.source||n.transform.length>0?(t.push(n),r.data=n.name):r.data=n.source,t.push(...r.assemble());return}switch((r instanceof cd||r instanceof hd||r instanceof gp||r instanceof eu||r instanceof mp||r instanceof Tg||r instanceof xo||r instanceof Dg||r instanceof Sc||r instanceof rl||r instanceof kg||r instanceof Eg||r instanceof Cg||r instanceof Rg||r instanceof Mg||r instanceof Fg||r instanceof il||r instanceof Og||r instanceof Lg||r instanceof Sg)&&n.transform.push(r.assemble()),(r instanceof tl||r instanceof ea||r instanceof vp||r instanceof ru||r instanceof Ag)&&n.transform.push(...r.assemble()),r instanceof Xi&&(n.source&&n.transform.length===0?r.setSource(n.source):r.parent instanceof Xi?r.setSource(n.name):(n.name||(n.name=`data_${e++}`),r.setSource(n.name),r.numChildren()===1&&(t.push(n),n={name:null,source:n.name,transform:[]}))),r.numChildren()){case 0:r instanceof Xi&&(!n.source||n.transform.length>0)&&t.push(n);break;case 1:i(r.children[0],n);break;default:{n.name||(n.name=`data_${e++}`);let s=n.name;!n.source||n.transform.length>0?t.push(n):s=n.source;for(let o of r.children)i(o,{name:null,source:s,transform:[]});break}}}return i}function KZ(t){let e=[],i=YZ(e);for(let r of t.children)i(r,{source:t.name,name:null,transform:[]});return e}function JZ(t,e){let i=[],r=YZ(i),n=0;for(let o of t.sources){o.hasName()||(o.dataName=`source_${n++}`);let a=o.assemble();r(o,a)}for(let o of i)o.transform.length===0&&delete o.transform;let s=0;for(let[o,a]of i.entries())(a.transform??[]).length===0&&!a.source&&i.splice(s++,0,i.splice(o,1)[0]);for(let o of i)for(let a of o.transform??[])a.type==="lookup"&&(a.from=t.outputNodes[a.from].getSource());for(let o of i)o.name in e&&(o.values=e[o.name]);return i}function E6e(t){return t==="top"||t==="left"||Te(t)?"header":"footer"}function QZ(t){for(let e of $r)k6e(t,e);ZZ(t,"x"),ZZ(t,"y")}function k6e(t,e){let{facet:i,config:r,child:n,component:s}=t;if(t.channelHasField(e)){let o=i[e],a=Cc("title",null,r,e),l=Kl(o,r,{allowDisabling:!0,includeDefault:a===void 0||!!a});n.component.layoutHeaders[e].title&&(l=K(l)?l.join(", "):l,l+=` / ${n.component.layoutHeaders[e].title}`,n.component.layoutHeaders[e].title=null);let u=Cc("labelOrient",o.header,r,e),c=o.header!==null?wt(o.header?.labels,r.header.labels,!0):!1,h=qe(["bottom","right"],u)?"footer":"header";s.layoutHeaders[e]={title:o.header!==null?l:null,facetFieldDef:o,[h]:e==="facet"?[]:[eQ(t,e,c)]}}}function eQ(t,e,i){let r=e==="row"?"height":"width";return{labels:i,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function ZZ(t,e){let{child:i}=t;if(i.component.axes[e]){let{layoutHeaders:r,resolve:n}=t.component;if(n.axis[e]=gg(n,e),n.axis[e]==="shared"){let s=e==="x"?"column":"row",o=r[s];for(let a of i.component.axes[e]){let l=E6e(a.get("orient"));o[l]??(o[l]=[eQ(t,s,!1)]);let u=hg(a,"main",t.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function tQ(t){OS(t),LS(t,"width"),LS(t,"height")}function iQ(t){OS(t);let e=t.layout.columns===1?"width":"childWidth",i=t.layout.columns===void 0?"height":"childHeight";LS(t,e),LS(t,i)}function OS(t){for(let e of t.children)e.parseLayoutSize()}function LS(t,e){let i=dS(e),r=Zh(i),n=t.component.resolve,s=t.component.layoutSize,o;for(let a of t.children){let l=a.component.layoutSize.getWithExplicit(i),u=n.scale[r]??pS(r,t);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=Ws(o,l,i,"")}else o=l}if(o){for(let a of t.children)t.renameSignal(a.getName(i),t.getName(e)),a.component.layoutSize.set(i,"merged",!1);s.setWithExplicit(e,o)}else s.setWithExplicit(e,{explicit:!1,value:void 0})}function rQ(t){let{size:e,component:i}=t;for(let r of dn){let n=Fi(r);if(e[n]){let s=e[n];i.layoutSize.set(n,Us(s)?"step":s,!0)}else{let s=A6e(t,n);i.layoutSize.set(n,s,!1)}}}function A6e(t,e){let i=e==="width"?"x":"y",r=t.config,n=t.getScaleComponent(i);if(n){let s=n.get("type"),o=n.get("range");if(Kt(s)){let a=eg(r.view,e);return $s(o)||Us(a)?"step":a}else return sx(r.view,e)}else{if(t.hasProjection||t.mark==="arc")return sx(r.view,e);{let s=eg(r.view,e);return Us(s)?s.step:s}}}function PS(t,e,i){return be(e,{suffix:`by_${be(t)}`,...i})}var zS=class t extends _g{constructor(e,i,r,n){super(e,"facet",i,r,n,e.resolve),this.child=Pg(e.spec,this,this.getName("child"),void 0,n),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!Xl(e))return{facet:this.initFacetFieldDef(e,"facet")};let i=Z(e),r={};for(let n of i){if(![zs,Is].includes(n)){re(Q.incompatibleChannel(n,"facet"));break}let s=e[n];if(s.field===void 0){re(Q.emptyFieldDef(s,n));break}r[n]=this.initFacetFieldDef(s,n)}return r}initFacetFieldDef(e,i){let r=Qy(e,i);return r.header?r.header=Ei(r.header):r.header===null&&(r.header=null),r}channelHasField(e){return ae(this.facet,e)}fieldDef(e){return this.facet[e]}parseData(){this.component.data=fd(this),this.child.parseData()}parseLayoutSize(){OS(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(e=>Vr(e))&&Nm(Qf)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),QZ(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){let e={};for(let i of $r)for(let r of pg){let n=this.component.layoutHeaders[i],s=n[r],{facetFieldDef:o}=n;if(o){let a=Cc("titleOrient",o.header,this.config,i);if(["right","bottom"].includes(a)){let l=dg(i,a);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[l]="end"}}if(s?.[0]){let a=i==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";i!=="facet"&&!this.child.component.layoutSize.get(a)&&(e[l]??(e[l]={}),e[l][i]=.5),n.title&&(e.offset??(e.offset={}),e.offset[i==="row"?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){let{column:e,row:i}=this.facet,r=e?this.columnDistinctSignal():i?1:void 0,n="all";return(!i&&this.component.resolve.scale.x==="independent"||!e&&this.component.resolve.scale.y==="independent")&&(n="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:n}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof t))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(e){return this.parent&&this.parent instanceof t?{...this.channelHasField("column")?{encode:{update:{columns:{field:be(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){let e=[],i=[],r=[];if(this.child instanceof t){if(this.child.channelHasField("column")){let n=be(this.child.facet.column);e.push(n),i.push("distinct"),r.push(`distinct_${n}`)}}else for(let n of dn){let s=this.child.component.scales[n];if(s&&!s.merged){let o=s.get("type"),a=s.get("range");if(Kt(o)&&$s(a)){let l=ud(this.child,n),u=yg(l);u?(e.push(u),i.push("distinct"),r.push(`distinct_${u}`)):re(Q.unknownField(n))}}}return{fields:e,ops:i,as:r}}assembleFacet(){let{name:e,data:i}=this.component.data.facetRoot,{row:r,column:n}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(let c of $r){let h=this.facet[c];if(h){l.push(be(h));let{bin:d,sort:p}=h;if(yt(d)&&l.push(be(h,{binSuffix:"end"})),Nn(p)){let{field:f,op:m=td}=p,g=PS(h,p);r&&n?(s.push(g),o.push("max"),a.push(g)):(s.push(f),o.push(m),a.push(g))}else if(K(p)){let f=tu(h,c);s.push(f),o.push("max"),a.push(f)}}}let u=!!r&&!!n;return{name:e,data:i,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(e){let{facet:i}=this,r=i[e];return r?Nn(r.sort)?[PS(r,r.sort,{expr:"datum"})]:K(r.sort)?[tu(r,e,{expr:"datum"})]:[be(r,{expr:"datum"})]:[]}facetSortOrder(e){let{facet:i}=this,r=i[e];if(r){let{sort:n}=r;return[(Nn(n)?n.order:!K(n)&&n)||"ascending"]}return[]}assembleLabelTitle(){let{facet:e,config:i}=this;if(e.facet)return cS(e.facet,"facet",i);let r={row:["top","bottom"],column:["left","right"]};for(let n of fg)if(e[n]){let s=Cc("labelOrient",e[n]?.header,i,n);if(r[n].includes(s))return cS(e[n],n,i)}}assembleMarks(){let{child:e}=this,i=this.component.data.facetRoot,r=KZ(i),n=e.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||e.assembleTitle(),o=e.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:$r.map(l=>this.facetSortFields(l)).flat(),order:$r.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...n?{encode:{update:n}}:{},...e.assembleGroup(pJ(this,[]))}]}getMapping(){return this.facet}};function nQ(t,e){let{row:i,column:r}=e;if(i&&r){let n=null;for(let s of[i,r])if(Nn(s.sort)){let{field:o,op:a=td}=s.sort;t=n=new rl(t,{joinaggregate:[{op:a,field:o,as:PS(s,s.sort,{forAs:!0})}],groupby:[be(s)]})}return n}return null}function EL(t,e){for(let i of e){let r=i.data;if(t.name&&i.hasName()&&t.name!==i.dataName)continue;let n=t.format?.mesh,s=r.format?.feature;if(n&&s)continue;let o=t.format?.feature;if((o||s)&&o!==s)continue;let a=r.format?.mesh;if(!((n||a)&&n!==a)){if(lp(t)&&lp(r)){if(Nr(t.values,r.values))return i}else if(bc(t)&&bc(r)){if(t.url===r.url)return i}else if(W3(t)&&t.name===i.dataName)return i}}return null}function T6e(t,e){if(t.data||!t.parent){if(t.data===null){let r=new qs({values:[]});return e.push(r),r}let i=EL(t.data,e);if(i)return Ja(t.data)||(i.data.format=_M({},t.data.format,i.data.format)),!i.hasName()&&t.data.name&&(i.dataName=t.data.name),i;{let r=new qs(t.data);return e.push(r),r}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function R6e(t,e,i){let r=0;for(let n of e.transforms){let s,o;if(VK(n))o=t=new mp(t,n),s="derived";else if(ax(n)){let a=AZ(n);o=t=qr.makeWithAncestors(t,{},a,i)??t,t=new eu(t,e,n.filter)}else if(B3(n))o=t=tl.makeFromTransform(t,n,e),s="number";else if(qK(n))s="date",i.getWithExplicit(n.field).value===void 0&&(t=new qr(t,{[n.field]:s}),i.set(n.field,s,!1)),o=t=ea.makeFromTransform(t,n);else if(GK(n))o=t=xo.makeFromTransform(t,n),s="number",fx(e)&&(t=new il(t));else if(I3(n))o=t=Dg.make(t,e,n,r++),s="derived";else if(HK(n))o=t=new Sc(t,n),s="number";else if(UK(n))o=t=new rl(t,n),s="number";else if(XK(n))o=t=ru.makeFromTransform(t,n),s="derived";else if(YK(n))o=t=new kg(t,n),s="derived";else if(KK(n))o=t=new Sg(t,n),s="derived";else if(WK(n))o=t=new Eg(t,n),s="derived";else if(PK(n))o=t=new Lg(t,n),s="derived";else if($K(n))t=new Og(t,n);else if(jK(n))o=t=vp.makeFromTransform(t,n),s="derived";else if(zK(n))o=t=new Cg(t,n),s="derived";else if(IK(n))o=t=new Mg(t,n),s="derived";else if(BK(n))o=t=new Fg(t,n),s="derived";else if(NK(n))o=t=new Rg(t,n),s="derived";else{re(Q.invalidTransformIgnored(n));continue}if(o&&s!==void 0)for(let a of o.producedFields()??[])i.set(a,s,!1)}return t}function fd(t){let e=T6e(t,t.component.data.sources),{outputNodes:i,outputNodeRefCounts:r}=t.component.data,n=t.data,o=!(n&&(Ja(n)||bc(n)||lp(n)))&&t.parent?t.parent.component.data.ancestorParse.clone():new U3;Ja(n)?(LF(n)?e=new hd(e,n.sequence):lx(n)&&(e=new cd(e,n.graticule)),o.parseNothing=!0):n?.format?.parse===null&&(o.parseNothing=!0),e=qr.makeExplicit(e,t,o)??e,e=new il(e);let a=t.parent&&ta(t.parent);(Rt(t)||er(t))&&a&&(e=tl.makeFromEncoding(e,t)??e),t.transforms.length>0&&(e=R6e(e,t,o));let l=RZ(t),u=TZ(t);e=qr.makeWithAncestors(e,{},{...l,...u},o)??e,Rt(t)&&(e=Ag.parseAll(e,t),e=Tg.parseAll(e,t)),(Rt(t)||er(t))&&(a||(e=tl.makeFromEncoding(e,t)??e),e=ea.makeFromEncoding(e,t)??e,e=mp.parseAllForSortIndex(e,t));let c=e=IS(Pt.Raw,t,e);if(Rt(t)){let g=xo.makeFromEncoding(e,t);g&&(e=g,fx(t)&&(e=new il(e))),e=vp.makeFromEncoding(e,t)??e,e=ru.makeFromEncoding(e,t)??e}let h,d;if(Rt(t)){let{markDef:g,mark:b,config:v}=t,y=pt("invalid",g,v),{marks:x,scales:_}=d=PF({invalid:y,isPath:In(b)});x!==_&&_==="include-invalid-values"&&(h=e=IS(Pt.PreFilterInvalid,t,e)),x==="exclude-invalid-values"&&(e=gp.make(e,t,d)??e)}let p=e=IS(Pt.Main,t,e),f;if(Rt(t)&&d){let{marks:g,scales:b}=d;g==="include-invalid-values"&&b==="exclude-invalid-values"&&(e=gp.make(e,t,d)??e,f=e=IS(Pt.PostFilterInvalid,t,e))}Rt(t)&&iZ(t,p);let m=null;if(er(t)){let g=t.getName("facet");e=nQ(e,t.facet)??e,m=new na(e,t,g,p.getSource()),i[g]=m}return{...t.component.data,outputNodes:i,outputNodeRefCounts:r,raw:c,main:p,facetRoot:m,ancestorParse:o,preFilterInvalid:h,postFilterInvalid:f}}function IS(t,e,i){let{outputNodes:r,outputNodeRefCounts:n}=e.component.data,s=e.getDataName(t),o=new Xi(i,s,t,n);return r[s]=o,o}var BS=class extends bp{constructor(e,i,r,n){super(e,"concat",i,r,n,e.resolve),(e.resolve?.axis?.x==="shared"||e.resolve?.axis?.y==="shared")&&re(Q.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(e).map((s,o)=>Pg(s,this,this.getName(`concat_${o}`),void 0,n))}parseData(){this.component.data=fd(this);for(let e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(let e of this.children){e.parseSelections();for(let i of Z(e.component.selection))this.component.selection[i]=e.component.selection[i]}Object.values(this.component.selection).some(e=>Vr(e))&&Nm(Qf)}parseMarkGroup(){for(let e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(let e of this.children)e.parseAxesAndHeaders()}getChildren(e){return nd(e)?e.vconcat:Qm(e)?e.hconcat:e.concat}parseLayoutSize(){iQ(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce((i,r)=>r.assembleSelectionTopLevelSignals(i),e)}assembleSignals(){return this.children.forEach(e=>e.assembleSignals()),[]}assembleLayoutSignals(){let e=mg(this);for(let i of this.children)e.push(...i.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce((i,r)=>r.assembleSelectionData(i),e)}assembleMarks(){return this.children.map(e=>{let i=e.assembleTitle(),r=e.assembleGroupStyle(),n=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...i?{title:i}:{},...r?{style:r}:{},...n?{encode:{update:n}}:{},...e.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){let e=this.layout.columns;return{...e!=null?{columns:e}:{},bounds:"full",align:"each"}}};function D6e(t){return t===!1||t===null}var M6e={disable:1,gridScale:1,scale:1,...cF,labelExpr:1,encode:1},kL=Z(M6e),NS=class t extends $n{constructor(e={},i={},r=!1){super(),this.explicit=e,this.implicit=i,this.mainExtracted=r}clone(){return new t(De(this.explicit),De(this.implicit),this.mainExtracted)}hasAxisPart(e){return e==="axis"?!0:e==="grid"||e==="title"?!!this.get(e):!D6e(this.get(e))}hasOrientSignalRef(){return Te(this.explicit.orient)}};function sQ(t,e,i){let{encoding:r,config:n}=t,s=qt(r[e])??qt(r[Hr(e)]),o=t.axis(e)||{},{format:a,formatType:l}=o;if(Gl(l))return{text:vo({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:n}),...i};if(a===void 0&&l===void 0&&n.customFormatTypes){if(cc(s)==="quantitative"){if(hc(s)&&s.stack==="normalize"&&n.normalizedNumberFormatType)return{text:vo({fieldOrDatumDef:s,field:"datum.value",format:n.normalizedNumberFormat,formatType:n.normalizedNumberFormatType,config:n}),...i};if(n.numberFormatType)return{text:vo({fieldOrDatumDef:s,field:"datum.value",format:n.numberFormat,formatType:n.numberFormatType,config:n}),...i}}if(cc(s)==="temporal"&&n.timeFormatType&&ce(s)&&!s.timeUnit)return{text:vo({fieldOrDatumDef:s,field:"datum.value",format:n.timeFormat,formatType:n.timeFormatType,config:n}),...i}}return i}function oQ(t){return dn.reduce((e,i)=>(t.component.scales[i]&&(e[i]=[B6e(i,t)]),e),{})}var L6e={bottom:"top",top:"bottom",left:"right",right:"left"};function aQ(t){let{axes:e,resolve:i}=t.component,r={top:0,bottom:0,right:0,left:0};for(let n of t.children){n.parseAxesAndHeaders();for(let s of Z(n.component.axes))i.axis[s]=gg(t.component.resolve,s),i.axis[s]==="shared"&&(e[s]=O6e(e[s],n.component.axes[s]),e[s]||(i.axis[s]="independent",delete e[s]))}for(let n of dn){for(let s of t.children)if(s.component.axes[n]){if(i.axis[n]==="independent"){e[n]=(e[n]??[]).concat(s.component.axes[n]);for(let o of s.component.axes[n]){let{value:a,explicit:l}=o.getWithExplicit("orient");if(!Te(a)){if(r[a]>0&&!l){let u=L6e[a];r[a]>r[u]&&o.set("orient",u,!1)}r[a]++}}}delete s.component.axes[n]}if(i.axis[n]==="independent"&&e[n]&&e[n].length>1)for(let[s,o]of(e[n]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function O6e(t,e){if(t){if(t.length!==e.length)return;let i=t.length;for(let r=0;r<i;r++){let n=t[r],s=e[r];if(!!n!=!!s)return;if(n&&s){let o=n.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;t[r]=P6e(n,s)}}}else return e.map(i=>i.clone());return t}function P6e(t,e){for(let i of kL){let r=Ws(t.getWithExplicit(i),e.getWithExplicit(i),i,"axis",(n,s)=>{switch(i){case"title":return N5(n,s);case"gridScale":return{explicit:n.explicit,value:wt(n.value,s.value)}}return rg(n,s,i,"axis")});t.setWithExplicit(i,r)}return t}function z6e(t,e,i,r,n){if(e==="disable")return i!==void 0;switch(i=i||{},e){case"titleAngle":case"labelAngle":return t===(Te(i.labelAngle)?i.labelAngle:Kh(i.labelAngle));case"values":return!!i.values;case"encode":return!!i.encoding||!!i.labelAngle;case"title":if(t===uL(r,n))return!0}return t===i[e]}var I6e=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function B6e(t,e){let i=e.axis(t),r=new NS,n=qt(e.encoding[t]),{mark:s,config:o}=e,a=i?.orient||o[t==="x"?"axisX":"axisY"]?.orient||o.axis?.orient||aZ(t),l=e.getScaleComponent(t).get("type"),u=sZ(t,l,a,e.config),c=i!==void 0?!i:wx("disable",o.style,i?.style,u).configValue;if(r.set("disable",c,i!==void 0),c)return r;i=i||{};let h=oZ(n,i,t,o.style,u),d=a3(i.formatType,n,l),p=o3(n,n.type,i.format,i.formatType,o,!0),f={fieldOrDatumDef:n,axis:i,channel:t,model:e,scaleType:l,orient:a,labelAngle:h,format:p,formatType:d,mark:s,config:o};for(let b of kL){let v=b in oL?oL[b](f):hF(b)?i[b]:void 0,y=v!==void 0,x=z6e(v,b,i,e,t);if(y&&x)r.set(b,v,x);else{let{configValue:_=void 0,configFrom:w=void 0}=hF(b)&&b!=="values"?wx(b,o.style,i.style,u):{},C=_!==void 0;y&&!C?r.set(b,v,x):(w!=="vgAxisConfig"||I6e.has(b)&&C||pc(_)||Te(_))&&r.set(b,_,!1)}}let m=i.encoding??{},g=g3.reduce((b,v)=>{if(!r.hasAxisPart(v))return b;let y=fS(m[v]??{},e),x=v==="labels"?sQ(e,t,y):y;return x!==void 0&&!ft(x)&&(b[v]={update:x}),b},{});return ft(g)||r.set("encode",g,!!i.encoding||i.labelAngle!==void 0),r}function lQ({encoding:t,size:e}){for(let i of dn){let r=Fi(i);Us(e[r])&&Ka(t[i])&&(delete e[r],re(Q.stepDropped(r)))}return e}var uQ={vgMark:"arc",encodeEntry:t=>({...ki(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Oi("x",t,{defaultPos:"mid"}),...Oi("y",t,{defaultPos:"mid"}),...Wn(t,"radius"),...Wn(t,"theta")})};var cQ={vgMark:"area",encodeEntry:t=>({...ki(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...ad("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"}),...ad("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"}),...ug(t)})};var hQ={vgMark:"rect",encodeEntry:t=>({...ki(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wn(t,"x"),...Wn(t,"y")})};var dQ={vgMark:"shape",encodeEntry:t=>({...ki(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:t=>{let{encoding:e}=t,i=e.shape;return[{type:"geoshape",projection:t.projectionName(),...i&&ce(i)&&i.type===Ya?{field:be(i,{expr:"datum"})}:{}}]}};var fQ={vgMark:"image",encodeEntry:t=>({...ki(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Wn(t,"x"),...Wn(t,"y"),...od(t,"url")})};var pQ={vgMark:"line",encodeEntry:t=>({...ki(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Oi("x",t,{defaultPos:"mid"}),...Oi("y",t,{defaultPos:"mid"}),...pi("size",t,{vgChannel:"strokeWidth"}),...ug(t)})},mQ={vgMark:"trail",encodeEntry:t=>({...ki(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Oi("x",t,{defaultPos:"mid"}),...Oi("y",t,{defaultPos:"mid"}),...pi("size",t),...ug(t)})};function AL(t,e){let{config:i}=t;return{...ki(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Oi("x",t,{defaultPos:"mid"}),...Oi("y",t,{defaultPos:"mid"}),...pi("size",t),...pi("angle",t),...N6e(t,i,e)}}function N6e(t,e,i){return i?{shape:{value:i}}:pi("shape",t)}var gQ={vgMark:"symbol",encodeEntry:t=>AL(t)},bQ={vgMark:"symbol",encodeEntry:t=>AL(t,"circle")},vQ={vgMark:"symbol",encodeEntry:t=>AL(t,"square")};var yQ={vgMark:"rect",encodeEntry:t=>({...ki(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wn(t,"x"),...Wn(t,"y")})};var xQ={vgMark:"rule",encodeEntry:t=>{let{markDef:e}=t,i=e.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:{...ki(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ad("x",t,{defaultPos:i==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:i!=="vertical"}),...ad("y",t,{defaultPos:i==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:i!=="horizontal"}),...pi("size",t,{vgChannel:"strokeWidth"})}}};var wQ={vgMark:"text",encodeEntry:t=>{let{config:e,encoding:i}=t;return{...ki(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Oi("x",t,{defaultPos:"mid"}),...Oi("y",t,{defaultPos:"mid"}),...od(t),...pi("size",t,{vgChannel:"fontSize"}),...pi("angle",t),...J3("align",$6e(t.markDef,i,e)),...J3("baseline",H6e(t.markDef,i,e)),...Oi("radius",t,{defaultPos:null}),...Oi("theta",t,{defaultPos:null})}}};function $6e(t,e,i){if(pt("align",t,i)===void 0)return"center"}function H6e(t,e,i){if(pt("baseline",t,i)===void 0)return"middle"}var _Q={vgMark:"rect",encodeEntry:t=>{let{config:e,markDef:i}=t,r=i.orient,n=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...ki(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wn(t,n),...Oi(s,t,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:xt(pt("thickness",i,e))}}};var $S={arc:uQ,area:cQ,bar:hQ,circle:bQ,geoshape:dQ,image:fQ,line:pQ,point:gQ,rect:yQ,rule:xQ,square:vQ,text:wQ,tick:_Q,trail:mQ};function EQ(t){if(qe([sp,rp,wY],t.mark)){let e=x3(t.mark,t.encoding);if(e.length>0)return U6e(t,e)}else if(t.mark===np){let e=P5.some(i=>pt(i,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return W6e(t)}return TL(t)}var CQ="faceted_path_";function U6e(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:CQ+t.requestDataName(Pt.Main),data:t.requestDataName(Pt.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:TL(t,{fromPrefix:CQ})}]}var SQ="stack_group_";function W6e(t){let[e]=TL(t,{fromPrefix:SQ}),i=t.scaleName(t.stack.fieldChannel),r=(u={})=>t.vgField(t.stack.fieldChannel,u),n=(u,c)=>{let h=[r({prefix:"min",suffix:"start",expr:c}),r({prefix:"max",suffix:"start",expr:c}),r({prefix:"min",suffix:"end",expr:c}),r({prefix:"max",suffix:"end",expr:c})];return`${u}(${h.map(d=>`scale('${i}',${d})`).join(",")})`},s,o;t.stack.fieldChannel==="x"?(s={...rc(e.encode.update,["y","yc","y2","height",...P5]),x:{signal:n("min","datum")},x2:{signal:n("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},e.encode.update={...qi(e.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...rc(e.encode.update,["x","xc","x2","width"]),y:{signal:n("min","datum")},y2:{signal:n("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},e.encode.update={...qi(e.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(let u of P5){let c=ms(u,t.markDef,t.config);e.encode.update[u]?(s[u]=e.encode.update[u],delete e.encode.update[u]):c&&(s[u]=xt(c)),c&&(e.encode.update[u]={value:0})}let a=[];if(t.stack.groupbyChannels?.length>0)for(let u of t.stack.groupbyChannels){let c=t.fieldDef(u),h=be(c);h&&a.push(h),(c?.bin||c?.timeUnit)&&a.push(be(c,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((u,c)=>{if(e.encode.update[c])return{...u,[c]:e.encode.update[c]};{let h=ms(c,t.markDef,t.config);return h!==void 0?{...u,[c]:xt(h)}:u}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(Pt.Main),name:SQ+t.requestDataName(Pt.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[e]}]}]}function V6e(t){let{encoding:e,stack:i,mark:r,markDef:n,config:s}=t,o=e.order;if(!(!K(o)&&mr(o)&&w5(o.value)||!o&&w5(pt("order",n,s)))){if((K(o)||ce(o))&&!i)return B5(o,{expr:"datum"});if(In(r)){let a=n.orient==="horizontal"?"y":"x",l=e[a];if(ce(l))return{field:a}}}}function TL(t,e={fromPrefix:""}){let{mark:i,markDef:r,encoding:n,config:s}=t,o=wt(r.clip,j6e(t),q6e(t)),a=IM(r),l=n.key,u=V6e(t),c=G6e(t),h=pt("aria",r,s),d=$S[i].postEncodingTransform?$S[i].postEncodingTransform(t):null;return[{name:t.getName("marks"),type:$S[i].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...h===!1?{aria:h}:{},from:{data:e.fromPrefix+t.requestDataName(Pt.Main)},encode:{update:$S[i].encodeEntry(t)},...d?{transform:d}:{}}]}function j6e(t){let e=t.getScaleComponent("x"),i=t.getScaleComponent("y");return e?.get("selectionExtent")||i?.get("selectionExtent")?!0:void 0}function q6e(t){let e=t.component.projection;return e&&!e.isFit?!0:void 0}function G6e(t){if(!t.component.selection)return null;let e=Z(t.component.selection).length,i=e,r=t.parent;for(;r&&i===0;)i=Z(r.component.selection).length,r=r.parent;return i?{interactive:e>0||t.mark==="geoshape"||!!t.encoding.tooltip||!!t.markDef.tooltip}:null}var zg=class extends _g{constructor(e,i,r,n={},s){super(e,"unit",i,r,s,void 0,kF(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=u=>(u.from?.data&&(u.from.data=this.lookupDataSource(u.from.data),"time"in this.encoding&&(u.from.data=u.from.data+j3)),u.from?.facet?.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u);let o=fn(e.mark)?{...e.mark}:{type:e.mark},a=o.type;o.filled===void 0&&(o.filled=CK(o,s,{graticule:e.data&&lx(e.data)}));let l=this.encoding=YY(e.encoding||{},a,o.filled,s);this.markDef=F3(o,l,s),this.size=lQ({encoding:l,size:kF(e)?{...n,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:n}),this.stack=M3(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter(u=>Zm(u))}get hasProjection(){let{encoding:e}=this,i=this.mark===Q5,r=e&&hX.some(n=>Ke(e[n]));return i||r}scaleDomain(e){let i=this.specifiedScales[e];return i?i.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,i){return Pm.reduce((r,n)=>{let s=qt(i[n]);return s&&(r[n]=this.initScale(s.scale??{})),r},{})}initScale(e){let{domain:i,range:r}=e,n=Ei(e);return K(i)&&(n.domain=i.map(Ur)),K(r)&&(n.range=r.map(Ur)),n}initAxes(e){return dn.reduce((i,r)=>{let n=e[r];if(Ke(n)||r===Lt&&Ke(e.x2)||r===hi&&Ke(e.y2)){let s=Ke(n)?n.axis:void 0;i[r]=s&&this.initAxis({...s})}return i},{})}initAxis(e){let i=Z(e),r={};for(let n of i){let s=e[n];r[n]=pc(s)?z5(s):Ur(s)}return r}initLegends(e){return SX.reduce((i,r)=>{let n=qt(e[r]);if(n&&kX(r)){let s=n.legend;i[r]=s&&Ei(s)}return i},{})}parseData(){this.component.data=fd(this)}parseLayoutSize(){rQ(this)}parseSelections(){this.component.selection=tZ(this,this.selection)}parseMarkGroup(){this.component.mark=EQ(this)}parseAxesAndHeaders(){this.component.axes=oQ(this)}assembleSelectionTopLevelSignals(e){return mJ(this,e)}assembleSignals(){return[...uS(this),...fJ(this,[])]}assembleSelectionData(e){return gJ(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return mg(this)}assembleMarks(){let e=this.component.mark??[];return(!this.parent||!ta(this.parent))&&(e=UF(this,e)),e.map(this.correctDataNames)}assembleGroupStyle(){let{style:e}=this.view||{};return e!==void 0?e:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Zl(this.encoding,e)}fieldDef(e){let i=this.encoding[e];return Sr(i)}typedFieldDef(e){let i=this.fieldDef(e);return Li(i)?i:null}};var HS=class t extends bp{constructor(e,i,r,n,s){super(e,"layer",i,r,s,e.resolve,e.view);let o={...n,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map((a,l)=>{if(gc(a))return new t(a,this,this.getName(`layer_${l}`),o,s);if(Er(a))return new zg(a,this,this.getName(`layer_${l}`),o,s);throw new Error(Q.invalidSpec(a))})}parseData(){this.component.data=fd(this);for(let e of this.children)e.parseData()}parseLayoutSize(){tQ(this)}parseSelections(){this.component.selection={};for(let e of this.children){e.parseSelections();for(let i of Z(e.component.selection))this.component.selection[i]=e.component.selection[i]}Object.values(this.component.selection).some(e=>Vr(e))&&Nm(Qf)}parseMarkGroup(){for(let e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){aQ(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce((i,r)=>r.assembleSelectionTopLevelSignals(i),e)}assembleSignals(){return this.children.reduce((e,i)=>e.concat(i.assembleSignals()),uS(this))}assembleLayoutSignals(){return this.children.reduce((e,i)=>e.concat(i.assembleLayoutSignals()),mg(this))}assembleSelectionData(e){return this.children.reduce((i,r)=>r.assembleSelectionData(i),e)}assembleGroupStyle(){let e=new Set;for(let r of this.children)for(let n of ve(r.assembleGroupStyle()))e.add(n);let i=Array.from(e);return i.length>1?i:i.length===1?i[0]:void 0}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(let i of this.children)if(e=i.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return bJ(this,this.children.flatMap(e=>e.assembleMarks()))}assembleLegends(){return this.children.reduce((e,i)=>e.concat(i.assembleLegends()),bS(this))}};function Pg(t,e,i,r,n){if(fc(t))return new zS(t,e,i,n);if(gc(t))return new HS(t,e,i,r,n);if(Er(t))return new zg(t,e,i,r,n);if(SF(t))return new BS(t,e,i,n);throw new Error(Q.invalidSpec(t))}function kQ(t,e={}){e.logger&&UX(e.logger),e.fieldTitle&&aF(e.fieldTitle);try{let i=D3(vl(e.config,t.config)),r=$3(t,i),n=Pg(r,null,"",void 0,i);return n.parse(),LZ(n.component.data,n),{spec:Y6e(n,X6e(t,r.autosize,i,n),t.datasets,t.usermeta),normalized:r}}finally{e.logger&&WX(),e.fieldTitle&&qY()}}function X6e(t,e,i,r){let n=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(e===void 0?(e={type:"pad"},r.hasAxisOrientSignalRef()&&(e.resize=!0)):fe(e)&&(e={type:e}),n&&s&&iJ(e.type)){if(n==="step"&&s==="step")re(Q.droppingFit()),e.type="pad";else if(n==="step"||s==="step"){let o=n==="step"?"width":"height";re(Q.droppingFit(Zh(o)));let a=o==="width"?"height":"width";e.type=rJ(a)}}return{...Z(e).length===1&&e.type?e.type==="pad"?{}:{autosize:e.type}:{autosize:e},...FF(i,!1),...FF(t,!0)}}function Y6e(t,e,i={},r){let n=t.config?xK(t.config):void 0,s=JZ(t.component.data,i),o=t.assembleSelectionData(s),a=t.assembleProjections(),l=t.assembleTitle(),u=t.assembleGroupStyle(),c=t.assembleGroupEncodeEntry(!0),h=t.assembleLayoutSignals();h=h.filter(f=>(f.name==="width"||f.name==="height")&&f.value!==void 0?(e[f.name]=+f.value,!1):!0);let{params:d,...p}=e;return{$schema:"https://vega.github.io/schema/vega/v5.json",...t.description?{description:t.description}:{},...p,...l?{title:l}:{},...u?{style:u}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...t.assembleGroup([...h,...t.assembleSelectionTopLevelSignals([]),...R3(d)]),...n?{config:n}:{},...r?{usermeta:r}:{}}}var K6e=oX.version;function J6e(t){let[e,i]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e,version:i}}var DL=J6e;var IL={};br(IL,{carbong10:()=>Yke,carbong100:()=>Jke,carbong90:()=>Kke,carbonwhite:()=>Xke,dark:()=>bke,excel:()=>vke,fivethirtyeight:()=>wke,ggplot2:()=>_ke,googlecharts:()=>Oke,latimes:()=>kke,powerbi:()=>Vke,quartz:()=>Ake,urbaninstitute:()=>Lke,version:()=>Zke,vox:()=>Tke});var Z6e="vega-themes",Q6e="2.15.0",eke="Themes for stylized Vega and Vega-Lite visualizations.",tke=["vega","vega-lite","themes","style"],ike="BSD-3-Clause",rke={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},nke=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],ske="build/vega-themes.js",oke="build/vega-themes.module.js",ake="build/vega-themes.min.js",lke="build/vega-themes.min.js",uke="build/vega-themes.module.d.ts",cke={type:"git",url:"https://github.com/vega/vega-themes.git"},hke=["src","build"],dke={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},fke={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},pke={vega:"*","vega-lite":"*"},mke={},gke={name:Z6e,version:Q6e,description:eke,keywords:tke,license:ike,author:rke,contributors:nke,main:ske,module:oke,unpkg:ake,jsdelivr:lke,types:uke,repository:cke,files:hke,scripts:dke,devDependencies:fke,peerDependencies:pke,dependencies:mke},Ig="#fff",AQ="#888",bke={background:"#333",view:{stroke:AQ},title:{color:Ig,subtitleColor:Ig},style:{"guide-label":{fill:Ig},"guide-title":{fill:Ig}},axis:{domainColor:Ig,gridColor:AQ,tickColor:Ig}},yp="#4572a7",vke={background:"#fff",arc:{fill:yp},area:{fill:yp},line:{stroke:yp,strokeWidth:2},path:{stroke:yp},rect:{fill:yp},shape:{stroke:yp},symbol:{fill:yp,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},xp="#30a2da",ML="#cbcbcb",yke="#999",xke="#333",TQ="#f0f0f0",RQ="#333",wke={arc:{fill:xp},area:{fill:xp},axis:{domainColor:ML,grid:!0,gridColor:ML,gridWidth:1,labelColor:yke,labelFontSize:10,titleColor:xke,tickColor:ML,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:TQ,group:{fill:TQ},legend:{labelColor:RQ,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:RQ,titleFontSize:14,titlePadding:10},line:{stroke:xp,strokeWidth:2},path:{stroke:xp,strokeWidth:.5},rect:{fill:xp},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:xp},bar:{binSpacing:2,fill:xp,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},wp="#000",_ke={group:{fill:"#e5e5e5"},arc:{fill:wp},area:{fill:wp},line:{stroke:wp},path:{stroke:wp},rect:{fill:wp},shape:{stroke:wp},symbol:{fill:wp,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Cke=22,Ske="normal",DQ="Benton Gothic, sans-serif",MQ=11.5,Eke="normal",_p="#82c6df",FL="Benton Gothic Bold, sans-serif",FQ="normal",LQ=13,Tx={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},kke={background:"#ffffff",title:{anchor:"start",color:"#000000",font:FL,fontSize:Cke,fontWeight:Ske},arc:{fill:_p},area:{fill:_p},line:{stroke:_p,strokeWidth:2},path:{stroke:_p},rect:{fill:_p},shape:{stroke:_p},symbol:{fill:_p,size:30},axis:{labelFont:DQ,labelFontSize:MQ,labelFontWeight:Eke,titleFont:FL,titleFontSize:LQ,titleFontWeight:FQ},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:DQ,labelFontSize:MQ,symbolType:"square",titleFont:FL,titleFontSize:LQ,titleFontWeight:FQ},range:{category:Tx["category-6"],diverging:Tx["fireandice-6"],heatmap:Tx["fire-7"],ordinal:Tx["fire-7"],ramp:Tx["fire-7"]}},Cp="#ab5787",US="#979797",Ake={background:"#f9f9f9",arc:{fill:Cp},area:{fill:Cp},line:{stroke:Cp},path:{stroke:Cp},rect:{fill:Cp},shape:{stroke:Cp},symbol:{fill:Cp,size:30},axis:{domainColor:US,domainWidth:.5,gridWidth:.2,labelColor:US,tickColor:US,tickWidth:.2,titleColor:US},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Sp="#3e5c69",Tke={background:"#fff",arc:{fill:Sp},area:{fill:Sp},line:{stroke:Sp},path:{stroke:Sp},rect:{fill:Sp},shape:{stroke:Sp},symbol:{fill:Sp},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},sa="#1696d2",OQ="#000000",Rke="#FFFFFF",WS="Lato",LL="Lato",Dke="Lato",Mke="#DEDDDD",Fke=18,Rx={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Lke={background:Rke,title:{anchor:"start",fontSize:Fke,font:WS},axisX:{domain:!0,domainColor:OQ,domainWidth:1,grid:!1,labelFontSize:12,labelFont:LL,labelAngle:0,tickColor:OQ,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:WS},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Mke,gridWidth:1,labelFontSize:12,labelFont:LL,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:WS,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:LL,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:WS,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Rx["six-groups-cat-1"],diverging:Rx["diverging-colors"],heatmap:Rx["diverging-colors"],ordinal:Rx["six-groups-seq"],ramp:Rx["shades-blue"]},area:{fill:sa},rect:{fill:sa},line:{color:sa,stroke:sa,strokeWidth:5},trail:{color:sa,stroke:sa,strokeWidth:0,size:1},path:{stroke:sa,strokeWidth:.5},point:{filled:!0},text:{font:Dke,color:sa,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:sa,stroke:null}},arc:{fill:sa},shape:{stroke:sa},symbol:{fill:sa,size:30}},Ep="#3366CC",PQ="#ccc",VS="Arial, sans-serif",Oke={arc:{fill:Ep},area:{fill:Ep},path:{stroke:Ep},rect:{fill:Ep},shape:{stroke:Ep},symbol:{stroke:Ep},circle:{fill:Ep},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:VS,fontSize:12},"guide-title":{font:VS,fontSize:12},"group-title":{font:VS,fontSize:12}},title:{font:VS,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:PQ,tickColor:PQ,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},zL=t=>t*(1/3+1),zQ=zL(9),IQ=zL(10),BQ=zL(12),Dx="Segoe UI",NQ="wf_standard-font, helvetica, arial, sans-serif",$Q="#252423",Mx="#605E5C",HQ="transparent",Pke="#C8C6C4",sl="#118DFF",zke="#12239E",Ike="#E66C37",Bke="#6B007B",Nke="#E044A7",$ke="#744EC2",Hke="#D9B300",Uke="#D64550",WQ=sl,VQ="#DEEFFF",UQ=[VQ,WQ],Wke=[VQ,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",WQ],Vke={view:{stroke:HQ},background:HQ,font:Dx,header:{titleFont:NQ,titleFontSize:BQ,titleColor:$Q,labelFont:Dx,labelFontSize:IQ,labelColor:Mx},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Mx,labelFontSize:zQ,titleFont:NQ,titleColor:$Q,titleFontSize:BQ,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Pke,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:sl},line:{stroke:sl,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Dx,fontSize:zQ,fill:Mx},arc:{fill:sl},area:{fill:sl,line:!0,opacity:.6},path:{stroke:sl},rect:{fill:sl},point:{fill:sl,filled:!0,size:75},shape:{stroke:sl},symbol:{fill:sl,strokeWidth:1.5,size:50},legend:{titleFont:Dx,titleFontWeight:"bold",titleColor:Mx,labelFont:Dx,labelFontSize:IQ,labelColor:Mx,symbolType:"circle",symbolSize:75},range:{category:[sl,zke,Ike,Bke,Nke,$ke,Hke,Uke],diverging:UQ,heatmap:UQ,ordinal:Wke}},OL='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',jke='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',PL=400,jS={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},qke=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Gke=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function qS({theme:t,background:e}){let i=["white","g10"].includes(t)?"light":"dark",r=jS.gridBg[t],n=jS.textPrimary[t],s=jS.textSecondary[t],o=i==="dark"?qke:Gke,a=i==="dark"?"#d4bbff":"#6929c4";return{background:e,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:n,anchor:"start",dy:-15,fontSize:16,font:OL,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:jke,labelFontWeight:PL,titleColor:n,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:jS.layerAccent01[t],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:OL,fill:s,fontWeight:PL},"guide-title":{font:OL,fill:s,fontWeight:PL}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var Xke=qS({theme:"white",background:"#ffffff"}),Yke=qS({theme:"g10",background:"#f4f4f4"}),Kke=qS({theme:"g90",background:"#262626"}),Jke=qS({theme:"g100",background:"#161616"}),Zke=gke.version;var Qke="vega-tooltip",e7e="0.34.0",t7e="A tooltip plugin for Vega-Lite and Vega visualizations.",i7e=["vega-lite","vega","tooltip"],r7e={type:"git",url:"https://github.com/vega/vega-tooltip.git"},n7e={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},s7e=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],o7e="BSD-3-Clause",a7e={url:"https://github.com/vega/vega-tooltip/issues"},l7e="https://github.com/vega/vega-tooltip#readme",u7e="build/vega-tooltip.js",c7e="build/vega-tooltip.module.js",h7e="build/vega-tooltip.min.js",d7e="build/vega-tooltip.min.js",f7e="build/vega-tooltip.module.d.ts",p7e=["src","build","types"],m7e={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"yarn copy:data",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},g7e={"@babel/core":"^7.22.10","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.10","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@types/jest":"^29.5.3","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^6.3.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.46.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","gh-pages":"^6.1.0",jest:"^29.6.2","jest-environment-jsdom":"^29.6.2",path:"^0.12.7",prettier:"^3.0.1","release-it":"^16.1.3",rollup:"^4.6.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.3",sass:"^1.64.2",typescript:"~5.3.2","vega-datasets":"^2.7.0","vega-typings":"^0.24.2"},b7e={"vega-util":"^1.17.2"},v7e={name:Qke,version:e7e,description:t7e,keywords:i7e,repository:r7e,author:n7e,collaborators:s7e,license:o7e,bugs:a7e,homepage:l7e,main:u7e,module:c7e,unpkg:h7e,jsdelivr:d7e,types:f7e,files:p7e,scripts:m7e,devDependencies:g7e,dependencies:b7e};function y7e(t,e,i,r){if(K(t))return`[${t.map(n=>e(fe(n)?n:jQ(n,i))).join(", ")}]`;if(ge(t)){let n="",{title:s,image:o,...a}=t;s&&(n+=`<h2>${e(s)}</h2>`),o&&(n+=`<img src="${new URL(e(o),r||location.href).href}">`);let l=Object.keys(a);if(l.length>0){n+="<table>";for(let u of l){let c=a[u];c!==void 0&&(ge(c)&&(c=jQ(c,i)),n+=`<tr><td class="key">${e(u)}</td><td class="value">${e(c)}</td></tr>`)}n+="</table>"}return n||"{}"}return e(t)}function x7e(t){let e=[];return function(i,r){if(typeof r!="object"||r===null)return r;let n=e.indexOf(this)+1;return e.length=n,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}function jQ(t,e){return JSON.stringify(t,x7e(e))}var w7e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`,qQ="vg-tooltip-element",_7e={offsetX:10,offsetY:10,id:qQ,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:C7e,maxDepth:2,formatTooltip:y7e,baseURL:""};function C7e(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function S7e(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return w7e.toString().replace(qQ,t)}function E7e(t,e,i,r){let n=t.clientX+i;n+e.width>window.innerWidth&&(n=+t.clientX-i-e.width);let s=t.clientY+r;return s+e.height>window.innerHeight&&(s=+t.clientY-r-e.height),{x:n,y:s}}var GS=class{constructor(e){this.options={..._7e,...e};let i=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=S7e(i);let n=document.head;n.childNodes.length>0?n.insertBefore(r,n.childNodes[0]):n.appendChild(r)}}tooltipHandler(e,i,r,n){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),n==null||n===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(n,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:s,y:o}=E7e(i,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}},z5t=v7e.version;function k7e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BL,GQ;function A7e(){return GQ||(GQ=1,BL=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),BL}var T7e=Wt;Wt.Node=Tp;Wt.create=Wt;function Wt(t){var e=this;if(e instanceof Wt||(e=new Wt),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var i=0,r=arguments.length;i<r;i++)e.push(arguments[i]);return e}Wt.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,i=t.prev;return e&&(e.prev=i),i&&(i.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=i),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Wt.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Wt.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Wt.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)D7e(this,arguments[t]);return this.length};Wt.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)M7e(this,arguments[t]);return this.length};Wt.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Wt.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Wt.prototype.forEach=function(t,e){e=e||this;for(var i=this.head,r=0;i!==null;r++)t.call(e,i.value,r,this),i=i.next};Wt.prototype.forEachReverse=function(t,e){e=e||this;for(var i=this.tail,r=this.length-1;i!==null;r--)t.call(e,i.value,r,this),i=i.prev};Wt.prototype.get=function(t){for(var e=0,i=this.head;i!==null&&e<t;e++)i=i.next;if(e===t&&i!==null)return i.value};Wt.prototype.getReverse=function(t){for(var e=0,i=this.tail;i!==null&&e<t;e++)i=i.prev;if(e===t&&i!==null)return i.value};Wt.prototype.map=function(t,e){e=e||this;for(var i=new Wt,r=this.head;r!==null;)i.push(t.call(e,r.value,this)),r=r.next;return i};Wt.prototype.mapReverse=function(t,e){e=e||this;for(var i=new Wt,r=this.tail;r!==null;)i.push(t.call(e,r.value,this)),r=r.prev;return i};Wt.prototype.reduce=function(t,e){var i,r=this.head;if(arguments.length>1)i=e;else if(this.head)r=this.head.next,i=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;r!==null;n++)i=t(i,r.value,n),r=r.next;return i};Wt.prototype.reduceReverse=function(t,e){var i,r=this.tail;if(arguments.length>1)i=e;else if(this.tail)r=this.tail.prev,i=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;r!==null;n--)i=t(i,r.value,n),r=r.prev;return i};Wt.prototype.toArray=function(){for(var t=new Array(this.length),e=0,i=this.head;i!==null;e++)t[e]=i.value,i=i.next;return t};Wt.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,i=this.tail;i!==null;e++)t[e]=i.value,i=i.prev;return t};Wt.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var i=new Wt;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,n=this.head;n!==null&&r<t;r++)n=n.next;for(;n!==null&&r<e;r++,n=n.next)i.push(n.value);return i};Wt.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var i=new Wt;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,n=this.tail;n!==null&&r>e;r--)n=n.prev;for(;n!==null&&r>t;r--,n=n.prev)i.push(n.value);return i};Wt.prototype.splice=function(t,e,...i){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,n=this.head;n!==null&&r<t;r++)n=n.next;for(var s=[],r=0;n&&r<e;r++)s.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var r=0;r<i.length;r++)n=R7e(this,n,i[r]);return s};Wt.prototype.reverse=function(){for(var t=this.head,e=this.tail,i=t;i!==null;i=i.prev){var r=i.prev;i.prev=i.next,i.next=r}return this.head=e,this.tail=t,this};function R7e(t,e,i){var r=e===t.head?new Tp(i,null,e,t):new Tp(i,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function D7e(t,e){t.tail=new Tp(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function M7e(t,e){t.head=new Tp(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Tp(t,e,i,r){if(!(this instanceof Tp))return new Tp(t,e,i,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}try{A7e()(Wt)}catch{}var F7e=T7e,kp=Symbol("max"),kc=Symbol("length"),Bg=Symbol("lengthCalculator"),Ox=Symbol("allowStale"),Ap=Symbol("maxAge"),Ec=Symbol("dispose"),XQ=Symbol("noDisposeOnSet"),Gr=Symbol("lruList"),ol=Symbol("cache"),aee=Symbol("updateAgeOnGet"),NL=()=>1,WL=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[kp]=e.max||1/0;let i=e.length||NL;if(this[Bg]=typeof i!="function"?NL:i,this[Ox]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ap]=e.maxAge||0,this[Ec]=e.dispose,this[XQ]=e.noDisposeOnSet||!1,this[aee]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[kp]=e||1/0,Fx(this)}get max(){return this[kp]}set allowStale(e){this[Ox]=!!e}get allowStale(){return this[Ox]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Ap]=e,Fx(this)}get maxAge(){return this[Ap]}set lengthCalculator(e){typeof e!="function"&&(e=NL),e!==this[Bg]&&(this[Bg]=e,this[kc]=0,this[Gr].forEach(i=>{i.length=this[Bg](i.value,i.key),this[kc]+=i.length})),Fx(this)}get lengthCalculator(){return this[Bg]}get length(){return this[kc]}get itemCount(){return this[Gr].length}rforEach(e,i){i=i||this;for(let r=this[Gr].tail;r!==null;){let n=r.prev;YQ(this,e,r,i),r=n}}forEach(e,i){i=i||this;for(let r=this[Gr].head;r!==null;){let n=r.next;YQ(this,e,r,i),r=n}}keys(){return this[Gr].toArray().map(e=>e.key)}values(){return this[Gr].toArray().map(e=>e.value)}reset(){this[Ec]&&this[Gr]&&this[Gr].length&&this[Gr].forEach(e=>this[Ec](e.key,e.value)),this[ol]=new Map,this[Gr]=new F7e,this[kc]=0}dump(){return this[Gr].map(e=>JS(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Gr]}set(e,i,r){if(r=r||this[Ap],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let n=r?Date.now():0,s=this[Bg](i,e);if(this[ol].has(e)){if(s>this[kp])return $g(this,this[ol].get(e)),!1;let l=this[ol].get(e).value;return this[Ec]&&(this[XQ]||this[Ec](e,l.value)),l.now=n,l.maxAge=r,l.value=i,this[kc]+=s-l.length,l.length=s,this.get(e),Fx(this),!0}let o=new VL(e,i,s,n,r);return o.length>this[kp]?(this[Ec]&&this[Ec](e,i),!1):(this[kc]+=o.length,this[Gr].unshift(o),this[ol].set(e,this[Gr].head),Fx(this),!0)}has(e){if(!this[ol].has(e))return!1;let i=this[ol].get(e).value;return!JS(this,i)}get(e){return $L(this,e,!0)}peek(e){return $L(this,e,!1)}pop(){let e=this[Gr].tail;return e?($g(this,e),e.value):null}del(e){$g(this,this[ol].get(e))}load(e){this.reset();let i=Date.now();for(let r=e.length-1;r>=0;r--){let n=e[r],s=n.e||0;if(s===0)this.set(n.k,n.v);else{let o=s-i;o>0&&this.set(n.k,n.v,o)}}}prune(){this[ol].forEach((e,i)=>$L(this,i,!1))}},$L=(t,e,i)=>{let r=t[ol].get(e);if(r){let n=r.value;if(JS(t,n)){if($g(t,r),!t[Ox])return}else i&&(t[aee]&&(r.value.now=Date.now()),t[Gr].unshiftNode(r));return n.value}},JS=(t,e)=>{if(!e||!e.maxAge&&!t[Ap])return!1;let i=Date.now()-e.now;return e.maxAge?i>e.maxAge:t[Ap]&&i>t[Ap]},Fx=t=>{if(t[kc]>t[kp])for(let e=t[Gr].tail;t[kc]>t[kp]&&e!==null;){let i=e.prev;$g(t,e),e=i}},$g=(t,e)=>{if(e){let i=e.value;t[Ec]&&t[Ec](i.key,i.value),t[kc]-=i.length,t[ol].delete(i.key),t[Gr].removeNode(e)}},VL=class{constructor(e,i,r,n,s){this.key=e,this.value=i,this.length=r,this.now=n,this.maxAge=s||0}},YQ=(t,e,i,r)=>{let n=i.value;JS(t,n)&&($g(t,i),t[Ox]||(n=void 0)),n&&e.call(r,n.value,n.key,t)},L7e=WL,O7e=Object.freeze({loose:!0}),P7e=Object.freeze({}),z7e=t=>t?typeof t!="object"?O7e:t:P7e,qL=z7e,jL={exports:{}},I7e="2.0.0",lee=256,B7e=Number.MAX_SAFE_INTEGER||9007199254740991,N7e=16,$7e=lee-6,H7e=["major","premajor","minor","preminor","patch","prepatch","prerelease"],GL={MAX_LENGTH:lee,MAX_SAFE_COMPONENT_LENGTH:N7e,MAX_SAFE_BUILD_LENGTH:$7e,MAX_SAFE_INTEGER:B7e,RELEASE_TYPES:H7e,SEMVER_SPEC_VERSION:I7e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},U7e=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},QS=U7e;(function(t,e){let{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:n}=GL,s=QS;e=t.exports={};let o=e.re=[],a=e.safeRe=[],l=e.src=[],u=e.t={},c=0,h="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",n],[h,r]],p=m=>{for(let[g,b]of d)m=m.split(`${g}*`).join(`${g}{0,${b}}`).split(`${g}+`).join(`${g}{1,${b}}`);return m},f=(m,g,b)=>{let v=p(g),y=c++;s(m,y,g),u[m]=y,l[y]=g,o[y]=new RegExp(g,b?"g":void 0),a[y]=new RegExp(v,b?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),f("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${h}+`),f("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),f("FULL",`^${l[u.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),f("LOOSE",`^${l[u.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),f("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?(?:$|[^\\d])`),f("COERCERTL",l[u.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",f("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",f("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(jL,jL.exports);var XL=jL.exports,KQ=/^[0-9]+$/,uee=(t,e)=>{let i=KQ.test(t),r=KQ.test(e);return i&&r&&(t=+t,e=+e),t===e?0:i&&!r?-1:r&&!i?1:t<e?-1:1},W7e=(t,e)=>uee(e,t),V7e={compareIdentifiers:uee,rcompareIdentifiers:W7e},XS=QS,{MAX_LENGTH:JQ,MAX_SAFE_INTEGER:YS}=GL,{safeRe:ZQ,t:QQ}=XL,j7e=qL,{compareIdentifiers:Ng}=V7e,q7e=class nu{constructor(e,i){if(i=j7e(i),e instanceof nu){if(e.loose===!!i.loose&&e.includePrerelease===!!i.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>JQ)throw new TypeError(`version is longer than ${JQ} characters`);XS("SemVer",e,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;let r=e.trim().match(i.loose?ZQ[QQ.LOOSE]:ZQ[QQ.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>YS||this.major<0)throw new TypeError("Invalid major version");if(this.minor>YS||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>YS||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let s=+n;if(s>=0&&s<YS)return s}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(XS("SemVer.compare",this.version,this.options,e),!(e instanceof nu)){if(typeof e=="string"&&e===this.version)return 0;e=new nu(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof nu||(e=new nu(e,this.options)),Ng(this.major,e.major)||Ng(this.minor,e.minor)||Ng(this.patch,e.patch)}comparePre(e){if(e instanceof nu||(e=new nu(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let i=0;do{let r=this.prerelease[i],n=e.prerelease[i];if(XS("prerelease compare",i,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Ng(r,n)}while(++i)}compareBuild(e){e instanceof nu||(e=new nu(e,this.options));let i=0;do{let r=this.build[i],n=e.build[i];if(XS("prerelease compare",i,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Ng(r,n)}while(++i)}inc(e,i,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",i,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",i,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",i,r),this.inc("pre",i,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",i,r),this.inc("pre",i,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(r)?1:0;if(!i&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[n];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(i===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(i){let s=[i,n];r===!1&&(s=[i]),Ng(this.prerelease[0],i)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}},YL=q7e,eee=YL,G7e=(t,e,i)=>new eee(t,i).compare(new eee(e,i)),Hg=G7e,X7e=Hg,Y7e=(t,e,i)=>X7e(t,e,i)===0,K7e=Y7e,J7e=Hg,Z7e=(t,e,i)=>J7e(t,e,i)!==0,Q7e=Z7e,e8e=Hg,t8e=(t,e,i)=>e8e(t,e,i)>0,i8e=t8e,r8e=Hg,n8e=(t,e,i)=>r8e(t,e,i)>=0,s8e=n8e,o8e=Hg,a8e=(t,e,i)=>o8e(t,e,i)<0,l8e=a8e,u8e=Hg,c8e=(t,e,i)=>u8e(t,e,i)<=0,h8e=c8e,d8e=K7e,f8e=Q7e,p8e=i8e,m8e=s8e,g8e=l8e,b8e=h8e,v8e=(t,e,i,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof i=="object"&&(i=i.version),t===i;case"!==":return typeof t=="object"&&(t=t.version),typeof i=="object"&&(i=i.version),t!==i;case"":case"=":case"==":return d8e(t,i,r);case"!=":return f8e(t,i,r);case">":return p8e(t,i,r);case">=":return m8e(t,i,r);case"<":return g8e(t,i,r);case"<=":return b8e(t,i,r);default:throw new TypeError(`Invalid operator: ${e}`)}},y8e=v8e,HL,tee;function x8e(){if(tee)return HL;tee=1;let t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(c,h){if(h=i(h),c instanceof e){if(c.loose===!!h.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,h),this.options=h,this.loose=!!h.loose,this.parse(c),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){let h=this.options.loose?r[n.COMPARATORLOOSE]:r[n.COMPARATOR],d=c.match(h);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=t}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===t||c===t)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,h){if(!(c instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,h).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,h).test(c.semver):(h=i(h),h.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,h)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,h)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}HL=e;let i=qL,{safeRe:r,t:n}=XL,s=y8e,o=QS,a=YL,l=cee();return HL}var UL,iee;function cee(){if(iee)return UL;iee=1;class t{constructor(B,N){if(N=r(N),B instanceof t)return B.loose===!!N.loose&&B.includePrerelease===!!N.includePrerelease?B:new t(B.raw,N);if(B instanceof n)return this.raw=B.value,this.set=[[B]],this.format(),this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=B.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let H=this.set[0];if(this.set=this.set.filter(T=>!f(T[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(let T of this.set)if(T.length===1&&m(T[0])){this.set=[T];break}}}this.format()}format(){return this.range=this.set.map(B=>B.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(B){let H=((this.options.includePrerelease&&d)|(this.options.loose&&p))+":"+B,T=i.get(H);if(T)return T;let L=this.options.loose,P=L?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];B=B.replace(P,R(this.options.includePrerelease)),s("hyphen replace",B),B=B.replace(a[l.COMPARATORTRIM],u),s("comparator trim",B),B=B.replace(a[l.TILDETRIM],c),s("tilde trim",B),B=B.replace(a[l.CARETTRIM],h),s("caret trim",B);let W=B.split(" ").map(Ae=>b(Ae,this.options)).join(" ").split(/\s+/).map(Ae=>D(Ae,this.options));L&&(W=W.filter(Ae=>(s("loose invalid filter",Ae,this.options),!!Ae.match(a[l.COMPARATORLOOSE])))),s("range list",W);let Y=new Map,ne=W.map(Ae=>new n(Ae,this.options));for(let Ae of ne){if(f(Ae))return[Ae];Y.set(Ae.value,Ae)}Y.size>1&&Y.has("")&&Y.delete("");let ke=[...Y.values()];return i.set(H,ke),ke}intersects(B,N){if(!(B instanceof t))throw new TypeError("a Range is required");return this.set.some(H=>g(H,N)&&B.set.some(T=>g(T,N)&&H.every(L=>T.every(P=>L.intersects(P,N)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(I(this.set[N],B,this.options))return!0;return!1}}UL=t;let e=L7e,i=new e({max:1e3}),r=qL,n=x8e(),s=QS,o=YL,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:h}=XL,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:p}=GL,f=z=>z.value==="<0.0.0-0",m=z=>z.value==="",g=(z,B)=>{let N=!0,H=z.slice(),T=H.pop();for(;N&&H.length;)N=H.every(L=>T.intersects(L,B)),T=H.pop();return N},b=(z,B)=>(s("comp",z,B),z=_(z,B),s("caret",z),z=y(z,B),s("tildes",z),z=C(z,B),s("xrange",z),z=A(z,B),s("stars",z),z),v=z=>!z||z.toLowerCase()==="x"||z==="*",y=(z,B)=>z.trim().split(/\s+/).map(N=>x(N,B)).join(" "),x=(z,B)=>{let N=B.loose?a[l.TILDELOOSE]:a[l.TILDE];return z.replace(N,(H,T,L,P,W)=>{s("tilde",z,H,T,L,P,W);let Y;return v(T)?Y="":v(L)?Y=`>=${T}.0.0 <${+T+1}.0.0-0`:v(P)?Y=`>=${T}.${L}.0 <${T}.${+L+1}.0-0`:W?(s("replaceTilde pr",W),Y=`>=${T}.${L}.${P}-${W} <${T}.${+L+1}.0-0`):Y=`>=${T}.${L}.${P} <${T}.${+L+1}.0-0`,s("tilde return",Y),Y})},_=(z,B)=>z.trim().split(/\s+/).map(N=>w(N,B)).join(" "),w=(z,B)=>{s("caret",z,B);let N=B.loose?a[l.CARETLOOSE]:a[l.CARET],H=B.includePrerelease?"-0":"";return z.replace(N,(T,L,P,W,Y)=>{s("caret",z,T,L,P,W,Y);let ne;return v(L)?ne="":v(P)?ne=`>=${L}.0.0${H} <${+L+1}.0.0-0`:v(W)?L==="0"?ne=`>=${L}.${P}.0${H} <${L}.${+P+1}.0-0`:ne=`>=${L}.${P}.0${H} <${+L+1}.0.0-0`:Y?(s("replaceCaret pr",Y),L==="0"?P==="0"?ne=`>=${L}.${P}.${W}-${Y} <${L}.${P}.${+W+1}-0`:ne=`>=${L}.${P}.${W}-${Y} <${L}.${+P+1}.0-0`:ne=`>=${L}.${P}.${W}-${Y} <${+L+1}.0.0-0`):(s("no pr"),L==="0"?P==="0"?ne=`>=${L}.${P}.${W}${H} <${L}.${P}.${+W+1}-0`:ne=`>=${L}.${P}.${W}${H} <${L}.${+P+1}.0-0`:ne=`>=${L}.${P}.${W} <${+L+1}.0.0-0`),s("caret return",ne),ne})},C=(z,B)=>(s("replaceXRanges",z,B),z.split(/\s+/).map(N=>E(N,B)).join(" ")),E=(z,B)=>{z=z.trim();let N=B.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return z.replace(N,(H,T,L,P,W,Y)=>{s("xRange",z,H,T,L,P,W,Y);let ne=v(L),ke=ne||v(P),Ae=ke||v(W),G=Ae;return T==="="&&G&&(T=""),Y=B.includePrerelease?"-0":"",ne?T===">"||T==="<"?H="<0.0.0-0":H="*":T&&G?(ke&&(P=0),W=0,T===">"?(T=">=",ke?(L=+L+1,P=0,W=0):(P=+P+1,W=0)):T==="<="&&(T="<",ke?L=+L+1:P=+P+1),T==="<"&&(Y="-0"),H=`${T+L}.${P}.${W}${Y}`):ke?H=`>=${L}.0.0${Y} <${+L+1}.0.0-0`:Ae&&(H=`>=${L}.${P}.0${Y} <${L}.${+P+1}.0-0`),s("xRange return",H),H})},A=(z,B)=>(s("replaceStars",z,B),z.trim().replace(a[l.STAR],"")),D=(z,B)=>(s("replaceGTE0",z,B),z.trim().replace(a[B.includePrerelease?l.GTE0PRE:l.GTE0],"")),R=z=>(B,N,H,T,L,P,W,Y,ne,ke,Ae,G,$)=>(v(H)?N="":v(T)?N=`>=${H}.0.0${z?"-0":""}`:v(L)?N=`>=${H}.${T}.0${z?"-0":""}`:P?N=`>=${N}`:N=`>=${N}${z?"-0":""}`,v(ne)?Y="":v(ke)?Y=`<${+ne+1}.0.0-0`:v(Ae)?Y=`<${ne}.${+ke+1}.0-0`:G?Y=`<=${ne}.${ke}.${Ae}-${G}`:z?Y=`<${ne}.${ke}.${+Ae+1}-0`:Y=`<=${Y}`,`${N} ${Y}`.trim()),I=(z,B,N)=>{for(let H=0;H<z.length;H++)if(!z[H].test(B))return!1;if(B.prerelease.length&&!N.includePrerelease){for(let H=0;H<z.length;H++)if(s(z[H].semver),z[H].semver!==n.ANY&&z[H].semver.prerelease.length>0){let T=z[H].semver;if(T.major===B.major&&T.minor===B.minor&&T.patch===B.patch)return!0}return!1}return!0};return UL}var w8e=cee(),_8e=(t,e,i)=>{try{e=new w8e(e,i)}catch{return!1}return e.test(t)},C8e=_8e,hee=k7e(C8e);function S8e(t,e,i){let r=t.open(e),n=1e4,s=250,{origin:o}=new URL(e),a=~~(n/s);function l(c){c.source===r&&(a=0,t.removeEventListener("message",l,!1))}t.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(i,o),setTimeout(u,s),a-=1)}setTimeout(u,s)}var E8e=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function dee(t,...e){for(let i of e)k8e(t,i);return t}function k8e(t,e){for(let i of Object.keys(e))ku(t,i,e[i],!0)}var A8e="vega-embed",T8e="6.24.0",R8e="Publish Vega visualizations as embedded web components.",D8e=["vega","data","visualization","component","embed"],M8e={type:"git",url:"http://github.com/vega/vega-embed.git"},F8e={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},L8e=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],O8e={url:"https://github.com/vega/vega-embed/issues"},P8e="https://github.com/vega/vega-embed#readme",z8e="BSD-3-Clause",I8e="build/vega-embed.js",B8e="build/vega-embed.module.js",N8e="build/vega-embed.min.js",$8e="build/vega-embed.min.js",H8e="build/vega-embed.module.d.ts",U8e=["src","build","patches"],W8e={"@babel/core":"^7.23.6","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.23.6","@babel/preset-env":"^7.23.6","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/jest":"^29.5.11","@types/semver":"^7.5.6","@typescript-eslint/eslint-plugin":"^6.14.0","@typescript-eslint/parser":"^6.14.0","browser-sync":"^2.29.3",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.0","eslint-plugin-prettier":"^5.0.1",jest:"^29.7.0","jest-canvas-mock":"^2.5.2","jest-environment-jsdom":"^29.7.0","patch-package":"^8.0.0","postinstall-postinstall":"^2.1.0",prettier:"^3.1.1","release-it":"^17.0.1",rollup:"4.9.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.69.5",typescript:"^5.3.3",vega:"^5.22.1","vega-lite":"^5.2.0"},V8e={vega:"^5.21.0","vega-lite":"*"},j8e={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.5.4",tslib:"^2.6.2","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.14.0","vega-tooltip":"^0.34.0"},q8e=["yallist"],G8e={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},X8e={name:A8e,version:T8e,description:R8e,keywords:D8e,repository:M8e,author:F8e,contributors:L8e,bugs:O8e,homepage:P8e,license:z8e,main:I8e,module:B8e,unpkg:N8e,jsdelivr:$8e,types:H8e,files:U8e,devDependencies:W8e,peerDependencies:V8e,dependencies:j8e,bundledDependencies:q8e,scripts:G8e},W5t=X8e.version,su=vM,Px=RL,ree=typeof window<"u"?window:void 0;Px===void 0&&ree?.vl?.compile&&(Px=ree.vl);var Y8e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},K8e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Lx={vega:"Vega","vega-lite":"Vega-Lite"},ZS={vega:su.version,"vega-lite":Px?Px.version:"not available"},J8e={vega:t=>t,"vega-lite":(t,e)=>Px.compile(t,{config:e}).spec},Z8e=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Q8e="chart-wrapper";function eAe(t){return typeof t=="function"}function nee(t,e,i,r){let n=`<html><head>${e}</head><body><pre><code class="json">`,s=`</code></pre>${i}</body></html>`,o=window.open("");o.document.write(n+t+s),o.document.title=`${Lx[r]} JSON Source`}function tAe(t,e){if(t.$schema){let i=DL(t.$schema);e&&e!==i.library&&console.warn(`The given visualization spec is written in ${Lx[i.library]}, but mode argument sets ${Lx[e]??e}.`);let r=i.library;return hee(ZS[r],`^${i.version.slice(1)}`)||console.warn(`The input spec uses ${Lx[r]} ${i.version}, but the current version of ${Lx[r]} is v${ZS[r]}.`),r}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":e??"vega"}function fee(t){return!!(t&&"load"in t)}function see(t){return fee(t)?t:su.loader(t)}function iAe(t){let e=t.usermeta?.embedOptions??{};return fe(e.defaultStyle)&&(e.defaultStyle=!1),e}async function pee(t,e,i={}){let r,n;fe(e)?(n=see(i.loader),r=JSON.parse(await n.load(e))):r=e;let s=iAe(r),o=s.loader;(!n||o)&&(n=see(i.loader??o));let a=await oee(s,n),l=await oee(i,n),u={...dee(l,a),config:vl(l.config??{},a.config??{})};return await nAe(t,r,u,n)}async function oee(t,e){let i=fe(t.config)?JSON.parse(await e.load(t.config)):t.config??{},r=fe(t.patch)?JSON.parse(await e.load(t.patch)):t.patch;return{...t,...r?{patch:r}:{},...i?{config:i}:{}}}function rAe(t){let e=t.getRootNode?t.getRootNode():document;return e instanceof ShadowRoot?{root:e,rootContainer:e}:{root:document,rootContainer:document.head??document.body}}async function nAe(t,e,i={},r){let n=i.theme?vl(IL[i.theme],i.config??{}):i.config,s=Ss(i.actions)?i.actions:dee({},Y8e,i.actions??{}),o={...K8e,...i.i18n},a=i.renderer??"canvas",l=i.logLevel??su.Warn,u=i.downloadFileName??"visualization",c=typeof t=="string"?document.querySelector(t):t;if(!c)throw new Error(`${t} does not exist`);if(i.defaultStyle!==!1){let _="vega-embed-style",{root:w,rootContainer:C}=rAe(c);if(!w.getElementById(_)){let E=document.createElement("style");E.id=_,E.innerHTML=i.defaultStyle===void 0||i.defaultStyle===!0?E8e.toString():i.defaultStyle,C.appendChild(E)}}let h=tAe(e,i.mode),d=J8e[h](e,n);if(h==="vega-lite"&&d.$schema){let _=DL(d.$schema);hee(ZS.vega,`^${_.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${_.version}, but current version is v${ZS.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let p=c;if(s){let _=document.createElement("div");_.classList.add(Q8e),c.appendChild(_),p=_}let f=i.patch;if(f&&(d=f instanceof Function?f(d):i0(d,f,!0,!1).newDocument),i.formatLocale&&su.formatLocale(i.formatLocale),i.timeFormatLocale&&su.timeFormatLocale(i.timeFormatLocale),i.expressionFunctions)for(let _ in i.expressionFunctions){let w=i.expressionFunctions[_];"fn"in w?su.expressionFunction(_,w.fn,w.visitor):w instanceof Function&&su.expressionFunction(_,w)}let{ast:m}=i,g=su.parse(d,h==="vega-lite"?{}:n,{ast:m}),b=new(i.viewClass||su.View)(g,{loader:r,logLevel:l,renderer:a,...m?{expr:su.expressionInterpreter??i.expr??sX}:{}});if(b.addSignalListener("autosize",(_,w)=>{let{type:C}=w;C=="fit-x"?(p.classList.add("fit-x"),p.classList.remove("fit-y")):C=="fit-y"?(p.classList.remove("fit-x"),p.classList.add("fit-y")):C=="fit"?p.classList.add("fit-x","fit-y"):p.classList.remove("fit-x","fit-y")}),i.tooltip!==!1){let{loader:_,tooltip:w}=i,C=_&&!fee(_)?_?.baseURL:void 0,E=eAe(w)?w:new GS({baseURL:C,...w===!0?{}:w}).call;b.tooltip(E)}let{hover:v}=i;if(v===void 0&&(v=h==="vega"),v){let{hoverSet:_,updateSet:w}=typeof v=="boolean"?{}:v;b.hover(_,w)}i&&(i.width!=null&&b.width(i.width),i.height!=null&&b.height(i.height),i.padding!=null&&b.padding(i.padding)),await b.initialize(p,i.bind).runAsync();let y;if(s!==!1){let _=c;if(i.defaultStyle!==!1||i.forceActionsMenu){let C=document.createElement("details");C.title=o.CLICK_TO_VIEW_ACTIONS,c.append(C),_=C;let E=document.createElement("summary");E.innerHTML=Z8e,C.append(E),y=A=>{C.contains(A.target)||C.removeAttribute("open")},document.addEventListener("click",y)}let w=document.createElement("div");if(_.append(w),w.classList.add("vega-actions"),s===!0||s.export!==!1){for(let C of["svg","png"])if(s===!0||s.export===!0||s.export[C]){let E=o[`${C.toUpperCase()}_ACTION`],A=document.createElement("a"),D=ge(i.scaleFactor)?i.scaleFactor[C]:i.scaleFactor;A.text=E,A.href="#",A.target="_blank",A.download=`${u}.${C}`,A.addEventListener("mousedown",async function(R){R.preventDefault();let I=await b.toImageURL(C,D);this.href=I}),w.append(A)}}if(s===!0||s.source!==!1){let C=document.createElement("a");C.text=o.SOURCE_ACTION,C.href="#",C.addEventListener("click",function(E){nee((0,KS.default)(e),i.sourceHeader??"",i.sourceFooter??"",h),E.preventDefault()}),w.append(C)}if(h==="vega-lite"&&(s===!0||s.compiled!==!1)){let C=document.createElement("a");C.text=o.COMPILED_ACTION,C.href="#",C.addEventListener("click",function(E){nee((0,KS.default)(d),i.sourceHeader??"",i.sourceFooter??"","vega"),E.preventDefault()}),w.append(C)}if(s===!0||s.editor!==!1){let C=i.editorUrl??"https://vega.github.io/editor/",E=document.createElement("a");E.text=o.EDITOR_ACTION,E.href="#",E.addEventListener("click",function(A){S8e(window,C,{config:n,mode:h,renderer:a,spec:(0,KS.default)(e)}),A.preventDefault()}),w.append(E)}}function x(){y&&document.removeEventListener("click",y),b.finalize()}return{view:b,spec:e,vgSpec:d,finalize:x,embedOptions:i}}var mee=ze`
  :host {
    display: inline-block;
  }

  :host([size='small']) {
    --height: var(--sl-toggle-size-small);
    --thumb-size: calc(var(--sl-toggle-size-small) + 4px);
    --width: calc(var(--height) * 2);

    font-size: var(--sl-input-font-size-small);
  }

  :host([size='medium']) {
    --height: var(--sl-toggle-size-medium);
    --thumb-size: calc(var(--sl-toggle-size-medium) + 4px);
    --width: calc(var(--height) * 2);

    font-size: var(--sl-input-font-size-medium);
  }

  :host([size='large']) {
    --height: var(--sl-toggle-size-large);
    --thumb-size: calc(var(--sl-toggle-size-large) + 4px);
    --width: calc(var(--height) * 2);

    font-size: var(--sl-input-font-size-large);
  }

  .switch {
    position: relative;
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-input-font-family);
    font-size: inherit;
    font-weight: var(--sl-input-font-weight);
    color: var(--sl-input-label-color);
    vertical-align: middle;
    cursor: pointer;
  }

  .switch__control {
    flex: 0 0 auto;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--width);
    height: var(--height);
    background-color: var(--sl-color-neutral-400);
    border: solid var(--sl-input-border-width) var(--sl-color-neutral-400);
    border-radius: var(--height);
    transition:
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) background-color;
  }

  .switch__control .switch__thumb {
    width: var(--thumb-size);
    height: var(--thumb-size);
    background-color: var(--sl-color-neutral-0);
    border-radius: 50%;
    border: solid var(--sl-input-border-width) var(--sl-color-neutral-400);
    translate: calc((var(--width) - var(--height)) / -2);
    transition:
      var(--sl-transition-fast) translate ease,
      var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) box-shadow;
  }

  .switch__input {
    position: absolute;
    opacity: 0;
    padding: 0;
    margin: 0;
    pointer-events: none;
  }

  /* Hover */
  .switch:not(.switch--checked):not(.switch--disabled) .switch__control:hover {
    background-color: var(--sl-color-neutral-400);
    border-color: var(--sl-color-neutral-400);
  }

  .switch:not(.switch--checked):not(.switch--disabled) .switch__control:hover .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-neutral-400);
  }

  /* Focus */
  .switch:not(.switch--checked):not(.switch--disabled) .switch__input:focus-visible ~ .switch__control {
    background-color: var(--sl-color-neutral-400);
    border-color: var(--sl-color-neutral-400);
  }

  .switch:not(.switch--checked):not(.switch--disabled) .switch__input:focus-visible ~ .switch__control .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  /* Checked */
  .switch--checked .switch__control {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
  }

  .switch--checked .switch__control .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    translate: calc((var(--width) - var(--height)) / 2);
  }

  /* Checked + hover */
  .switch.switch--checked:not(.switch--disabled) .switch__control:hover {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
  }

  .switch.switch--checked:not(.switch--disabled) .switch__control:hover .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
  }

  /* Checked + focus */
  .switch.switch--checked:not(.switch--disabled) .switch__input:focus-visible ~ .switch__control {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
  }

  .switch.switch--checked:not(.switch--disabled) .switch__input:focus-visible ~ .switch__control .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  /* Disabled */
  .switch--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .switch__label {
    display: inline-block;
    line-height: var(--height);
    margin-inline-start: 0.5em;
    user-select: none;
    -webkit-user-select: none;
  }

  :host([required]) .switch__label::after {
    content: var(--sl-input-required-content);
    color: var(--sl-input-required-content-color);
    margin-inline-start: var(--sl-input-required-content-offset);
  }

  @media (forced-colors: active) {
    .switch.switch--checked:not(.switch--disabled) .switch__control:hover .switch__thumb,
    .switch--checked .switch__control .switch__thumb {
      background-color: ButtonText;
    }
  }
`;var oa=(t="value")=>(e,i)=>{let r=e.constructor,n=r.prototype.attributeChangedCallback;r.prototype.attributeChangedCallback=function(s,o,a){var l;let u=r.getPropertyOptions(t),c=typeof u.attribute=="string"?u.attribute:t;if(s===c){let h=u.converter||Zc,p=(typeof h=="function"?h:(l=h?.fromAttribute)!=null?l:Zc.fromAttribute)(a,u.type);this[t]!==p&&(this[i]=p)}n.call(this,s,o,a)}};var Gs=ze`
  .form-control .form-control__label {
    display: none;
  }

  .form-control .form-control__help-text {
    display: none;
  }

  /* Label */
  .form-control--has-label .form-control__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    margin-bottom: var(--sl-spacing-3x-small);
  }

  .form-control--has-label.form-control--small .form-control__label {
    font-size: var(--sl-input-label-font-size-small);
  }

  .form-control--has-label.form-control--medium .form-control__label {
    font-size: var(--sl-input-label-font-size-medium);
  }

  .form-control--has-label.form-control--large .form-control__label {
    font-size: var(--sl-input-label-font-size-large);
  }

  :host([required]) .form-control--has-label .form-control__label::after {
    content: var(--sl-input-required-content);
    margin-inline-start: var(--sl-input-required-content-offset);
    color: var(--sl-input-required-content-color);
  }

  /* Help text */
  .form-control--has-help-text .form-control__help-text {
    display: block;
    color: var(--sl-input-help-text-color);
    margin-top: var(--sl-spacing-3x-small);
  }

  .form-control--has-help-text.form-control--small .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-small);
  }

  .form-control--has-help-text.form-control--medium .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-medium);
  }

  .form-control--has-help-text.form-control--large .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-large);
  }

  .form-control--has-help-text.form-control--radio-group .form-control__help-text {
    margin-top: var(--sl-spacing-2x-small);
  }
`;var zx=new WeakMap,Ix=new WeakMap,Bx=new WeakMap,KL=new WeakSet,eE=new WeakMap,Xr=class{constructor(t,e){this.handleFormData=i=>{let r=this.options.disabled(this.host),n=this.options.name(this.host),s=this.options.value(this.host),o=this.host.tagName.toLowerCase()==="sl-button";this.host.isConnected&&!r&&!o&&typeof n=="string"&&n.length>0&&typeof s<"u"&&(Array.isArray(s)?s.forEach(a=>{i.formData.append(n,a.toString())}):i.formData.append(n,s.toString()))},this.handleFormSubmit=i=>{var r;let n=this.options.disabled(this.host),s=this.options.reportValidity;this.form&&!this.form.noValidate&&((r=zx.get(this.form))==null||r.forEach(o=>{this.setUserInteracted(o,!0)})),this.form&&!this.form.noValidate&&!n&&!s(this.host)&&(i.preventDefault(),i.stopImmediatePropagation())},this.handleFormReset=()=>{this.options.setValue(this.host,this.options.defaultValue(this.host)),this.setUserInteracted(this.host,!1),eE.set(this.host,[])},this.handleInteraction=i=>{let r=eE.get(this.host);r.includes(i.type)||r.push(i.type),r.length===this.options.assumeInteractionOn.length&&this.setUserInteracted(this.host,!0)},this.checkFormValidity=()=>{if(this.form&&!this.form.noValidate){let i=this.form.querySelectorAll("*");for(let r of i)if(typeof r.checkValidity=="function"&&!r.checkValidity())return!1}return!0},this.reportFormValidity=()=>{if(this.form&&!this.form.noValidate){let i=this.form.querySelectorAll("*");for(let r of i)if(typeof r.reportValidity=="function"&&!r.reportValidity())return!1}return!0},(this.host=t).addController(this),this.options=_s({form:i=>{let r=i.form;if(r){let s=i.getRootNode().querySelector(`#${r}`);if(s)return s}return i.closest("form")},name:i=>i.name,value:i=>i.value,defaultValue:i=>i.defaultValue,disabled:i=>{var r;return(r=i.disabled)!=null?r:!1},reportValidity:i=>typeof i.reportValidity=="function"?i.reportValidity():!0,checkValidity:i=>typeof i.checkValidity=="function"?i.checkValidity():!0,setValue:(i,r)=>i.value=r,assumeInteractionOn:["sl-input"]},e)}hostConnected(){let t=this.options.form(this.host);t&&this.attachForm(t),eE.set(this.host,[]),this.options.assumeInteractionOn.forEach(e=>{this.host.addEventListener(e,this.handleInteraction)})}hostDisconnected(){this.detachForm(),eE.delete(this.host),this.options.assumeInteractionOn.forEach(t=>{this.host.removeEventListener(t,this.handleInteraction)})}hostUpdated(){let t=this.options.form(this.host);t||this.detachForm(),t&&this.form!==t&&(this.detachForm(),this.attachForm(t)),this.host.hasUpdated&&this.setValidity(this.host.validity.valid)}attachForm(t){t?(this.form=t,zx.has(this.form)?zx.get(this.form).add(this.host):zx.set(this.form,new Set([this.host])),this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),Ix.has(this.form)||(Ix.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity()),Bx.has(this.form)||(Bx.set(this.form,this.form.checkValidity),this.form.checkValidity=()=>this.checkFormValidity())):this.form=void 0}detachForm(){if(!this.form)return;let t=zx.get(this.form);t&&(t.delete(this.host),t.size<=0&&(this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),Ix.has(this.form)&&(this.form.reportValidity=Ix.get(this.form),Ix.delete(this.form)),Bx.has(this.form)&&(this.form.checkValidity=Bx.get(this.form),Bx.delete(this.form)),this.form=void 0))}setUserInteracted(t,e){e?KL.add(t):KL.delete(t),t.requestUpdate()}doAction(t,e){if(this.form){let i=document.createElement("button");i.type=t,i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.clipPath="inset(50%)",i.style.overflow="hidden",i.style.whiteSpace="nowrap",e&&(i.name=e.name,i.value=e.value,["formaction","formenctype","formmethod","formnovalidate","formtarget"].forEach(r=>{e.hasAttribute(r)&&i.setAttribute(r,e.getAttribute(r))})),this.form.append(i),i.click(),i.remove()}}getForm(){var t;return(t=this.form)!=null?t:null}reset(t){this.doAction("reset",t)}submit(t){this.doAction("submit",t)}setValidity(t){let e=this.host,i=!!KL.has(e),r=!!e.required;e.toggleAttribute("data-required",r),e.toggleAttribute("data-optional",!r),e.toggleAttribute("data-invalid",!t),e.toggleAttribute("data-valid",t),e.toggleAttribute("data-user-invalid",!t&&i),e.toggleAttribute("data-user-valid",t&&i)}updateValidity(){let t=this.host;this.setValidity(t.validity.valid)}emitInvalidEvent(t){let e=new CustomEvent("sl-invalid",{bubbles:!1,composed:!1,cancelable:!0,detail:{}});t||e.preventDefault(),this.host.dispatchEvent(e)||t?.preventDefault()}},Ug=Object.freeze({badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1}),gee=Object.freeze(_u(_s({},Ug),{valid:!1,valueMissing:!0})),bee=Object.freeze(_u(_s({},Ug),{valid:!1,customError:!0}));var wo=Yn(class extends Cs{constructor(t){if(super(t),t.type!==Jr.PROPERTY&&t.type!==Jr.ATTRIBUTE&&t.type!==Jr.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!jw(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===nr||e===lt)return e;let i=t.element,r=t.name;if(t.type===Jr.PROPERTY){if(e===i[r])return nr}else if(t.type===Jr.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(r))return nr}else if(t.type===Jr.ATTRIBUTE&&i.getAttribute(r)===e+"")return nr;return qw(t),e}});var gn=class extends Xe{constructor(){super(...arguments),this.formControlController=new Xr(this,{value:t=>t.checked?t.value||"on":void 0,defaultValue:t=>t.defaultChecked,setValue:(t,e)=>t.checked=e}),this.hasSlotController=new Bi(this,"help-text"),this.hasFocus=!1,this.title="",this.name="",this.size="medium",this.disabled=!1,this.checked=!1,this.defaultChecked=!1,this.form="",this.required=!1,this.helpText=""}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleInput(){this.emit("sl-input")}handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}handleClick(){this.checked=!this.checked,this.emit("sl-change")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleKeyDown(t){t.key==="ArrowLeft"&&(t.preventDefault(),this.checked=!1,this.emit("sl-change"),this.emit("sl-input")),t.key==="ArrowRight"&&(t.preventDefault(),this.checked=!0,this.emit("sl-change"),this.emit("sl-input"))}handleCheckedChange(){this.input.checked=this.checked,this.formControlController.updateValidity()}handleDisabledChange(){this.formControlController.setValidity(!0)}click(){this.input.click()}focus(t){this.input.focus(t)}blur(){this.input.blur()}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(t){this.input.setCustomValidity(t),this.formControlController.updateValidity()}render(){let t=this.hasSlotController.test("help-text"),e=this.helpText?!0:!!t;return X`
      <div
        class=${et({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-help-text":e})}
      >
        <label
          part="base"
          class=${et({switch:!0,"switch--checked":this.checked,"switch--disabled":this.disabled,"switch--focused":this.hasFocus,"switch--small":this.size==="small","switch--medium":this.size==="medium","switch--large":this.size==="large"})}
        >
          <input
            class="switch__input"
            type="checkbox"
            title=${this.title}
            name=${this.name}
            value=${Se(this.value)}
            .checked=${wo(this.checked)}
            .disabled=${this.disabled}
            .required=${this.required}
            role="switch"
            aria-checked=${this.checked?"true":"false"}
            aria-describedby="help-text"
            @click=${this.handleClick}
            @input=${this.handleInput}
            @invalid=${this.handleInvalid}
            @blur=${this.handleBlur}
            @focus=${this.handleFocus}
            @keydown=${this.handleKeyDown}
          />

          <span part="control" class="switch__control">
            <span part="thumb" class="switch__thumb"></span>
          </span>

          <div part="label" class="switch__label">
            <slot></slot>
          </div>
        </label>

        <div
          aria-hidden=${e?"false":"true"}
          class="form-control__help-text"
          id="help-text"
          part="form-control-help-text"
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};gn.styles=[tt,Gs,mee];F([Ne('input[type="checkbox"]')],gn.prototype,"input",2);F([Ie()],gn.prototype,"hasFocus",2);F([U()],gn.prototype,"title",2);F([U()],gn.prototype,"name",2);F([U()],gn.prototype,"value",2);F([U({reflect:!0})],gn.prototype,"size",2);F([U({type:Boolean,reflect:!0})],gn.prototype,"disabled",2);F([U({type:Boolean,reflect:!0})],gn.prototype,"checked",2);F([oa("checked")],gn.prototype,"defaultChecked",2);F([U({reflect:!0})],gn.prototype,"form",2);F([U({type:Boolean,reflect:!0})],gn.prototype,"required",2);F([U({attribute:"help-text"})],gn.prototype,"helpText",2);F([je("checked",{waitUntilFirstUpdate:!0})],gn.prototype,"handleCheckedChange",1);F([je("disabled",{waitUntilFirstUpdate:!0})],gn.prototype,"handleDisabledChange",1);gn.define("sl-switch");Bt.define("sl-icon");var vee="tbx-theme",sAe="sl-theme-dark",oAe="sl-theme-light",yee="(prefers-color-scheme: dark)";function aAe(t){return e=>{customElements.get(t)==null&&customElements.define(t,e)}}var JL=new Set,ou="light",QL=!1;function Nx(){return typeof window<"u"&&typeof document<"u"}function ZL(t){if(!Nx())return;let e=document.documentElement;e.classList.toggle(sAe,t==="dark"),e.classList.toggle(oAe,t==="light"),e.style.colorScheme=t}function xee(t){JL.forEach(e=>e(t))}function lAe(){if(!Nx())return null;try{let t=window.localStorage.getItem(vee);if(t==="light"||t==="dark")return t}catch{}return null}function uAe(t){if(Nx())try{window.localStorage.setItem(vee,t)}catch{}}function cAe(){let t=lAe();return t!==null?(QL=!0,t):Nx()&&window.matchMedia(yee).matches?"dark":"light"}function $x(){return ou}function hAe(t,e=!0){let i=ou!==t;ou=t,ZL(t),e&&(QL=!0,uAe(t)),i&&xee(t)}function Hx(t){return JL.add(t),t(ou),()=>JL.delete(t)}function dAe(){if(!Nx())return;ou=cAe(),ZL(ou);let t=window.matchMedia(yee),e=i=>{if(QL)return;let r=i.matches?"dark":"light";r!==ou&&(ou=r,ZL(ou),xee(ou))};typeof t.addEventListener=="function"?t.addEventListener("change",e):typeof t.addListener=="function"&&t.addListener(e)}dAe();var tE=class extends HTMLElement{constructor(){super(...arguments);this.switchEl=null;this.iconEl=null;this.unsubscribe=null;this.handleToggle=i=>{let n=i.currentTarget.checked?"dark":"light";hAe(n)}}connectedCallback(){this.shadowRoot==null&&(this.attachShadow({mode:"open"}),this.render());let i=this.shadowRoot;i!=null&&(this.switchEl=i.querySelector("sl-switch"),this.iconEl=i.querySelector("sl-icon"),this.switchEl!=null&&this.switchEl.addEventListener("sl-change",this.handleToggle),this.unsubscribe=Hx(r=>{this.updateUI(r)}))}disconnectedCallback(){this.switchEl!=null&&this.switchEl.removeEventListener("sl-change",this.handleToggle),this.unsubscribe!=null&&(this.unsubscribe(),this.unsubscribe=null)}updateUI(i){let r=i==="dark",n=this.switchEl,s=this.iconEl;n!=null&&n.checked!==r&&(n.checked=r),n?.setAttribute("aria-label",r?"Activate light mode":"Activate dark mode"),s?.setAttribute("name",r?"moon":"sun")}render(){let i=this.shadowRoot;i!=null&&(i.innerHTML=`
      <style>
        :host {
          display: inline-flex;
          align-items: center;
        }

        sl-icon {
          margin-inline-start: 0.5rem;
          font-size: 1.2rem;
        }
      </style>
      <sl-switch size="small"></sl-switch>
      <sl-icon name="sun"></sl-icon>
    `)}};tE=Ct([aAe("tbx-theme-toggle")],tE);var wee={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Default chart rendered by tbx-chart.",width:"container",height:240,autosize:{type:"fit",contains:"padding"},data:{values:[{category:"Alpha",value:28},{category:"Beta",value:55},{category:"Gamma",value:43},{category:"Delta",value:91},{category:"Epsilon",value:81}]},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"category",type:"ordinal",sort:"ascending",title:"Category"},y:{field:"value",type:"quantitative",title:"Value"}},config:{axis:{labelFont:"inherit",titleFont:"inherit"},font:"inherit"}},_ee={actions:!1},fAe={light:{background:"transparent",axis:{labelColor:"#111827",titleColor:"#111827",gridColor:"#e5e7eb"},legend:{labelColor:"#111827",titleColor:"#111827"},title:{color:"#111827"},view:{stroke:"#e5e7eb"},mark:{color:"#2563eb"},range:{category:["#2563eb","#16a34a","#f59e0b","#dc2626","#7c3aed","#0ea5e9"]}},dark:{background:"transparent",axis:{labelColor:"#e5e7eb",titleColor:"#e5e7eb",gridColor:"#4b5563"},legend:{labelColor:"#e5e7eb",titleColor:"#e5e7eb"},title:{color:"#f3f4f6"},view:{stroke:"#4b5563"},mark:{color:"#60a5fa"},range:{category:["#60a5fa","#f97316","#34d399","#facc15","#f472b6","#a855f7"]}}};function iE(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function Wg(t,e){if(!(!iE(t)&&!iE(e)))return{...iE(t)?t:{},...iE(e)?e:{}}}function pAe(t,e){let i={...t,...e??{}},r=Wg(t.axis,e?.axis);r!=null&&(i.axis=r);let n=Wg(t.legend,e?.legend);n!=null&&(i.legend=n);let s=Wg(t.title,e?.title);s!=null&&(i.title=s);let o=Wg(t.view,e?.view);o!=null&&(i.view=o);let a=Wg(t.mark,e?.mark);a!=null&&(i.mark=a);let l=Wg(t.range,e?.range);return l!=null&&(i.range=l),i}var pd=class extends Su(ui){constructor(){super(...arguments);this.spec=wee;this.options=_ee;this.currentTheme=$x()}connectedCallback(){super.connectedCallback();let i=$x(),r=this.applyTheme(i);this.chartContainer!=null&&(this.embedResult==null||r)&&this.renderChart(),this.unsubscribeTheme=Hx(n=>{this.applyTheme(n)&&this.renderChart()})}disconnectedCallback(){this.destroyChart(),this.unsubscribeTheme!=null&&(this.unsubscribeTheme(),this.unsubscribeTheme=void 0),super.disconnectedCallback()}firstUpdated(i){super.firstUpdated(i),this.embedResult==null&&this.renderChart()}updated(i){super.updated(i),(i.has("spec")||i.has("options"))&&this.renderChart()}render(){return X`<div id="chart" part="chart"></div>`}async renderChart(){let i=this.chartContainer;if(i==null)return;this.destroyChart();let r=this.spec??wee,n=this.createEmbedOptions();try{this.embedResult=await pee(i,r,n)}catch(s){console.error("Failed to render vega chart",s),i.textContent="Unable to render chart."}}createEmbedOptions(){let i=this.options??{},r=fAe[this.currentTheme],n={..._ee,...i},s=typeof i.config=="object"&&i.config!=null?i.config:void 0;return typeof i.config=="string"?n.config=i.config:n.config=pAe(r,s),n}applyTheme(i){let r=this.currentTheme!==i;return this.currentTheme=i,this.setAttribute("data-theme",i),r}destroyChart(){this.embedResult!=null&&(this.embedResult.view.finalize(),this.embedResult=void 0),this.chartContainer!=null&&this.chartContainer.replaceChildren()}};pd.styles=ze`
    :host {
      display: block;
      color: inherit;
    }

    :host([data-theme='dark']) {
      color-scheme: dark;
    }

    :host([data-theme='light']) {
      color-scheme: light;
    }

    #chart {
      width: 100%;
    }
  `,Ct([U({attribute:!1})],pd.prototype,"spec",2),Ct([U({attribute:!1})],pd.prototype,"options",2),Ct([Ne("#chart")],pd.prototype,"chartContainer",2),pd=Ct([xn("tbx-chart")],pd);var Eee=kz(See());var nE=class extends Su(ui){render(){return X`<slot></slot>`}firstUpdated(){this.term=new Eee.Terminal({cursorBlink:!1,cursorStyle:"bar",cursorInactiveStyle:"none",theme:{}}),this.term.open(this),this.term.blur(),this.term.write("Hello from \x1B[1;3;31mToolboxUI\x1B[0m! \x1B[?25l")}};nE=Ct([xn("tbx-console")],nE);var kee=()=>new iO,iO=class{},tO=new WeakMap,Aee=Yn(class extends e0{render(t){return lt}update(t,[e]){let i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),lt}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){let e=this.ht??globalThis,i=tO.get(e);i===void 0&&(i=new WeakMap,tO.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return typeof this.G=="function"?tO.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var mAe=typeof global=="object"&&global&&global.Object===Object&&global,Tee=mAe;var gAe=typeof self=="object"&&self&&self.Object===Object&&self,bAe=Tee||gAe||Function("return this")(),Vg=bAe;var vAe=Vg.Symbol,Ac=vAe;var Ree=Object.prototype,yAe=Ree.hasOwnProperty,xAe=Ree.toString,Ux=Ac?Ac.toStringTag:void 0;function wAe(t){var e=yAe.call(t,Ux),i=t[Ux];try{t[Ux]=void 0;var r=!0}catch{}var n=xAe.call(t);return r&&(e?t[Ux]=i:delete t[Ux]),n}var Dee=wAe;var _Ae=Object.prototype,CAe=_Ae.toString;function SAe(t){return CAe.call(t)}var Mee=SAe;var EAe="[object Null]",kAe="[object Undefined]",Fee=Ac?Ac.toStringTag:void 0;function AAe(t){return t==null?t===void 0?kAe:EAe:Fee&&Fee in Object(t)?Dee(t):Mee(t)}var sE=AAe;function TAe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Rp=TAe;var RAe="[object AsyncFunction]",DAe="[object Function]",MAe="[object GeneratorFunction]",FAe="[object Proxy]";function LAe(t){if(!Rp(t))return!1;var e=sE(t);return e==DAe||e==MAe||e==RAe||e==FAe}var Lee=LAe;var OAe=Vg["__core-js_shared__"],oE=OAe;var Oee=(function(){var t=/[^.]+$/.exec(oE&&oE.keys&&oE.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function PAe(t){return!!Oee&&Oee in t}var Pee=PAe;var zAe=Function.prototype,IAe=zAe.toString;function BAe(t){if(t!=null){try{return IAe.call(t)}catch{}try{return t+""}catch{}}return""}var zee=BAe;var NAe=/[\\^$.*+?()[\]{}|]/g,$Ae=/^\[object .+?Constructor\]$/,HAe=Function.prototype,UAe=Object.prototype,WAe=HAe.toString,VAe=UAe.hasOwnProperty,jAe=RegExp("^"+WAe.call(VAe).replace(NAe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qAe(t){if(!Rp(t)||Pee(t))return!1;var e=Lee(t)?jAe:$Ae;return e.test(zee(t))}var Iee=qAe;function GAe(t,e){return t?.[e]}var Bee=GAe;function XAe(t,e){var i=Bee(t,e);return Iee(i)?i:void 0}var jg=XAe;var YAe=(function(){try{var t=jg(Object,"defineProperty");return t({},"",{}),t}catch{}})(),rO=YAe;function KAe(t,e,i){e=="__proto__"&&rO?rO(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var Nee=KAe;function JAe(t,e){return t===e||t!==t&&e!==e}var aE=JAe;var ZAe=Object.prototype,QAe=ZAe.hasOwnProperty;function e9e(t,e,i){var r=t[e];(!(QAe.call(t,e)&&aE(r,i))||i===void 0&&!(e in t))&&Nee(t,e,i)}var $ee=e9e;var t9e=Array.isArray,qg=t9e;function i9e(t){return t!=null&&typeof t=="object"}var Hee=i9e;var r9e="[object Symbol]";function n9e(t){return typeof t=="symbol"||Hee(t)&&sE(t)==r9e}var Gg=n9e;var s9e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o9e=/^\w*$/;function a9e(t,e){if(qg(t))return!1;var i=typeof t;return i=="number"||i=="symbol"||i=="boolean"||t==null||Gg(t)?!0:o9e.test(t)||!s9e.test(t)||e!=null&&t in Object(e)}var Uee=a9e;var l9e=jg(Object,"create"),Tc=l9e;function u9e(){this.__data__=Tc?Tc(null):{},this.size=0}var Wee=u9e;function c9e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Vee=c9e;var h9e="__lodash_hash_undefined__",d9e=Object.prototype,f9e=d9e.hasOwnProperty;function p9e(t){var e=this.__data__;if(Tc){var i=e[t];return i===h9e?void 0:i}return f9e.call(e,t)?e[t]:void 0}var jee=p9e;var m9e=Object.prototype,g9e=m9e.hasOwnProperty;function b9e(t){var e=this.__data__;return Tc?e[t]!==void 0:g9e.call(e,t)}var qee=b9e;var v9e="__lodash_hash_undefined__";function y9e(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Tc&&e===void 0?v9e:e,this}var Gee=y9e;function Xg(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Xg.prototype.clear=Wee;Xg.prototype.delete=Vee;Xg.prototype.get=jee;Xg.prototype.has=qee;Xg.prototype.set=Gee;var nO=Xg;function x9e(){this.__data__=[],this.size=0}var Xee=x9e;function w9e(t,e){for(var i=t.length;i--;)if(aE(t[i][0],e))return i;return-1}var md=w9e;var _9e=Array.prototype,C9e=_9e.splice;function S9e(t){var e=this.__data__,i=md(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():C9e.call(e,i,1),--this.size,!0}var Yee=S9e;function E9e(t){var e=this.__data__,i=md(e,t);return i<0?void 0:e[i][1]}var Kee=E9e;function k9e(t){return md(this.__data__,t)>-1}var Jee=k9e;function A9e(t,e){var i=this.__data__,r=md(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}var Zee=A9e;function Yg(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Yg.prototype.clear=Xee;Yg.prototype.delete=Yee;Yg.prototype.get=Kee;Yg.prototype.has=Jee;Yg.prototype.set=Zee;var Qee=Yg;var T9e=jg(Vg,"Map"),ete=T9e;function R9e(){this.size=0,this.__data__={hash:new nO,map:new(ete||Qee),string:new nO}}var tte=R9e;function D9e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var ite=D9e;function M9e(t,e){var i=t.__data__;return ite(e)?i[typeof e=="string"?"string":"hash"]:i.map}var gd=M9e;function F9e(t){var e=gd(this,t).delete(t);return this.size-=e?1:0,e}var rte=F9e;function L9e(t){return gd(this,t).get(t)}var nte=L9e;function O9e(t){return gd(this,t).has(t)}var ste=O9e;function P9e(t,e){var i=gd(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}var ote=P9e;function Kg(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Kg.prototype.clear=tte;Kg.prototype.delete=rte;Kg.prototype.get=nte;Kg.prototype.has=ste;Kg.prototype.set=ote;var sO=Kg;var z9e="Expected a function";function oO(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(z9e);var i=function(){var r=arguments,n=e?e.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var o=t.apply(this,r);return i.cache=s.set(n,o)||s,o};return i.cache=new(oO.Cache||sO),i}oO.Cache=sO;var ate=oO;var I9e=500;function B9e(t){var e=ate(t,function(r){return i.size===I9e&&i.clear(),r}),i=e.cache;return e}var lte=B9e;var N9e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$9e=/\\(\\)?/g,H9e=lte(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(N9e,function(i,r,n,s){e.push(n?s.replace($9e,"$1"):r||i)}),e}),ute=H9e;function U9e(t,e){for(var i=-1,r=t==null?0:t.length,n=Array(r);++i<r;)n[i]=e(t[i],i,t);return n}var cte=U9e;var W9e=1/0,hte=Ac?Ac.prototype:void 0,dte=hte?hte.toString:void 0;function fte(t){if(typeof t=="string")return t;if(qg(t))return cte(t,fte)+"";if(Gg(t))return dte?dte.call(t):"";var e=t+"";return e=="0"&&1/t==-W9e?"-0":e}var pte=fte;function V9e(t){return t==null?"":pte(t)}var mte=V9e;function j9e(t,e){return qg(t)?t:Uee(t,e)?[t]:ute(mte(t))}var gte=j9e;var q9e=9007199254740991,G9e=/^(?:0|[1-9]\d*)$/;function X9e(t,e){var i=typeof t;return e=e??q9e,!!e&&(i=="number"||i!="symbol"&&G9e.test(t))&&t>-1&&t%1==0&&t<e}var bte=X9e;var Y9e=1/0;function K9e(t){if(typeof t=="string"||Gg(t))return t;var e=t+"";return e=="0"&&1/t==-Y9e?"-0":e}var vte=K9e;function J9e(t,e,i,r){if(!Rp(t))return t;e=gte(e,t);for(var n=-1,s=e.length,o=s-1,a=t;a!=null&&++n<s;){var l=vte(e[n]),u=i;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(n!=o){var c=a[l];u=r?r(c,l,a):void 0,u===void 0&&(u=Rp(c)?c:bte(e[n+1])?[]:{})}$ee(a,l,u),a=a[l]}return t}var yte=J9e;function Z9e(t,e,i){return t==null?t:yte(t,e,i)}var xte=Z9e;var wte=(t,e,i,r,n,s,o,a,l,u=!1,c=0)=>{if(!Array.isArray(e))return X``;let h=g=>{e||(e=[]),Array.isArray(e)&&(typeof t.items!="object"||Array.isArray(t.items)||(t.items?.type==="string"?e.push(t.items?.default||""):t.items.properties?e.push(t.items?.default||{}):t.items?.type==="array"&&e.push(t.items?.default||[]),s([...i,e.length-1],e[e.length-1],a)))},d=g=>e?.map?.((b,v)=>{if(typeof t.items!="object"||Array.isArray(t.items)||!Array.isArray(e))return"";let y=[...a];y.push("items");let x=o(t.items,e[v],[...i,v],r,n?.[v],y,u,c+1),_=C=>E=>{if(!Array.isArray(e))return;let A=e[v];e[v]=e[v+C],e[v+C]=A,s([...i],e,a)},w={wrapper:{dragover:C=>{C.preventDefault(),C.stopPropagation();let E=C.dataTransfer;E&&(E.dropEffect="move")},dragenter:C=>{C.stopPropagation(),C.target.closest("sl-card")?.setAttribute("data-dropzone","")},dragleave:C=>{C.stopPropagation(),C.target.closest("sl-card")?.removeAttribute("data-dropzone")},drop:C=>{C.stopPropagation();let E=C.dataTransfer?.getData("integer");if(!E)return;let A=Number.parseInt(E,10);if(!Array.isArray(e))return;let D=e[v];e[v]=e[A],e[A]=D,s([...i],e,y),console.log({originIndex:A,idx:E}),C.target.closest("sl-card")?.removeAttribute("data-dropzone")}},handle:{mousedown:C=>{},dragstart:C=>{console.log(C),C.dataTransfer&&C.dataTransfer.setData("integer",String(v))}},delete:{click:C=>{Array.isArray(e)&&(e=e.filter((E,A)=>A!==v),s([...i],e,a))}},up:{click:_(-1),disabled:typeof e?.[v-1]>"u"},down:{click:_(1),disabled:typeof e?.[v+1]>"u"}};return g(v,x,w)}),p;typeof t.items=="object"&&!Array.isArray(t.items)&&t.items.title&&(p=t.items.title);let m={label:t.title??n?.["ui:title"],items:d,itemLabel:p,controls:{add:{click:h}},level:c};return l?.array?.(m)};var aO=(t,e,i,r,n,s,o,a,l=0)=>{let u="Wrong object field";if(typeof t.properties!="object")return a.callout?.({id:"",message:u})??X`${u}`;let c=Object.entries(t.properties).map(([f,m])=>{if(Array.isArray(m)||typeof m=="boolean")return X``;let g=e?.[f],b=[...i,f],v=t.required?.includes(f),y=[...o];return y.push(f),s(m,g,b,r?.[f],n?.[f],y,v,l+1)}),h,d=i.at(-1);t.title?h=t.title:typeof d!="number"&&(h=d),typeof n?.["ui:title"]=="string"&&(h=n["ui:title"]);let p={id:i.join("."),label:h,helpText:t.description,children:c,level:l};return a?.object?.(p)??a?.callout?.({id:"",message:u})??X`${u}`};var _te=(t,e,i,r,n,s,o,a,l)=>{let u=i.join(".");function c(y){let x={id:u,message:`Missing ${y} widget.`};return l?.callout?.(x)??X`<p>${x.message}</p>`}let h="";t.title?h=t.title:Number.isNaN(Number(i.at(-1)))&&(h=String(i.at(-1))),r?.["ui:title"]&&(h=r?.["ui:title"]);let d=r?.["ui:help"]??r?.["ui:description"]??t.description??"",p=r?.["ui:placeholder"]??"",f=r?.["ui:disabled"]||!1,m=r?.["ui:readonly"]||!1,g;e!==void 0?g=e:typeof t.default<"u"&&(typeof t.default=="string"||typeof t.default=="number"||t.default==null||typeof t.default=="boolean")&&(g=t.default,s([...i],t.default,a));let v={label:h,helpText:d,placeholder:p,valueChangedCallback:y=>{let x=y;x===""&&(x=void 0),t?.type?.includes("null")&&(typeof y>"u"||y==="")&&(x=null),s(i,x,a)},handleKeydown:o,id:u,required:n,disabled:f,readonly:m};if(t?.enum&&(t.type==="integer"||t.type==="number"||t.type==="string")){let y={...v,value:g?String(g):"",type:t.type,enum:t.enum};return r?.["ui:widget"]==="radio"?l?.radioGroup?.(y)||c("radio group"):r?.["ui:widget"]==="button"?l?.buttonGroup?.(y)||c("button group"):l?.select?.(y)||c("select")}if(t.type==="string"&&r?.["ui:widget"]==="color"){let y={...v,value:g?String(g):""};return l?.colorPicker?.(y)||c("color picker")}if(t.format==="date"||t.format==="date-time"||t.format==="time"){let y=t.format,x=g;x&&(t.format,t.format,t.format==="date-time"&&(x instanceof Date||(x=new Date(x)),x instanceof Date&&(x=x.toISOString().split(".")[0]))),t.format==="date-time"&&(y="datetime-local");let _={...v,value:x,type:y};return l?.date?.(_)||c("date")}if(t.type==="string"){let y="text";(t.format==="password"||t.format==="email")&&(y=t.format),r?.["ui:widget"]==="password"&&(y="password"),r?.["ui:options"]?.inputType==="tel"&&(y="tel");let x={...v,value:g?String(g):"",inputType:y,minLength:t.minLength,maxLength:t.maxLength,pattern:t.pattern};if(r?.["ui:widget"]==="textarea")return l?.textarea?.(x)||c("textarea");if(typeof r?.["ui:widget"]=="string"){let _=r?.["ui:widget"];if(_!=="password")return l?.[_]?.(x)||c("custom")}return l?.text?.(x)||c("text")}if(t.type==="number"||t.type==="integer"){let y=t.multipleOf;typeof y>"u"&&(t.type?.includes("integer")&&(y=1),t.type?.includes("number")&&(y="any"));let x={...v,value:typeof g<"u"?Number(g):void 0,min:t.minimum,max:t.maximum,step:y};return r?.["ui:widget"]==="range"?l?.range?.(x)||c("range"):r?.["ui:widget"]==="rating"?l?.rating?.(x)||c("rating"):l?.number?.(x)||c("number")}if(t.type?.includes("boolean")){let y={...v,value:typeof g<"u"?!!g:void 0};return r?.["ui:widget"]==="switch"?l?.switch?.(y)||c("switch"):r?.["ui:widget"]==="radio"?l?.radioGroupBoolean?.(y)||c("radio group boolean"):r?.["ui:widget"]==="button"?l?.buttonGroupBoolean?.(y)||c("button group boolean"):l?.checkbox?.(y)||c("boolean")}return c(`Wrong input for: ${i.join("/")}`)};var Cte=(t,e,i,r,n,s,o,a,l,u=0)=>{let c=i.join(".");function h(b){let v={id:c,message:`Missing ${b} widget.`};return l?.callout?.(v)??X`<p>${v.message}</p>`}let d=t.description??n?.["ui:help"]??"",p=t.items;if(typeof p!="object"||Array.isArray(p))return;let f=b=>{let v=[...a,"items","enum"];o(i,b,v)},m=n?.["ui:disabled"]||!1,g={label:t.title,helpText:d,value:e??t?.default,enum:p.enum,disabled:m,level:u,id:c,valueChangedCallback:f};return n?.["ui:widget"]==="select"?l?.selectMultiple?.(g)||h("multi select"):l?.checkboxGroup?.(g)||h("array primitive")};var Rc=function(t,e,i,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s},Wx,Jg,qn=class extends ui{constructor(){super(...arguments);D6(this,Wx);D6(this,Jg);this.schema={},this.data={},this.uiSchema={},this.submitCallback=()=>{},this.dataChangeCallback=()=>{},this.widgets={},this.styleSheets=[],this.experimental={},this.submitButton=!0,this.submitButtonText="Submit",this._uiState={},M6(this,Wx,()=>{let i={id:"__submit_button",label:this.submitButtonLabel},r="Missing submit widget.";return this.widgets?.submit?.(i)??this.widgets?.callout?.({message:r})??r}),M6(this,Jg,kee())}_dig(i,r,n,s,o,a,l=!1,u=0){let c,h=i;if(typeof h.$ref<"u"||typeof h?.items=="object"&&"$ref"in h.items){let p=h.$ref;if(typeof h.items=="object"&&!Array.isArray(h.items)&&h.items?.$ref&&(p=h.items.$ref),p?.startsWith?.("#/definitions/")){let f=p.split("/")?.[2];h?.properties||(h.items={...this.schema.definitions?.[f]})}}if(h.type?.includes("boolean")||h.type?.includes("string")||h.type?.includes("integer")||h.format==="date"||h.format==="date-time"||h.type?.includes("number")){let p=[...a];c=_te(h,r,n,o,l,this._handleChange.bind(this),this._handleKeydown.bind(this),p,this.widgets)}if(h.properties||h.allOf){if(h.allOf&&this.experimental?.allOf!==!0)return X`Unsupported feature.`;let p=i,f=[...a];f.push("properties"),c=aO(p,r,n,s,o,this._dig.bind(this),f,this.widgets,u)}if(h.type==="array"&&typeof h.items=="object"&&!Array.isArray(h.items)&&h.items.enum&&h.uniqueItems&&(h.items.type==="string"||h.items.type==="number"||h.items.type==="integer"||h.items.type==="boolean")){let p=[...a];c=Cte(h,r,n,s,o,l,this._handleChange.bind(this),p,this.widgets,u)}if(typeof h.items=="object"){if(Array.isArray(h.items)){let p={...i,properties:{}};h.items.forEach((m,g)=>{p.properties&&(p.properties[g]=m)});let f=[...a,"items"];c=aO(p,r,n,s,o,this._dig.bind(this),f,this.widgets,u)}else if(!((h.items.type==="string"||h.items.type==="number")&&h.items.enum)){let p=[...a];r||(r=[]),c=wte(i,r,n,s,o,this._handleChange.bind(this),this._dig.bind(this),p,this.widgets,l,u)}}if(c)return c;let d=`Cannot dig this level: ${n.join("/")} - (${String(h.type)})`;return this.widgets?.callout?.({id:"",message:d})??X`<p>${d}</p>`}_setToValue(i,r,n){i&&typeof i=="object"&&xte(i,n,r)}_handleChange(i,r,n){if(!(this.data&&typeof this.data=="object"))return;let s={...this.data};i.length===0?s={}:this._setToValue(s,r,i),this.data=s,this.dataChangeCallback(s,i,r,n)}_handleKeydown(i){console.log("cccccccccccccc");let r=i.metaKey||i.ctrlKey||i.shiftKey||i.altKey;i.key==="Enter"&&!r&&setTimeout(()=>{if(!i.defaultPrevented&&!i.isComposing){console.log({event:i});let n=Mw(this,Jg).value,s=!0,o;if(!n.noValidate){let a=n.querySelectorAll("*");for(let l of a)typeof l.reportValidity=="function"&&(l.reportValidity()||(s=!1,o||(o=l)));o&&o?.reportValidity()}this.submitCallback(this.data,s)}})}_updateUi(i,r){if(!(this._uiState&&typeof this._uiState=="object"))return;let n={...this._uiState};this._setToValue(n,r,i),this._uiState=n}render(){return X`
			<style>
				${Ow(this.styleSheets.join(`
`))}
			</style>

			<form
				${Aee(Mw(this,Jg))}
				part="base"
				@submit=${i=>{console.log("hey"),i.preventDefault();let r=i.target.reportValidity();this.submitCallback(this.data,r)}}
				@invalid=${i=>{}}
			>
				${this._dig(this.schema,this.data,[],this._uiState,this.uiSchema,[],!1)}

				<!--  -->
				${this.submitButton?Mw(this,Wx).call(this):lt}
			</form>
		`}};Wx=new WeakMap,Jg=new WeakMap;Rc([U({type:Object})],qn.prototype,"schema",void 0);Rc([U({type:Object})],qn.prototype,"data",void 0);Rc([U({type:Object})],qn.prototype,"uiSchema",void 0);Rc([U({type:Object})],qn.prototype,"widgets",void 0);Rc([U({type:Array})],qn.prototype,"styleSheets",void 0);Rc([U({type:Object})],qn.prototype,"experimental",void 0);Rc([U({type:Boolean})],qn.prototype,"submitButton",void 0);Rc([U({type:String})],qn.prototype,"submitButtonText",void 0);Rc([Ie()],qn.prototype,"_uiState",void 0);customElements.define("json-schema-form",qn);var _E={};br(_E,{array:()=>Rte,buttonGroup:()=>Lte,buttonGroupBoolean:()=>Ote,callout:()=>Pte,checkbox:()=>Ite,checkboxGroup:()=>Nte,colorPicker:()=>Uie,date:()=>Wie,number:()=>Vie,object:()=>jie,radioGroup:()=>Gie,radioGroupBoolean:()=>Xie,range:()=>Kie,rating:()=>Zie,select:()=>ire,selectMultiple:()=>rre,submit:()=>nre,switch:()=>sre,text:()=>ore,textarea:()=>lre});var Ste=ze`
  :host {
    --border-color: var(--sl-color-neutral-200);
    --border-radius: var(--sl-border-radius-medium);
    --border-width: 1px;
    --padding: var(--sl-spacing-large);

    display: inline-block;
  }

  .card {
    display: flex;
    flex-direction: column;
    background-color: var(--sl-panel-background-color);
    box-shadow: var(--sl-shadow-x-small);
    border: solid var(--border-width) var(--border-color);
    border-radius: var(--border-radius);
  }

  .card__image {
    display: flex;
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
    margin: calc(-1 * var(--border-width));
    overflow: hidden;
  }

  .card__image::slotted(img) {
    display: block;
    width: 100%;
  }

  .card:not(.card--has-image) .card__image {
    display: none;
  }

  .card__header {
    display: block;
    border-bottom: solid var(--border-width) var(--border-color);
    padding: calc(var(--padding) / 2) var(--padding);
  }

  .card:not(.card--has-header) .card__header {
    display: none;
  }

  .card:not(.card--has-image) .card__header {
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
  }

  .card__body {
    display: block;
    padding: var(--padding);
  }

  .card--has-footer .card__footer {
    display: block;
    border-top: solid var(--border-width) var(--border-color);
    padding: var(--padding);
  }

  .card:not(.card--has-footer) .card__footer {
    display: none;
  }
`;var lO=class extends Xe{constructor(){super(...arguments),this.hasSlotController=new Bi(this,"footer","header","image")}render(){return X`
      <div
        part="base"
        class=${et({card:!0,"card--has-footer":this.hasSlotController.test("footer"),"card--has-image":this.hasSlotController.test("image"),"card--has-header":this.hasSlotController.test("header")})}
      >
        <slot name="image" part="image" class="card__image"></slot>
        <slot name="header" part="header" class="card__header"></slot>
        <slot part="body" class="card__body"></slot>
        <slot name="footer" part="footer" class="card__footer"></slot>
      </div>
    `}};lO.styles=[tt,Ste];lO.define("sl-card");var Ete=ze`
  :host {
    display: inline-block;
  }

  .tag {
    display: flex;
    align-items: center;
    border: solid 1px;
    line-height: 1;
    white-space: nowrap;
    user-select: none;
    -webkit-user-select: none;
  }

  .tag__remove::part(base) {
    color: inherit;
    padding: 0;
  }

  /*
   * Variant modifiers
   */

  .tag--primary {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-200);
    color: var(--sl-color-primary-800);
  }

  .tag--primary:active > sl-icon-button {
    color: var(--sl-color-primary-600);
  }

  .tag--success {
    background-color: var(--sl-color-success-50);
    border-color: var(--sl-color-success-200);
    color: var(--sl-color-success-800);
  }

  .tag--success:active > sl-icon-button {
    color: var(--sl-color-success-600);
  }

  .tag--neutral {
    background-color: var(--sl-color-neutral-50);
    border-color: var(--sl-color-neutral-200);
    color: var(--sl-color-neutral-800);
  }

  .tag--neutral:active > sl-icon-button {
    color: var(--sl-color-neutral-600);
  }

  .tag--warning {
    background-color: var(--sl-color-warning-50);
    border-color: var(--sl-color-warning-200);
    color: var(--sl-color-warning-800);
  }

  .tag--warning:active > sl-icon-button {
    color: var(--sl-color-warning-600);
  }

  .tag--danger {
    background-color: var(--sl-color-danger-50);
    border-color: var(--sl-color-danger-200);
    color: var(--sl-color-danger-800);
  }

  .tag--danger:active > sl-icon-button {
    color: var(--sl-color-danger-600);
  }

  /*
   * Size modifiers
   */

  .tag--small {
    font-size: var(--sl-button-font-size-small);
    height: calc(var(--sl-input-height-small) * 0.8);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
    padding: 0 var(--sl-spacing-x-small);
  }

  .tag--medium {
    font-size: var(--sl-button-font-size-medium);
    height: calc(var(--sl-input-height-medium) * 0.8);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
    padding: 0 var(--sl-spacing-small);
  }

  .tag--large {
    font-size: var(--sl-button-font-size-large);
    height: calc(var(--sl-input-height-large) * 0.8);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
    padding: 0 var(--sl-spacing-medium);
  }

  .tag__remove {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  /*
   * Pill modifier
   */

  .tag--pill {
    border-radius: var(--sl-border-radius-pill);
  }
`;var kte=ze`
  :host {
    display: inline-block;
    color: var(--sl-color-neutral-600);
  }

  .icon-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    font-size: inherit;
    color: inherit;
    padding: var(--sl-spacing-x-small);
    cursor: pointer;
    transition: var(--sl-transition-x-fast) color;
    -webkit-appearance: none;
  }

  .icon-button:hover:not(.icon-button--disabled),
  .icon-button:focus-visible:not(.icon-button--disabled) {
    color: var(--sl-color-primary-600);
  }

  .icon-button:active:not(.icon-button--disabled) {
    color: var(--sl-color-primary-700);
  }

  .icon-button:focus {
    outline: none;
  }

  .icon-button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .icon-button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .icon-button__icon {
    pointer-events: none;
  }
`;var Tte=Symbol.for(""),Q9e=t=>{if(t?.r===Tte)return t?._$litStatic$};var Zg=(t,...e)=>({_$litStatic$:e.reduce(((i,r,n)=>i+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[n+1]),t[0]),r:Tte}),Ate=new Map,uO=t=>(e,...i)=>{let r=i.length,n,s,o=[],a=[],l,u=0,c=!1;for(;u<r;){for(l=e[u];u<r&&(s=i[u],(n=Q9e(s))!==void 0);)l+=n+e[++u],c=!0;u!==r&&a.push(s),o.push(l),u++}if(u===r&&o.push(e[r]),c){let h=o.join("$$lit$$");(e=Ate.get(h))===void 0&&(o.raw=o,Ate.set(h,e=o)),i=a}return t(e,...i)},bd=uO(X),z7t=uO(Uw),I7t=uO($z);var Gn=class extends Xe{constructor(){super(...arguments),this.hasFocus=!1,this.label="",this.disabled=!1}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}click(){this.button.click()}focus(t){this.button.focus(t)}blur(){this.button.blur()}render(){let t=!!this.href,e=t?Zg`a`:Zg`button`;return bd`
      <${e}
        part="base"
        class=${et({"icon-button":!0,"icon-button--disabled":!t&&this.disabled,"icon-button--focused":this.hasFocus})}
        ?disabled=${Se(t?void 0:this.disabled)}
        type=${Se(t?void 0:"button")}
        href=${Se(t?this.href:void 0)}
        target=${Se(t?this.target:void 0)}
        download=${Se(t?this.download:void 0)}
        rel=${Se(t&&this.target?"noreferrer noopener":void 0)}
        role=${Se(t?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        aria-label="${this.label}"
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <sl-icon
          class="icon-button__icon"
          name=${Se(this.name)}
          library=${Se(this.library)}
          src=${Se(this.src)}
          aria-hidden="true"
        ></sl-icon>
      </${e}>
    `}};Gn.styles=[tt,kte];Gn.dependencies={"sl-icon":Bt};F([Ne(".icon-button")],Gn.prototype,"button",2);F([Ie()],Gn.prototype,"hasFocus",2);F([U()],Gn.prototype,"name",2);F([U()],Gn.prototype,"library",2);F([U()],Gn.prototype,"src",2);F([U()],Gn.prototype,"href",2);F([U()],Gn.prototype,"target",2);F([U()],Gn.prototype,"download",2);F([U()],Gn.prototype,"label",2);F([U({type:Boolean,reflect:!0})],Gn.prototype,"disabled",2);var au=class extends Xe{constructor(){super(...arguments),this.localize=new ei(this),this.variant="neutral",this.size="medium",this.pill=!1,this.removable=!1}handleRemoveClick(){this.emit("sl-remove")}render(){return X`
      <span
        part="base"
        class=${et({tag:!0,"tag--primary":this.variant==="primary","tag--success":this.variant==="success","tag--neutral":this.variant==="neutral","tag--warning":this.variant==="warning","tag--danger":this.variant==="danger","tag--text":this.variant==="text","tag--small":this.size==="small","tag--medium":this.size==="medium","tag--large":this.size==="large","tag--pill":this.pill,"tag--removable":this.removable})}
      >
        <slot part="content" class="tag__content"></slot>

        ${this.removable?X`
              <sl-icon-button
                part="remove-button"
                exportparts="base:remove-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("remove")}
                class="tag__remove"
                @click=${this.handleRemoveClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </span>
    `}};au.styles=[tt,Ete];au.dependencies={"sl-icon-button":Gn};F([U({reflect:!0})],au.prototype,"variant",2);F([U({reflect:!0})],au.prototype,"size",2);F([U({type:Boolean,reflect:!0})],au.prototype,"pill",2);F([U({type:Boolean})],au.prototype,"removable",2);au.define("sl-tag");var Rte=t=>X`
		<fieldset
			id=${t.id}
			class="theme-shoelace widget-array widget-fieldset level-${t.level}"
			part="widget-array"
		>
			${t.label?X`<legend>${t.label}</legend>`:lt}
			<!-- -->
			${t.helpText?X`<p class="widget-fieldset__description">${t.helpText}</p>`:lt}
			<!--  -->
			${t.items((e,i,r)=>X`
					<sl-card
						class="widget-array__card"
						@dragover=${r.wrapper.dragover}
						@dragenter=${r.wrapper.dragenter}
						@dragleave=${r.wrapper.dragleave}
						@drop=${r.wrapper.drop}
					>
						<header slot="header" class="widget-array__header">
							<div
								class="widget-array__handle"
								.draggable=${!0}
								@mousedown=${r.handle.mousedown}
								@dragstart=${r.handle.dragstart}
							>
								<sl-tag size="small" pill>${e+1}</sl-tag>
								<div class="widget-array__handle-grip">
									<sl-icon name="grip-horizontal" label="Settings"></sl-icon>
								</div>
							</div>

							<nav>
								<sl-tooltip content="Delete">
									<sl-button size="small" @click=${r.delete.click}>
										<sl-icon name="x-lg" label="Settings"></sl-icon>
									</sl-button>
								</sl-tooltip>

								<sl-divider vertical></sl-divider>

								<sl-button-group>
									<sl-tooltip content="Move item up">
										<sl-button
											size="small"
											@click=${r.up.click}
											.disabled=${r.up.disabled}
										>
											<sl-icon name="arrow-up" label="Up"></sl-icon>
										</sl-button>
									</sl-tooltip>

									<sl-tooltip content="Move item down">
										<sl-button
											size="small"
											@click=${r.down.click}
											.disabled=${r.down.disabled}
										>
											<sl-icon name="arrow-down" label="Down"></sl-icon>
										</sl-button>
									</sl-tooltip>
								</sl-button-group>
							</nav>
						</header>

						${i}
					</sl-card>
				`)}

			<nav class="widget-array__add-zone">
				<sl-button @click=${t.controls.add.click} size="large">
					<sl-icon name="plus"></sl-icon> New
					${t.itemLabel?X`"<strong>${t.itemLabel}</strong>"`:lt}
				</sl-button>
			</nav>
		</fieldset>
	`;var Dte=ze`
  :host {
    display: block;
  }

  .form-control {
    position: relative;
    border: none;
    padding: 0;
    margin: 0;
  }

  .form-control__label {
    padding: 0;
  }

  .radio-group--required .radio-group__label::after {
    content: var(--sl-input-required-content);
    margin-inline-start: var(--sl-input-required-content-offset);
  }

  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
`;var Mte=ze`
  :host {
    display: inline-block;
  }

  .button-group {
    display: flex;
    flex-wrap: nowrap;
  }
`;var vd=class extends Xe{constructor(){super(...arguments),this.disableRole=!1,this.label=""}handleFocus(t){let e=Vx(t.target);e?.toggleAttribute("data-sl-button-group__button--focus",!0)}handleBlur(t){let e=Vx(t.target);e?.toggleAttribute("data-sl-button-group__button--focus",!1)}handleMouseOver(t){let e=Vx(t.target);e?.toggleAttribute("data-sl-button-group__button--hover",!0)}handleMouseOut(t){let e=Vx(t.target);e?.toggleAttribute("data-sl-button-group__button--hover",!1)}handleSlotChange(){let t=[...this.defaultSlot.assignedElements({flatten:!0})];t.forEach(e=>{let i=t.indexOf(e),r=Vx(e);r&&(r.toggleAttribute("data-sl-button-group__button",!0),r.toggleAttribute("data-sl-button-group__button--first",i===0),r.toggleAttribute("data-sl-button-group__button--inner",i>0&&i<t.length-1),r.toggleAttribute("data-sl-button-group__button--last",i===t.length-1),r.toggleAttribute("data-sl-button-group__button--radio",r.tagName.toLowerCase()==="sl-radio-button"))})}render(){return X`
      <div
        part="base"
        class="button-group"
        role="${this.disableRole?"presentation":"group"}"
        aria-label=${this.label}
        @focusout=${this.handleBlur}
        @focusin=${this.handleFocus}
        @mouseover=${this.handleMouseOver}
        @mouseout=${this.handleMouseOut}
      >
        <slot @slotchange=${this.handleSlotChange}></slot>
      </div>
    `}};vd.styles=[tt,Mte];F([Ne("slot")],vd.prototype,"defaultSlot",2);F([Ie()],vd.prototype,"disableRole",2);F([U()],vd.prototype,"label",2);function Vx(t){var e;let i="sl-button, sl-radio-button";return(e=t.closest(i))!=null?e:t.querySelector(i)}var Yr=class extends Xe{constructor(){super(...arguments),this.formControlController=new Xr(this),this.hasSlotController=new Bi(this,"help-text","label"),this.customValidityMessage="",this.hasButtonGroup=!1,this.errorMessage="",this.defaultValue="",this.label="",this.helpText="",this.name="option",this.value="",this.size="medium",this.form="",this.required=!1}get validity(){let t=this.required&&!this.value;return this.customValidityMessage!==""?bee:t?gee:Ug}get validationMessage(){let t=this.required&&!this.value;return this.customValidityMessage!==""?this.customValidityMessage:t?this.validationInput.validationMessage:""}connectedCallback(){super.connectedCallback(),this.defaultValue=this.value}firstUpdated(){this.formControlController.updateValidity()}getAllRadios(){return[...this.querySelectorAll("sl-radio, sl-radio-button")]}handleRadioClick(t){let e=t.target.closest("sl-radio, sl-radio-button"),i=this.getAllRadios(),r=this.value;!e||e.disabled||(this.value=e.value,i.forEach(n=>n.checked=n===e),this.value!==r&&(this.emit("sl-change"),this.emit("sl-input")))}handleKeyDown(t){var e;if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(t.key))return;let i=this.getAllRadios().filter(a=>!a.disabled),r=(e=i.find(a=>a.checked))!=null?e:i[0],n=t.key===" "?0:["ArrowUp","ArrowLeft"].includes(t.key)?-1:1,s=this.value,o=i.indexOf(r)+n;o<0&&(o=i.length-1),o>i.length-1&&(o=0),this.getAllRadios().forEach(a=>{a.checked=!1,this.hasButtonGroup||a.setAttribute("tabindex","-1")}),this.value=i[o].value,i[o].checked=!0,this.hasButtonGroup?i[o].shadowRoot.querySelector("button").focus():(i[o].setAttribute("tabindex","0"),i[o].focus()),this.value!==s&&(this.emit("sl-change"),this.emit("sl-input")),t.preventDefault()}handleLabelClick(){this.focus()}handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}async syncRadioElements(){var t,e;let i=this.getAllRadios();if(await Promise.all(i.map(async r=>{await r.updateComplete,r.checked=r.value===this.value,r.size=this.size})),this.hasButtonGroup=i.some(r=>r.tagName.toLowerCase()==="sl-radio-button"),i.length>0&&!i.some(r=>r.checked))if(this.hasButtonGroup){let r=(t=i[0].shadowRoot)==null?void 0:t.querySelector("button");r&&r.setAttribute("tabindex","0")}else i[0].setAttribute("tabindex","0");if(this.hasButtonGroup){let r=(e=this.shadowRoot)==null?void 0:e.querySelector("sl-button-group");r&&(r.disableRole=!0)}}syncRadios(){if(customElements.get("sl-radio")&&customElements.get("sl-radio-button")){this.syncRadioElements();return}customElements.get("sl-radio")?this.syncRadioElements():customElements.whenDefined("sl-radio").then(()=>this.syncRadios()),customElements.get("sl-radio-button")?this.syncRadioElements():customElements.whenDefined("sl-radio-button").then(()=>this.syncRadios())}updateCheckedRadio(){this.getAllRadios().forEach(e=>e.checked=e.value===this.value),this.formControlController.setValidity(this.validity.valid)}handleSizeChange(){this.syncRadios()}handleValueChange(){this.hasUpdated&&this.updateCheckedRadio()}checkValidity(){let t=this.required&&!this.value,e=this.customValidityMessage!=="";return t||e?(this.formControlController.emitInvalidEvent(),!1):!0}getForm(){return this.formControlController.getForm()}reportValidity(){let t=this.validity.valid;return this.errorMessage=this.customValidityMessage||t?"":this.validationInput.validationMessage,this.formControlController.setValidity(t),this.validationInput.hidden=!0,clearTimeout(this.validationTimeout),t||(this.validationInput.hidden=!1,this.validationInput.reportValidity(),this.validationTimeout=setTimeout(()=>this.validationInput.hidden=!0,1e4)),t}setCustomValidity(t=""){this.customValidityMessage=t,this.errorMessage=t,this.validationInput.setCustomValidity(t),this.formControlController.updateValidity()}focus(t){let e=this.getAllRadios(),i=e.find(s=>s.checked),r=e.find(s=>!s.disabled),n=i||r;n&&n.focus(t)}render(){let t=this.hasSlotController.test("label"),e=this.hasSlotController.test("help-text"),i=this.label?!0:!!t,r=this.helpText?!0:!!e,n=X`
      <slot @slotchange=${this.syncRadios} @click=${this.handleRadioClick} @keydown=${this.handleKeyDown}></slot>
    `;return X`
      <fieldset
        part="form-control"
        class=${et({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--radio-group":!0,"form-control--has-label":i,"form-control--has-help-text":r})}
        role="radiogroup"
        aria-labelledby="label"
        aria-describedby="help-text"
        aria-errormessage="error-message"
      >
        <label
          part="form-control-label"
          id="label"
          class="form-control__label"
          aria-hidden=${i?"false":"true"}
          @click=${this.handleLabelClick}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div class="visually-hidden">
            <div id="error-message" aria-live="assertive">${this.errorMessage}</div>
            <label class="radio-group__validation">
              <input
                type="text"
                class="radio-group__validation-input"
                ?required=${this.required}
                tabindex="-1"
                hidden
                @invalid=${this.handleInvalid}
              />
            </label>
          </div>

          ${this.hasButtonGroup?X`
                <sl-button-group part="button-group" exportparts="base:button-group__base" role="presentation">
                  ${n}
                </sl-button-group>
              `:n}
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${r?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </fieldset>
    `}};Yr.styles=[tt,Gs,Dte];Yr.dependencies={"sl-button-group":vd};F([Ne("slot:not([name])")],Yr.prototype,"defaultSlot",2);F([Ne(".radio-group__validation-input")],Yr.prototype,"validationInput",2);F([Ie()],Yr.prototype,"hasButtonGroup",2);F([Ie()],Yr.prototype,"errorMessage",2);F([Ie()],Yr.prototype,"defaultValue",2);F([U()],Yr.prototype,"label",2);F([U({attribute:"help-text"})],Yr.prototype,"helpText",2);F([U()],Yr.prototype,"name",2);F([U({reflect:!0})],Yr.prototype,"value",2);F([U({reflect:!0})],Yr.prototype,"size",2);F([U({reflect:!0})],Yr.prototype,"form",2);F([U({type:Boolean,reflect:!0})],Yr.prototype,"required",2);F([je("size",{waitUntilFirstUpdate:!0})],Yr.prototype,"handleSizeChange",1);F([je("value")],Yr.prototype,"handleValueChange",1);Yr.define("sl-radio-group");var lE=ze`
  :host {
    display: inline-block;
    position: relative;
    width: auto;
    cursor: pointer;
  }

  .button {
    display: inline-flex;
    align-items: stretch;
    justify-content: center;
    width: 100%;
    border-style: solid;
    border-width: var(--sl-input-border-width);
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-font-weight-semibold);
    text-decoration: none;
    user-select: none;
    -webkit-user-select: none;
    white-space: nowrap;
    vertical-align: middle;
    padding: 0;
    transition:
      var(--sl-transition-x-fast) background-color,
      var(--sl-transition-x-fast) color,
      var(--sl-transition-x-fast) border,
      var(--sl-transition-x-fast) box-shadow;
    cursor: inherit;
  }

  .button::-moz-focus-inner {
    border: 0;
  }

  .button:focus {
    outline: none;
  }

  .button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When disabled, prevent mouse events from bubbling up from children */
  .button--disabled * {
    pointer-events: none;
  }

  .button__prefix,
  .button__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    pointer-events: none;
  }

  .button__label {
    display: inline-block;
  }

  .button__label::slotted(sl-icon) {
    vertical-align: -2px;
  }

  /*
   * Standard buttons
   */

  /* Default */
  .button--standard.button--default {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-input-border-color);
    color: var(--sl-color-neutral-700);
  }

  .button--standard.button--default:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-300);
    color: var(--sl-color-primary-700);
  }

  .button--standard.button--default:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-100);
    border-color: var(--sl-color-primary-400);
    color: var(--sl-color-primary-700);
  }

  /* Primary */
  .button--standard.button--primary {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--standard.button--success {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:hover:not(.button--disabled) {
    background-color: var(--sl-color-success-500);
    border-color: var(--sl-color-success-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:active:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--standard.button--neutral {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:hover:not(.button--disabled) {
    background-color: var(--sl-color-neutral-500);
    border-color: var(--sl-color-neutral-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:active:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--standard.button--warning {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }
  .button--standard.button--warning:hover:not(.button--disabled) {
    background-color: var(--sl-color-warning-500);
    border-color: var(--sl-color-warning-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--warning:active:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--standard.button--danger {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:hover:not(.button--disabled) {
    background-color: var(--sl-color-danger-500);
    border-color: var(--sl-color-danger-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:active:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /*
   * Outline buttons
   */

  .button--outline {
    background: none;
    border: solid 1px;
  }

  /* Default */
  .button--outline.button--default {
    border-color: var(--sl-input-border-color);
    color: var(--sl-color-neutral-700);
  }

  .button--outline.button--default:hover:not(.button--disabled),
  .button--outline.button--default.button--checked:not(.button--disabled) {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--default:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Primary */
  .button--outline.button--primary {
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-primary-600);
  }

  .button--outline.button--primary:hover:not(.button--disabled),
  .button--outline.button--primary.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--primary:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--outline.button--success {
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-success-600);
  }

  .button--outline.button--success:hover:not(.button--disabled),
  .button--outline.button--success.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--success:active:not(.button--disabled) {
    border-color: var(--sl-color-success-700);
    background-color: var(--sl-color-success-700);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--outline.button--neutral {
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-600);
  }

  .button--outline.button--neutral:hover:not(.button--disabled),
  .button--outline.button--neutral.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--neutral:active:not(.button--disabled) {
    border-color: var(--sl-color-neutral-700);
    background-color: var(--sl-color-neutral-700);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--outline.button--warning {
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-warning-600);
  }

  .button--outline.button--warning:hover:not(.button--disabled),
  .button--outline.button--warning.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--warning:active:not(.button--disabled) {
    border-color: var(--sl-color-warning-700);
    background-color: var(--sl-color-warning-700);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--outline.button--danger {
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-danger-600);
  }

  .button--outline.button--danger:hover:not(.button--disabled),
  .button--outline.button--danger.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--danger:active:not(.button--disabled) {
    border-color: var(--sl-color-danger-700);
    background-color: var(--sl-color-danger-700);
    color: var(--sl-color-neutral-0);
  }

  @media (forced-colors: active) {
    .button.button--outline.button--checked:not(.button--disabled) {
      outline: solid 2px transparent;
    }
  }

  /*
   * Text buttons
   */

  .button--text {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-600);
  }

  .button--text:hover:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:focus-visible:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:active:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-700);
  }

  /*
   * Size modifiers
   */

  .button--small {
    height: auto;
    min-height: var(--sl-input-height-small);
    font-size: var(--sl-button-font-size-small);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
  }

  .button--medium {
    height: auto;
    min-height: var(--sl-input-height-medium);
    font-size: var(--sl-button-font-size-medium);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
  }

  .button--large {
    height: auto;
    min-height: var(--sl-input-height-large);
    font-size: var(--sl-button-font-size-large);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
  }

  /*
   * Pill modifier
   */

  .button--pill.button--small {
    border-radius: var(--sl-input-height-small);
  }

  .button--pill.button--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .button--pill.button--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Circle modifier
   */

  .button--circle {
    padding-left: 0;
    padding-right: 0;
  }

  .button--circle.button--small {
    width: var(--sl-input-height-small);
    border-radius: 50%;
  }

  .button--circle.button--medium {
    width: var(--sl-input-height-medium);
    border-radius: 50%;
  }

  .button--circle.button--large {
    width: var(--sl-input-height-large);
    border-radius: 50%;
  }

  .button--circle .button__prefix,
  .button--circle .button__suffix,
  .button--circle .button__caret {
    display: none;
  }

  /*
   * Caret modifier
   */

  .button--caret .button__suffix {
    display: none;
  }

  .button--caret .button__caret {
    height: auto;
  }

  /*
   * Loading modifier
   */

  .button--loading {
    position: relative;
    cursor: wait;
  }

  .button--loading .button__prefix,
  .button--loading .button__label,
  .button--loading .button__suffix,
  .button--loading .button__caret {
    visibility: hidden;
  }

  .button--loading sl-spinner {
    --indicator-color: currentColor;
    position: absolute;
    font-size: 1em;
    height: 1em;
    width: 1em;
    top: calc(50% - 0.5em);
    left: calc(50% - 0.5em);
  }

  /*
   * Badges
   */

  .button ::slotted(sl-badge) {
    position: absolute;
    top: 0;
    right: 0;
    translate: 50% -50%;
    pointer-events: none;
  }

  .button--rtl ::slotted(sl-badge) {
    right: auto;
    left: 0;
    translate: -50% -50%;
  }

  /*
   * Button spacing
   */

  .button--has-label.button--small .button__label {
    padding: 0 var(--sl-spacing-small);
  }

  .button--has-label.button--medium .button__label {
    padding: 0 var(--sl-spacing-medium);
  }

  .button--has-label.button--large .button__label {
    padding: 0 var(--sl-spacing-large);
  }

  .button--has-prefix.button--small {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--small .button__label {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--medium {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--medium .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-suffix.button--small,
  .button--caret.button--small {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--small .button__label,
  .button--caret.button--small .button__label {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--medium,
  .button--caret.button--medium {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--medium .button__label,
  .button--caret.button--medium .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large,
  .button--caret.button--large {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large .button__label,
  .button--caret.button--large .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  /*
   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).
   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the
   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to
   * buttons and we style them here instead.
   */

  :host([data-sl-button-group__button--first]:not([data-sl-button-group__button--last])) .button {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
  }

  :host([data-sl-button-group__button--inner]) .button {
    border-radius: 0;
  }

  :host([data-sl-button-group__button--last]:not([data-sl-button-group__button--first])) .button {
    border-start-start-radius: 0;
    border-end-start-radius: 0;
  }

  /* All except the first */
  :host([data-sl-button-group__button]:not([data-sl-button-group__button--first])) {
    margin-inline-start: calc(-1 * var(--sl-input-border-width));
  }

  /* Add a visual separator between solid buttons */
  :host(
      [data-sl-button-group__button]:not(
          [data-sl-button-group__button--first],
          [data-sl-button-group__button--radio],
          [variant='default']
        ):not(:hover)
    )
    .button:after {
    content: '';
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    bottom: 0;
    border-left: solid 1px rgb(128 128 128 / 33%);
    mix-blend-mode: multiply;
  }

  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */
  :host([data-sl-button-group__button--hover]) {
    z-index: 1;
  }

  /* Focus and checked are always on top */
  :host([data-sl-button-group__button--focus]),
  :host([data-sl-button-group__button][checked]) {
    z-index: 2;
  }
`;var Fte=ze`
  ${lE}

  .button__prefix,
  .button__suffix,
  .button__label {
    display: inline-flex;
    position: relative;
    align-items: center;
  }

  /* We use a hidden input so constraint validation errors work, since they don't appear to show when used with buttons.
    We can't actually hide it, though, otherwise the messages will be suppressed by the browser. */
  .hidden-input {
    all: unset;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    outline: dotted 1px red;
    opacity: 0;
    z-index: -1;
  }
`;var aa=class extends Xe{constructor(){super(...arguments),this.hasSlotController=new Bi(this,"[default]","prefix","suffix"),this.hasFocus=!1,this.checked=!1,this.disabled=!1,this.size="medium",this.pill=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","presentation")}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleClick(t){if(this.disabled){t.preventDefault(),t.stopPropagation();return}this.checked=!0}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}focus(t){this.input.focus(t)}blur(){this.input.blur()}render(){return bd`
      <div part="base" role="presentation">
        <button
          part="${`button${this.checked?" button--checked":""}`}"
          role="radio"
          aria-checked="${this.checked}"
          class=${et({button:!0,"button--default":!0,"button--small":this.size==="small","button--medium":this.size==="medium","button--large":this.size==="large","button--checked":this.checked,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--outline":!0,"button--pill":this.pill,"button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
          aria-disabled=${this.disabled}
          type="button"
          value=${Se(this.value)}
          @blur=${this.handleBlur}
          @focus=${this.handleFocus}
          @click=${this.handleClick}
        >
          <slot name="prefix" part="prefix" class="button__prefix"></slot>
          <slot part="label" class="button__label"></slot>
          <slot name="suffix" part="suffix" class="button__suffix"></slot>
        </button>
      </div>
    `}};aa.styles=[tt,Fte];F([Ne(".button")],aa.prototype,"input",2);F([Ne(".hidden-input")],aa.prototype,"hiddenInput",2);F([Ie()],aa.prototype,"hasFocus",2);F([U({type:Boolean,reflect:!0})],aa.prototype,"checked",2);F([U()],aa.prototype,"value",2);F([U({type:Boolean,reflect:!0})],aa.prototype,"disabled",2);F([U({reflect:!0})],aa.prototype,"size",2);F([U({type:Boolean,reflect:!0})],aa.prototype,"pill",2);F([je("disabled",{waitUntilFirstUpdate:!0})],aa.prototype,"handleDisabledChange",1);aa.define("sl-radio-button");var Lte=t=>X`
	<sl-radio-group
		size="medium"
		.label=${t.label??""}
		.helpText=${t.helpText??""}
		value=${typeof t.value<"u"?String(t.value):""}
		.name=${t.id}
		.required=${t.required??!1}
		@sl-change=${e=>{let i=e.target.value;t.type==="number"&&(i=Number(i)),t.valueChangedCallback?.(i)}}
	>
		${t.enum?.map(e=>X`<sl-radio-button
					.disabled=${String(e)===t.value?!1:t.disabled}
					value=${String(e)}
					>${e}</sl-radio-button
				>`)}
	</sl-radio-group>
`;var Ote=t=>X`
	<sl-radio-group
		size="medium"
		.label=${t.label??""}
		.helpText=${t.helpText??""}
		value=${typeof t.value<"u"?String(t.value):""}
		.name=${t.id}
		.required?=${t.required}
		@sl-change=${e=>{let i=e.target.value;t.valueChangedCallback?.(i==="true")}}
	>
		<sl-radio-button
			value="true"
			.disabled=${t.value===!0?!1:t.disabled}
			>${t.trueLabel??"Yes"}</sl-radio-button
		>
		<sl-radio-button
			value="false"
			.disabled=${t.value===!1?!1:t.disabled}
			>${t.falseLabel??"No"}</sl-radio-button
		>
	</sl-radio-group>
`;var Pte=t=>(console.warn(t.message),X`
		<div
			role="alert"
			class=${`callout--${t.type??"warning"} theme-shoelace widget-callout`}
			id=${t.id}
			part="widget-callout"
		>
			<p>${t.message}</p>
		</div>
	`);var zte=ze`
  :host {
    display: block;
  }

  .input {
    flex: 1 1 auto;
    display: inline-flex;
    align-items: stretch;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: text;
    transition:
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) border,
      var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  /* Standard inputs */
  .input--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .input--standard:hover:not(.input--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }

  .input--standard.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .input--standard.input--focused:not(.input--disabled) .input__control {
    color: var(--sl-input-color-focus);
  }

  .input--standard.input--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input--standard.input--disabled .input__control {
    color: var(--sl-input-color-disabled);
  }

  .input--standard.input--disabled .input__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled inputs */
  .input--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .input--filled:hover:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .input--filled.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .input--filled.input--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    min-width: 0;
    height: 100%;
    color: var(--sl-input-color);
    border: none;
    background: inherit;
    box-shadow: none;
    padding: 0;
    margin: 0;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .input__control::-webkit-search-decoration,
  .input__control::-webkit-search-cancel-button,
  .input__control::-webkit-search-results-button,
  .input__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .input__control:-webkit-autofill,
  .input__control:-webkit-autofill:hover,
  .input__control:-webkit-autofill:focus,
  .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;
    -webkit-text-fill-color: var(--sl-color-primary-500);
    caret-color: var(--sl-input-color);
  }

  .input--filled .input__control:-webkit-autofill,
  .input--filled .input__control:-webkit-autofill:hover,
  .input--filled .input__control:-webkit-autofill:focus,
  .input--filled .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;
  }

  .input__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
    -webkit-user-select: none;
  }

  .input:hover:not(.input--disabled) .input__control {
    color: var(--sl-input-color-hover);
  }

  .input__control:focus {
    outline: none;
  }

  .input__prefix,
  .input__suffix {
    display: inline-flex;
    flex: 0 0 auto;
    align-items: center;
    cursor: default;
  }

  .input__prefix ::slotted(sl-icon),
  .input__suffix ::slotted(sl-icon) {
    color: var(--sl-input-icon-color);
  }

  /*
   * Size modifiers
   */

  .input--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    height: var(--sl-input-height-small);
  }

  .input--small .input__control {
    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-small);
  }

  .input--small .input__clear,
  .input--small .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-small) * 2);
  }

  .input--small .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .input--small .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .input--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    height: var(--sl-input-height-medium);
  }

  .input--medium .input__control {
    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-medium);
  }

  .input--medium .input__clear,
  .input--medium .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-medium) * 2);
  }

  .input--medium .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .input--medium .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .input--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    height: var(--sl-input-height-large);
  }

  .input--large .input__control {
    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-large);
  }

  .input--large .input__clear,
  .input--large .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-large) * 2);
  }

  .input--large .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .input--large .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  /*
   * Pill modifier
   */

  .input--pill.input--small {
    border-radius: var(--sl-input-height-small);
  }

  .input--pill.input--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .input--pill.input--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Clearable + Password Toggle
   */

  .input__clear,
  .input__password-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .input__clear:hover,
  .input__password-toggle:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .input__clear:focus,
  .input__password-toggle:focus {
    outline: none;
  }

  /* Don't show the browser's password toggle in Edge */
  ::-ms-reveal {
    display: none;
  }

  /* Hide the built-in number spinner */
  .input--no-spin-buttons input[type='number']::-webkit-outer-spin-button,
  .input--no-spin-buttons input[type='number']::-webkit-inner-spin-button {
    -webkit-appearance: none;
    display: none;
  }

  .input--no-spin-buttons input[type='number'] {
    -moz-appearance: textfield;
  }
`;var mt=class extends Xe{constructor(){super(...arguments),this.formControlController=new Xr(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new Bi(this,"help-text","label"),this.localize=new ei(this),this.hasFocus=!1,this.title="",this.__numberInput=Object.assign(document.createElement("input"),{type:"number"}),this.__dateInput=Object.assign(document.createElement("input"),{type:"date"}),this.type="text",this.name="",this.value="",this.defaultValue="",this.size="medium",this.filled=!1,this.pill=!1,this.label="",this.helpText="",this.clearable=!1,this.disabled=!1,this.placeholder="",this.readonly=!1,this.passwordToggle=!1,this.passwordVisible=!1,this.noSpinButtons=!1,this.form="",this.required=!1,this.spellcheck=!0}get valueAsDate(){var t;return this.__dateInput.type=this.type,this.__dateInput.value=this.value,((t=this.input)==null?void 0:t.valueAsDate)||this.__dateInput.valueAsDate}set valueAsDate(t){this.__dateInput.type=this.type,this.__dateInput.valueAsDate=t,this.value=this.__dateInput.value}get valueAsNumber(){var t;return this.__numberInput.value=this.value,((t=this.input)==null?void 0:t.valueAsNumber)||this.__numberInput.valueAsNumber}set valueAsNumber(t){this.__numberInput.valueAsNumber=t,this.value=this.__numberInput.value}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.emit("sl-change")}handleClearClick(t){t.preventDefault(),this.value!==""&&(this.value="",this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change")),this.input.focus()}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.formControlController.updateValidity(),this.emit("sl-input")}handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}handleKeyDown(t){let e=t.metaKey||t.ctrlKey||t.shiftKey||t.altKey;t.key==="Enter"&&!e&&setTimeout(()=>{!t.defaultPrevented&&!t.isComposing&&this.formControlController.submit()})}handlePasswordToggle(){this.passwordVisible=!this.passwordVisible}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleStepChange(){this.input.step=String(this.step),this.formControlController.updateValidity()}async handleValueChange(){await this.updateComplete,this.formControlController.updateValidity()}focus(t){this.input.focus(t)}blur(){this.input.blur()}select(){this.input.select()}setSelectionRange(t,e,i="none"){this.input.setSelectionRange(t,e,i)}setRangeText(t,e,i,r="preserve"){let n=e??this.input.selectionStart,s=i??this.input.selectionEnd;this.input.setRangeText(t,n,s,r),this.value!==this.input.value&&(this.value=this.input.value)}showPicker(){"showPicker"in HTMLInputElement.prototype&&this.input.showPicker()}stepUp(){this.input.stepUp(),this.value!==this.input.value&&(this.value=this.input.value)}stepDown(){this.input.stepDown(),this.value!==this.input.value&&(this.value=this.input.value)}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(t){this.input.setCustomValidity(t),this.formControlController.updateValidity()}render(){let t=this.hasSlotController.test("label"),e=this.hasSlotController.test("help-text"),i=this.label?!0:!!t,r=this.helpText?!0:!!e,s=this.clearable&&!this.disabled&&!this.readonly&&(typeof this.value=="number"||this.value.length>0);return X`
      <div
        part="form-control"
        class=${et({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":i,"form-control--has-help-text":r})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${i?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${et({input:!0,"input--small":this.size==="small","input--medium":this.size==="medium","input--large":this.size==="large","input--pill":this.pill,"input--standard":!this.filled,"input--filled":this.filled,"input--disabled":this.disabled,"input--focused":this.hasFocus,"input--empty":!this.value,"input--no-spin-buttons":this.noSpinButtons})}
          >
            <span part="prefix" class="input__prefix">
              <slot name="prefix"></slot>
            </span>

            <input
              part="input"
              id="input"
              class="input__control"
              type=${this.type==="password"&&this.passwordVisible?"text":this.type}
              title=${this.title}
              name=${Se(this.name)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${Se(this.placeholder)}
              minlength=${Se(this.minlength)}
              maxlength=${Se(this.maxlength)}
              min=${Se(this.min)}
              max=${Se(this.max)}
              step=${Se(this.step)}
              .value=${wo(this.value)}
              autocapitalize=${Se(this.autocapitalize)}
              autocomplete=${Se(this.autocomplete)}
              autocorrect=${Se(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${this.spellcheck}
              pattern=${Se(this.pattern)}
              enterkeyhint=${Se(this.enterkeyhint)}
              inputmode=${Se(this.inputmode)}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @keydown=${this.handleKeyDown}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />

            ${s?X`
                  <button
                    part="clear-button"
                    class="input__clear"
                    type="button"
                    aria-label=${this.localize.term("clearEntry")}
                    @click=${this.handleClearClick}
                    tabindex="-1"
                  >
                    <slot name="clear-icon">
                      <sl-icon name="x-circle-fill" library="system"></sl-icon>
                    </slot>
                  </button>
                `:""}
            ${this.passwordToggle&&!this.disabled?X`
                  <button
                    part="password-toggle-button"
                    class="input__password-toggle"
                    type="button"
                    aria-label=${this.localize.term(this.passwordVisible?"hidePassword":"showPassword")}
                    @click=${this.handlePasswordToggle}
                    tabindex="-1"
                  >
                    ${this.passwordVisible?X`
                          <slot name="show-password-icon">
                            <sl-icon name="eye-slash" library="system"></sl-icon>
                          </slot>
                        `:X`
                          <slot name="hide-password-icon">
                            <sl-icon name="eye" library="system"></sl-icon>
                          </slot>
                        `}
                  </button>
                `:""}

            <span part="suffix" class="input__suffix">
              <slot name="suffix"></slot>
            </span>
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${r?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};mt.styles=[tt,Gs,zte];mt.dependencies={"sl-icon":Bt};F([Ne(".input__control")],mt.prototype,"input",2);F([Ie()],mt.prototype,"hasFocus",2);F([U()],mt.prototype,"title",2);F([U({reflect:!0})],mt.prototype,"type",2);F([U()],mt.prototype,"name",2);F([U()],mt.prototype,"value",2);F([oa()],mt.prototype,"defaultValue",2);F([U({reflect:!0})],mt.prototype,"size",2);F([U({type:Boolean,reflect:!0})],mt.prototype,"filled",2);F([U({type:Boolean,reflect:!0})],mt.prototype,"pill",2);F([U()],mt.prototype,"label",2);F([U({attribute:"help-text"})],mt.prototype,"helpText",2);F([U({type:Boolean})],mt.prototype,"clearable",2);F([U({type:Boolean,reflect:!0})],mt.prototype,"disabled",2);F([U()],mt.prototype,"placeholder",2);F([U({type:Boolean,reflect:!0})],mt.prototype,"readonly",2);F([U({attribute:"password-toggle",type:Boolean})],mt.prototype,"passwordToggle",2);F([U({attribute:"password-visible",type:Boolean})],mt.prototype,"passwordVisible",2);F([U({attribute:"no-spin-buttons",type:Boolean})],mt.prototype,"noSpinButtons",2);F([U({reflect:!0})],mt.prototype,"form",2);F([U({type:Boolean,reflect:!0})],mt.prototype,"required",2);F([U()],mt.prototype,"pattern",2);F([U({type:Number})],mt.prototype,"minlength",2);F([U({type:Number})],mt.prototype,"maxlength",2);F([U()],mt.prototype,"min",2);F([U()],mt.prototype,"max",2);F([U()],mt.prototype,"step",2);F([U()],mt.prototype,"autocapitalize",2);F([U()],mt.prototype,"autocorrect",2);F([U()],mt.prototype,"autocomplete",2);F([U({type:Boolean})],mt.prototype,"autofocus",2);F([U()],mt.prototype,"enterkeyhint",2);F([U({type:Boolean,converter:{fromAttribute:t=>!(!t||t==="false"),toAttribute:t=>t?"true":"false"}})],mt.prototype,"spellcheck",2);F([U()],mt.prototype,"inputmode",2);F([je("disabled",{waitUntilFirstUpdate:!0})],mt.prototype,"handleDisabledChange",1);F([je("step",{waitUntilFirstUpdate:!0})],mt.prototype,"handleStepChange",1);F([je("value",{waitUntilFirstUpdate:!0})],mt.prototype,"handleValueChange",1);mt.define("sl-input");var Ite=t=>X`
	<div class="theme-shoelace widget-checkbox">
		<sl-checkbox
			type="text"
			.checked="${t.value}"
			.name=${t.id}
			.id=${t.id}
			.required=${t.required??!0}
			@sl-input=${e=>{let{checked:i}=e.target;t.valueChangedCallback?.(i)}}
			.disabled=${t.disabled}
		>
			<label class="widget-checkbox__label">${t.label}</label>
		</sl-checkbox>

		${t.helpText?X`<div class="widget-checkbox__description">
					${t.helpText}
			  </div>`:lt}
	</div>
`;var Bte=ze`
  :host {
    display: inline-block;
  }

  .checkbox {
    position: relative;
    display: inline-flex;
    align-items: flex-start;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    color: var(--sl-input-label-color);
    vertical-align: middle;
    cursor: pointer;
  }

  .checkbox--small {
    --toggle-size: var(--sl-toggle-size-small);
    font-size: var(--sl-input-font-size-small);
  }

  .checkbox--medium {
    --toggle-size: var(--sl-toggle-size-medium);
    font-size: var(--sl-input-font-size-medium);
  }

  .checkbox--large {
    --toggle-size: var(--sl-toggle-size-large);
    font-size: var(--sl-input-font-size-large);
  }

  .checkbox__control {
    flex: 0 0 auto;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--toggle-size);
    height: var(--toggle-size);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
    border-radius: 2px;
    background-color: var(--sl-input-background-color);
    color: var(--sl-color-neutral-0);
    transition:
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) box-shadow;
  }

  .checkbox__input {
    position: absolute;
    opacity: 0;
    padding: 0;
    margin: 0;
    pointer-events: none;
  }

  .checkbox__checked-icon,
  .checkbox__indeterminate-icon {
    display: inline-flex;
    width: var(--toggle-size);
    height: var(--toggle-size);
  }

  /* Hover */
  .checkbox:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__control:hover {
    border-color: var(--sl-input-border-color-hover);
    background-color: var(--sl-input-background-color-hover);
  }

  /* Focus */
  .checkbox:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__input:focus-visible ~ .checkbox__control {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  /* Checked/indeterminate */
  .checkbox--checked .checkbox__control,
  .checkbox--indeterminate .checkbox__control {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
  }

  /* Checked/indeterminate + hover */
  .checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__control:hover,
  .checkbox.checkbox--indeterminate:not(.checkbox--disabled) .checkbox__control:hover {
    border-color: var(--sl-color-primary-500);
    background-color: var(--sl-color-primary-500);
  }

  /* Checked/indeterminate + focus */
  .checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__input:focus-visible ~ .checkbox__control,
  .checkbox.checkbox--indeterminate:not(.checkbox--disabled) .checkbox__input:focus-visible ~ .checkbox__control {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  /* Disabled */
  .checkbox--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .checkbox__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    line-height: var(--toggle-size);
    margin-inline-start: 0.5em;
    user-select: none;
    -webkit-user-select: none;
  }

  :host([required]) .checkbox__label::after {
    content: var(--sl-input-required-content);
    color: var(--sl-input-required-content-color);
    margin-inline-start: var(--sl-input-required-content-offset);
  }
`;var ir=class extends Xe{constructor(){super(...arguments),this.formControlController=new Xr(this,{value:t=>t.checked?t.value||"on":void 0,defaultValue:t=>t.defaultChecked,setValue:(t,e)=>t.checked=e}),this.hasSlotController=new Bi(this,"help-text"),this.hasFocus=!1,this.title="",this.name="",this.size="medium",this.disabled=!1,this.checked=!1,this.indeterminate=!1,this.defaultChecked=!1,this.form="",this.required=!1,this.helpText=""}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.formControlController.updateValidity()}handleClick(){this.checked=!this.checked,this.indeterminate=!1,this.emit("sl-change")}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleInput(){this.emit("sl-input")}handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleStateChange(){this.input.checked=this.checked,this.input.indeterminate=this.indeterminate,this.formControlController.updateValidity()}click(){this.input.click()}focus(t){this.input.focus(t)}blur(){this.input.blur()}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(t){this.input.setCustomValidity(t),this.formControlController.updateValidity()}render(){let t=this.hasSlotController.test("help-text"),e=this.helpText?!0:!!t;return X`
      <div
        class=${et({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-help-text":e})}
      >
        <label
          part="base"
          class=${et({checkbox:!0,"checkbox--checked":this.checked,"checkbox--disabled":this.disabled,"checkbox--focused":this.hasFocus,"checkbox--indeterminate":this.indeterminate,"checkbox--small":this.size==="small","checkbox--medium":this.size==="medium","checkbox--large":this.size==="large"})}
        >
          <input
            class="checkbox__input"
            type="checkbox"
            title=${this.title}
            name=${this.name}
            value=${Se(this.value)}
            .indeterminate=${wo(this.indeterminate)}
            .checked=${wo(this.checked)}
            .disabled=${this.disabled}
            .required=${this.required}
            aria-checked=${this.checked?"true":"false"}
            aria-describedby="help-text"
            @click=${this.handleClick}
            @input=${this.handleInput}
            @invalid=${this.handleInvalid}
            @blur=${this.handleBlur}
            @focus=${this.handleFocus}
          />

          <span
            part="control${this.checked?" control--checked":""}${this.indeterminate?" control--indeterminate":""}"
            class="checkbox__control"
          >
            ${this.checked?X`
                  <sl-icon part="checked-icon" class="checkbox__checked-icon" library="system" name="check"></sl-icon>
                `:""}
            ${!this.checked&&this.indeterminate?X`
                  <sl-icon
                    part="indeterminate-icon"
                    class="checkbox__indeterminate-icon"
                    library="system"
                    name="indeterminate"
                  ></sl-icon>
                `:""}
          </span>

          <div part="label" class="checkbox__label">
            <slot></slot>
          </div>
        </label>

        <div
          aria-hidden=${e?"false":"true"}
          class="form-control__help-text"
          id="help-text"
          part="form-control-help-text"
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};ir.styles=[tt,Gs,Bte];ir.dependencies={"sl-icon":Bt};F([Ne('input[type="checkbox"]')],ir.prototype,"input",2);F([Ie()],ir.prototype,"hasFocus",2);F([U()],ir.prototype,"title",2);F([U()],ir.prototype,"name",2);F([U()],ir.prototype,"value",2);F([U({reflect:!0})],ir.prototype,"size",2);F([U({type:Boolean,reflect:!0})],ir.prototype,"disabled",2);F([U({type:Boolean,reflect:!0})],ir.prototype,"checked",2);F([U({type:Boolean,reflect:!0})],ir.prototype,"indeterminate",2);F([oa("checked")],ir.prototype,"defaultChecked",2);F([U({reflect:!0})],ir.prototype,"form",2);F([U({type:Boolean,reflect:!0})],ir.prototype,"required",2);F([U({attribute:"help-text"})],ir.prototype,"helpText",2);F([je("disabled",{waitUntilFirstUpdate:!0})],ir.prototype,"handleDisabledChange",1);F([je(["checked","indeterminate"],{waitUntilFirstUpdate:!0})],ir.prototype,"handleStateChange",1);ir.define("sl-checkbox");var Nte=t=>X`
	<fieldset
		.id=${t.id}
		class="theme-shoelace widget-checkbox-group widget-fieldset level-${t.level}"
		part="widget-checkbox-group"
	>
		<legend>${t.label}</legend>
		${t.helpText?X`<div class="help-text">${t.helpText}</div>`:lt}

		<!-- NOTE: Unused for now. Too noisy? -->
		<!-- <div class="help-text">${t.itemsLabel}</div> -->

		<div class="widget-checkbox-group__list">
			${t?.enum?.map(e=>X`<sl-checkbox
					.checked=${t.value?.some(i=>i===e)??!1}
					@sl-change=${i=>{let{checked:r}=i.target,n=[];t?.enum?.forEach(s=>{s===e&&r&&n.push(s)}),t.value?.forEach(s=>{s!==e&&n.push(s)}),t.valueChangedCallback?.(n)}}
					.disabled=${t.disabled}
					>${e}</sl-checkbox
				>`)}
		</div>
	</fieldset>
`;var $te=ze`
  :host(:not(:focus-within)) {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    clip: rect(0 0 0 0) !important;
    clip-path: inset(50%) !important;
    border: none !important;
    overflow: hidden !important;
    white-space: nowrap !important;
    padding: 0 !important;
  }
`;var cO=class extends Xe{render(){return X` <slot></slot> `}};cO.styles=[tt,$te];function uE(t,e){function i(n){let s=t.getBoundingClientRect(),o=t.ownerDocument.defaultView,a=s.left+o.scrollX,l=s.top+o.scrollY,u=n.pageX-a,c=n.pageY-l;e?.onMove&&e.onMove(u,c)}function r(){document.removeEventListener("pointermove",i),document.removeEventListener("pointerup",r),e?.onStop&&e.onStop()}document.addEventListener("pointermove",i,{passive:!0}),document.addEventListener("pointerup",r),e?.initialEvent instanceof PointerEvent&&i(e.initialEvent)}var Hte=ze`
  :host {
    display: inline-block;
  }

  .dropdown::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .dropdown[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .dropdown[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .dropdown[data-current-placement^='left']::part(popup) {
    transform-origin: right;
  }

  .dropdown[data-current-placement^='right']::part(popup) {
    transform-origin: left;
  }

  .dropdown__trigger {
    display: block;
  }

  .dropdown__panel {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    box-shadow: var(--sl-shadow-large);
    border-radius: var(--sl-border-radius-medium);
    pointer-events: none;
  }

  .dropdown--open .dropdown__panel {
    display: block;
    pointer-events: all;
  }

  /* When users slot a menu, make sure it conforms to the popup's auto-size */
  ::slotted(sl-menu) {
    max-width: var(--auto-size-available-width) !important;
    max-height: var(--auto-size-available-height) !important;
  }
`;function*Wte(t=document.activeElement){t!=null&&(yield t,"shadowRoot"in t&&t.shadowRoot&&t.shadowRoot.mode!=="closed"&&(yield*uI(Wte(t.shadowRoot.activeElement))))}function Vte(){return[...Wte()].pop()}var Ute=new WeakMap;function jte(t){let e=Ute.get(t);return e||(e=window.getComputedStyle(t,null),Ute.set(t,e)),e}function eTe(t){if(typeof t.checkVisibility=="function")return t.checkVisibility({checkOpacity:!1,checkVisibilityCSS:!0});let e=jte(t);return e.visibility!=="hidden"&&e.display!=="none"}function tTe(t){let e=jte(t),{overflowY:i,overflowX:r}=e;return i==="scroll"||r==="scroll"?!0:i!=="auto"||r!=="auto"?!1:t.scrollHeight>t.clientHeight&&i==="auto"||t.scrollWidth>t.clientWidth&&r==="auto"}function iTe(t){let e=t.tagName.toLowerCase(),i=Number(t.getAttribute("tabindex"));if(t.hasAttribute("tabindex")&&(isNaN(i)||i<=-1)||t.hasAttribute("disabled")||t.closest("[inert]"))return!1;if(e==="input"&&t.getAttribute("type")==="radio"){let s=t.getRootNode(),o=`input[type='radio'][name="${t.getAttribute("name")}"]`,a=s.querySelector(`${o}:checked`);return a?a===t:s.querySelector(o)===t}return eTe(t)?(e==="audio"||e==="video")&&t.hasAttribute("controls")||t.hasAttribute("tabindex")||t.hasAttribute("contenteditable")&&t.getAttribute("contenteditable")!=="false"||["button","input","select","textarea","a","audio","video","summary","iframe"].includes(e)?!0:tTe(t):!1}function qte(t){var e,i;let r=nTe(t),n=(e=r[0])!=null?e:null,s=(i=r[r.length-1])!=null?i:null;return{start:n,end:s}}function rTe(t,e){var i;return((i=t.getRootNode({composed:!0}))==null?void 0:i.host)!==e}function nTe(t){let e=new WeakMap,i=[];function r(n){if(n instanceof Element){if(n.hasAttribute("inert")||n.closest("[inert]")||e.has(n))return;e.set(n,!0),!i.includes(n)&&iTe(n)&&i.push(n),n instanceof HTMLSlotElement&&rTe(n,t)&&n.assignedElements({flatten:!0}).forEach(s=>{r(s)}),n.shadowRoot!==null&&n.shadowRoot.mode==="open"&&r(n.shadowRoot)}for(let s of n.children)r(s)}return r(t),i.sort((n,s)=>{let o=Number(n.getAttribute("tabindex"))||0;return(Number(s.getAttribute("tabindex"))||0)-o})}var Gte=ze`
  :host {
    --arrow-color: var(--sl-color-neutral-1000);
    --arrow-size: 6px;

    /*
     * These properties are computed to account for the arrow's dimensions after being rotated 45º. The constant
     * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating.
     */
    --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071);
    --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size));

    display: contents;
  }

  .popup {
    position: absolute;
    isolation: isolate;
    max-width: var(--auto-size-available-width, none);
    max-height: var(--auto-size-available-height, none);
  }

  .popup--fixed {
    position: fixed;
  }

  .popup:not(.popup--active) {
    display: none;
  }

  .popup__arrow {
    position: absolute;
    width: calc(var(--arrow-size-diagonal) * 2);
    height: calc(var(--arrow-size-diagonal) * 2);
    rotate: 45deg;
    background: var(--arrow-color);
    z-index: -1;
  }

  /* Hover bridge */
  .popup-hover-bridge:not(.popup-hover-bridge--visible) {
    display: none;
  }

  .popup-hover-bridge {
    position: fixed;
    z-index: calc(var(--sl-z-index-dropdown) - 1);
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    clip-path: polygon(
      var(--hover-bridge-top-left-x, 0) var(--hover-bridge-top-left-y, 0),
      var(--hover-bridge-top-right-x, 0) var(--hover-bridge-top-right-y, 0),
      var(--hover-bridge-bottom-right-x, 0) var(--hover-bridge-bottom-right-y, 0),
      var(--hover-bridge-bottom-left-x, 0) var(--hover-bridge-bottom-left-y, 0)
    );
  }
`;var lu=Math.min,bs=Math.max,qx=Math.round,Gx=Math.floor,al=t=>({x:t,y:t}),sTe={left:"right",right:"left",bottom:"top",top:"bottom"},oTe={start:"end",end:"start"};function hE(t,e,i){return bs(t,lu(e,i))}function Dp(t,e){return typeof t=="function"?t(e):t}function Dc(t){return t.split("-")[0]}function Mp(t){return t.split("-")[1]}function hO(t){return t==="x"?"y":"x"}function dE(t){return t==="y"?"height":"width"}var aTe=new Set(["top","bottom"]);function uu(t){return aTe.has(Dc(t))?"y":"x"}function fE(t){return hO(uu(t))}function Kte(t,e,i){i===void 0&&(i=!1);let r=Mp(t),n=fE(t),s=dE(n),o=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=jx(o)),[o,jx(o)]}function Jte(t){let e=jx(t);return[cE(t),e,cE(e)]}function cE(t){return t.replace(/start|end/g,e=>oTe[e])}var Xte=["left","right"],Yte=["right","left"],lTe=["top","bottom"],uTe=["bottom","top"];function cTe(t,e,i){switch(t){case"top":case"bottom":return i?e?Yte:Xte:e?Xte:Yte;case"left":case"right":return e?lTe:uTe;default:return[]}}function Zte(t,e,i,r){let n=Mp(t),s=cTe(Dc(t),i==="start",r);return n&&(s=s.map(o=>o+"-"+n),e&&(s=s.concat(s.map(cE)))),s}function jx(t){return t.replace(/left|right|bottom|top/g,e=>sTe[e])}function hTe(t){return{top:0,right:0,bottom:0,left:0,...t}}function dO(t){return typeof t!="number"?hTe(t):{top:t,right:t,bottom:t,left:t}}function Fp(t){let{x:e,y:i,width:r,height:n}=t;return{width:r,height:n,top:i,left:e,right:e+r,bottom:i+n,x:e,y:i}}function Qte(t,e,i){let{reference:r,floating:n}=t,s=uu(e),o=fE(e),a=dE(o),l=Dc(e),u=s==="y",c=r.x+r.width/2-n.width/2,h=r.y+r.height/2-n.height/2,d=r[a]/2-n[a]/2,p;switch(l){case"top":p={x:c,y:r.y-n.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-n.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Mp(e)){case"start":p[o]-=d*(i&&u?-1:1);break;case"end":p[o]+=d*(i&&u?-1:1);break}return p}var eie=async(t,e,i)=>{let{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:o}=i,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e)),u=await o.getElementRects({reference:t,floating:e,strategy:n}),{x:c,y:h}=Qte(u,r,l),d=r,p={},f=0;for(let m=0;m<a.length;m++){let{name:g,fn:b}=a[m],{x:v,y,data:x,reset:_}=await b({x:c,y:h,initialPlacement:r,placement:d,strategy:n,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});c=v??c,h=y??h,p={...p,[g]:{...p[g],...x}},_&&f<=50&&(f++,typeof _=="object"&&(_.placement&&(d=_.placement),_.rects&&(u=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:n}):_.rects),{x:c,y:h}=Qte(u,d,l)),m=-1)}return{x:c,y:h,placement:d,strategy:n,middlewareData:p}};async function pE(t,e){var i;e===void 0&&(e={});let{x:r,y:n,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:d=!1,padding:p=0}=Dp(e,t),f=dO(p),g=a[d?h==="floating"?"reference":"floating":h],b=Fp(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(g)))==null||i?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=h==="floating"?{x:r,y:n,width:o.floating.width,height:o.floating.height}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),x=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},_=Fp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:y,strategy:l}):v);return{top:(b.top-_.top+f.top)/x.y,bottom:(_.bottom-b.bottom+f.bottom)/x.y,left:(b.left-_.left+f.left)/x.x,right:(_.right-b.right+f.right)/x.x}}var tie=t=>({name:"arrow",options:t,async fn(e){let{x:i,y:r,placement:n,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Dp(t,e)||{};if(u==null)return{};let h=dO(c),d={x:i,y:r},p=fE(n),f=dE(p),m=await o.getDimensions(u),g=p==="y",b=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",x=s.reference[f]+s.reference[p]-d[p]-s.floating[f],_=d[p]-s.reference[p],w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u)),C=w?w[y]:0;(!C||!await(o.isElement==null?void 0:o.isElement(w)))&&(C=a.floating[y]||s.floating[f]);let E=x/2-_/2,A=C/2-m[f]/2-1,D=lu(h[b],A),R=lu(h[v],A),I=D,z=C-m[f]-R,B=C/2-m[f]/2+E,N=hE(I,B,z),H=!l.arrow&&Mp(n)!=null&&B!==N&&s.reference[f]/2-(B<I?D:R)-m[f]/2<0,T=H?B<I?B-I:B-z:0;return{[p]:d[p]+T,data:{[p]:N,centerOffset:B-N-T,...H&&{alignmentOffset:T}},reset:H}}});var iie=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,r;let{placement:n,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=Dp(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};let b=Dc(n),v=uu(a),y=Dc(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(u.floating)),_=d||(y||!m?[jx(a)]:Jte(a)),w=f!=="none";!d&&w&&_.push(...Zte(a,m,f,x));let C=[a,..._],E=await pE(e,g),A=[],D=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&A.push(E[b]),h){let B=Kte(n,o,x);A.push(E[B[0]],E[B[1]])}if(D=[...D,{placement:n,overflows:A}],!A.every(B=>B<=0)){var R,I;let B=(((R=s.flip)==null?void 0:R.index)||0)+1,N=C[B];if(N&&(!(h==="alignment"?v!==uu(N):!1)||D.every(L=>uu(L.placement)===v?L.overflows[0]>0:!0)))return{data:{index:B,overflows:D},reset:{placement:N}};let H=(I=D.filter(T=>T.overflows[0]<=0).sort((T,L)=>T.overflows[1]-L.overflows[1])[0])==null?void 0:I.placement;if(!H)switch(p){case"bestFit":{var z;let T=(z=D.filter(L=>{if(w){let P=uu(L.placement);return P===v||P==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(P=>P>0).reduce((P,W)=>P+W,0)]).sort((L,P)=>L[1]-P[1])[0])==null?void 0:z[0];T&&(H=T);break}case"initialPlacement":H=a;break}if(n!==H)return{reset:{placement:H}}}return{}}}};var dTe=new Set(["left","top"]);async function fTe(t,e){let{placement:i,platform:r,elements:n}=t,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),o=Dc(i),a=Mp(i),l=uu(i)==="y",u=dTe.has(o)?-1:1,c=s&&l?-1:1,h=Dp(e,t),{mainAxis:d,crossAxis:p,alignmentAxis:f}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof f=="number"&&(p=a==="end"?f*-1:f),l?{x:p*c,y:d*u}:{x:d*u,y:p*c}}var rie=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,r;let{x:n,y:s,placement:o,middlewareData:a}=e,l=await fTe(e,t);return o===((i=a.offset)==null?void 0:i.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:n+l.x,y:s+l.y,data:{...l,placement:o}}}}},nie=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:i,y:r,placement:n}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:b,y:v}=g;return{x:b,y:v}}},...l}=Dp(t,e),u={x:i,y:r},c=await pE(e,l),h=uu(Dc(n)),d=hO(h),p=u[d],f=u[h];if(s){let g=d==="y"?"top":"left",b=d==="y"?"bottom":"right",v=p+c[g],y=p-c[b];p=hE(v,p,y)}if(o){let g=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=f+c[g],y=f-c[b];f=hE(v,f,y)}let m=a.fn({...e,[d]:p,[h]:f});return{...m,data:{x:m.x-i,y:m.y-r,enabled:{[d]:s,[h]:o}}}}}};var sie=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var i,r;let{placement:n,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=Dp(t,e),c=await pE(e,u),h=Dc(n),d=Mp(n),p=uu(n)==="y",{width:f,height:m}=s.floating,g,b;h==="top"||h==="bottom"?(g=h,b=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=h,g=d==="end"?"top":"bottom");let v=m-c.top-c.bottom,y=f-c.left-c.right,x=lu(m-c[g],v),_=lu(f-c[b],y),w=!e.middlewareData.shift,C=x,E=_;if((i=e.middlewareData.shift)!=null&&i.enabled.x&&(E=y),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=v),w&&!d){let D=bs(c.left,0),R=bs(c.right,0),I=bs(c.top,0),z=bs(c.bottom,0);p?E=f-2*(D!==0||R!==0?D+R:bs(c.left,c.right)):C=m-2*(I!==0||z!==0?I+z:bs(c.top,c.bottom))}await l({...e,availableWidth:E,availableHeight:C});let A=await o.getDimensions(a.floating);return f!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function mE(){return typeof window<"u"}function Lp(t){return aie(t)?(t.nodeName||"").toLowerCase():"#document"}function Xs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ll(t){var e;return(e=(aie(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function aie(t){return mE()?t instanceof Node||t instanceof Xs(t).Node:!1}function la(t){return mE()?t instanceof Element||t instanceof Xs(t).Element:!1}function ul(t){return mE()?t instanceof HTMLElement||t instanceof Xs(t).HTMLElement:!1}function oie(t){return!mE()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xs(t).ShadowRoot}var pTe=new Set(["inline","contents"]);function e1(t){let{overflow:e,overflowX:i,overflowY:r,display:n}=ua(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!pTe.has(n)}var mTe=new Set(["table","td","th"]);function lie(t){return mTe.has(Lp(t))}var gTe=[":popover-open",":modal"];function Xx(t){return gTe.some(e=>{try{return t.matches(e)}catch{return!1}})}var bTe=["transform","translate","scale","rotate","perspective"],vTe=["transform","translate","scale","rotate","perspective","filter"],yTe=["paint","layout","strict","content"];function gE(t){let e=bE(),i=la(t)?ua(t):t;return bTe.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||vTe.some(r=>(i.willChange||"").includes(r))||yTe.some(r=>(i.contain||"").includes(r))}function uie(t){let e=Mc(t);for(;ul(e)&&!Op(e);){if(gE(e))return e;if(Xx(e))return null;e=Mc(e)}return null}function bE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}var xTe=new Set(["html","body","#document"]);function Op(t){return xTe.has(Lp(t))}function ua(t){return Xs(t).getComputedStyle(t)}function Yx(t){return la(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Mc(t){if(Lp(t)==="html")return t;let e=t.assignedSlot||t.parentNode||oie(t)&&t.host||ll(t);return oie(e)?e.host:e}function cie(t){let e=Mc(t);return Op(e)?t.ownerDocument?t.ownerDocument.body:t.body:ul(e)&&e1(e)?e:cie(e)}function Qg(t,e,i){var r;e===void 0&&(e=[]),i===void 0&&(i=!0);let n=cie(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),o=Xs(n);if(s){let a=vE(o);return e.concat(o,o.visualViewport||[],e1(n)?n:[],a&&i?Qg(a):[])}return e.concat(n,Qg(n,[],i))}function vE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function pie(t){let e=ua(t),i=parseFloat(e.width)||0,r=parseFloat(e.height)||0,n=ul(t),s=n?t.offsetWidth:i,o=n?t.offsetHeight:r,a=qx(i)!==s||qx(r)!==o;return a&&(i=s,r=o),{width:i,height:r,$:a}}function pO(t){return la(t)?t:t.contextElement}function t1(t){let e=pO(t);if(!ul(e))return al(1);let i=e.getBoundingClientRect(),{width:r,height:n,$:s}=pie(e),o=(s?qx(i.width):i.width)/r,a=(s?qx(i.height):i.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}var wTe=al(0);function mie(t){let e=Xs(t);return!bE()||!e.visualViewport?wTe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _Te(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==Xs(t)?!1:e}function Pp(t,e,i,r){e===void 0&&(e=!1),i===void 0&&(i=!1);let n=t.getBoundingClientRect(),s=pO(t),o=al(1);e&&(r?la(r)&&(o=t1(r)):o=t1(t));let a=_Te(s,i,r)?mie(s):al(0),l=(n.left+a.x)/o.x,u=(n.top+a.y)/o.y,c=n.width/o.x,h=n.height/o.y;if(s){let d=Xs(s),p=r&&la(r)?Xs(r):r,f=d,m=vE(f);for(;m&&r&&p!==f;){let g=t1(m),b=m.getBoundingClientRect(),v=ua(m),y=b.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,x=b.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,h*=g.y,l+=y,u+=x,f=Xs(m),m=vE(f)}}return Fp({width:c,height:h,x:l,y:u})}function yE(t,e){let i=Yx(t).scrollLeft;return e?e.left+i:Pp(ll(t)).left+i}function gie(t,e){let i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-yE(t,i),n=i.top+e.scrollTop;return{x:r,y:n}}function CTe(t){let{elements:e,rect:i,offsetParent:r,strategy:n}=t,s=n==="fixed",o=ll(r),a=e?Xx(e.floating):!1;if(r===o||a&&s)return i;let l={scrollLeft:0,scrollTop:0},u=al(1),c=al(0),h=ul(r);if((h||!h&&!s)&&((Lp(r)!=="body"||e1(o))&&(l=Yx(r)),ul(r))){let p=Pp(r);u=t1(r),c.x=p.x+r.clientLeft,c.y=p.y+r.clientTop}let d=o&&!h&&!s?gie(o,l):al(0);return{width:i.width*u.x,height:i.height*u.y,x:i.x*u.x-l.scrollLeft*u.x+c.x+d.x,y:i.y*u.y-l.scrollTop*u.y+c.y+d.y}}function STe(t){return Array.from(t.getClientRects())}function ETe(t){let e=ll(t),i=Yx(t),r=t.ownerDocument.body,n=bs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=bs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight),o=-i.scrollLeft+yE(t),a=-i.scrollTop;return ua(r).direction==="rtl"&&(o+=bs(e.clientWidth,r.clientWidth)-n),{width:n,height:s,x:o,y:a}}var hie=25;function kTe(t,e){let i=Xs(t),r=ll(t),n=i.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;let c=bE();(!c||c&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}let u=yE(r);if(u<=0){let c=r.ownerDocument,h=c.body,d=getComputedStyle(h),p=c.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,f=Math.abs(r.clientWidth-h.clientWidth-p);f<=hie&&(s-=f)}else u<=hie&&(s+=u);return{width:s,height:o,x:a,y:l}}var ATe=new Set(["absolute","fixed"]);function TTe(t,e){let i=Pp(t,!0,e==="fixed"),r=i.top+t.clientTop,n=i.left+t.clientLeft,s=ul(t)?t1(t):al(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=n*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function die(t,e,i){let r;if(e==="viewport")r=kTe(t,i);else if(e==="document")r=ETe(ll(t));else if(la(e))r=TTe(e,i);else{let n=mie(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return Fp(r)}function bie(t,e){let i=Mc(t);return i===e||!la(i)||Op(i)?!1:ua(i).position==="fixed"||bie(i,e)}function RTe(t,e){let i=e.get(t);if(i)return i;let r=Qg(t,[],!1).filter(a=>la(a)&&Lp(a)!=="body"),n=null,s=ua(t).position==="fixed",o=s?Mc(t):t;for(;la(o)&&!Op(o);){let a=ua(o),l=gE(o);!l&&a.position==="fixed"&&(n=null),(s?!l&&!n:!l&&a.position==="static"&&!!n&&ATe.has(n.position)||e1(o)&&!l&&bie(t,o))?r=r.filter(c=>c!==o):n=a,o=Mc(o)}return e.set(t,r),r}function DTe(t){let{element:e,boundary:i,rootBoundary:r,strategy:n}=t,o=[...i==="clippingAncestors"?Xx(e)?[]:RTe(e,this._c):[].concat(i),r],a=o[0],l=o.reduce((u,c)=>{let h=die(e,c,n);return u.top=bs(h.top,u.top),u.right=lu(h.right,u.right),u.bottom=lu(h.bottom,u.bottom),u.left=bs(h.left,u.left),u},die(e,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function MTe(t){let{width:e,height:i}=pie(t);return{width:e,height:i}}function FTe(t,e,i){let r=ul(e),n=ll(e),s=i==="fixed",o=Pp(t,!0,s,e),a={scrollLeft:0,scrollTop:0},l=al(0);function u(){l.x=yE(n)}if(r||!r&&!s)if((Lp(e)!=="body"||e1(n))&&(a=Yx(e)),r){let p=Pp(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else n&&u();s&&!r&&n&&u();let c=n&&!r&&!s?gie(n,a):al(0),h=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:h,y:d,width:o.width,height:o.height}}function fO(t){return ua(t).position==="static"}function fie(t,e){if(!ul(t)||ua(t).position==="fixed")return null;if(e)return e(t);let i=t.offsetParent;return ll(t)===i&&(i=i.ownerDocument.body),i}function vie(t,e){let i=Xs(t);if(Xx(t))return i;if(!ul(t)){let n=Mc(t);for(;n&&!Op(n);){if(la(n)&&!fO(n))return n;n=Mc(n)}return i}let r=fie(t,e);for(;r&&lie(r)&&fO(r);)r=fie(r,e);return r&&Op(r)&&fO(r)&&!gE(r)?i:r||uie(t)||i}var LTe=async function(t){let e=this.getOffsetParent||vie,i=this.getDimensions,r=await i(t.floating);return{reference:FTe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function OTe(t){return ua(t).direction==="rtl"}var Kx={convertOffsetParentRelativeRectToViewportRelativeRect:CTe,getDocumentElement:ll,getClippingRect:DTe,getOffsetParent:vie,getElementRects:LTe,getClientRects:STe,getDimensions:MTe,getScale:t1,isElement:la,isRTL:OTe};function yie(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function PTe(t,e){let i=null,r,n=ll(t);function s(){var a;clearTimeout(r),(a=i)==null||a.disconnect(),i=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();let u=t.getBoundingClientRect(),{left:c,top:h,width:d,height:p}=u;if(a||e(),!d||!p)return;let f=Gx(h),m=Gx(n.clientWidth-(c+d)),g=Gx(n.clientHeight-(h+p)),b=Gx(c),y={rootMargin:-f+"px "+-m+"px "+-g+"px "+-b+"px",threshold:bs(0,lu(1,l))||1},x=!0;function _(w){let C=w[0].intersectionRatio;if(C!==l){if(!x)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!yie(u,t.getBoundingClientRect())&&o(),x=!1}try{i=new IntersectionObserver(_,{...y,root:n.ownerDocument})}catch{i=new IntersectionObserver(_,y)}i.observe(t)}return o(!0),s}function xie(t,e,i,r){r===void 0&&(r={});let{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=pO(t),c=n||s?[...u?Qg(u):[],...Qg(e)]:[];c.forEach(b=>{n&&b.addEventListener("scroll",i,{passive:!0}),s&&b.addEventListener("resize",i)});let h=u&&a?PTe(u,i):null,d=-1,p=null;o&&(p=new ResizeObserver(b=>{let[v]=b;v&&v.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var y;(y=p)==null||y.observe(e)})),i()}),u&&!l&&p.observe(u),p.observe(e));let f,m=l?Pp(t):null;l&&g();function g(){let b=Pp(t);m&&!yie(m,b)&&i(),m=b,f=requestAnimationFrame(g)}return i(),()=>{var b;c.forEach(v=>{n&&v.removeEventListener("scroll",i),s&&v.removeEventListener("resize",i)}),h?.(),(b=p)==null||b.disconnect(),p=null,l&&cancelAnimationFrame(f)}}var wie=rie;var _ie=nie,Cie=iie,mO=sie;var Sie=tie;var Eie=(t,e,i)=>{let r=new Map,n={platform:Kx,...i},s={...n.platform,_c:r};return eie(t,e,{...n,platform:s})};function zTe(){return typeof window<"u"}function kie(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ITe(t){return zTe()?t instanceof Element||t instanceof kie(t).Element:!1}var BTe=["transform","translate","scale","rotate","perspective"],NTe=["transform","translate","scale","rotate","perspective","filter"],$Te=["paint","layout","strict","content"];function Aie(t){let e=HTe(),i=ITe(t)?UTe(t):t;return BTe.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||NTe.some(r=>(i.willChange||"").includes(r))||$Te.some(r=>(i.contain||"").includes(r))}function HTe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function UTe(t){return kie(t).getComputedStyle(t)}function Tie(t){return WTe(t)}function gO(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function WTe(t){for(let e=t;e;e=gO(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=gO(t);e;e=gO(e)){if(!(e instanceof Element))continue;let i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||Aie(i)||e.tagName==="BODY"))return e}return null}function VTe(t){return t!==null&&typeof t=="object"&&"getBoundingClientRect"in t&&("contextElement"in t?t.contextElement instanceof Element:!0)}var Zt=class extends Xe{constructor(){super(...arguments),this.localize=new ei(this),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0,this.hoverBridge=!1,this.updateHoverBridge=()=>{if(this.hoverBridge&&this.anchorEl){let t=this.anchorEl.getBoundingClientRect(),e=this.popup.getBoundingClientRect(),i=this.placement.includes("top")||this.placement.includes("bottom"),r=0,n=0,s=0,o=0,a=0,l=0,u=0,c=0;i?t.top<e.top?(r=t.left,n=t.bottom,s=t.right,o=t.bottom,a=e.left,l=e.top,u=e.right,c=e.top):(r=e.left,n=e.bottom,s=e.right,o=e.bottom,a=t.left,l=t.top,u=t.right,c=t.top):t.left<e.left?(r=t.right,n=t.top,s=e.left,o=e.top,a=t.right,l=t.bottom,u=e.left,c=e.bottom):(r=e.right,n=e.top,s=t.left,o=t.top,a=e.right,l=e.bottom,u=t.left,c=t.bottom),this.style.setProperty("--hover-bridge-top-left-x",`${r}px`),this.style.setProperty("--hover-bridge-top-left-y",`${n}px`),this.style.setProperty("--hover-bridge-top-right-x",`${s}px`),this.style.setProperty("--hover-bridge-top-right-y",`${o}px`),this.style.setProperty("--hover-bridge-bottom-left-x",`${a}px`),this.style.setProperty("--hover-bridge-bottom-left-y",`${l}px`),this.style.setProperty("--hover-bridge-bottom-right-x",`${u}px`),this.style.setProperty("--hover-bridge-bottom-right-y",`${c}px`)}}}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}async updated(t){super.updated(t),t.has("active")&&(this.active?this.start():this.stop()),t.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&typeof this.anchor=="string"){let t=this.getRootNode();this.anchorEl=t.getElementById(this.anchor)}else this.anchor instanceof Element||VTe(this.anchor)?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),this.anchorEl&&this.active&&this.start()}start(){!this.anchorEl||!this.active||(this.cleanup=xie(this.anchorEl,this.popup,()=>{this.reposition()}))}async stop(){return new Promise(t=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame(()=>t())):t()})}reposition(){if(!this.active||!this.anchorEl)return;let t=[wie({mainAxis:this.distance,crossAxis:this.skidding})];this.sync?t.push(mO({apply:({rects:i})=>{let r=this.sync==="width"||this.sync==="both",n=this.sync==="height"||this.sync==="both";this.popup.style.width=r?`${i.reference.width}px`:"",this.popup.style.height=n?`${i.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&t.push(Cie({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:this.flipFallbackStrategy==="best-fit"?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&t.push(_ie({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?t.push(mO({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:i,availableHeight:r})=>{this.autoSize==="vertical"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-height",`${r}px`):this.style.removeProperty("--auto-size-available-height"),this.autoSize==="horizontal"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-width",`${i}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&t.push(Sie({element:this.arrowEl,padding:this.arrowPadding}));let e=this.strategy==="absolute"?i=>Kx.getOffsetParent(i,Tie):Kx.getOffsetParent;Eie(this.anchorEl,this.popup,{placement:this.placement,middleware:t,strategy:this.strategy,platform:_u(_s({},Kx),{getOffsetParent:e})}).then(({x:i,y:r,middlewareData:n,placement:s})=>{let o=this.localize.dir()==="rtl",a={top:"bottom",right:"left",bottom:"top",left:"right"}[s.split("-")[0]];if(this.setAttribute("data-current-placement",s),Object.assign(this.popup.style,{left:`${i}px`,top:`${r}px`}),this.arrow){let l=n.arrow.x,u=n.arrow.y,c="",h="",d="",p="";if(this.arrowPlacement==="start"){let f=typeof l=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";c=typeof u=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",h=o?f:"",p=o?"":f}else if(this.arrowPlacement==="end"){let f=typeof l=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";h=o?"":f,p=o?f:"",d=typeof u=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else this.arrowPlacement==="center"?(p=typeof l=="number"?"calc(50% - var(--arrow-size-diagonal))":"",c=typeof u=="number"?"calc(50% - var(--arrow-size-diagonal))":""):(p=typeof l=="number"?`${l}px`:"",c=typeof u=="number"?`${u}px`:"");Object.assign(this.arrowEl.style,{top:c,right:h,bottom:d,left:p,[a]:"calc(var(--arrow-size-diagonal) * -1)"})}}),requestAnimationFrame(()=>this.updateHoverBridge()),this.emit("sl-reposition")}render(){return X`
      <slot name="anchor" @slotchange=${this.handleAnchorChange}></slot>

      <span
        part="hover-bridge"
        class=${et({"popup-hover-bridge":!0,"popup-hover-bridge--visible":this.hoverBridge&&this.active})}
      ></span>

      <div
        part="popup"
        class=${et({popup:!0,"popup--active":this.active,"popup--fixed":this.strategy==="fixed","popup--has-arrow":this.arrow})}
      >
        <slot></slot>
        ${this.arrow?X`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}
      </div>
    `}};Zt.styles=[tt,Gte];F([Ne(".popup")],Zt.prototype,"popup",2);F([Ne(".popup__arrow")],Zt.prototype,"arrowEl",2);F([U()],Zt.prototype,"anchor",2);F([U({type:Boolean,reflect:!0})],Zt.prototype,"active",2);F([U({reflect:!0})],Zt.prototype,"placement",2);F([U({reflect:!0})],Zt.prototype,"strategy",2);F([U({type:Number})],Zt.prototype,"distance",2);F([U({type:Number})],Zt.prototype,"skidding",2);F([U({type:Boolean})],Zt.prototype,"arrow",2);F([U({attribute:"arrow-placement"})],Zt.prototype,"arrowPlacement",2);F([U({attribute:"arrow-padding",type:Number})],Zt.prototype,"arrowPadding",2);F([U({type:Boolean})],Zt.prototype,"flip",2);F([U({attribute:"flip-fallback-placements",converter:{fromAttribute:t=>t.split(" ").map(e=>e.trim()).filter(e=>e!==""),toAttribute:t=>t.join(" ")}})],Zt.prototype,"flipFallbackPlacements",2);F([U({attribute:"flip-fallback-strategy"})],Zt.prototype,"flipFallbackStrategy",2);F([U({type:Object})],Zt.prototype,"flipBoundary",2);F([U({attribute:"flip-padding",type:Number})],Zt.prototype,"flipPadding",2);F([U({type:Boolean})],Zt.prototype,"shift",2);F([U({type:Object})],Zt.prototype,"shiftBoundary",2);F([U({attribute:"shift-padding",type:Number})],Zt.prototype,"shiftPadding",2);F([U({attribute:"auto-size"})],Zt.prototype,"autoSize",2);F([U()],Zt.prototype,"sync",2);F([U({type:Object})],Zt.prototype,"autoSizeBoundary",2);F([U({attribute:"auto-size-padding",type:Number})],Zt.prototype,"autoSizePadding",2);F([U({attribute:"hover-bridge",type:Boolean})],Zt.prototype,"hoverBridge",2);var Die=new Map,jTe=new WeakMap;function qTe(t){return t??{keyframes:[],options:{duration:0}}}function Rie(t,e){return e.toLowerCase()==="rtl"?{keyframes:t.rtlKeyframes||t.keyframes,options:t.options}:t}function Fc(t,e){Die.set(t,qTe(e))}function Lc(t,e,i){let r=jTe.get(t);if(r?.[e])return Rie(r[e],i.dir);let n=Die.get(e);return n?Rie(n,i.dir):{keyframes:[],options:{duration:0}}}function i1(t,e){return new Promise(i=>{function r(n){n.target===t&&(t.removeEventListener(e,r),i())}t.addEventListener(e,r)})}function Oc(t,e,i){return new Promise(r=>{if(i?.duration===1/0)throw new Error("Promise-based animations must be finite.");let n=t.animate(e,_u(_s({},i),{duration:GTe()?0:i.duration}));n.addEventListener("cancel",r,{once:!0}),n.addEventListener("finish",r,{once:!0})})}function GTe(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function Pc(t){return Promise.all(t.getAnimations().map(e=>new Promise(i=>{e.cancel(),requestAnimationFrame(i)})))}function bO(t,e){return t.map(i=>_u(_s({},i),{height:i.height==="auto"?`${e}px`:i.height}))}var bn=class extends Xe{constructor(){super(...arguments),this.localize=new ei(this),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1,this.sync=void 0,this.handleKeyDown=t=>{this.open&&t.key==="Escape"&&(t.stopPropagation(),this.hide(),this.focusOnTrigger())},this.handleDocumentKeyDown=t=>{var e;if(t.key==="Escape"&&this.open&&!this.closeWatcher){t.stopPropagation(),this.focusOnTrigger(),this.hide();return}if(t.key==="Tab"){if(this.open&&((e=document.activeElement)==null?void 0:e.tagName.toLowerCase())==="sl-menu-item"){t.preventDefault(),this.hide(),this.focusOnTrigger();return}let i=(r,n)=>{if(!r)return null;let s=r.closest(n);if(s)return s;let o=r.getRootNode();return o instanceof ShadowRoot?i(o.host,n):null};setTimeout(()=>{var r;let n=((r=this.containingElement)==null?void 0:r.getRootNode())instanceof ShadowRoot?Vte():document.activeElement;(!this.containingElement||i(n,this.containingElement.tagName.toLowerCase())!==this.containingElement)&&this.hide()})}},this.handleDocumentMouseDown=t=>{let e=t.composedPath();this.containingElement&&!e.includes(this.containingElement)&&this.hide()},this.handlePanelSelect=t=>{let e=t.target;!this.stayOpenOnSelect&&e.tagName.toLowerCase()==="sl-menu"&&(this.hide(),this.focusOnTrigger())}}connectedCallback(){super.connectedCallback(),this.containingElement||(this.containingElement=this)}firstUpdated(){this.panel.hidden=!this.open,this.open&&(this.addOpenListeners(),this.popup.active=!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide()}focusOnTrigger(){let t=this.trigger.assignedElements({flatten:!0})[0];typeof t?.focus=="function"&&t.focus()}getMenu(){return this.panel.assignedElements({flatten:!0}).find(t=>t.tagName.toLowerCase()==="sl-menu")}handleTriggerClick(){this.open?this.hide():(this.show(),this.focusOnTrigger())}async handleTriggerKeyDown(t){if([" ","Enter"].includes(t.key)){t.preventDefault(),this.handleTriggerClick();return}let e=this.getMenu();if(e){let i=e.getAllItems(),r=i[0],n=i[i.length-1];["ArrowDown","ArrowUp","Home","End"].includes(t.key)&&(t.preventDefault(),this.open||(this.show(),await this.updateComplete),i.length>0&&this.updateComplete.then(()=>{(t.key==="ArrowDown"||t.key==="Home")&&(e.setCurrentItem(r),r.focus()),(t.key==="ArrowUp"||t.key==="End")&&(e.setCurrentItem(n),n.focus())}))}}handleTriggerKeyUp(t){t.key===" "&&t.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){let e=this.trigger.assignedElements({flatten:!0}).find(r=>qte(r).start),i;if(e){switch(e.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":i=e.button;break;default:i=e}i.setAttribute("aria-haspopup","true"),i.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,i1(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,i1(this,"sl-after-hide")}reposition(){this.popup.reposition()}addOpenListeners(){var t;this.panel.addEventListener("sl-select",this.handlePanelSelect),"CloseWatcher"in window?((t=this.closeWatcher)==null||t.destroy(),this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>{this.hide(),this.focusOnTrigger()}):this.panel.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){var t;this.panel&&(this.panel.removeEventListener("sl-select",this.handlePanelSelect),this.panel.removeEventListener("keydown",this.handleKeyDown)),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown),(t=this.closeWatcher)==null||t.destroy()}async handleOpenChange(){if(this.disabled){this.open=!1;return}if(this.updateAccessibleTrigger(),this.open){this.emit("sl-show"),this.addOpenListeners(),await Pc(this),this.panel.hidden=!1,this.popup.active=!0;let{keyframes:t,options:e}=Lc(this,"dropdown.show",{dir:this.localize.dir()});await Oc(this.popup.popup,t,e),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await Pc(this);let{keyframes:t,options:e}=Lc(this,"dropdown.hide",{dir:this.localize.dir()});await Oc(this.popup.popup,t,e),this.panel.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}render(){return X`
      <sl-popup
        part="base"
        exportparts="popup:base__popup"
        id="dropdown"
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        auto-size="vertical"
        auto-size-padding="10"
        sync=${Se(this.sync?this.sync:void 0)}
        class=${et({dropdown:!0,"dropdown--open":this.open})}
      >
        <slot
          name="trigger"
          slot="anchor"
          part="trigger"
          class="dropdown__trigger"
          @click=${this.handleTriggerClick}
          @keydown=${this.handleTriggerKeyDown}
          @keyup=${this.handleTriggerKeyUp}
          @slotchange=${this.handleTriggerSlotChange}
        ></slot>

        <div aria-hidden=${this.open?"false":"true"} aria-labelledby="dropdown">
          <slot part="panel" class="dropdown__panel"></slot>
        </div>
      </sl-popup>
    `}};bn.styles=[tt,Hte];bn.dependencies={"sl-popup":Zt};F([Ne(".dropdown")],bn.prototype,"popup",2);F([Ne(".dropdown__trigger")],bn.prototype,"trigger",2);F([Ne(".dropdown__panel")],bn.prototype,"panel",2);F([U({type:Boolean,reflect:!0})],bn.prototype,"open",2);F([U({reflect:!0})],bn.prototype,"placement",2);F([U({type:Boolean,reflect:!0})],bn.prototype,"disabled",2);F([U({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],bn.prototype,"stayOpenOnSelect",2);F([U({attribute:!1})],bn.prototype,"containingElement",2);F([U({type:Number})],bn.prototype,"distance",2);F([U({type:Number})],bn.prototype,"skidding",2);F([U({type:Boolean})],bn.prototype,"hoist",2);F([U({reflect:!0})],bn.prototype,"sync",2);F([je("open",{waitUntilFirstUpdate:!0})],bn.prototype,"handleOpenChange",1);Fc("dropdown.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}});Fc("dropdown.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}});var Mie=ze`
  :host {
    --grid-width: 280px;
    --grid-height: 200px;
    --grid-handle-size: 16px;
    --slider-height: 15px;
    --slider-handle-size: 17px;
    --swatch-size: 25px;

    display: inline-block;
  }

  .color-picker {
    width: var(--grid-width);
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    color: var(--color);
    background-color: var(--sl-panel-background-color);
    border-radius: var(--sl-border-radius-medium);
    user-select: none;
    -webkit-user-select: none;
  }

  .color-picker--inline {
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
  }

  .color-picker--inline:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-picker__grid {
    position: relative;
    height: var(--grid-height);
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 100%),
      linear-gradient(to right, #fff 0%, rgba(255, 255, 255, 0) 100%);
    border-top-left-radius: var(--sl-border-radius-medium);
    border-top-right-radius: var(--sl-border-radius-medium);
    cursor: crosshair;
    forced-color-adjust: none;
  }

  .color-picker__grid-handle {
    position: absolute;
    width: var(--grid-handle-size);
    height: var(--grid-handle-size);
    border-radius: 50%;
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25);
    border: solid 2px white;
    margin-top: calc(var(--grid-handle-size) / -2);
    margin-left: calc(var(--grid-handle-size) / -2);
    transition: var(--sl-transition-fast) scale;
  }

  .color-picker__grid-handle--dragging {
    cursor: none;
    scale: 1.5;
  }

  .color-picker__grid-handle:focus-visible {
    outline: var(--sl-focus-ring);
  }

  .color-picker__controls {
    padding: var(--sl-spacing-small);
    display: flex;
    align-items: center;
  }

  .color-picker__sliders {
    flex: 1 1 auto;
  }

  .color-picker__slider {
    position: relative;
    height: var(--slider-height);
    border-radius: var(--sl-border-radius-pill);
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.2);
    forced-color-adjust: none;
  }

  .color-picker__slider:not(:last-of-type) {
    margin-bottom: var(--sl-spacing-small);
  }

  .color-picker__slider-handle {
    position: absolute;
    top: calc(50% - var(--slider-handle-size) / 2);
    width: var(--slider-handle-size);
    height: var(--slider-handle-size);
    background-color: white;
    border-radius: 50%;
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25);
    margin-left: calc(var(--slider-handle-size) / -2);
  }

  .color-picker__slider-handle:focus-visible {
    outline: var(--sl-focus-ring);
  }

  .color-picker__hue {
    background-image: linear-gradient(
      to right,
      rgb(255, 0, 0) 0%,
      rgb(255, 255, 0) 17%,
      rgb(0, 255, 0) 33%,
      rgb(0, 255, 255) 50%,
      rgb(0, 0, 255) 67%,
      rgb(255, 0, 255) 83%,
      rgb(255, 0, 0) 100%
    );
  }

  .color-picker__alpha .color-picker__alpha-gradient {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: inherit;
  }

  .color-picker__preview {
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    width: 2.25rem;
    height: 2.25rem;
    border: none;
    border-radius: var(--sl-border-radius-circle);
    background: none;
    margin-left: var(--sl-spacing-small);
    cursor: copy;
    forced-color-adjust: none;
  }

  .color-picker__preview:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.2);

    /* We use a custom property in lieu of currentColor because of https://bugs.webkit.org/show_bug.cgi?id=216780 */
    background-color: var(--preview-color);
  }

  .color-picker__preview:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-picker__preview-color {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: solid 1px rgba(0, 0, 0, 0.125);
  }

  .color-picker__preview-color--copied {
    animation: pulse 0.75s;
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 var(--sl-color-primary-500);
    }
    70% {
      box-shadow: 0 0 0 0.5rem transparent;
    }
    100% {
      box-shadow: 0 0 0 0 transparent;
    }
  }

  .color-picker__user-input {
    display: flex;
    padding: 0 var(--sl-spacing-small) var(--sl-spacing-small) var(--sl-spacing-small);
  }

  .color-picker__user-input sl-input {
    min-width: 0; /* fix input width in Safari */
    flex: 1 1 auto;
  }

  .color-picker__user-input sl-button-group {
    margin-left: var(--sl-spacing-small);
  }

  .color-picker__user-input sl-button {
    min-width: 3.25rem;
    max-width: 3.25rem;
    font-size: 1rem;
  }

  .color-picker__swatches {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    grid-gap: 0.5rem;
    justify-items: center;
    border-top: solid 1px var(--sl-color-neutral-200);
    padding: var(--sl-spacing-small);
    forced-color-adjust: none;
  }

  .color-picker__swatch {
    position: relative;
    width: var(--swatch-size);
    height: var(--swatch-size);
    border-radius: var(--sl-border-radius-small);
  }

  .color-picker__swatch .color-picker__swatch-color {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: solid 1px rgba(0, 0, 0, 0.125);
    border-radius: inherit;
    cursor: pointer;
  }

  .color-picker__swatch:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-picker__transparent-bg {
    background-image: linear-gradient(45deg, var(--sl-color-neutral-300) 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, var(--sl-color-neutral-300) 75%),
      linear-gradient(45deg, transparent 75%, var(--sl-color-neutral-300) 75%),
      linear-gradient(45deg, var(--sl-color-neutral-300) 25%, transparent 25%);
    background-size: 10px 10px;
    background-position:
      0 0,
      0 0,
      -5px -5px,
      5px 5px;
  }

  .color-picker--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .color-picker--disabled .color-picker__grid,
  .color-picker--disabled .color-picker__grid-handle,
  .color-picker--disabled .color-picker__slider,
  .color-picker--disabled .color-picker__slider-handle,
  .color-picker--disabled .color-picker__preview,
  .color-picker--disabled .color-picker__swatch,
  .color-picker--disabled .color-picker__swatch-color {
    pointer-events: none;
  }

  /*
   * Color dropdown
   */

  .color-dropdown::part(panel) {
    max-height: none;
    background-color: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    overflow: visible;
  }

  .color-dropdown__trigger {
    display: inline-block;
    position: relative;
    background-color: transparent;
    border: none;
    cursor: pointer;
    forced-color-adjust: none;
  }

  .color-dropdown__trigger.color-dropdown__trigger--small {
    width: var(--sl-input-height-small);
    height: var(--sl-input-height-small);
    border-radius: var(--sl-border-radius-circle);
  }

  .color-dropdown__trigger.color-dropdown__trigger--medium {
    width: var(--sl-input-height-medium);
    height: var(--sl-input-height-medium);
    border-radius: var(--sl-border-radius-circle);
  }

  .color-dropdown__trigger.color-dropdown__trigger--large {
    width: var(--sl-input-height-large);
    height: var(--sl-input-height-large);
    border-radius: var(--sl-border-radius-circle);
  }

  .color-dropdown__trigger:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    background-color: currentColor;
    box-shadow:
      inset 0 0 0 2px var(--sl-input-border-color),
      inset 0 0 0 4px var(--sl-color-neutral-0);
  }

  .color-dropdown__trigger--empty:before {
    background-color: transparent;
  }

  .color-dropdown__trigger:focus-visible {
    outline: none;
  }

  .color-dropdown__trigger:focus-visible:not(.color-dropdown__trigger--disabled) {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-dropdown__trigger.color-dropdown__trigger--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;function vn(t,e,i){let r=n=>Object.is(n,-0)?0:n;return t<e?r(e):t>i?r(i):r(t)}var Fie=ze`
  :host {
    --track-width: 2px;
    --track-color: rgb(128 128 128 / 25%);
    --indicator-color: var(--sl-color-primary-600);
    --speed: 2s;

    display: inline-flex;
    width: 1em;
    height: 1em;
    flex: none;
  }

  .spinner {
    flex: 1 1 auto;
    height: 100%;
    width: 100%;
  }

  .spinner__track,
  .spinner__indicator {
    fill: none;
    stroke-width: var(--track-width);
    r: calc(0.5em - var(--track-width) / 2);
    cx: 0.5em;
    cy: 0.5em;
    transform-origin: 50% 50%;
  }

  .spinner__track {
    stroke: var(--track-color);
    transform-origin: 0% 0%;
  }

  .spinner__indicator {
    stroke: var(--indicator-color);
    stroke-linecap: round;
    stroke-dasharray: 150% 75%;
    animation: spin var(--speed) linear infinite;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
      stroke-dasharray: 0.05em, 3em;
    }

    50% {
      transform: rotate(450deg);
      stroke-dasharray: 1.375em, 1.375em;
    }

    100% {
      transform: rotate(1080deg);
      stroke-dasharray: 0.05em, 3em;
    }
  }
`;var Jx=class extends Xe{constructor(){super(...arguments),this.localize=new ei(this)}render(){return X`
      <svg part="base" class="spinner" role="progressbar" aria-label=${this.localize.term("loading")}>
        <circle class="spinner__track"></circle>
        <circle class="spinner__indicator"></circle>
      </svg>
    `}};Jx.styles=[tt,Fie];var Vt=class extends Xe{constructor(){super(...arguments),this.formControlController=new Xr(this,{assumeInteractionOn:["click"]}),this.hasSlotController=new Bi(this,"[default]","prefix","suffix"),this.localize=new ei(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.variant="default",this.size="medium",this.caret=!1,this.disabled=!1,this.loading=!1,this.outline=!1,this.pill=!1,this.circle=!1,this.type="button",this.name="",this.value="",this.href="",this.rel="noreferrer noopener"}get validity(){return this.isButton()?this.button.validity:Ug}get validationMessage(){return this.isButton()?this.button.validationMessage:""}firstUpdated(){this.isButton()&&this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(){this.type==="submit"&&this.formControlController.submit(this),this.type==="reset"&&this.formControlController.reset(this)}handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}isButton(){return!this.href}isLink(){return!!this.href}handleDisabledChange(){this.isButton()&&this.formControlController.setValidity(this.disabled)}click(){this.button.click()}focus(t){this.button.focus(t)}blur(){this.button.blur()}checkValidity(){return this.isButton()?this.button.checkValidity():!0}getForm(){return this.formControlController.getForm()}reportValidity(){return this.isButton()?this.button.reportValidity():!0}setCustomValidity(t){this.isButton()&&(this.button.setCustomValidity(t),this.formControlController.updateValidity())}render(){let t=this.isLink(),e=t?Zg`a`:Zg`button`;return bd`
      <${e}
        part="base"
        class=${et({button:!0,"button--default":this.variant==="default","button--primary":this.variant==="primary","button--success":this.variant==="success","button--neutral":this.variant==="neutral","button--warning":this.variant==="warning","button--danger":this.variant==="danger","button--text":this.variant==="text","button--small":this.size==="small","button--medium":this.size==="medium","button--large":this.size==="large","button--caret":this.caret,"button--circle":this.circle,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--loading":this.loading,"button--standard":!this.outline,"button--outline":this.outline,"button--pill":this.pill,"button--rtl":this.localize.dir()==="rtl","button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
        ?disabled=${Se(t?void 0:this.disabled)}
        type=${Se(t?void 0:this.type)}
        title=${this.title}
        name=${Se(t?void 0:this.name)}
        value=${Se(t?void 0:this.value)}
        href=${Se(t&&!this.disabled?this.href:void 0)}
        target=${Se(t?this.target:void 0)}
        download=${Se(t?this.download:void 0)}
        rel=${Se(t?this.rel:void 0)}
        role=${Se(t?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @invalid=${this.isButton()?this.handleInvalid:null}
        @click=${this.handleClick}
      >
        <slot name="prefix" part="prefix" class="button__prefix"></slot>
        <slot part="label" class="button__label"></slot>
        <slot name="suffix" part="suffix" class="button__suffix"></slot>
        ${this.caret?bd` <sl-icon part="caret" class="button__caret" library="system" name="caret"></sl-icon> `:""}
        ${this.loading?bd`<sl-spinner part="spinner"></sl-spinner>`:""}
      </${e}>
    `}};Vt.styles=[tt,lE];Vt.dependencies={"sl-icon":Bt,"sl-spinner":Jx};F([Ne(".button")],Vt.prototype,"button",2);F([Ie()],Vt.prototype,"hasFocus",2);F([Ie()],Vt.prototype,"invalid",2);F([U()],Vt.prototype,"title",2);F([U({reflect:!0})],Vt.prototype,"variant",2);F([U({reflect:!0})],Vt.prototype,"size",2);F([U({type:Boolean,reflect:!0})],Vt.prototype,"caret",2);F([U({type:Boolean,reflect:!0})],Vt.prototype,"disabled",2);F([U({type:Boolean,reflect:!0})],Vt.prototype,"loading",2);F([U({type:Boolean,reflect:!0})],Vt.prototype,"outline",2);F([U({type:Boolean,reflect:!0})],Vt.prototype,"pill",2);F([U({type:Boolean,reflect:!0})],Vt.prototype,"circle",2);F([U()],Vt.prototype,"type",2);F([U()],Vt.prototype,"name",2);F([U()],Vt.prototype,"value",2);F([U()],Vt.prototype,"href",2);F([U()],Vt.prototype,"target",2);F([U()],Vt.prototype,"rel",2);F([U()],Vt.prototype,"download",2);F([U()],Vt.prototype,"form",2);F([U({attribute:"formaction"})],Vt.prototype,"formAction",2);F([U({attribute:"formenctype"})],Vt.prototype,"formEnctype",2);F([U({attribute:"formmethod"})],Vt.prototype,"formMethod",2);F([U({attribute:"formnovalidate",type:Boolean})],Vt.prototype,"formNoValidate",2);F([U({attribute:"formtarget"})],Vt.prototype,"formTarget",2);F([je("disabled",{waitUntilFirstUpdate:!0})],Vt.prototype,"handleDisabledChange",1);var Lie="important",XTe=" !"+Lie,ca=Yn(class extends Cs{constructor(t){if(super(t),t.type!==Jr.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{let r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){let{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(let r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(let r in e){let n=e[r];if(n!=null){this.ft.add(r);let s=typeof n=="string"&&n.endsWith(XTe);r.includes("-")||s?i.setProperty(r,s?n.slice(0,-11):n,s?Lie:""):i[r]=n}}return nr}});function kr(t,e){YTe(t)&&(t="100%");let i=KTe(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Zx(t){return Math.min(1,Math.max(0,t))}function YTe(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function KTe(t){return typeof t=="string"&&t.indexOf("%")!==-1}function xE(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Qx(t){return Number(t)<=1?`${Number(t)*100}%`:t}function yd(t){return t.length===1?"0"+t:String(t)}function Oie(t,e,i){return{r:kr(t,255)*255,g:kr(e,255)*255,b:kr(i,255)*255}}function yO(t,e,i){t=kr(t,255),e=kr(e,255),i=kr(i,255);let r=Math.max(t,e,i),n=Math.min(t,e,i),s=0,o=0,a=(r+n)/2;if(r===n)o=0,s=0;else{let l=r-n;switch(o=a>.5?l/(2-r-n):l/(r+n),r){case t:s=(e-i)/l+(e<i?6:0);break;case e:s=(i-t)/l+2;break;case i:s=(t-e)/l+4;break;default:break}s/=6}return{h:s,s:o,l:a}}function vO(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*(6*i):i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function Pie(t,e,i){let r,n,s;if(t=kr(t,360),e=kr(e,100),i=kr(i,100),e===0)n=i,s=i,r=i;else{let o=i<.5?i*(1+e):i+e-i*e,a=2*i-o;r=vO(a,o,t+1/3),n=vO(a,o,t),s=vO(a,o,t-1/3)}return{r:r*255,g:n*255,b:s*255}}function xO(t,e,i){t=kr(t,255),e=kr(e,255),i=kr(i,255);let r=Math.max(t,e,i),n=Math.min(t,e,i),s=0,o=r,a=r-n,l=r===0?0:a/r;if(r===n)s=0;else{switch(r){case t:s=(e-i)/a+(e<i?6:0);break;case e:s=(i-t)/a+2;break;case i:s=(t-e)/a+4;break;default:break}s/=6}return{h:s,s:l,v:o}}function zie(t,e,i){t=kr(t,360)*6,e=kr(e,100),i=kr(i,100);let r=Math.floor(t),n=t-r,s=i*(1-e),o=i*(1-n*e),a=i*(1-(1-n)*e),l=r%6,u=[i,o,s,s,a,i][l],c=[a,i,i,o,s,s][l],h=[s,s,a,i,i,o][l];return{r:u*255,g:c*255,b:h*255}}function wO(t,e,i,r){let n=[yd(Math.round(t).toString(16)),yd(Math.round(e).toString(16)),yd(Math.round(i).toString(16))];return r&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function Iie(t,e,i,r,n){let s=[yd(Math.round(t).toString(16)),yd(Math.round(e).toString(16)),yd(Math.round(i).toString(16)),yd(JTe(r))];return n&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function Bie(t,e,i,r){let n=t/100,s=e/100,o=i/100,a=r/100,l=255*(1-n)*(1-a),u=255*(1-s)*(1-a),c=255*(1-o)*(1-a);return{r:l,g:u,b:c}}function _O(t,e,i){let r=1-t/255,n=1-e/255,s=1-i/255,o=Math.min(r,n,s);return o===1?(r=0,n=0,s=0):(r=(r-o)/(1-o)*100,n=(n-o)/(1-o)*100,s=(s-o)/(1-o)*100),o*=100,{c:Math.round(r),m:Math.round(n),y:Math.round(s),k:Math.round(o)}}function JTe(t){return Math.round(parseFloat(t)*255).toString(16)}function CO(t){return Ys(t)/255}function Ys(t){return parseInt(t,16)}function Nie(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var ew={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function $ie(t){let e={r:0,g:0,b:0},i=1,r=null,n=null,s=null,o=!1,a=!1;return typeof t=="string"&&(t=eRe(t)),typeof t=="object"&&(_o(t.r)&&_o(t.g)&&_o(t.b)?(e=Oie(t.r,t.g,t.b),o=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):_o(t.h)&&_o(t.s)&&_o(t.v)?(r=Qx(t.s),n=Qx(t.v),e=zie(t.h,r,n),o=!0,a="hsv"):_o(t.h)&&_o(t.s)&&_o(t.l)?(r=Qx(t.s),s=Qx(t.l),e=Pie(t.h,r,s),o=!0,a="hsl"):_o(t.c)&&_o(t.m)&&_o(t.y)&&_o(t.k)&&(e=Bie(t.c,t.m,t.y,t.k),o=!0,a="cmyk"),Object.prototype.hasOwnProperty.call(t,"a")&&(i=t.a)),i=xE(i),{ok:o,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:i}}var ZTe="[-\\+]?\\d+%?",QTe="[-\\+]?\\d*\\.\\d+%?",xd="(?:"+QTe+")|(?:"+ZTe+")",SO="[\\s|\\(]+("+xd+")[,|\\s]+("+xd+")[,|\\s]+("+xd+")\\s*\\)?",wE="[\\s|\\(]+("+xd+")[,|\\s]+("+xd+")[,|\\s]+("+xd+")[,|\\s]+("+xd+")\\s*\\)?",ha={CSS_UNIT:new RegExp(xd),rgb:new RegExp("rgb"+SO),rgba:new RegExp("rgba"+wE),hsl:new RegExp("hsl"+SO),hsla:new RegExp("hsla"+wE),hsv:new RegExp("hsv"+SO),hsva:new RegExp("hsva"+wE),cmyk:new RegExp("cmyk"+wE),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function eRe(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;let e=!1;if(ew[t])t=ew[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let i=ha.rgb.exec(t);return i?{r:i[1],g:i[2],b:i[3]}:(i=ha.rgba.exec(t),i?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=ha.hsl.exec(t),i?{h:i[1],s:i[2],l:i[3]}:(i=ha.hsla.exec(t),i?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=ha.hsv.exec(t),i?{h:i[1],s:i[2],v:i[3]}:(i=ha.hsva.exec(t),i?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=ha.cmyk.exec(t),i?{c:i[1],m:i[2],y:i[3],k:i[4]}:(i=ha.hex8.exec(t),i?{r:Ys(i[1]),g:Ys(i[2]),b:Ys(i[3]),a:CO(i[4]),format:e?"name":"hex8"}:(i=ha.hex6.exec(t),i?{r:Ys(i[1]),g:Ys(i[2]),b:Ys(i[3]),format:e?"name":"hex"}:(i=ha.hex4.exec(t),i?{r:Ys(i[1]+i[1]),g:Ys(i[2]+i[2]),b:Ys(i[3]+i[3]),a:CO(i[4]+i[4]),format:e?"name":"hex8"}:(i=ha.hex3.exec(t),i?{r:Ys(i[1]+i[1]),g:Ys(i[2]+i[2]),b:Ys(i[3]+i[3]),format:e?"name":"hex"}:!1))))))))))}function _o(t){return typeof t=="number"?!Number.isNaN(t):ha.CSS_UNIT.test(t)}var tw=class t{constructor(e="",i={}){if(e instanceof t)return e;typeof e=="number"&&(e=Nie(e)),this.originalInput=e;let r=$ie(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=i.format??r.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){let e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3}getLuminance(){let e=this.toRgb(),i,r,n,s=e.r/255,o=e.g/255,a=e.b/255;return s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),.2126*i+.7152*r+.0722*n}getAlpha(){return this.a}setAlpha(e){return this.a=xE(e),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){let{s:e}=this.toHsl();return e===0}toHsv(){let e=xO(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}}toHsvString(){let e=xO(this.r,this.g,this.b),i=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.v*100);return this.a===1?`hsv(${i}, ${r}%, ${n}%)`:`hsva(${i}, ${r}%, ${n}%, ${this.roundA})`}toHsl(){let e=yO(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}}toHslString(){let e=yO(this.r,this.g,this.b),i=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.l*100);return this.a===1?`hsl(${i}, ${r}%, ${n}%)`:`hsla(${i}, ${r}%, ${n}%, ${this.roundA})`}toHex(e=!1){return wO(this.r,this.g,this.b,e)}toHexString(e=!1){return"#"+this.toHex(e)}toHex8(e=!1){return Iie(this.r,this.g,this.b,this.a,e)}toHex8String(e=!1){return"#"+this.toHex8(e)}toHexShortString(e=!1){return this.a===1?this.toHexString(e):this.toHex8String(e)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){let e=Math.round(this.r),i=Math.round(this.g),r=Math.round(this.b);return this.a===1?`rgb(${e}, ${i}, ${r})`:`rgba(${e}, ${i}, ${r}, ${this.roundA})`}toPercentageRgb(){let e=i=>`${Math.round(kr(i,255)*100)}%`;return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}}toPercentageRgbString(){let e=i=>Math.round(kr(i,255)*100);return this.a===1?`rgb(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%)`:`rgba(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%, ${this.roundA})`}toCmyk(){return{..._O(this.r,this.g,this.b)}}toCmykString(){let{c:e,m:i,y:r,k:n}=_O(this.r,this.g,this.b);return`cmyk(${e}, ${i}, ${r}, ${n})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;let e="#"+wO(this.r,this.g,this.b,!1);for(let[i,r]of Object.entries(ew))if(e===r)return i;return!1}toString(e){let i=!!e;e=e??this.format;let r=!1,n=this.a<1&&this.a>=0;return!i&&n&&(e.startsWith("hex")||e==="name")?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),e==="cmyk"&&(r=this.toCmykString()),r||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new t(this.toString())}lighten(e=10){let i=this.toHsl();return i.l+=e/100,i.l=Zx(i.l),new t(i)}brighten(e=10){let i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(255*-(e/100)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(255*-(e/100)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(255*-(e/100)))),new t(i)}darken(e=10){let i=this.toHsl();return i.l-=e/100,i.l=Zx(i.l),new t(i)}tint(e=10){return this.mix("white",e)}shade(e=10){return this.mix("black",e)}desaturate(e=10){let i=this.toHsl();return i.s-=e/100,i.s=Zx(i.s),new t(i)}saturate(e=10){let i=this.toHsl();return i.s+=e/100,i.s=Zx(i.s),new t(i)}greyscale(){return this.desaturate(100)}spin(e){let i=this.toHsl(),r=(i.h+e)%360;return i.h=r<0?360+r:r,new t(i)}mix(e,i=50){let r=this.toRgb(),n=new t(e).toRgb(),s=i/100,o={r:(n.r-r.r)*s+r.r,g:(n.g-r.g)*s+r.g,b:(n.b-r.b)*s+r.b,a:(n.a-r.a)*s+r.a};return new t(o)}analogous(e=6,i=30){let r=this.toHsl(),n=360/i,s=[this];for(r.h=(r.h-(n*e>>1)+720)%360;--e;)r.h=(r.h+n)%360,s.push(new t(r));return s}complement(){let e=this.toHsl();return e.h=(e.h+180)%360,new t(e)}monochromatic(e=6){let i=this.toHsv(),{h:r}=i,{s:n}=i,{v:s}=i,o=[],a=1/e;for(;e--;)o.push(new t({h:r,s:n,v:s})),s=(s+a)%1;return o}splitcomplement(){let e=this.toHsl(),{h:i}=e;return[this,new t({h:(i+72)%360,s:e.s,l:e.l}),new t({h:(i+216)%360,s:e.s,l:e.l})]}onBackground(e){let i=this.toRgb(),r=new t(e).toRgb(),n=i.a+r.a*(1-i.a);return new t({r:(i.r*i.a+r.r*r.a*(1-i.a))/n,g:(i.g*i.a+r.g*r.a*(1-i.a))/n,b:(i.b*i.a+r.b*r.a*(1-i.a))/n,a:n})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(e){let i=this.toHsl(),{h:r}=i,n=[this],s=360/e;for(let o=1;o<e;o++)n.push(new t({h:(r+o*s)%360,s:i.s,l:i.l}));return n}equals(e){let i=new t(e);return this.format==="cmyk"||i.format==="cmyk"?this.toCmykString()===i.toCmykString():this.toRgbString()===i.toRgbString()}};var Hie="EyeDropper"in window,At=class extends Xe{constructor(){super(),this.formControlController=new Xr(this),this.isSafeValue=!1,this.localize=new ei(this),this.hasFocus=!1,this.isDraggingGridHandle=!1,this.isEmpty=!1,this.inputValue="",this.hue=0,this.saturation=100,this.brightness=100,this.alpha=100,this.value="",this.defaultValue="",this.label="",this.format="hex",this.inline=!1,this.size="medium",this.noFormatToggle=!1,this.name="",this.disabled=!1,this.hoist=!1,this.opacity=!1,this.uppercase=!1,this.swatches="",this.form="",this.required=!1,this.handleFocusIn=()=>{this.hasFocus=!0,this.emit("sl-focus")},this.handleFocusOut=()=>{this.hasFocus=!1,this.emit("sl-blur")},this.addEventListener("focusin",this.handleFocusIn),this.addEventListener("focusout",this.handleFocusOut)}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.input.updateComplete.then(()=>{this.formControlController.updateValidity()})}handleCopy(){this.input.select(),document.execCommand("copy"),this.previewButton.focus(),this.previewButton.classList.add("color-picker__preview-color--copied"),this.previewButton.addEventListener("animationend",()=>{this.previewButton.classList.remove("color-picker__preview-color--copied")})}handleFormatToggle(){let t=["hex","rgb","hsl","hsv"],e=(t.indexOf(this.format)+1)%t.length;this.format=t[e],this.setColor(this.value),this.emit("sl-change"),this.emit("sl-input")}handleAlphaDrag(t){let e=this.shadowRoot.querySelector(".color-picker__slider.color-picker__alpha"),i=e.querySelector(".color-picker__slider-handle"),{width:r}=e.getBoundingClientRect(),n=this.value,s=this.value;i.focus(),t.preventDefault(),uE(e,{onMove:o=>{this.alpha=vn(o/r*100,0,100),this.syncValues(),this.value!==s&&(s=this.value,this.emit("sl-input"))},onStop:()=>{this.value!==n&&(n=this.value,this.emit("sl-change"))},initialEvent:t})}handleHueDrag(t){let e=this.shadowRoot.querySelector(".color-picker__slider.color-picker__hue"),i=e.querySelector(".color-picker__slider-handle"),{width:r}=e.getBoundingClientRect(),n=this.value,s=this.value;i.focus(),t.preventDefault(),uE(e,{onMove:o=>{this.hue=vn(o/r*360,0,360),this.syncValues(),this.value!==s&&(s=this.value,this.emit("sl-input"))},onStop:()=>{this.value!==n&&(n=this.value,this.emit("sl-change"))},initialEvent:t})}handleGridDrag(t){let e=this.shadowRoot.querySelector(".color-picker__grid"),i=e.querySelector(".color-picker__grid-handle"),{width:r,height:n}=e.getBoundingClientRect(),s=this.value,o=this.value;i.focus(),t.preventDefault(),this.isDraggingGridHandle=!0,uE(e,{onMove:(a,l)=>{this.saturation=vn(a/r*100,0,100),this.brightness=vn(100-l/n*100,0,100),this.syncValues(),this.value!==o&&(o=this.value,this.emit("sl-input"))},onStop:()=>{this.isDraggingGridHandle=!1,this.value!==s&&(s=this.value,this.emit("sl-change"))},initialEvent:t})}handleAlphaKeyDown(t){let e=t.shiftKey?10:1,i=this.value;t.key==="ArrowLeft"&&(t.preventDefault(),this.alpha=vn(this.alpha-e,0,100),this.syncValues()),t.key==="ArrowRight"&&(t.preventDefault(),this.alpha=vn(this.alpha+e,0,100),this.syncValues()),t.key==="Home"&&(t.preventDefault(),this.alpha=0,this.syncValues()),t.key==="End"&&(t.preventDefault(),this.alpha=100,this.syncValues()),this.value!==i&&(this.emit("sl-change"),this.emit("sl-input"))}handleHueKeyDown(t){let e=t.shiftKey?10:1,i=this.value;t.key==="ArrowLeft"&&(t.preventDefault(),this.hue=vn(this.hue-e,0,360),this.syncValues()),t.key==="ArrowRight"&&(t.preventDefault(),this.hue=vn(this.hue+e,0,360),this.syncValues()),t.key==="Home"&&(t.preventDefault(),this.hue=0,this.syncValues()),t.key==="End"&&(t.preventDefault(),this.hue=360,this.syncValues()),this.value!==i&&(this.emit("sl-change"),this.emit("sl-input"))}handleGridKeyDown(t){let e=t.shiftKey?10:1,i=this.value;t.key==="ArrowLeft"&&(t.preventDefault(),this.saturation=vn(this.saturation-e,0,100),this.syncValues()),t.key==="ArrowRight"&&(t.preventDefault(),this.saturation=vn(this.saturation+e,0,100),this.syncValues()),t.key==="ArrowUp"&&(t.preventDefault(),this.brightness=vn(this.brightness+e,0,100),this.syncValues()),t.key==="ArrowDown"&&(t.preventDefault(),this.brightness=vn(this.brightness-e,0,100),this.syncValues()),this.value!==i&&(this.emit("sl-change"),this.emit("sl-input"))}handleInputChange(t){let e=t.target,i=this.value;t.stopPropagation(),this.input.value?(this.setColor(e.value),e.value=this.value):this.value="",this.value!==i&&(this.emit("sl-change"),this.emit("sl-input"))}handleInputInput(t){this.formControlController.updateValidity(),t.stopPropagation()}handleInputKeyDown(t){if(t.key==="Enter"){let e=this.value;this.input.value?(this.setColor(this.input.value),this.input.value=this.value,this.value!==e&&(this.emit("sl-change"),this.emit("sl-input")),setTimeout(()=>this.input.select())):this.hue=0}}handleInputInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}handleTouchMove(t){t.preventDefault()}parseColor(t){let e=new tw(t);if(!e.isValid)return null;let i=e.toHsl(),r={h:i.h,s:i.s*100,l:i.l*100,a:i.a},n=e.toRgb(),s=e.toHexString(),o=e.toHex8String(),a=e.toHsv(),l={h:a.h,s:a.s*100,v:a.v*100,a:a.a};return{hsl:{h:r.h,s:r.s,l:r.l,string:this.setLetterCase(`hsl(${Math.round(r.h)}, ${Math.round(r.s)}%, ${Math.round(r.l)}%)`)},hsla:{h:r.h,s:r.s,l:r.l,a:r.a,string:this.setLetterCase(`hsla(${Math.round(r.h)}, ${Math.round(r.s)}%, ${Math.round(r.l)}%, ${r.a.toFixed(2).toString()})`)},hsv:{h:l.h,s:l.s,v:l.v,string:this.setLetterCase(`hsv(${Math.round(l.h)}, ${Math.round(l.s)}%, ${Math.round(l.v)}%)`)},hsva:{h:l.h,s:l.s,v:l.v,a:l.a,string:this.setLetterCase(`hsva(${Math.round(l.h)}, ${Math.round(l.s)}%, ${Math.round(l.v)}%, ${l.a.toFixed(2).toString()})`)},rgb:{r:n.r,g:n.g,b:n.b,string:this.setLetterCase(`rgb(${Math.round(n.r)}, ${Math.round(n.g)}, ${Math.round(n.b)})`)},rgba:{r:n.r,g:n.g,b:n.b,a:n.a,string:this.setLetterCase(`rgba(${Math.round(n.r)}, ${Math.round(n.g)}, ${Math.round(n.b)}, ${n.a.toFixed(2).toString()})`)},hex:this.setLetterCase(s),hexa:this.setLetterCase(o)}}setColor(t){let e=this.parseColor(t);return e===null?!1:(this.hue=e.hsva.h,this.saturation=e.hsva.s,this.brightness=e.hsva.v,this.alpha=this.opacity?e.hsva.a*100:100,this.syncValues(),!0)}setLetterCase(t){return typeof t!="string"?"":this.uppercase?t.toUpperCase():t.toLowerCase()}async syncValues(){let t=this.parseColor(`hsva(${this.hue}, ${this.saturation}%, ${this.brightness}%, ${this.alpha/100})`);t!==null&&(this.format==="hsl"?this.inputValue=this.opacity?t.hsla.string:t.hsl.string:this.format==="rgb"?this.inputValue=this.opacity?t.rgba.string:t.rgb.string:this.format==="hsv"?this.inputValue=this.opacity?t.hsva.string:t.hsv.string:this.inputValue=this.opacity?t.hexa:t.hex,this.isSafeValue=!0,this.value=this.inputValue,await this.updateComplete,this.isSafeValue=!1)}handleAfterHide(){this.previewButton.classList.remove("color-picker__preview-color--copied")}handleEyeDropper(){if(!Hie)return;new EyeDropper().open().then(e=>{let i=this.value;this.setColor(e.sRGBHex),this.value!==i&&(this.emit("sl-change"),this.emit("sl-input"))}).catch(()=>{})}selectSwatch(t){let e=this.value;this.disabled||(this.setColor(t),this.value!==e&&(this.emit("sl-change"),this.emit("sl-input")))}getHexString(t,e,i,r=100){let n=new tw(`hsva(${t}, ${e}%, ${i}%, ${r/100})`);return n.isValid?n.toHex8String():""}stopNestedEventPropagation(t){t.stopImmediatePropagation()}handleFormatChange(){this.syncValues()}handleOpacityChange(){this.alpha=100}handleValueChange(t,e){if(this.isEmpty=!e,e||(this.hue=0,this.saturation=0,this.brightness=100,this.alpha=100),!this.isSafeValue){let i=this.parseColor(e);i!==null?(this.inputValue=this.value,this.hue=i.hsva.h,this.saturation=i.hsva.s,this.brightness=i.hsva.v,this.alpha=i.hsva.a*100,this.syncValues()):this.inputValue=t??""}}focus(t){this.inline?this.base.focus(t):this.trigger.focus(t)}blur(){var t;let e=this.inline?this.base:this.trigger;this.hasFocus&&(e.focus({preventScroll:!0}),e.blur()),(t=this.dropdown)!=null&&t.open&&this.dropdown.hide()}getFormattedValue(t="hex"){let e=this.parseColor(`hsva(${this.hue}, ${this.saturation}%, ${this.brightness}%, ${this.alpha/100})`);if(e===null)return"";switch(t){case"hex":return e.hex;case"hexa":return e.hexa;case"rgb":return e.rgb.string;case"rgba":return e.rgba.string;case"hsl":return e.hsl.string;case"hsla":return e.hsla.string;case"hsv":return e.hsv.string;case"hsva":return e.hsva.string;default:return""}}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return!this.inline&&!this.validity.valid?(this.dropdown.show(),this.addEventListener("sl-after-show",()=>this.input.reportValidity(),{once:!0}),this.disabled||this.formControlController.emitInvalidEvent(),!1):this.input.reportValidity()}setCustomValidity(t){this.input.setCustomValidity(t),this.formControlController.updateValidity()}render(){let t=this.saturation,e=100-this.brightness,i=Array.isArray(this.swatches)?this.swatches:this.swatches.split(";").filter(n=>n.trim()!==""),r=X`
      <div
        part="base"
        class=${et({"color-picker":!0,"color-picker--inline":this.inline,"color-picker--disabled":this.disabled,"color-picker--focused":this.hasFocus})}
        aria-disabled=${this.disabled?"true":"false"}
        aria-labelledby="label"
        tabindex=${this.inline?"0":"-1"}
      >
        ${this.inline?X`
              <sl-visually-hidden id="label">
                <slot name="label">${this.label}</slot>
              </sl-visually-hidden>
            `:null}

        <div
          part="grid"
          class="color-picker__grid"
          style=${ca({backgroundColor:this.getHexString(this.hue,100,100)})}
          @pointerdown=${this.handleGridDrag}
          @touchmove=${this.handleTouchMove}
        >
          <span
            part="grid-handle"
            class=${et({"color-picker__grid-handle":!0,"color-picker__grid-handle--dragging":this.isDraggingGridHandle})}
            style=${ca({top:`${e}%`,left:`${t}%`,backgroundColor:this.getHexString(this.hue,this.saturation,this.brightness,this.alpha)})}
            role="application"
            aria-label="HSV"
            tabindex=${Se(this.disabled?void 0:"0")}
            @keydown=${this.handleGridKeyDown}
          ></span>
        </div>

        <div class="color-picker__controls">
          <div class="color-picker__sliders">
            <div
              part="slider hue-slider"
              class="color-picker__hue color-picker__slider"
              @pointerdown=${this.handleHueDrag}
              @touchmove=${this.handleTouchMove}
            >
              <span
                part="slider-handle hue-slider-handle"
                class="color-picker__slider-handle"
                style=${ca({left:`${this.hue===0?0:100/(360/this.hue)}%`})}
                role="slider"
                aria-label="hue"
                aria-orientation="horizontal"
                aria-valuemin="0"
                aria-valuemax="360"
                aria-valuenow=${`${Math.round(this.hue)}`}
                tabindex=${Se(this.disabled?void 0:"0")}
                @keydown=${this.handleHueKeyDown}
              ></span>
            </div>

            ${this.opacity?X`
                  <div
                    part="slider opacity-slider"
                    class="color-picker__alpha color-picker__slider color-picker__transparent-bg"
                    @pointerdown="${this.handleAlphaDrag}"
                    @touchmove=${this.handleTouchMove}
                  >
                    <div
                      class="color-picker__alpha-gradient"
                      style=${ca({backgroundImage:`linear-gradient(
                          to right,
                          ${this.getHexString(this.hue,this.saturation,this.brightness,0)} 0%,
                          ${this.getHexString(this.hue,this.saturation,this.brightness,100)} 100%
                        )`})}
                    ></div>
                    <span
                      part="slider-handle opacity-slider-handle"
                      class="color-picker__slider-handle"
                      style=${ca({left:`${this.alpha}%`})}
                      role="slider"
                      aria-label="alpha"
                      aria-orientation="horizontal"
                      aria-valuemin="0"
                      aria-valuemax="100"
                      aria-valuenow=${Math.round(this.alpha)}
                      tabindex=${Se(this.disabled?void 0:"0")}
                      @keydown=${this.handleAlphaKeyDown}
                    ></span>
                  </div>
                `:""}
          </div>

          <button
            type="button"
            part="preview"
            class="color-picker__preview color-picker__transparent-bg"
            aria-label=${this.localize.term("copy")}
            style=${ca({"--preview-color":this.getHexString(this.hue,this.saturation,this.brightness,this.alpha)})}
            @click=${this.handleCopy}
          ></button>
        </div>

        <div class="color-picker__user-input" aria-live="polite">
          <sl-input
            part="input"
            type="text"
            name=${this.name}
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
            value=${this.isEmpty?"":this.inputValue}
            ?required=${this.required}
            ?disabled=${this.disabled}
            aria-label=${this.localize.term("currentValue")}
            @keydown=${this.handleInputKeyDown}
            @sl-change=${this.handleInputChange}
            @sl-input=${this.handleInputInput}
            @sl-invalid=${this.handleInputInvalid}
            @sl-blur=${this.stopNestedEventPropagation}
            @sl-focus=${this.stopNestedEventPropagation}
          ></sl-input>

          <sl-button-group>
            ${this.noFormatToggle?"":X`
                  <sl-button
                    part="format-button"
                    aria-label=${this.localize.term("toggleColorFormat")}
                    exportparts="
                      base:format-button__base,
                      prefix:format-button__prefix,
                      label:format-button__label,
                      suffix:format-button__suffix,
                      caret:format-button__caret
                    "
                    @click=${this.handleFormatToggle}
                    @sl-blur=${this.stopNestedEventPropagation}
                    @sl-focus=${this.stopNestedEventPropagation}
                  >
                    ${this.setLetterCase(this.format)}
                  </sl-button>
                `}
            ${Hie?X`
                  <sl-button
                    part="eye-dropper-button"
                    exportparts="
                      base:eye-dropper-button__base,
                      prefix:eye-dropper-button__prefix,
                      label:eye-dropper-button__label,
                      suffix:eye-dropper-button__suffix,
                      caret:eye-dropper-button__caret
                    "
                    @click=${this.handleEyeDropper}
                    @sl-blur=${this.stopNestedEventPropagation}
                    @sl-focus=${this.stopNestedEventPropagation}
                  >
                    <sl-icon
                      library="system"
                      name="eyedropper"
                      label=${this.localize.term("selectAColorFromTheScreen")}
                    ></sl-icon>
                  </sl-button>
                `:""}
          </sl-button-group>
        </div>

        ${i.length>0?X`
              <div part="swatches" class="color-picker__swatches">
                ${i.map(n=>{let s=this.parseColor(n);return s?X`
                    <div
                      part="swatch"
                      class="color-picker__swatch color-picker__transparent-bg"
                      tabindex=${Se(this.disabled?void 0:"0")}
                      role="button"
                      aria-label=${n}
                      @click=${()=>this.selectSwatch(n)}
                      @keydown=${o=>!this.disabled&&o.key==="Enter"&&this.setColor(s.hexa)}
                    >
                      <div
                        class="color-picker__swatch-color"
                        style=${ca({backgroundColor:s.hexa})}
                      ></div>
                    </div>
                  `:(console.error(`Unable to parse swatch color: "${n}"`,this),"")})}
              </div>
            `:""}
      </div>
    `;return this.inline?r:X`
      <sl-dropdown
        class="color-dropdown"
        aria-disabled=${this.disabled?"true":"false"}
        .containingElement=${this}
        ?disabled=${this.disabled}
        ?hoist=${this.hoist}
        @sl-after-hide=${this.handleAfterHide}
      >
        <button
          part="trigger"
          slot="trigger"
          class=${et({"color-dropdown__trigger":!0,"color-dropdown__trigger--disabled":this.disabled,"color-dropdown__trigger--small":this.size==="small","color-dropdown__trigger--medium":this.size==="medium","color-dropdown__trigger--large":this.size==="large","color-dropdown__trigger--empty":this.isEmpty,"color-dropdown__trigger--focused":this.hasFocus,"color-picker__transparent-bg":!0})}
          style=${ca({color:this.getHexString(this.hue,this.saturation,this.brightness,this.alpha)})}
          type="button"
        >
          <sl-visually-hidden>
            <slot name="label">${this.label}</slot>
          </sl-visually-hidden>
        </button>
        ${r}
      </sl-dropdown>
    `}};At.styles=[tt,Mie];At.dependencies={"sl-button-group":vd,"sl-button":Vt,"sl-dropdown":bn,"sl-icon":Bt,"sl-input":mt,"sl-visually-hidden":cO};F([Ne('[part~="base"]')],At.prototype,"base",2);F([Ne('[part~="input"]')],At.prototype,"input",2);F([Ne(".color-dropdown")],At.prototype,"dropdown",2);F([Ne('[part~="preview"]')],At.prototype,"previewButton",2);F([Ne('[part~="trigger"]')],At.prototype,"trigger",2);F([Ie()],At.prototype,"hasFocus",2);F([Ie()],At.prototype,"isDraggingGridHandle",2);F([Ie()],At.prototype,"isEmpty",2);F([Ie()],At.prototype,"inputValue",2);F([Ie()],At.prototype,"hue",2);F([Ie()],At.prototype,"saturation",2);F([Ie()],At.prototype,"brightness",2);F([Ie()],At.prototype,"alpha",2);F([U()],At.prototype,"value",2);F([oa()],At.prototype,"defaultValue",2);F([U()],At.prototype,"label",2);F([U()],At.prototype,"format",2);F([U({type:Boolean,reflect:!0})],At.prototype,"inline",2);F([U({reflect:!0})],At.prototype,"size",2);F([U({attribute:"no-format-toggle",type:Boolean})],At.prototype,"noFormatToggle",2);F([U()],At.prototype,"name",2);F([U({type:Boolean,reflect:!0})],At.prototype,"disabled",2);F([U({type:Boolean})],At.prototype,"hoist",2);F([U({type:Boolean})],At.prototype,"opacity",2);F([U({type:Boolean})],At.prototype,"uppercase",2);F([U()],At.prototype,"swatches",2);F([U({reflect:!0})],At.prototype,"form",2);F([U({type:Boolean,reflect:!0})],At.prototype,"required",2);F([Kp({passive:!1})],At.prototype,"handleTouchMove",1);F([je("format",{waitUntilFirstUpdate:!0})],At.prototype,"handleFormatChange",1);F([je("opacity",{waitUntilFirstUpdate:!0})],At.prototype,"handleOpacityChange",1);F([je("value")],At.prototype,"handleValueChange",1);At.define("sl-color-picker");var Uie=t=>X`
	<div class="theme-shoelace widget-color-picker">
		<label>${t.label}</label>
		<sl-color-picker
			.label=${t.label??""}
			value=${t.value?String(t.value):""}
			@sl-change=${e=>{let i=e.target.value;t.valueChangedCallback?.(i)}}
			.disabled=${t.disabled}
		></sl-color-picker>

		<div class="widget-color-picker__description">${t.helpText}</div>
	</div>
`;var Wie=t=>X`
	<sl-input
		type=${t.type}
		.label=${t.label??""}
		.helpText=${t.helpText??""}
		value=${t.value?t.value:""}
		.name=${t.id}
		.id=${t.id}
		.required=${t.required??!1}
		@sl-input=${e=>{let{value:i}=e.target;t.type==="datetime-local"&&(i=new Date(i)),t.valueChangedCallback?.(i)}}
		.disabled=${t.disabled}
		.readonly=${t.readonly}
	>
	</sl-input>
`;var Vie=t=>X` <!--  -->
		<sl-input
			type="number"
			value=${Se(t.value)}
			step=${Se(t.step)}
			min=${Se(t.min)}
			max=${Se(t.max)}
			.label=${t.label}
			.helpText=${t.helpText}
			placeholder=${t.placeholder}
			.name=${t.id}
			.id=${t.id}
			.required=${t.required}
			@sl-input=${e=>{let i=e.target.valueAsNumber;console.log(i),t.valueChangedCallback?.(i)}}
			.disabled=${t.disabled}
			.readonly=${t.readonly}
		></sl-input>`;var jie=t=>X`
	<fieldset
		id=${t.id}
		class="theme-shoelace widget-object widget-fieldset level-${t.level}"
		part="object"
	>
		${t.label?X`<legend>${t.label}</legend>`:""}
		<!-- -->
		${t.helpText?X`<div class="widget-fieldset__description">
					${t.helpText}
			  </div>`:lt}
		<!--  -->
		${t.children}
	</fieldset>
`;var qie=ze`
  :host {
    display: block;
  }

  :host(:focus-visible) {
    outline: 0px;
  }

  .radio {
    display: inline-flex;
    align-items: top;
    font-family: var(--sl-input-font-family);
    font-size: var(--sl-input-font-size-medium);
    font-weight: var(--sl-input-font-weight);
    color: var(--sl-input-label-color);
    vertical-align: middle;
    cursor: pointer;
  }

  .radio--small {
    --toggle-size: var(--sl-toggle-size-small);
    font-size: var(--sl-input-font-size-small);
  }

  .radio--medium {
    --toggle-size: var(--sl-toggle-size-medium);
    font-size: var(--sl-input-font-size-medium);
  }

  .radio--large {
    --toggle-size: var(--sl-toggle-size-large);
    font-size: var(--sl-input-font-size-large);
  }

  .radio__checked-icon {
    display: inline-flex;
    width: var(--toggle-size);
    height: var(--toggle-size);
  }

  .radio__control {
    flex: 0 0 auto;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--toggle-size);
    height: var(--toggle-size);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
    border-radius: 50%;
    background-color: var(--sl-input-background-color);
    color: transparent;
    transition:
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) box-shadow;
  }

  .radio__input {
    position: absolute;
    opacity: 0;
    padding: 0;
    margin: 0;
    pointer-events: none;
  }

  /* Hover */
  .radio:not(.radio--checked):not(.radio--disabled) .radio__control:hover {
    border-color: var(--sl-input-border-color-hover);
    background-color: var(--sl-input-background-color-hover);
  }

  /* Checked */
  .radio--checked .radio__control {
    color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
  }

  /* Checked + hover */
  .radio.radio--checked:not(.radio--disabled) .radio__control:hover {
    border-color: var(--sl-color-primary-500);
    background-color: var(--sl-color-primary-500);
  }

  /* Checked + focus */
  :host(:focus-visible) .radio__control {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  /* Disabled */
  .radio--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When the control isn't checked, hide the circle for Windows High Contrast mode a11y */
  .radio:not(.radio--checked) svg circle {
    opacity: 0;
  }

  .radio__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    line-height: var(--toggle-size);
    margin-inline-start: 0.5em;
    user-select: none;
    -webkit-user-select: none;
  }
`;var cl=class extends Xe{constructor(){super(),this.checked=!1,this.hasFocus=!1,this.size="medium",this.disabled=!1,this.handleBlur=()=>{this.hasFocus=!1,this.emit("sl-blur")},this.handleClick=()=>{this.disabled||(this.checked=!0)},this.handleFocus=()=>{this.hasFocus=!0,this.emit("sl-focus")},this.addEventListener("blur",this.handleBlur),this.addEventListener("click",this.handleClick),this.addEventListener("focus",this.handleFocus)}connectedCallback(){super.connectedCallback(),this.setInitialAttributes()}setInitialAttributes(){this.setAttribute("role","radio"),this.setAttribute("tabindex","-1"),this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleCheckedChange(){this.setAttribute("aria-checked",this.checked?"true":"false"),this.setAttribute("tabindex",this.checked?"0":"-1")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}render(){return X`
      <span
        part="base"
        class=${et({radio:!0,"radio--checked":this.checked,"radio--disabled":this.disabled,"radio--focused":this.hasFocus,"radio--small":this.size==="small","radio--medium":this.size==="medium","radio--large":this.size==="large"})}
      >
        <span part="${`control${this.checked?" control--checked":""}`}" class="radio__control">
          ${this.checked?X` <sl-icon part="checked-icon" class="radio__checked-icon" library="system" name="radio"></sl-icon> `:""}
        </span>

        <slot part="label" class="radio__label"></slot>
      </span>
    `}};cl.styles=[tt,qie];cl.dependencies={"sl-icon":Bt};F([Ie()],cl.prototype,"checked",2);F([Ie()],cl.prototype,"hasFocus",2);F([U()],cl.prototype,"value",2);F([U({reflect:!0})],cl.prototype,"size",2);F([U({type:Boolean,reflect:!0})],cl.prototype,"disabled",2);F([je("checked")],cl.prototype,"handleCheckedChange",1);F([je("disabled",{waitUntilFirstUpdate:!0})],cl.prototype,"handleDisabledChange",1);cl.define("sl-radio");var Gie=t=>X`
	<sl-radio-group
		class="theme-shoelace widget-radio-group"
		size="medium"
		.label=${t.label??""}
		.helpText=${t.helpText??""}
		value=${typeof t.value<"u"?String(t.value):""}
		.name=${t.id}
		.required=${t.required??!1}
		@sl-change=${e=>{let i=e.target.value;t.type==="number"&&(i=Number(i)),t.valueChangedCallback?.(i)}}
	>
		${t.enum?.map(e=>X`<sl-radio .disabled=${t.disabled} value=${String(e)}
					>${e}</sl-radio
				>`)}
	</sl-radio-group>
`;var Xie=t=>X`
	<!-- TODO: Disabled state (not supported by Shoelace for this specific field despite the docs?) -->
	<sl-radio-group
		class="theme-shoelace widget-radio-group-boolean"
		size="medium"
		.label=${t.label??""}
		.helpText=${t.helpText??""}
		value=${typeof t.value<"u"?String(t.value):""}
		.name=${t.id}
		.required=${t.required??!1}
		@sl-change=${e=>{let i=e.target.value;t.valueChangedCallback?.(i==="true")}}
	>
		<sl-radio .disabled=${t.disabled} value="true"
			>${t.trueLabel??"Yes"}</sl-radio
		>
		<sl-radio .disabled=${t.disabled} value="false"
			>${t.falseLabel??"No"}</sl-radio
		>
	</sl-radio-group>
`;var Yie=ze`
  :host {
    --thumb-size: 20px;
    --tooltip-offset: 10px;
    --track-color-active: var(--sl-color-neutral-200);
    --track-color-inactive: var(--sl-color-neutral-200);
    --track-active-offset: 0%;
    --track-height: 6px;

    display: block;
  }

  .range {
    position: relative;
  }

  .range__control {
    --percent: 0%;
    -webkit-appearance: none;
    border-radius: 3px;
    width: 100%;
    height: var(--track-height);
    background: transparent;
    line-height: var(--sl-input-height-medium);
    vertical-align: middle;
    margin: 0;

    background-image: linear-gradient(
      to right,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  .range--rtl .range__control {
    background-image: linear-gradient(
      to left,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  /* Webkit */
  .range__control::-webkit-slider-runnable-track {
    width: 100%;
    height: var(--track-height);
    border-radius: 3px;
    border: none;
  }

  .range__control::-webkit-slider-thumb {
    border: none;
    width: var(--thumb-size);
    height: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border: solid var(--sl-input-border-width) var(--sl-color-primary-600);
    -webkit-appearance: none;
    margin-top: calc(var(--thumb-size) / -2 + var(--track-height) / 2);
    cursor: pointer;
  }

  .range__control:enabled::-webkit-slider-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-webkit-slider-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-webkit-slider-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* Firefox */
  .range__control::-moz-focus-outer {
    border: 0;
  }

  .range__control::-moz-range-progress {
    background-color: var(--track-color-active);
    border-radius: 3px;
    height: var(--track-height);
  }

  .range__control::-moz-range-track {
    width: 100%;
    height: var(--track-height);
    background-color: var(--track-color-inactive);
    border-radius: 3px;
    border: none;
  }

  .range__control::-moz-range-thumb {
    border: none;
    height: var(--thumb-size);
    width: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    transition:
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) box-shadow;
    cursor: pointer;
  }

  .range__control:enabled::-moz-range-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-moz-range-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-moz-range-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* States */
  .range__control:focus-visible {
    outline: none;
  }

  .range__control:disabled {
    opacity: 0.5;
  }

  .range__control:disabled::-webkit-slider-thumb {
    cursor: not-allowed;
  }

  .range__control:disabled::-moz-range-thumb {
    cursor: not-allowed;
  }

  /* Tooltip output */
  .range__tooltip {
    position: absolute;
    z-index: var(--sl-z-index-tooltip);
    left: 0;
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    opacity: 0;
    padding: var(--sl-tooltip-padding);
    transition: var(--sl-transition-fast) opacity;
    pointer-events: none;
  }

  .range__tooltip:after {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    left: 50%;
    translate: calc(-1 * var(--sl-tooltip-arrow-size));
  }

  .range--tooltip-visible .range__tooltip {
    opacity: 1;
  }

  /* Tooltip on top */
  .range--tooltip-top .range__tooltip {
    top: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-top .range__tooltip:after {
    border-top: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    top: 100%;
  }

  /* Tooltip on bottom */
  .range--tooltip-bottom .range__tooltip {
    bottom: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-bottom .range__tooltip:after {
    border-bottom: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    bottom: 100%;
  }

  @media (forced-colors: active) {
    .range__control,
    .range__tooltip {
      border: solid 1px transparent;
    }

    .range__control::-webkit-slider-thumb {
      border: solid 1px transparent;
    }

    .range__control::-moz-range-thumb {
      border: solid 1px transparent;
    }

    .range__tooltip:after {
      display: none;
    }
  }
`;var Ai=class extends Xe{constructor(){super(...arguments),this.formControlController=new Xr(this),this.hasSlotController=new Bi(this,"help-text","label"),this.localize=new ei(this),this.hasFocus=!1,this.hasTooltip=!1,this.title="",this.name="",this.value=0,this.label="",this.helpText="",this.disabled=!1,this.min=0,this.max=100,this.step=1,this.tooltip="top",this.tooltipFormatter=t=>t.toString(),this.form="",this.defaultValue=0}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.syncRange()),this.value<this.min&&(this.value=this.min),this.value>this.max&&(this.value=this.max),this.updateComplete.then(()=>{this.syncRange(),this.resizeObserver.observe(this.input)})}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this.resizeObserver)==null||t.unobserve(this.input)}handleChange(){this.emit("sl-change")}handleInput(){this.value=parseFloat(this.input.value),this.emit("sl-input"),this.syncRange()}handleBlur(){this.hasFocus=!1,this.hasTooltip=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.hasTooltip=!0,this.emit("sl-focus")}handleThumbDragStart(){this.hasTooltip=!0}handleThumbDragEnd(){this.hasTooltip=!1}syncProgress(t){this.input.style.setProperty("--percent",`${t*100}%`)}syncTooltip(t){if(this.output!==null){let e=this.input.offsetWidth,i=this.output.offsetWidth,r=getComputedStyle(this.input).getPropertyValue("--thumb-size"),n=this.localize.dir()==="rtl",s=e*t;if(n){let o=`${e-s}px + ${t} * ${r}`;this.output.style.translate=`calc((${o} - ${i/2}px - ${r} / 2))`}else{let o=`${s}px - ${t} * ${r}`;this.output.style.translate=`calc(${o} - ${i/2}px + ${r} / 2)`}}}handleValueChange(){this.formControlController.updateValidity(),this.input.value=this.value.toString(),this.value=parseFloat(this.input.value),this.syncRange()}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}syncRange(){let t=Math.max(0,(this.value-this.min)/(this.max-this.min));this.syncProgress(t),this.tooltip!=="none"&&this.hasTooltip&&this.updateComplete.then(()=>this.syncTooltip(t))}handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}focus(t){this.input.focus(t)}blur(){this.input.blur()}stepUp(){this.input.stepUp(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}stepDown(){this.input.stepDown(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(t){this.input.setCustomValidity(t),this.formControlController.updateValidity()}render(){let t=this.hasSlotController.test("label"),e=this.hasSlotController.test("help-text"),i=this.label?!0:!!t,r=this.helpText?!0:!!e;return X`
      <div
        part="form-control"
        class=${et({"form-control":!0,"form-control--medium":!0,"form-control--has-label":i,"form-control--has-help-text":r})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${i?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${et({range:!0,"range--disabled":this.disabled,"range--focused":this.hasFocus,"range--rtl":this.localize.dir()==="rtl","range--tooltip-visible":this.hasTooltip,"range--tooltip-top":this.tooltip==="top","range--tooltip-bottom":this.tooltip==="bottom"})}
            @mousedown=${this.handleThumbDragStart}
            @mouseup=${this.handleThumbDragEnd}
            @touchstart=${this.handleThumbDragStart}
            @touchend=${this.handleThumbDragEnd}
          >
            <input
              part="input"
              id="input"
              class="range__control"
              title=${this.title}
              type="range"
              name=${Se(this.name)}
              ?disabled=${this.disabled}
              min=${Se(this.min)}
              max=${Se(this.max)}
              step=${Se(this.step)}
              .value=${wo(this.value.toString())}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @focus=${this.handleFocus}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @blur=${this.handleBlur}
            />
            ${this.tooltip!=="none"&&!this.disabled?X`
                  <output part="tooltip" class="range__tooltip">
                    ${typeof this.tooltipFormatter=="function"?this.tooltipFormatter(this.value):this.value}
                  </output>
                `:""}
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${r?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};Ai.styles=[tt,Gs,Yie];F([Ne(".range__control")],Ai.prototype,"input",2);F([Ne(".range__tooltip")],Ai.prototype,"output",2);F([Ie()],Ai.prototype,"hasFocus",2);F([Ie()],Ai.prototype,"hasTooltip",2);F([U()],Ai.prototype,"title",2);F([U()],Ai.prototype,"name",2);F([U({type:Number})],Ai.prototype,"value",2);F([U()],Ai.prototype,"label",2);F([U({attribute:"help-text"})],Ai.prototype,"helpText",2);F([U({type:Boolean,reflect:!0})],Ai.prototype,"disabled",2);F([U({type:Number})],Ai.prototype,"min",2);F([U({type:Number})],Ai.prototype,"max",2);F([U({type:Number})],Ai.prototype,"step",2);F([U()],Ai.prototype,"tooltip",2);F([U({attribute:!1})],Ai.prototype,"tooltipFormatter",2);F([U({reflect:!0})],Ai.prototype,"form",2);F([oa()],Ai.prototype,"defaultValue",2);F([Kp({passive:!0})],Ai.prototype,"handleThumbDragStart",1);F([je("value",{waitUntilFirstUpdate:!0})],Ai.prototype,"handleValueChange",1);F([je("disabled",{waitUntilFirstUpdate:!0})],Ai.prototype,"handleDisabledChange",1);F([je("hasTooltip",{waitUntilFirstUpdate:!0})],Ai.prototype,"syncRange",1);Ai.define("sl-range");var Kie=t=>X` <!--  -->
		<sl-range
			value=${Se(t.value)}
			step=${Se(t.step)}
			min=${Se(t.min)}
			max=${Se(t.max)}
			.label=${t.label}
			.helpText=${t.helpText}
			placeholder=${t.placeholder}
			.name=${t.id}
			.id=${t.id}
			.required=${t.required}
			@sl-input=${e=>{let i=e.target.value;console.log(i),t.valueChangedCallback?.(i)}}
			.disabled=${t.disabled}
		></sl-range>`;var Jie=ze`
  :host {
    --symbol-color: var(--sl-color-neutral-300);
    --symbol-color-active: var(--sl-color-amber-500);
    --symbol-size: 1.2rem;
    --symbol-spacing: var(--sl-spacing-3x-small);

    display: inline-flex;
  }

  .rating {
    position: relative;
    display: inline-flex;
    border-radius: var(--sl-border-radius-medium);
    vertical-align: middle;
  }

  .rating:focus {
    outline: none;
  }

  .rating:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .rating__symbols {
    display: inline-flex;
    position: relative;
    font-size: var(--symbol-size);
    line-height: 0;
    color: var(--symbol-color);
    white-space: nowrap;
    cursor: pointer;
  }

  .rating__symbols > * {
    padding: var(--symbol-spacing);
  }

  .rating__symbol--active,
  .rating__partial--filled {
    color: var(--symbol-color-active);
  }

  .rating__partial-symbol-container {
    position: relative;
  }

  .rating__partial--filled {
    position: absolute;
    top: var(--symbol-spacing);
    left: var(--symbol-spacing);
  }

  .rating__symbol {
    transition: var(--sl-transition-fast) scale;
    pointer-events: none;
  }

  .rating__symbol--hover {
    scale: 1.2;
  }

  .rating--disabled .rating__symbols,
  .rating--readonly .rating__symbols {
    cursor: default;
  }

  .rating--disabled .rating__symbol--hover,
  .rating--readonly .rating__symbol--hover {
    scale: none;
  }

  .rating--disabled {
    opacity: 0.5;
  }

  .rating--disabled .rating__symbols {
    cursor: not-allowed;
  }

  /* Forced colors mode */
  @media (forced-colors: active) {
    .rating__symbol--active {
      color: SelectedItem;
    }
  }
`;var iw=class extends Cs{constructor(e){if(super(e),this.it=lt,e.type!==Jr.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===lt||e==null)return this._t=void 0,this.it=e;if(e===nr)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;let i=[e];return i.raw=i,this._t={_$litType$:this.constructor.resultType,strings:i,values:[]}}};iw.directiveName="unsafeHTML",iw.resultType=1;var wd=Yn(iw);var yn=class extends Xe{constructor(){super(...arguments),this.localize=new ei(this),this.hoverValue=0,this.isHovering=!1,this.label="",this.value=0,this.max=5,this.precision=1,this.readonly=!1,this.disabled=!1,this.getSymbol=()=>'<sl-icon name="star-fill" library="system"></sl-icon>'}getValueFromMousePosition(t){return this.getValueFromXCoordinate(t.clientX)}getValueFromTouchPosition(t){return this.getValueFromXCoordinate(t.touches[0].clientX)}getValueFromXCoordinate(t){let e=this.localize.dir()==="rtl",{left:i,right:r,width:n}=this.rating.getBoundingClientRect(),s=e?this.roundToPrecision((r-t)/n*this.max,this.precision):this.roundToPrecision((t-i)/n*this.max,this.precision);return vn(s,0,this.max)}handleClick(t){this.disabled||(this.setValue(this.getValueFromMousePosition(t)),this.emit("sl-change"))}setValue(t){this.disabled||this.readonly||(this.value=t===this.value?0:t,this.isHovering=!1)}handleKeyDown(t){let e=this.localize.dir()==="ltr",i=this.localize.dir()==="rtl",r=this.value;if(!(this.disabled||this.readonly)){if(t.key==="ArrowDown"||e&&t.key==="ArrowLeft"||i&&t.key==="ArrowRight"){let n=t.shiftKey?1:this.precision;this.value=Math.max(0,this.value-n),t.preventDefault()}if(t.key==="ArrowUp"||e&&t.key==="ArrowRight"||i&&t.key==="ArrowLeft"){let n=t.shiftKey?1:this.precision;this.value=Math.min(this.max,this.value+n),t.preventDefault()}t.key==="Home"&&(this.value=0,t.preventDefault()),t.key==="End"&&(this.value=this.max,t.preventDefault()),this.value!==r&&this.emit("sl-change")}}handleMouseEnter(t){this.isHovering=!0,this.hoverValue=this.getValueFromMousePosition(t)}handleMouseMove(t){this.hoverValue=this.getValueFromMousePosition(t)}handleMouseLeave(){this.isHovering=!1}handleTouchStart(t){this.isHovering=!0,this.hoverValue=this.getValueFromTouchPosition(t),t.preventDefault()}handleTouchMove(t){this.hoverValue=this.getValueFromTouchPosition(t)}handleTouchEnd(t){this.isHovering=!1,this.setValue(this.hoverValue),this.emit("sl-change"),t.preventDefault()}roundToPrecision(t,e=.5){let i=1/e;return Math.ceil(t*i)/i}handleHoverValueChange(){this.emit("sl-hover",{detail:{phase:"move",value:this.hoverValue}})}handleIsHoveringChange(){this.emit("sl-hover",{detail:{phase:this.isHovering?"start":"end",value:this.hoverValue}})}focus(t){this.rating.focus(t)}blur(){this.rating.blur()}render(){let t=this.localize.dir()==="rtl",e=Array.from(Array(this.max).keys()),i=0;return this.disabled||this.readonly?i=this.value:i=this.isHovering?this.hoverValue:this.value,X`
      <div
        part="base"
        class=${et({rating:!0,"rating--readonly":this.readonly,"rating--disabled":this.disabled,"rating--rtl":t})}
        role="slider"
        aria-label=${this.label}
        aria-disabled=${this.disabled?"true":"false"}
        aria-readonly=${this.readonly?"true":"false"}
        aria-valuenow=${this.value}
        aria-valuemin=${0}
        aria-valuemax=${this.max}
        tabindex=${this.disabled||this.readonly?"-1":"0"}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mouseenter=${this.handleMouseEnter}
        @touchstart=${this.handleTouchStart}
        @mouseleave=${this.handleMouseLeave}
        @touchend=${this.handleTouchEnd}
        @mousemove=${this.handleMouseMove}
        @touchmove=${this.handleTouchMove}
      >
        <span class="rating__symbols">
          ${e.map(r=>i>r&&i<r+1?X`
                <span
                  class=${et({rating__symbol:!0,"rating__partial-symbol-container":!0,"rating__symbol--hover":this.isHovering&&Math.ceil(i)===r+1})}
                  role="presentation"
                >
                  <div
                    style=${ca({clipPath:t?`inset(0 ${(i-r)*100}% 0 0)`:`inset(0 0 0 ${(i-r)*100}%)`})}
                  >
                    ${wd(this.getSymbol(r+1))}
                  </div>
                  <div
                    class="rating__partial--filled"
                    style=${ca({clipPath:t?`inset(0 0 0 ${100-(i-r)*100}%)`:`inset(0 ${100-(i-r)*100}% 0 0)`})}
                  >
                    ${wd(this.getSymbol(r+1))}
                  </div>
                </span>
              `:X`
              <span
                class=${et({rating__symbol:!0,"rating__symbol--hover":this.isHovering&&Math.ceil(i)===r+1,"rating__symbol--active":i>=r+1})}
                role="presentation"
              >
                ${wd(this.getSymbol(r+1))}
              </span>
            `)}
        </span>
      </div>
    `}};yn.styles=[tt,Jie];yn.dependencies={"sl-icon":Bt};F([Ne(".rating")],yn.prototype,"rating",2);F([Ie()],yn.prototype,"hoverValue",2);F([Ie()],yn.prototype,"isHovering",2);F([U()],yn.prototype,"label",2);F([U({type:Number})],yn.prototype,"value",2);F([U({type:Number})],yn.prototype,"max",2);F([U({type:Number})],yn.prototype,"precision",2);F([U({type:Boolean,reflect:!0})],yn.prototype,"readonly",2);F([U({type:Boolean,reflect:!0})],yn.prototype,"disabled",2);F([U()],yn.prototype,"getSymbol",2);F([Kp({passive:!0})],yn.prototype,"handleTouchMove",1);F([je("hoverValue")],yn.prototype,"handleHoverValueChange",1);F([je("isHovering")],yn.prototype,"handleIsHoveringChange",1);yn.define("sl-rating");var Zie=t=>X`<!--  -->
		<div class="theme-shoelace widget-rating" part="widget-rating">
			<label for=${t.id}>${t.label}</label>

			<sl-rating
				value=${Se(t.value)}
				precision=${Se(t.step)}
				min=${Se(t.min)}
				max=${Se(t.max)}
				.helpText=${t.helpText}
				.name=${t.id}
				.id=${t.id}
				.required=${t.required}
				@sl-change=${e=>{let i=e.target.value;console.log(i),t.valueChangedCallback?.(i)}}
				.disabled=${t.disabled}
				.readonly=${t.readonly}
			></sl-rating>
		</div>`;var Qie=ze`
  :host {
    display: block;
  }

  /** The popup */
  .select {
    flex: 1 1 auto;
    display: inline-flex;
    width: 100%;
    position: relative;
    vertical-align: middle;
  }

  .select::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .select[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .select[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  /* Combobox */
  .select__combobox {
    flex: 1;
    display: flex;
    width: 100%;
    min-width: 0;
    position: relative;
    align-items: center;
    justify-content: start;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: pointer;
    transition:
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) border,
      var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  .select__display-input {
    position: relative;
    width: 100%;
    font: inherit;
    border: none;
    background: none;
    color: var(--sl-input-color);
    cursor: inherit;
    overflow: hidden;
    padding: 0;
    margin: 0;
    -webkit-appearance: none;
  }

  .select__display-input::placeholder {
    color: var(--sl-input-placeholder-color);
  }

  .select:not(.select--disabled):hover .select__display-input {
    color: var(--sl-input-color-hover);
  }

  .select__display-input:focus {
    outline: none;
  }

  /* Visually hide the display input when multiple is enabled */
  .select--multiple:not(.select--placeholder-visible) .select__display-input {
    position: absolute;
    z-index: -1;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
  }

  .select__value-input {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: -1;
  }

  .select__tags {
    display: flex;
    flex: 1;
    align-items: center;
    flex-wrap: wrap;
    margin-inline-start: var(--sl-spacing-2x-small);
  }

  .select__tags::slotted(sl-tag) {
    cursor: pointer !important;
  }

  .select--disabled .select__tags,
  .select--disabled .select__tags::slotted(sl-tag) {
    cursor: not-allowed !important;
  }

  /* Standard selects */
  .select--standard .select__combobox {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .select--standard.select--disabled .select__combobox {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    color: var(--sl-input-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
    outline: none;
  }

  .select--standard:not(.select--disabled).select--open .select__combobox,
  .select--standard:not(.select--disabled).select--focused .select__combobox {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  /* Filled selects */
  .select--filled .select__combobox {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .select--filled:hover:not(.select--disabled) .select__combobox {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .select--filled.select--disabled .select__combobox {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .select--filled:not(.select--disabled).select--open .select__combobox,
  .select--filled:not(.select--disabled).select--focused .select__combobox {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
  }

  /* Sizes */
  .select--small .select__combobox {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    min-height: var(--sl-input-height-small);
    padding-block: 0;
    padding-inline: var(--sl-input-spacing-small);
  }

  .select--small .select__clear {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .select--small .select__prefix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .select--small.select--multiple:not(.select--placeholder-visible) .select__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .select--small.select--multiple:not(.select--placeholder-visible) .select__combobox {
    padding-block: 2px;
    padding-inline-start: 0;
  }

  .select--small .select__tags {
    gap: 2px;
  }

  .select--medium .select__combobox {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    min-height: var(--sl-input-height-medium);
    padding-block: 0;
    padding-inline: var(--sl-input-spacing-medium);
  }

  .select--medium .select__clear {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .select--medium .select__prefix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .select--medium.select--multiple:not(.select--placeholder-visible) .select__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .select--medium.select--multiple:not(.select--placeholder-visible) .select__combobox {
    padding-inline-start: 0;
    padding-block: 3px;
  }

  .select--medium .select__tags {
    gap: 3px;
  }

  .select--large .select__combobox {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    min-height: var(--sl-input-height-large);
    padding-block: 0;
    padding-inline: var(--sl-input-spacing-large);
  }

  .select--large .select__clear {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .select--large .select__prefix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  .select--large.select--multiple:not(.select--placeholder-visible) .select__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .select--large.select--multiple:not(.select--placeholder-visible) .select__combobox {
    padding-inline-start: 0;
    padding-block: 4px;
  }

  .select--large .select__tags {
    gap: 4px;
  }

  /* Pills */
  .select--pill.select--small .select__combobox {
    border-radius: var(--sl-input-height-small);
  }

  .select--pill.select--medium .select__combobox {
    border-radius: var(--sl-input-height-medium);
  }

  .select--pill.select--large .select__combobox {
    border-radius: var(--sl-input-height-large);
  }

  /* Prefix and Suffix */
  .select__prefix,
  .select__suffix {
    flex: 0;
    display: inline-flex;
    align-items: center;
    color: var(--sl-input-placeholder-color);
  }

  .select__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-small);
  }

  /* Clear button */
  .select__clear {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .select__clear:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .select__clear:focus {
    outline: none;
  }

  /* Expand icon */
  .select__expand-icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    transition: var(--sl-transition-medium) rotate ease;
    rotate: 0;
    margin-inline-start: var(--sl-spacing-small);
  }

  .select--open .select__expand-icon {
    rotate: -180deg;
  }

  /* Listbox */
  .select__listbox {
    display: block;
    position: relative;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    box-shadow: var(--sl-shadow-large);
    background: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    padding-block: var(--sl-spacing-x-small);
    padding-inline: 0;
    overflow: auto;
    overscroll-behavior: none;

    /* Make sure it adheres to the popup's auto size */
    max-width: var(--auto-size-available-width);
    max-height: var(--auto-size-available-height);
  }

  .select__listbox ::slotted(sl-divider) {
    --spacing: var(--sl-spacing-x-small);
  }

  .select__listbox ::slotted(small) {
    display: block;
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    color: var(--sl-color-neutral-500);
    padding-block: var(--sl-spacing-2x-small);
    padding-inline: var(--sl-spacing-x-large);
  }
`;function tRe(t,e){return{top:Math.round(t.getBoundingClientRect().top-e.getBoundingClientRect().top),left:Math.round(t.getBoundingClientRect().left-e.getBoundingClientRect().left)}}function ere(t,e,i="vertical",r="smooth"){let n=tRe(t,e),s=n.top+e.scrollTop,o=n.left+e.scrollLeft,a=e.scrollLeft,l=e.scrollLeft+e.offsetWidth,u=e.scrollTop,c=e.scrollTop+e.offsetHeight;(i==="horizontal"||i==="both")&&(o<a?e.scrollTo({left:o,behavior:r}):o+t.clientWidth>l&&e.scrollTo({left:o-e.offsetWidth+t.clientWidth,behavior:r})),(i==="vertical"||i==="both")&&(s<u?e.scrollTo({top:s,behavior:r}):s+t.clientHeight>c&&e.scrollTo({top:s-e.offsetHeight+t.clientHeight,behavior:r}))}var Tt=class extends Xe{constructor(){super(...arguments),this.formControlController=new Xr(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new Bi(this,"help-text","label"),this.localize=new ei(this),this.typeToSelectString="",this.hasFocus=!1,this.displayLabel="",this.selectedOptions=[],this.valueHasChanged=!1,this.name="",this._value="",this.defaultValue="",this.size="medium",this.placeholder="",this.multiple=!1,this.maxOptionsVisible=3,this.disabled=!1,this.clearable=!1,this.open=!1,this.hoist=!1,this.filled=!1,this.pill=!1,this.label="",this.placement="bottom",this.helpText="",this.form="",this.required=!1,this.getTag=t=>X`
      <sl-tag
        part="tag"
        exportparts="
              base:tag__base,
              content:tag__content,
              remove-button:tag__remove-button,
              remove-button__base:tag__remove-button__base
            "
        ?pill=${this.pill}
        size=${this.size}
        removable
        @sl-remove=${e=>this.handleTagRemove(e,t)}
      >
        ${t.getTextLabel()}
      </sl-tag>
    `,this.handleDocumentFocusIn=t=>{let e=t.composedPath();this&&!e.includes(this)&&this.hide()},this.handleDocumentKeyDown=t=>{let e=t.target,i=e.closest(".select__clear")!==null,r=e.closest("sl-icon-button")!==null;if(!(i||r)){if(t.key==="Escape"&&this.open&&!this.closeWatcher&&(t.preventDefault(),t.stopPropagation(),this.hide(),this.displayInput.focus({preventScroll:!0})),t.key==="Enter"||t.key===" "&&this.typeToSelectString===""){if(t.preventDefault(),t.stopImmediatePropagation(),!this.open){this.show();return}this.currentOption&&!this.currentOption.disabled&&(this.valueHasChanged=!0,this.multiple?this.toggleOptionSelection(this.currentOption):this.setSelectedOptions(this.currentOption),this.updateComplete.then(()=>{this.emit("sl-input"),this.emit("sl-change")}),this.multiple||(this.hide(),this.displayInput.focus({preventScroll:!0})));return}if(["ArrowUp","ArrowDown","Home","End"].includes(t.key)){let n=this.getAllOptions(),s=n.indexOf(this.currentOption),o=Math.max(0,s);if(t.preventDefault(),!this.open&&(this.show(),this.currentOption))return;t.key==="ArrowDown"?(o=s+1,o>n.length-1&&(o=0)):t.key==="ArrowUp"?(o=s-1,o<0&&(o=n.length-1)):t.key==="Home"?o=0:t.key==="End"&&(o=n.length-1),this.setCurrentOption(n[o])}if(t.key&&t.key.length===1||t.key==="Backspace"){let n=this.getAllOptions();if(t.metaKey||t.ctrlKey||t.altKey)return;if(!this.open){if(t.key==="Backspace")return;this.show()}t.stopPropagation(),t.preventDefault(),clearTimeout(this.typeToSelectTimeout),this.typeToSelectTimeout=window.setTimeout(()=>this.typeToSelectString="",1e3),t.key==="Backspace"?this.typeToSelectString=this.typeToSelectString.slice(0,-1):this.typeToSelectString+=t.key.toLowerCase();for(let s of n)if(s.getTextLabel().toLowerCase().startsWith(this.typeToSelectString)){this.setCurrentOption(s);break}}}},this.handleDocumentMouseDown=t=>{let e=t.composedPath();this&&!e.includes(this)&&this.hide()}}get value(){return this._value}set value(t){this.multiple?t=Array.isArray(t)?t:t.split(" "):t=Array.isArray(t)?t.join(" "):t,this._value!==t&&(this.valueHasChanged=!0,this._value=t)}get validity(){return this.valueInput.validity}get validationMessage(){return this.valueInput.validationMessage}connectedCallback(){super.connectedCallback(),setTimeout(()=>{this.handleDefaultSlotChange()}),this.open=!1}addOpenListeners(){var t;document.addEventListener("focusin",this.handleDocumentFocusIn),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown),this.getRootNode()!==document&&this.getRootNode().addEventListener("focusin",this.handleDocumentFocusIn),"CloseWatcher"in window&&((t=this.closeWatcher)==null||t.destroy(),this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>{this.open&&(this.hide(),this.displayInput.focus({preventScroll:!0}))})}removeOpenListeners(){var t;document.removeEventListener("focusin",this.handleDocumentFocusIn),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown),this.getRootNode()!==document&&this.getRootNode().removeEventListener("focusin",this.handleDocumentFocusIn),(t=this.closeWatcher)==null||t.destroy()}handleFocus(){this.hasFocus=!0,this.displayInput.setSelectionRange(0,0),this.emit("sl-focus")}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleLabelClick(){this.displayInput.focus()}handleComboboxMouseDown(t){let i=t.composedPath().some(r=>r instanceof Element&&r.tagName.toLowerCase()==="sl-icon-button");this.disabled||i||(t.preventDefault(),this.displayInput.focus({preventScroll:!0}),this.open=!this.open)}handleComboboxKeyDown(t){t.key!=="Tab"&&(t.stopPropagation(),this.handleDocumentKeyDown(t))}handleClearClick(t){t.stopPropagation(),this.valueHasChanged=!0,this.value!==""&&(this.setSelectedOptions([]),this.displayInput.focus({preventScroll:!0}),this.updateComplete.then(()=>{this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change")}))}handleClearMouseDown(t){t.stopPropagation(),t.preventDefault()}handleOptionClick(t){let i=t.target.closest("sl-option"),r=this.value;i&&!i.disabled&&(this.valueHasChanged=!0,this.multiple?this.toggleOptionSelection(i):this.setSelectedOptions(i),this.updateComplete.then(()=>this.displayInput.focus({preventScroll:!0})),this.value!==r&&this.updateComplete.then(()=>{this.emit("sl-input"),this.emit("sl-change")}),this.multiple||(this.hide(),this.displayInput.focus({preventScroll:!0})))}handleDefaultSlotChange(){customElements.get("sl-option")||customElements.whenDefined("sl-option").then(()=>this.handleDefaultSlotChange());let t=this.getAllOptions(),e=this.valueHasChanged?this.value:this.defaultValue,i=Array.isArray(e)?e:[e],r=[];t.forEach(n=>r.push(n.value)),this.setSelectedOptions(t.filter(n=>i.includes(n.value)))}handleTagRemove(t,e){t.stopPropagation(),this.valueHasChanged=!0,this.disabled||(this.toggleOptionSelection(e,!1),this.updateComplete.then(()=>{this.emit("sl-input"),this.emit("sl-change")}))}getAllOptions(){return[...this.querySelectorAll("sl-option")]}getFirstOption(){return this.querySelector("sl-option")}setCurrentOption(t){this.getAllOptions().forEach(i=>{i.current=!1,i.tabIndex=-1}),t&&(this.currentOption=t,t.current=!0,t.tabIndex=0,t.focus())}setSelectedOptions(t){let e=this.getAllOptions(),i=Array.isArray(t)?t:[t];e.forEach(r=>r.selected=!1),i.length&&i.forEach(r=>r.selected=!0),this.selectionChanged()}toggleOptionSelection(t,e){e===!0||e===!1?t.selected=e:t.selected=!t.selected,this.selectionChanged()}selectionChanged(){var t,e,i;let r=this.getAllOptions();this.selectedOptions=r.filter(s=>s.selected);let n=this.valueHasChanged;if(this.multiple)this.value=this.selectedOptions.map(s=>s.value),this.placeholder&&this.value.length===0?this.displayLabel="":this.displayLabel=this.localize.term("numOptionsSelected",this.selectedOptions.length);else{let s=this.selectedOptions[0];this.value=(t=s?.value)!=null?t:"",this.displayLabel=(i=(e=s?.getTextLabel)==null?void 0:e.call(s))!=null?i:""}this.valueHasChanged=n,this.updateComplete.then(()=>{this.formControlController.updateValidity()})}get tags(){return this.selectedOptions.map((t,e)=>{if(e<this.maxOptionsVisible||this.maxOptionsVisible<=0){let i=this.getTag(t,e);return X`<div @sl-remove=${r=>this.handleTagRemove(r,t)}>
          ${typeof i=="string"?wd(i):i}
        </div>`}else if(e===this.maxOptionsVisible)return X`<sl-tag size=${this.size}>+${this.selectedOptions.length-e}</sl-tag>`;return X``})}handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}handleDisabledChange(){this.disabled&&(this.open=!1,this.handleOpenChange())}attributeChangedCallback(t,e,i){if(super.attributeChangedCallback(t,e,i),t==="value"){let r=this.valueHasChanged;this.value=this.defaultValue,this.valueHasChanged=r}}handleValueChange(){if(!this.valueHasChanged){let i=this.valueHasChanged;this.value=this.defaultValue,this.valueHasChanged=i}let t=this.getAllOptions(),e=Array.isArray(this.value)?this.value:[this.value];this.setSelectedOptions(t.filter(i=>e.includes(i.value)))}async handleOpenChange(){if(this.open&&!this.disabled){this.setCurrentOption(this.selectedOptions[0]||this.getFirstOption()),this.emit("sl-show"),this.addOpenListeners(),await Pc(this),this.listbox.hidden=!1,this.popup.active=!0,requestAnimationFrame(()=>{this.setCurrentOption(this.currentOption)});let{keyframes:t,options:e}=Lc(this,"select.show",{dir:this.localize.dir()});await Oc(this.popup.popup,t,e),this.currentOption&&ere(this.currentOption,this.listbox,"vertical","auto"),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await Pc(this);let{keyframes:t,options:e}=Lc(this,"select.hide",{dir:this.localize.dir()});await Oc(this.popup.popup,t,e),this.listbox.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}async show(){if(this.open||this.disabled){this.open=!1;return}return this.open=!0,i1(this,"sl-after-show")}async hide(){if(!this.open||this.disabled){this.open=!1;return}return this.open=!1,i1(this,"sl-after-hide")}checkValidity(){return this.valueInput.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.valueInput.reportValidity()}setCustomValidity(t){this.valueInput.setCustomValidity(t),this.formControlController.updateValidity()}focus(t){this.displayInput.focus(t)}blur(){this.displayInput.blur()}render(){let t=this.hasSlotController.test("label"),e=this.hasSlotController.test("help-text"),i=this.label?!0:!!t,r=this.helpText?!0:!!e,n=this.clearable&&!this.disabled&&this.value.length>0,s=this.placeholder&&this.value&&this.value.length<=0;return X`
      <div
        part="form-control"
        class=${et({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":i,"form-control--has-help-text":r})}
      >
        <label
          id="label"
          part="form-control-label"
          class="form-control__label"
          aria-hidden=${i?"false":"true"}
          @click=${this.handleLabelClick}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <sl-popup
            class=${et({select:!0,"select--standard":!0,"select--filled":this.filled,"select--pill":this.pill,"select--open":this.open,"select--disabled":this.disabled,"select--multiple":this.multiple,"select--focused":this.hasFocus,"select--placeholder-visible":s,"select--top":this.placement==="top","select--bottom":this.placement==="bottom","select--small":this.size==="small","select--medium":this.size==="medium","select--large":this.size==="large"})}
            placement=${this.placement}
            strategy=${this.hoist?"fixed":"absolute"}
            flip
            shift
            sync="width"
            auto-size="vertical"
            auto-size-padding="10"
          >
            <div
              part="combobox"
              class="select__combobox"
              slot="anchor"
              @keydown=${this.handleComboboxKeyDown}
              @mousedown=${this.handleComboboxMouseDown}
            >
              <slot part="prefix" name="prefix" class="select__prefix"></slot>

              <input
                part="display-input"
                class="select__display-input"
                type="text"
                placeholder=${this.placeholder}
                .disabled=${this.disabled}
                .value=${this.displayLabel}
                autocomplete="off"
                spellcheck="false"
                autocapitalize="off"
                readonly
                aria-controls="listbox"
                aria-expanded=${this.open?"true":"false"}
                aria-haspopup="listbox"
                aria-labelledby="label"
                aria-disabled=${this.disabled?"true":"false"}
                aria-describedby="help-text"
                role="combobox"
                tabindex="0"
                @focus=${this.handleFocus}
                @blur=${this.handleBlur}
              />

              ${this.multiple?X`<div part="tags" class="select__tags">${this.tags}</div>`:""}

              <input
                class="select__value-input"
                type="text"
                ?disabled=${this.disabled}
                ?required=${this.required}
                .value=${Array.isArray(this.value)?this.value.join(", "):this.value}
                tabindex="-1"
                aria-hidden="true"
                @focus=${()=>this.focus()}
                @invalid=${this.handleInvalid}
              />

              ${n?X`
                    <button
                      part="clear-button"
                      class="select__clear"
                      type="button"
                      aria-label=${this.localize.term("clearEntry")}
                      @mousedown=${this.handleClearMouseDown}
                      @click=${this.handleClearClick}
                      tabindex="-1"
                    >
                      <slot name="clear-icon">
                        <sl-icon name="x-circle-fill" library="system"></sl-icon>
                      </slot>
                    </button>
                  `:""}

              <slot name="suffix" part="suffix" class="select__suffix"></slot>

              <slot name="expand-icon" part="expand-icon" class="select__expand-icon">
                <sl-icon library="system" name="chevron-down"></sl-icon>
              </slot>
            </div>

            <div
              id="listbox"
              role="listbox"
              aria-expanded=${this.open?"true":"false"}
              aria-multiselectable=${this.multiple?"true":"false"}
              aria-labelledby="label"
              part="listbox"
              class="select__listbox"
              tabindex="-1"
              @mouseup=${this.handleOptionClick}
              @slotchange=${this.handleDefaultSlotChange}
            >
              <slot></slot>
            </div>
          </sl-popup>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${r?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};Tt.styles=[tt,Gs,Qie];Tt.dependencies={"sl-icon":Bt,"sl-popup":Zt,"sl-tag":au};F([Ne(".select")],Tt.prototype,"popup",2);F([Ne(".select__combobox")],Tt.prototype,"combobox",2);F([Ne(".select__display-input")],Tt.prototype,"displayInput",2);F([Ne(".select__value-input")],Tt.prototype,"valueInput",2);F([Ne(".select__listbox")],Tt.prototype,"listbox",2);F([Ie()],Tt.prototype,"hasFocus",2);F([Ie()],Tt.prototype,"displayLabel",2);F([Ie()],Tt.prototype,"currentOption",2);F([Ie()],Tt.prototype,"selectedOptions",2);F([Ie()],Tt.prototype,"valueHasChanged",2);F([U()],Tt.prototype,"name",2);F([Ie()],Tt.prototype,"value",1);F([U({attribute:"value"})],Tt.prototype,"defaultValue",2);F([U({reflect:!0})],Tt.prototype,"size",2);F([U()],Tt.prototype,"placeholder",2);F([U({type:Boolean,reflect:!0})],Tt.prototype,"multiple",2);F([U({attribute:"max-options-visible",type:Number})],Tt.prototype,"maxOptionsVisible",2);F([U({type:Boolean,reflect:!0})],Tt.prototype,"disabled",2);F([U({type:Boolean})],Tt.prototype,"clearable",2);F([U({type:Boolean,reflect:!0})],Tt.prototype,"open",2);F([U({type:Boolean})],Tt.prototype,"hoist",2);F([U({type:Boolean,reflect:!0})],Tt.prototype,"filled",2);F([U({type:Boolean,reflect:!0})],Tt.prototype,"pill",2);F([U()],Tt.prototype,"label",2);F([U({reflect:!0})],Tt.prototype,"placement",2);F([U({attribute:"help-text"})],Tt.prototype,"helpText",2);F([U({reflect:!0})],Tt.prototype,"form",2);F([U({type:Boolean,reflect:!0})],Tt.prototype,"required",2);F([U()],Tt.prototype,"getTag",2);F([je("disabled",{waitUntilFirstUpdate:!0})],Tt.prototype,"handleDisabledChange",1);F([je(["defaultValue","value"],{waitUntilFirstUpdate:!0})],Tt.prototype,"handleValueChange",1);F([je("open",{waitUntilFirstUpdate:!0})],Tt.prototype,"handleOpenChange",1);Fc("select.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}});Fc("select.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}});Tt.define("sl-select");var tre=ze`
  :host {
    display: block;
    user-select: none;
    -webkit-user-select: none;
  }

  :host(:focus) {
    outline: none;
  }

  .option {
    position: relative;
    display: flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-700);
    padding: var(--sl-spacing-x-small) var(--sl-spacing-medium) var(--sl-spacing-x-small) var(--sl-spacing-x-small);
    transition: var(--sl-transition-fast) fill;
    cursor: pointer;
  }

  .option--hover:not(.option--current):not(.option--disabled) {
    background-color: var(--sl-color-neutral-100);
    color: var(--sl-color-neutral-1000);
  }

  .option--current,
  .option--current.option--disabled {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
    opacity: 1;
  }

  .option--disabled {
    outline: none;
    opacity: 0.5;
    cursor: not-allowed;
  }

  .option__label {
    flex: 1 1 auto;
    display: inline-block;
    line-height: var(--sl-line-height-dense);
  }

  .option .option__check {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    visibility: hidden;
    padding-inline-end: var(--sl-spacing-2x-small);
  }

  .option--selected .option__check {
    visibility: visible;
  }

  .option__prefix,
  .option__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .option__prefix::slotted(*) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .option__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  @media (forced-colors: active) {
    :host(:hover:not([aria-disabled='true'])) .option {
      outline: dashed 1px SelectedItem;
      outline-offset: -1px;
    }
  }
`;var Co=class extends Xe{constructor(){super(...arguments),this.localize=new ei(this),this.isInitialized=!1,this.current=!1,this.selected=!1,this.hasHover=!1,this.value="",this.disabled=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","option"),this.setAttribute("aria-selected","false")}handleDefaultSlotChange(){this.isInitialized?customElements.whenDefined("sl-select").then(()=>{let t=this.closest("sl-select");t&&t.handleDefaultSlotChange()}):this.isInitialized=!0}handleMouseEnter(){this.hasHover=!0}handleMouseLeave(){this.hasHover=!1}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleSelectedChange(){this.setAttribute("aria-selected",this.selected?"true":"false")}handleValueChange(){typeof this.value!="string"&&(this.value=String(this.value)),this.value.includes(" ")&&(console.error("Option values cannot include a space. All spaces have been replaced with underscores.",this),this.value=this.value.replace(/ /g,"_"))}getTextLabel(){let t=this.childNodes,e="";return[...t].forEach(i=>{i.nodeType===Node.ELEMENT_NODE&&(i.hasAttribute("slot")||(e+=i.textContent)),i.nodeType===Node.TEXT_NODE&&(e+=i.textContent)}),e.trim()}render(){return X`
      <div
        part="base"
        class=${et({option:!0,"option--current":this.current,"option--disabled":this.disabled,"option--selected":this.selected,"option--hover":this.hasHover})}
        @mouseenter=${this.handleMouseEnter}
        @mouseleave=${this.handleMouseLeave}
      >
        <sl-icon part="checked-icon" class="option__check" name="check" library="system" aria-hidden="true"></sl-icon>
        <slot part="prefix" name="prefix" class="option__prefix"></slot>
        <slot part="label" class="option__label" @slotchange=${this.handleDefaultSlotChange}></slot>
        <slot part="suffix" name="suffix" class="option__suffix"></slot>
      </div>
    `}};Co.styles=[tt,tre];Co.dependencies={"sl-icon":Bt};F([Ne(".option__label")],Co.prototype,"defaultSlot",2);F([Ie()],Co.prototype,"current",2);F([Ie()],Co.prototype,"selected",2);F([Ie()],Co.prototype,"hasHover",2);F([U({reflect:!0})],Co.prototype,"value",2);F([U({type:Boolean,reflect:!0})],Co.prototype,"disabled",2);F([je("disabled")],Co.prototype,"handleDisabledChange",1);F([je("selected")],Co.prototype,"handleSelectedChange",1);F([je("value")],Co.prototype,"handleValueChange",1);Co.define("sl-option");var ire=t=>X`
	<sl-select
		value=${Se(t.value)}
		.required=${t.required}
		@sl-change=${e=>{let i=e.target.value;Array.isArray(i)||((t.type==="number"||t.type==="integer")&&(i=Number(i)),t.valueChangedCallback?.(i))}}
		.disabled=${t.disabled}
		label=${Se(t.label)}
		.helpText=${t.helpText??""}
		>${t.enum?.map(e=>X` <sl-option .value=${String(e)}>
					${e}
				</sl-option>`)}</sl-select
	>
`;var rre=t=>X`
	<sl-select
		class="theme-shoelace widget-select-multi level-${t.level}"
		part="widget-select-multi"
		.id=${t.id}
		.label=${t.label??""}
		.value=${t.value}
		multiple
		clearable
		.disabled=${t.disabled}
		.helpText=${t.helpText??""}
		@sl-change=${e=>{let{value:i}=e.target;t.valueChangedCallback?.(i)}}
	>
		${t?.enum?.map(e=>X`<sl-option value=${e}>${e}</sl-option>`)}
	</sl-select>
`;Vt.define("sl-button");var nre=t=>X`
	<!--  -->
	<div id=${t.id} class="theme-shoelace widget-submit">
		<sl-button type="submit" size="large"
			>${t.label??"Submit"}</sl-button
		>
	</div>
`;var sre=t=>X`
	<sl-switch
		placeholder=${t.placeholder}
		.checked=${typeof t.value=="boolean"?t.value:!1}
		.name=${t.id}
		.id=${t.id}
		.required=${t.required}
		@sl-input=${e=>{let{checked:i}=e.target;t.valueChangedCallback?.(i)}}
		.disabled=${t.disabled}
		>${t.label}
		${t.helpText?X`<small> -&nbsp;${t.helpText}</small>`:lt}
	</sl-switch>
`;var ore=t=>X`
	<!-- ${t.pattern} -->
	<sl-input
		.type=${t.inputType}
		.label=${t.label}
		.helpText=${t.helpText}
		placeholder=${t.placeholder}
		value=${Se(t.value)}
		.name=${t.id}
		.id=${t.id}
		.required=${t.required}
		minLength=${Se(t.minLength)}
		maxLength=${Se(t.maxLength)}
		pattern=${Se(t.pattern)}
		@sl-input=${e=>{let{value:i}=e.target;t.valueChangedCallback?.(i)}}
		.disabled=${t.disabled}
		.readonly=${t.readonly}
	>
	</sl-input>
`;var are=ze`
  :host {
    display: block;
  }

  .textarea {
    display: grid;
    align-items: center;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    transition:
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) border,
      var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
    cursor: text;
  }

  /* Standard textareas */
  .textarea--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .textarea--standard:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }
  .textarea--standard:hover:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-hover);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    color: var(--sl-input-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-focus);
  }

  .textarea--standard.textarea--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea__control,
  .textarea__size-adjuster {
    grid-area: 1 / 1 / 2 / 2;
  }

  .textarea__size-adjuster {
    visibility: hidden;
    pointer-events: none;
    opacity: 0;
  }

  .textarea--standard.textarea--disabled .textarea__control {
    color: var(--sl-input-color-disabled);
  }

  .textarea--standard.textarea--disabled .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled textareas */
  .textarea--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .textarea--filled:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .textarea--filled.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .textarea--filled.textarea--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea__control {
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: 1.4;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .textarea__control::-webkit-search-decoration,
  .textarea__control::-webkit-search-cancel-button,
  .textarea__control::-webkit-search-results-button,
  .textarea__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
    -webkit-user-select: none;
  }

  .textarea__control:focus {
    outline: none;
  }

  /*
   * Size modifiers
   */

  .textarea--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
  }

  .textarea--small .textarea__control {
    padding: 0.5em var(--sl-input-spacing-small);
  }

  .textarea--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
  }

  .textarea--medium .textarea__control {
    padding: 0.5em var(--sl-input-spacing-medium);
  }

  .textarea--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
  }

  .textarea--large .textarea__control {
    padding: 0.5em var(--sl-input-spacing-large);
  }

  /*
   * Resize types
   */

  .textarea--resize-none .textarea__control {
    resize: none;
  }

  .textarea--resize-vertical .textarea__control {
    resize: vertical;
  }

  .textarea--resize-auto .textarea__control {
    height: auto;
    resize: none;
    overflow-y: hidden;
  }
`;var zt=class extends Xe{constructor(){super(...arguments),this.formControlController=new Xr(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new Bi(this,"help-text","label"),this.hasFocus=!1,this.title="",this.name="",this.value="",this.size="medium",this.filled=!1,this.label="",this.helpText="",this.placeholder="",this.rows=4,this.resize="vertical",this.disabled=!1,this.readonly=!1,this.form="",this.required=!1,this.spellcheck=!0,this.defaultValue=""}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.setTextareaHeight()),this.updateComplete.then(()=>{this.setTextareaHeight(),this.resizeObserver.observe(this.input)})}firstUpdated(){this.formControlController.updateValidity()}disconnectedCallback(){var t;super.disconnectedCallback(),this.input&&((t=this.resizeObserver)==null||t.unobserve(this.input))}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.setTextareaHeight(),this.emit("sl-change")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.emit("sl-input")}handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}setTextareaHeight(){this.resize==="auto"?(this.sizeAdjuster.style.height=`${this.input.clientHeight}px`,this.input.style.height="auto",this.input.style.height=`${this.input.scrollHeight}px`):this.input.style.height=""}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleRowsChange(){this.setTextareaHeight()}async handleValueChange(){await this.updateComplete,this.formControlController.updateValidity(),this.setTextareaHeight()}focus(t){this.input.focus(t)}blur(){this.input.blur()}select(){this.input.select()}scrollPosition(t){if(t){typeof t.top=="number"&&(this.input.scrollTop=t.top),typeof t.left=="number"&&(this.input.scrollLeft=t.left);return}return{top:this.input.scrollTop,left:this.input.scrollTop}}setSelectionRange(t,e,i="none"){this.input.setSelectionRange(t,e,i)}setRangeText(t,e,i,r="preserve"){let n=e??this.input.selectionStart,s=i??this.input.selectionEnd;this.input.setRangeText(t,n,s,r),this.value!==this.input.value&&(this.value=this.input.value,this.setTextareaHeight())}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(t){this.input.setCustomValidity(t),this.formControlController.updateValidity()}render(){let t=this.hasSlotController.test("label"),e=this.hasSlotController.test("help-text"),i=this.label?!0:!!t,r=this.helpText?!0:!!e;return X`
      <div
        part="form-control"
        class=${et({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":i,"form-control--has-help-text":r})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${i?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${et({textarea:!0,"textarea--small":this.size==="small","textarea--medium":this.size==="medium","textarea--large":this.size==="large","textarea--standard":!this.filled,"textarea--filled":this.filled,"textarea--disabled":this.disabled,"textarea--focused":this.hasFocus,"textarea--empty":!this.value,"textarea--resize-none":this.resize==="none","textarea--resize-vertical":this.resize==="vertical","textarea--resize-auto":this.resize==="auto"})}
          >
            <textarea
              part="textarea"
              id="input"
              class="textarea__control"
              title=${this.title}
              name=${Se(this.name)}
              .value=${wo(this.value)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${Se(this.placeholder)}
              rows=${Se(this.rows)}
              minlength=${Se(this.minlength)}
              maxlength=${Se(this.maxlength)}
              autocapitalize=${Se(this.autocapitalize)}
              autocorrect=${Se(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${Se(this.spellcheck)}
              enterkeyhint=${Se(this.enterkeyhint)}
              inputmode=${Se(this.inputmode)}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            ></textarea>
            <!-- This "adjuster" exists to prevent layout shifting. https://github.com/shoelace-style/shoelace/issues/2180 -->
            <div part="textarea-adjuster" class="textarea__size-adjuster" ?hidden=${this.resize!=="auto"}></div>
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${r?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};zt.styles=[tt,Gs,are];F([Ne(".textarea__control")],zt.prototype,"input",2);F([Ne(".textarea__size-adjuster")],zt.prototype,"sizeAdjuster",2);F([Ie()],zt.prototype,"hasFocus",2);F([U()],zt.prototype,"title",2);F([U()],zt.prototype,"name",2);F([U()],zt.prototype,"value",2);F([U({reflect:!0})],zt.prototype,"size",2);F([U({type:Boolean,reflect:!0})],zt.prototype,"filled",2);F([U()],zt.prototype,"label",2);F([U({attribute:"help-text"})],zt.prototype,"helpText",2);F([U()],zt.prototype,"placeholder",2);F([U({type:Number})],zt.prototype,"rows",2);F([U()],zt.prototype,"resize",2);F([U({type:Boolean,reflect:!0})],zt.prototype,"disabled",2);F([U({type:Boolean,reflect:!0})],zt.prototype,"readonly",2);F([U({reflect:!0})],zt.prototype,"form",2);F([U({type:Boolean,reflect:!0})],zt.prototype,"required",2);F([U({type:Number})],zt.prototype,"minlength",2);F([U({type:Number})],zt.prototype,"maxlength",2);F([U()],zt.prototype,"autocapitalize",2);F([U()],zt.prototype,"autocorrect",2);F([U()],zt.prototype,"autocomplete",2);F([U({type:Boolean})],zt.prototype,"autofocus",2);F([U()],zt.prototype,"enterkeyhint",2);F([U({type:Boolean,converter:{fromAttribute:t=>!(!t||t==="false"),toAttribute:t=>t?"true":"false"}})],zt.prototype,"spellcheck",2);F([U()],zt.prototype,"inputmode",2);F([oa()],zt.prototype,"defaultValue",2);F([je("disabled",{waitUntilFirstUpdate:!0})],zt.prototype,"handleDisabledChange",1);F([je("rows",{waitUntilFirstUpdate:!0})],zt.prototype,"handleRowsChange",1);F([je("value",{waitUntilFirstUpdate:!0})],zt.prototype,"handleValueChange",1);zt.define("sl-textarea");var lre=t=>X`
	<!--  -->
	<sl-textarea
		.label=${t.label??""}
		.helpText=${t.helpText??""}
		placeholder=${t.placeholder??""}
		value=${Se(t.value)}
		.name=${t.id}
		.id=${t.id}
		.required=${t.required??!0}
		minLength=${Se(t.minLength)}
		maxLength=${Se(t.maxLength)}
		@sl-input=${e=>{let{value:i}=e.target;t.valueChangedCallback?.(i)}}
		.disabled=${t.disabled}
		.readonly=${t.readonly}
	>
	</sl-textarea>
`;var ure=ze`@charset "UTF-8";
:host {
  box-sizing: border-box;
  font: 16px var(--sl-font-sans);
  font-weight: var(--sl-font-weight-normal);
  line-height: var(--sl-line-height-normal);
  color: var(--sl-color-neutral-900);
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  --sl-input-focus-ring-color: var(--sl-color-primary-50);
}
:host *,
:host *::before,
:host *::after {
  box-sizing: inherit;
}

::selection {
  color: var(--sl-color-primary-300);
  background-color: var(--sl-color-primary-950);
}

sl-input,
sl-select,
sl-checkbox {
  display: block;
}

/* User invalid styles */
sl-input[data-user-invalid]::part(base),
sl-select[data-user-invalid]::part(combobox),
sl-checkbox[data-user-invalid]::part(control) {
  border-color: var(--sl-color-danger-600);
}

[data-user-invalid]::part(form-control-label),
[data-user-invalid]::part(form-control-help-text),
sl-checkbox[data-user-invalid]::part(label) {
  color: var(--sl-color-danger-700);
}

sl-checkbox[data-user-invalid]::part(control) {
  outline: none;
}

sl-input:focus-within[data-user-invalid]::part(base),
sl-select:focus-within[data-user-invalid]::part(combobox),
sl-checkbox:focus-within[data-user-invalid]::part(control) {
  border-color: var(--sl-color-danger-600);
  box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-color-danger-300);
}

.theme-shoelace.widget-fieldset {
  display: flex;
  flex-direction: column;
  gap: var(--sl-spacing-x-large) 0;
  padding: var(--sl-spacing-medium) var(--sl-spacing-small);
  margin: 0;
  font-weight: var(--sl-font-weight-semibold);
  border: 1px solid var(--sl-color-neutral-50);
  border-radius: var(--sl-border-radius-large);
}
.theme-shoelace.widget-fieldset .widget-fieldset__description {
  font-size: var(--sl-input-help-text-font-size-medium);
  color: var(--sl-input-help-text-color);
}
.theme-shoelace.widget-fieldset .theme-shoelace.widget-fieldset {
  transition: box-shadow var(--sl-transition-medium);
}
.theme-shoelace.widget-fieldset .theme-shoelace.widget-fieldset:hover {
  box-shadow: var(--sl-shadow-medium);
}
.theme-shoelace.widget-fieldset.level-0 legend {
  font-size: var(--sl-font-size-2x-large);
  font-weight: 200;
}
.theme-shoelace.widget-fieldset.level-1 legend {
  font-size: var(--sl-font-size-x-large);
  font-weight: var(--sl-font-weight-light);
}
.theme-shoelace.widget-fieldset.level-2 legend {
  font-size: var(--sl-font-size-large);
  font-weight: var(--sl-font-weight-light);
}
.theme-shoelace.widget-fieldset.level-3 legend {
  font-size: var(--sl-font-size-medium);
  font-weight: var(--sl-font-weight-bold);
}
.theme-shoelace.widget-array .widget-array__card {
  transition: box-shadow var(--sl-transition-medium);
}
.theme-shoelace.widget-array .widget-array__card:hover {
  box-shadow: var(--sl-shadow-medium);
}
.theme-shoelace.widget-array .widget-array__card[data-dropzone] {
  border-radius: var(--sl-border-radius-medium);
  outline: 1px solid var(--sl-color-primary-500);
}
.theme-shoelace.widget-array .widget-array__card[data-dropzone] * {
  pointer-events: none;
}
.theme-shoelace.widget-array sl-card::part(body) {
  padding: var(--sl-spacing-medium) var(--sl-spacing-small);
}
.theme-shoelace.widget-array .widget-array__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  font-size: 0.8em;
  user-select: none;
}
.theme-shoelace.widget-array .widget-array__header sl-tag::part(base) {
  background: var(--sl-color-neutral-100);
}
.theme-shoelace.widget-array .widget-array__handle {
  display: flex;
  flex-grow: 1;
  align-items: center;
  justify-content: space-between;
  height: 2rem;
  padding-left: var(--sl-spacing-2x-small);
  margin: 0 var(--sl-spacing-medium) 0 0;
  font-size: 1.25em;
  color: var(--sl-color-neutral-500);
  cursor: move;
  transition: opacity, var(--sl-transition-fast);
}
.theme-shoelace.widget-array .widget-array__handle:hover {
  color: var(--sl-color-neutral-600);
  background: var(--sl-color-neutral-100);
  border-radius: var(--sl-border-radius-x-large);
  transition: var(--sl-transition-medium);
}
.theme-shoelace.widget-array .widget-array__handle:active {
  user-select: none;
}
.theme-shoelace.widget-array .widget-array__handle .widget-array__handle-grip {
  display: flex;
  flex-grow: 1;
  justify-content: center;
}
.theme-shoelace.widget-array .widget-array__add-zone {
  display: flex;
  padding: var(--sl-spacing-2x-large) var(--sl-spacing-2x-large);
  border: 2px dashed var(--sl-color-gray-100);
  border-radius: var(--sl-border-radius-large);
  box-shadow: var(--sl-shadow-large) inset;
}
.theme-shoelace.widget-array .widget-array__add-zone > sl-button {
  width: 100%;
}

/* Callouts */
.theme-shoelace.widget-callout {
  position: relative;
  padding: 1rem 1.5rem 1rem 2rem;
  margin: var(--sl-spacing-x-large) var(--sl-spacing-large);
  color: var(--sl-color-neutral-800);
  background-color: var(--sl-color-neutral-100);
  border-left: solid 4px var(--sl-color-neutral-500);
  border-radius: var(--sl-border-radius-medium);
}
.theme-shoelace.widget-callout > :first-child {
  margin-top: 0;
}
.theme-shoelace.widget-callout > :last-child {
  margin-bottom: 0;
}
.theme-shoelace.widget-callout.callout--tip {
  color: var(--sl-color-primary-800);
  background-color: var(--sl-color-primary-100);
  border-left-color: var(--sl-color-primary-600);
}
.theme-shoelace.widget-callout::before {
  position: absolute;
  top: calc(50% - 0.8rem);
  left: calc(-0.8rem - 2px);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.6rem;
  height: 1.6rem;
  clip-path: circle(50% at 50% 50%);
  font-family: var(--sl-font-serif);
  font-weight: var(--sl-font-weight-bold);
  color: var(--sl-color-neutral-0);
  content: "";
}
.theme-shoelace.widget-callout.callout--tip::before {
  font-style: italic;
  content: "i";
  background-color: var(--sl-color-primary-600);
}
.theme-shoelace.widget-callout.callout--warning {
  color: var(--sl-color-warning-800);
  background-color: var(--sl-color-warning-100);
  border-left-color: var(--sl-color-warning-600);
}
.theme-shoelace.widget-callout.callout--warning::before {
  content: "!";
  background-color: var(--sl-color-warning-600);
}
.theme-shoelace.widget-callout.callout--danger {
  color: var(--sl-color-danger-800);
  background-color: var(--sl-color-danger-100);
  border-left-color: var(--sl-color-danger-600);
}
.theme-shoelace.widget-callout.callout--danger::before {
  content: "‼";
  background-color: var(--sl-color-danger-600);
}
.theme-shoelace.widget-callout + .theme-shoelace.widget-callout {
  margin-top: calc(-0.5 * var(--sl-spacing-medium));
}
.theme-shoelace.widget-callout a {
  color: inherit;
}

.theme-shoelace.widget-checkbox-group .help-text {
  font-size: var(--sl-input-help-text-font-size-medium);
  color: var(--sl-input-help-text-color);
}
.theme-shoelace.widget-checkbox-group .widget-checkbox-group__list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--sl-spacing-large) var(--sl-spacing-4x-large);
  justify-content: space-evenly;
  padding: var(--sl-spacing-medium) var(--sl-spacing-x-large);
}

.theme-shoelace.widget-checkbox {
  display: flex;
  flex-wrap: wrap;
  gap: var(--sl-spacing-small);
}
.theme-shoelace.widget-checkbox label {
  cursor: pointer;
}
.theme-shoelace.widget-checkbox .widget-checkbox__description {
  width: 100%;
  font-size: var(--sl-input-help-text-font-size-medium);
  color: var(--sl-input-help-text-color);
}
.theme-shoelace.widget-checkbox .widget-checkbox__label {
  width: 100%;
}

.theme-shoelace.widget-color-picker {
  display: flex;
  flex-wrap: wrap;
  gap: var(--sl-spacing-large);
  align-items: center;
}
.theme-shoelace.widget-color-picker .widget-color-picker__description {
  font-size: var(--sl-input-help-text-font-size-medium);
  color: var(--sl-input-help-text-color);
}

.theme-shoelace.widget-radio-group-boolean::part(form-control-input) {
  display: flex;
  gap: 1rem;
}

.theme-shoelace.widget-radio-group::part(form-control-input) {
  display: flex;
  flex-wrap: wrap;
  gap: var(--sl-spacing-small) var(--sl-spacing-x-large);
}

.theme-shoelace.widget-rating label {
  display: block;
  margin-bottom: 0.5em;
}

.theme-shoelace.widget-submit {
  display: flex;
  justify-content: center;
  margin: var(--sl-spacing-2x-large) 0;
}
`;var rw=class extends qn{constructor(){super(...arguments),this.widgets=_E,this.styleSheets=[ure]}};customElements.define("jsf-shoelace",rw);var iRe={type:"object",properties:{foo:{type:"string"},bar:{type:"boolean"}}};function cre(t){return!0}var nw=class extends ui{constructor(){super(...arguments);this._dataInLit={foo:"hello"}}render(){return X`
      <jsf-shoelace
        .schema=${iRe}
        .uiSchema=${{bar:{"ui:widget":"switch"}}}
        .data=${this._dataInLit}
        .dataChangeCallback=${i=>{console.log({"Data from Lit":i}),cre(i)?this._dataInLit=i:console.error("Invalid data!")}}
        .submitCallback=${(i,r)=>{console.log({"Submitted from Lit!":i,valid:r}),cre(i)}}
      ></jsf-shoelace>

      <pre>${JSON.stringify({data:this._dataInLit},null,2)}</pre>
    `}};Ct([Ie()],nw.prototype,"_dataInLit",2),nw=Ct([xn("tbx-form")],nw);var Ar=class{constructor(e){this.table=e}reloadData(e,i,r){return this.table.dataLoader.load(e,void 0,void 0,void 0,i,r)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(e){return this.table.modules.layout.layout(e)}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(e){return this.table.eventBus.subscribed(e)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(e){return this.table.externalEvents.subscribed(e)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(e){return this.table.options[e]}setOption(e,i){return typeof i<"u"&&(this.table.options[e]=i),this.table.options[e]}deprecationCheck(e,i,r){return this.table.deprecationAdvisor.check(e,i,r)}deprecationCheckMsg(e,i){return this.table.deprecationAdvisor.checkMsg(e,i)}deprecationMsg(e){return this.table.deprecationAdvisor.msg(e)}module(e){return this.table.module(e)}},Qt=class{static elVisible(e){return!(e.offsetWidth<=0&&e.offsetHeight<=0)}static elOffset(e){var i=e.getBoundingClientRect();return{top:i.top+window.pageYOffset-document.documentElement.clientTop,left:i.left+window.pageXOffset-document.documentElement.clientLeft}}static retrieveNestedData(e,i,r){var n=e?i.split(e):[i],s=n.length,o;for(let a=0;a<s&&(r=r[n[a]],o=r,!!r);a++);return o}static deepClone(e,i,r=[]){var n={}.__proto__,s=[].__proto__;i||(i=Object.assign(Array.isArray(e)?[]:{},e));for(var o in e){let a=e[o],l,u;a!=null&&typeof a=="object"&&(a.__proto__===n||a.__proto__===s)&&(l=r.findIndex(c=>c.subject===a),l>-1?i[o]=r[l].copy:(u=Object.assign(Array.isArray(a)?[]:{},a),r.unshift({subject:a,copy:u}),i[o]=this.deepClone(a,u,r)))}return i}},rRe=class dre extends Ar{constructor(e,i,r){super(e),this.element=i,this.container=this._lookupContainer(),this.parent=r,this.reversedX=!1,this.childPopup=null,this.blurable=!1,this.blurCallback=null,this.blurEventsBound=!1,this.renderedCallback=null,this.visible=!1,this.hideable=!0,this.element.classList.add("tabulator-popup-container"),this.blurEvent=this.hide.bind(this,!1),this.escEvent=this._escapeCheck.bind(this),this.destroyBinding=this.tableDestroyed.bind(this),this.destroyed=!1}tableDestroyed(){this.destroyed=!0,this.hide(!0)}_lookupContainer(){var e=this.table.options.popupContainer;return typeof e=="string"?(e=document.querySelector(e),e||console.warn("Menu Error - no container element found matching selector:",this.table.options.popupContainer,"(defaulting to document body)")):e===!0&&(e=this.table.element),e&&!this._checkContainerIsParent(e)&&(e=!1,console.warn("Menu Error - container element does not contain this table:",this.table.options.popupContainer,"(defaulting to document body)")),e||(e=document.body),e}_checkContainerIsParent(e,i=this.table.element){return e===i?!0:i.parentNode?this._checkContainerIsParent(e,i.parentNode):!1}renderCallback(e){this.renderedCallback=e}containerEventCoords(e){var i=!(e instanceof MouseEvent),r=i?e.touches[0].pageX:e.pageX,n=i?e.touches[0].pageY:e.pageY;if(this.container!==document.body){let s=Qt.elOffset(this.container);r-=s.left,n-=s.top}return{x:r,y:n}}elementPositionCoords(e,i="right"){var r=Qt.elOffset(e),n,s,o;switch(this.container!==document.body&&(n=Qt.elOffset(this.container),r.left-=n.left,r.top-=n.top),i){case"right":s=r.left+e.offsetWidth,o=r.top-1;break;case"bottom":s=r.left,o=r.top+e.offsetHeight;break;case"left":s=r.left,o=r.top-1;break;case"top":s=r.left,o=r.top;break;case"center":s=r.left+e.offsetWidth/2,o=r.top+e.offsetHeight/2;break}return{x:s,y:o,offset:r}}show(e,i){var r,n,s,o,a;return this.destroyed||this.table.destroyed?this:(e instanceof HTMLElement?(s=e,a=this.elementPositionCoords(e,i),o=a.offset,r=a.x,n=a.y):typeof e=="number"?(o={top:0,left:0},r=e,n=i):(a=this.containerEventCoords(e),r=a.x,n=a.y,this.reversedX=!1),this.element.style.top=n+"px",this.element.style.left=r+"px",this.container.appendChild(this.element),typeof this.renderedCallback=="function"&&this.renderedCallback(),this._fitToScreen(r,n,s,o,i),this.visible=!0,this.subscribe("table-destroy",this.destroyBinding),this.element.addEventListener("mousedown",l=>{l.stopPropagation()}),this)}_fitToScreen(e,i,r,n,s){var o=this.container===document.body?document.documentElement.scrollTop:this.container.scrollTop;(e+this.element.offsetWidth>=this.container.offsetWidth||this.reversedX)&&(this.element.style.left="",r?this.element.style.right=this.container.offsetWidth-n.left+"px":this.element.style.right=this.container.offsetWidth-e+"px",this.reversedX=!0);let a=Math.max(this.container.offsetHeight,o?this.container.scrollHeight:0);if(i+this.element.offsetHeight>a)if(r)switch(s){case"bottom":this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight-r.offsetHeight-1+"px";break;default:this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight+r.offsetHeight+1+"px"}else this.element.style.height=a+"px"}isVisible(){return this.visible}hideOnBlur(e){return this.blurable=!0,this.visible&&(setTimeout(()=>{this.visible&&(this.table.rowManager.element.addEventListener("scroll",this.blurEvent),this.subscribe("cell-editing",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),document.body.addEventListener("mousedown",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent),this.blurEventsBound=!0)},100),this.blurCallback=e),this}_escapeCheck(e){e.keyCode==27&&this.hide()}blockHide(){this.hideable=!1}restoreHide(){this.hideable=!0}hide(e=!1){return this.visible&&this.hideable&&(this.blurable&&this.blurEventsBound&&(document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),document.body.removeEventListener("mousedown",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent),this.unsubscribe("cell-editing",this.blurEvent),this.blurEventsBound=!1),this.childPopup&&this.childPopup.hide(),this.parent&&(this.parent.childPopup=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.visible=!1,this.blurCallback&&!e&&this.blurCallback(),this.unsubscribe("table-destroy",this.destroyBinding)),this}child(e){return this.childPopup&&this.childPopup.hide(),this.childPopup=new dre(this.table,e,this),this.childPopup}},bt=class extends Ar{constructor(e,i){super(e),this._handler=null}initialize(){}registerTableOption(e,i){this.table.optionsList.register(e,i)}registerColumnOption(e,i){this.table.columnManager.optionsList.register(e,i)}registerTableFunction(e,i){typeof this.table[e]>"u"?this.table[e]=(...r)=>(this.table.initGuard(e),i(...r)):console.warn("Unable to bind table function, name already in use",e)}registerComponentFunction(e,i,r){return this.table.componentFunctionBinder.bind(e,i,r)}registerDataHandler(e,i){this.table.rowManager.registerDataPipelineHandler(e,i),this._handler=e}registerDisplayHandler(e,i){this.table.rowManager.registerDisplayPipelineHandler(e,i),this._handler=e}displayRows(e){var i=this.table.rowManager.displayRows.length-1,r;if(this._handler&&(r=this.table.rowManager.displayPipeline.findIndex(n=>n.handler===this._handler),r>-1&&(i=r)),e&&(i=i+e),this._handler)return i>-1?this.table.rowManager.getDisplayRows(i):this.activeRows()}activeRows(){return this.table.rowManager.activeRows}refreshData(e,i){i||(i=this._handler),i&&this.table.rowManager.refreshActiveData(i,!1,e)}footerAppend(e){return this.table.footerManager.append(e)}footerPrepend(e){return this.table.footerManager.prepend(e)}footerRemove(e){return this.table.footerManager.remove(e)}popup(e,i){return new rRe(this.table,e,i)}alert(e,i){return this.table.alertManager.alert(e,i)}clearAlert(){return this.table.alertManager.clear()}},nRe={rownum:function(t,e,i,r,n,s){return s.getPosition()}},s1=class s1 extends bt{constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var i=!1,r={};this.allowedTypes.forEach(n=>{var s="accessor"+(n.charAt(0).toUpperCase()+n.slice(1)),o;e.definition[s]&&(o=this.lookupAccessor(e.definition[s]),o&&(i=!0,r[s]={accessor:o,params:e.definition[s+"Params"]||{}}))}),i&&(e.modules.accessor=r)}lookupAccessor(e){var i=!1;switch(typeof e){case"string":s1.accessors[e]?i=s1.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":i=e;break}return i}transformRow(e,i){var r="accessor"+(i.charAt(0).toUpperCase()+i.slice(1)),n=e.getComponent(),s=Qt.deepClone(e.data||{});return this.table.columnManager.traverse(function(o){var a,l,u,c;o.modules.accessor&&(l=o.modules.accessor[r]||o.modules.accessor.accessor||!1,l&&(a=o.getFieldValue(s),a!="undefined"&&(c=o.getComponent(),u=typeof l.params=="function"?l.params(a,s,i,c,n):l.params,o.setFieldValue(s,l.accessor(a,s,i,u,c,n)))))}),s}};de(s1,"moduleName","accessor"),de(s1,"accessors",nRe);var kO=s1,sRe={method:"GET"};function AO(t,e){var i=[];if(e=e||"",Array.isArray(t))t.forEach((n,s)=>{i=i.concat(AO(n,e?e+"["+s+"]":s))});else if(typeof t=="object")for(var r in t)i=i.concat(AO(t[r],e?e+"["+r+"]":r));else i.push({key:e,value:t});return i}function oRe(t){var e=AO(t),i=[];return e.forEach(function(r){i.push(encodeURIComponent(r.key)+"="+encodeURIComponent(r.value))}),i.join("&")}function fre(t,e,i){return t&&i&&Object.keys(i).length&&(!e.method||e.method.toLowerCase()=="get")&&(e.method="get",t+=(t.includes("?")?"&":"?")+oRe(i)),t}function aRe(t,e,i){var r;return new Promise((n,s)=>{if(t=this.urlGenerator.call(this.table,t,e,i),e.method.toUpperCase()!="GET")if(r=typeof this.table.options.ajaxContentType=="object"?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType],r){for(var o in r.headers)e.headers||(e.headers={}),typeof e.headers[o]>"u"&&(e.headers[o]=r.headers[o]);e.body=r.body.call(this,t,e,i)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);t?(typeof e.headers>"u"&&(e.headers={}),typeof e.headers.Accept>"u"&&(e.headers.Accept="application/json"),typeof e.headers["X-Requested-With"]>"u"&&(e.headers["X-Requested-With"]="XMLHttpRequest"),typeof e.mode>"u"&&(e.mode="cors"),e.mode=="cors"?(typeof e.headers.Origin>"u"&&(e.headers.Origin=window.location.origin),typeof e.credentials>"u"&&(e.credentials="same-origin")):typeof e.credentials>"u"&&(e.credentials="include"),fetch(t,e).then(a=>{a.ok?a.json().then(l=>{n(l)}).catch(l=>{s(l),console.warn("Ajax Load Error - Invalid JSON returned",l)}):(console.error("Ajax Load Error - Connection Error: "+a.status,a.statusText),s(a))}).catch(a=>{console.error("Ajax Load Error - Connection Error: ",a),s(a)})):(console.warn("Ajax Load Error - No URL Set"),n([]))})}function TO(t,e){var i=[];if(e=e||"",Array.isArray(t))t.forEach((n,s)=>{i=i.concat(TO(n,e?e+"["+s+"]":s))});else if(typeof t=="object")for(var r in t)i=i.concat(TO(t[r],e?e+"["+r+"]":r));else i.push({key:e,value:t});return i}var lRe={json:{headers:{"Content-Type":"application/json"},body:function(t,e,i){return JSON.stringify(i)}},form:{headers:{},body:function(t,e,i){var r=TO(i),n=new FormData;return r.forEach(function(s){n.append(s.key,s.value)}),n}}},hl=class hl extends bt{constructor(e){super(e),this.config={},this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=hl.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||hl.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||hl.defaultURLGenerator,this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.setDefaultConfig(this.table.options.ajaxConfig),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-params",this.requestParams.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestParams(e,i,r,n){var s=this.table.options.ajaxParams;return s&&(typeof s=="function"&&(s=s.call(this.table)),n=Object.assign(Object.assign({},s),n)),n}requestDataCheck(e,i,r,n){return!!(!e&&this.url||typeof e=="string")}requestData(e,i,r,n,s){var o;return!s&&this.requestDataCheck(e)?(e&&this.setUrl(e),o=this.generateConfig(r),this.sendRequest(this.url,i,o)):s}setDefaultConfig(e={}){this.config=Object.assign({},hl.defaultConfig),typeof e=="string"?this.config.method=e:Object.assign(this.config,e)}generateConfig(e={}){var i=Object.assign({},this.config);return typeof e=="string"?i.method=e:Object.assign(i,e),i}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e,i,r){return this.table.options.ajaxRequesting.call(this.table,e,i)!==!1?this.loaderPromise(e,r,i).then(n=>(this.table.options.ajaxResponse&&(n=this.table.options.ajaxResponse.call(this.table,e,i,n)),n)):Promise.reject()}};de(hl,"moduleName","ajax"),de(hl,"defaultConfig",sRe),de(hl,"defaultURLGenerator",fre),de(hl,"defaultLoaderPromise",aRe),de(hl,"contentTypeFormatters",lRe);var RO=hl,uRe={replace:function(t){return this.table.setData(t)},update:function(t){return this.table.updateOrAddData(t)},insert:function(t){return this.table.addData(t)}},cRe={table:function(t){var e=[],i=!0,r=this.table.columnManager.columns,n=[],s=[];return t=t.split(`
`),t.forEach(function(o){e.push(o.split("	"))}),e.length&&!(e.length===1&&e[0].length<2)?(e[0].forEach(function(o){var a=r.find(function(l){return o&&l.definition.title&&o.trim()&&l.definition.title.trim()===o.trim()});a?n.push(a):i=!1}),i||(i=!0,n=[],e[0].forEach(function(o){var a=r.find(function(l){return o&&l.field&&o.trim()&&l.field.trim()===o.trim()});a?n.push(a):i=!1}),i||(n=this.table.columnManager.columnsByIndex)),i&&e.shift(),e.forEach(function(o){var a={};o.forEach(function(l,u){n[u]&&(a[n[u].field]=l)}),s.push(a)}),s):!1}},hRe={copyToClipboard:["ctrl + 67","meta + 67"]},dRe={copyToClipboard:function(t){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},fRe={keybindings:{bindings:hRe,actions:dRe}},_d=class _d extends bt{constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(this.mode===!0||this.mode==="copy")&&this.table.element.addEventListener("copy",e=>{var i,r,n;this.blocked||(e.preventDefault(),this.customSelection?(i=this.customSelection,this.table.options.clipboardCopyFormatter&&(i=this.table.options.clipboardCopyFormatter("plain",i))):(n=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard"),r=this.table.modules.export.generateHTMLTable(n),i=r?this.generatePlainContent(n):"",this.table.options.clipboardCopyFormatter&&(i=this.table.options.clipboardCopyFormatter("plain",i),r=this.table.options.clipboardCopyFormatter("html",r))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",i):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",i),r&&e.clipboardData.setData("text/html",r)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",i),r&&e.originalEvent.clipboardData.setData("text/html",r)),this.dispatchExternal("clipboardCopied",i,r),this.reset())}),(this.mode===!0||this.mode==="paste")&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var i=[];return e.forEach(r=>{var n=[];r.columns.forEach(s=>{var o="";if(s)if(r.type==="group"&&(s.value=s.component.getKey()),s.value===null)o="";else switch(typeof s.value){case"object":o=JSON.stringify(s.value);break;case"undefined":o="";break;default:o=s.value}n.push(o)}),i.push(n.join("	"))}),i.join(`
`)}copy(e,i){var r,n;this.blocked=!1,this.customSelection=!1,(this.mode===!0||this.mode==="copy")&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,typeof window.getSelection<"u"&&typeof document.createRange<"u"?(e=document.createRange(),e.selectNodeContents(this.table.element),r=window.getSelection(),r.toString()&&i&&(this.customSelection=r.toString()),r.removeAllRanges(),r.addRange(e)):typeof document.selection<"u"&&typeof document.body.createTextRange<"u"&&(n=document.body.createTextRange(),n.moveToElementText(this.table.element),n.select()),document.execCommand("copy"),r&&r.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=_d.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e;break}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=_d.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e;break}}paste(e){var i,r,n;this.checkPasteOrigin(e)&&(i=this.getPasteData(e),r=this.pasteParser.call(this,i),r?(e.preventDefault(),this.table.modExists("mutator")&&(r=this.mutateData(r)),n=this.pasteAction.call(this,r),this.dispatchExternal("clipboardPasted",i,r,n)):this.dispatchExternal("clipboardPasteError",i))}mutateData(e){var i=[];return Array.isArray(e)?e.forEach(r=>{i.push(this.table.modules.mutator.transformRow(r,"clipboard"))}):i=e,i}checkPasteOrigin(e){var i=!0,r=this.confirm("clipboard-paste",[e]);return(r||!["DIV","SPAN"].includes(e.target.tagName))&&(i=!1),i}getPasteData(e){var i;return window.clipboardData&&window.clipboardData.getData?i=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?i=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(i=e.originalEvent.clipboardData.getData("text/plain")),i}};de(_d,"moduleName","clipboard"),de(_d,"moduleExtensions",fRe),de(_d,"pasteActions",uRe),de(_d,"pasteParsers",cRe);var DO=_d,MO=class{constructor(e){return this._row=e,new Proxy(this,{get:function(i,r,n){return typeof i[r]<"u"?i[r]:i._row.table.componentFunctionBinder.handle("row",i._row,r)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var e=[];return this._row.getCells().forEach(function(i){e.push(i.getComponent())}),e}getCell(e){var i=this._row.getCell(e);return i?i.getComponent():!1}_getSelf(){return this._row}},$E=class{constructor(e){return this._cell=e,new Proxy(this,{get:function(i,r,n){return typeof i[r]<"u"?i[r]:i._cell.table.componentFunctionBinder.handle("cell",i._cell,r)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(e){return this._cell.row.getData(e)}getType(){return"cell"}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(e,i){typeof i>"u"&&(i=!0),this._cell.setValue(e,i)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}},$p=class extends Ar{constructor(e,i){super(e.table),this.table=e.table,this.column=e,this.row=i,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.column.isRowHeader&&this.element.classList.add("tabulator-row-header")}_configureCell(){var e=this.element,i=this.column.getField(),r={top:"flex-start",bottom:"flex-end",middle:"center"},n={left:"flex-start",right:"flex-end",center:"center"};if(e.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(e.style.display="inline-flex",e.style.alignItems=r[this.column.vertAlign]||"",this.column.hozAlign&&(e.style.justifyContent=n[this.column.hozAlign]||"")),i&&e.setAttribute("tabulator-field",i),this.column.definition.cssClass){var s=this.column.definition.cssClass.split(" ");s.forEach(o=>{e.classList.add(o)})}this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var e;switch(e=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value),typeof e){case"object":if(e instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e)}else this.element.innerHTML="",e!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",e);break;case"undefined":this.element.innerHTML="";break;default:this.element.innerHTML=e}}cellRendered(){this.dispatch("cell-rendered",this)}getElement(e){return this.loaded||(this.loaded=!0,e||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(e,i,r){var n=this.setValueProcessData(e,i,r);n&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.column.definition.cellEdited&&this.column.definition.cellEdited.call(this.table,this.getComponent()),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(e,i,r){var n=!1;return(this.value!==e||r)&&(n=!0,i&&(e=this.chain("cell-value-changing",[this,e],null,e))),this.setValueActual(e),n&&this.dispatch("cell-value-changed",this),n}setValueActual(e){this.oldValue=this.value,this.value=e,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,e),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null,this.dispatch("cell-height",this,"")}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled,this.dispatch("cell-height",this,this.row.heightStyled)}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new $E(this)),this.component}},HE=class{constructor(e){return this._column=e,this.type="ColumnComponent",new Proxy(this,{get:function(i,r,n){return typeof i[r]<"u"?i[r]:i._column.table.componentFunctionBinder.handle("column",i._column,r)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getTitleDownload(){return this._column.getTitleDownload()}getCells(){var e=[];return this._column.cells.forEach(function(i){e.push(i.getComponent())}),e}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(e){e.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(e){e.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var e=[];return this._column.columns.length&&this._column.columns.forEach(function(i){e.push(i.getComponent())}),e}getParentColumn(){return this._column.getParentComponent()}_getSelf(){return this._column}scrollTo(e,i){return this._column.table.columnManager.scrollToColumn(this._column,e,i)}getTable(){return this._column.table}move(e,i){var r=this._column.table.columnManager.findColumn(e);r?this._column.table.columnManager.moveColumn(this._column,r,i):console.warn("Move Error - No matching column found:",r)}getNextColumn(){var e=this._column.nextColumn();return e?e.getComponent():!1}getPrevColumn(){var e=this._column.prevColumn();return e?e.getComponent():!1}updateDefinition(e){return this._column.updateDefinition(e)}getWidth(){return this._column.getWidth()}setWidth(e){var i;return e===!0?i=this._column.reinitializeWidth(!0):i=this._column.setWidth(e),this._column.table.columnManager.rerenderColumns(!0),i}},pre={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,maxInitialWidth:void 0,cssClass:void 0,variableHeight:void 0,headerVertical:void 0,headerHozAlign:void 0,headerWordWrap:!1,editableTitle:void 0},zp=class zp extends Ar{constructor(e,i,r){super(i.table),this.definition=e,this.parent=i,this.type="column",this.columns=[],this.cells=[],this.isGroup=!1,this.isRowHeader=r,this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleDownload=null,this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.maxInitialWidth=null,this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((n,s)=>{var o=new zp(n,this);this.attachColumn(o)}),this.checkColumnVisibility()):i.registerColumnField(this),this._initialize()}createElement(){var e=document.createElement("div");switch(e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),this.isRowHeader&&e.classList.add("tabulator-row-header"),this.table.options.columnHeaderVertAlign){case"middle":e.style.justifyContent="center";break;case"bottom":e.style.justifyContent="flex-end";break}return e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let i in e)typeof this.definition[i]>"u"&&(this.definition[i]=e[i]);this.definition=this.table.columnManager.optionsList.generate(zp.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{zp.defaultOptionList.indexOf(e)===-1&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),e.headerVertical==="flip"&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.dispatch("column-init",this)}_buildColumnHeader(){var e=this.definition;if(this.dispatch("column-layout",this),typeof e.visible<"u"&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass){var i=e.cssClass.split(" ");i.forEach(r=>{this.element.classList.add(r)})}e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxInitialWidth&&(this.maxInitialWidth=parseInt(e.maxInitialWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var e=document.createElement("div");return e.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),e.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),e}_buildColumnHeaderTitle(){var e=this.definition,i=document.createElement("div");if(i.classList.add("tabulator-col-title"),e.headerWordWrap&&i.classList.add("tabulator-col-title-wrap"),e.editableTitle){var r=document.createElement("input");r.classList.add("tabulator-title-editor"),r.addEventListener("click",n=>{n.stopPropagation(),r.focus()}),r.addEventListener("mousedown",n=>{n.stopPropagation()}),r.addEventListener("change",()=>{e.title=r.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),i.appendChild(r),e.field?this.langBind("columns|"+e.field,n=>{r.value=n||e.title||"&nbsp;"}):r.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,n=>{this._formatColumnHeaderTitle(i,n||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(i,e.title||"&nbsp;");return i}_formatColumnHeaderTitle(e,i){var r=this.chain("column-format",[this,i,e],null,()=>i);switch(typeof r){case"object":r instanceof Node?e.appendChild(r):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",r));break;case"undefined":e.innerHTML="";break;default:e.innerHTML=r}}_buildGroupHeader(){if(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass){var e=this.definition.cssClass.split(" ");e.forEach(i=>{this.element.classList.add(i)})}this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var i=e,r=this.fieldStructure,n=r.length,s;for(let o=0;o<n&&(i=i[r[o]],s=i,!!i);o++);return s}_setFlatData(e,i){this.field&&(e[this.field]=i)}_setNestedData(e,i){var r=e,n=this.fieldStructure,s=n.length;for(let o=0;o<s;o++)if(o==s-1)r[n[o]]=i;else{if(!r[n[o]])if(typeof i<"u")r[n[o]]={};else break;r=r[n[o]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement()),e.columnRendered()):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,i){var r=this.parent.isGroup?this.parent.getGroupElement().clientHeight:i||this.parent.getHeadersElement().clientHeight;this.element.style.height=r+"px",this.dispatch("column-height",this,this.element.style.height),this.isGroup&&(this.groupElement.style.minHeight=r-this.contentElement.offsetHeight+"px"),this.columns.forEach(function(n){n.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()}),this.dispatch("column-height",this,"")}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getTitleDownload(){return this.titleDownload}getFirstColumn(){return this.isGroup?this.columns.length?this.columns[0].getFirstColumn():!1:this}getLastColumn(){return this.isGroup?this.columns.length?this.columns[this.columns.length-1].getLastColumn():!1:this}getColumns(e){var i=[];return e?this.columns.forEach(r=>{i.push(r),i=i.concat(r.getColumns(!0))}):i=this.columns,i}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var i=[];return this.isGroup&&e&&(this.columns.forEach(function(r){i.push(r.getDefinition(!0))}),this.definition.columns=i),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(i){i.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,i){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(r){r.show()}),!this.isGroup&&this.width===null&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,i),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}hide(e,i){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(r){r.hide()}),this.dispatch("column-hide",this,i),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(i){i.visible&&(e+=i.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.table.initialized&&(this.element.style.width=e+"px"),this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var i=this.columns.indexOf(e);i>-1&&this.columns.splice(i,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(i){i.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this),this.subscribedExternal("columnWidth")&&this.dispatchExternal("columnWidth",this.getComponent())}checkCellHeights(){var e=[];this.cells.forEach(function(i){i.row.heightInitialized&&(i.row.getElement().offsetParent!==null?(e.push(i.row),i.row.clearCellHeight()):i.row.heightInitialized=!1)}),e.forEach(function(i){i.calcHeight()}),e.forEach(function(i){i.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(i){i.visible&&(e+=i.getWidth())}):e=this.width,e}getLeftOffset(){var e=this.element.offsetLeft;return this.parent.isGroup&&(e+=this.parent.getLeftOffset()),e}getHeight(){return Math.ceil(this.element.getBoundingClientRect().height)}setMinWidth(e){this.maxWidth&&e>this.maxWidth&&(e=this.maxWidth,console.warn("the minWidth ("+e+"px) for column '"+this.field+"' cannot be bigger that its maxWidth ("+this.maxWidthStyled+")")),this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(i){i.setMinWidth()})}setMaxWidth(e){this.minWidth&&e<this.minWidth&&(e=this.minWidth,console.warn("the maxWidth ("+e+"px) for column '"+this.field+"' cannot be smaller that its minWidth ("+this.minWidthStyled+")")),this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(i){i.setMaxWidth()})}delete(){return new Promise((e,i)=>{this.isGroup&&this.columns.forEach(function(n){n.delete()}),this.dispatch("column-delete",this);var r=this.cells.length;for(let n=0;n<r;n++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.rerenderColumns(!0),this.dispatch("column-deleted",this),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered(),this.dispatch("column-rendered",this)}generateCell(e){var i=new $p(this,e);return this.cells.push(i),i}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._nextVisibleColumn(e+1):!1}_nextVisibleColumn(e){var i=this.table.columnManager.getColumnByIndex(e);return!i||i.visible?i:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._prevVisibleColumn(e-1):!1}_prevVisibleColumn(e){var i=this.table.columnManager.getColumnByIndex(e);return!i||i.visible?i:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,typeof this.definition.width<"u"&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(e),this.dispatch("column-width-fit-after",this)}fitToData(e){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(n=>{n.clearWidth()}));var i=this.element.offsetWidth;if((!this.width||!this.widthFixed)&&(this.cells.forEach(n=>{var s=n.getWidth();s>i&&(i=s)}),i)){var r=i+1;e?this.setWidth(r):(this.maxInitialWidth&&!e&&(r=Math.min(r,this.maxInitialWidth)),this.setWidthActual(r))}}}updateDefinition(e){var i;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(i=Object.assign({},this.getDefinition()),i=Object.assign(i,e),this.table.columnManager.addColumn(i,!1,this).then(r=>(i.field==this.field&&(this.field=!1),this.delete().then(()=>r.getComponent()))))}deleteCell(e){var i=this.cells.indexOf(e);i>-1&&this.cells.splice(i,1)}getComponent(){return this.component||(this.component=new HE(this)),this.component}getPosition(){return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this)+1}getParentComponent(){return this.parent instanceof zp?this.parent.getComponent():!1}};de(zp,"defaultOptionList",pre);var Np=zp,u1=class{constructor(e){return this._row=e,new Proxy(this,{get:function(i,r,n){return typeof i[r]<"u"?i[r]:i._row.table.componentFunctionBinder.handle("row",i._row,r)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getCells(){var e=[];return this._row.getCells().forEach(function(i){e.push(i.getComponent())}),e}getCell(e){var i=this._row.getCell(e);return i?i.getComponent():!1}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(){return this._row.getPosition()}watchPosition(e){return this._row.watchPosition(e)}delete(){return this._row.delete()}scrollTo(e,i){return this._row.table.rowManager.scrollToRow(this._row,e,i)}move(e,i){this._row.moveToRow(e,i)}update(e){return this._row.updateData(e)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var e=this._row.nextRow();return e&&e.getComponent()}getPrevRow(){var e=this._row.prevRow();return e&&e.getComponent()}},Kr=class extends Ar{constructor(e,i,r="row"){super(i.table),this.parent=i,this.data={},this.type=r,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.position=0,this.positionWatchers=[],this.component=null,this.created=!1,this.setData(e)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var e=document.createElement("div");e.classList.add("tabulator-row"),e.setAttribute("role","row"),this.element=e}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(e,i){if(this.create(),!this.initialized||e){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.initialized=!0,this.table.columnManager.renderer.renderRowCells(this,i),e&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this,i)}rendered(){this.cells.forEach(e=>{e.cellRendered()})}reinitializeHeight(){this.heightInitialized=!1,this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)}deinitialize(){this.initialized=!1}deinitializeHeight(){this.heightInitialized=!1}reinitialize(e){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&this.element.offsetParent!==null&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(e){var i=0,r=0;this.table.options.rowHeight?this.height=this.table.options.rowHeight:(r=this.calcMinHeight(),i=this.calcMaxHeight(),e?this.height=Math.max(i,r):this.height=this.manualHeight?this.height:Math.max(i,r)),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}calcMinHeight(){return this.table.options.resizableRows?this.element.clientHeight:0}calcMaxHeight(){var e=0;return this.cells.forEach(function(i){var r=i.getHeight();r>e&&(e=r)}),e}setCellHeight(){this.cells.forEach(function(e){e.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(e){e.clearHeight()})}normalizeHeight(e){e&&!this.table.options.rowHeight&&this.clearCellHeight(),this.calcHeight(e),this.setCellHeight()}setHeight(e,i){(this.height!=e||i)&&(this.manualHeight=!0,this.height=e,this.heightStyled=e?e+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight,this.subscribedExternal("rowHeight")&&this.dispatchExternal("rowHeight",this.getComponent()))}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(e){var i=this.cells.indexOf(e);i>-1&&this.cells.splice(i,1)}setData(e){this.data=this.chain("row-data-init-before",[this,e],void 0,e),this.dispatch("row-data-init-after",this)}updateData(e){var i=this.element&&Qt.elVisible(this.element),r={},n;return new Promise((s,o)=>{typeof e=="string"&&(e=JSON.parse(e)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(r=Object.assign(r,this.data),r=Object.assign(r,e)),n=this.chain("row-data-changing",[this,r,e],null,e);for(let a in n)this.data[a]=n[a];this.dispatch("row-data-save-after",this);for(let a in e)this.table.columnManager.getColumnsByFieldRoot(a).forEach(u=>{let c=this.getCell(u.getField());if(c){let h=u.getFieldValue(n);c.getValue()!==h&&(c.setValueProcessData(h),i&&c.cellRendered())}});i?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,i,e),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),s()})}getData(e){return e?this.chain("row-data-retrieve",[this,e],null,this.data):this.data}getCell(e){var i=!1;return e=this.table.columnManager.findColumn(e),!this.initialized&&this.cells.length===0&&this.generateCells(),i=this.cells.find(function(r){return r.column===e}),i}getCellIndex(e){return this.cells.findIndex(function(i){return i===e})}findCell(e){return this.cells.find(i=>i.element===e)}getCells(){return!this.initialized&&this.cells.length===0&&this.generateCells(),this.cells}nextRow(){var e=this.table.rowManager.nextDisplayRow(this,!0);return e||!1}prevRow(){var e=this.table.rowManager.prevDisplayRow(this,!0);return e||!1}moveToRow(e,i){var r=this.table.rowManager.findRow(e);r?(this.table.rowManager.moveRowActual(this,r,!i),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",e)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(e){this.detachModules(),this.table.rowManager.deleteRow(this,e),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detachModules(){this.dispatch("row-deleting",this)}deleteCells(){var e=this.cells.length;for(let i=0;i<e;i++)this.cells[0].delete()}wipe(){if(this.detachModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}isDisplayed(){return this.table.rowManager.getDisplayRows().includes(this)}getPosition(){return this.isDisplayed()?this.position:!1}setPosition(e){e!=this.position&&(this.position=e,this.positionWatchers.forEach(i=>{i(this.position)}))}watchPosition(e){this.positionWatchers.push(e),e(this.position)}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new u1(this)),this.component}},pRe={avg:function(t,e,i){var r=0,n=typeof i.precision<"u"?i.precision:2;return t.length&&(r=t.reduce(function(s,o){return Number(s)+Number(o)}),r=r/t.length,r=n!==!1?r.toFixed(n):r),parseFloat(r).toString()},max:function(t,e,i){var r=null,n=typeof i.precision<"u"?i.precision:!1;return t.forEach(function(s){s=Number(s),(s>r||r===null)&&(r=s)}),r!==null?n!==!1?r.toFixed(n):r:""},min:function(t,e,i){var r=null,n=typeof i.precision<"u"?i.precision:!1;return t.forEach(function(s){s=Number(s),(s<r||r===null)&&(r=s)}),r!==null?n!==!1?r.toFixed(n):r:""},sum:function(t,e,i){var r=0,n=typeof i.precision<"u"?i.precision:!1;return t.length&&t.forEach(function(s){s=Number(s),r+=isNaN(s)?0:Number(s)}),n!==!1?r.toFixed(n):r},concat:function(t,e,i){var r=0;return t.length&&(r=t.reduce(function(n,s){return String(n)+String(s)})),r},count:function(t,e,i){var r=0;return t.length&&t.forEach(function(n){n&&r++}),r},unique:function(t,e,i){var r=t.filter((n,s)=>(t||n===0)&&t.indexOf(n)===s);return r.length}},Cd=class Cd extends bt{constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.blocked=!1,this.recalcAfterBlock=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new Np({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refreshed",this.recalcActiveRowsRefresh.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this)),this.subscribe("redraw-blocked",this.blockRedraw.bind(this)),this.subscribe("redraw-restored",this.restoreRedraw.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this)),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}blockRedraw(){this.blocked=!0,this.recalcAfterBlock=!1}restoreRedraw(){this.blocked=!1,this.recalcAfterBlock&&(this.recalcAfterBlock=!1,this.recalcActiveRowsRefresh())}userRecalc(){this.recalc(this.table.rowManager.activeRows)}blockCheck(){return this.blocked&&(this.recalcAfterBlock=!0),this.blocked}visibleRows(e,i){return this.topRow&&i.unshift(this.topRow),this.botRow&&i.push(this.botRow),i}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(e):this.recalcActiveRows()}recalcActiveRowsRefresh(){this.table.options.groupBy&&this.table.options.dataTreeStartExpanded&&this.table.options.dataTree?this.recalcAll():this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?((this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both")&&this.recalcActiveRows(),this.table.options.columnCalcs!="table"&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var i=e.definition,r={topCalcParams:i.topCalcParams||{},botCalcParams:i.bottomCalcParams||{}};if(i.topCalc){switch(typeof i.topCalc){case"string":Cd.calculations[i.topCalc]?r.topCalc=Cd.calculations[i.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",i.topCalc);break;case"function":r.topCalc=i.topCalc;break}r.topCalc&&(e.modules.columnCalcs=r,this.topCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeTopRow())}if(i.bottomCalc){switch(typeof i.bottomCalc){case"string":Cd.calculations[i.bottomCalc]?r.botCalc=Cd.calculations[i.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",i.bottomCalc);break;case"function":r.botCalc=i.bottomCalc;break}r.botCalc&&(e.modules.columnCalcs=r,this.botCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.footerRemove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}reinitializeCalcs(){this.topCalcs.length&&this.initializeTopRow(),this.botCalcs.length&&this.initializeBottomRow()}initializeTopRow(){var e=document.createDocumentFragment();this.topInitialized||(e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.footerPrepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botElement.scrollLeft=e)}recalc(e){var i,r;if(!this.blockCheck()&&(this.topInitialized||this.botInitialized)){if(i=this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),r=this.generateRow("top",i),this.topRow=r;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(r.getElement()),r.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),r=this.generateRow("bottom",i),this.botRow=r;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(r.getElement()),r.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){if((this.topCalcs.length||this.botCalcs.length)&&(this.table.options.columnCalcs!=="group"&&this.recalcActiveRows(),this.table.options.groupBy&&this.table.options.columnCalcs!=="table")){var e=this.table.modules.groupRows.getChildGroups();e.forEach(i=>{this.recalcGroup(i)})}}recalcGroup(e){var i,r;this.blockCheck()||e&&e.calcs&&(e.calcs.bottom&&(i=this.rowsToData(e.rows),r=this.generateRowData("bottom",i),e.calcs.bottom.updateData(r),e.calcs.bottom.reinitialize()),e.calcs.top&&(i=this.rowsToData(e.rows),r=this.generateRowData("top",i),e.calcs.top.updateData(r),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var i=[],r=this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs,n=this.table.modules.dataTree;return e.forEach(s=>{i.push(s.getData()),r&&s.modules.dataTree?.open&&this.rowsToData(n.getFilteredTreeChildren(s)).forEach(o=>{i.push(s)})}),i}generateRow(e,i){var r=this.generateRowData(e,i),n;return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),n=new Kr(r,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),n.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),n.component=!1,n.getComponent=()=>(n.component||(n.component=new MO(n)),n.component),n.generateCells=()=>{var s=[];this.table.columnManager.columnsByIndex.forEach(o=>{this.genColumn.setField(o.getField()),this.genColumn.hozAlign=o.hozAlign,o.definition[e+"CalcFormatter"]&&this.table.modExists("format")?this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter(o.definition[e+"CalcFormatter"]),params:o.definition[e+"CalcFormatterParams"]||{}}:this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=o.definition.cssClass;var a=new $p(this.genColumn,n);a.getElement(),a.column=o,a.setWidth(),o.cells.push(a),s.push(a),o.visible||a.hide()}),n.cells=s},n}generateRowData(e,i){var r={},n=e=="top"?this.topCalcs:this.botCalcs,s=e=="top"?"topCalc":"botCalc",o,a;return n.forEach(function(l){var u=[];l.modules.columnCalcs&&l.modules.columnCalcs[s]&&(i.forEach(function(c){u.push(l.getFieldValue(c))}),a=s+"Params",o=typeof l.modules.columnCalcs[a]=="function"?l.modules.columnCalcs[a](u,i):l.modules.columnCalcs[a],l.setFieldValue(r,l.modules.columnCalcs[s](u,i,o)))}),r}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={},i;return this.table.options.groupBy&&this.table.modExists("groupRows")?(i=this.table.modules.groupRows.getGroups(!0),i.forEach(r=>{e[r.getKey()]=this.getGroupResults(r)})):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var i=e._getSelf(),r=e.getSubGroups(),n={},s={};return r.forEach(o=>{n[o.getKey()]=this.getGroupResults(o)}),s={top:i.calcs.top?i.calcs.top.getData():{},bottom:i.calcs.bottom?i.calcs.bottom.getData():{},groups:n},s}adjustForScrollbar(e){this.botRow&&(this.table.rtl?this.botElement.style.paddingLeft=e+"px":this.botElement.style.paddingRight=e+"px")}};de(Cd,"moduleName","columnCalcs"),de(Cd,"calculations",pRe);var FO=Cd,CE=class extends bt{constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this)),this.registerComponentFunction("row","isTreeExpanded",this.isRowExpanded.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,i=this.table.options;switch(this.field=i.dataTreeChildField,this.indent=i.dataTreeChildIndent,this.options("movableRows")&&console.warn("The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior"),i.dataTreeBranchElement?i.dataTreeBranchElement===!0?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):typeof i.dataTreeBranchElement=="string"?(e=document.createElement("div"),e.innerHTML=i.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=i.dataTreeBranchElement:(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch-empty")),i.dataTreeCollapseElement?typeof i.dataTreeCollapseElement=="string"?(e=document.createElement("div"),e.innerHTML=i.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=i.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),i.dataTreeExpandElement?typeof i.dataTreeExpandElement=="string"?(e=document.createElement("div"),e.innerHTML=i.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=i.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof i.dataTreeStartExpanded){case"boolean":this.startOpen=function(r,n){return i.dataTreeStartExpanded};break;case"function":this.startOpen=i.dataTreeStartExpanded;break;default:this.startOpen=function(r,n){return i.dataTreeStartExpanded[n]};break}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("cell-value-updated",this.cellValueChanged.bind(this)),this.subscribe("edit-cancelled",this.cellValueChanged.bind(this)),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.subscribe("table-built",this.initializeElementField.bind(this)),this.subscribe("table-redrawing",this.tableRedrawing.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}tableRedrawing(e){var i;e&&(i=this.table.rowManager.getRows(),i.forEach(r=>{this.reinitializeRowChildren(r)}))}initializeElementField(){var e=this.table.columnManager.getFirstVisibleColumn();this.elementField=this.table.options.dataTreeElementColumn||(e?e.field:!1)}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(i=>{e=e.concat(this.getTreeChildren(i,!1,!0))}),e}rowDataChanged(e,i,r){this.redrawNeeded(r)&&(this.initializeRow(e),i&&(this.layoutRow(e),this.refreshData(!0)))}cellValueChanged(e){var i=e.column.getField();i===this.elementField&&this.layoutRow(e.row)}initializeRow(e){var i=e.getData()[this.field],r=Array.isArray(i),n=r||!r&&typeof i=="object"&&i!==null;!n&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!n&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:n?e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0):!1,controlEl:e.modules.dataTree&&n?e.modules.dataTree.controlEl:!1,branchEl:e.modules.dataTree&&n?e.modules.dataTree.branchEl:!1,parent:e.modules.dataTree?e.modules.dataTree.parent:!1,children:n}}reinitializeRowChildren(e){var i=this.getTreeChildren(e,!1,!0);i.forEach(function(r){r.reinitialize(!0)})}layoutRow(e){var i=this.elementField?e.getCell(this.elementField):e.getCells()[0],r=i.getElement(),n=e.modules.dataTree;n.branchEl&&(n.branchEl.parentNode&&n.branchEl.parentNode.removeChild(n.branchEl),n.branchEl=!1),n.controlEl&&(n.controlEl.parentNode&&n.controlEl.parentNode.removeChild(n.controlEl),n.controlEl=!1),this.generateControlElement(e,r),e.getElement().classList.add("tabulator-tree-level-"+n.index),n.index&&(this.branchEl?(n.branchEl=this.branchEl.cloneNode(!0),r.insertBefore(n.branchEl,r.firstChild),this.table.rtl?n.branchEl.style.marginRight=(n.branchEl.offsetWidth+n.branchEl.style.marginLeft)*(n.index-1)+n.index*this.indent+"px":n.branchEl.style.marginLeft=(n.branchEl.offsetWidth+n.branchEl.style.marginRight)*(n.index-1)+n.index*this.indent+"px"):this.table.rtl?r.style.paddingRight=parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-right"))+n.index*this.indent+"px":r.style.paddingLeft=parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-left"))+n.index*this.indent+"px")}generateControlElement(e,i){var r=e.modules.dataTree,n=r.controlEl;i=i||e.getCells()[0].getElement(),r.children!==!1&&(r.open?(r.controlEl=this.collapseEl.cloneNode(!0),r.controlEl.addEventListener("click",s=>{s.stopPropagation(),this.collapseRow(e)})):(r.controlEl=this.expandEl.cloneNode(!0),r.controlEl.addEventListener("click",s=>{s.stopPropagation(),this.expandRow(e)})),r.controlEl.addEventListener("mousedown",s=>{s.stopPropagation()}),n&&n.parentNode===i?n.parentNode.replaceChild(r.controlEl,n):i.insertBefore(r.controlEl,i.firstChild))}getRows(e){var i=[];return e.forEach((r,n)=>{var s,o;i.push(r),r instanceof Kr&&(r.create(),s=r.modules.dataTree,!s.index&&s.children!==!1&&(o=this.getChildren(r,!1,!0),o.forEach(a=>{a.create(),i.push(a)})))}),i}getChildren(e,i,r){var n=e.modules.dataTree,s=[],o=[];return n.children!==!1&&(n.open||i)&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?s=this.table.modules.filter.filter(n.children):s=n.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(s,r),s.forEach(a=>{o.push(a);var l=this.getChildren(a,!1,!0);l.forEach(u=>{o.push(u)})})),o}generateChildren(e){var i=[],r=e.getData()[this.field];return Array.isArray(r)||(r=[r]),r.forEach(n=>{var s=new Kr(n||{},this.table.rowManager);s.create(),s.modules.dataTree.index=e.modules.dataTree.index+1,s.modules.dataTree.parent=e,s.modules.dataTree.children&&(s.modules.dataTree.open=this.startOpen(s.getComponent(),s.modules.dataTree.index)),i.push(s)}),i}expandRow(e,i){var r=e.modules.dataTree;r.children!==!1&&(r.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var i=e.modules.dataTree;i.children!==!1&&(i.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var i=e.modules.dataTree;i.children!==!1&&(i.open?this.collapseRow(e):this.expandRow(e))}isRowExpanded(e){return e.modules.dataTree.open}getTreeParent(e){return e.modules.dataTree.parent?e.modules.dataTree.parent.getComponent():!1}getTreeParentRoot(e){return e.modules.dataTree&&e.modules.dataTree.parent?this.getTreeParentRoot(e.modules.dataTree.parent):e}getFilteredTreeChildren(e){var i=e.modules.dataTree,r=[],n;return i.children&&(Array.isArray(i.children)||(i.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?n=this.table.modules.filter.filter(i.children):n=i.children,n.forEach(s=>{s instanceof Kr&&r.push(s)})),r}rowDeleting(e){var i=e.modules.dataTree;i&&i.children&&Array.isArray(i.children)&&i.children.forEach(r=>{r instanceof Kr&&r.wipe()})}rowDelete(e){var i=e.modules.dataTree.parent,r;i&&(r=this.findChildIndex(e,i),r!==!1&&i.data[this.field].splice(r,1),i.data[this.field].length||delete i.data[this.field],this.initializeRow(i),this.layoutRow(i)),this.refreshData(!0)}addTreeChildRow(e,i,r,n){var s=!1;typeof i=="string"&&(i=JSON.parse(i)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),typeof n<"u"&&(s=this.findChildIndex(n,e),s!==!1&&e.data[this.field].splice(r?s:s+1,0,i)),s===!1&&(r?e.data[this.field].unshift(i):e.data[this.field].push(i)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,i){var r=!1;return typeof e=="object"?e instanceof Kr?r=e.data:e instanceof u1?r=e._getSelf().data:typeof HTMLElement<"u"&&e instanceof HTMLElement?i.modules.dataTree&&(r=i.modules.dataTree.children.find(n=>n instanceof Kr?n.element===e:!1),r&&(r=r.data)):e===null&&(r=!1):typeof e>"u"?r=!1:r=i.data[this.field].find(n=>n.data[this.table.options.index]==e),r&&(Array.isArray(i.data[this.field])&&(r=i.data[this.field].indexOf(r)),r==-1&&(r=!1)),r}getTreeChildren(e,i,r){var n=e.modules.dataTree,s=[];return n&&n.children&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),n.children.forEach(o=>{o instanceof Kr&&(s.push(i?o.getComponent():o),r&&this.getTreeChildren(o,i,r).forEach(a=>{s.push(a)}))})),s}getChildField(){return this.field}redrawNeeded(e){return(this.field?typeof e[this.field]<"u":!1)||(this.elementField?typeof e[this.elementField]<"u":!1)}};de(CE,"moduleName","dataTree");function mRe(t,e={},i){var r=e.delimiter?e.delimiter:",",n=[],s=[];t.forEach(o=>{var a=[];switch(o.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":o.columns.forEach((l,u)=>{l&&l.depth===1&&(s[u]=typeof l.value>"u"||l.value===null?"":'"'+String(l.value).split('"').join('""')+'"')});break;case"row":o.columns.forEach(l=>{if(l){switch(typeof l.value){case"object":l.value=l.value!==null?JSON.stringify(l.value):"";break;case"undefined":l.value="";break}a.push('"'+String(l.value).split('"').join('""')+'"')}}),n.push(a.join(r));break}}),s.length&&n.unshift(s.join(r)),n=n.join(`
`),e.bom&&(n="\uFEFF"+n),i(n,"text/csv")}function gRe(t,e,i){var r=[];t.forEach(n=>{var s={};switch(n.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":n.columns.forEach(o=>{o&&(s[o.component.getTitleDownload()||o.component.getField()]=o.value)}),r.push(s);break}}),r=JSON.stringify(r,null,"	"),i(r,"application/json")}function bRe(t,e={},i){var r=[],n=[],s={},o=e.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},a=e.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},l=e.jsPDF||{},u=e.title?e.title:"",c,h;l.orientation||(l.orientation=e.orientation||"landscape"),l.unit||(l.unit="pt"),t.forEach(p=>{switch(p.type){case"header":r.push(d(p));break;case"group":n.push(d(p,o));break;case"calc":n.push(d(p,a));break;case"row":n.push(d(p));break}});function d(p,f){var m=[];return p.columns.forEach(g=>{var b;if(g){switch(typeof g.value){case"object":g.value=g.value!==null?JSON.stringify(g.value):"";break;case"undefined":g.value="";break}b={content:g.value,colSpan:g.width,rowSpan:g.height},f&&(b.styles=f),m.push(b)}}),m}c=this.dependencyRegistry.lookup("jspdf","jsPDF"),h=new c(l),e.autoTable&&(typeof e.autoTable=="function"?s=e.autoTable(h)||{}:s=e.autoTable),u&&(s.didDrawPage=function(p){h.text(u,40,30)}),s.head=r,s.body=n,h.autoTable(s),e.documentProcessing&&e.documentProcessing(h),i(h.output("arraybuffer"),"application/pdf")}function vRe(t,e,i){var r=this,n=e.sheetName||"Sheet1",s=this.dependencyRegistry.lookup("XLSX"),o=s.utils.book_new(),a=new Ar(this),l="compress"in e?e.compress:!0,u=e.writeOptions||{bookType:"xlsx",bookSST:!0,compression:l},c;u.type="binary",o.SheetNames=[],o.Sheets={};function h(){var f=[],m=[],g={},b={s:{c:0,r:0},e:{c:t[0]?t[0].columns.reduce((v,y)=>v+(y&&y.width?y.width:1),0):0,r:t.length}};return t.forEach((v,y)=>{var x=[];v.columns.forEach(function(_,w){_?(x.push(!(_.value instanceof Date)&&typeof _.value=="object"?JSON.stringify(_.value):_.value),(_.width>1||_.height>-1)&&(_.height>1||_.width>1)&&m.push({s:{r:y,c:w},e:{r:y+_.height-1,c:w+_.width-1}})):x.push("")}),f.push(x)}),s.utils.sheet_add_aoa(g,f),g["!ref"]=s.utils.encode_range(b),m.length&&(g["!merges"]=m),g}if(e.sheetOnly){i(h());return}if(e.sheets)for(var d in e.sheets)e.sheets[d]===!0?(o.SheetNames.push(d),o.Sheets[d]=h()):(o.SheetNames.push(d),a.commsSend(e.sheets[d],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:r.active,intercept:function(f){o.Sheets[d]=f}}));else o.SheetNames.push(n),o.Sheets[n]=h();e.documentProcessing&&(o=e.documentProcessing(o));function p(f){for(var m=new ArrayBuffer(f.length),g=new Uint8Array(m),b=0;b!=f.length;++b)g[b]=f.charCodeAt(b)&255;return m}c=s.write(o,u),i(p(c),"application/octet-stream")}function yRe(t,e,i){this.modExists("export",!0)&&i(this.modules.export.generateHTMLTable(t),"text/html")}function xRe(t,e,i){let r=[];t.forEach(n=>{let s={};switch(n.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":n.columns.forEach(o=>{o&&(s[o.component.getTitleDownload()||o.component.getField()]=o.value)}),r.push(JSON.stringify(s));break}}),i(r.join(`
`),"application/x-ndjson")}var wRe={csv:mRe,json:gRe,jsonLines:xRe,pdf:bRe,xlsx:vRe,html:yRe},o1=class o1 extends bt{constructor(e){super(e),this.registerTableOption("downloadEncoder",function(i,r){return new Blob([i],{type:r})}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.deprecatedOptionsCheck(),this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}deprecatedOptionsCheck(){}downloadToTab(e,i,r,n){this.download(e,i,r,n,!0)}download(e,i,r,n,s){var o=!1;function a(u,c){s?s===!0?this.triggerDownload(u,c,e,i,!0):s(u):this.triggerDownload(u,c,e,i)}if(typeof e=="function"?o=e:o1.downloaders[e]?o=o1.downloaders[e]:console.warn("Download Error - No such download type found: ",e),o){var l=this.generateExportList(n);o.call(this.table,l,r||{},a.bind(this))}}generateExportList(e){var i=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),r=this.table.options.groupHeaderDownload;return r&&!Array.isArray(r)&&(r=[r]),i.forEach(n=>{var s;n.type==="group"&&(s=n.columns[0],r&&r[n.indent]&&(s.value=r[n.indent](s.value,n.component._group.getRowCount(),n.component._group.getData(),n.component)))}),i}triggerDownload(e,i,r,n,s){var o=document.createElement("a"),a=this.table.options.downloadEncoder(e,i);a&&(s?window.open(window.URL.createObjectURL(a)):(n=n||"Tabulator."+(typeof r=="function"?"txt":r),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,n):(o.setAttribute("href",window.URL.createObjectURL(a)),o.setAttribute("download",n),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o))),this.dispatchExternal("downloadComplete"))}commsReceived(e,i,r){switch(i){case"intercept":this.download(r.type,"",r.options,r.active,r.intercept);break}}};de(o1,"moduleName","download"),de(o1,"downloaders",wRe);var LO=o1;function qE(t,e){var i=e.mask,r=typeof e.maskLetterChar<"u"?e.maskLetterChar:"A",n=typeof e.maskNumberChar<"u"?e.maskNumberChar:"9",s=typeof e.maskWildcardChar<"u"?e.maskWildcardChar:"*";function o(a){var l=i[a];typeof l<"u"&&l!==s&&l!==r&&l!==n&&(t.value=t.value+""+l,o(a+1))}t.addEventListener("keydown",a=>{var l=t.value.length,u=a.key;if(a.keyCode>46&&!a.ctrlKey&&!a.metaKey){if(l>=i.length)return a.preventDefault(),a.stopPropagation(),!1;switch(i[l]){case r:if(u.toUpperCase()==u.toLowerCase())return a.preventDefault(),a.stopPropagation(),!1;break;case n:if(isNaN(u))return a.preventDefault(),a.stopPropagation(),!1;break;case s:break;default:if(u!==i[l])return a.preventDefault(),a.stopPropagation(),!1}}}),t.addEventListener("keyup",a=>{a.keyCode>46&&e.maskAutoFill&&o(t.value.length)}),t.placeholder||(t.placeholder=i),e.maskAutoFill&&o(t.value.length)}function _Re(t,e,i,r,n){var s=t.getValue(),o=document.createElement("input");if(o.setAttribute("type",n.search?"search":"text"),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let l in n.elementAttributes)l.charAt(0)=="+"?(l=l.slice(1),o.setAttribute(l,o.getAttribute(l)+n.elementAttributes["+"+l])):o.setAttribute(l,n.elementAttributes[l]);o.value=typeof s<"u"?s:"",e(function(){t.getType()==="cell"&&(o.focus({preventScroll:!0}),o.style.height="100%",n.selectContents&&o.select())});function a(l){(s===null||typeof s>"u")&&o.value!==""||o.value!==s?i(o.value)&&(s=o.value):r()}return o.addEventListener("change",a),o.addEventListener("blur",a),o.addEventListener("keydown",function(l){switch(l.keyCode){case 13:a();break;case 27:r();break;case 35:case 36:l.stopPropagation();break}}),n.mask&&qE(o,n),o}function CRe(t,e,i,r,n){var s=t.getValue(),o=n.verticalNavigation||"hybrid",a=String(s!==null&&typeof s<"u"?s:""),l=document.createElement("textarea"),u=0;if(l.style.display="block",l.style.padding="2px",l.style.height="100%",l.style.width="100%",l.style.boxSizing="border-box",l.style.whiteSpace="pre-wrap",l.style.resize="none",n.elementAttributes&&typeof n.elementAttributes=="object")for(let h in n.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),l.setAttribute(h,l.getAttribute(h)+n.elementAttributes["+"+h])):l.setAttribute(h,n.elementAttributes[h]);l.value=a,e(function(){t.getType()==="cell"&&(l.focus({preventScroll:!0}),l.style.height="100%",l.scrollHeight,l.style.height=l.scrollHeight+"px",t.getRow().normalizeHeight(),n.selectContents&&l.select())});function c(h){(s===null||typeof s>"u")&&l.value!==""||l.value!==s?(i(l.value)&&(s=l.value),setTimeout(function(){t.getRow().normalizeHeight()},300)):r()}return l.addEventListener("change",c),l.addEventListener("blur",c),l.addEventListener("keyup",function(){l.style.height="";var h=l.scrollHeight;l.style.height=h+"px",h!=u&&(u=h,t.getRow().normalizeHeight())}),l.addEventListener("keydown",function(h){switch(h.keyCode){case 13:h.shiftKey&&n.shiftEnterSubmit&&c();break;case 27:r();break;case 38:(o=="editor"||o=="hybrid"&&l.selectionStart)&&(h.stopImmediatePropagation(),h.stopPropagation());break;case 40:(o=="editor"||o=="hybrid"&&l.selectionStart!==l.value.length)&&(h.stopImmediatePropagation(),h.stopPropagation());break;case 35:case 36:h.stopPropagation();break}}),n.mask&&qE(l,n),l}function SRe(t,e,i,r,n){var s=t.getValue(),o=n.verticalNavigation||"editor",a=document.createElement("input");if(a.setAttribute("type","number"),typeof n.max<"u"&&a.setAttribute("max",n.max),typeof n.min<"u"&&a.setAttribute("min",n.min),typeof n.step<"u"&&a.setAttribute("step",n.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let c in n.elementAttributes)c.charAt(0)=="+"?(c=c.slice(1),a.setAttribute(c,a.getAttribute(c)+n.elementAttributes["+"+c])):a.setAttribute(c,n.elementAttributes[c]);a.value=s;var l=function(c){u()};e(function(){t.getType()==="cell"&&(a.removeEventListener("blur",l),a.focus({preventScroll:!0}),a.style.height="100%",a.addEventListener("blur",l),n.selectContents&&a.select())});function u(){var c=a.value;!isNaN(c)&&c!==""&&(c=Number(c)),c!==s?i(c)&&(s=c):r()}return a.addEventListener("keydown",function(c){switch(c.keyCode){case 13:u();break;case 27:r();break;case 38:case 40:o=="editor"&&(c.stopImmediatePropagation(),c.stopPropagation());break;case 35:case 36:c.stopPropagation();break}}),n.mask&&qE(a,n),a}function ERe(t,e,i,r,n){var s=t.getValue(),o=document.createElement("input");if(o.setAttribute("type","range"),typeof n.max<"u"&&o.setAttribute("max",n.max),typeof n.min<"u"&&o.setAttribute("min",n.min),typeof n.step<"u"&&o.setAttribute("step",n.step),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let l in n.elementAttributes)l.charAt(0)=="+"?(l=l.slice(1),o.setAttribute(l,o.getAttribute(l)+n.elementAttributes["+"+l])):o.setAttribute(l,n.elementAttributes[l]);o.value=s,e(function(){t.getType()==="cell"&&(o.focus({preventScroll:!0}),o.style.height="100%")});function a(){var l=o.value;!isNaN(l)&&l!==""&&(l=Number(l)),l!=s?i(l)&&(s=l):r()}return o.addEventListener("blur",function(l){a()}),o.addEventListener("keydown",function(l){switch(l.keyCode){case 13:a();break;case 27:r();break}}),o}function kRe(t,e,i,r,n){var s=n.format,o=n.verticalNavigation||"editor",a=s?window.DateTime||luxon.DateTime:null,l=t.getValue(),u=document.createElement("input");function c(d){var p;return a.isDateTime(d)?p=d:s==="iso"?p=a.fromISO(String(d)):p=a.fromFormat(String(d),s),p.toFormat("yyyy-MM-dd")}if(u.type="date",u.style.padding="4px",u.style.width="100%",u.style.boxSizing="border-box",n.max&&u.setAttribute("max",s?c(n.max):n.max),n.min&&u.setAttribute("min",s?c(n.min):n.min),n.elementAttributes&&typeof n.elementAttributes=="object")for(let d in n.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),u.setAttribute(d,u.getAttribute(d)+n.elementAttributes["+"+d])):u.setAttribute(d,n.elementAttributes[d]);l=typeof l<"u"?l:"",s&&(a?l=c(l):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),u.value=l,e(function(){t.getType()==="cell"&&(u.focus({preventScroll:!0}),u.style.height="100%",n.selectContents&&u.select())});function h(){var d=u.value,p;if((l===null||typeof l>"u")&&d!==""||d!==l){if(d&&s)switch(p=a.fromFormat(String(d),"yyyy-MM-dd"),s){case!0:d=p;break;case"iso":d=p.toISO();break;default:d=p.toFormat(s)}i(d)&&(l=u.value)}else r()}return u.addEventListener("blur",function(d){(d.relatedTarget||d.rangeParent||d.explicitOriginalTarget!==u)&&h()}),u.addEventListener("keydown",function(d){switch(d.keyCode){case 13:h();break;case 27:r();break;case 35:case 36:d.stopPropagation();break;case 38:case 40:o=="editor"&&(d.stopImmediatePropagation(),d.stopPropagation());break}}),u}function ARe(t,e,i,r,n){var s=n.format,o=n.verticalNavigation||"editor",a=s?window.DateTime||luxon.DateTime:null,l,u=t.getValue(),c=document.createElement("input");if(c.type="time",c.style.padding="4px",c.style.width="100%",c.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let d in n.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),c.setAttribute(d,c.getAttribute(d)+n.elementAttributes["+"+d])):c.setAttribute(d,n.elementAttributes[d]);u=typeof u<"u"?u:"",s&&(a?(a.isDateTime(u)?l=u:s==="iso"?l=a.fromISO(String(u)):l=a.fromFormat(String(u),s),u=l.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),c.value=u,e(function(){t.getType()=="cell"&&(c.focus({preventScroll:!0}),c.style.height="100%",n.selectContents&&c.select())});function h(){var d=c.value,p;if((u===null||typeof u>"u")&&d!==""||d!==u){if(d&&s)switch(p=a.fromFormat(String(d),"hh:mm"),s){case!0:d=p;break;case"iso":d=p.toISO();break;default:d=p.toFormat(s)}i(d)&&(u=c.value)}else r()}return c.addEventListener("blur",function(d){(d.relatedTarget||d.rangeParent||d.explicitOriginalTarget!==c)&&h()}),c.addEventListener("keydown",function(d){switch(d.keyCode){case 13:h();break;case 27:r();break;case 35:case 36:d.stopPropagation();break;case 38:case 40:o=="editor"&&(d.stopImmediatePropagation(),d.stopPropagation());break}}),c}function TRe(t,e,i,r,n){var s=n.format,o=n.verticalNavigation||"editor",a=s?this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"):null,l,u=t.getValue(),c=document.createElement("input");if(c.type="datetime-local",c.style.padding="4px",c.style.width="100%",c.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let d in n.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),c.setAttribute(d,c.getAttribute(d)+n.elementAttributes["+"+d])):c.setAttribute(d,n.elementAttributes[d]);u=typeof u<"u"?u:"",s&&(a?(a.isDateTime(u)?l=u:s==="iso"?l=a.fromISO(String(u)):l=a.fromFormat(String(u),s),u=l.toFormat("yyyy-MM-dd")+"T"+l.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),c.value=u,e(function(){t.getType()==="cell"&&(c.focus({preventScroll:!0}),c.style.height="100%",n.selectContents&&c.select())});function h(){var d=c.value,p;if((u===null||typeof u>"u")&&d!==""||d!==u){if(d&&s)switch(p=a.fromISO(String(d)),s){case!0:d=p;break;case"iso":d=p.toISO();break;default:d=p.toFormat(s)}i(d)&&(u=c.value)}else r()}return c.addEventListener("blur",function(d){(d.relatedTarget||d.rangeParent||d.explicitOriginalTarget!==c)&&h()}),c.addEventListener("keydown",function(d){switch(d.keyCode){case 13:h();break;case 27:r();break;case 35:case 36:d.stopPropagation();break;case 38:case 40:o=="editor"&&(d.stopImmediatePropagation(),d.stopPropagation());break}}),c}var RRe=class{constructor(e,i,r,n,s,o){this.edit=e,this.table=e.table,this.cell=i,this.params=this._initializeParams(o),this.data=[],this.displayItems=[],this.currentItems=[],this.focusedItem=null,this.input=this._createInputElement(),this.listEl=this._createListElement(),this.initialValues=null,this.isFilter=i.getType()==="header",this.filterTimeout=null,this.filtered=!1,this.typing=!1,this.values=[],this.popup=null,this.listIteration=0,this.lastAction="",this.filterTerm="",this.blurable=!0,this.actions={success:n,cancel:s},this._deprecatedOptionsCheck(),this._initializeValue(),r(this._onRendered.bind(this))}_deprecatedOptionsCheck(){}_initializeValue(){var e=this.cell.getValue();typeof e>"u"&&typeof this.params.defaultValue<"u"&&(e=this.params.defaultValue),this.initialValues=this.params.multiselect?e:[e],this.isFilter&&(this.input.value=this.initialValues?this.initialValues.join(","):"",this.headerFilterInitialListGen())}_onRendered(){var e=this.cell.getElement();function i(r){r.stopPropagation()}this.isFilter||(this.input.style.height="100%",this.input.focus({preventScroll:!0})),e.addEventListener("click",i),setTimeout(()=>{e.removeEventListener("click",i)},1e3),this.input.addEventListener("mousedown",this._preventPopupBlur.bind(this))}_createListElement(){var e=document.createElement("div");return e.classList.add("tabulator-edit-list"),e.addEventListener("mousedown",this._preventBlur.bind(this)),e.addEventListener("keydown",this._inputKeyDown.bind(this)),e}_setListWidth(){var e=this.isFilter?this.input:this.cell.getElement();this.listEl.style.minWidth=e.offsetWidth+"px",this.params.maxWidth&&(this.params.maxWidth===!0?this.listEl.style.maxWidth=e.offsetWidth+"px":typeof this.params.maxWidth=="number"?this.listEl.style.maxWidth=this.params.maxWidth+"px":this.listEl.style.maxWidth=this.params.maxWidth)}_createInputElement(){var e=this.params.elementAttributes,i=document.createElement("input");if(i.setAttribute("type",this.params.clearable?"search":"text"),i.style.padding="4px",i.style.width="100%",i.style.boxSizing="border-box",this.params.autocomplete||(i.style.cursor="default",i.style.caretColor="transparent"),e&&typeof e=="object")for(let r in e)r.charAt(0)=="+"?(r=r.slice(1),i.setAttribute(r,i.getAttribute(r)+e["+"+r])):i.setAttribute(r,e[r]);return this.params.mask&&qE(i,this.params),this._bindInputEvents(i),i}_initializeParams(e){var i=["values","valuesURL","valuesLookup"],r;return e=Object.assign({},e),e.verticalNavigation=e.verticalNavigation||"editor",e.placeholderLoading=typeof e.placeholderLoading>"u"?"Searching ...":e.placeholderLoading,e.placeholderEmpty=typeof e.placeholderEmpty>"u"?"No Results Found":e.placeholderEmpty,e.filterDelay=typeof e.filterDelay>"u"?300:e.filterDelay,e.emptyValue=Object.keys(e).includes("emptyValue")?e.emptyValue:"",r=Object.keys(e).filter(n=>i.includes(n)).length,r?r>1&&console.warn("list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor"):console.warn("list editor config error - either the values, valuesURL, or valuesLookup option must be set"),e.autocomplete?e.multiselect&&(e.multiselect=!1,console.warn("list editor config error - multiselect option is not available when autocomplete is enabled")):(e.freetext&&(e.freetext=!1,console.warn("list editor config error - freetext option is only available when autocomplete is enabled")),e.filterFunc&&(e.filterFunc=!1,console.warn("list editor config error - filterFunc option is only available when autocomplete is enabled")),e.filterRemote&&(e.filterRemote=!1,console.warn("list editor config error - filterRemote option is only available when autocomplete is enabled")),e.mask&&(e.mask=!1,console.warn("list editor config error - mask option is only available when autocomplete is enabled")),e.allowEmpty&&(e.allowEmpty=!1,console.warn("list editor config error - allowEmpty option is only available when autocomplete is enabled")),e.listOnEmpty&&(e.listOnEmpty=!1,console.warn("list editor config error - listOnEmpty option is only available when autocomplete is enabled"))),e.filterRemote&&!(typeof e.valuesLookup=="function"||e.valuesURL)&&(e.filterRemote=!1,console.warn("list editor config error - filterRemote option should only be used when values list is populated from a remote source")),e}_bindInputEvents(e){e.addEventListener("focus",this._inputFocus.bind(this)),e.addEventListener("click",this._inputClick.bind(this)),e.addEventListener("blur",this._inputBlur.bind(this)),e.addEventListener("keydown",this._inputKeyDown.bind(this)),e.addEventListener("search",this._inputSearch.bind(this)),this.params.autocomplete&&e.addEventListener("keyup",this._inputKeyUp.bind(this))}_inputFocus(e){this.rebuildOptionsList()}_filter(){this.params.filterRemote?(clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(()=>{this.rebuildOptionsList()},this.params.filterDelay)):this._filterList()}_inputClick(e){e.stopPropagation()}_inputBlur(e){this.blurable&&(this.popup?this.popup.hide():this._resolveValue(!0))}_inputSearch(){this._clearChoices()}_inputKeyDown(e){switch(e.keyCode){case 38:this._keyUp(e);break;case 40:this._keyDown(e);break;case 37:case 39:this._keySide(e);break;case 13:this._keyEnter();break;case 27:this._keyEsc();break;case 36:case 35:this._keyHomeEnd(e);break;case 9:this._keyTab(e);break;default:this._keySelectLetter(e)}}_inputKeyUp(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:this._keyAutoCompLetter(e)}}_preventPopupBlur(){this.popup&&this.popup.blockHide(),setTimeout(()=>{this.popup&&this.popup.restoreHide()},10)}_preventBlur(){this.blurable=!1,setTimeout(()=>{this.blurable=!0},10)}_keyTab(e){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem,!0)}_keyUp(e){var i=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&i)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),i>0&&this._focusItem(this.displayItems[i-1]))}_keyDown(e){var i=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&i<this.displayItems.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),i<this.displayItems.length-1&&(i==-1?this._focusItem(this.displayItems[0]):this._focusItem(this.displayItems[i+1])))}_keySide(e){this.params.autocomplete||(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())}_keyEnter(e){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem)}_keyEsc(e){this._cancel()}_keyHomeEnd(e){this.params.autocomplete&&e.stopImmediatePropagation()}_keySelectLetter(e){this.params.autocomplete||(e.preventDefault(),e.keyCode>=38&&e.keyCode<=90&&this._scrollToValue(e.keyCode))}_keyAutoCompLetter(e){this._filter(),this.lastAction="typing",this.typing=!0}_scrollToValue(e){clearTimeout(this.filterTimeout);var i=String.fromCharCode(e).toLowerCase();this.filterTerm+=i.toLowerCase();var r=this.displayItems.find(n=>typeof n.label<"u"&&n.label.toLowerCase().startsWith(this.filterTerm));r&&this._focusItem(r),this.filterTimeout=setTimeout(()=>{this.filterTerm=""},800)}_focusItem(e){this.lastAction="focus",this.focusedItem&&this.focusedItem.element&&this.focusedItem.element.classList.remove("focused"),this.focusedItem=e,e&&e.element&&(e.element.classList.add("focused"),e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}headerFilterInitialListGen(){this._generateOptions(!0)}rebuildOptionsList(){this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(e=>{Number.isInteger(e)||console.error("List generation error",e)})}_filterList(){this._buildList(this._filterOptions()),this._showList()}_generateOptions(e){var i=[],r=++this.listIteration;return this.filtered=!1,this.params.values?i=this.params.values:this.params.valuesURL?i=this._ajaxRequest(this.params.valuesURL,this.input.value):typeof this.params.valuesLookup=="function"?i=this.params.valuesLookup(this.cell,this.input.value):this.params.valuesLookup&&(i=this._uniqueColumnValues(this.params.valuesLookupField)),i instanceof Promise?(e||this._addPlaceholder(this.params.placeholderLoading),i.then().then(n=>this.listIteration===r?this._parseList(n):Promise.reject(r))):Promise.resolve(this._parseList(i))}_addPlaceholder(e){var i=document.createElement("div");typeof e=="function"&&(e=e(this.cell.getComponent(),this.listEl)),e&&(this._clearList(),e instanceof HTMLElement?i=e:(i.classList.add("tabulator-edit-list-placeholder"),i.innerHTML=e),this.listEl.appendChild(i),this._showList())}_ajaxRequest(e,i){var r=this.params.filterRemote?{term:i}:{};return e=fre(e,{},r),fetch(e).then(n=>n.ok?n.json().catch(s=>(console.warn("List Ajax Load Error - Invalid JSON returned",s),Promise.reject(s))):(console.error("List Ajax Load Error - Connection Error: "+n.status,n.statusText),Promise.reject(n))).catch(n=>(console.error("List Ajax Load Error - Connection Error: ",n),Promise.reject(n)))}_uniqueColumnValues(e){var i={},r=this.table.getData(this.params.valuesLookup),n;return e?n=this.table.columnManager.getColumnByField(e):n=this.cell.getColumn()._getSelf(),n?r.forEach(s=>{var o=n.getFieldValue(s);this._emptyValueCheck(o)||(this.params.multiselect&&Array.isArray(o)?o.forEach(a=>{this._emptyValueCheck(a)||(i[a]=!0)}):i[o]=!0)}):(console.warn("unable to find matching column to create select lookup list:",e),i=[]),Object.keys(i)}_emptyValueCheck(e){return e===null||typeof e>"u"||e===""}_parseList(e){var i=[];return Array.isArray(e)||(e=Object.entries(e).map(([r,n])=>({label:n,value:r}))),e.forEach(r=>{typeof r!="object"&&(r={label:r,value:r}),this._parseListItem(r,i,0)}),!this.currentItems.length&&this.params.freetext&&(this.input.value=this.initialValues,this.typing=!0,this.lastAction="typing"),this.data=i,i}_parseListItem(e,i,r){var n={};e.options?n=this._parseListGroup(e,r+1):(n={label:e.label,value:e.value,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1,selected:!1,visible:!0,level:r,original:e},this.initialValues&&this.initialValues.indexOf(e.value)>-1&&this._chooseItem(n,!0)),i.push(n)}_parseListGroup(e,i){var r={label:e.label,group:!0,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1,visible:!0,level:i,options:[],original:e};return e.options.forEach(n=>{this._parseListItem(n,r.options,i)}),r}_sortOptions(e){var i;return this.params.sort&&(i=typeof this.params.sort=="function"?this.params.sort:this._defaultSortFunction.bind(this),this._sortGroup(i,e)),e}_sortGroup(e,i){i.sort((r,n)=>e(r.label,n.label,r.value,n.value,r.original,n.original)),i.forEach(r=>{r.group&&this._sortGroup(e,r.options)})}_defaultSortFunction(e,i){var r,n,s,o,a=0,l,u=/(\d+)|(\D+)/g,c=/\d/,h=0;if(this.params.sort==="desc"&&([e,i]=[i,e]),!e&&e!==0)h=!i&&i!==0?0:-1;else if(!i&&i!==0)h=1;else{if(isFinite(e)&&isFinite(i))return e-i;if(r=String(e).toLowerCase(),n=String(i).toLowerCase(),r===n)return 0;if(!(c.test(r)&&c.test(n)))return r>n?1:-1;for(r=r.match(u),n=n.match(u),l=r.length>n.length?n.length:r.length;a<l;)if(s=r[a],o=n[a++],s!==o)return isFinite(s)&&isFinite(o)?(s.charAt(0)==="0"&&(s="."+s),o.charAt(0)==="0"&&(o="."+o),s-o):s>o?1:-1;return r.length>n.length}return h}_filterOptions(){var e=this.params.filterFunc||this._defaultFilterFunc,i=this.input.value;return i?(this.filtered=!0,this.data.forEach(r=>{this._filterItem(e,i,r)})):this.filtered=!1,this.data}_filterItem(e,i,r){var n=!1;return r.group?(r.options.forEach(s=>{this._filterItem(e,i,s)&&(n=!0)}),r.visible=n):r.visible=e(i,r.label,r.value,r.original),r.visible}_defaultFilterFunc(e,i,r,n){return e=String(e).toLowerCase(),i!==null&&typeof i<"u"&&(String(i).toLowerCase().indexOf(e)>-1||String(r).toLowerCase().indexOf(e)>-1)}_clearList(){for(;this.listEl.firstChild;)this.listEl.removeChild(this.listEl.firstChild);this.displayItems=[]}_buildList(e){this._clearList(),e.forEach(i=>{this._buildItem(i)}),this.displayItems.length||this._addPlaceholder(this.params.placeholderEmpty)}_buildItem(e){var i=e.element,r;if(!this.filtered||e.visible){if(!i){if(i=document.createElement("div"),i.tabIndex=0,r=this.params.itemFormatter?this.params.itemFormatter(e.label,e.value,e.original,i):e.label,r instanceof HTMLElement?i.appendChild(r):i.innerHTML=r,e.group?i.classList.add("tabulator-edit-list-group"):i.classList.add("tabulator-edit-list-item"),i.classList.add("tabulator-edit-list-group-level-"+e.level),e.elementAttributes&&typeof e.elementAttributes=="object")for(let n in e.elementAttributes)n.charAt(0)=="+"?(n=n.slice(1),i.setAttribute(n,this.input.getAttribute(n)+e.elementAttributes["+"+n])):i.setAttribute(n,e.elementAttributes[n]);e.group?i.addEventListener("click",this._groupClick.bind(this,e)):i.addEventListener("click",this._itemClick.bind(this,e)),i.addEventListener("mousedown",this._preventBlur.bind(this)),e.element=i}this._styleItem(e),this.listEl.appendChild(i),e.group?e.options.forEach(n=>{this._buildItem(n)}):this.displayItems.push(e)}}_showList(){var e=this.popup&&this.popup.isVisible();if(this.input.parentNode){if(this.params.autocomplete&&this.input.value===""&&!this.params.listOnEmpty){this.popup&&this.popup.hide(!0);return}this._setListWidth(),this.popup||(this.popup=this.edit.popup(this.listEl)),this.popup.show(this.cell.getElement(),"bottom"),e||setTimeout(()=>{this.popup.hideOnBlur(this._resolveValue.bind(this,!0))},10)}}_styleItem(e){e&&e.element&&(e.selected?e.element.classList.add("active"):e.element.classList.remove("active"))}_itemClick(e,i){i.stopPropagation(),this._chooseItem(e)}_groupClick(e,i){i.stopPropagation()}_cancel(){this.popup.hide(!0),this.actions.cancel()}_clearChoices(){this.typing=!0,this.currentItems.forEach(e=>{e.selected=!1,this._styleItem(e)}),this.currentItems=[],this.focusedItem=null}_chooseItem(e,i){var r;this.typing=!1,this.params.multiselect?(r=this.currentItems.indexOf(e),r>-1?(this.currentItems.splice(r,1),e.selected=!1):(this.currentItems.push(e),e.selected=!0),this.input.value=this.currentItems.map(n=>n.label).join(","),this._styleItem(e)):(this.currentItems=[e],e.selected=!0,this.input.value=e.label,this._styleItem(e),i||this._resolveValue()),this._focusItem(e)}_resolveValue(e){var i,r;if(this.popup&&this.popup.hide(!0),this.params.multiselect)i=this.currentItems.map(n=>n.value);else if(e&&this.params.autocomplete&&this.typing)if(this.params.freetext||this.params.allowEmpty&&this.input.value==="")i=this.input.value;else{this.actions.cancel();return}else this.currentItems[0]?i=this.currentItems[0].value:(r=Array.isArray(this.initialValues)?this.initialValues[0]:this.initialValues,r===null||typeof r>"u"||r===""?i=r:i=this.params.emptyValue);i===""&&(i=this.params.emptyValue),this.actions.success(i),this.isFilter&&(this.initialValues=i&&!Array.isArray(i)?[i]:i,this.currentItems=[])}};function DRe(t,e,i,r,n){var s=new RRe(this,t,e,i,r,n);return s.input}function MRe(t,e,i,r,n){var s=this,o=t.getElement(),a=t.getValue(),l=o.getElementsByTagName("svg").length||5,u=o.getElementsByTagName("svg")[0]?o.getElementsByTagName("svg")[0].getAttribute("width"):14,c=[],h=document.createElement("div"),d=document.createElementNS("http://www.w3.org/2000/svg","svg");function p(b){c.forEach(function(v,y){y<b?(s.table.browser=="ie"?v.setAttribute("class","tabulator-star-active"):v.classList.replace("tabulator-star-inactive","tabulator-star-active"),v.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):(s.table.browser=="ie"?v.setAttribute("class","tabulator-star-inactive"):v.classList.replace("tabulator-star-active","tabulator-star-inactive"),v.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function f(b){var v=document.createElement("span"),y=d.cloneNode(!0);c.push(y),v.addEventListener("mouseenter",function(x){x.stopPropagation(),x.stopImmediatePropagation(),p(b)}),v.addEventListener("mousemove",function(x){x.stopPropagation(),x.stopImmediatePropagation()}),v.addEventListener("click",function(x){x.stopPropagation(),x.stopImmediatePropagation(),i(b),o.blur()}),v.appendChild(y),h.appendChild(v)}function m(b){a=b,p(b)}if(o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.textOverflow="ellipsis",h.style.verticalAlign="middle",h.style.display="inline-block",h.style.padding="4px",d.setAttribute("width",u),d.setAttribute("height",u),d.setAttribute("viewBox","0 0 512 512"),d.setAttribute("xml:space","preserve"),d.style.padding="0 1px",n.elementAttributes&&typeof n.elementAttributes=="object")for(let b in n.elementAttributes)b.charAt(0)=="+"?(b=b.slice(1),h.setAttribute(b,h.getAttribute(b)+n.elementAttributes["+"+b])):h.setAttribute(b,n.elementAttributes[b]);for(var g=1;g<=l;g++)f(g);return a=Math.min(parseInt(a),l),p(a),h.addEventListener("mousemove",function(b){p(0)}),h.addEventListener("click",function(b){i(0)}),o.addEventListener("blur",function(b){r()}),o.addEventListener("keydown",function(b){switch(b.keyCode){case 39:m(a+1);break;case 37:m(a-1);break;case 13:i(a);break;case 27:r();break}}),h}function FRe(t,e,i,r,n){var s=t.getElement(),o=typeof n.max>"u"?s.getElementsByTagName("div")[0]&&s.getElementsByTagName("div")[0].getAttribute("max")||100:n.max,a=typeof n.min>"u"?s.getElementsByTagName("div")[0]&&s.getElementsByTagName("div")[0].getAttribute("min")||0:n.min,l=(o-a)/100,u=t.getValue()||0,c=document.createElement("div"),h=document.createElement("div"),d,p;function f(){var m=window.getComputedStyle(s,null),g=l*Math.round(h.offsetWidth/((s.clientWidth-parseInt(m.getPropertyValue("padding-left"))-parseInt(m.getPropertyValue("padding-right")))/100))+a;i(g),s.setAttribute("aria-valuenow",g),s.setAttribute("aria-label",u)}if(c.style.position="absolute",c.style.right="0",c.style.top="0",c.style.bottom="0",c.style.width="5px",c.classList.add("tabulator-progress-handle"),h.style.display="inline-block",h.style.position="relative",h.style.height="100%",h.style.backgroundColor="#488CE9",h.style.maxWidth="100%",h.style.minWidth="0%",n.elementAttributes&&typeof n.elementAttributes=="object")for(let m in n.elementAttributes)m.charAt(0)=="+"?(m=m.slice(1),h.setAttribute(m,h.getAttribute(m)+n.elementAttributes["+"+m])):h.setAttribute(m,n.elementAttributes[m]);return s.style.padding="4px 4px",u=Math.min(parseFloat(u),o),u=Math.max(parseFloat(u),a),u=Math.round((u-a)/l),h.style.width=u+"%",s.setAttribute("aria-valuemin",a),s.setAttribute("aria-valuemax",o),h.appendChild(c),c.addEventListener("mousedown",function(m){d=m.screenX,p=h.offsetWidth}),c.addEventListener("mouseover",function(){c.style.cursor="ew-resize"}),s.addEventListener("mousemove",function(m){d&&(h.style.width=p+m.screenX-d+"px")}),s.addEventListener("mouseup",function(m){d&&(m.stopPropagation(),m.stopImmediatePropagation(),d=!1,p=!1,f())}),s.addEventListener("keydown",function(m){switch(m.keyCode){case 39:m.preventDefault(),h.style.width=h.clientWidth+s.clientWidth/100+"px";break;case 37:m.preventDefault(),h.style.width=h.clientWidth-s.clientWidth/100+"px";break;case 9:case 13:f();break;case 27:r();break}}),s.addEventListener("blur",function(){r()}),h}function LRe(t,e,i,r,n){var s=t.getValue(),o=document.createElement("input"),a=n.tristate,l=typeof n.indeterminateValue>"u"?null:n.indeterminateValue,u=!1,c=Object.keys(n).includes("trueValue"),h=Object.keys(n).includes("falseValue");if(o.setAttribute("type","checkbox"),o.style.marginTop="5px",o.style.boxSizing="border-box",n.elementAttributes&&typeof n.elementAttributes=="object")for(let p in n.elementAttributes)p.charAt(0)=="+"?(p=p.slice(1),o.setAttribute(p,o.getAttribute(p)+n.elementAttributes["+"+p])):o.setAttribute(p,n.elementAttributes[p]);o.value=s,a&&(typeof s>"u"||s===l||s==="")&&(u=!0,o.indeterminate=!0),this.table.browser!="firefox"&&this.table.browser!="safari"&&e(function(){t.getType()==="cell"&&o.focus({preventScroll:!0})}),o.checked=c?s===n.trueValue:s===!0||s==="true"||s==="True"||s===1;function d(p){var f=o.checked;return c&&f?f=n.trueValue:h&&!f&&(f=n.falseValue),a?p?u?l:f:o.checked&&!u?(o.checked=!1,o.indeterminate=!0,u=!0,l):(u=!1,f):f}return o.addEventListener("change",function(p){i(d())}),o.addEventListener("blur",function(p){i(d(!0))}),o.addEventListener("keydown",function(p){p.keyCode==13&&i(d()),p.keyCode==27&&r()}),o}function ORe(t,e,i,r,n){var s=t._getSelf().column,o,a,l;function u(c){var h=c.getValue(),d="input";switch(typeof h){case"number":d="number";break;case"boolean":d="tickCross";break;case"string":h.includes(`
`)&&(d="textarea");break}return d}return o=n.editorLookup?n.editorLookup(t):u(t),n.paramsLookup&&(l=typeof n.paramsLookup=="function"?n.paramsLookup(o,t):n.paramsLookup[o]),a=this.table.modules.edit.lookupEditor(o,s),a.call(this,t,e,i,r,l||{})}var PRe={input:_Re,textarea:CRe,number:SRe,range:ERe,date:kRe,time:ARe,datetime:TRe,list:DRe,star:MRe,progress:FRe,tickCross:LRe,adaptable:ORe},uw=class uw extends bt{constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.convertEmptyValues=!1,this.editors=uw.editors,this.registerTableOption("editTriggerEvent","focus"),this.registerTableOption("editorEmptyValue"),this.registerTableOption("editorEmptyValueFunc",this.emptyValueCheck.bind(this)),this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("editorEmptyValue"),this.registerColumnOption("editorEmptyValueFunc"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellIsEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("cell-value-changed",this.updateCellClass.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("row-layout",this.rowEditableCheck.bind(this)),this.subscribe("data-refreshing",this.cancelEdit.bind(this)),this.subscribe("clipboard-paste",this.pasteBlocker.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this,void 0)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this,void 0)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this,void 0)),Object.keys(this.table.options).includes("editorEmptyValue")&&(this.convertEmptyValues=!0)}pasteBlocker(e){if(this.currentCell)return!0}keybindingNavigateNext(e){var i=this.currentCell,r=this.options("tabEndNewRow");i&&(this.navigateNext(i,e)||r&&(i.getElement().firstChild.blur(),this.invalidEdit||(r===!0?r=this.table.addRow({}):typeof r=="function"?r=this.table.addRow(r(i.row.getComponent())):r=this.table.addRow(Object.assign({},r)),r.then(()=>{setTimeout(()=>{i.getComponent().navigateNext()})}))))}cellIsEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}updateCellClass(e){this.allowEdit(e)?e.getElement().classList.add("tabulator-editable"):e.getElement().classList.remove("tabulator-editable")}clearCellEdited(e){e||(e=this.table.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(i=>{this.table.modules.edit.clearEdited(i._getSelf())})}navigatePrev(e=this.currentCell,i){var r,n;if(e){if(i&&i.preventDefault(),r=this.navigateLeft(),r)return!0;if(n=this.table.rowManager.prevDisplayRow(e.row,!0),n&&(r=this.findPrevEditableCell(n,n.cells.length),r))return r.getComponent().edit(),!0}return!1}navigateNext(e=this.currentCell,i){var r,n;if(e){if(i&&i.preventDefault(),r=this.navigateRight(),r)return!0;if(n=this.table.rowManager.nextDisplayRow(e.row,!0),n&&(r=this.findNextEditableCell(n,-1),r))return r.getComponent().edit(),!0}return!1}navigateLeft(e=this.currentCell,i){var r,n;return e&&(i&&i.preventDefault(),r=e.getIndex(),n=this.findPrevEditableCell(e.row,r),n)?(n.getComponent().edit(),!0):!1}navigateRight(e=this.currentCell,i){var r,n;return e&&(i&&i.preventDefault(),r=e.getIndex(),n=this.findNextEditableCell(e.row,r),n)?(n.getComponent().edit(),!0):!1}navigateUp(e=this.currentCell,i){var r,n;return e&&(i&&i.preventDefault(),r=e.getIndex(),n=this.table.rowManager.prevDisplayRow(e.row,!0),n)?(n.cells[r].getComponent().edit(),!0):!1}navigateDown(e=this.currentCell,i){var r,n;return e&&(i&&i.preventDefault(),r=e.getIndex(),n=this.table.rowManager.nextDisplayRow(e.row,!0),n)?(n.cells[r].getComponent().edit(),!0):!1}findNextEditableCell(e,i){var r=!1;if(i<e.cells.length-1)for(var n=i+1;n<e.cells.length;n++){let s=e.cells[n];if(s.column.modules.edit&&Qt.elVisible(s.getElement())&&this.allowEdit(s)){r=s;break}}return r}findPrevEditableCell(e,i){var r=!1;if(i>0)for(var n=i-1;n>=0;n--){let s=e.cells[n];if(s.column.modules.edit&&Qt.elVisible(s.getElement())&&this.allowEdit(s)){r=s;break}}return r}initializeColumnCheck(e){typeof e.definition.editor<"u"&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}rowEditableCheck(e){e.getCells().forEach(i=>{i.column.modules.edit&&typeof i.column.modules.edit.check=="function"&&this.updateCellClass(i)})}initializeColumn(e){var i=Object.keys(e.definition).includes("editorEmptyValue"),r={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{},convertEmptyValues:i,editorEmptyValue:e.definition.editorEmptyValue,editorEmptyValueFunc:e.definition.editorEmptyValueFunc};r.editor=this.lookupEditor(e.definition.editor,e),r.editor&&(e.modules.edit=r)}lookupEditor(e,i){var r;switch(typeof e){case"string":this.editors[e]?r=this.editors[e]:console.warn("Editor Error - No such editor found: ",e);break;case"function":r=e;break;case"boolean":e===!0&&(typeof i.definition.formatter!="function"?this.editors[i.definition.formatter]?r=this.editors[i.definition.formatter]:r=this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",i.definition.formatter));break}return r}getCurrentCell(){return this.currentCell?this.currentCell.getComponent():!1}clearEditor(e){var i=this.currentCell,r;if(this.invalidEdit=!1,i){for(this.currentCell=!1,r=i.getElement(),this.dispatch("edit-editor-clear",i,e),r.classList.remove("tabulator-editing");r.firstChild;)r.removeChild(r.firstChild);i.row.getElement().classList.remove("tabulator-editing"),i.table.element.classList.remove("tabulator-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,i=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),(e.column.definition.editor=="textarea"||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,i),this.dispatch("edit-cancelled",e),this.dispatchExternal("cellEditCancelled",i)}}bindEditor(e){if(e.column.modules.edit){var i=this,r=e.getElement(!0);this.updateCellClass(e),r.setAttribute("tabindex",0),r.addEventListener("mousedown",function(n){n.button===2?n.preventDefault():i.mouseClick=!0}),this.options("editTriggerEvent")==="dblclick"&&r.addEventListener("dblclick",function(n){r.classList.contains("tabulator-editing")||(r.focus({preventScroll:!0}),i.edit(e,n,!1))}),(this.options("editTriggerEvent")==="focus"||this.options("editTriggerEvent")==="click")&&r.addEventListener("click",function(n){r.classList.contains("tabulator-editing")||(r.focus({preventScroll:!0}),i.edit(e,n,!1))}),this.options("editTriggerEvent")==="focus"&&r.addEventListener("focus",function(n){i.recursionBlock||i.edit(e,n,!1)})}}focusCellNoEvent(e,i){this.recursionBlock=!0,i&&this.table.browser==="ie"||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,i){this.focusCellNoEvent(e),this.edit(e,!1,i)}focusScrollAdjust(e){if(this.table.rowManager.getRenderMode()=="virtual"){var i=this.table.rowManager.element.scrollTop,r=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,n=e.row.getElement();n.offsetTop<i?this.table.rowManager.element.scrollTop-=i-n.offsetTop:n.offsetTop+n.offsetHeight>r&&(this.table.rowManager.element.scrollTop+=n.offsetTop+n.offsetHeight-r);var s=this.table.rowManager.element.scrollLeft,o=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,a=e.getElement();this.table.modExists("frozenColumns")&&(s+=parseInt(this.table.modules.frozenColumns.leftMargin||0),o-=parseInt(this.table.modules.frozenColumns.rightMargin||0)),this.table.options.renderHorizontal==="virtual"&&(s-=parseInt(this.table.columnManager.renderer.vDomPadLeft),o-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),a.offsetLeft<s?this.table.rowManager.element.scrollLeft-=s-a.offsetLeft:a.offsetLeft+a.offsetWidth>o&&(this.table.rowManager.element.scrollLeft+=a.offsetLeft+a.offsetWidth-o)}}allowEdit(e){var i=!!e.column.modules.edit;if(e.column.modules.edit)switch(typeof e.column.modules.edit.check){case"function":e.row.initialized&&(i=e.column.modules.edit.check(e.getComponent()));break;case"string":i=!!e.row.data[e.column.modules.edit.check];break;case"boolean":i=e.column.modules.edit.check;break}return i}edit(e,i,r){var n=this,s=!0,o=function(){},a=e.getElement(),l=!1,u,c,h;if(this.currentCell){!this.invalidEdit&&this.currentCell!==e&&this.cancelEdit();return}function d(b){if(n.currentCell===e&&!l){var v=n.chain("edit-success",[e,b],!0,!0);return v===!0||n.table.options.validationMode==="highlight"?(l=!0,n.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,n.editedCells.indexOf(e)==-1&&n.editedCells.push(e),b=n.transformEmptyValues(b,e),e.setValue(b,!0),v===!0):(l=!0,n.invalidEdit=!0,n.focusCellNoEvent(e,!0),o(),setTimeout(()=>{l=!1},10),!1)}}function p(){n.currentCell===e&&!l&&n.cancelEdit()}function f(b){o=b}if(e.column.modules.edit.blocked)return this.mouseClick=!1,this.blur(a),!1;if(i&&i.stopPropagation(),s=this.allowEdit(e),s||r){if(n.cancelEdit(),n.currentCell=e,this.focusScrollAdjust(e),c=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,i,c)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,c),this.dispatch("cell-editing",e),this.dispatchExternal("cellEditing",c),h=typeof e.column.modules.edit.params=="function"?e.column.modules.edit.params(c):e.column.modules.edit.params,u=e.column.modules.edit.editor.call(n,c,f,d,p,h),this.currentCell&&u!==!1)if(u instanceof Node){for(a.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-editing"),e.table.element.classList.add("tabulator-editing");a.firstChild;)a.removeChild(a.firstChild);a.appendChild(u),o();for(var m=a.children,g=0;g<m.length;g++)m[g].addEventListener("click",function(b){b.stopPropagation()})}else return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",u),this.blur(a),!1;else return this.blur(a),!1;return!0}else return this.mouseClick=!1,this.blur(a),!1}emptyValueCheck(e){return e===""||e===null||typeof e>"u"}transformEmptyValues(e,i){var r=i.column.modules.edit,n=r.convertEmptyValues||this.convertEmptyValues,s;return n&&(s=r.editorEmptyValueFunc||this.options("editorEmptyValueFunc"),s&&s(e)&&(e=r.convertEmptyValues?r.editorEmptyValue:this.options("editorEmptyValue"))),e}blur(e){this.confirm("edit-blur",[e])||e.blur()}getEditedCells(){var e=[];return this.editedCells.forEach(i=>{e.push(i.getComponent())}),e}clearEdited(e){var i;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,this.dispatch("edit-edited-clear",e)),i=this.editedCells.indexOf(e),i>-1&&this.editedCells.splice(i,1)}};de(uw,"moduleName","edit"),de(uw,"editors",PRe);var OO=uw,UE=class{constructor(e,i,r,n){this.type=e,this.columns=i,this.component=r||!1,this.indent=n||0}},lw=class{constructor(e,i,r,n,s){this.value=e,this.component=i||!1,this.width=r,this.height=n,this.depth=s}},zRe={},IRe={visible:function(){return this.rowManager.getVisibleRows(!1,!0)},all:function(){return this.rowManager.rows},selected:function(){return this.modules.selectRow.selectedRows},active:function(){return this.options.pagination?this.rowManager.getDisplayRows(this.rowManager.displayRows.length-2):this.rowManager.getDisplayRows()}},Sd=class Sd extends bt{constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.colVisPropAttach="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,i,r,n){var s,o,a,l;return this.cloneTableStyle=i,this.config=e||{},this.colVisProp=n,this.colVisPropAttach=this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1),l=Sd.columnLookups[r],l&&(a=l.call(this.table),a=a.filter(u=>this.columnVisCheck(u))),s=this.config.columnHeaders!==!1?this.headersToExportRows(this.generateColumnGroupHeaders(a)):[],a&&(a=a.map(u=>u.getComponent())),o=this.bodyToExportRows(this.rowLookup(r),a),s.concat(o)}generateTable(e,i,r,n){var s=this.generateExportList(e,i,r,n);return this.generateTableElement(s)}rowLookup(e){var i=[],r;return typeof e=="function"?e.call(this.table).forEach(n=>{n=this.table.rowManager.findRow(n),n&&i.push(n)}):(r=Sd.rowLookups[e]||Sd.rowLookups.active,i=r.call(this.table)),Object.assign([],i)}generateColumnGroupHeaders(e){var i=[];return e||(e=this.config.columnGroups!==!1?this.table.columnManager.columns:this.table.columnManager.columnsByIndex),e.forEach(r=>{var n=this.processColumnGroup(r);n&&i.push(n)}),i}processColumnGroup(e){var i=e.columns,r=0,n=e.definition["title"+this.colVisPropAttach]||e.definition.title,s={title:n,column:e,depth:1};if(i.length){if(s.subGroups=[],s.width=0,i.forEach(o=>{var a=this.processColumnGroup(o);a&&(s.width+=a.width,s.subGroups.push(a),a.depth>r&&(r=a.depth))}),s.depth+=r,!s.width)return!1}else if(this.columnVisCheck(e))s.width=1;else return!1;return s}columnVisCheck(e){var i=e.definition[this.colVisProp];return this.config.rowHeaders===!1&&e.isRowHeader?!1:(typeof i=="function"&&(i=i.call(this.table,e.getComponent())),i===!1||i===!0?i:e.visible&&e.field)}headersToExportRows(e){var i=[],r=0,n=[];function s(o,a){var l=r-a;if(typeof i[a]>"u"&&(i[a]=[]),o.height=o.subGroups?1:l-o.depth+1,i[a].push(o),o.height>1)for(let u=1;u<o.height;u++)typeof i[a+u]>"u"&&(i[a+u]=[]),i[a+u].push(!1);if(o.width>1)for(let u=1;u<o.width;u++)i[a].push(!1);o.subGroups&&o.subGroups.forEach(function(u){s(u,a+1)})}return e.forEach(function(o){o.depth>r&&(r=o.depth)}),e.forEach(function(o){s(o,0)}),i.forEach(o=>{var a=[];o.forEach(l=>{if(l){let u=typeof l.title>"u"?"":l.title;a.push(new lw(u,l.column.getComponent(),l.width,l.height,l.depth))}else a.push(null)}),n.push(new UE("header",a))}),n}bodyToExportRows(e,i=[]){var r=[];return i.length===0&&this.table.columnManager.columnsByIndex.forEach(n=>{this.columnVisCheck(n)&&i.push(n.getComponent())}),this.config.columnCalcs!==!1&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),e=e.filter(n=>{switch(n.type){case"group":return this.config.rowGroups!==!1;case"calc":return this.config.columnCalcs!==!1;case"row":return!(this.table.options.dataTree&&this.config.dataTree===!1&&n.modules.dataTree.parent)}return!0}),e.forEach((n,s)=>{var o=n.getData(this.colVisProp),a=[],l=0;switch(n.type){case"group":l=n.level,a.push(new lw(n.key,n.getComponent(),i.length,1));break;case"calc":case"row":i.forEach(u=>{a.push(new lw(u._column.getFieldValue(o),u,1,1))}),this.table.options.dataTree&&this.config.dataTree!==!1&&(l=n.modules.dataTree.index);break}r.push(new UE(n.type,a,n.getComponent(),l))}),r}generateTableElement(e){var i=document.createElement("table"),r=document.createElement("thead"),n=document.createElement("tbody"),s=this.lookupTableStyles(),o=this.table.options["rowFormatter"+this.colVisPropAttach],a={};return a.rowFormatter=o!==null?o:this.table.options.rowFormatter,this.table.options.dataTree&&this.config.dataTree!==!1&&this.table.modExists("columnCalcs")&&(a.treeElementField=this.table.modules.dataTree.elementField),a.groupHeader=this.table.options["groupHeader"+this.colVisPropAttach],a.groupHeader&&!Array.isArray(a.groupHeader)&&(a.groupHeader=[a.groupHeader]),i.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),r,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((l,u)=>{let c;switch(l.type){case"header":r.appendChild(this.generateHeaderElement(l,a,s));break;case"group":n.appendChild(this.generateGroupElement(l,a,s));break;case"calc":n.appendChild(this.generateCalcElement(l,a,s));break;case"row":c=this.generateRowElement(l,a,s),this.mapElementStyles(u%2&&s.evenRow?s.evenRow:s.oddRow,c,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),n.appendChild(c);break}}),r.innerHTML&&i.appendChild(r),i.appendChild(n),this.mapElementStyles(this.table.element,i,["border-top","border-left","border-right","border-bottom"]),i}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.styleRowHeader=e.firstRow.getElementsByClassName("tabulator-row-header")[0],e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}generateHeaderElement(e,i,r){var n=document.createElement("tr");return e.columns.forEach(s=>{if(s){var o=document.createElement("th"),a=s.component._column.definition.cssClass?s.component._column.definition.cssClass.split(" "):[];o.colSpan=s.width,o.rowSpan=s.height,o.innerHTML=s.value,this.cloneTableStyle&&(o.style.boxSizing="border-box"),a.forEach(function(l){o.classList.add(l)}),this.mapElementStyles(s.component.getElement(),o,["text-align","border-left","border-right","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(s.component._column.contentElement,o,["padding-top","padding-left","padding-right","padding-bottom"]),s.component._column.visible?this.mapElementStyles(s.component.getElement(),o,["width"]):s.component._column.definition.width&&(o.style.width=s.component._column.definition.width+"px"),s.component._column.parent&&s.component._column.parent.isGroup?this.mapElementStyles(s.component._column.parent.groupElement,o,["border-top"]):this.mapElementStyles(s.component.getElement(),o,["border-top"]),s.component._column.isGroup?this.mapElementStyles(s.component.getElement(),o,["border-bottom"]):this.mapElementStyles(this.table.columnManager.getElement(),o,["border-bottom"]),n.appendChild(o)}}),n}generateGroupElement(e,i,r){var n=document.createElement("tr"),s=document.createElement("td"),o=e.columns[0];return n.classList.add("tabulator-print-table-row"),i.groupHeader&&i.groupHeader[e.indent]?o.value=i.groupHeader[e.indent](o.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):i.groupHeader!==!1&&(o.value=e.component._group.generator(o.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)),s.colSpan=o.width,s.innerHTML=o.value,n.classList.add("tabulator-print-table-group"),n.classList.add("tabulator-group-level-"+e.indent),o.component.isVisible()&&n.classList.add("tabulator-group-visible"),this.mapElementStyles(r.firstGroup,n,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(r.firstGroup,s,["padding-top","padding-left","padding-right","padding-bottom"]),n.appendChild(s),n}generateCalcElement(e,i,r){var n=this.generateRowElement(e,i,r);return n.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(r.calcRow,n,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),n}generateRowElement(e,i,r){var n=document.createElement("tr");if(n.classList.add("tabulator-print-table-row"),e.columns.forEach((s,o)=>{if(s){var a=document.createElement("td"),l=s.component._column,u=this.table,c=u.columnManager.findColumnIndex(l),h=s.value,d,p,f={modules:{},getValue:function(){return h},getField:function(){return l.definition.field},getElement:function(){return a},getType:function(){return"cell"},getColumn:function(){return l.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getTable:function(){return u},getComponent:function(){return f},column:l},m=l.definition.cssClass?l.definition.cssClass.split(" "):[];if(m.forEach(function(g){a.classList.add(g)}),this.table.modExists("format")&&this.config.formatCells!==!1)h=this.table.modules.format.formatExportValue(f,this.colVisProp);else switch(typeof h){case"object":h=h!==null?JSON.stringify(h):"";break;case"undefined":h="";break}h instanceof Node?a.appendChild(h):a.innerHTML=h,p=["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","text-align"],l.isRowHeader?(d=r.styleRowHeader,p.push("background-color")):d=r.styleCells&&r.styleCells[c]?r.styleCells[c]:r.firstCell,d&&(this.mapElementStyles(d,a,p),l.definition.align&&(a.style.textAlign=l.definition.align)),this.table.options.dataTree&&this.config.dataTree!==!1&&(i.treeElementField&&i.treeElementField==l.field||!i.treeElementField&&o==0)&&(e.component._row.modules.dataTree.controlEl&&a.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),a.firstChild),e.component._row.modules.dataTree.branchEl&&a.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),a.firstChild)),n.appendChild(a),f.modules.format&&f.modules.format.renderedCallback&&f.modules.format.renderedCallback()}}),i.rowFormatter&&e.type==="row"&&this.config.formatCells!==!1){let s=Object.assign(e.component);s.getElement=function(){return n},i.rowFormatter(e.component)}return n}generateHTMLTable(e){var i=document.createElement("div");return i.appendChild(this.generateTableElement(e)),i.innerHTML}getHtml(e,i,r,n){var s=this.generateExportList(r||this.table.options.htmlOutputConfig,i,e,n||"htmlOutput");return this.generateHTMLTable(s)}mapElementStyles(e,i,r){if(this.cloneTableStyle&&e&&i){var n={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var s=window.getComputedStyle(e);r.forEach(function(o){i.style[n[o]]||(i.style[n[o]]=s.getPropertyValue(o))})}}}};de(Sd,"moduleName","export"),de(Sd,"columnLookups",zRe),de(Sd,"rowLookups",IRe);var PO=Sd,BRe={"=":function(t,e,i,r){return e==t},"<":function(t,e,i,r){return e<t},"<=":function(t,e,i,r){return e<=t},">":function(t,e,i,r){return e>t},">=":function(t,e,i,r){return e>=t},"!=":function(t,e,i,r){return e!=t},regex:function(t,e,i,r){return typeof t=="string"&&(t=new RegExp(t)),t.test(e)},like:function(t,e,i,r){return t===null||typeof t>"u"?e===t:typeof e<"u"&&e!==null?String(e).toLowerCase().indexOf(t.toLowerCase())>-1:!1},keywords:function(t,e,i,r){var n=t.toLowerCase().split(typeof r.separator>"u"?" ":r.separator),s=String(e===null||typeof e>"u"?"":e).toLowerCase(),o=[];return n.forEach(a=>{s.includes(a)&&o.push(!0)}),r.matchAll?o.length===n.length:!!o.length},starts:function(t,e,i,r){return t===null||typeof t>"u"?e===t:typeof e<"u"&&e!==null?String(e).toLowerCase().startsWith(t.toLowerCase()):!1},ends:function(t,e,i,r){return t===null||typeof t>"u"?e===t:typeof e<"u"&&e!==null?String(e).toLowerCase().endsWith(t.toLowerCase()):!1},in:function(t,e,i,r){return Array.isArray(t)?t.length?t.indexOf(e)>-1:!0:(console.warn("Filter Error - filter value is not an array:",t),!1)}},zc=class zc extends bt{constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerTableOption("placeholderHeaderFilter",!1),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.subscribe("placeholder",this.generatePlaceholder.bind(this)),this.table.options.filterMode==="remote"&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var i=this.table.columnManager.findColumn(e.field);if(i)this.setHeaderFilterValue(i,e.value);else return console.warn("Column Filter Error - No matching column found:",e.field),!1}),this.tableInitialized=!0}remoteFilterParams(e,i,r,n){return n.filter=this.getFilters(!0,!0),n}generatePlaceholder(e){if(this.table.options.placeholderHeaderFilter&&Object.keys(this.headerFilters).length)return this.table.options.placeholderHeaderFilter}userSetFilter(e,i,r,n){this.setFilter(e,i,r,n),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,i,r,n){this.addFilter(e,i,r,n),this.refreshFilter()}userSetHeaderFilterFocus(e){var i=this.table.columnManager.findColumn(e);if(i)this.setHeaderFilterFocus(i);else return console.warn("Column Filter Focus Error - No matching column found:",e),!1}userGetHeaderFilterValue(e){var i=this.table.columnManager.findColumn(e);if(i)return this.getHeaderFilterValue(i);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,i){var r=this.table.columnManager.findColumn(e);if(r)this.setHeaderFilterValue(r,i);else return console.warn("Column Filter Error - No matching column found:",e),!1}userRemoveFilter(e,i,r){this.removeFilter(e,i,r),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,i,r){return this.search("rows",e,i,r)}searchData(e,i,r){return this.search("data",e,i,r)}initializeColumnHeaderFilter(e){var i=e.definition;i.headerFilter&&this.initializeColumn(e)}initializeColumn(e,i){var r=this,n=e.getField();function s(o){var a=e.modules.filter.tagType=="input"&&e.modules.filter.attrType=="text"||e.modules.filter.tagType=="textarea"?"partial":"match",l="",u="",c;if(typeof e.modules.filter.prevSuccess>"u"||e.modules.filter.prevSuccess!==o){if(e.modules.filter.prevSuccess=o,e.modules.filter.emptyFunc(o))delete r.headerFilters[n];else{switch(e.modules.filter.value=o,typeof e.definition.headerFilterFunc){case"string":zc.filters[e.definition.headerFilterFunc]?(l=e.definition.headerFilterFunc,c=function(h){var d=e.definition.headerFilterFuncParams||{},p=e.getFieldValue(h);return d=typeof d=="function"?d(o,p,h):d,zc.filters[e.definition.headerFilterFunc](o,p,h,d)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":c=function(h){var d=e.definition.headerFilterFuncParams||{},p=e.getFieldValue(h);return d=typeof d=="function"?d(o,p,h):d,e.definition.headerFilterFunc(o,p,h,d)},l=c;break}if(!c)switch(a){case"partial":c=function(h){var d=e.getFieldValue(h);return typeof d<"u"&&d!==null?String(d).toLowerCase().indexOf(String(o).toLowerCase())>-1:!1},l="like";break;default:c=function(h){return e.getFieldValue(h)==o},l="="}r.headerFilters[n]={value:o,func:c,type:l}}e.modules.filter.value=o,u=JSON.stringify(r.headerFilters),r.prevHeaderFilterChangeCheck!==u&&(r.prevHeaderFilterChangeCheck=u,r.trackChanges(),r.refreshFilter())}return!0}e.modules.filter={success:s,attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,i,r){var n=this,s=e.modules.filter.success,o=e.getField(),a,l,u,c,h,d,p,f;e.modules.filter.value=i;function m(){}function g(b){f=b}if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),o){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(b){return!b&&b!==0},a=document.createElement("div"),a.classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":n.table.modules.edit.editors[e.definition.headerFilter]?(l=n.table.modules.edit.editors[e.definition.headerFilter],(e.definition.headerFilter==="tick"||e.definition.headerFilter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(b){return b!==!0&&b!==!1})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":l=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?l=e.modules.edit.editor:e.definition.formatter&&n.table.modules.edit.editors[e.definition.formatter]?(l=n.table.modules.edit.editors[e.definition.formatter],(e.definition.formatter==="tick"||e.definition.formatter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(b){return b!==!0&&b!==!1})):l=n.table.modules.edit.editors.input;break}if(l){if(c={getValue:function(){return typeof i<"u"?i:""},getField:function(){return e.definition.field},getElement:function(){return a},getColumn:function(){return e.getComponent()},getTable:()=>this.table,getType:()=>"header",getRow:function(){return{normalizeHeight:function(){}}}},p=e.definition.headerFilterParams||{},p=typeof p=="function"?p.call(n.table,c):p,u=l.call(this.table.modules.edit,c,g,s,m,p),!u){console.warn("Filter Error - Cannot add filter to "+o+" column, editor returned a value of false");return}if(!(u instanceof Node)){console.warn("Filter Error - Cannot add filter to "+o+" column, editor should return an instance of Node, the editor returned:",u);return}n.langBind("headerFilters|columns|"+e.definition.field,function(b){u.setAttribute("placeholder",typeof b<"u"&&b?b:e.definition.headerFilterPlaceholder||n.langText("headerFilters|default"))}),u.addEventListener("click",function(b){b.stopPropagation(),u.focus()}),u.addEventListener("focus",b=>{var v=this.table.columnManager.contentsElement.scrollLeft,y=this.table.rowManager.element.scrollLeft;v!==y&&(this.table.rowManager.scrollHorizontal(v),this.table.columnManager.scrollHorizontal(v))}),h=!1,d=function(b){h&&clearTimeout(h),h=setTimeout(function(){s(u.value)},n.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=u,e.modules.filter.attrType=u.hasAttribute("type")?u.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=u.tagName.toLowerCase(),e.definition.headerFilterLiveFilter!==!1&&(e.definition.headerFilter==="autocomplete"||e.definition.headerFilter==="tickCross"||(e.definition.editor==="autocomplete"||e.definition.editor==="tickCross")&&e.definition.headerFilter===!0||(u.addEventListener("keyup",d),u.addEventListener("search",d),e.modules.filter.attrType=="number"&&u.addEventListener("change",function(b){s(u.value)}),e.modules.filter.attrType=="text"&&this.table.browser!=="ie"&&u.setAttribute("type","search")),(e.modules.filter.tagType=="input"||e.modules.filter.tagType=="select"||e.modules.filter.tagType=="textarea")&&u.addEventListener("mousedown",function(b){b.stopPropagation()})),a.appendChild(u),e.contentElement.appendChild(a),r||n.headerFilterColumns.push(e),f&&f()}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,i){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,i,!0),e.modules.filter.success(i)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&(this.table.options.filterMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0))}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,i,r,n){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:i,value:r,params:n}]),this.addFilter(e)}addFilter(e,i,r,n){var s=!1;Array.isArray(e)||(e=[{field:e,type:i,value:r,params:n}]),e.forEach(o=>{o=this.findFilter(o),o&&(this.filterList.push(o),s=!0)}),s&&this.trackChanges()}findFilter(e){var i;if(Array.isArray(e))return this.findSubFilters(e);var r=!1;return typeof e.field=="function"?r=function(n){return e.field(n,e.type||{})}:zc.filters[e.type]?(i=this.table.columnManager.getColumnByField(e.field),i?r=function(n){return zc.filters[e.type](e.value,i.getFieldValue(n),n,e.params||{})}:r=function(n){return zc.filters[e.type](e.value,n[e.field],n,e.params||{})}):console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=r,e.func?e:!1}findSubFilters(e){var i=[];return e.forEach(r=>{r=this.findFilter(r),r&&i.push(r)}),i.length?i:!1}getFilters(e,i){var r=[];return e&&(r=this.getHeaderFilters()),i&&r.forEach(function(n){typeof n.type=="function"&&(n.type="function")}),r=r.concat(this.filtersToArray(this.filterList,i)),r}filtersToArray(e,i){var r=[];return e.forEach(n=>{var s;Array.isArray(n)?r.push(this.filtersToArray(n,i)):(s={field:n.field,type:n.type,value:n.value},i&&typeof s.type=="function"&&(s.type="function"),r.push(s))}),r}getHeaderFilters(){var e=[];for(var i in this.headerFilters)e.push({field:i,type:this.headerFilters[i].type,value:this.headerFilters[i].value});return e}removeFilter(e,i,r){Array.isArray(e)||(e=[{field:e,type:i,value:r}]),e.forEach(n=>{var s=-1;typeof n.field=="object"?s=this.filterList.findIndex(o=>n===o):s=this.filterList.findIndex(o=>n.field===o.field&&n.type===o.type&&n.value===o.value),s>-1?this.filterList.splice(s,1):console.warn("Filter Error - No matching filter type found, ignoring: ",n.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{typeof e.modules.filter.value<"u"&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,i,r,n){var s=[],o=[];return Array.isArray(i)||(i=[{field:i,type:r,value:n}]),i.forEach(a=>{a=this.findFilter(a),a&&o.push(a)}),this.table.rowManager.rows.forEach(a=>{var l=!0;o.forEach(u=>{this.filterRecurse(u,a.getData())||(l=!1)}),l&&s.push(e==="data"?a.getData("data"):a.getComponent())}),s}filter(e,i){var r=[],n=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters(!0)),this.table.options.filterMode!=="remote"&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(s=>{this.filterRow(s)&&r.push(s)}):r=e.slice(0),this.subscribedExternal("dataFiltered")&&(r.forEach(s=>{n.push(s.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(!0),n)),r}filterRow(e,i){var r=!0,n=e.getData();this.filterList.forEach(o=>{this.filterRecurse(o,n)||(r=!1)});for(var s in this.headerFilters)this.headerFilters[s].func(n)||(r=!1);return r}filterRecurse(e,i){var r=!1;return Array.isArray(e)?e.forEach(n=>{this.filterRecurse(n,i)&&(r=!0)}):r=e.func(i),r}};de(zc,"moduleName","filter"),de(zc,"filters",BRe);var zO=zc;function NRe(t,e,i){return this.emptyToSpace(this.sanitizeHTML(t.getValue()))}function $Re(t,e,i){return t.getValue()}function HRe(t,e,i){return t.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(t.getValue()))}function URe(t,e,i){var r=parseFloat(t.getValue()),n="",s,o,a,l,u,c=e.decimal||".",h=e.thousand||",",d=e.negativeSign||"-",p=e.symbol||"",f=!!e.symbolAfter,m=typeof e.precision<"u"?e.precision:2;if(isNaN(r))return this.emptyToSpace(this.sanitizeHTML(t.getValue()));if(r<0&&(r=Math.abs(r),n=d),s=m!==!1?r.toFixed(m):r,s=String(s).split("."),o=s[0],a=s.length>1?c+s[1]:"",e.thousand!==!1)for(l=/(\d+)(\d{3})/;l.test(o);)o=o.replace(l,"$1"+h+"$2");return u=o+a,n===!0?(u="("+u+")",f?u+p:p+u):f?n+u+p:n+p+u}function WRe(t,e,i){var r=t.getValue(),n=e.urlPrefix||"",s=e.download,o=r,a=document.createElement("a"),l;function u(c,h){var d=c.shift(),p=h[d];return c.length&&typeof p=="object"?u(c,p):p}if(e.labelField&&(l=t.getData(),o=u(e.labelField.split(this.table.options.nestedFieldSeparator),l)),e.label)switch(typeof e.label){case"string":o=e.label;break;case"function":o=e.label(t);break}if(o){if(e.urlField&&(l=t.getData(),r=Qt.retrieveNestedData(this.table.options.nestedFieldSeparator,e.urlField,l)),e.url)switch(typeof e.url){case"string":r=e.url;break;case"function":r=e.url(t);break}return a.setAttribute("href",n+r),e.target&&a.setAttribute("target",e.target),e.download&&(typeof s=="function"?s=s(t):s=s===!0?"":s,a.setAttribute("download",s)),a.innerHTML=this.emptyToSpace(this.sanitizeHTML(o)),a}else return"&nbsp;"}function VRe(t,e,i){var r=document.createElement("img"),n=t.getValue();switch(e.urlPrefix&&(n=e.urlPrefix+t.getValue()),e.urlSuffix&&(n=n+e.urlSuffix),r.setAttribute("src",n),typeof e.height){case"number":r.style.height=e.height+"px";break;case"string":r.style.height=e.height;break}switch(typeof e.width){case"number":r.style.width=e.width+"px";break;case"string":r.style.width=e.width;break}return r.addEventListener("load",function(){t.getRow().normalizeHeight()}),r}function jRe(t,e,i){var r=t.getValue(),n=t.getElement(),s=e.allowEmpty,o=e.allowTruthy,a=Object.keys(e).includes("trueValue"),l=typeof e.tickElement<"u"?e.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',u=typeof e.crossElement<"u"?e.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return a&&r===e.trueValue||!a&&(o&&r||r===!0||r==="true"||r==="True"||r===1||r==="1")?(n.setAttribute("aria-checked",!0),l||""):s&&(r==="null"||r===""||r===null||typeof r>"u")?(n.setAttribute("aria-checked","mixed"),""):(n.setAttribute("aria-checked",!1),u||"")}function qRe(t,e,i){var r=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),n=e.inputFormat||"yyyy-MM-dd HH:mm:ss",s=e.outputFormat||"dd/MM/yyyy HH:mm:ss",o=typeof e.invalidPlaceholder<"u"?e.invalidPlaceholder:"",a=t.getValue();if(typeof r<"u"){var l;return r.isDateTime(a)?l=a:n==="iso"?l=r.fromISO(String(a)):l=r.fromFormat(String(a),n),l.isValid?(e.timezone&&(l=l.setZone(e.timezone)),l.toFormat(s)):o===!0||!a?a:typeof o=="function"?o(a):o}else console.error("Format Error - 'datetime' formatter is dependant on luxon.js")}function GRe(t,e,i){var r=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),n=e.inputFormat||"yyyy-MM-dd HH:mm:ss",s=typeof e.invalidPlaceholder<"u"?e.invalidPlaceholder:"",o=typeof e.suffix<"u"?e.suffix:!1,a=typeof e.unit<"u"?e.unit:"days",l=typeof e.humanize<"u"?e.humanize:!1,u=typeof e.date<"u"?e.date:r.now(),c=t.getValue();if(typeof r<"u"){var h;return r.isDateTime(c)?h=c:n==="iso"?h=r.fromISO(String(c)):h=r.fromFormat(String(c),n),h.isValid?l?h.diff(u,a).toHuman()+(o?" "+o:""):parseInt(h.diff(u,a)[a])+(o?" "+o:""):s===!0?c:typeof s=="function"?s(c):s}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")}function XRe(t,e,i){var r=t.getValue();return typeof e[r]>"u"?(console.warn("Missing display value for "+r),r):e[r]}function YRe(t,e,i){var r=t.getValue(),n=t.getElement(),s=e&&e.stars?e.stars:5,o=document.createElement("span"),a=document.createElementNS("http://www.w3.org/2000/svg","svg"),l='<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',u='<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>';o.style.verticalAlign="middle",a.setAttribute("width","14"),a.setAttribute("height","14"),a.setAttribute("viewBox","0 0 512 512"),a.setAttribute("xml:space","preserve"),a.style.padding="0 1px",r=r&&!isNaN(r)?parseInt(r):0,r=Math.max(0,Math.min(r,s));for(var c=1;c<=s;c++){var h=a.cloneNode(!0);h.innerHTML=c<=r?l:u,o.appendChild(h)}return n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.style.textOverflow="ellipsis",n.setAttribute("aria-label",r),o}function KRe(t,e,i){var r=this.sanitizeHTML(t.getValue())||0,n=document.createElement("span"),s=e&&e.max?e.max:100,o=e&&e.min?e.min:0,a=e&&typeof e.color<"u"?e.color:["red","orange","green"],l="#666666",u,c;if(!(isNaN(r)||typeof t.getValue()>"u")){switch(n.classList.add("tabulator-traffic-light"),c=parseFloat(r)<=s?parseFloat(r):s,c=parseFloat(c)>=o?parseFloat(c):o,u=(s-o)/100,c=Math.round((c-o)/u),typeof a){case"string":l=a;break;case"function":l=a(r);break;case"object":if(Array.isArray(a)){var h=100/a.length,d=Math.floor(c/h);d=Math.min(d,a.length-1),d=Math.max(d,0),l=a[d];break}}return n.style.backgroundColor=l,n}}function JRe(t,e={},i){var r=this.sanitizeHTML(t.getValue())||0,n=t.getElement(),s=e.max?e.max:100,o=e.min?e.min:0,a=e.legendAlign?e.legendAlign:"center",l,u,c,h,d;switch(u=parseFloat(r)<=s?parseFloat(r):s,u=parseFloat(u)>=o?parseFloat(u):o,l=(s-o)/100,u=Math.round((u-o)/l),typeof e.color){case"string":c=e.color;break;case"function":c=e.color(r);break;case"object":if(Array.isArray(e.color)){let g=100/e.color.length,b=Math.floor(u/g);b=Math.min(b,e.color.length-1),b=Math.max(b,0),c=e.color[b];break}default:c="#2DC214"}switch(typeof e.legend){case"string":h=e.legend;break;case"function":h=e.legend(r);break;case"boolean":h=r;break;default:h=!1}switch(typeof e.legendColor){case"string":d=e.legendColor;break;case"function":d=e.legendColor(r);break;case"object":if(Array.isArray(e.legendColor)){let g=100/e.legendColor.length,b=Math.floor(u/g);b=Math.min(b,e.legendColor.length-1),b=Math.max(b,0),d=e.legendColor[b]}break;default:d="#000"}n.style.minWidth="30px",n.style.position="relative",n.setAttribute("aria-label",u);var p=document.createElement("div");p.style.display="inline-block",p.style.width=u+"%",p.style.backgroundColor=c,p.style.height="100%",p.setAttribute("data-max",s),p.setAttribute("data-min",o);var f=document.createElement("div");if(f.style.position="relative",f.style.width="100%",f.style.height="100%",h){var m=document.createElement("div");m.style.position="absolute",m.style.top=0,m.style.left=0,m.style.textAlign=a,m.style.width="100%",m.style.color=d,m.innerHTML=h}return i(function(){if(!(t instanceof $E)){var g=document.createElement("div");g.style.position="absolute",g.style.top="4px",g.style.bottom="4px",g.style.left="4px",g.style.right="4px",n.appendChild(g),n=g}n.appendChild(f),f.appendChild(p),h&&f.appendChild(m)}),""}function ZRe(t,e,i){return t.getElement().style.backgroundColor=this.sanitizeHTML(t.getValue()),""}function QRe(t,e,i){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'}function eDe(t,e,i){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'}function tDe(t,e,i){var r=t.getValue(),n=e.size||15,s=n+"px",o,a,l=e.hasOwnProperty("onValue")?e.onValue:!0,u=e.hasOwnProperty("offValue")?e.offValue:!1,c=e.onTruthy?r:r===l;return o=document.createElement("div"),o.classList.add("tabulator-toggle"),c?(o.classList.add("tabulator-toggle-on"),o.style.flexDirection="row-reverse",e.onColor&&(o.style.background=e.onColor)):e.offColor&&(o.style.background=e.offColor),o.style.width=2.5*n+"px",o.style.borderRadius=s,e.clickable&&o.addEventListener("click",h=>{t.setValue(c?u:l)}),a=document.createElement("div"),a.classList.add("tabulator-toggle-switch"),a.style.height=s,a.style.width=s,a.style.borderRadius=s,o.appendChild(a),o}function iDe(t,e,i){var r=document.createElement("span"),n=t.getRow(),s=t.getTable();return n.watchPosition(o=>{e.relativeToPage&&(o+=s.modules.page.getPageSize()*(s.modules.page.getPage()-1)),r.innerText=o}),r}function rDe(t,e,i){return t.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"}function nDe(t,e,i){var r,n,s;function o(a){var l=a.getValue(),u="plaintext";switch(typeof l){case"boolean":u="tickCross";break;case"string":l.includes(`
`)&&(u="textarea");break}return u}return r=e.formatterLookup?e.formatterLookup(t):o(t),e.paramsLookup&&(s=typeof e.paramsLookup=="function"?e.paramsLookup(r,t):e.paramsLookup[r]),n=this.table.modules.format.lookupFormatter(r),n.call(this,t,s||{},i)}function sDe(t,e,i){var r=e.delimiter||",",n=t.getValue(),s=this.table,o;return e.valueMap&&(typeof e.valueMap=="string"?o=function(a){return a.map(l=>Qt.retrieveNestedData(s.options.nestedFieldSeparator,e.valueMap,l))}:o=e.valueMap),Array.isArray(n)?(o&&(n=o(n)),n.join(r)):n}function oDe(t,e,i){var r=e.indent||"	",n=typeof e.multiline>"u"?!0:e.multiline,s=e.replacer||null,o=t.getValue();return n&&(t.getElement().style.whiteSpace="pre-wrap"),JSON.stringify(o,s,r)}var aDe={plaintext:NRe,html:$Re,textarea:HRe,money:URe,link:WRe,image:VRe,tickCross:jRe,datetime:qRe,datetimediff:GRe,lookup:XRe,star:YRe,traffic:KRe,progress:JRe,color:ZRe,buttonTick:QRe,buttonCross:eDe,toggle:tDe,rownum:iDe,handle:rDe,adaptable:nDe,array:sDe,json:oDe},Ed=class Ed extends bt{constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupTypeFormatter(e,""),typeof e.definition.formatterPrint<"u"&&(e.modules.format.print=this.lookupTypeFormatter(e,"Print")),typeof e.definition.formatterClipboard<"u"&&(e.modules.format.clipboard=this.lookupTypeFormatter(e,"Clipboard")),typeof e.definition.formatterHtmlOutput<"u"&&(e.modules.format.htmlOutput=this.lookupTypeFormatter(e,"HtmlOutput"))}lookupTypeFormatter(e,i){var r={params:e.definition["formatter"+i+"Params"]||{}},n=e.definition["formatter"+i];return r.formatter=this.lookupFormatter(n),r}lookupFormatter(e){var i;switch(typeof e){case"string":Ed.formatters[e]?i=Ed.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),i=Ed.formatters.plaintext);break;case"function":i=e;break;default:i=Ed.formatters.plaintext;break}return i}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,i,r){var n,s,o,a;return e.definition.titleFormatter?(n=this.lookupFormatter(e.definition.titleFormatter),o=l=>{e.titleFormatterRendered=l},a={getValue:function(){return i},getElement:function(){return r},getType:function(){return"header"},getColumn:function(){return e.getComponent()},getTable:()=>this.table},s=e.definition.titleFormatterParams||{},s=typeof s=="function"?s():s,n.call(this,a,s,o)):i}formatValue(e){var i=e.getComponent(),r=typeof e.column.modules.format.params=="function"?e.column.modules.format.params(i):e.column.modules.format.params;function n(s){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=s,e.modules.format.rendered=!1}return e.column.modules.format.formatter.call(this,i,r,n)}formatExportValue(e,i){var r=e.column.modules.format[i],n;if(r){let s=function(o){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=o,e.modules.format.rendered=!1};return n=typeof r.params=="function"?r.params(e.getComponent()):r.params,r.formatter.call(this,e.getComponent(),n,s)}else return this.formatValue(e)}sanitizeHTML(e){if(e){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=/]/g,function(r){return i[r]})}else return e}emptyToSpace(e){return e===null||typeof e>"u"||e===""?"&nbsp;":e}};de(Ed,"moduleName","format"),de(Ed,"formatters",aDe);var IO=Ed,SE=class extends bt{constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.initializationMode="left",this.active=!1,this.blocked=!0,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("column-add",this.reinitializeColumns.bind(this)),this.subscribe("column-deleted",this.reinitializeColumns.bind(this)),this.subscribe("column-hide",this.reinitializeColumns.bind(this)),this.subscribe("column-show",this.reinitializeColumns.bind(this)),this.subscribe("columns-loaded",this.reinitializeColumns.bind(this)),this.subscribe("table-redraw",this.layout.bind(this)),this.subscribe("layout-refreshing",this.blockLayout.bind(this)),this.subscribe("layout-refreshed",this.unblockLayout.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this))}blockLayout(){this.blocked=!0}unblockLayout(){this.blocked=!1}layoutCell(e){this.layoutElement(e.element,e.column)}reinitializeColumns(){this.reset(),this.table.columnManager.columnsByIndex.forEach(e=>{this.initializeColumn(e)}),this.layout()}initializeColumn(e){var i={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(i.position=this.initializationMode,this.initializationMode=="left"?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=i):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(i=>{i.calcs.top&&this.layoutRow(i.calcs.top),i.calcs.bottom&&this.layoutRow(i.calcs.bottom),i.groupList&&i.groupList.length&&this.layoutGroupCalcs(i.groupList)})}layoutColumnPosition(e){var i=[],r=0,n=0;this.leftColumns.forEach((s,o)=>{if(s.modules.frozen.marginValue=r,s.modules.frozen.margin=s.modules.frozen.marginValue+"px",s.visible&&(r+=s.getWidth()),o==this.leftColumns.length-1?s.modules.frozen.edge=!0:s.modules.frozen.edge=!1,s.parent.isGroup){var a=this.getColGroupParentElement(s);i.includes(a)||(this.layoutElement(a,s),i.push(a)),a.classList.toggle("tabulator-frozen-left",s.modules.frozen.edge&&s.modules.frozen.position==="left"),a.classList.toggle("tabulator-frozen-right",s.modules.frozen.edge&&s.modules.frozen.position==="right")}else this.layoutElement(s.getElement(),s);e&&s.cells.forEach(l=>{this.layoutElement(l.getElement(!0),s)})}),this.rightColumns.forEach((s,o)=>{s.modules.frozen.marginValue=n,s.modules.frozen.margin=s.modules.frozen.marginValue+"px",s.visible&&(n+=s.getWidth()),o==this.rightColumns.length-1?s.modules.frozen.edge=!0:s.modules.frozen.edge=!1,s.parent.isGroup?this.layoutElement(this.getColGroupParentElement(s),s):this.layoutElement(s.getElement(),s),e&&s.cells.forEach(a=>{this.layoutElement(a.getElement(!0),s)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&!this.blocked&&(this.layoutColumnPosition(),this.reinitializeRows(),this.layoutCalcRows())}reinitializeRows(){var e=this.table.rowManager.getVisibleRows(!0),i=this.table.rowManager.getRows().filter(r=>!e.includes(r));i.forEach(r=>{r.deinitialize()}),e.forEach(r=>{r.type==="row"&&this.layoutRow(r)})}layoutRow(e){this.table.options.layout==="fitDataFill"&&this.rightColumns.length&&(this.table.rowManager.getTableElement().style.minWidth="calc(100% - "+this.rightMargin+")"),this.leftColumns.forEach(i=>{var r=e.getCell(i);r&&this.layoutElement(r.getElement(!0),i)}),this.rightColumns.forEach(i=>{var r=e.getCell(i);r&&this.layoutElement(r.getElement(!0),i)})}layoutElement(e,i){var r;i.modules.frozen&&e&&(e.style.position="sticky",this.table.rtl?r=i.modules.frozen.position==="left"?"right":"left":r=i.modules.frozen.position,e.style[r]=i.modules.frozen.margin,e.classList.add("tabulator-frozen"),e.classList.toggle("tabulator-frozen-left",i.modules.frozen.edge&&i.modules.frozen.position==="left"),e.classList.toggle("tabulator-frozen-right",i.modules.frozen.edge&&i.modules.frozen.position==="right"))}adjustForScrollbar(e){this.rightColumns.length&&(this.table.columnManager.getContentsElement().style.width="calc(100% - "+e+"px)")}getFrozenColumns(){return this.leftColumns.concat(this.rightColumns)}_calcSpace(e,i){var r=0;for(let n=0;n<i;n++)e[n].visible&&(r+=e[n].getWidth());return r}};de(SE,"moduleName","frozenColumns");var EE=class extends bt{constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this)),this.registerTableOption("frozenRowsField","id"),this.registerTableOption("frozenRows",!1)}initialize(){var e=document.createDocumentFragment();this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10),this.table.options.frozenRows&&(this.subscribe("data-processed",this.initializeRows.bind(this)),this.subscribe("row-added",this.initializeRow.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this))),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}initializeRows(){this.table.rowManager.getRows().forEach(e=>{this.initializeRow(e)})}initializeRow(e){var i=this.table.options.frozenRows,r=typeof i;r==="number"?e.getPosition()&&e.getPosition()+this.rows.length<=i&&this.freezeRow(e):r==="function"?i.call(this.table,e.getComponent())&&this.freezeRow(e):Array.isArray(i)&&i.includes(e.data[this.options("frozenRowsField")])&&this.freezeRow(e)}isRowFrozen(e){var i=this.rows.indexOf(e);return i>-1}isFrozen(){return!!this.rows.length}visibleRows(e,i){return this.rows.forEach(r=>{i.push(r)}),i}getRows(e){var i=e.slice(0);return this.rows.forEach(function(r){var n=i.indexOf(r);n>-1&&i.splice(n,1)}),i}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.rows.push(e),this.refreshData(!1,"display"),this.table.rowManager.adjustTableSize(),this.styleRows())}unfreezeRow(e){e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var i=this.rows.indexOf(e);if(i>-1){var r=e.getElement();r.parentNode&&r.parentNode.removeChild(r),this.rows.splice(i,1)}}styleRows(e){this.rows.forEach((i,r)=>{this.table.rowManager.styleRow(i,r)})}};de(EE,"moduleName","frozenRows");var BO=class{constructor(e){return this._group=e,this.type="GroupComponent",new Proxy(this,{get:function(i,r,n){return typeof i[r]<"u"?i[r]:i._group.groupManager.table.componentFunctionBinder.handle("group",i._group,r)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return this._group.parent?this._group.parent.getComponent():!1}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}scrollTo(e,i){return this._group.groupManager.table.rowManager.scrollToRow(this._group,e,i)}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}},n1=class t{constructor(e,i,r,n,s,o,a){this.groupManager=e,this.parent=i,this.key=n,this.level=r,this.field=s,this.hasSubGroups=r<e.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=a,this.rows=[],this.groups=[],this.groupList=[],this.generator=o,this.element=!1,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=a?a.visible:typeof e.startOpen[r]<"u"?e.startOpen[r]:e.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(e){e||(this.groupList.length?this.groupList.forEach(function(i){i.wipe()}):this.rows.forEach(i=>{i.modules&&delete i.modules.group})),this.element=!1,this.arrowElement=!1,this.elementContents=!1}createElements(){var e=document.createElement("div");e.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(e),this.groupManager.table.options.movableRows!==!1&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var e=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]&&this.groupManager.allowedValues[e].forEach(i=>{this._createGroup(i,e)})}addBindings(){var e;this.groupManager.table.options.groupToggleElement&&(e=this.groupManager.table.options.groupToggleElement=="arrow"?this.arrowElement:this.element,e.addEventListener("click",i=>{this.groupManager.table.options.groupToggleElement==="arrow"&&(i.stopPropagation(),i.stopImmediatePropagation()),setTimeout(()=>{this.toggleVisibility()})}))}_createGroup(e,i){var r=i+"_"+e,n=new t(this.groupManager,this,i,e,this.groupManager.groupIDLookups[i].field,this.groupManager.headerGenerator[i]||this.groupManager.headerGenerator[0],this.old?this.old.groups[r]:!1);this.groups[r]=n,this.groupList.push(n)}_addRowToGroup(e){var i=this.level+1;if(this.hasSubGroups){var r=this.groupManager.groupIDLookups[i].func(e.getData()),n=i+"_"+r;this.groupManager.allowedValues&&this.groupManager.allowedValues[i]?this.groups[n]&&this.groups[n].addRow(e):(this.groups[n]||this._createGroup(r,i),this.groups[n].addRow(e))}}_addRow(e){this.rows.push(e),e.modules.group=this}insertRow(e,i,r){var n=this.conformRowData({});e.updateData(n);var s=this.rows.indexOf(i);s>-1?r?this.rows.splice(s+1,0,e):this.rows.splice(s,0,e):r?this.rows.push(e):this.rows.unshift(e),e.modules.group=this,this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(e){this.arrowElement&&(this.arrowElement.style.marginLeft=e,this.groupList.forEach(function(i){i.scrollHeader(e)}))}getRowIndex(e){}conformRowData(e){return this.field?e[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(e=this.parent.conformRowData(e)),e}removeRow(e){var i=this.rows.indexOf(e),r=e.getElement();i>-1&&this.rows.splice(i,1),!this.groupManager.table.options.groupValues&&!this.rows.length?(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0)):(r.parentNode&&r.parentNode.removeChild(r),this.groupManager.blockRedraw||(this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)))}removeGroup(e){var i=e.level+"_"+e.key,r;this.groups[i]&&(delete this.groups[i],r=this.groupList.indexOf(e),r>-1&&this.groupList.splice(r,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(){var e=[];return e.push(this),this._visSet(),this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.visible?this.groupList.length?this.groupList.forEach(function(i){e=e.concat(i.getHeadersAndRows())}):(this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&(this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))),e}getData(e,i){var r=[];return this._visSet(),(!e||e&&this.visible)&&this.rows.forEach(n=>{r.push(n.getData(i||"data"))}),r}getRowCount(){var e=0;return this.groupList.length?this.groupList.forEach(i=>{e+=i.getRowCount()}):e=this.rows.length,e}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination?(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(e=>{var i=e.getHeadersAndRows();i.forEach(r=>{r.detachElement()})}):this.rows.forEach(e=>{var i=e.getElement();i.parentNode.removeChild(i)}),this.groupManager.updateGroupRows(!0)):this.groupManager.updateGroupRows(!0),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var e=this.generateElement();this.groupList.length?this.groupList.forEach(i=>{var r=i.getHeadersAndRows();r.forEach(n=>{var s=n.getElement();e.parentNode.insertBefore(s,e.nextSibling),n.initialize(),e=s})}):this.rows.forEach(i=>{var r=i.getElement();e.parentNode.insertBefore(r,e.nextSibling),i.initialize(),e=r}),this.groupManager.updateGroupRows(!0)}else this.groupManager.updateGroupRows(!0);this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var e=[];typeof this.visible=="function"&&(this.rows.forEach(function(i){e.push(i.getData())}),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))}getRowGroup(e){var i=!1;return this.groupList.length?this.groupList.forEach(function(r){var n=r.getRowGroup(e);n&&(i=n)}):this.rows.find(function(r){return r===e})&&(i=this),i}getSubGroups(e){var i=[];return this.groupList.forEach(function(r){i.push(e?r.getComponent():r)}),i}getRows(e,i){var r=[];return i&&this.groupList.length?this.groupList.forEach(n=>{r=r.concat(n.getRows(e,i))}):this.rows.forEach(function(n){r.push(e?n.getComponent():n)}),r}generateGroupHeaderContents(){var e=[],i=this.getRows(!1,!0);for(i.forEach(function(r){e.push(r.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);typeof this.elementContents=="string"?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(e=[]){return e.unshift(this.key),this.parent&&this.parent.getPath(e),e}getElement(){return this.elementContents?this.element:this.generateElement()}generateElement(){this.addBindings=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var e=0;e<this.element.childNodes.length;++e)this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(e){(!this.initialized||e)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Qt.elVisible(this.element)&&this.initialize(!0)}setHeight(e){this.height!=e&&(this.height=e,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}rendered(){}getComponent(){return this.component||(this.component=new BO(this)),this.component}},kE=class extends bt{constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayHandler=this.getRows.bind(this),this.blockRedraw=!1,this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.subscribe("table-destroy",this._blockRedrawing.bind(this)),this.subscribe("rows-wipe",this._blockRedrawing.bind(this)),this.subscribe("rows-wiped",this._restore_redrawing.bind(this)),this.table.options.groupBy&&(this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("table-built",this.configureGroupSetup.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}_blockRedrawing(){this.blockRedraw=!0}_restore_redrawing(){this.blockRedraw=!1}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,i=this.table.options.groupStartOpen,r=this.table.options.groupHeader;if(this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(r)&&e.length>r.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(s,o)=>{this.headerGenerator[0]=(a,l,u)=>(typeof a>"u"?"":a)+"<span>("+l+" "+(l===1?s:o.groups.items)+")</span>"}),this.groupIDLookups=[],e)this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"){var n=this.table.columnManager.getRealColumns();n.forEach(s=>{s.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),s.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()})}Array.isArray(e)||(e=[e]),e.forEach((s,o)=>{var a,l;typeof s=="function"?a=s:(l=this.table.columnManager.getColumnByField(s),l?a=function(u){return l.getFieldValue(u)}:a=function(u){return u[s]}),this.groupIDLookups.push({field:typeof s=="function"?!1:s,func:a,values:this.allowedValues?this.allowedValues[o]:!1})}),i&&(Array.isArray(i)||(i=[i]),i.forEach(s=>{}),this.startOpen=i),r&&(this.headerGenerator=Array.isArray(r)?r:[r])}else this.groupList=[],this.groups={}}rowSample(e,i){if(this.table.options.groupBy){var r=this.getGroups(!1)[0];i.push(r.getRows(!1)[0])}return i}virtualRenderFill(){var e=this.table.rowManager.tableElement,i=this.table.rowManager.getVisibleRows();if(this.table.options.groupBy)i=i.filter(r=>r.type!=="group"),e.style.minWidth=i.length?"":this.table.columnManager.getWidth()+"px";else return i}rowAddingIndex(e,i,r){if(this.table.options.groupBy){this.assignRowToGroup(e);var n=e.modules.group.rows;return n.length>1&&(!i||i&&n.indexOf(i)==-1?r?n[0]!==e&&(i=n[0],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,i,!r)):n[n.length-1]!==e&&(i=n[n.length-1],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,i,!r)):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,i,!r)),i}}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.initialized||this.initialize(),this.configureGroupSetup(),!e&&this.table.modExists("columnCalcs")&&this.table.options.columnCalcs===!0&&this.table.modules.columnCalcs.reinitializeCalcs(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return e.modules.group?e.modules.group.getComponent():!1}rowMoving(e,i,r){if(this.table.options.groupBy){!r&&i instanceof n1&&(i=this.table.rowManager.prevDisplayRow(e)||i);var n=i instanceof n1?i:i.modules.group,s=e instanceof n1?e:e.modules.group;n===s?this.table.rowManager.moveRowInArray(n.rows,e,i,r):(s&&s.removeRow(e),n.insertRow(e,i,r))}}rowDeleting(e){this.table.options.groupBy&&e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.table.options.groupBy&&this.updateGroupRows(!0)}cellUpdated(e){this.table.options.groupBy&&this.reassignRowToGroup(e.row)}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var i=[];return this.groupList.forEach(function(r){i.push(e?r.getComponent():r)}),i}getChildGroups(e){var i=[];return e||(e=this),e.groupList.forEach(r=>{r.groupList.length?i=i.concat(this.getChildGroups(r)):i.push(r)}),i}wipe(){this.table.options.groupBy&&(this.groupList.forEach(function(e){e.wipe()}),this.groupList=[],this.groups={})}pullGroupListData(e){var i=[];return e.forEach(r=>{var n={};n.level=0,n.rowCount=0,n.headerContent="";var s=[];r.hasSubGroups?(s=this.pullGroupListData(r.groupList),n.level=r.level,n.rowCount=s.length-r.groupList.length,n.headerContent=r.generator(r.key,n.rowCount,r.rows,r),i.push(n),i=i.concat(s)):(n.level=r.level,n.headerContent=r.generator(r.key,r.rows.length,r.rows,r),n.rowCount=r.getRows().length,i.push(n),r.getRows().forEach(o=>{i.push(o.getData("data"))}))}),i}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var i=!1;return this.options("dataTree")&&(e=this.table.modules.dataTree.getTreeParentRoot(e)),this.groupList.forEach(r=>{var n=r.getRowGroup(e);n&&(i=n)}),i}countGroups(){return this.groupList.length}generateGroups(e){var i=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(r=>{this.createGroup(r,0,i)}),e.forEach(r=>{this.assignRowToExistingGroup(r,i)})):e.forEach(r=>{this.assignRowToGroup(r,i)}),Object.values(i).forEach(r=>{r.wipe(!0)})}createGroup(e,i,r){var n=i+"_"+e,s;r=r||[],s=new n1(this,!1,i,e,this.groupIDLookups[0].field,this.headerGenerator[0],r[n]),this.groups[n]=s,this.groupList.push(s)}assignRowToExistingGroup(e,i){var r=this.groupIDLookups[0].func(e.getData()),n="0_"+r;this.groups[n]&&this.groups[n].addRow(e)}assignRowToGroup(e,i){var r=this.groupIDLookups[0].func(e.getData()),n=!this.groups["0_"+r];return n&&this.createGroup(r,0,i),this.groups["0_"+r].addRow(e),!n}reassignRowToGroup(e){if(e.type==="row"){var i=e.modules.group,r=i.getPath(),n=this.getExpectedPath(e),s;s=r.length==n.length&&r.every((o,a)=>o===n[a]),s||(i.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var i=[],r=e.getData();return this.groupIDLookups.forEach(n=>{i.push(n.func(r))}),i}updateGroupRows(e){var i=[];return this.blockRedraw||(this.groupList.forEach(r=>{i=i.concat(r.getHeadersAndRows())}),e&&this.refreshData(!0)),i}scrollHeaders(e){this.table.options.groupBy&&(this.table.options.renderHorizontal==="virtual"&&(e-=this.table.columnManager.renderer.vDomPadLeft),e=e+"px",this.groupList.forEach(i=>{i.scrollHeader(e)}))}removeGroup(e){var i=e.level+"_"+e.key,r;this.groups[i]&&(delete this.groups[i],r=this.groupList.indexOf(e),r>-1&&this.groupList.splice(r,1))}checkBasicModeGroupHeaderWidth(){var e=this.table.rowManager.tableElement,i=!0;this.table.rowManager.getDisplayRows().forEach((r,n)=>{this.table.rowManager.styleRow(r,n),e.appendChild(r.getElement()),r.initialize(!0),r.type!=="group"&&(i=!1)}),i?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}};de(kE,"moduleName","groupRows");var lDe={cellEdit:function(t){t.component.setValueProcessData(t.data.oldValue),t.component.cellRendered()},rowAdd:function(t){t.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowDelete:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(t.component,e),this.table.rowManager.checkPlaceholder()},rowMove:function(t){var e=t.data.posFrom-t.data.posTo>0;this.table.rowManager.moveRowActual(t.component,this.table.rowManager.getRowFromPosition(t.data.posFrom),e),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},uDe={cellEdit:function(t){t.component.setValueProcessData(t.data.newValue),t.component.cellRendered()},rowAdd:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(t.component,e),this.table.rowManager.checkPlaceholder()},rowDelete:function(t){t.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.getRowFromPosition(t.data.posTo),t.data.after),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},cDe={undo:["ctrl + 90","meta + 90"],redo:["ctrl + 89","meta + 89"]},hDe={undo:function(t){var e=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell,e||(t.preventDefault(),this.table.modules.history.undo()))},redo:function(t){var e=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell,e||(t.preventDefault(),this.table.modules.history.redo()))}},dDe={keybindings:{bindings:cDe,actions:hDe}},kd=class kd extends bt{constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,i,r){this.action("rowMove",e,{posFrom:e.getPosition(),posTo:i.getPosition(),to:i,after:r})}rowAdded(e,i,r,n){this.action("rowAdd",e,{data:i,pos:r,index:n})}rowDeleted(e){var i,r;this.table.options.groupBy?(r=e.getComponent().getGroup()._getSelf().rows,i=r.indexOf(e),i&&(i=r[i-1])):(i=e.table.rowManager.getRowIndex(e),i&&(i=e.table.rowManager.rows[i-1])),this.action("rowDelete",e,{data:e.getData(),pos:!i,index:i})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,i,r){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:i,data:r}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var i=this.history.findIndex(function(r){return r.component===e});i>-1&&(this.history.splice(i,1),i<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return kd.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Undo Error - No more history to undo":"History module not enabled"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return kd.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Redo Error - No more history to redo":"History module not enabled"),!1}_rebindRow(e,i){this.history.forEach(function(r){if(r.component instanceof Kr)r.component===e&&(r.component=i);else if(r.component instanceof $p&&r.component.row===e){var n=r.component.column.getField();n&&(r.component=i.getCell(n))}})}};de(kd,"moduleName","history"),de(kd,"moduleExtensions",dDe),de(kd,"undoers",lDe),de(kd,"redoers",uDe);var NO=kd,AE=class extends bt{constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&this.table.originalElement.tagName==="TABLE"&&(this.table.originalElement.childNodes.length?this.parseTable():console.warn("Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element."))}parseTable(){var e=this.table.originalElement,i=this.table.options,r=e.getElementsByTagName("th"),n=e.getElementsByTagName("tbody")[0],s=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),n=n?n.getElementsByTagName("tr"):[],this._extractOptions(e,i),r.length?this._extractHeaders(r,n):this._generateBlankHeaders(r,n);for(var o=0;o<n.length;o++){var a=n[o],l=a.getElementsByTagName("td"),u={};this.hasIndex||(u[i.index]=o);for(var c=0;c<l.length;c++){var h=l[c];typeof this.fieldIndex[c]<"u"&&(u[this.fieldIndex[c]]=h.innerHTML)}s.push(u)}i.data=s,this.dispatchExternal("htmlImported")}_extractOptions(e,i,r){var n=e.attributes,s=Object.keys(r||i),o={};s.forEach(c=>{o[c.toLowerCase()]=c});for(var a in n){var l=n[a],u;l&&typeof l=="object"&&l.name&&l.name.indexOf("tabulator-")===0&&(u=l.name.replace("tabulator-",""),typeof o[u]<"u"&&(i[o[u]]=this._attribValue(l.value)))}}_attribValue(e){return e==="true"?!0:e==="false"?!1:e}_findCol(e){var i=this.table.options.columns.find(r=>r.title===e);return i||!1}_extractHeaders(e,i){for(var r=0;r<e.length;r++){var n=e[r],s=!1,o=this._findCol(n.textContent),a;o?s=!0:o={title:n.textContent.trim()},o.field||(o.field=n.textContent.trim().toLowerCase().replaceAll(" ","_")),a=n.getAttribute("width"),a&&!o.width&&(o.width=a),this._extractOptions(n,o,this.table.columnManager.optionsList.registeredDefaults),this.fieldIndex[r]=o.field,o.field==this.table.options.index&&(this.hasIndex=!0),s||this.table.options.columns.push(o)}}_generateBlankHeaders(e,i){for(var r=0;r<e.length;r++){var n=e[r],s={title:"",field:"col"+r};this.fieldIndex[r]=s.field;var o=n.getAttribute("width");o&&(s.width=o),this.table.options.columns.push(s)}}};de(AE,"moduleName","htmlTableImport");function fDe(t){var e=[],i=0,r=0,n=!1;for(let s=0;s<t.length;s++){let o=t[s],a=t[s+1];if(e[i]||(e[i]=[]),e[i][r]||(e[i][r]=""),o=='"'&&n&&a=='"'){e[i][r]+=o,s++;continue}if(o=='"'){n=!n;continue}if(o==","&&!n){r++;continue}if(o=="\r"&&a==`
`&&!n){r=0,i++,s++;continue}if((o=="\r"||o==`
`)&&!n){r=0,i++;continue}e[i][r]+=o}return e}function pDe(t){try{return JSON.parse(t)}catch(e){return console.warn("JSON Import Error - File contents is invalid JSON",e),Promise.reject()}}function mDe(t){return t}function gDe(t){var e=this.dependencyRegistry.lookup("XLSX"),i=e.read(t),r=i.Sheets[i.SheetNames[0]];return e.utils.sheet_to_json(r,{header:1})}var bDe={csv:fDe,json:pDe,array:mDe,xlsx:gDe},cw=class cw extends bt{constructor(e){super(e),this.registerTableOption("importFormat"),this.registerTableOption("importReader","text"),this.registerTableOption("importHeaderTransform"),this.registerTableOption("importValueTransform"),this.registerTableOption("importDataValidator"),this.registerTableOption("importFileValidator")}initialize(){this.registerTableFunction("import",this.importFromFile.bind(this)),this.table.options.importFormat&&(this.subscribe("data-loading",this.loadDataCheck.bind(this),10),this.subscribe("data-load",this.loadData.bind(this),10))}loadDataCheck(e){return this.table.options.importFormat&&(typeof e=="string"||Array.isArray(e)&&e.length&&Array.isArray(e))}loadData(e,i,r,n,s){return this.importData(this.lookupImporter(),e).then(this.structureData.bind(this)).catch(o=>(console.error("Import Error:",o||"Unable to import data"),Promise.reject(o)))}lookupImporter(e){var i;return e||(e=this.table.options.importFormat),typeof e=="string"?i=cw.importers[e]:i=e,i||console.error("Import Error - Importer not found:",e),i}importFromFile(e,i,r){var n=this.lookupImporter(e);if(n)return this.pickFile(i,r).then(this.importData.bind(this,n)).then(this.structureData.bind(this)).then(this.mutateData.bind(this)).then(this.validateData.bind(this)).then(this.setData.bind(this)).catch(s=>(this.dispatch("import-error",s),this.dispatchExternal("importError",s),console.error("Import Error:",s||"Unable to import file"),this.table.dataLoader.alertError(),setTimeout(()=>{this.table.dataLoader.clearAlert()},3e3),Promise.reject(s)))}pickFile(e,i){return new Promise((r,n)=>{var s=document.createElement("input");s.type="file",s.accept=e,s.addEventListener("change",o=>{var a=s.files[0],l=new FileReader,u=this.validateFile(a);if(u===!0){switch(this.dispatch("import-importing",s.files),this.dispatchExternal("importImporting",s.files),i||this.table.options.importReader){case"buffer":l.readAsArrayBuffer(a);break;case"binary":l.readAsBinaryString(a);break;case"url":l.readAsDataURL(a);break;case"text":default:l.readAsText(a)}l.onload=c=>{r(l.result)},l.onerror=c=>{console.warn("File Load Error - Unable to read file"),n(c)}}else n(u)}),this.dispatch("import-choose"),this.dispatchExternal("importChoose"),s.click()})}importData(e,i){var r;return this.table.dataLoader.alertLoader(),new Promise((n,s)=>{setTimeout(()=>{r=e.call(this.table,i),r instanceof Promise||r?n(r):s()},10)})}structureData(e){var i=[];return Array.isArray(e)&&e.length&&Array.isArray(e[0])?(this.table.options.autoColumns?i=this.structureArrayToObject(e):i=this.structureArrayToColumns(e),i):e}mutateData(e){var i=[];return Array.isArray(e)?e.forEach(r=>{i.push(this.table.modules.mutator.transformRow(r,"import"))}):i=e,i}transformHeader(e){var i=[];if(this.table.options.importHeaderTransform)e.forEach(r=>{i.push(this.table.options.importHeaderTransform.call(this.table,r,e))});else return e;return i}transformData(e){var i=[];if(this.table.options.importValueTransform)e.forEach(r=>{i.push(this.table.options.importValueTransform.call(this.table,r,e))});else return e;return i}structureArrayToObject(e){var i=this.transformHeader(e.shift()),r=e.map(n=>{var s={};return n=this.transformData(n),i.forEach((o,a)=>{s[o]=n[a]}),s});return r}structureArrayToColumns(e){var i=[],r=this.transformHeader(e[0]),n=this.table.getColumns();return n[0]&&r[0]&&n[0].getDefinition().title===r[0]&&e.shift(),e.forEach(s=>{var o={};s=this.transformData(s),s.forEach((a,l)=>{var u=n[l];u&&(o[u.getField()]=a)}),i.push(o)}),i}validateFile(e){return this.table.options.importFileValidator?this.table.options.importFileValidator.call(this.table,e):!0}validateData(e){var i;return this.table.options.importDataValidator?(i=this.table.options.importDataValidator.call(this.table,e),i===!0?e:Promise.reject(i)):e}setData(e){return this.dispatch("import-imported",e),this.dispatchExternal("importImported",e),this.table.dataLoader.clearAlert(),this.table.setData(e)}};de(cw,"moduleName","import"),de(cw,"importers",bDe);var $O=cw,TE=class extends bt{constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowMouseDown:"row-mousedown",rowMouseUp:"row-mouseup",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellMouseDown:"cell-mousedown",cellMouseUp:"cell-mouseup",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerMouseDown:"column-mousedown",headerMouseUp:"column-mouseup",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupMouseDown:"group-mousedown",groupMouseUp:"group-mouseup",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null},group:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerMouseDown"),this.registerColumnOption("headerMouseUp"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellMouseDown"),this.registerColumnOption("cellMouseUp"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this)),this.subscribe("scroll-horizontal",this.clearTouchWatchers.bind(this)),this.subscribe("scroll-vertical",this.clearTouchWatchers.bind(this))}clearTouchWatchers(){var e=Object.values(this.touchWatchers);e.forEach(i=>{for(let r in i)i[r]=null})}cellContentsSelectionFixer(e,i){var r;if(!(this.table.modExists("edit")&&this.table.modules.edit.currentCell===i)){e.preventDefault();try{document.selection?(r=document.body.createTextRange(),r.moveToElementText(i.getElement()),r.select()):window.getSelection&&(r=document.createRange(),r.selectNode(i.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(r))}catch{}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,i){i?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var i=this.eventMap[e];this.touchSubscribers[i+"-touchstart"]||(this.touchSubscribers[i+"-touchstart"]=this.handleTouch.bind(this,i,"start"),this.touchSubscribers[i+"-touchend"]=this.handleTouch.bind(this,i,"end"),this.subscribe(i+"-touchstart",this.touchSubscribers[i+"-touchstart"]),this.subscribe(i+"-touchend",this.touchSubscribers[i+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var i=!0,r=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let n in this.eventMap)this.eventMap[n]===r&&this.subscribers[n]&&(i=!1);i&&(this.unsubscribe(r+"-touchstart",this.touchSubscribers[r+"-touchstart"]),this.unsubscribe(r+"-touchend",this.touchSubscribers[r+"-touchend"]),delete this.touchSubscribers[r+"-touchstart"],delete this.touchSubscribers[r+"-touchend"])}}initializeColumn(e){var i=e.definition;for(let r in this.eventMap)i[r]&&(this.subscriptionChanged(r,!0),this.columnSubscribers[r]||(this.columnSubscribers[r]=[]),this.columnSubscribers[r].push(e))}handle(e,i,r){this.dispatchEvent(e,i,r)}handleTouch(e,i,r,n){var s=this.touchWatchers[e];switch(e==="column"&&(e="header"),i){case"start":s.tap=!0,clearTimeout(s.tapHold),s.tapHold=setTimeout(()=>{clearTimeout(s.tapHold),s.tapHold=null,s.tap=null,clearTimeout(s.tapDbl),s.tapDbl=null,this.dispatchEvent(e+"TapHold",r,n)},1e3);break;case"end":s.tap&&(s.tap=null,this.dispatchEvent(e+"Tap",r,n)),s.tapDbl?(clearTimeout(s.tapDbl),s.tapDbl=null,this.dispatchEvent(e+"DblTap",r,n)):s.tapDbl=setTimeout(()=>{clearTimeout(s.tapDbl),s.tapDbl=null},300),clearTimeout(s.tapHold),s.tapHold=null;break}}dispatchEvent(e,i,r){var n=r.getComponent(),s;this.columnSubscribers[e]&&(r instanceof $p?s=r.column.definition[e]:r instanceof Np&&(s=r.definition[e]),s&&s(i,n)),this.dispatchExternal(e,i,n)}};de(TE,"moduleName","interaction");var vDe={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,navLeft:37,navRight:39,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35},yDe={keyBlock:function(t){t.stopPropagation(),t.preventDefault()},scrollPageUp:function(t){var e=this.table.rowManager,i=e.scrollTop-e.element.clientHeight;t.preventDefault(),e.displayRowsCount&&(i>=0?e.element.scrollTop=i:e.scrollToRow(e.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(t){var e=this.table.rowManager,i=e.scrollTop+e.element.clientHeight,r=e.element.scrollHeight;t.preventDefault(),e.displayRowsCount&&(i<=r?e.element.scrollTop=i:e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1]),this.table.element.focus()},navPrev:function(t){this.dispatch("keybinding-nav-prev",t)},navNext:function(t){this.dispatch("keybinding-nav-next",t)},navLeft:function(t){this.dispatch("keybinding-nav-left",t)},navRight:function(t){this.dispatch("keybinding-nav-right",t)},navUp:function(t){this.dispatch("keybinding-nav-up",t)},navDown:function(t){this.dispatch("keybinding-nav-down",t)}},Ad=class Ad extends bt{constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",{}),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,i={};this.watchKeys={},this.pressedKeys=[],e!==!1&&(Object.assign(i,Ad.bindings),Object.assign(i,e),this.mapBindings(i),this.bindEvents()),this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let i in e)Ad.actions[i]?e[i]&&(typeof e[i]!="object"&&(e[i]=[e[i]]),e[i].forEach(r=>{var n=Array.isArray(r)?r:[r];n.forEach(s=>{this.mapBinding(i,s)})})):console.warn("Key Binding Error - no such action:",i)}mapBinding(e,i){var r={action:Ad.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1},n=i.toString().toLowerCase().split(" ").join("").split("+");n.forEach(s=>{switch(s){case"ctrl":r.ctrl=!0;break;case"shift":r.shift=!0;break;case"meta":r.meta=!0;break;default:s=isNaN(s)?s.toUpperCase().charCodeAt(0):parseInt(s),r.keys.push(s),this.watchKeys[s]||(this.watchKeys[s]=[]),this.watchKeys[s].push(r)}})}bindEvents(){var e=this;this.keyupBinding=function(i){var r=i.keyCode,n=e.watchKeys[r];n&&(e.pressedKeys.push(r),n.forEach(function(s){e.checkBinding(i,s)}))},this.keydownBinding=function(i){var r=i.keyCode,n=e.watchKeys[r];if(n){var s=e.pressedKeys.indexOf(r);s>-1&&e.pressedKeys.splice(s,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,i){var r=!0;return e.ctrlKey==i.ctrl&&e.shiftKey==i.shift&&e.metaKey==i.meta?(i.keys.forEach(n=>{var s=this.pressedKeys.indexOf(n);s==-1&&(r=!1)}),r&&i.action.call(this,e),!0):!1}};de(Ad,"moduleName","keybindings"),de(Ad,"bindings",vDe),de(Ad,"actions",yDe);var HO=Ad,RE=class extends bt{constructor(e){super(e),this.menuContainer=null,this.nestedMenuBlock=!1,this.currentComponent=null,this.rootPopup=null,this.columnSubscribers={},this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("rowDblClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerTableOption("groupDblClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerClickMenu"),this.registerColumnOption("headerDblClickMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("headerMenuIcon"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu"),this.registerColumnOption("dblClickMenu")}initialize(){this.deprecatedOptionsCheck(),this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeRowWatchers(){this.table.options.rowContextMenu&&(this.subscribe("row-contextmenu",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu)),this.table.on("rowTapHold",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu))),this.table.options.rowClickMenu&&this.subscribe("row-click",this.loadMenuEvent.bind(this,this.table.options.rowClickMenu)),this.table.options.rowDblClickMenu&&this.subscribe("row-dblclick",this.loadMenuEvent.bind(this,this.table.options.rowDblClickMenu))}initializeGroupWatchers(){this.table.options.groupContextMenu&&(this.subscribe("group-contextmenu",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu)),this.table.on("groupTapHold",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu))),this.table.options.groupClickMenu&&this.subscribe("group-click",this.loadMenuEvent.bind(this,this.table.options.groupClickMenu)),this.table.options.groupDblClickMenu&&this.subscribe("group-dblclick",this.loadMenuEvent.bind(this,this.table.options.groupDblClickMenu))}initializeColumn(e){var i=e.definition;i.headerContextMenu&&!this.columnSubscribers.headerContextMenu&&(this.columnSubscribers.headerContextMenu=this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextMenu),this.table.on("headerTapHold",this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"))),i.headerClickMenu&&!this.columnSubscribers.headerClickMenu&&(this.columnSubscribers.headerClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerClickMenu"),this.subscribe("column-click",this.columnSubscribers.headerClickMenu)),i.headerDblClickMenu&&!this.columnSubscribers.headerDblClickMenu&&(this.columnSubscribers.headerDblClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerDblClickMenu"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickMenu)),i.headerMenu&&this.initializeColumnHeaderMenu(e),i.contextMenu&&!this.columnSubscribers.contextMenu&&(this.columnSubscribers.contextMenu=this.loadMenuTableCellEvent.bind(this,"contextMenu"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextMenu),this.table.on("cellTapHold",this.loadMenuTableCellEvent.bind(this,"contextMenu"))),i.clickMenu&&!this.columnSubscribers.clickMenu&&(this.columnSubscribers.clickMenu=this.loadMenuTableCellEvent.bind(this,"clickMenu"),this.subscribe("cell-click",this.columnSubscribers.clickMenu)),i.dblClickMenu&&!this.columnSubscribers.dblClickMenu&&(this.columnSubscribers.dblClickMenu=this.loadMenuTableCellEvent.bind(this,"dblClickMenu"),this.subscribe("cell-dblclick",this.columnSubscribers.dblClickMenu))}initializeColumnHeaderMenu(e){var i=e.definition.headerMenuIcon,r;r=document.createElement("span"),r.classList.add("tabulator-header-popup-button"),i?(typeof i=="function"&&(i=i(e.getComponent())),i instanceof HTMLElement?r.appendChild(i):r.innerHTML=i):r.innerHTML="&vellip;",r.addEventListener("click",n=>{n.stopPropagation(),n.preventDefault(),this.loadMenuEvent(e.definition.headerMenu,n,e)}),e.titleElement.insertBefore(r,e.titleElement.firstChild)}loadMenuTableCellEvent(e,i,r){r._cell&&(r=r._cell),r.column.definition[e]&&this.loadMenuEvent(r.column.definition[e],i,r)}loadMenuTableColumnEvent(e,i,r){r._column&&(r=r._column),r.definition[e]&&this.loadMenuEvent(r.definition[e],i,r)}loadMenuEvent(e,i,r){r._group?r=r._group:r._row&&(r=r._row),e=typeof e=="function"?e.call(this.table,i,r.getComponent()):e,this.loadMenu(i,r,e)}loadMenu(e,i,r,n,s){var o=!(e instanceof MouseEvent),a=document.createElement("div"),l;if(a.classList.add("tabulator-menu"),o||e.preventDefault(),!(!r||!r.length)){if(n)l=s.child(a);else{if(this.nestedMenuBlock){if(this.rootPopup)return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.rootPopup&&this.rootPopup.hide(),this.rootPopup=l=this.popup(a)}r.forEach(u=>{var c=document.createElement("div"),h=u.label,d=u.disabled;u.separator?c.classList.add("tabulator-menu-separator"):(c.classList.add("tabulator-menu-item"),typeof h=="function"&&(h=h.call(this.table,i.getComponent())),h instanceof Node?c.appendChild(h):c.innerHTML=h,typeof d=="function"&&(d=d.call(this.table,i.getComponent())),d?(c.classList.add("tabulator-menu-item-disabled"),c.addEventListener("click",p=>{p.stopPropagation()})):u.menu&&u.menu.length?c.addEventListener("click",p=>{p.stopPropagation(),this.loadMenu(p,i,u.menu,c,l)}):u.action&&c.addEventListener("click",p=>{u.action(p,i.getComponent())}),u.menu&&u.menu.length&&c.classList.add("tabulator-menu-item-submenu")),a.appendChild(c)}),a.addEventListener("click",u=>{this.rootPopup&&this.rootPopup.hide()}),l.show(n||e),l===this.rootPopup&&(this.rootPopup.hideOnBlur(()=>{this.rootPopup=null,this.currentComponent&&(this.dispatch("menu-closed",r,l),this.dispatchExternal("menuClosed",this.currentComponent.getComponent()),this.currentComponent=null)}),this.currentComponent=i,this.dispatch("menu-opened",r,l),this.dispatchExternal("menuOpened",i.getComponent()))}}};de(RE,"moduleName","menu");var DE=class extends bt{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.table.options.movableColumns&&(this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("alert-show",this.abortMove.bind(this)))}abortMove(){clearTimeout(this.checkTimeout)}initializeColumn(e){var i=this,r={},n;!e.modules.frozen&&!e.isGroup&&!e.isRowHeader&&(n=e.getElement(),r.mousemove=function(s){e.parent===i.moving.parent&&((i.touchMove?s.touches[0].pageX:s.pageX)-Qt.elOffset(n).left+i.table.columnManager.contentsElement.scrollLeft>e.getWidth()/2?(i.toCol!==e||!i.toColAfter)&&(n.parentNode.insertBefore(i.placeholderElement,n.nextSibling),i.moveColumn(e,!0)):(i.toCol!==e||i.toColAfter)&&(n.parentNode.insertBefore(i.placeholderElement,n),i.moveColumn(e,!1)))}.bind(i),n.addEventListener("mousedown",function(s){i.touchMove=!1,s.which===1&&(i.checkTimeout=setTimeout(function(){i.startMove(s,e)},i.checkPeriod))}),n.addEventListener("mouseup",function(s){s.which===1&&i.checkTimeout&&clearTimeout(i.checkTimeout)}),i.bindTouchEvents(e)),e.modules.moveColumn=r}bindTouchEvents(e){var i=e.getElement(),r=!1,n,s,o,a,l,u;i.addEventListener("touchstart",c=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,n=e.nextColumn(),o=n?n.getWidth()/2:0,s=e.prevColumn(),a=s?s.getWidth()/2:0,l=0,u=0,r=!1,this.startMove(c,e)},this.checkPeriod)},{passive:!0}),i.addEventListener("touchmove",c=>{var h,d;this.moving&&(this.moveHover(c),r||(r=c.touches[0].pageX),h=c.touches[0].pageX-r,h>0?n&&h-l>o&&(d=n,d!==e&&(r=c.touches[0].pageX,d.getElement().parentNode.insertBefore(this.placeholderElement,d.getElement().nextSibling),this.moveColumn(d,!0))):s&&-h-u>a&&(d=s,d!==e&&(r=c.touches[0].pageX,d.getElement().parentNode.insertBefore(this.placeholderElement,d.getElement()),this.moveColumn(d,!1))),d&&(n=d.nextColumn(),l=o,o=n?n.getWidth()/2:0,s=d.prevColumn(),u=a,a=s?s.getWidth()/2:0))},{passive:!0}),i.addEventListener("touchend",c=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(c)})}startMove(e,i){var r=i.getElement(),n=this.table.columnManager.getContentsElement(),s=this.table.columnManager.getHeadersElement();this.table.modules.selectRange&&this.table.modules.selectRange.columnSelection&&this.table.modules.selectRange.mousedown&&this.table.modules.selectRange.selecting==="column"||(this.moving=i,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-Qt.elOffset(r).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=i.getWidth()+"px",this.placeholderElement.style.height=i.getHeight()+"px",r.parentNode.insertBefore(this.placeholderElement,r),r.parentNode.removeChild(r),this.hoverElement=r.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),n.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=n.clientHeight-s.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e),this.dispatch("column-moving",e,this.moving))}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,i){var r=this.moving.getCells();this.toCol=e,this.toColAfter=i,i?e.getCells().forEach(function(n,s){var o=n.getElement(!0);o.parentNode&&r[s]&&o.parentNode.insertBefore(r[s].getElement(),o.nextSibling)}):e.getCells().forEach(function(n,s){var o=n.getElement(!0);o.parentNode&&r[s]&&o.parentNode.insertBefore(r[s].getElement(),o)})}endMove(e){(e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var i=this.table.columnManager.getContentsElement(),r=i.scrollLeft,n=(this.touchMove?e.touches[0].pageX:e.pageX)-Qt.elOffset(i).left+r,s;this.hoverElement.style.left=n-this.startX+"px",n-r<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{s=Math.max(0,r-5),this.table.rowManager.getElement().scrollLeft=s,this.autoScrollTimeout=!1},1))),r+i.clientWidth-n<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{s=Math.min(i.clientWidth,r+5),this.table.rowManager.getElement().scrollLeft=s,this.autoScrollTimeout=!1},1)))}};de(DE,"moduleName","moveColumn");var xDe={delete:function(t,e,i){t.delete()}},wDe={insert:function(t,e,i){return this.table.addRow(t.getData(),void 0,e),!0},add:function(t,e,i){return this.table.addRow(t.getData()),!0},update:function(t,e,i){return e?(e.update(t.getData()),!0):!1},replace:function(t,e,i){return e?(this.table.addRow(t.getData(),void 0,e),e.delete(),!0):!1}},Ip=class Ip extends bt{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.classList.add("tabulator-row-placeholder"),e}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(e){var i=this,r={};r.mouseup=function(n){i.tableRowDrop(n,e)}.bind(i),r.mousemove=function(n){var s;n.pageY-Qt.elOffset(e.element).top+i.table.rowManager.element.scrollTop>e.getHeight()/2?(i.toRow!==e||!i.toRowAfter)&&(s=e.getElement(),s.parentNode.insertBefore(i.placeholderElement,s.nextSibling),i.moveRow(e,!0)):(i.toRow!==e||i.toRowAfter)&&(s=e.getElement(),s.previousSibling&&(s.parentNode.insertBefore(i.placeholderElement,s),i.moveRow(e,!1)))}.bind(i),e.modules.moveRow=r}initializeRow(e){var i=this,r={},n;r.mouseup=function(s){i.tableRowDrop(s,e)}.bind(i),r.mousemove=function(s){var o=e.getElement();s.pageY-Qt.elOffset(o).top+i.table.rowManager.element.scrollTop>e.getHeight()/2?(i.toRow!==e||!i.toRowAfter)&&(o.parentNode.insertBefore(i.placeholderElement,o.nextSibling),i.moveRow(e,!0)):(i.toRow!==e||i.toRowAfter)&&(o.parentNode.insertBefore(i.placeholderElement,o),i.moveRow(e,!1))}.bind(i),this.hasHandle||(n=e.getElement(),n.addEventListener("mousedown",function(s){s.which===1&&(i.checkTimeout=setTimeout(function(){i.startMove(s,e)},i.checkPeriod))}),n.addEventListener("mouseup",function(s){s.which===1&&i.checkTimeout&&clearTimeout(i.checkTimeout)}),this.bindTouchEvents(e,e.getElement())),e.modules.moveRow=r}initializeColumn(e){e.definition.rowHandle&&this.table.options.movableRows!==!1&&(this.hasHandle=!0)}initializeCell(e){if(e.column.definition.rowHandle&&this.table.options.movableRows!==!1){var i=this,r=e.getElement(!0);r.addEventListener("mousedown",function(n){n.which===1&&(i.checkTimeout=setTimeout(function(){i.startMove(n,e.row)},i.checkPeriod))}),r.addEventListener("mouseup",function(n){n.which===1&&i.checkTimeout&&clearTimeout(i.checkTimeout)}),this.bindTouchEvents(e.row,r)}}bindTouchEvents(e,i){var r=!1,n,s,o,a,l,u;i.addEventListener("touchstart",c=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,n=e.nextRow(),o=n?n.getHeight()/2:0,s=e.prevRow(),a=s?s.getHeight()/2:0,l=0,u=0,r=!1,this.startMove(c,e)},this.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,i.addEventListener("touchmove",c=>{var h,d;this.moving&&(c.preventDefault(),this.moveHover(c),r||(r=c.touches[0].pageY),h=c.touches[0].pageY-r,h>0?n&&h-l>o&&(d=n,d!==e&&(r=c.touches[0].pageY,d.getElement().parentNode.insertBefore(this.placeholderElement,d.getElement().nextSibling),this.moveRow(d,!0))):s&&-h-u>a&&(d=s,d!==e&&(r=c.touches[0].pageY,d.getElement().parentNode.insertBefore(this.placeholderElement,d.getElement()),this.moveRow(d,!1))),d&&(n=d.nextRow(),l=o,o=n?n.getHeight()/2:0,s=d.prevRow(),u=a,a=s?s.getHeight()/2:0))}),i.addEventListener("touchend",c=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(c),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)})}startMove(e,i){var r=i.getElement();this.setStartPosition(e,i),this.moving=i,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=i.getWidth()+"px",this.placeholderElement.style.height=i.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(i)):(r.parentNode.insertBefore(this.placeholderElement,r),r.parentNode.removeChild(r)),this.hoverElement=r.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.dispatchExternal("rowMoving",i.getComponent()),this.moveHover(e)}setStartPosition(e,i){var r=this.touchMove?e.touches[0].pageX:e.pageX,n=this.touchMove?e.touches[0].pageY:e.pageY,s,o;s=i.getElement(),this.connection?(o=s.getBoundingClientRect(),this.startX=o.left-r+window.pageXOffset,this.startY=o.top-n+window.pageYOffset):this.startY=n-s.getBoundingClientRect().top}endMove(e){(!e||e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow?this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter):this.dispatchExternal("rowMoveCancelled",this.moving.getComponent()),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(e,i){this.toRow=e,this.toRowAfter=i}moveHover(e){this.connection?this.moveHoverConnections.call(this,e):this.moveHoverTable.call(this,e)}moveHoverTable(e){var i=this.table.rowManager.getElement(),r=i.scrollTop,n=(this.touchMove?e.touches[0].pageY:e.pageY)-i.getBoundingClientRect().top+r;this.hoverElement.style.top=Math.min(n-this.startY,this.table.rowManager.element.scrollHeight-this.hoverElement.offsetHeight)+"px"}moveHoverConnections(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"}elementRowDrop(e,i,r){this.dispatchExternal("movableRowsElementDrop",e,i,r?r.getComponent():!1)}connectToTables(e){var i;this.connectionSelectorsTables&&(i=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",i),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:e})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(r=>{typeof r=="string"?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(r))):this.connectionElements.push(r)}),this.connectionElements.forEach(r=>{var n=s=>{this.elementRowDrop(s,r,this.moving)};r.addEventListener("mouseup",n),r.tabulatorElementDropEvent=n,r.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",e),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(i=>{i.classList.remove("tabulator-movingrow-receiving"),i.removeEventListener("mouseup",i.tabulatorElementDropEvent),delete i.tabulatorElementDropEvent})}connect(e,i){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=e,this.connectedRow=i,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(r=>{r.type==="row"&&r.modules.moveRow&&r.modules.moveRow.mouseup&&r.getElement().addEventListener("mouseup",r.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",i,e),!0)}disconnect(e){e===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(i=>{i.type==="row"&&i.modules.moveRow&&i.modules.moveRow.mouseup&&i.getElement().removeEventListener("mouseup",i.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",e)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(e,i,r){var n=!1;if(r){switch(typeof this.table.options.movableRowsSender){case"string":n=Ip.senders[this.table.options.movableRowsSender];break;case"function":n=this.table.options.movableRowsSender;break}n?n.call(this,this.moving?this.moving.getComponent():void 0,i?i.getComponent():void 0,e):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),i?i.getComponent():void 0,e)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),i?i.getComponent():void 0,e);this.endMove()}tableRowDrop(e,i){var r=!1,n=!1;switch(e.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":r=Ip.receivers[this.table.options.movableRowsReceiver];break;case"function":r=this.table.options.movableRowsReceiver;break}r?n=r.call(this,this.connectedRow.getComponent(),i?i.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),n?this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),i?i.getComponent():void 0,this.connectedTable):this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),i?i.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:i,success:n})}commsReceived(e,i,r){switch(i){case"connect":return this.connect(e,r.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,r.row,r.success)}}};de(Ip,"moduleName","moveRow"),de(Ip,"senders",xDe),de(Ip,"receivers",wDe);var UO=Ip,_De={},a1=class a1 extends bt{constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard","import"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams"),this.registerColumnOption("mutatorImport"),this.registerColumnOption("mutatorImportParams"),this.registerColumnOption("mutateLink")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("cell-value-changed",this.mutateLink.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,i,r){return this.transformRow(i,"data",r)}initializeColumn(e){var i=!1,r={};this.allowedTypes.forEach(n=>{var s="mutator"+(n.charAt(0).toUpperCase()+n.slice(1)),o;e.definition[s]&&(o=this.lookupMutator(e.definition[s]),o&&(i=!0,r[s]={mutator:o,params:e.definition[s+"Params"]||{}}))}),i&&(e.modules.mutate=r)}lookupMutator(e){var i=!1;switch(typeof e){case"string":a1.mutators[e]?i=a1.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":i=e;break}return i}transformRow(e,i,r){var n="mutator"+(i.charAt(0).toUpperCase()+i.slice(1)),s;return this.enabled&&this.table.columnManager.traverse(o=>{var a,l,u;o.modules.mutate&&(a=o.modules.mutate[n]||o.modules.mutate.mutator||!1,a&&(s=o.getFieldValue(typeof r<"u"?r:e),(i=="data"&&!r||typeof s<"u")&&(u=o.getComponent(),l=typeof a.params=="function"?a.params(s,e,i,u):a.params,o.setFieldValue(e,a.mutator(s,e,i,l,u)))))}),e}transformCell(e,i){if(e.column.modules.mutate){var r=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,n={};if(r)return n=Object.assign(n,e.row.getData()),e.column.setFieldValue(n,i),r.mutator(i,n,"edit",r.params,e.getComponent())}return i}mutateLink(e){var i=e.column.definition.mutateLink;i&&(Array.isArray(i)||(i=[i]),i.forEach(r=>{var n=e.row.getCell(r);n&&n.setValue(n.getValue(),!0,!0)}))}enable(){this.enabled=!0}disable(){this.enabled=!1}};de(a1,"moduleName","mutator"),de(a1,"mutators",_De);var WO=a1;function CDe(t,e,i,r,n){var s=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),u=document.createElement("span"),c=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",h=>{o.innerHTML=h}),this.table.modules.localize.langBind("pagination|counter|of",h=>{l.innerHTML=h}),this.table.modules.localize.langBind("pagination|counter|rows",h=>{c.innerHTML=h}),r?(a.innerHTML=" "+e+"-"+Math.min(e+t-1,r)+" ",u.innerHTML=" "+r+" ",s.appendChild(o),s.appendChild(a),s.appendChild(l),s.appendChild(u),s.appendChild(c)):(a.innerHTML=" 0 ",s.appendChild(o),s.appendChild(a),s.appendChild(c)),s}function SDe(t,e,i,r,n){var s=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),u=document.createElement("span"),c=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",h=>{o.innerHTML=h}),a.innerHTML=" "+i+" ",this.table.modules.localize.langBind("pagination|counter|of",h=>{l.innerHTML=h}),u.innerHTML=" "+n+" ",this.table.modules.localize.langBind("pagination|counter|pages",h=>{c.innerHTML=h}),s.appendChild(o),s.appendChild(a),s.appendChild(l),s.appendChild(u),s.appendChild(c),s}var EDe={rows:CDe,pages:SDe},hw=class hw extends bt{constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.element=null,this.pageCounterElement=null,this.pageCounter=null,this.size=0,this.page=1,this.count=5,this.max=1,this.remoteRowCountEstimate=null,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationCounter",!1),this.registerTableOption("paginationCounterElement",!1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("paginationOutOfRange",!1),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("footer-redraw",this.footerRedraw.bind(this)),this.table.options.paginationAddRow=="page"&&this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.table.options.paginationMode==="remote"&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePageCounter(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),this.table.options.progressiveLoad==="scroll"&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,i){var r=this.table.rowManager,n=r.getDisplayRows(),s;return i?n.length?s=n[0]:r.activeRows.length&&(s=r.activeRows[r.activeRows.length-1],i=!1):n.length&&(s=n[n.length-1],i=!(n.length<this.size)),{index:s,top:i}}calculatePageSizes(){var e,i;this.table.options.paginationSize?this.size=this.table.options.paginationSize:(e=document.createElement("div"),e.classList.add("tabulator-row"),e.style.visibility="hidden",i=document.createElement("div"),i.classList.add("tabulator-cell"),i.innerHTML="Page Row Test",e.appendChild(i),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.dispatchExternal("pageSizeChanged",this.size),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,i,r,n){return this.initialLoad||(this.progressiveLoad&&!r||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),n.page=this.page,this.size&&(n.size=this.size),n}userSetPageToRow(e){return this.table.options.pagination&&(e=this.table.rowManager.findRow(e),e)?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return this.table.options.pagination?(this.setPageSize(e),this.setPage(1)):!1}scrollVertical(e,i){var r,n,s;!i&&!this.table.dataLoader.loading&&(r=this.table.rowManager.getElement(),n=r.scrollHeight-r.clientHeight-e,s=this.table.options.progressiveLoadScrollMargin||r.clientHeight*2,n<s&&this.nextPage().catch(()=>{}))}restOnRenderBefore(e,i){return i||this.mode==="local"&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),e=document.createElement("button"),e.classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))e=this.table.options.paginationSizeSelector,this.pageSizes=e,this.pageSizes.indexOf(this.size)==-1&&e.unshift(this.size);else if(this.pageSizes.indexOf(this.size)==-1){e=[];for(let i=1;i<5;i++)e.push(this.size*i);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(i=>{var r=document.createElement("option");r.value=i,i===!0?this.langBind("pagination|all",function(n){r.innerHTML=n}):r.innerHTML=i,this.pageSizeSelect.appendChild(r)}),this.pageSizeSelect.value=this.size}}initializePageCounter(){var e=this.table.options.paginationCounter,i=null;e&&(typeof e=="function"?i=e:i=hw.pageCounters[e],i?(this.pageCounter=i,this.pageCounterElement=document.createElement("span"),this.pageCounterElement.classList.add("tabulator-page-counter")):console.warn("Pagination Error - No such page counter found: ",e))}initializePaginator(e){var i,r;e||(this.langBind("pagination|first",n=>{this.firstBut.innerHTML=n}),this.langBind("pagination|first_title",n=>{this.firstBut.setAttribute("aria-label",n),this.firstBut.setAttribute("title",n)}),this.langBind("pagination|prev",n=>{this.prevBut.innerHTML=n}),this.langBind("pagination|prev_title",n=>{this.prevBut.setAttribute("aria-label",n),this.prevBut.setAttribute("title",n)}),this.langBind("pagination|next",n=>{this.nextBut.innerHTML=n}),this.langBind("pagination|next_title",n=>{this.nextBut.setAttribute("aria-label",n),this.nextBut.setAttribute("title",n)}),this.langBind("pagination|last",n=>{this.lastBut.innerHTML=n}),this.langBind("pagination|last_title",n=>{this.lastBut.setAttribute("aria-label",n),this.lastBut.setAttribute("title",n)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(i=document.createElement("label"),this.langBind("pagination|page_size",n=>{this.pageSizeSelect.setAttribute("aria-label",n),this.pageSizeSelect.setAttribute("title",n),i.innerHTML=n}),this.element.appendChild(i),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",n=>{this.setPageSize(this.pageSizeSelect.value=="true"?!0:this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),this.table.options.paginationElement||(this.table.options.paginationCounter&&(this.table.options.paginationCounterElement?this.table.options.paginationCounterElement instanceof HTMLElement?this.table.options.paginationCounterElement.appendChild(this.pageCounterElement):typeof this.table.options.paginationCounterElement=="string"&&(r=document.querySelector(this.table.options.paginationCounterElement),r?r.appendChild(this.pageCounterElement):console.warn("Pagination Error - Unable to find element matching paginationCounterElement selector:",this.table.options.paginationCounterElement)):this.footerAppend(this.pageCounterElement)),this.footerAppend(this.element)),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setMaxRows(e){e?this.max=this.size===!0?1:Math.ceil(e/this.size):this.max=1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||(this.mode=="local"||e)&&(this.page=1,this.trackChanges())}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return e=parseInt(e),e>0&&e<=this.max||this.mode!=="local"?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var i=this.displayRows(-1),r=i.indexOf(e);if(r>-1){var n=this.size===!0?1:Math.ceil((r+1)/this.size);return this.setPage(n)}else return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){e!==!0&&(e=parseInt(e)),e>0&&(this.size=e,this.dispatchExternal("pageSizeChanged",e)),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageCounter(e,i,r){var n;if(this.pageCounter)switch(this.mode==="remote"&&(i=this.size,r=(this.page-1)*this.size+1,e=this.remoteRowCountEstimate),n=this.pageCounter.call(this,i,r,this.page,e,this.max),typeof n){case"object":if(n instanceof Node){for(;this.pageCounterElement.firstChild;)this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);this.pageCounterElement.appendChild(n)}else this.pageCounterElement.innerHTML="",n!=null&&console.warn("Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:",n);break;case"undefined":this.pageCounterElement.innerHTML="";break;default:this.pageCounterElement.innerHTML=n}}_setPageButtons(){let e=Math.floor((this.count-1)/2),i=Math.ceil((this.count-1)/2),r=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),n=this.page<=i?Math.min(this.count,this.max):Math.min(this.page+i,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);this.page==1?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let s=r;s<=n;s++)s>0&&s<=this.max&&this.pagesElement.appendChild(this._generatePageButton(s));this.footerRedraw()}_generatePageButton(e){var i=document.createElement("button");return i.classList.add("tabulator-page"),e==this.page&&i.classList.add("active"),i.setAttribute("type","button"),i.setAttribute("role","button"),this.langBind("pagination|page_title",r=>{i.setAttribute("aria-label",r+" "+e),i.setAttribute("title",r+" "+e)}),i.setAttribute("data-page",e),i.textContent=e,i.addEventListener("click",r=>{this.setPage(e)}),i}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var i=0,r,n,s,o,a=e.filter(l=>l.type==="row");if(this.mode=="local"){r=[],this.setMaxRows(e.length),this.size===!0?(n=0,s=e.length):(n=this.size*(this.page-1),s=n+parseInt(this.size)),this._setPageButtons();for(let l=n;l<s;l++){let u=e[l];u&&(r.push(u),u.type==="row"&&(o||(o=u),i++))}return this._setPageCounter(a.length,i,o?a.indexOf(o)+1:0),r}else return this._setPageButtons(),this._setPageCounter(a.length),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){var i,r;if(typeof e.last_page>"u"&&console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").last_page||"last_page")+"' property"),e.data)if(this.max=parseInt(e.last_page)||1,this.remoteRowCountEstimate=typeof e.last_row<"u"?e.last_row:e.last_page*this.size-(this.page==e.last_page?this.size-e.data.length:0),this.progressiveLoad){switch(this.mode){case"progressive_load":this.page==1?this.table.rowManager.setData(e.data,!1,this.page==1):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.page===1?e.data:this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,this.page!==1,this.page==1),i=this.table.options.progressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2,this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+i&&this.page<this.max&&setTimeout(()=>{this.nextPage()});break}return!1}else{if(this.page>this.max&&(console.warn("Remote Pagination Error - Server returned last page value lower than the current page"),r=this.options("paginationOutOfRange"),r))return this.setPage(typeof r=="function"?r.call(this,this.page,this.max):r);this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").data||"data")+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.containerElement;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}};de(hw,"moduleName","page"),de(hw,"pageCounters",EDe);var VO=hw,kDe={local:function(t,e){var i=localStorage.getItem(t+"-"+e);return i?JSON.parse(i):!1},cookie:function(t,e){var i=document.cookie,r=t+"-"+e,n=i.indexOf(r+"="),s,o;return n>-1&&(i=i.slice(n),s=i.indexOf(";"),s>-1&&(i=i.slice(0,s)),o=i.replace(r+"=","")),o?JSON.parse(o):!1}},ADe={local:function(t,e,i){localStorage.setItem(t+"-"+e,JSON.stringify(i))},cookie:function(t,e,i){var r=new Date;r.setDate(r.getDate()+1e4),document.cookie=t+"-"+e+"="+JSON.stringify(i)+"; expires="+r.toUTCString()}},Ks=class Ks extends bt{constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}initialize(){if(this.table.options.persistence){var e=this.table.options.persistenceMode,i=this.table.options.persistenceID,r;this.mode=e!==!0?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?typeof this.table.options.persistenceReaderFunc=="function"?this.readFunc=this.table.options.persistenceReaderFunc:Ks.readers[this.table.options.persistenceReaderFunc]?this.readFunc=Ks.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):Ks.readers[this.mode]?this.readFunc=Ks.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?typeof this.table.options.persistenceWriterFunc=="function"?this.writeFunc=this.table.options.persistenceWriterFunc:Ks.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=Ks.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):Ks.writers[this.mode]?this.writeFunc=Ks.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(i||this.table.element.getAttribute("id")||""),this.config={sort:this.table.options.persistence===!0||this.table.options.persistence.sort,filter:this.table.options.persistence===!0||this.table.options.persistence.filter,headerFilter:this.table.options.persistence===!0||this.table.options.persistence.headerFilter,group:this.table.options.persistence===!0||this.table.options.persistence.group,page:this.table.options.persistence===!0||this.table.options.persistence.page,columns:this.table.options.persistence===!0?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(r=this.retrieveData("page"),r&&(typeof r.paginationSize<"u"&&(this.config.page===!0||this.config.page.size)&&(this.table.options.paginationSize=r.paginationSize),typeof r.paginationInitialPage<"u"&&(this.config.page===!0||this.config.page.page)&&(this.table.options.paginationInitialPage=r.paginationInitialPage))),this.config.group&&(r=this.retrieveData("group"),r&&(typeof r.groupBy<"u"&&(this.config.group===!0||this.config.group.groupBy)&&(this.table.options.groupBy=r.groupBy),typeof r.groupStartOpen<"u"&&(this.config.group===!0||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=r.groupStartOpen),typeof r.groupHeader<"u"&&(this.config.group===!0||this.config.group.groupHeader)&&(this.table.options.groupHeader=r.groupHeader))),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns"))),this.subscribe("table-built",this.tableBuilt.bind(this),0),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("filter-changed",this.eventSave.bind(this,"headerFilter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("column-width",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var e,i,r;this.config.sort&&(e=this.load("sort"),e&&(this.table.options.initialSort=e)),this.config.filter&&(i=this.load("filter"),i&&(this.table.options.initialFilter=i)),this.config.headerFilter&&(r=this.load("headerFilter"),r&&(this.table.options.initialHeaderFilter=r))}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e,!0)),!0}initializeColumn(e){var i,r;this.config.columns&&(this.defWatcherBlock=!0,i=e.getDefinition(),r=this.config.columns===!0?Object.keys(i):this.config.columns,r.forEach(n=>{var s=Object.getOwnPropertyDescriptor(i,n),o=i[n];s&&Object.defineProperty(i,n,{set:a=>{o=a,this.defWatcherBlock||this.save("columns"),s.set&&s.set(a)},get:()=>(s.get&&s.get(),o)})}),this.defWatcherBlock=!1)}load(e,i){var r=this.retrieveData(e);return i&&(r=r?this.mergeDefinition(i,r):i),r}retrieveData(e){return this.readFunc?this.readFunc(this.id,e):!1}mergeDefinition(e,i,r){var n=[];return i=i||[],i.forEach((s,o)=>{var a=this._findColumn(e,s),l;a&&(r?l=Object.keys(s):this.config.columns===!0||this.config.columns==null?(l=Object.keys(a),l.push("width")):l=this.config.columns,l.forEach(u=>{u!=="columns"&&typeof s[u]<"u"&&(a[u]=s[u])}),a.columns&&(a.columns=this.mergeDefinition(a.columns,s.columns)),n.push(a))}),e.forEach((s,o)=>{var a=this._findColumn(i,s);a||(n.length>o?n.splice(o,0,s):n.push(s))}),n}_findColumn(e,i){var r=i.columns?"group":i.field?"field":"object";return e.find(function(n){switch(r){case"group":return n.title===i.title&&n.columns.length===i.columns.length;case"field":return n.field===i.field;case"object":return n===i}})}save(e){var i={};switch(e){case"columns":i=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":i=this.table.modules.filter.getFilters();break;case"headerFilter":i=this.table.modules.filter.getHeaderFilters();break;case"sort":i=this.validateSorters(this.table.modules.sort.getSort());break;case"group":i=this.getGroupConfig();break;case"page":i=this.getPageConfig();break}this.writeFunc&&this.writeFunc(this.id,e,i)}validateSorters(e){return e.forEach(function(i){i.column=i.field,delete i.field}),e}getGroupConfig(){var e={};return this.config.group&&((this.config.group===!0||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(this.config.group===!0||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(this.config.group===!0||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((this.config.page===!0||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(this.config.page===!0||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var i=[],r=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(n=>{var s={},o=n.getDefinition(),a;n.isGroup?(s.title=o.title,s.columns=this.parseColumns(n.getColumns())):(s.field=n.getField(),this.config.columns===!0||this.config.columns==null?(a=Object.keys(o),a.push("width"),a.push("visible")):a=this.config.columns,a.forEach(l=>{switch(l){case"width":s.width=n.getWidth();break;case"visible":s.visible=n.visible;break;default:typeof o[l]!="function"&&r.indexOf(l)===-1&&(s[l]=o[l])}})),i.push(s)}),i}};de(Ks,"moduleName","persistence"),de(Ks,"moduleInitOrder",-10),de(Ks,"readers",kDe),de(Ks,"writers",ADe);var jO=Ks,ME=class extends bt{constructor(e){super(e),this.columnSubscribers={},this.registerTableOption("rowContextPopup",!1),this.registerTableOption("rowClickPopup",!1),this.registerTableOption("rowDblClickPopup",!1),this.registerTableOption("groupContextPopup",!1),this.registerTableOption("groupClickPopup",!1),this.registerTableOption("groupDblClickPopup",!1),this.registerColumnOption("headerContextPopup"),this.registerColumnOption("headerClickPopup"),this.registerColumnOption("headerDblClickPopup"),this.registerColumnOption("headerPopup"),this.registerColumnOption("headerPopupIcon"),this.registerColumnOption("contextPopup"),this.registerColumnOption("clickPopup"),this.registerColumnOption("dblClickPopup"),this.registerComponentFunction("cell","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("column","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("row","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("group","popup",this._componentPopupCall.bind(this))}initialize(){this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}_componentPopupCall(e,i,r){this.loadPopupEvent(i,null,e,r)}initializeRowWatchers(){this.table.options.rowContextPopup&&(this.subscribe("row-contextmenu",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup)),this.table.on("rowTapHold",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup))),this.table.options.rowClickPopup&&this.subscribe("row-click",this.loadPopupEvent.bind(this,this.table.options.rowClickPopup)),this.table.options.rowDblClickPopup&&this.subscribe("row-dblclick",this.loadPopupEvent.bind(this,this.table.options.rowDblClickPopup))}initializeGroupWatchers(){this.table.options.groupContextPopup&&(this.subscribe("group-contextmenu",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup)),this.table.on("groupTapHold",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup))),this.table.options.groupClickPopup&&this.subscribe("group-click",this.loadPopupEvent.bind(this,this.table.options.groupClickPopup)),this.table.options.groupDblClickPopup&&this.subscribe("group-dblclick",this.loadPopupEvent.bind(this,this.table.options.groupDblClickPopup))}initializeColumn(e){var i=e.definition;i.headerContextPopup&&!this.columnSubscribers.headerContextPopup&&(this.columnSubscribers.headerContextPopup=this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextPopup),this.table.on("headerTapHold",this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"))),i.headerClickPopup&&!this.columnSubscribers.headerClickPopup&&(this.columnSubscribers.headerClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerClickPopup"),this.subscribe("column-click",this.columnSubscribers.headerClickPopup)),i.headerDblClickPopup&&!this.columnSubscribers.headerDblClickPopup&&(this.columnSubscribers.headerDblClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerDblClickPopup"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickPopup)),i.headerPopup&&this.initializeColumnHeaderPopup(e),i.contextPopup&&!this.columnSubscribers.contextPopup&&(this.columnSubscribers.contextPopup=this.loadPopupTableCellEvent.bind(this,"contextPopup"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextPopup),this.table.on("cellTapHold",this.loadPopupTableCellEvent.bind(this,"contextPopup"))),i.clickPopup&&!this.columnSubscribers.clickPopup&&(this.columnSubscribers.clickPopup=this.loadPopupTableCellEvent.bind(this,"clickPopup"),this.subscribe("cell-click",this.columnSubscribers.clickPopup)),i.dblClickPopup&&!this.columnSubscribers.dblClickPopup&&(this.columnSubscribers.dblClickPopup=this.loadPopupTableCellEvent.bind(this,"dblClickPopup"),this.subscribe("cell-click",this.columnSubscribers.dblClickPopup))}initializeColumnHeaderPopup(e){var i=e.definition.headerPopupIcon,r;r=document.createElement("span"),r.classList.add("tabulator-header-popup-button"),i?(typeof i=="function"&&(i=i(e.getComponent())),i instanceof HTMLElement?r.appendChild(i):r.innerHTML=i):r.innerHTML="&vellip;",r.addEventListener("click",n=>{n.stopPropagation(),n.preventDefault(),this.loadPopupEvent(e.definition.headerPopup,n,e)}),e.titleElement.insertBefore(r,e.titleElement.firstChild)}loadPopupTableCellEvent(e,i,r){r._cell&&(r=r._cell),r.column.definition[e]&&this.loadPopupEvent(r.column.definition[e],i,r)}loadPopupTableColumnEvent(e,i,r){r._column&&(r=r._column),r.definition[e]&&this.loadPopupEvent(r.definition[e],i,r)}loadPopupEvent(e,i,r,n){var s;function o(a){s=a}r._group?r=r._group:r._row&&(r=r._row),e=typeof e=="function"?e.call(this.table,i,r.getComponent(),o):e,this.loadPopup(i,r,e,s,n)}loadPopup(e,i,r,n,s){var o=!(e instanceof MouseEvent),a,l;r instanceof HTMLElement?a=r:(a=document.createElement("div"),a.innerHTML=r),a.classList.add("tabulator-popup"),a.addEventListener("click",u=>{u.stopPropagation()}),o||e.preventDefault(),l=this.popup(a),typeof n=="function"&&l.renderCallback(n),e?l.show(e):l.show(i.getElement(),s||"center"),l.hideOnBlur(()=>{this.dispatchExternal("popupClosed",i.getComponent())}),this.dispatchExternal("popupOpened",i.getComponent())}};de(ME,"moduleName","popup");var FE=class extends bt{constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.beforeprintEventHandler=null,this.afterprintEventHandler=null,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(this.beforeprintEventHandler=this.replaceTable.bind(this),this.afterprintEventHandler=this.cleanup.bind(this),window.addEventListener("beforeprint",this.beforeprintEventHandler),window.addEventListener("afterprint",this.afterprintEventHandler),this.subscribe("table-destroy",this.destroy.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}destroy(){this.table.options.printAsHtml&&(window.removeEventListener("beforeprint",this.beforeprintEventHandler),window.removeEventListener("afterprint",this.afterprintEventHandler))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,i,r){var n=window.scrollX,s=window.scrollY,o=document.createElement("div"),a=document.createElement("div"),l=this.table.modules.export.generateTable(typeof r<"u"?r:this.table.options.printConfig,typeof i<"u"?i:this.table.options.printStyled,e||this.table.options.printRowRange,"print"),u,c;this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(o.classList.add("tabulator-print-header"),u=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader,typeof u=="string"?o.innerHTML=u:o.appendChild(u),this.element.appendChild(o)),this.element.appendChild(l),this.table.options.printFooter&&(a.classList.add("tabulator-print-footer"),c=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter,typeof c=="string"?a.innerHTML=c:a.appendChild(c),this.element.appendChild(a)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,l),window.print(),this.cleanup(),window.scrollTo(n,s),this.manualBlock=!1}};de(FE,"moduleName","print");var LE=class extends bt{constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this,"cellsave")),this.subscribe("cell-value-save-after",this.unblock.bind(this,"cellsave")),this.subscribe("row-data-save-before",this.block.bind(this,"rowsave")),this.subscribe("row-data-save-after",this.unblock.bind(this,"rowsave")),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var i=this,r;this.currentVersion++,r=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var n=Array.from(arguments),s;return!i.blocked&&r===i.currentVersion&&(i.block("data-push"),n.forEach(o=>{i.table.rowManager.addRowActual(o,!1)}),s=i.origFuncs.push.apply(e,arguments),i.unblock("data-push")),s}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var n=Array.from(arguments),s;return!i.blocked&&r===i.currentVersion&&(i.block("data-unshift"),n.forEach(o=>{i.table.rowManager.addRowActual(o,!0)}),s=i.origFuncs.unshift.apply(e,arguments),i.unblock("data-unshift")),s}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var n,s;return!i.blocked&&r===i.currentVersion&&(i.block("data-shift"),i.data.length&&(n=i.table.rowManager.getRowFromDataObject(i.data[0]),n&&n.deleteActual()),s=i.origFuncs.shift.call(e),i.unblock("data-shift")),s}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var n,s;return!i.blocked&&r===i.currentVersion&&(i.block("data-pop"),i.data.length&&(n=i.table.rowManager.getRowFromDataObject(i.data[i.data.length-1]),n&&n.deleteActual()),s=i.origFuncs.pop.call(e),i.unblock("data-pop")),s}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var n=Array.from(arguments),s=n[0]<0?e.length+n[0]:n[0],o=n[1],a=n[2]?n.slice(2):!1,l,u;if(!i.blocked&&r===i.currentVersion){if(i.block("data-splice"),a&&(l=e[s]?i.table.rowManager.getRowFromDataObject(e[s]):!1,l?a.forEach(h=>{i.table.rowManager.addRowActual(h,!0,l,!0)}):(a=a.slice().reverse(),a.forEach(h=>{i.table.rowManager.addRowActual(h,!0,!1,!0)}))),o!==0){var c=e.slice(s,typeof n[1]>"u"?n[1]:s+o);c.forEach((h,d)=>{var p=i.table.rowManager.getRowFromDataObject(h);p&&p.deleteActual(d!==c.length-1)})}(a||o!==0)&&i.table.rowManager.reRenderInPosition(),u=i.origFuncs.splice.apply(e,arguments),i.unblock("data-splice")}return u}})}unwatchData(){if(this.data!==!1)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var i=e.getData();for(var r in i)this.watchKey(e,i,r);this.table.options.dataTree&&this.watchTreeChildren(e)}watchTreeChildren(e){var i=this,r=e.getData()[this.table.options.dataTreeChildField],n={};r&&(n.push=r.push,Object.defineProperty(r,"push",{enumerable:!1,configurable:!0,value:()=>{if(!i.blocked){i.block("tree-push");var s=n.push.apply(r,arguments);this.rebuildTree(e),i.unblock("tree-push")}return s}}),n.unshift=r.unshift,Object.defineProperty(r,"unshift",{enumerable:!1,configurable:!0,value:()=>{if(!i.blocked){i.block("tree-unshift");var s=n.unshift.apply(r,arguments);this.rebuildTree(e),i.unblock("tree-unshift")}return s}}),n.shift=r.shift,Object.defineProperty(r,"shift",{enumerable:!1,configurable:!0,value:()=>{if(!i.blocked){i.block("tree-shift");var s=n.shift.call(r);this.rebuildTree(e),i.unblock("tree-shift")}return s}}),n.pop=r.pop,Object.defineProperty(r,"pop",{enumerable:!1,configurable:!0,value:()=>{if(!i.blocked){i.block("tree-pop");var s=n.pop.call(r);this.rebuildTree(e),i.unblock("tree-pop")}return s}}),n.splice=r.splice,Object.defineProperty(r,"splice",{enumerable:!1,configurable:!0,value:()=>{if(!i.blocked){i.block("tree-splice");var s=n.splice.apply(r,arguments);this.rebuildTree(e),i.unblock("tree-splice")}return s}}))}rebuildTree(e){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}watchKey(e,i,r){var n=this,s=Object.getOwnPropertyDescriptor(i,r),o=i[r],a=this.currentVersion;Object.defineProperty(i,r,{set:l=>{if(o=l,!n.blocked&&a===n.currentVersion){n.block("key");var u={};u[r]=l,e.updateData(u),n.unblock("key")}s.set&&s.set(l)},get:()=>(s.get&&s.get(),o)})}unwatchRow(e){var i=e.getData();for(var r in i)Object.defineProperty(i,r,{value:i[r]})}block(e){this.blocked||(this.blocked=e)}unblock(e){this.blocked===e&&(this.blocked=!1)}};de(LE,"moduleName","reactiveData");var OE=class extends bt{constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.latestX=!1,this.handle=null,this.initialNextColumn=null,this.nextColumn=null,this.initialized=!1,this.registerColumnOption("resizable",!0),this.registerTableOption("resizableColumnFit",!1),this.registerTableOption("resizableColumnGuide",!1)}initialize(){this.subscribe("column-rendered",this.layoutColumnHeader.bind(this))}initializeEventWatchers(){this.initialized||(this.subscribe("cell-rendered",this.layoutCellHandles.bind(this)),this.subscribe("cell-delete",this.deInitializeComponent.bind(this)),this.subscribe("cell-height",this.resizeHandle.bind(this)),this.subscribe("column-moved",this.columnLayoutUpdated.bind(this)),this.subscribe("column-hide",this.deInitializeColumn.bind(this)),this.subscribe("column-show",this.columnLayoutUpdated.bind(this)),this.subscribe("column-width",this.columnWidthUpdated.bind(this)),this.subscribe("column-delete",this.deInitializeComponent.bind(this)),this.subscribe("column-height",this.resizeHandle.bind(this)),this.initialized=!0)}layoutCellHandles(e){e.row.type==="row"&&(this.deInitializeComponent(e),this.initializeColumn("cell",e,e.column,e.element))}layoutColumnHeader(e){e.definition.resizable&&(this.initializeEventWatchers(),this.deInitializeComponent(e),this.initializeColumn("header",e,e,e.element))}columnLayoutUpdated(e){var i=e.prevColumn();this.reinitializeColumn(e),i&&this.reinitializeColumn(i)}columnWidthUpdated(e){e.modules.frozen&&(this.table.modules.frozenColumns.leftColumns.includes(e)?this.table.modules.frozenColumns.leftColumns.forEach(i=>{this.reinitializeColumn(i)}):this.table.modules.frozenColumns.rightColumns.includes(e)&&this.table.modules.frozenColumns.rightColumns.forEach(i=>{this.reinitializeColumn(i)}))}frozenColumnOffset(e){var i=!1;return e.modules.frozen&&(i=e.modules.frozen.marginValue,e.modules.frozen.position==="left"?i+=e.getWidth()-3:i&&(i-=3)),i!==!1?i+"px":!1}reinitializeColumn(e){var i=this.frozenColumnOffset(e);e.cells.forEach(r=>{r.modules.resize&&r.modules.resize.handleEl&&(i&&(r.modules.resize.handleEl.style[e.modules.frozen.position]=i,r.modules.resize.handleEl.style["z-index"]=11),r.element.after(r.modules.resize.handleEl))}),e.modules.resize&&e.modules.resize.handleEl&&(i&&(e.modules.resize.handleEl.style[e.modules.frozen.position]=i),e.element.after(e.modules.resize.handleEl))}initializeColumn(e,i,r,n){var s=this,o=!1,a=r.definition.resizable,l={},u=r.getLastColumn();if(e==="header"&&(o=r.definition.formatter=="textarea"||r.definition.variableHeight,l={variableHeight:o}),(a===!0||a==e)&&this._checkResizability(u)){var c=document.createElement("span");c.className="tabulator-col-resize-handle",c.addEventListener("click",function(d){d.stopPropagation()});var h=function(d){s.startColumn=r,s.initialNextColumn=s.nextColumn=u.nextColumn(),s._mouseDown(d,u,c)};c.addEventListener("mousedown",h),c.addEventListener("touchstart",h,{passive:!0}),c.addEventListener("dblclick",d=>{var p=u.getWidth();d.stopPropagation(),u.reinitializeWidth(!0),p!==u.getWidth()&&(s.dispatch("column-resized",u),s.dispatchExternal("columnResized",u.getComponent()))}),r.modules.frozen&&(c.style.position="sticky",c.style[r.modules.frozen.position]=this.frozenColumnOffset(r)),l.handleEl=c,n.parentNode&&r.visible&&n.after(c)}i.modules.resize=l}deInitializeColumn(e){this.deInitializeComponent(e),e.cells.forEach(i=>{this.deInitializeComponent(i)})}deInitializeComponent(e){var i;e.modules.resize&&(i=e.modules.resize.handleEl,i&&i.parentElement&&i.parentElement.removeChild(i))}resizeHandle(e,i){e.modules.resize&&e.modules.resize.handleEl&&(e.modules.resize.handleEl.style.height=i)}resize(e,i){var r=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,n=r-this.startX,s=r-this.latestX,o,a;if(this.latestX=r,this.table.rtl&&(n=-n,s=-s),o=i.width==i.minWidth||i.width==i.maxWidth,i.setWidth(this.startWidth+n),a=i.width==i.minWidth||i.width==i.maxWidth,s<0&&(this.nextColumn=this.initialNextColumn),this.table.options.resizableColumnFit&&this.nextColumn&&!(o&&a)){let l=this.nextColumn.getWidth();s>0&&l<=this.nextColumn.minWidth&&(this.nextColumn=this.nextColumn.nextColumn()),this.nextColumn&&this.nextColumn.setWidth(this.nextColumn.getWidth()-s)}this.table.columnManager.rerenderColumns(!0),!this.table.browserSlow&&i.modules.resize&&i.modules.resize.variableHeight&&i.checkCellHeights()}calcGuidePosition(e,i,r){var n=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,s=r.getBoundingClientRect().x-this.table.element.getBoundingClientRect().x,o=this.table.element.getBoundingClientRect().x,a=i.element.getBoundingClientRect().left-o,l=n-this.startX,u=Math.max(s+l,a+i.minWidth);return i.maxWidth&&(u=Math.min(u,a+i.maxWidth)),u}_checkResizability(e){return e.definition.resizable}_mouseDown(e,i,r){var n=this,s;this.dispatchExternal("columnResizing",i.getComponent()),n.table.options.resizableColumnGuide&&(s=document.createElement("span"),s.classList.add("tabulator-col-resize-guide"),n.table.element.appendChild(s),setTimeout(()=>{s.style.left=n.calcGuidePosition(e,i,r)+"px"})),n.table.element.classList.add("tabulator-block-select");function o(l){n.table.options.resizableColumnGuide?s.style.left=n.calcGuidePosition(l,i,r)+"px":n.resize(l,i)}function a(l){n.table.options.resizableColumnGuide&&(n.resize(l,i),s.remove()),n.startColumn.modules.edit&&(n.startColumn.modules.edit.blocked=!1),n.table.browserSlow&&i.modules.resize&&i.modules.resize.variableHeight&&i.checkCellHeights(),document.body.removeEventListener("mouseup",a),document.body.removeEventListener("mousemove",o),r.removeEventListener("touchmove",o),r.removeEventListener("touchend",a),n.table.element.classList.remove("tabulator-block-select"),n.startWidth!==i.getWidth()&&(n.table.columnManager.verticalAlignHeaders(),n.dispatch("column-resized",i),n.dispatchExternal("columnResized",i.getComponent()))}e.stopPropagation(),n.startColumn.modules.edit&&(n.startColumn.modules.edit.blocked=!0),n.startX=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,n.latestX=n.startX,n.startWidth=i.getWidth(),document.body.addEventListener("mousemove",o),document.body.addEventListener("mouseup",a),r.addEventListener("touchmove",o,{passive:!0}),r.addEventListener("touchend",a)}};de(OE,"moduleName","resizeColumns");var PE=class extends bt{constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1),this.registerTableOption("resizableRowGuide",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var i=this,r=e.getElement(),n=document.createElement("div");n.className="tabulator-row-resize-handle";var s=document.createElement("div");s.className="tabulator-row-resize-handle prev",n.addEventListener("click",function(l){l.stopPropagation()});var o=function(l){i.startRow=e,i._mouseDown(l,e,n)};n.addEventListener("mousedown",o),n.addEventListener("touchstart",o,{passive:!0}),s.addEventListener("click",function(l){l.stopPropagation()});var a=function(l){var u=i.table.rowManager.prevDisplayRow(e);u&&(i.startRow=u,i._mouseDown(l,u,s))};s.addEventListener("mousedown",a),s.addEventListener("touchstart",a,{passive:!0}),r.appendChild(n),r.appendChild(s)}resize(e,i){i.setHeight(this.startHeight+((typeof e.screenY>"u"?e.touches[0].screenY:e.screenY)-this.startY))}calcGuidePosition(e,i,r){var n=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,s=r.getBoundingClientRect().y-this.table.element.getBoundingClientRect().y,o=this.table.element.getBoundingClientRect().y,a=i.element.getBoundingClientRect().top-o,l=n-this.startY;return Math.max(s+l,a)}_mouseDown(e,i,r){var n=this,s;n.dispatchExternal("rowResizing",i.getComponent()),n.table.options.resizableRowGuide&&(s=document.createElement("span"),s.classList.add("tabulator-row-resize-guide"),n.table.element.appendChild(s),setTimeout(()=>{s.style.top=n.calcGuidePosition(e,i,r)+"px"})),n.table.element.classList.add("tabulator-block-select");function o(l){n.table.options.resizableRowGuide?s.style.top=n.calcGuidePosition(l,i,r)+"px":n.resize(l,i)}function a(l){n.table.options.resizableRowGuide&&(n.resize(l,i),s.remove()),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",o),r.removeEventListener("touchmove",o),r.removeEventListener("touchend",a),n.table.element.classList.remove("tabulator-block-select"),n.dispatchExternal("rowResized",i.getComponent())}e.stopPropagation(),n.startY=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,n.startHeight=i.getHeight(),document.body.addEventListener("mousemove",o),document.body.addEventListener("mouseup",a),r.addEventListener("touchmove",o,{passive:!0}),r.addEventListener("touchend",a)}};de(PE,"moduleName","resizeRows");var zE=class extends bt{constructor(e){super(e),this.binding=!1,this.visibilityObserver=!1,this.resizeObserver=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.visible=!1,this.initialized=!1,this.initialRedraw=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var e=this.table,i;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),typeof IntersectionObserver<"u"&&typeof ResizeObserver<"u"&&e.rowManager.getRenderMode()==="virtual"?(this.initializeVisibilityObserver(),this.autoResize=!0,this.resizeObserver=new ResizeObserver(r=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var n=Math.floor(r[0].contentRect.height),s=Math.floor(r[0].contentRect.width);(this.tableHeight!=n||this.tableWidth!=s)&&(this.tableHeight=n,this.tableWidth=s,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.redrawTable())}}),this.resizeObserver.observe(e.element),i=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(i.getPropertyValue("max-height")||i.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(r=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var n=Math.floor(r[0].contentRect.height),s=Math.floor(r[0].contentRect.width);(this.containerHeight!=n||this.containerWidth!=s)&&(this.containerHeight=n,this.containerWidth=s,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),this.redrawTable()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell))&&(e.columnManager.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(e=>{this.visible=e[0].isIntersecting,this.initialized?this.visible&&(this.redrawTable(this.initialRedraw),this.initialRedraw=!1):(this.initialized=!0,this.initialRedraw=!this.visible)}),this.visibilityObserver.observe(this.table.element)}redrawTable(e){this.initialized&&this.visible&&(this.table.columnManager.rerenderColumns(!0),this.table.redraw(e))}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.resizeObserver&&this.resizeObserver.unobserve(this.table.element),this.visibilityObserver&&this.visibilityObserver.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}};de(zE,"moduleName","resizeTable");function TDe(t,e,i){var r=document.createElement("div"),n=t.getRow()._row.modules.responsiveLayout;r.classList.add("tabulator-responsive-collapse-toggle"),r.innerHTML=`<svg class='tabulator-responsive-collapse-toggle-open' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12" fill="none" stroke-width="3" stroke-linecap="round" />
  <line y1="7" x1="12" y2="17" x2="12" fill="none" stroke-width="3" stroke-linecap="round" />
</svg>

<svg class='tabulator-responsive-collapse-toggle-close' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12"  fill="none" stroke-width="3" stroke-linecap="round" />
</svg>`,t.getElement().classList.add("tabulator-row-handle");function s(o){var a=n.element;n.open=o,a&&(n.open?(r.classList.add("open"),a.style.display=""):(r.classList.remove("open"),a.style.display="none"))}return r.addEventListener("click",function(o){o.stopImmediatePropagation(),s(!n.open),t.getTable().rowManager.adjustTableSize()}),s(n.open),r}var RDe={format:{formatters:{responsiveCollapse:TDe}}},ow=class extends bt{constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),this.table.options.responsiveLayout==="collapse"&&(this.subscribe("row-data-changed",this.generateCollapsedRowContent.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){["fitColumns","fitDataStretch"].indexOf(this.layoutMode())===-1&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.collapseFormatter&&(this.collapseFormatter=this.collapseFormatter.bind(this.table)),this.table.columnManager.columnsByIndex.forEach((i,r)=>{i.modules.responsive&&i.modules.responsive.order&&i.modules.responsive.visible&&(i.modules.responsive.index=r,e.push(i),!i.visible&&this.mode==="collapse"&&this.hiddenColumns.push(i))}),e=e.reverse(),e=e.sort((i,r)=>{var n=r.modules.responsive.order-i.modules.responsive.order;return n||r.modules.responsive.index-i.modules.responsive.index}),this.columns=e,this.mode==="collapse"&&this.generateCollapsedContent();for(let i of this.table.columnManager.columnsByIndex)if(i.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=i;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var i=e.getDefinition();e.modules.responsive={order:typeof i.responsive>"u"?1:i.responsive,visible:i.visible!==!1}}initializeRow(e){var i;e.type!=="calc"&&(i=document.createElement("div"),i.classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:i,open:this.collapseStartOpen},this.collapseStartOpen||(i.style.display="none"))}layoutRow(e){var i=e.getElement();e.modules.responsiveLayout&&(i.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,i){!i&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initializeResponsivity())}hideColumn(e){var i=this.hiddenColumns.length;e.hide(!1,!0),this.mode==="collapse"&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!i&&this.collapseHandleColumn.show())}showColumn(e){var i;e.show(!1,!0),e.setWidth(e.getWidth()),this.mode==="collapse"&&(i=this.hiddenColumns.indexOf(e),i>-1&&this.hiddenColumns.splice(i,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=!0;e;){let i=this.table.modules.layout.getMode()=="fitColumns"?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),r=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-i;if(r<0){let n=this.columns[this.index];n?(this.hideColumn(n),this.index++):e=!1}else{let n=this.columns[this.index-1];n&&r>0&&r>=n.getWidth()?(this.showColumn(n),this.index--):e=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this.table.rowManager.getDisplayRows();e.forEach(i=>{this.generateCollapsedRowContent(i)})}generateCollapsedRowContent(e){var i,r;if(e.modules.responsiveLayout){for(i=e.modules.responsiveLayout.element;i.firstChild;)i.removeChild(i.firstChild);r=this.collapseFormatter(this.generateCollapsedRowData(e)),r&&i.appendChild(r),e.calcHeight(!0)}}generateCollapsedRowData(e){var i=e.getData(),r=[],n;return this.hiddenColumns.forEach(s=>{var o=s.getFieldValue(i);if(s.definition.title&&s.field)if(s.modules.format&&this.table.options.responsiveLayoutCollapseUseFormatters){let a=function(l){l()};n={value:!1,data:{},getValue:function(){return o},getData:function(){return i},getType:function(){return"cell"},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return s.getComponent()},getTable:()=>this.table},r.push({field:s.field,title:s.definition.title,value:s.modules.format.formatter.call(this.table.modules.format,n,s.modules.format.params,a)})}else r.push({field:s.field,title:s.definition.title,value:o})}),r}formatCollapsedData(e){var i=document.createElement("table");return e.forEach(r=>{var n=document.createElement("tr"),s=document.createElement("td"),o=document.createElement("td"),a,l=document.createElement("strong");s.appendChild(l),this.modules.localize.bind("columns|"+r.field,function(u){l.innerHTML=u||r.title}),r.value instanceof Node?(a=document.createElement("div"),a.appendChild(r.value),o.appendChild(a)):o.innerHTML=r.value,n.appendChild(s),n.appendChild(o),i.appendChild(n)}),Object.keys(e).length?i:""}};de(ow,"moduleName","responsiveLayout"),de(ow,"moduleExtensions",RDe);function DDe(t,e,i){var r=document.createElement("input"),n=!1;if(r.type="checkbox",r.setAttribute("aria-label","Select Row"),this.table.modExists("selectRow",!0))if(r.addEventListener("click",o=>{o.stopPropagation()}),typeof t.getRow=="function"){var s=t.getRow();s instanceof u1?(r.addEventListener("change",o=>{this.table.options.selectableRowsRangeMode==="click"&&n?n=!1:s.toggleSelect()}),this.table.options.selectableRowsRangeMode==="click"&&r.addEventListener("click",o=>{n=!0,this.table.modules.selectRow.handleComplexRowClick(s._row,o)}),r.checked=s.isSelected&&s.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(s,r)):r=""}else r.addEventListener("change",o=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(e.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(r);return r}var MDe={format:{formatters:{rowSelection:DDe}}},aw=class extends bt{constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectableRows","highlight"),this.registerTableOption("selectableRowsRangeMode","drag"),this.registerTableOption("selectableRowsRollingSelection",!0),this.registerTableOption("selectableRowsPersistence",!0),this.registerTableOption("selectableRowsCheck",function(i,r){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){this.deprecatedOptionsCheck(),this.table.options.selectableRows==="highlight"&&this.table.options.selectableRange&&(this.table.options.selectableRows=!1),this.table.options.selectableRows!==!1&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectableRows&&!this.table.options.selectableRowsPersistence&&this.subscribe("data-refreshing",this.deselectRows.bind(this)))}deprecatedOptionsCheck(){}rowRetrieve(e,i){return e==="selected"?this.selectedRows:i}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){var i=this.selectedRows.length;this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],i&&e!==!0&&this._rowSelectionChanged()}initializeRow(e){var i=this,r=i.checkRowSelectability(e),n=e.getElement(),s=function(){setTimeout(function(){i.selecting=!1},50),document.body.removeEventListener("mouseup",s)};e.modules.select={selected:!1},n.classList.toggle("tabulator-selectable",r),n.classList.toggle("tabulator-unselectable",!r),i.checkRowSelectability(e)&&i.table.options.selectableRows&&i.table.options.selectableRows!="highlight"&&(i.table.options.selectableRowsRangeMode==="click"?n.addEventListener("click",this.handleComplexRowClick.bind(this,e)):(n.addEventListener("click",function(o){(!i.table.modExists("edit")||!i.table.modules.edit.getCurrentCell())&&i.table._clearSelection(),i.selecting||i.toggleRow(e)}),n.addEventListener("mousedown",function(o){if(o.shiftKey)return i.table._clearSelection(),i.selecting=!0,i.selectPrev=[],document.body.addEventListener("mouseup",s),document.body.addEventListener("keyup",s),i.toggleRow(e),!1}),n.addEventListener("mouseenter",function(o){i.selecting&&(i.table._clearSelection(),i.toggleRow(e),i.selectPrev[1]==e&&i.toggleRow(i.selectPrev[0]))}),n.addEventListener("mouseout",function(o){i.selecting&&(i.table._clearSelection(),i.selectPrev.unshift(e))})))}handleComplexRowClick(e,i){if(i.shiftKey){this.table._clearSelection(),this.lastClickedRow=this.lastClickedRow||e;var r=this.table.rowManager.getDisplayRowIndex(this.lastClickedRow),n=this.table.rowManager.getDisplayRowIndex(e),s=r<=n?r:n,o=r>=n?r:n,a=this.table.rowManager.getDisplayRows().slice(0),l=a.splice(s,o-s+1);i.ctrlKey||i.metaKey?(l.forEach(u=>{u!==this.lastClickedRow&&(this.table.options.selectableRows!==!0&&!this.isRowSelected(e)?this.selectedRows.length<this.table.options.selectableRows&&this.toggleRow(u):this.toggleRow(u))}),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.table.options.selectableRows!==!0&&l.length>this.table.options.selectableRows&&(l=l.slice(0,this.table.options.selectableRows)),this.selectRows(l)),this.table._clearSelection()}else i.ctrlKey||i.metaKey?(this.toggleRow(e),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.selectRows(e),this.lastClickedRow=e)}checkRowSelectability(e){return e&&e.type==="row"?this.table.options.selectableRowsCheck.call(this.table,e.getComponent()):!1}toggleRow(e){this.checkRowSelectability(e)&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var i=[],r,n;switch(typeof e){case"undefined":r=this.table.rowManager.rows;break;case"number":r=this.table.rowManager.findRow(e);break;case"string":r=this.table.rowManager.findRow(e),r||(r=this.table.rowManager.getRows(e));break;default:r=e;break}Array.isArray(r)?r.length&&(r.forEach(s=>{n=this._selectRow(s,!0,!0),n&&i.push(n)}),this._rowSelectionChanged(!1,i)):r&&this._selectRow(r,!1,!0)}_selectRow(e,i,r){if(!isNaN(this.table.options.selectableRows)&&this.table.options.selectableRows!==!0&&!r&&this.selectedRows.length>=this.table.options.selectableRows)if(this.table.options.selectableRowsRollingSelection)this._deselectRow(this.selectedRows[0]);else return!1;var n=this.table.rowManager.findRow(e);if(n){if(this.selectedRows.indexOf(n)==-1)return n.getElement().classList.add("tabulator-selected"),n.modules.select||(n.modules.select={}),n.modules.select.selected=!0,n.modules.select.checkboxEl&&(n.modules.select.checkboxEl.checked=!0),this.selectedRows.push(n),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(n,!0),this.dispatchExternal("rowSelected",n.getComponent()),this._rowSelectionChanged(i,n),n}else i||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return this.selectedRows.indexOf(e)!==-1}deselectRows(e,i){var r=[],n,s;switch(typeof e){case"undefined":n=Object.assign([],this.selectedRows);break;case"number":n=this.table.rowManager.findRow(e);break;case"string":n=this.table.rowManager.findRow(e),n||(n=this.table.rowManager.getRows(e));break;default:n=e;break}Array.isArray(n)?n.length&&(n.forEach(o=>{s=this._deselectRow(o,!0,!0),s&&r.push(s)}),this._rowSelectionChanged(i,[],r)):n&&this._deselectRow(n,i,!0)}_deselectRow(e,i){var r=this,n=r.table.rowManager.findRow(e),s,o;if(n){if(s=r.selectedRows.findIndex(function(a){return a==n}),s>-1)return o=n.getElement(),o&&o.classList.remove("tabulator-selected"),n.modules.select||(n.modules.select={}),n.modules.select.selected=!1,n.modules.select.checkboxEl&&(n.modules.select.checkboxEl.checked=!1),r.selectedRows.splice(s,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(n,!1),this.dispatchExternal("rowDeselected",n.getComponent()),r._rowSelectionChanged(i,void 0,n),n}else i||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(i){e.push(i.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(i){e.push(i.getComponent())}),e}_rowSelectionChanged(e,i=[],r=[]){this.headerCheckboxElement&&(this.selectedRows.length===0?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||(Array.isArray(i)||(i=[i]),i=i.map(n=>n.getComponent()),Array.isArray(r)||(r=[r]),r=r.map(n=>n.getComponent()),this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows(),i,r))}registerRowSelectCheckbox(e,i){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=i}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,i){var r=this.table.modules.dataTree.getChildren(e,!0,!0);if(i)for(let n of r)this._selectRow(n,!0);else for(let n of r)this._deselectRow(n,!0)}};de(aw,"moduleName","selectRow"),de(aw,"moduleExtensions",MDe);var qO=class{constructor(e){return this._range=e,new Proxy(this,{get:function(i,r,n){return typeof i[r]<"u"?i[r]:i._range.table.componentFunctionBinder.handle("range",i._range,r)}})}getElement(){return this._range.element}getData(){return this._range.getData()}getCells(){return this._range.getCells(!0,!0)}getStructuredCells(){return this._range.getStructuredCells()}getRows(){return this._range.getRows().map(e=>e.getComponent())}getColumns(){return this._range.getColumns().map(e=>e.getComponent())}getBounds(){return this._range.getBounds()}getTopEdge(){return this._range.top}getBottomEdge(){return this._range.bottom}getLeftEdge(){return this._range.left}getRightEdge(){return this._range.right}setBounds(e,i){this._range.destroyedGuard("setBounds")&&this._range.setBounds(e&&e._cell,i&&i._cell)}setStartBound(e){this._range.destroyedGuard("setStartBound")&&(this._range.setEndBound(e&&e._cell),this._range.rangeManager.layoutElement())}setEndBound(e){this._range.destroyedGuard("setEndBound")&&(this._range.setEndBound(e&&e._cell),this._range.rangeManager.layoutElement())}clearValues(){this._range.destroyedGuard("clearValues")&&this._range.clearValues()}remove(){this._range.destroyedGuard("remove")&&this._range.destroy(!0)}},GO=class extends Ar{constructor(e,i,r,n){super(e),this.rangeManager=i,this.element=null,this.initialized=!1,this.initializing={start:!1,end:!1},this.destroyed=!1,this.top=0,this.bottom=0,this.left=0,this.right=0,this.table=e,this.start={row:0,col:0},this.end={row:0,col:0},this.rangeManager.rowHeader&&(this.left=1,this.right=1,this.start.col=1,this.end.col=1),this.initElement(),setTimeout(()=>{this.initBounds(r,n)})}initElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-range")}initBounds(e,i){this._updateMinMax(),e&&this.setBounds(e,i||e)}setStart(e,i){(this.start.row!==e||this.start.col!==i)&&(this.start.row=e,this.start.col=i,this.initializing.start=!0,this._updateMinMax())}setEnd(e,i){(this.end.row!==e||this.end.col!==i)&&(this.end.row=e,this.end.col=i,this.initializing.end=!0,this._updateMinMax())}setBounds(e,i,r){e&&this.setStartBound(e),this.setEndBound(i||e),this.rangeManager.layoutElement(r)}setStartBound(e){var i,r;e.type==="column"?this.rangeManager.columnSelection&&this.setStart(0,e.getPosition()-1):(i=e.row.position-1,r=e.column.getPosition()-1,e.column===this.rangeManager.rowHeader?this.setStart(i,1):this.setStart(i,r))}setEndBound(e){var i=this._getTableRows().length,r,n,s;e.type==="column"?this.rangeManager.columnSelection&&(this.rangeManager.selecting==="column"?this.setEnd(i-1,e.getPosition()-1):this.rangeManager.selecting==="cell"&&this.setEnd(0,e.getPosition()-1)):(r=e.row.position-1,n=e.column.getPosition()-1,s=e.column===this.rangeManager.rowHeader,this.rangeManager.selecting==="row"?this.setEnd(r,this._getTableColumns().length-1):this.rangeManager.selecting!=="row"&&s?this.setEnd(r,0):this.rangeManager.selecting==="column"?this.setEnd(i-1,n):this.setEnd(r,n))}_updateMinMax(){this.top=Math.min(this.start.row,this.end.row),this.bottom=Math.max(this.start.row,this.end.row),this.left=Math.min(this.start.col,this.end.col),this.right=Math.max(this.start.col,this.end.col),this.initialized?this.dispatchExternal("rangeChanged",this.getComponent()):this.initializing.start&&this.initializing.end&&(this.initialized=!0,this.dispatchExternal("rangeAdded",this.getComponent()))}_getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}_getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}layout(){var e=this.table.rowManager.renderer.vDomTop,i=this.table.rowManager.renderer.vDomBottom,r=this.table.columnManager.renderer.leftCol,n=this.table.columnManager.renderer.rightCol,s,o,a,l,u,c,h,d,p,f;this.table.options.renderHorizontal==="virtual"&&this.rangeManager.rowHeader&&(n+=1),e==null&&(e=0),i==null&&(i=1/0),r==null&&(r=0),n==null&&(n=1/0),this.overlaps(r,e,n,i)&&(s=Math.max(this.top,e),o=Math.min(this.bottom,i),a=Math.max(this.left,r),l=Math.min(this.right,n),u=this.rangeManager.getCell(s,a),c=this.rangeManager.getCell(o,l),h=u.getElement(),d=c.getElement(),p=u.row.getElement(),f=c.row.getElement(),this.element.classList.add("tabulator-range-active"),this.table.rtl?(this.element.style.right=p.offsetWidth-h.offsetLeft-h.offsetWidth+"px",this.element.style.width=h.offsetLeft+h.offsetWidth-d.offsetLeft+"px"):(this.element.style.left=p.offsetLeft+h.offsetLeft+"px",this.element.style.width=d.offsetLeft+d.offsetWidth-h.offsetLeft+"px"),this.element.style.top=p.offsetTop+"px",this.element.style.height=f.offsetTop+f.offsetHeight-p.offsetTop+"px")}atTopLeft(e){return e.row.position-1===this.top&&e.column.getPosition()-1===this.left}atBottomRight(e){return e.row.position-1===this.bottom&&e.column.getPosition()-1===this.right}occupies(e){return this.occupiesRow(e.row)&&this.occupiesColumn(e.column)}occupiesRow(e){return this.top<=e.position-1&&e.position-1<=this.bottom}occupiesColumn(e){return this.left<=e.getPosition()-1&&e.getPosition()-1<=this.right}overlaps(e,i,r,n){return!(this.left>r||e>this.right||this.top>n||i>this.bottom)}getData(){var e=[],i=this.getRows(),r=this.getColumns();return i.forEach(n=>{var s=n.getData(),o={};r.forEach(a=>{o[a.field]=s[a.field]}),e.push(o)}),e}getCells(e,i){var r=[],n=this.getRows(),s=this.getColumns();return e?r=n.map(o=>{var a=[];return o.getCells().forEach(l=>{s.includes(l.column)&&a.push(i?l.getComponent():l)}),a}):n.forEach(o=>{o.getCells().forEach(a=>{s.includes(a.column)&&r.push(i?a.getComponent():a)})}),r}getStructuredCells(){return this.getCells(!0,!0)}getRows(){return this._getTableRows().slice(this.top,this.bottom+1)}getColumns(){return this._getTableColumns().slice(this.left,this.right+1)}clearValues(){var e=this.getCells(),i=this.table.options.selectableRangeClearCellsValue;this.table.blockRedraw(),e.forEach(r=>{r.setValue(i)}),this.table.restoreRedraw()}getBounds(e){var i=this.getCells(!1,e),r={start:null,end:null};return i.length?(r.start=i[0],r.end=i[i.length-1]):console.warn("No bounds defined on range"),r}getComponent(){return this.component||(this.component=new qO(this)),this.component}destroy(e){this.destroyed=!0,this.element.remove(),e&&this.rangeManager.rangeRemoved(this),this.initialized&&this.dispatchExternal("rangeRemoved",this.getComponent())}destroyedGuard(e){return this.destroyed&&console.warn("You cannot call the "+e+" function on a destroyed range"),!this.destroyed}},FDe={rangeJumpUp:["ctrl + 38","meta + 38"],rangeJumpDown:["ctrl + 40","meta + 40"],rangeJumpLeft:["ctrl + 37","meta + 37"],rangeJumpRight:["ctrl + 39","meta + 39"],rangeExpandUp:"shift + 38",rangeExpandDown:"shift + 40",rangeExpandLeft:"shift + 37",rangeExpandRight:"shift + 39",rangeExpandJumpUp:["ctrl + shift + 38","meta + shift + 38"],rangeExpandJumpDown:["ctrl + shift + 40","meta + shift + 40"],rangeExpandJumpLeft:["ctrl + shift + 37","meta + shift + 37"],rangeExpandJumpRight:["ctrl + shift + 39","meta + shift + 39"]},LDe={rangeJumpLeft:function(t){this.dispatch("keybinding-nav-range",t,"left",!0,!1)},rangeJumpRight:function(t){this.dispatch("keybinding-nav-range",t,"right",!0,!1)},rangeJumpUp:function(t){this.dispatch("keybinding-nav-range",t,"up",!0,!1)},rangeJumpDown:function(t){this.dispatch("keybinding-nav-range",t,"down",!0,!1)},rangeExpandLeft:function(t){this.dispatch("keybinding-nav-range",t,"left",!1,!0)},rangeExpandRight:function(t){this.dispatch("keybinding-nav-range",t,"right",!1,!0)},rangeExpandUp:function(t){this.dispatch("keybinding-nav-range",t,"up",!1,!0)},rangeExpandDown:function(t){this.dispatch("keybinding-nav-range",t,"down",!1,!0)},rangeExpandJumpLeft:function(t){this.dispatch("keybinding-nav-range",t,"left",!0,!0)},rangeExpandJumpRight:function(t){this.dispatch("keybinding-nav-range",t,"right",!0,!0)},rangeExpandJumpUp:function(t){this.dispatch("keybinding-nav-range",t,"up",!0,!0)},rangeExpandJumpDown:function(t){this.dispatch("keybinding-nav-range",t,"down",!0,!0)}},ODe={range:function(t){var e=[],i=this.table.modules.selectRange.activeRange,r=!1,n,s,o,a,l;return l=t.length,i&&(n=i.getBounds(),s=n.start,n.start===n.end&&(r=!0),s&&(e=this.table.rowManager.activeRows.slice(),o=e.indexOf(s.row),r?a=t.length:a=e.indexOf(n.end.row)-o+1,o>-1&&(this.table.blockRedraw(),e=e.slice(o,o+a),e.forEach((u,c)=>{u.updateData(t[c%l])}),this.table.restoreRedraw()))),e}},PDe={range:function(t){var e=[],i=[],r=this.table.modules.selectRange.activeRange,n=!1,s,o,a,l,u;return r&&(s=r.getBounds(),o=s.start,s.start===s.end&&(n=!0),o&&(t=t.split(`
`),t.forEach(function(c){e.push(c.split("	"))}),e.length&&(l=this.table.columnManager.getVisibleColumnsByIndex(),u=l.indexOf(o.column),u>-1)))?(n?a=e[0].length:a=l.indexOf(s.end.column)-u+1,l=l.slice(u,u+a),e.forEach(c=>{var h={},d=c.length;l.forEach(function(p,f){h[p.field]=c[f%d]}),i.push(h)}),i):!1}},zDe={range:function(){var t=this.modules.selectRange.selectedColumns();return this.columnManager.rowHeader&&t.unshift(this.columnManager.rowHeader),t}},IDe={range:function(){return this.modules.selectRange.selectedRows()}},BDe={keybindings:{bindings:FDe,actions:LDe},clipboard:{pasteActions:ODe,pasteParsers:PDe},export:{columnLookups:zDe,rowLookups:IDe}},r1=class extends bt{constructor(e){super(e),this.selecting="cell",this.mousedown=!1,this.ranges=[],this.overlay=null,this.rowHeader=null,this.layoutChangeTimeout=null,this.columnSelection=!1,this.rowSelection=!1,this.maxRanges=0,this.activeRange=!1,this.blockKeydown=!1,this.keyDownEvent=this._handleKeyDown.bind(this),this.mouseUpEvent=this._handleMouseUp.bind(this),this.registerTableOption("selectableRange",!1),this.registerTableOption("selectableRangeColumns",!1),this.registerTableOption("selectableRangeRows",!1),this.registerTableOption("selectableRangeClearCells",!1),this.registerTableOption("selectableRangeClearCellsValue",void 0),this.registerTableOption("selectableRangeAutoFocus",!0),this.registerTableFunction("getRangesData",this.getRangesData.bind(this)),this.registerTableFunction("getRanges",this.getRanges.bind(this)),this.registerTableFunction("addRange",this.addRangeFromComponent.bind(this)),this.registerComponentFunction("cell","getRanges",this.cellGetRanges.bind(this)),this.registerComponentFunction("row","getRanges",this.rowGetRanges.bind(this)),this.registerComponentFunction("column","getRanges",this.colGetRanges.bind(this))}initialize(){this.options("selectableRange")&&(this.options("selectableRows")?console.warn("SelectRange functionality cannot be used in conjunction with row selection"):(this.maxRanges=this.options("selectableRange"),this.initializeTable(),this.initializeWatchers()),this.options("columns").findIndex(e=>e.frozen)>0&&console.warn("Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior."),this.options("columns").filter(e=>e.frozen)>1&&console.warn("Having multiple frozen columns with selectRange option may result in unpredictable behavior."))}initializeTable(){this.overlay=document.createElement("div"),this.overlay.classList.add("tabulator-range-overlay"),this.rangeContainer=document.createElement("div"),this.rangeContainer.classList.add("tabulator-range-container"),this.activeRangeCellElement=document.createElement("div"),this.activeRangeCellElement.classList.add("tabulator-range-cell-active"),this.overlay.appendChild(this.rangeContainer),this.overlay.appendChild(this.activeRangeCellElement),this.table.rowManager.element.addEventListener("keydown",this.keyDownEvent),this.resetRanges(),this.table.rowManager.element.appendChild(this.overlay),this.table.columnManager.element.setAttribute("tabindex",0),this.table.element.classList.add("tabulator-ranges")}initializeWatchers(){this.columnSelection=this.options("selectableRangeColumns"),this.rowSelection=this.options("selectableRangeRows"),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-mousedown",this.handleColumnMouseDown.bind(this)),this.subscribe("column-mousemove",this.handleColumnMouseMove.bind(this)),this.subscribe("column-resized",this.handleColumnResized.bind(this)),this.subscribe("column-moving",this.handleColumnMoving.bind(this)),this.subscribe("column-moved",this.handleColumnMoved.bind(this)),this.subscribe("column-width",this.layoutChange.bind(this)),this.subscribe("column-height",this.layoutChange.bind(this)),this.subscribe("column-resized",this.layoutChange.bind(this)),this.subscribe("columns-loaded",this.updateHeaderColumn.bind(this)),this.subscribe("cell-height",this.layoutChange.bind(this)),this.subscribe("cell-rendered",this.renderCell.bind(this)),this.subscribe("cell-mousedown",this.handleCellMouseDown.bind(this)),this.subscribe("cell-mousemove",this.handleCellMouseMove.bind(this)),this.subscribe("cell-click",this.handleCellClick.bind(this)),this.subscribe("cell-editing",this.handleEditingCell.bind(this)),this.subscribe("page-changed",this.redraw.bind(this)),this.subscribe("scroll-vertical",this.layoutChange.bind(this)),this.subscribe("scroll-horizontal",this.layoutChange.bind(this)),this.subscribe("data-destroy",this.tableDestroyed.bind(this)),this.subscribe("data-processed",this.resetRanges.bind(this)),this.subscribe("table-layout",this.layoutElement.bind(this)),this.subscribe("table-redraw",this.redraw.bind(this)),this.subscribe("table-destroy",this.tableDestroyed.bind(this)),this.subscribe("edit-editor-clear",this.finishEditingCell.bind(this)),this.subscribe("edit-blur",this.restoreFocus.bind(this)),this.subscribe("keybinding-nav-prev",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-next",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-left",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-right",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-up",this.keyNavigate.bind(this,"up")),this.subscribe("keybinding-nav-down",this.keyNavigate.bind(this,"down")),this.subscribe("keybinding-nav-range",this.keyNavigateRange.bind(this))}initializeColumn(e){this.columnSelection&&e.definition.headerSort&&this.options("headerSortClickElement")!=="icon"&&console.warn("Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'."),e.modules.edit}updateHeaderColumn(){var e;this.rowSelection&&(this.rowHeader=this.table.columnManager.getVisibleColumnsByIndex()[0],this.rowHeader&&(this.rowHeader.definition.cssClass=this.rowHeader.definition.cssClass+" tabulator-range-row-header",this.rowHeader.definition.headerSort&&console.warn("Using column headerSort with selectableRangeRows option may result in unpredictable behavior"),this.rowHeader.definition.editor&&console.warn("Using column editor with selectableRangeRows option may result in unpredictable behavior"))),this.table.modules.frozenColumns&&this.table.modules.frozenColumns.active&&(e=this.table.modules.frozenColumns.getFrozenColumns(),(e.length>1||e.length===1&&e[0]!==this.rowHeader)&&console.warn("Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior"))}getRanges(){return this.ranges.map(e=>e.getComponent())}getRangesData(){return this.ranges.map(e=>e.getData())}addRangeFromComponent(e,i){return e=e?e._cell:null,i=i?i._cell:null,this.addRange(e,i)}cellGetRanges(e){var i=[];return e.column===this.rowHeader?i=this.ranges.filter(r=>r.occupiesRow(e.row)):i=this.ranges.filter(r=>r.occupies(e)),i.map(r=>r.getComponent())}rowGetRanges(e){var i=this.ranges.filter(r=>r.occupiesRow(e));return i.map(r=>r.getComponent())}colGetRanges(e){var i=this.ranges.filter(r=>r.occupiesColumn(e));return i.map(r=>r.getComponent())}_handleMouseUp(e){this.mousedown=!1,document.removeEventListener("mouseup",this.mouseUpEvent)}_handleKeyDown(e){if(!this.blockKeydown&&(!this.table.modules.edit||this.table.modules.edit&&!this.table.modules.edit.currentCell)){if(e.key==="Enter"){if(this.table.modules.edit&&this.table.modules.edit.currentCell)return;this.table.modules.edit.editCell(this.getActiveCell()),e.preventDefault()}(e.key==="Backspace"||e.key==="Delete")&&this.options("selectableRangeClearCells")&&this.activeRange&&this.activeRange.clearValues()}}initializeFocus(e){var i;this.restoreFocus();try{document.selection?(i=document.body.createTextRange(),i.moveToElementText(e.getElement()),i.select()):window.getSelection&&(i=document.createRange(),i.selectNode(e.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(i))}catch{}}restoreFocus(e){return this.table.rowManager.element.focus(),!0}handleColumnResized(e){var i;this.selecting!=="column"&&this.selecting!=="all"||(i=this.ranges.some(r=>r.occupiesColumn(e)),i&&this.ranges.forEach(r=>{var n=r.getColumns(!0);n.forEach(s=>{s!==e&&s.setWidth(e.width)})}))}handleColumnMoving(e,i){this.resetRanges().setBounds(i),this.overlay.style.visibility="hidden"}handleColumnMoved(e,i,r){this.activeRange.setBounds(e),this.layoutElement()}handleColumnMouseDown(e,i){e.button===2&&(this.selecting==="column"||this.selecting==="all")&&this.activeRange.occupiesColumn(i)||this.table.options.movableColumns&&this.selecting==="column"&&this.activeRange.occupiesColumn(i)||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,i))}handleColumnMouseMove(e,i){i===this.rowHeader||!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,i,!0)}renderCell(e){var i=e.getElement(),r=this.ranges.findIndex(n=>n.occupies(e));i.classList.toggle("tabulator-range-selected",r!==-1),i.classList.toggle("tabulator-range-only-cell-selected",this.ranges.length===1&&this.ranges[0].atTopLeft(e)&&this.ranges[0].atBottomRight(e)),i.dataset.range=r}handleCellMouseDown(e,i){e.button===2&&(this.activeRange.occupies(i)||(this.selecting==="row"||this.selecting==="all")&&this.activeRange.occupiesRow(i.row))||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,i))}handleCellMouseMove(e,i){!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,i,!0)}handleCellClick(e,i){this.initializeFocus(i)}handleEditingCell(e){this.activeRange&&this.activeRange.setBounds(e)}finishEditingCell(){this.blockKeydown=!0,this.table.rowManager.element.focus(),setTimeout(()=>{this.blockKeydown=!1},10)}keyNavigate(e,i){this.navigate(!1,!1,e),i.preventDefault()}keyNavigateRange(e,i,r,n){this.navigate(r,n,i),e.preventDefault()}navigate(e,i,r){var n=!1,s,o,a,l,u,c,h,d,p,f,m;if(this.table.modules.edit&&this.table.modules.edit.currentCell)return!1;if(this.ranges.length>1&&(this.ranges=this.ranges.filter(g=>g===this.activeRange?(g.setEnd(g.start.row,g.start.col),!0):(g.destroy(),!1))),s=this.activeRange,a={top:s.top,bottom:s.bottom,left:s.left,right:s.right},o=i?s.end:s.start,l=o.row,u=o.col,e)switch(r){case"left":u=this.findJumpCellLeft(s.start.row,o.col);break;case"right":u=this.findJumpCellRight(s.start.row,o.col);break;case"up":l=this.findJumpCellUp(o.row,s.start.col);break;case"down":l=this.findJumpCellDown(o.row,s.start.col);break}else{if(i&&(this.selecting==="row"&&(r==="left"||r==="right")||this.selecting==="column"&&(r==="up"||r==="down")))return;switch(r){case"left":u=Math.max(u-1,0);break;case"right":u=Math.min(u+1,this.getTableColumns().length-1);break;case"up":l=Math.max(l-1,0);break;case"down":l=Math.min(l+1,this.getTableRows().length-1);break}}if(this.rowHeader&&u===0&&(u=1),i||s.setStart(l,u),s.setEnd(l,u),i||(this.selecting="cell"),n=a.top!==s.top||a.bottom!==s.bottom||a.left!==s.left||a.right!==s.right,n)return c=this.getRowByRangePos(s.end.row),h=this.getColumnByRangePos(s.end.col),d=c.getElement().getBoundingClientRect(),f=h.getElement().getBoundingClientRect(),p=this.table.rowManager.getElement().getBoundingClientRect(),m=this.table.columnManager.getElement().getBoundingClientRect(),d.top>=p.top&&d.bottom<=p.bottom||(c.getElement().parentNode&&h.getElement().parentNode?this.autoScroll(s,c.getElement(),h.getElement()):c.getComponent().scrollTo(void 0,!1)),f.left>=m.left+this.getRowHeaderWidth()&&f.right<=m.right||(c.getElement().parentNode&&h.getElement().parentNode?this.autoScroll(s,c.getElement(),h.getElement()):h.getComponent().scrollTo(void 0,!1)),this.layoutElement(),!0}rangeRemoved(e){this.ranges=this.ranges.filter(i=>i!==e),this.activeRange===e&&(this.ranges.length?this.activeRange=this.ranges[this.ranges.length-1]:this.addRange()),this.layoutElement()}findJumpRow(e,i,r,n,s){return r&&(i=i.reverse()),this.findJumpItem(n,s,i,function(o){return o.getData()[e.getField()]})}findJumpCol(e,i,r,n,s){return r&&(i=i.reverse()),this.findJumpItem(n,s,i,function(o){return e.getData()[o.getField()]})}findJumpItem(e,i,r,n){var s;for(let o of r){let a=n(o);if(e){if(s=o,a)break}else if(i){if(s=o,a)break}else if(a)s=o;else break}return s}findJumpCellLeft(e,i){var r=this.getRowByRangePos(e),n=this.getTableColumns(),s=this.isEmpty(r.getData()[n[i].getField()]),o=n[i-1]?this.isEmpty(r.getData()[n[i-1].getField()]):!1,a=this.rowHeader?n.slice(1,i):n.slice(0,i),l=this.findJumpCol(r,a,!0,s,o);return l?l.getPosition()-1:i}findJumpCellRight(e,i){var r=this.getRowByRangePos(e),n=this.getTableColumns(),s=this.isEmpty(r.getData()[n[i].getField()]),o=n[i+1]?this.isEmpty(r.getData()[n[i+1].getField()]):!1,a=this.findJumpCol(r,n.slice(i+1,n.length),!1,s,o);return a?a.getPosition()-1:i}findJumpCellUp(e,i){var r=this.getColumnByRangePos(i),n=this.getTableRows(),s=this.isEmpty(n[e].getData()[r.getField()]),o=n[e-1]?this.isEmpty(n[e-1].getData()[r.getField()]):!1,a=this.findJumpRow(r,n.slice(0,e),!0,s,o);return a?a.position-1:e}findJumpCellDown(e,i){var r=this.getColumnByRangePos(i),n=this.getTableRows(),s=this.isEmpty(n[e].getData()[r.getField()]),o=n[e+1]?this.isEmpty(n[e+1].getData()[r.getField()]):!1,a=this.findJumpRow(r,n.slice(e+1,n.length),!1,s,o);return a?a.position-1:e}newSelection(e,i){var r;if(i.type==="column"){if(!this.columnSelection)return;if(i===this.rowHeader){r=this.resetRanges(),this.selecting="all";var n,s=this.getCell(-1,-1);this.rowHeader?n=this.getCell(0,1):n=this.getCell(0,0),r.setBounds(n,s);return}else this.selecting="column"}else i.column===this.rowHeader?this.selecting="row":this.selecting="cell";e.shiftKey?this.activeRange.setBounds(!1,i):e.ctrlKey?this.addRange().setBounds(i):this.resetRanges().setBounds(i)}autoScroll(e,i,r){var n=this.table.rowManager.element,s,o,a,l;typeof i>"u"&&(i=this.getRowByRangePos(e.end.row).getElement()),typeof r>"u"&&(r=this.getColumnByRangePos(e.end.col).getElement()),s={left:r.offsetLeft,right:r.offsetLeft+r.offsetWidth,top:i.offsetTop,bottom:i.offsetTop+i.offsetHeight},o={left:n.scrollLeft+this.getRowHeaderWidth(),right:Math.ceil(n.scrollLeft+n.clientWidth),top:n.scrollTop,bottom:n.scrollTop+n.offsetHeight-this.table.rowManager.scrollbarWidth},a=o.left<s.left&&s.left<o.right&&o.left<s.right&&s.right<o.right,l=o.top<s.top&&s.top<o.bottom&&o.top<s.bottom&&s.bottom<o.bottom,a||(s.left<o.left?n.scrollLeft=s.left-this.getRowHeaderWidth():s.right>o.right&&(n.scrollLeft=Math.min(s.right-n.clientWidth,s.left-this.getRowHeaderWidth()))),l||(s.top<o.top?n.scrollTop=s.top:s.bottom>o.bottom&&(n.scrollTop=s.bottom-n.clientHeight))}layoutChange(){this.overlay.style.visibility="hidden",clearTimeout(this.layoutChangeTimeout),this.layoutChangeTimeout=setTimeout(this.layoutRanges.bind(this),200)}redraw(e){e&&(this.selecting="cell",this.resetRanges(),this.layoutElement())}layoutElement(e){var i;e?i=this.table.rowManager.getVisibleRows(!0):i=this.table.rowManager.getRows(),i.forEach(r=>{r.type==="row"&&(this.layoutRow(r),r.cells.forEach(n=>this.renderCell(n)))}),this.getTableColumns().forEach(r=>{this.layoutColumn(r)}),this.layoutRanges()}layoutRow(e){var i=e.getElement(),r=!1,n=this.ranges.some(s=>s.occupiesRow(e));this.selecting==="row"?r=n:this.selecting==="all"&&(r=!0),i.classList.toggle("tabulator-range-selected",r),i.classList.toggle("tabulator-range-highlight",n)}layoutColumn(e){var i=e.getElement(),r=!1,n=this.ranges.some(s=>s.occupiesColumn(e));this.selecting==="column"?r=n:this.selecting==="all"&&(r=!0),i.classList.toggle("tabulator-range-selected",r),i.classList.toggle("tabulator-range-highlight",n)}layoutRanges(){var e,i,r;this.table.initialized&&(e=this.getActiveCell(),e&&(i=e.getElement(),r=e.row.getElement(),this.table.rtl?this.activeRangeCellElement.style.right=r.offsetWidth-i.offsetLeft-i.offsetWidth+"px":this.activeRangeCellElement.style.left=r.offsetLeft+i.offsetLeft+"px",this.activeRangeCellElement.style.top=r.offsetTop+"px",this.activeRangeCellElement.style.width=i.offsetWidth+"px",this.activeRangeCellElement.style.height=r.offsetHeight+"px",this.ranges.forEach(n=>n.layout()),this.overlay.style.visibility="visible"))}getCell(e,i){var r;return i<0&&(i=this.getTableColumns().length+i,i<0)?null:(e<0&&(e=this.getTableRows().length+e),r=this.table.rowManager.getRowFromPosition(e+1),r?r.getCells(!1,!0).filter(n=>n.column.visible)[i]:null)}getActiveCell(){return this.getCell(this.activeRange.start.row,this.activeRange.start.col)}getRowByRangePos(e){return this.getTableRows()[e]}getColumnByRangePos(e){return this.getTableColumns()[e]}getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}addRange(e,i){var r;return this.maxRanges!==!0&&this.ranges.length>=this.maxRanges&&this.ranges.shift().destroy(),r=new GO(this.table,this,e,i),this.activeRange=r,this.ranges.push(r),this.rangeContainer.appendChild(r.element),r}resetRanges(){var e,i,r;return this.ranges.forEach(n=>n.destroy()),this.ranges=[],e=this.addRange(),this.table.rowManager.activeRows.length&&(r=this.table.rowManager.activeRows[0].cells.filter(n=>n.column.visible),i=r[this.rowHeader?1:0],i&&(e.setBounds(i),this.options("selectableRangeAutoFocus")&&this.initializeFocus(i))),e}tableDestroyed(){document.removeEventListener("mouseup",this.mouseUpEvent),this.table.rowManager.element.removeEventListener("keydown",this.keyDownEvent)}selectedRows(e){return e?this.activeRange.getRows().map(i=>i.getComponent()):this.activeRange.getRows()}selectedColumns(e){return e?this.activeRange.getColumns().map(i=>i.getComponent()):this.activeRange.getColumns()}getRowHeaderWidth(){return this.rowHeader?this.rowHeader.getElement().offsetWidth:0}isEmpty(e){return e==null||e===""}};de(r1,"moduleName","selectRange"),de(r1,"moduleInitOrder",1),de(r1,"moduleExtensions",BDe);function NDe(t,e,i,r,n,s,o){var a=o.alignEmptyValues,l=o.decimalSeparator,u=o.thousandSeparator,c=0;if(t=String(t),e=String(e),u&&(t=t.split(u).join(""),e=e.split(u).join("")),l&&(t=t.split(l).join("."),e=e.split(l).join(".")),t=parseFloat(t),e=parseFloat(e),isNaN(t))c=isNaN(e)?0:-1;else if(isNaN(e))c=1;else return t-e;return(a==="top"&&s==="desc"||a==="bottom"&&s==="asc")&&(c*=-1),c}function $De(t,e,i,r,n,s,o){var a=o.alignEmptyValues,l=0,u;if(!t)l=e?-1:0;else if(!e)l=1;else{switch(typeof o.locale){case"boolean":o.locale&&(u=this.langLocale());break;case"string":u=o.locale;break}return String(t).toLowerCase().localeCompare(String(e).toLowerCase(),u)}return(a==="top"&&s==="desc"||a==="bottom"&&s==="asc")&&(l*=-1),l}function vP(t,e,i,r,n,s,o){var a=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),l=o.format||"dd/MM/yyyy HH:mm:ss",u=o.alignEmptyValues,c=0;if(typeof a<"u"){if(a.isDateTime(t)||(l==="iso"?t=a.fromISO(String(t)):t=a.fromFormat(String(t),l)),a.isDateTime(e)||(l==="iso"?e=a.fromISO(String(e)):e=a.fromFormat(String(e),l)),!t.isValid)c=e.isValid?-1:0;else if(!e.isValid)c=1;else return t-e;return(u==="top"&&s==="desc"||u==="bottom"&&s==="asc")&&(c*=-1),c}else console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}function HDe(t,e,i,r,n,s,o){return o.format||(o.format="dd/MM/yyyy"),vP.call(this,t,e,i,r,n,s,o)}function UDe(t,e,i,r,n,s,o){return o.format||(o.format="HH:mm"),vP.call(this,t,e,i,r,n,s,o)}function WDe(t,e,i,r,n,s,o){var a=t===!0||t==="true"||t==="True"||t===1?1:0,l=e===!0||e==="true"||e==="True"||e===1?1:0;return a-l}function VDe(t,e,i,r,n,s,o){var a=o.type||"length",l=o.alignEmptyValues,u=0,c=this.table,h;o.valueMap&&(typeof o.valueMap=="string"?h=function(p){return p.map(f=>Qt.retrieveNestedData(c.options.nestedFieldSeparator,o.valueMap,f))}:h=o.valueMap);function d(p){var f;switch(h&&(p=h(p)),a){case"length":f=p.length;break;case"sum":f=p.reduce(function(m,g){return m+g});break;case"max":f=Math.max.apply(null,p);break;case"min":f=Math.min.apply(null,p);break;case"avg":f=p.reduce(function(m,g){return m+g})/p.length;break;case"string":f=p.join("");break}return f}if(!Array.isArray(t))u=Array.isArray(e)?-1:0;else if(!Array.isArray(e))u=1;else return a==="string"?String(d(t)).toLowerCase().localeCompare(String(d(e)).toLowerCase()):d(e)-d(t);return(l==="top"&&s==="desc"||l==="bottom"&&s==="asc")&&(u*=-1),u}function jDe(t,e,i,r,n,s,o){var a=typeof t>"u"?0:1,l=typeof e>"u"?0:1;return a-l}function qDe(t,e,i,r,n,s,o){var a,l,u,c,h=0,d,p=/(\d+)|(\D+)/g,f=/\d/,m=o.alignEmptyValues,g=0;if(!t&&t!==0)g=!e&&e!==0?0:-1;else if(!e&&e!==0)g=1;else{if(isFinite(t)&&isFinite(e))return t-e;if(a=String(t).toLowerCase(),l=String(e).toLowerCase(),a===l)return 0;if(!(f.test(a)&&f.test(l)))return a>l?1:-1;for(a=a.match(p),l=l.match(p),d=a.length>l.length?l.length:a.length;h<d;)if(u=a[h],c=l[h++],u!==c)return isFinite(u)&&isFinite(c)?(u.charAt(0)==="0"&&(u="."+u),c.charAt(0)==="0"&&(c="."+c),u-c):u>c?1:-1;return a.length>l.length}return(m==="top"&&s==="desc"||m==="bottom"&&s==="asc")&&(g*=-1),g}var GDe={number:NDe,string:$De,date:HDe,time:UDe,datetime:vP,boolean:WDe,array:VDe,exists:jDe,alphanum:qDe},Bp=class Bp extends bt{constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerTableOption("headerSortClickElement","header"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),this.table.options.sortMode==="remote"&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,i,r,n){var s=this.getSort();return s.forEach(o=>{delete o.column}),n.sort=s,n}userSetSort(e,i){this.setSort(e,i),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var i=!1,r,n;switch(typeof e.definition.sorter){case"string":Bp.sorters[e.definition.sorter]?i=Bp.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":i=e.definition.sorter;break}if(e.modules.sort={sorter:i,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},e.definition.headerSort!==!1){switch(r=e.getElement(),r.classList.add("tabulator-sortable"),n=document.createElement("div"),n.classList.add("tabulator-col-sorter"),this.table.options.headerSortClickElement){case"icon":n.classList.add("tabulator-col-sorter-element");break;case"header":r.classList.add("tabulator-col-sorter-element");break;default:r.classList.add("tabulator-col-sorter-element");break}switch(this.table.options.headerSortElement){case"function":break;case"object":n.appendChild(this.table.options.headerSortElement);break;default:n.innerHTML=this.table.options.headerSortElement}e.titleHolderElement.appendChild(n),e.modules.sort.element=n,this.setColumnHeaderSortIcon(e,"none"),this.table.options.headerSortClickElement==="icon"&&n.addEventListener("mousedown",s=>{s.stopPropagation()}),(this.table.options.headerSortClickElement==="icon"?n:r).addEventListener("click",s=>{var o="",a=[],l=!1;if(e.modules.sort){if(e.modules.sort.tristate)e.modules.sort.dir=="none"?o=e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?o=e.modules.sort.dir=="asc"?"desc":"asc":o="none";else switch(e.modules.sort.dir){case"asc":o="desc";break;case"desc":o="asc";break;default:o=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(s.shiftKey||s.ctrlKey)?(a=this.getSort(),l=a.findIndex(u=>u.field===e.getField()),l>-1?(a[l].dir=o,l=a.splice(l,1)[0],o!="none"&&a.push(l)):o!="none"&&a.push({column:e,dir:o}),this.setSort(a)):o=="none"?this.clear():this.setSort(e,o),this.refreshSort()}})}}refreshSort(){this.table.options.sortMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0)}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var e=this,i=[];return e.sortList.forEach(function(r){r.column&&i.push({column:r.column.getComponent(),field:r.column.getField(),dir:r.dir})}),i}setSort(e,i){var r=this,n=[];Array.isArray(e)||(e=[{column:e,dir:i}]),e.forEach(function(s){var o;o=r.table.columnManager.findColumn(s.column),o?(s.column=o,n.push(s),r.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",s.column)}),r.sortList=n,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var i=this.table.rowManager.activeRows[0],r="string",n,s;if(i&&(i=i.getData(),n=e.getField(),n))switch(s=e.getFieldValue(i),typeof s){case"undefined":r="string";break;case"boolean":r="boolean";break;default:!isNaN(s)&&s!==""?r="number":s.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(r="alphanum");break}return Bp.sorters[r]}sort(e,i){var r=this,n=this.table.options.sortOrderReverse?r.sortList.slice().reverse():r.sortList,s=[],o=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",r.getSort()),i||r.clearColumnHeaders(),this.table.options.sortMode!=="remote"?(n.forEach(function(a,l){var u;a.column&&(u=a.column.modules.sort,u&&(u.sorter||(u.sorter=r.findSorter(a.column)),a.params=typeof u.params=="function"?u.params(a.column.getComponent(),a.dir):u.params,s.push(a)),i||r.setColumnHeader(a.column,a.dir))}),s.length&&r._sortItems(e,s)):i||n.forEach(function(a,l){r.setColumnHeader(a.column,a.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(a=>{o.push(a.getComponent())}),this.dispatchExternal("dataSorted",r.getSort(),o)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(e=>{e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"),this.setColumnHeaderSortIcon(e,"none"))})}setColumnHeader(e,i){e.modules.sort.dir=i,e.getElement().setAttribute("aria-sort",i==="asc"?"ascending":"descending"),this.setColumnHeaderSortIcon(e,i)}setColumnHeaderSortIcon(e,i){var r=e.modules.sort.element,n;if(e.definition.headerSort&&typeof this.table.options.headerSortElement=="function"){for(;r.firstChild;)r.removeChild(r.firstChild);n=this.table.options.headerSortElement.call(this.table,e.getComponent(),i),typeof n=="object"?r.appendChild(n):r.innerHTML=n}}_sortItems(e,i){var r=i.length-1;e.sort((n,s)=>{for(var o,a=r;a>=0;a--){let l=i[a];if(o=this._sortRow(n,s,l.column,l.dir,l.params),o!==0)break}return o})}_sortRow(e,i,r,n,s){var o,a,l=n=="asc"?e:i,u=n=="asc"?i:e;return e=r.getFieldValue(l.getData()),i=r.getFieldValue(u.getData()),e=typeof e<"u"?e:"",i=typeof i<"u"?i:"",o=l.getComponent(),a=u.getComponent(),r.modules.sort.sorter.call(this,e,i,o,a,r.getComponent(),n,s)}};de(Bp,"moduleName","sort"),de(Bp,"sorters",GDe);var XO=Bp,YO=class{constructor(e,i){this.columnCount=e,this.rowCount=i,this.columnString=[],this.columns=[],this.rows=[]}genColumns(e){var i=Math.max(this.columnCount,Math.max(...e.map(r=>r.length)));this.columnString=[],this.columns=[];for(let r=1;r<=i;r++)this.incrementChar(this.columnString.length-1),this.columns.push(this.columnString.join(""));return this.columns}genRows(e){var i=Math.max(this.rowCount,e.length);this.rows=[];for(let r=1;r<=i;r++)this.rows.push(r);return this.rows}incrementChar(e){let i=this.columnString[e];i?i!=="Z"?this.columnString[e]=String.fromCharCode(this.columnString[e].charCodeAt(0)+1):(this.columnString[e]="A",e?this.incrementChar(e-1):this.columnString.push("A")):this.columnString.push("A")}setRowCount(e){this.rowCount=e}setColumnCount(e){this.columnCount=e}},WE=class{constructor(e){return this._sheet=e,new Proxy(this,{get:function(i,r,n){return typeof i[r]<"u"?i[r]:i._sheet.table.componentFunctionBinder.handle("sheet",i._sheet,r)}})}getTitle(){return this._sheet.title}getKey(){return this._sheet.key}getDefinition(){return this._sheet.getDefinition()}getData(){return this._sheet.getData()}setData(e){return this._sheet.setData(e)}clear(){return this._sheet.clear()}remove(){return this._sheet.remove()}active(){return this._sheet.active()}setTitle(e){return this._sheet.setTitle(e)}setRows(e){return this._sheet.setRows(e)}setColumns(e){return this._sheet.setColumns(e)}},VE=class extends Ar{constructor(e,i){super(e.table),this.spreadsheetManager=e,this.definition=i,this.title=this.definition.title||"",this.key=this.definition.key||this.definition.title,this.rowCount=this.definition.rows,this.columnCount=this.definition.columns,this.data=this.definition.data||[],this.element=null,this.isActive=!1,this.grid=new YO(this.columnCount,this.rowCount),this.defaultColumnDefinition={width:100,headerHozAlign:"center",headerSort:!1},this.columnDefinition=Object.assign(this.defaultColumnDefinition,this.options("spreadsheetColumnDefinition")),this.columnDefs=[],this.rowDefs=[],this.columnFields=[],this.columns=[],this.rows=[],this.scrollTop=null,this.scrollLeft=null,this.initialize(),this.dispatchExternal("sheetAdded",this.getComponent())}initialize(){this.initializeElement(),this.initializeColumns(),this.initializeRows()}reinitialize(){this.initializeColumns(),this.initializeRows()}initializeElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tab"),this.element.innerText=this.title,this.element.addEventListener("click",()=>{this.spreadsheetManager.loadSheet(this)})}initializeColumns(){this.grid.setColumnCount(this.columnCount),this.columnFields=this.grid.genColumns(this.data),this.columnDefs=[],this.columnFields.forEach(e=>{var i=Object.assign({},this.columnDefinition);i.field=e,i.title=e,this.columnDefs.push(i)})}initializeRows(){var e;this.grid.setRowCount(this.rowCount),e=this.grid.genRows(this.data),this.rowDefs=[],e.forEach((i,r)=>{var n={_id:i},s=this.data[r];s&&s.forEach((o,a)=>{var l=this.columnFields[a];l&&(n[l]=o)}),this.rowDefs.push(n)})}unload(){this.isActive=!1,this.scrollTop=this.table.rowManager.scrollTop,this.scrollLeft=this.table.rowManager.scrollLeft,this.data=this.getData(!0),this.element.classList.remove("tabulator-spreadsheet-tab-active")}load(){var e=!this.isActive;this.isActive=!0,this.table.blockRedraw(),this.table.setData([]),this.table.setColumns(this.columnDefs),this.table.setData(this.rowDefs),this.table.restoreRedraw(),e&&this.scrollTop!==null&&(this.table.rowManager.element.scrollLeft=this.scrollLeft,this.table.rowManager.element.scrollTop=this.scrollTop),this.element.classList.add("tabulator-spreadsheet-tab-active"),this.dispatchExternal("sheetLoaded",this.getComponent())}getComponent(){return new WE(this)}getDefinition(){return{title:this.title,key:this.key,rows:this.rowCount,columns:this.columnCount,data:this.getData()}}getData(e){var i=[],r,n,s;return this.rowDefs.forEach(o=>{var a=[];this.columnFields.forEach(l=>{a.push(o[l])}),i.push(a)}),!e&&!this.options("spreadsheetOutputFull")&&(r=i.map(o=>o.findLastIndex(a=>typeof a<"u")+1),n=Math.max(...r),s=r.findLastIndex(o=>o>0)+1,i=i.slice(0,s),i=i.map(o=>o.slice(0,n))),i}setData(e){this.data=e,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}clear(){this.setData([])}setTitle(e){this.title=e,this.element.innerText=e,this.dispatchExternal("sheetUpdated",this.getComponent())}setRows(e){this.rowCount=e,this.initializeRows(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}setColumns(e){this.columnCount=e,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}remove(){this.spreadsheetManager.removeSheet(this)}destroy(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispatchExternal("sheetRemoved",this.getComponent())}active(){this.spreadsheetManager.loadSheet(this)}},IE=class extends bt{constructor(e){super(e),this.sheets=[],this.element=null,this.registerTableOption("spreadsheet",!1),this.registerTableOption("spreadsheetRows",50),this.registerTableOption("spreadsheetColumns",50),this.registerTableOption("spreadsheetColumnDefinition",{}),this.registerTableOption("spreadsheetOutputFull",!1),this.registerTableOption("spreadsheetData",!1),this.registerTableOption("spreadsheetSheets",!1),this.registerTableOption("spreadsheetSheetTabs",!1),this.registerTableOption("spreadsheetSheetTabsElement",!1),this.registerTableFunction("setSheets",this.setSheets.bind(this)),this.registerTableFunction("addSheet",this.addSheet.bind(this)),this.registerTableFunction("getSheets",this.getSheets.bind(this)),this.registerTableFunction("getSheetDefinitions",this.getSheetDefinitions.bind(this)),this.registerTableFunction("setSheetData",this.setSheetData.bind(this)),this.registerTableFunction("getSheet",this.getSheet.bind(this)),this.registerTableFunction("getSheetData",this.getSheetData.bind(this)),this.registerTableFunction("clearSheet",this.clearSheet.bind(this)),this.registerTableFunction("removeSheet",this.removeSheetFunc.bind(this)),this.registerTableFunction("activeSheet",this.activeSheetFunc.bind(this))}initialize(){this.options("spreadsheet")&&(this.subscribe("table-initialized",this.tableInitialized.bind(this)),this.subscribe("data-loaded",this.loadRemoteData.bind(this)),this.table.options.index="_id",this.options("spreadsheetData")&&this.options("spreadsheetSheets")&&(console.warn("You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData"),this.table.options.spreadsheetData=!1),this.compatibilityCheck(),this.options("spreadsheetSheetTabs")&&this.initializeTabset())}compatibilityCheck(){this.options("data")&&console.warn("Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table"),this.options("pagination")&&console.warn("The spreadsheet module is not compatible with the pagination module"),this.options("groupBy")&&console.warn("The spreadsheet module is not compatible with the row grouping module"),this.options("responsiveCollapse")&&console.warn("The spreadsheet module is not compatible with the responsive collapse module")}initializeTabset(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tabs");var e=this.options("spreadsheetSheetTabsElement");e&&!(e instanceof HTMLElement)&&(e=document.querySelector(e),e||console.warn("Unable to find element matching spreadsheetSheetTabsElement selector:",this.options("spreadsheetSheetTabsElement"))),e?e.appendChild(this.element):this.footerAppend(this.element)}tableInitialized(){this.sheets.length?this.loadSheet(this.sheets[0]):this.options("spreadsheetSheets")?this.loadSheets(this.options("spreadsheetSheets")):this.options("spreadsheetData")&&this.loadData(this.options("spreadsheetData"))}loadRemoteData(e,i,r){return console.log("data",e,i,r),Array.isArray(e)?(this.table.dataLoader.clearAlert(),this.dispatchExternal("dataLoaded",e),!e.length||Array.isArray(e[0])?this.loadData(e):this.loadSheets(e)):console.error(`Spreadsheet Loading Error - Unable to process remote data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e),!1}loadData(e){var i={data:e};this.loadSheet(this.newSheet(i))}destroySheets(){this.sheets.forEach(e=>{e.destroy()}),this.sheets=[],this.activeSheet=null}loadSheets(e){Array.isArray(e)||(e=[]),this.destroySheets(),e.forEach(i=>{this.newSheet(i)}),this.loadSheet(this.sheets[0])}loadSheet(e){this.activeSheet!==e&&(this.activeSheet&&this.activeSheet.unload(),this.activeSheet=e,e.load())}newSheet(e={}){var i;return e.rows||(e.rows=this.options("spreadsheetRows")),e.columns||(e.columns=this.options("spreadsheetColumns")),i=new VE(this,e),this.sheets.push(i),this.element&&this.element.appendChild(i.element),i}removeSheet(e){var i=this.sheets.indexOf(e),r;this.sheets.length>1?i>-1&&(this.sheets.splice(i,1),e.destroy(),this.activeSheet===e&&(r=this.sheets[i-1]||this.sheets[0],r?this.loadSheet(r):this.activeSheet=null)):console.warn("Unable to remove sheet, at least one sheet must be active")}lookupSheet(e){return e?e instanceof VE?e:e instanceof WE?e._sheet:this.sheets.find(i=>i.key===e)||!1:this.activeSheet}setSheets(e){return this.loadSheets(e),this.getSheets()}addSheet(e){return this.newSheet(e).getComponent()}getSheetDefinitions(){return this.sheets.map(e=>e.getDefinition())}getSheets(){return this.sheets.map(e=>e.getComponent())}getSheet(e){var i=this.lookupSheet(e);return i?i.getComponent():!1}setSheetData(e,i){e&&!i&&(i=e,e=!1);var r=this.lookupSheet(e);return r?r.setData(i):!1}getSheetData(e){var i=this.lookupSheet(e);return i?i.getData():!1}clearSheet(e){var i=this.lookupSheet(e);return i?i.clear():!1}removeSheetFunc(e){var i=this.lookupSheet(e);i&&this.removeSheet(i)}activeSheetFunc(e){var i=this.lookupSheet(e);return i?this.loadSheet(i):!1}};de(IE,"moduleName","spreadsheet");var BE=class extends bt{constructor(e){super(e),this.tooltipSubscriber=null,this.headerSubscriber=null,this.timeout=null,this.popupInstance=null,this.registerTableOption("tooltipDelay",300),this.registerColumnOption("tooltip"),this.registerColumnOption("headerTooltip")}initialize(){this.deprecatedOptionsCheck(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeColumn(e){e.definition.headerTooltip&&!this.headerSubscriber&&(this.headerSubscriber=!0,this.subscribe("column-mousemove",this.mousemoveCheck.bind(this,"headerTooltip")),this.subscribe("column-mouseout",this.mouseoutCheck.bind(this,"headerTooltip"))),e.definition.tooltip&&!this.tooltipSubscriber&&(this.tooltipSubscriber=!0,this.subscribe("cell-mousemove",this.mousemoveCheck.bind(this,"tooltip")),this.subscribe("cell-mouseout",this.mouseoutCheck.bind(this,"tooltip")))}mousemoveCheck(e,i,r){var n=e==="tooltip"?r.column.definition.tooltip:r.definition.headerTooltip;n&&(this.clearPopup(),this.timeout=setTimeout(this.loadTooltip.bind(this,i,r,n),this.table.options.tooltipDelay))}mouseoutCheck(e,i,r){this.popupInstance||this.clearPopup()}clearPopup(e,i,r){clearTimeout(this.timeout),this.timeout=null,this.popupInstance&&this.popupInstance.hide()}loadTooltip(e,i,r){var n,s,o;function a(l){s=l}typeof r=="function"&&(r=r(e,i.getComponent(),a)),r instanceof HTMLElement?n=r:(n=document.createElement("div"),r===!0&&(i instanceof $p?r=i.value:i.definition.field?this.langBind("columns|"+i.definition.field,l=>{n.innerHTML=r=l||i.definition.title}):r=i.definition.title),n.innerHTML=r),(r||r===0||r===!1)&&(n.classList.add("tabulator-tooltip"),n.addEventListener("mousemove",l=>l.preventDefault()),this.popupInstance=this.popup(n),typeof s=="function"&&this.popupInstance.renderCallback(s),o=this.popupInstance.containerEventCoords(e),this.popupInstance.show(o.x+15,o.y+15).hideOnBlur(()=>{this.dispatchExternal("TooltipClosed",i.getComponent()),this.popupInstance=null}),this.dispatchExternal("TooltipOpened",i.getComponent()))}};de(BE,"moduleName","tooltip");var XDe={integer:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:(e=Number(e),!isNaN(e)&&isFinite(e)&&Math.floor(e)===e)},float:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:(e=Number(e),!isNaN(e)&&isFinite(e)&&e%1!==0)},numeric:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:!isNaN(e)},string:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:isNaN(e)},alphanumeric:function(t,e,i){if(e===""||e===null||typeof e>"u")return!0;var r=new RegExp(/^[a-z0-9]+$/i);return r.test(e)},max:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:parseFloat(e)<=i},min:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:parseFloat(e)>=i},starts:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:String(e).toLowerCase().startsWith(String(i).toLowerCase())},ends:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:String(e).toLowerCase().endsWith(String(i).toLowerCase())},minLength:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:String(e).length>=i},maxLength:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:String(e).length<=i},in:function(t,e,i){return e===""||e===null||typeof e>"u"?!0:(typeof i=="string"&&(i=i.split("|")),i.indexOf(e)>-1)},regex:function(t,e,i){if(e===""||e===null||typeof e>"u")return!0;var r=new RegExp(i);return r.test(e)},unique:function(t,e,i){if(e===""||e===null||typeof e>"u")return!0;var r=!0,n=t.getData(),s=t.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(o){var a=o.getData();a!==n&&e==s.getFieldValue(a)&&(r=!1)}),r},required:function(t,e,i){return e!==""&&e!==null&&typeof e<"u"}},dw=class dw extends bt{constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("edit-success",this.editValidate.bind(this)),this.subscribe("edit-editor-clear",this.editorClear.bind(this)),this.subscribe("edit-edited-clear",this.editedClear.bind(this))}editValidate(e,i,r){var n=this.table.options.validationMode!=="manual"?this.validate(e.column.modules.validate,e,i):!0;return n!==!0&&setTimeout(()=>{e.getElement().classList.add("tabulator-validation-fail"),this.dispatchExternal("validationFailed",e.getComponent(),i,n)}),n}editorClear(e,i){i&&e.column.modules.validate&&this.cellValidate(e),e.getElement().classList.remove("tabulator-validation-fail")}editedClear(e){e.modules.validate&&(e.modules.validate.invalid=!1)}cellIsValid(e){return e.modules.validate&&e.modules.validate.invalid||!0}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var i=[];return e.cells.forEach(r=>{this.cellValidate(r)!==!0&&i.push(r.getComponent())}),i.length?i:!0}rowValidate(e){var i=[];return e.cells.forEach(r=>{this.cellValidate(r)!==!0&&i.push(r.getComponent())}),i.length?i:!0}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(i=>{this.clearValidation(i._getSelf())})}userValidate(e){var i=[];return this.table.rowManager.rows.forEach(r=>{r=r.getComponent();var n=r.validate();n!==!0&&(i=i.concat(n))}),i.length?i:!0}initializeColumnCheck(e){typeof e.definition.validator<"u"&&this.initializeColumn(e)}initializeColumn(e){var i=this,r=[],n;e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(s=>{n=i._extractValidator(s),n&&r.push(n)}):(n=this._extractValidator(e.definition.validator),n&&r.push(n)),e.modules.validate=r.length?r:!1)}_extractValidator(e){var i,r,n;switch(typeof e){case"string":return n=e.indexOf(":"),n>-1?(i=e.substring(0,n),r=e.substring(n+1)):i=e,this._buildValidator(i,r);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,i){var r=typeof e=="function"?e:dw.validators[e];return r?{type:typeof e=="function"?"function":e,func:r,params:i}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,i,r){var n=this,s=[],o=this.invalidCells.indexOf(i);return e&&e.forEach(a=>{a.func.call(n,i.getComponent(),r,a.params)||s.push({type:a.type,parameters:a.params})}),i.modules.validate||(i.modules.validate={}),s.length?(i.modules.validate.invalid=s,this.table.options.validationMode!=="manual"&&i.getElement().classList.add("tabulator-validation-fail"),o==-1&&this.invalidCells.push(i)):(i.modules.validate.invalid=!1,i.getElement().classList.remove("tabulator-validation-fail"),o>-1&&this.invalidCells.splice(o,1)),s.length?s:!0}getInvalidCells(){var e=[];return this.invalidCells.forEach(i=>{e.push(i.getComponent())}),e}clearValidation(e){var i;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,i=this.invalidCells.indexOf(e),i>-1&&this.invalidCells.splice(i,1))}};de(dw,"moduleName","validate"),de(dw,"validators",XDe);var KO=dw,EO=Object.freeze({__proto__:null,AccessorModule:kO,AjaxModule:RO,ClipboardModule:DO,ColumnCalcsModule:FO,DataTreeModule:CE,DownloadModule:LO,EditModule:OO,ExportModule:PO,FilterModule:zO,FormatModule:IO,FrozenColumnsModule:SE,FrozenRowsModule:EE,GroupRowsModule:kE,HistoryModule:NO,HtmlTableImportModule:AE,ImportModule:$O,InteractionModule:TE,KeybindingsModule:HO,MenuModule:RE,MoveColumnsModule:DE,MoveRowsModule:UO,MutatorModule:WO,PageModule:VO,PersistenceModule:jO,PopupModule:ME,PrintModule:FE,ReactiveDataModule:LE,ResizeColumnsModule:OE,ResizeRowsModule:PE,ResizeTableModule:zE,ResponsiveLayoutModule:ow,SelectRangeModule:r1,SelectRowModule:aw,SortModule:XO,SpreadsheetModule:IE,TooltipModule:BE,ValidateModule:KO}),YDe={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,debugInvalidComponentFuncs:!0,debugInitialization:!0,debugDeprecation:!0,height:!1,minHeight:!1,maxHeight:!1,columnHeaderVertAlign:"top",popupContainer:!1,columns:[],columnDefaults:{},rowHeader:!1,data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,rowHeight:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataLoaderErrorTimeout:3e3,dataSendParams:{},dataReceiveParams:{},dependencies:{}},jE=class{constructor(e,i,r={}){this.table=e,this.msgType=i,this.registeredDefaults=Object.assign({},r)}register(e,i){this.registeredDefaults[e]=i}generate(e,i={}){var r=Object.assign({},this.registeredDefaults),n=this.table.options.debugInvalidOptions||i.debugInvalidOptions===!0;Object.assign(r,e);for(let s in i)r.hasOwnProperty(s)||(n&&console.warn("Invalid "+this.msgType+" option:",s),r[s]=i.key);for(let s in r)s in i?r[s]=i[s]:Array.isArray(r[s])?r[s]=Object.assign([],r[s]):typeof r[s]=="object"&&r[s]!==null?r[s]=Object.assign({},r[s]):typeof r[s]>"u"&&delete r[s];return r}},c1=class extends Ar{constructor(e){super(e),this.elementVertical=e.rowManager.element,this.elementHorizontal=e.columnManager.element,this.tableElement=e.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(e){}renderRows(){}renderColumns(){}rerenderRows(e){e&&e()}rerenderColumns(e,i){}renderRowCells(e){}rerenderRowCells(e,i){}scrollColumns(e,i){}scrollRows(e,i){}resize(){}scrollToRow(e){}scrollToRowNearestTop(e){}visibleRows(e){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(e,i){var r=e.getElement();i%2?(r.classList.add("tabulator-row-even"),r.classList.remove("tabulator-row-odd")):(r.classList.add("tabulator-row-odd"),r.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(e){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(e,i,r){var n=this.rows().indexOf(e),s=e.getElement(),o=0;return new Promise((a,l)=>{if(n>-1){if(typeof r>"u"&&(r=this.table.options.scrollToRowIfVisible),!r&&Qt.elVisible(s)&&(o=Qt.elOffset(s).top-Qt.elOffset(this.elementVertical).top,o>0&&o<this.elementVertical.clientHeight-s.offsetHeight))return a(),!1;switch(typeof i>"u"&&(i=this.table.options.scrollToRowPosition),i==="nearest"&&(i=this.scrollToRowNearestTop(e)?"top":"bottom"),this.scrollToRow(e),i){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(s.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-s.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-s.offsetTop)+s.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+s.offsetHeight;break;case"top":this.elementVertical.scrollTop=s.offsetTop;break}a()}else console.warn("Scroll Error - Row not visible"),l("Scroll Error - Row not visible")})}},JO=class extends c1{constructor(e){super(e)}renderRowCells(e,i){let r=document.createDocumentFragment();e.cells.forEach(n=>{r.appendChild(n.getElement())}),e.element.appendChild(r),i||e.cells.forEach(n=>{n.cellRendered()})}reinitializeColumnWidths(e){e.forEach(function(i){i.reinitializeWidth()})}},ZO=class extends c1{constructor(e){super(e),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.windowBuffer=200,this.visibleRows=null,this.initialized=!1,this.isFitData=!1,this.columns=[]}initialize(){this.compatibilityCheck(),this.layoutCheck(),this.vertScrollListen()}compatibilityCheck(){this.options("layout")=="fitDataTable"&&console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode"),this.options("responsiveLayout")&&console.warn("Horizontal Virtual DOM is not compatible with responsive columns"),this.options("rtl")&&console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction")}layoutCheck(){this.isFitData=this.options("layout").startsWith("fitData")}vertScrollListen(){this.subscribe("scroll-vertical",this.clearVisRowCache.bind(this)),this.subscribe("data-refreshed",this.clearVisRowCache.bind(this))}clearVisRowCache(){this.visibleRows=null}renderColumns(e,i){this.dataChange()}scrollColumns(e,i){this.scrollLeft!=e&&(this.scrollLeft=e,this.scroll(e-(this.vDomScrollPosLeft+this.windowBuffer)))}calcWindowBuffer(){var e=this.elementVertical.clientWidth;this.table.columnManager.columnsByIndex.forEach(i=>{if(i.visible){var r=i.getWidth();r>e&&(e=r)}}),this.windowBuffer=e*2}rerenderColumns(e,i){var r={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},n=0;e&&!this.initialized||(this.clear(),this.calcWindowBuffer(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.windowBuffer,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,this.table.columnManager.columnsByIndex.forEach(s=>{var o={},a;s.visible&&(s.modules.frozen||(a=s.getWidth(),o.leftPos=n,o.rightPos=n+a,o.width=a,this.isFitData&&(o.fitDataCheck=s.modules.vdomHoz?s.modules.vdomHoz.fitDataCheck:!0),n+a>this.vDomScrollPosLeft&&n<this.vDomScrollPosRight?(this.leftCol==-1&&(this.leftCol=this.columns.length,this.vDomPadLeft=n),this.rightCol=this.columns.length):this.leftCol!==-1&&(this.vDomPadRight+=a),this.columns.push(s),s.modules.vdomHoz=o,n+=a))}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,i||(!e||this.reinitChanged(r))&&this.reinitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft)}renderRowCells(e){if(this.initialized)this.initializeRow(e);else{let i=document.createDocumentFragment();e.cells.forEach(r=>{i.appendChild(r.getElement())}),e.element.appendChild(i),e.cells.forEach(r=>{r.cellRendered()})}}rerenderRowCells(e,i){this.reinitializeRow(e,i)}reinitializeColumnWidths(e){for(let i=this.leftCol;i<=this.rightCol;i++){let r=this.columns[i];r&&r.reinitializeWidth()}}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var e=!1,i,r;if(this.isFitData){if(this.table.columnManager.columnsByIndex.forEach(n=>{!n.definition.width&&n.visible&&(e=!0)}),e&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,i=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows())[0],i)){r=i.getElement(),i.generateCells(),this.tableElement.appendChild(r);for(let n=0;n<i.cells.length;n++){let s=i.cells[n];r.appendChild(s.getElement()),s.column.reinitializeWidth()}r.parentNode.removeChild(r),this.rerenderColumns(!1,!0)}}else this.options("layout")==="fitColumns"&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(e){var i=!0;return e.cols.length!==this.columns.length||e.leftCol!==this.leftCol||e.rightCol!==this.rightCol?!0:(e.cols.forEach((r,n)=>{r!==this.columns[n]&&(i=!1)}),!i)}reinitializeRows(){var e=this.getVisibleRows(),i=this.table.rowManager.getRows().filter(r=>!e.includes(r));e.forEach(r=>{this.reinitializeRow(r,!0)}),i.forEach(r=>{r.deinitialize()})}getVisibleRows(){return this.visibleRows||(this.visibleRows=this.table.rowManager.getVisibleRows()),this.visibleRows}scroll(e){this.vDomScrollPosLeft+=e,this.vDomScrollPosRight+=e,Math.abs(e)>this.windowBuffer/2?this.rerenderColumns():e>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(e,i,r){for(let n=e;n<i;n++){let s=this.columns[n];s.modules.vdomHoz.leftPos+=r,s.modules.vdomHoz.rightPos+=r}}addColRight(){for(var e=!1,i=!0;i;){let r=this.columns[this.rightCol+1];r&&r.modules.vdomHoz.leftPos<=this.vDomScrollPosRight?(e=!0,this.getVisibleRows().forEach(n=>{if(n.type!=="group"){var s=n.getCell(r);n.getElement().insertBefore(s.getElement(),n.getCell(this.columns[this.rightCol]).getElement().nextSibling),s.cellRendered()}}),this.fitDataColActualWidthCheck(r),this.rightCol++,this.getVisibleRows().forEach(n=>{n.type!=="group"&&(n.modules.vdomHoz.rightCol=this.rightCol)}),this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=r.getWidth()):i=!1}e&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}addColLeft(){for(var e=!1,i=!0;i;){let r=this.columns[this.leftCol-1];if(r)if(r.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){e=!0,this.getVisibleRows().forEach(s=>{if(s.type!=="group"){var o=s.getCell(r);s.getElement().insertBefore(o.getElement(),s.getCell(this.columns[this.leftCol]).getElement()),o.cellRendered()}}),this.leftCol--,this.getVisibleRows().forEach(s=>{s.type!=="group"&&(s.modules.vdomHoz.leftCol=this.leftCol)}),this.leftCol<=0?this.vDomPadLeft=0:this.vDomPadLeft-=r.getWidth();let n=this.fitDataColActualWidthCheck(r);n&&(this.scrollLeft=this.elementVertical.scrollLeft=this.elementVertical.scrollLeft+n,this.vDomPadRight-=n)}else i=!1;else i=!1}e&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}removeColRight(){for(var e=!1,i=!0;i;){let r=this.columns[this.rightCol];r&&r.modules.vdomHoz.leftPos>this.vDomScrollPosRight?(e=!0,this.getVisibleRows().forEach(n=>{if(n.type!=="group"){var s=n.getCell(r);try{n.getElement().removeChild(s.getElement())}catch(o){console.warn("Could not removeColRight",o.message)}}}),this.vDomPadRight+=r.getWidth(),this.rightCol--,this.getVisibleRows().forEach(n=>{n.type!=="group"&&(n.modules.vdomHoz.rightCol=this.rightCol)})):i=!1}e&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}removeColLeft(){for(var e=!1,i=!0;i;){let r=this.columns[this.leftCol];r&&r.modules.vdomHoz.rightPos<this.vDomScrollPosLeft?(e=!0,this.getVisibleRows().forEach(n=>{if(n.type!=="group"){var s=n.getCell(r);try{n.getElement().removeChild(s.getElement())}catch(o){console.warn("Could not removeColLeft",o.message)}}}),this.vDomPadLeft+=r.getWidth(),this.leftCol++,this.getVisibleRows().forEach(n=>{n.type!=="group"&&(n.modules.vdomHoz.leftCol=this.leftCol)})):i=!1}e&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}fitDataColActualWidthCheck(e){var i,r;return e.modules.vdomHoz.fitDataCheck&&(e.reinitializeWidth(),i=e.getWidth(),r=i-e.modules.vdomHoz.width,r&&(e.modules.vdomHoz.rightPos+=r,e.modules.vdomHoz.width=i,this.colPositionAdjust(this.columns.indexOf(e)+1,this.columns.length,r)),e.modules.vdomHoz.fitDataCheck=!1),r}initializeRow(e){if(e.type!=="group"){e.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol},this.table.modules.frozenColumns&&this.table.modules.frozenColumns.leftColumns.forEach(i=>{this.appendCell(e,i)});for(let i=this.leftCol;i<=this.rightCol;i++)this.appendCell(e,this.columns[i]);this.table.modules.frozenColumns&&this.table.modules.frozenColumns.rightColumns.forEach(i=>{this.appendCell(e,i)})}}appendCell(e,i){if(i&&i.visible){let r=e.getCell(i);e.getElement().appendChild(r.getElement()),r.cellRendered()}}reinitializeRow(e,i){if(e.type!=="group"&&(i||!e.modules.vdomHoz||e.modules.vdomHoz.leftCol!==this.leftCol||e.modules.vdomHoz.rightCol!==this.rightCol)){for(var r=e.getElement();r.firstChild;)r.removeChild(r.firstChild);this.initializeRow(e)}}},QO=class extends Ar{constructor(e){super(e),this.blockHozScrollEvent=!1,this.headersElement=null,this.contentsElement=null,this.rowHeader=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new jE(this.table,"column definition",pre),this.redrawBlock=!1,this.redrawBlockUpdate=null,this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.contentsElement=this.createHeaderContentsElement(),this.element=this.createHeaderElement(),this.contentsElement.insertBefore(this.headersElement,this.contentsElement.firstChild),this.element.insertBefore(this.contentsElement,this.element.firstChild),this.initializeScrollWheelWatcher(),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("scrollbar-vertical",this.padVerticalScrollbar.bind(this))}padVerticalScrollbar(e){this.table.rtl?this.headersElement.style.marginLeft=e+"px":this.headersElement.style.marginRight=e+"px"}initializeRenderer(){var e,i={virtual:ZO,basic:JO};typeof this.table.options.renderHorizontal=="string"?e=i[this.table.options.renderHorizontal]:e=this.table.options.renderHorizontal,e?(this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",this.table.options.renderHorizontal)}createHeadersElement(){var e=document.createElement("div");return e.classList.add("tabulator-headers"),e.setAttribute("role","row"),e}createHeaderContentsElement(){var e=document.createElement("div");return e.classList.add("tabulator-header-contents"),e.setAttribute("role","rowgroup"),e}createHeaderElement(){var e=document.createElement("div");return e.classList.add("tabulator-header"),e.setAttribute("role","rowgroup"),this.table.options.headerVisible||e.classList.add("tabulator-header-hidden"),e}getElement(){return this.element}getContentsElement(){return this.contentsElement}getHeadersElement(){return this.headersElement}scrollHorizontal(e){this.contentsElement.scrollLeft=e,this.scrollLeft=e,this.renderer.scrollColumns(e)}initializeScrollWheelWatcher(){this.contentsElement.addEventListener("wheel",e=>{var i;e.deltaX&&(i=this.contentsElement.scrollLeft+e.deltaX,this.table.rowManager.scrollHorizontal(i),this.table.columnManager.scrollHorizontal(i))})}generateColumnsFromRowData(e){var i=[],r={},n=this.table.options.autoColumns==="full"?e:[e[0]],s=this.table.options.autoColumnsDefinitions;if(e&&e.length){if(n.forEach(o=>{Object.keys(o).forEach((a,l)=>{let u=o[a],c;r[a]?r[a]!==!0&&typeof u<"u"&&(r[a].sorter=this.calculateSorterFromValue(u),r[a]=!0):(c={field:a,title:a,sorter:this.calculateSorterFromValue(u)},i.splice(l,0,c),r[a]=typeof u>"u"?c:!0)})}),s)switch(typeof s){case"function":this.table.options.columns=s.call(this.table,i);break;case"object":Array.isArray(s)?i.forEach(o=>{var a=s.find(l=>l.field===o.field);a&&Object.assign(o,a)}):i.forEach(o=>{s[o.field]&&Object.assign(o,s[o.field])}),this.table.options.columns=i;break}else this.table.options.columns=i;this.setColumns(this.table.options.columns)}}calculateSorterFromValue(e){var i;switch(typeof e){case"undefined":i="string";break;case"boolean":i="boolean";break;case"number":i="number";break;case"object":Array.isArray(e)?i="array":i="string";break;default:!isNaN(e)&&e!==""?i="number":e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?i="alphanum":i="string";break}return i}setColumns(e,i){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),this.dispatchExternal("columnsLoading"),this.table.options.rowHeader&&(this.rowHeader=new Np(this.table.options.rowHeader===!0?{}:this.table.options.rowHeader,this,!0),this.columns.push(this.rowHeader),this.headersElement.appendChild(this.rowHeader.getElement()),this.rowHeader.columnRendered()),e.forEach((r,n)=>{this._addColumn(r)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.subscribedExternal("columnsLoaded")&&this.dispatchExternal("columnsLoaded",this.getComponents()),this.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(e,i,r){var n=new Np(e,this),s=n.getElement(),o=r&&this.findColumnIndex(r);if(i&&this.rowHeader&&(!r||r===this.rowHeader)&&(i=!1,r=this.rowHeader,o=0),r&&o>-1){var a=r.getTopColumn(),l=this.columns.indexOf(a),u=a.getElement();i?(this.columns.splice(l,0,n),u.parentNode.insertBefore(s,u)):(this.columns.splice(l+1,0,n),u.parentNode.insertBefore(s,u.nextSibling))}else i?(this.columns.unshift(n),this.headersElement.insertBefore(n.getElement(),this.headersElement.firstChild)):(this.columns.push(n),this.headersElement.appendChild(n.getElement()));return n.columnRendered(),n}registerColumnField(e){e.definition.field&&(this.columnsByField[e.definition.field]=e)}registerColumnPosition(e){this.columnsByIndex.push(e)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(e){e.reRegisterPosition()})}verticalAlignHeaders(){var e=0;this.redrawBlock||(this.headersElement.style.height="",this.columns.forEach(i=>{i.clearVerticalAlign()}),this.columns.forEach(i=>{var r=i.getHeight();r>e&&(e=r)}),this.headersElement.style.height=e+"px",this.columns.forEach(i=>{i.verticalAlign(this.table.options.columnHeaderVertAlign,e)}),this.table.rowManager.adjustTableSize())}findColumn(e){var i;if(typeof e=="object"){if(e instanceof Np)return e;if(e instanceof HE)return e._getSelf()||!1;if(typeof HTMLElement<"u"&&e instanceof HTMLElement)return i=[],this.columns.forEach(n=>{i.push(n),i=i.concat(n.getColumns(!0))}),i.find(n=>n.element===e)||!1}else return this.columnsByField[e]||!1;return!1}getColumnByField(e){return this.columnsByField[e]}getColumnsByFieldRoot(e){var i=[];return Object.keys(this.columnsByField).forEach(r=>{var n=this.table.options.nestedFieldSeparator?r.split(this.table.options.nestedFieldSeparator)[0]:r;n===e&&i.push(this.columnsByField[r])}),i}getColumnByIndex(e){return this.columnsByIndex[e]}getFirstVisibleColumn(){var e=this.columnsByIndex.findIndex(i=>i.visible);return e>-1?this.columnsByIndex[e]:!1}getVisibleColumnsByIndex(){return this.columnsByIndex.filter(e=>e.visible)}getColumns(){return this.columns}findColumnIndex(e){return this.columnsByIndex.findIndex(i=>e===i)}getRealColumns(){return this.columnsByIndex}traverse(e){this.columnsByIndex.forEach((i,r)=>{e(i,r)})}getDefinitions(e){var i=[];return this.columnsByIndex.forEach(r=>{(!e||e&&r.visible)&&i.push(r.getDefinition())}),i}getDefinitionTree(){var e=[];return this.columns.forEach(i=>{e.push(i.getDefinition(!0))}),e}getComponents(e){var i=[],r=e?this.columns:this.columnsByIndex;return r.forEach(n=>{i.push(n.getComponent())}),i}getWidth(){var e=0;return this.columnsByIndex.forEach(i=>{i.visible&&(e+=i.getWidth())}),e}moveColumn(e,i,r){i.element.parentNode.insertBefore(e.element,i.element),r&&i.element.parentNode.insertBefore(i.element,e.element),this.moveColumnActual(e,i,r),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(e,i,r){e.parent.isGroup?this._moveColumnInArray(e.parent.columns,e,i,r):this._moveColumnInArray(this.columns,e,i,r),this._moveColumnInArray(this.columnsByIndex,e,i,r,!0),this.rerenderColumns(!0),this.dispatch("column-moved",e,i,r),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",e.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(e,i,r,n,s){var o=e.indexOf(i),a,l=[];o>-1&&(e.splice(o,1),a=e.indexOf(r),a>-1?n&&(a=a+1):a=o,e.splice(a,0,i),s&&(l=this.chain("column-moving-rows",[i,r,n],null,[])||[],l=l.concat(this.table.rowManager.rows),l.forEach(function(u){if(u.cells.length){var c=u.cells.splice(o,1)[0];u.cells.splice(a,0,c)}})))}scrollToColumn(e,i,r){var n=0,s=e.getLeftOffset(),o=0,a=e.getElement();return new Promise((l,u)=>{if(typeof i>"u"&&(i=this.table.options.scrollToColumnPosition),typeof r>"u"&&(r=this.table.options.scrollToColumnIfVisible),e.visible){switch(i){case"middle":case"center":o=-this.element.clientWidth/2;break;case"right":o=a.clientWidth-this.headersElement.clientWidth;break}if(!r&&s>0&&s+a.offsetWidth<this.element.clientWidth)return!1;n=s+o,n=Math.max(Math.min(n,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(n),this.scrollHorizontal(n),l()}else console.warn("Scroll Error - Column not visible"),u("Scroll Error - Column not visible")})}generateCells(e){var i=[];return this.columnsByIndex.forEach(r=>{i.push(r.generateCell(e))}),i}getFlexBaseWidth(){var e=this.table.element.clientWidth,i=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(r){var n,s,o;r.visible&&(n=r.definition.width||0,s=parseInt(r.minWidth),typeof n=="string"?n.indexOf("%")>-1?o=e/100*parseInt(n):o=parseInt(n):o=n,i+=o>s?o:s)}),i}addColumn(e,i,r){return new Promise((n,s)=>{var o=this._addColumn(e,i,r);this._reIndexColumns(),this.dispatch("column-add",e,i,r),this.layoutMode()!="fitColumns"&&o.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.rerenderColumns(),n(o)})}deregisterColumn(e){var i=e.getField(),r;i&&delete this.columnsByField[i],r=this.columnsByIndex.indexOf(e),r>-1&&this.columnsByIndex.splice(r,1),r=this.columns.indexOf(e),r>-1&&this.columns.splice(r,1),this.verticalAlignHeaders(),this.redraw()}rerenderColumns(e,i){this.redrawBlock?(e===!1||e===!0&&this.redrawBlockUpdate===null)&&(this.redrawBlockUpdate=e):this.renderer.rerenderColumns(e,i)}blockRedraw(){this.redrawBlock=!0,this.redrawBlockUpdate=null}restoreRedraw(){this.redrawBlock=!1,this.verticalAlignHeaders(),this.renderer.rerenderColumns(this.redrawBlockUpdate)}redraw(e){Qt.elVisible(this.element)&&this.verticalAlignHeaders(),e&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",e)||this.layoutRefresh(e),this.dispatch("table-redraw",e),this.table.footerManager.redraw()}},eP=class extends c1{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.scrollTop=0,e.scrollLeft=0,e.style.minWidth="",e.style.minHeight="",e.style.display="",e.style.visibility=""}renderRows(){var e=this.tableElement,i=!0,r=document.createDocumentFragment(),n=this.rows();n.forEach((s,o)=>{this.styleRow(s,o),s.initialize(!1,!0),s.type!=="group"&&(i=!1),r.appendChild(s.getElement())}),e.appendChild(r),n.forEach(s=>{s.rendered(),s.heightInitialized||s.calcHeight(!0)}),n.forEach(s=>{s.heightInitialized||s.setCellHeight()}),i?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}rerenderRows(e){this.clearRows(),e&&e(),this.renderRows(),this.rows().length||this.table.rowManager.tableEmpty()}scrollToRowNearestTop(e){var i=Qt.elOffset(e.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-i)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-i))}scrollToRow(e){var i=e.getElement();this.elementVertical.scrollTop=Qt.elOffset(i).top-Qt.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(e){return this.rows()}},tP=class extends c1{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.style.paddingTop="",e.style.paddingBottom="",e.style.minHeight="",e.style.display="",e.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(e){for(var i=this.elementVertical.scrollTop,r=!1,n=!1,s=this.table.rowManager.scrollLeft,o=this.rows(),a=this.vDomTop;a<=this.vDomBottom;a++)if(o[a]){var l=i-o[a].getElement().offsetTop;if(n===!1||Math.abs(l)<n)n=l,r=a;else break}o.forEach(u=>{u.deinitializeHeight()}),e&&e(),this.rows().length?this._virtualRenderFill(r===!1?this.rows.length-1:r,!0,n||0):(this.clear(),this.table.rowManager.tableEmpty()),this.scrollColumns(s)}scrollColumns(e){this.table.rowManager.scrollHorizontal(e)}scrollRows(e,i){var r=e-this.vDomScrollPosTop,n=e-this.vDomScrollPosBottom,s=this.vDomWindowBuffer*2,o=this.rows();if(this.scrollTop=e,-r>s||n>s){var a=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*o.length)),this.scrollColumns(a)}else i?(r<0&&this._addTopRow(o,-r),n<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(o,-n):this.vDomScrollPosBottom=this.scrollTop)):(n>=0&&this._addBottomRow(o,n),r>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(o,r):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(e){var i=this.rows().indexOf(e);return!(Math.abs(this.vDomTop-i)>Math.abs(this.vDomBottom-i))}scrollToRow(e){var i=this.rows().indexOf(e);i>-1&&this._virtualRenderFill(i,!0)}visibleRows(e){var i=this.elementVertical.scrollTop,r=this.elementVertical.clientHeight+i,n=!1,s=0,o=0,a=this.rows();if(e)s=this.vDomTop,o=this.vDomBottom;else for(var l=this.vDomTop;l<=this.vDomBottom;l++)if(a[l])if(n)if(r-a[l].getElement().offsetTop>=0)o=l;else break;else if(i-a[l].getElement().offsetTop>=0)s=l;else if(n=!0,r-a[l].getElement().offsetTop>=0)o=l;else break;return a.slice(s,o+1)}_virtualRenderFill(e,i,r){var n=this.tableElement,s=this.elementVertical,o=0,a=0,l=0,u=0,c=0,h=0,d=this.rows(),p=d.length,f=0,m,g,b=[],v=0,y=0,x=this.table.rowManager.fixedHeight,_=this.elementVertical.clientHeight,w=this.table.options.rowHeight,C=!0;if(e=e||0,r=r||0,!e)this.clear();else{for(;n.firstChild;)n.removeChild(n.firstChild);u=(p-e+1)*this.vDomRowHeight,u<_&&(e-=Math.ceil((_-u)/this.vDomRowHeight),e<0&&(e=0)),o=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),e),e-=o}if(p&&Qt.elVisible(this.elementVertical)){for(this.vDomTop=e,this.vDomBottom=e-1,x||this.table.options.maxHeight?(w&&(y=_/w+this.vDomWindowBuffer/w),y=Math.max(this.vDomWindowMinTotalRows,Math.ceil(y))):y=p;(y==p||a<=_+this.vDomWindowBuffer||v<this.vDomWindowMinTotalRows)&&this.vDomBottom<p-1;){for(b=[],g=document.createDocumentFragment(),h=0;h<y&&this.vDomBottom<p-1;)f=this.vDomBottom+1,m=d[f],this.styleRow(m,f),m.initialize(!1,!0),!m.heightInitialized&&!this.table.options.rowHeight&&m.clearCellHeight(),g.appendChild(m.getElement()),b.push(m),this.vDomBottom++,h++;if(!b.length)break;n.appendChild(g),b.forEach(E=>{E.rendered(),E.heightInitialized||E.calcHeight(!0)}),b.forEach(E=>{E.heightInitialized||E.setCellHeight()}),b.forEach(E=>{l=E.getHeight(),v<o?c+=l:a+=l,l>this.vDomWindowBuffer&&(this.vDomWindowBuffer=l*2),v++}),C=this.table.rowManager.adjustTableSize(),_=this.elementVertical.clientHeight,C&&(x||this.table.options.maxHeight)&&(w=a/v,y=Math.max(this.vDomWindowMinTotalRows,Math.ceil(_/w+this.vDomWindowBuffer/w)))}e?(this.vDomTopPad=i?this.vDomRowHeight*this.vDomTop+r:this.scrollTop-c,this.vDomBottomPad=this.vDomBottom==p-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-a-c,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((a+c)/v),this.vDomBottomPad=this.vDomRowHeight*(p-this.vDomBottom-1),this.vDomScrollHeight=c+a+this.vDomBottomPad-_),n.style.paddingTop=this.vDomTopPad+"px",n.style.paddingBottom=this.vDomBottomPad+"px",i&&(this.scrollTop=this.vDomTopPad+c+r-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-_:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-_),this.elementVertical.scrollWidth>this.elementVertical.clientWidth&&i&&(this.scrollTop+=this.elementVertical.offsetHeight-_),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,s.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(e,i){for(var r=this.tableElement,n=[],s=0,o=this.vDomTop-1,a=0,l=!0;l;)if(this.vDomTop){let u=e[o],c,h;u&&a<this.vDomMaxRenderChain?(c=u.getHeight()||this.vDomRowHeight,h=u.initialized,i>=c?(this.styleRow(u,o),r.insertBefore(u.getElement(),r.firstChild),(!u.initialized||!u.heightInitialized)&&n.push(u),u.initialize(),h||(c=u.getElement().offsetHeight,c>this.vDomWindowBuffer&&(this.vDomWindowBuffer=c*2)),i-=c,s+=c,this.vDomTop--,o--,a++):l=!1):l=!1}else l=!1;for(let u of n)u.clearCellHeight();this._quickNormalizeRowHeight(n),s&&(this.vDomTopPad-=s,this.vDomTopPad<0&&(this.vDomTopPad=o*this.vDomRowHeight),o<1&&(this.vDomTopPad=0),r.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=s)}_removeTopRow(e,i){for(var r=[],n=0,s=0,o=!0;o;){let a=e[this.vDomTop],l;a&&s<this.vDomMaxRenderChain?(l=a.getHeight()||this.vDomRowHeight,i>=l?(this.vDomTop++,i-=l,n+=l,r.push(a),s++):o=!1):o=!1}for(let a of r){let l=a.getElement();l.parentNode&&l.parentNode.removeChild(l)}n&&(this.vDomTopPad+=n,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?n:n+this.vDomWindowBuffer)}_addBottomRow(e,i){for(var r=this.tableElement,n=[],s=0,o=this.vDomBottom+1,a=0,l=!0;l;){let u=e[o],c,h;u&&a<this.vDomMaxRenderChain?(c=u.getHeight()||this.vDomRowHeight,h=u.initialized,i>=c?(this.styleRow(u,o),r.appendChild(u.getElement()),(!u.initialized||!u.heightInitialized)&&n.push(u),u.initialize(),h||(c=u.getElement().offsetHeight,c>this.vDomWindowBuffer&&(this.vDomWindowBuffer=c*2)),i-=c,s+=c,this.vDomBottom++,o++,a++):l=!1):l=!1}for(let u of n)u.clearCellHeight();this._quickNormalizeRowHeight(n),s&&(this.vDomBottomPad-=s,(this.vDomBottomPad<0||o==e.length-1)&&(this.vDomBottomPad=0),r.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=s)}_removeBottomRow(e,i){for(var r=[],n=0,s=0,o=!0;o;){let a=e[this.vDomBottom],l;a&&s<this.vDomMaxRenderChain?(l=a.getHeight()||this.vDomRowHeight,i>=l?(this.vDomBottom--,i-=l,n+=l,r.push(a),s++):o=!1):o=!1}for(let a of r){let l=a.getElement();l.parentNode&&l.parentNode.removeChild(l)}n&&(this.vDomBottomPad+=n,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=n)}_quickNormalizeRowHeight(e){for(let i of e)i.calcHeight();for(let i of e)i.setCellHeight()}},iP=class extends Ar{constructor(e){super(e),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.placeholder=null,this.placeholderContents=null,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRenderInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.scrollbarWidth=0,this.renderer=null}createHolderElement(){var e=document.createElement("div");return e.classList.add("tabulator-tableholder"),e.setAttribute("tabindex",0),e}createTableElement(){var e=document.createElement("div");return e.classList.add("tabulator-table"),e.setAttribute("role","rowgroup"),e}initializePlaceholder(){var e=this.table.options.placeholder;if(typeof e=="function"&&(e=e.call(this.table)),e=this.chain("placeholder",[e],e,e)||e,e){let i=document.createElement("div");if(i.classList.add("tabulator-placeholder"),typeof e=="string"){let r=document.createElement("div");r.classList.add("tabulator-placeholder-contents"),r.innerHTML=e,i.appendChild(r),this.placeholderContents=r}else typeof HTMLElement<"u"&&e instanceof HTMLElement?(i.appendChild(e),this.placeholderContents=e):(console.warn("Invalid placeholder provided, must be string or HTML Element",e),this.el=null);this.placeholder=i}}getElement(){return this.element}getTableElement(){return this.tableElement}initialize(){this.initializePlaceholder(),this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var e=this.element.scrollLeft,i=this.scrollLeft>e,r=this.element.scrollTop,n=this.scrollTop>r;this.scrollLeft!=e&&(this.scrollLeft=e,this.dispatch("scroll-horizontal",e,i),this.dispatchExternal("scrollHorizontal",e,i),this._positionPlaceholder()),this.scrollTop!=r&&(this.scrollTop=r,this.renderer.scrollRows(r,n),this.dispatch("scroll-vertical",r,n),this.dispatchExternal("scrollVertical",r,n))})}findRow(e){if(typeof e=="object"){if(e instanceof Kr)return e;if(e instanceof u1)return e._getSelf()||!1;if(typeof HTMLElement<"u"&&e instanceof HTMLElement)return this.rows.find(r=>r.getElement()===e)||!1;if(e===null)return!1}else return typeof e>"u"?!1:this.rows.find(r=>r.data[this.table.options.index]==e)||!1;return!1}getRowFromDataObject(e){var i=this.rows.find(r=>r.data===e);return i||!1}getRowFromPosition(e){return this.getDisplayRows().find(i=>i.type==="row"&&i.getPosition()===e&&i.isDisplayed())}scrollToRow(e,i,r){return this.renderer.scrollToRowPosition(e,i,r)}setData(e,i,r){return new Promise((n,s)=>{i&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(e,!0):this.reRenderInPosition(()=>{this._setDataActual(e)}):(this.table.options.autoColumns&&r&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(e),this.resetScroll(),this._setDataActual(e)),n()})}_setDataActual(e,i){this.dispatchExternal("dataProcessing",e),this._wipeElements(),Array.isArray(e)?(this.dispatch("data-processing",e),e.forEach((r,n)=>{if(r&&typeof r=="object"){var s=new Kr(r,this);this.rows.push(s)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",r)}),this.refreshActiveData(!1,!1,i),this.dispatch("data-processed",e),this.dispatchExternal("dataProcessed",e)):console.error(`Data Loading Error - Unable to process data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e)}_wipeElements(){this.dispatch("rows-wipe"),this.destroy(),this.adjustTableSize(),this.dispatch("rows-wiped")}destroy(){this.rows.forEach(e=>{e.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0}deleteRow(e,i){var r=this.rows.indexOf(e),n=this.activeRows.indexOf(e);n>-1&&this.activeRows.splice(n,1),r>-1&&this.rows.splice(r,1),this.setActiveRows(this.activeRows),this.displayRowIterator(s=>{var o=s.indexOf(e);o>-1&&s.splice(o,1)}),i||this.reRenderInPosition(),this.regenerateRowPositions(),this.dispatchExternal("rowDeleted",e.getComponent()),this.displayRowsCount||this.tableEmpty(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(e,i,r,n){var s=this.addRowActual(e,i,r,n);return s}addRows(e,i,r,n){var s=[];return new Promise((o,a)=>{i=this.findAddRowPos(i),Array.isArray(e)||(e=[e]),(typeof r>"u"&&i||typeof r<"u"&&!i)&&e.reverse(),e.forEach((l,u)=>{var c=this.addRow(l,i,r,!0);s.push(c),this.dispatch("row-added",c,l,i,r)}),this.refreshActiveData(n?"displayPipeline":!1,!1,!0),this.regenerateRowPositions(),this.displayRowsCount&&this._clearPlaceholder(),o(s)})}findAddRowPos(e){return typeof e>"u"&&(e=this.table.options.addRowPos),e==="pos"&&(e=!0),e==="bottom"&&(e=!1),e}addRowActual(e,i,r,n){var s=e instanceof Kr?e:new Kr(e||{},this),o=this.findAddRowPos(i),a=-1,l,u;return r||(u=this.chain("row-adding-position",[s,o],null,{index:r,top:o}),r=u.index,o=u.top),typeof r<"u"&&(r=this.findRow(r)),r=this.chain("row-adding-index",[s,r,o],null,r),r&&(a=this.rows.indexOf(r)),r&&a>-1?(l=this.activeRows.indexOf(r),this.displayRowIterator(function(c){var h=c.indexOf(r);h>-1&&c.splice(o?h:h+1,0,s)}),l>-1&&this.activeRows.splice(o?l:l+1,0,s),this.rows.splice(o?a:a+1,0,s)):o?(this.displayRowIterator(function(c){c.unshift(s)}),this.activeRows.unshift(s),this.rows.unshift(s)):(this.displayRowIterator(function(c){c.push(s)}),this.activeRows.push(s),this.rows.push(s)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",s.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),n||this.reRenderInPosition(),s}moveRow(e,i,r){this.dispatch("row-move",e,i,r),this.moveRowActual(e,i,r),this.regenerateRowPositions(),this.dispatch("row-moved",e,i,r),this.dispatchExternal("rowMoved",e.getComponent())}moveRowActual(e,i,r){this.moveRowInArray(this.rows,e,i,r),this.moveRowInArray(this.activeRows,e,i,r),this.displayRowIterator(n=>{this.moveRowInArray(n,e,i,r)}),this.dispatch("row-moving",e,i,r)}moveRowInArray(e,i,r,n){var s,o,a,l;if(i!==r&&(s=e.indexOf(i),s>-1&&(e.splice(s,1),o=e.indexOf(r),o>-1?n?e.splice(o+1,0,i):e.splice(o,0,i):e.splice(s,0,i)),e===this.getDisplayRows())){a=s<o?s:o,l=o>s?o:s+1;for(let u=a;u<=l;u++)e[u]&&this.styleRow(e[u],u)}}clearData(){this.setData([])}getRowIndex(e){return this.findRowIndex(e,this.rows)}getDisplayRowIndex(e){var i=this.getDisplayRows().indexOf(e);return i>-1?i:!1}nextDisplayRow(e,i){var r=this.getDisplayRowIndex(e),n=!1;return r!==!1&&r<this.displayRowsCount-1&&(n=this.getDisplayRows()[r+1]),n&&(!(n instanceof Kr)||n.type!="row")?this.nextDisplayRow(n,i):n}prevDisplayRow(e,i){var r=this.getDisplayRowIndex(e),n=!1;return r&&(n=this.getDisplayRows()[r-1]),i&&n&&(!(n instanceof Kr)||n.type!="row")?this.prevDisplayRow(n,i):n}findRowIndex(e,i){var r;return e=this.findRow(e),e&&(r=i.indexOf(e),r>-1)?r:!1}getData(e,i){var r=[],n=this.getRows(e);return n.forEach(function(s){s.type=="row"&&r.push(s.getData(i||"data"))}),r}getComponents(e){var i=[],r=this.getRows(e);return r.forEach(function(n){i.push(n.getComponent())}),i}getDataCount(e){var i=this.getRows(e);return i.length}scrollHorizontal(e){this.scrollLeft=e,this.element.scrollLeft=e,this.dispatch("scroll-horizontal",e)}registerDataPipelineHandler(e,i){typeof i<"u"?(this.dataPipeline.push({handler:e,priority:i}),this.dataPipeline.sort((r,n)=>r.priority-n.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(e,i){typeof i<"u"?(this.displayPipeline.push({handler:e,priority:i}),this.displayPipeline.sort((r,n)=>r.priority-n.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(e,i,r){var n=this.table,s="",o=0,a=["all","dataPipeline","display","displayPipeline","end"];if(!this.table.destroyed){if(typeof e=="function")if(o=this.dataPipeline.findIndex(l=>l.handler===e),o>-1)s="dataPipeline",i&&(o==this.dataPipeline.length-1?s="display":o++);else if(o=this.displayPipeline.findIndex(l=>l.handler===e),o>-1)s="displayPipeline",i&&(o==this.displayPipeline.length-1?s="end":o++);else{console.error("Unable to refresh data, invalid handler provided",e);return}else s=e||"all",o=0;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===s&&o<this.redrawBlockRestoreConfig.index||a.indexOf(s)<a.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:e,skipStage:i,renderInPosition:r,stage:s,index:o});return}else Qt.elVisible(this.element)?r?this.reRenderInPosition(this.refreshPipelines.bind(this,e,s,o,r)):(this.refreshPipelines(e,s,o,r),e||this.table.columnManager.renderer.renderColumns(),this.renderTable(),n.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0)):this.refreshPipelines(e,s,o,r),this.dispatch("data-refreshed")}}refreshPipelines(e,i,r,n){switch(this.dispatch("data-refreshing"),(!e||!this.activeRowsPipeline[0])&&(this.activeRowsPipeline[0]=this.rows.slice(0)),i){case"all":case"dataPipeline":for(let s=r;s<this.dataPipeline.length;s++){let o=this.dataPipeline[s].handler(this.activeRowsPipeline[s].slice(0));this.activeRowsPipeline[s+1]=o||this.activeRowsPipeline[s].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);case"display":r=0,this.resetDisplayRows();case"displayPipeline":for(let s=r;s<this.displayPipeline.length;s++){let o=this.displayPipeline[s].handler((s?this.getDisplayRows(s-1):this.activeRows).slice(0),n);this.setDisplayRows(o||this.getDisplayRows(s-1).slice(0),s)}case"end":this.regenerateRowPositions()}this.getDisplayRows().length&&this._clearPlaceholder()}regenerateRowPositions(){var e=this.getDisplayRows(),i=1;e.forEach(r=>{r.type==="row"&&(r.setPosition(i),i++)})}setActiveRows(e){this.activeRows=this.activeRows=Object.assign([],e),this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}setDisplayRows(e,i){this.displayRows[i]=e,i==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length)}getDisplayRows(e){return typeof e>"u"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[e]||[]}getVisibleRows(e,i){var r=Object.assign([],this.renderer.visibleRows(!i));return e&&(r=this.chain("rows-visible",[i],r,r)),r}displayRowIterator(e){this.activeRowsPipeline.forEach(e),this.displayRows.forEach(e),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(e){var i=[];switch(e){case"active":i=this.activeRows;break;case"display":i=this.table.rowManager.getDisplayRows();break;case"visible":i=this.getVisibleRows(!1,!0);break;default:i=this.chain("rows-retrieve",e,null,this.rows)||this.rows}return i}reRenderInPosition(e){this.redrawBlock?e?e():this.redrawBlockRenderInPosition=!0:(this.dispatchExternal("renderStarted"),this.renderer.rerenderRows(e),this.fixedHeight||this.adjustTableSize(),this.scrollBarCheck(),this.dispatchExternal("renderComplete"))}scrollBarCheck(){var e=0;this.element.scrollHeight>this.element.clientHeight&&(e=this.element.offsetWidth-this.element.clientWidth),e!==this.scrollbarWidth&&(this.scrollbarWidth=e,this.dispatch("scrollbar-vertical",e))}initializeRenderer(){var e,i={virtual:tP,basic:eP};typeof this.table.options.renderVertical=="string"?e=i[this.table.options.renderVertical]:e=this.table.options.renderVertical,e?(this.renderMode=this.table.options.renderVertical,this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize(),(this.table.element.clientHeight||this.table.options.height)&&!(this.table.options.minHeight&&this.table.options.maxHeight)?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",this.table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.fixedHeight||this.adjustTableSize(),this.layoutRefresh(!0))):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.scrollBarCheck(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}tableEmpty(){this.renderEmptyScroll(),this._showPlaceholder()}checkPlaceholder(){this.displayRowsCount?this._clearPlaceholder():this.tableEmpty()}_showPlaceholder(){this.placeholder&&(this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.initializePlaceholder(),this.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.placeholder),this._positionPlaceholder(),this.adjustTableSize())}_clearPlaceholder(){this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.tableElement.style.minWidth="",this.tableElement.style.display=""}_positionPlaceholder(){this.placeholder&&this.placeholder.parentNode&&(this.placeholder.style.width=this.table.columnManager.getWidth()+"px",this.placeholderContents.style.width=this.table.rowManager.element.clientWidth+"px",this.placeholderContents.style.marginLeft=this.scrollLeft+"px")}styleRow(e,i){var r=e.getElement();i%2?(r.classList.add("tabulator-row-even"),r.classList.remove("tabulator-row-odd")):(r.classList.add("tabulator-row-odd"),r.classList.remove("tabulator-row-even"))}normalizeHeight(e){this.activeRows.forEach(function(i){i.normalizeHeight(e)})}adjustTableSize(){let e=this.element.clientHeight,i,r=!1;if(this.renderer.verticalFillMode==="fill"){let n=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){i=isNaN(this.table.options.minHeight)?this.table.options.minHeight:this.table.options.minHeight+"px";let s="calc(100% - "+n+"px)";this.element.style.minHeight=i||"calc(100% - "+n+"px)",this.element.style.height=s,this.element.style.maxHeight=s}else this.element.style.height="",this.element.style.height=this.table.element.clientHeight-n+"px",this.element.scrollTop=this.scrollTop;this.renderer.resize(),!this.fixedHeight&&e!=this.element.clientHeight&&(r=!0,this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw()),this.scrollBarCheck()}return this._positionPlaceholder(),r}reinitialize(){this.rows.forEach(function(e){e.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRenderInPosition&&this.reRenderInPosition(),this.redrawBlockRenderInPosition=!1}redraw(e){this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,e?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(this.scrollLeft))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var e=document.createEvent("Event");e.initEvent("scroll",!1,!0),this.element.dispatchEvent(e)}else this.element.dispatchEvent(new Event("scroll"))}},rP=class extends Ar{constructor(e){super(e),this.active=!1,this.element=this.createElement(),this.containerElement=this.createContainerElement(),this.external=!1}initialize(){this.initializeElement()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer"),e}createContainerElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer-contents"),this.element.appendChild(e),e}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":this.table.options.footerElement[0]==="<"?this.containerElement.innerHTML=this.table.options.footerElement:(this.external=!0,this.containerElement=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;break}}getElement(){return this.element}append(e){this.activate(),this.containerElement.appendChild(e),this.table.rowManager.adjustTableSize()}prepend(e){this.activate(),this.element.insertBefore(e,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(e){e.parentNode.removeChild(e),this.deactivate()}deactivate(e){(!this.element.firstChild||e)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display=""))}redraw(){this.dispatch("footer-redraw")}},nP=class extends Ar{constructor(e){super(e),this.el=null,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","mouseup","mousedown","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.pseudoTrackers={row:{subscriber:null,target:null},cell:{subscriber:null,target:null},group:{subscriber:null,target:null},column:{subscriber:null,target:null}},this.pseudoTracking=!1}initialize(){this.el=this.table.element,this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var e={};this.listeners.forEach(i=>{e[i]={handler:null,components:[]}}),this.listeners=e}bindPseudoEvents(){Object.keys(this.pseudoTrackers).forEach(e=>{this.pseudoTrackers[e].subscriber=this.pseudoMouseEnter.bind(this,e),this.subscribe(e+"-mouseover",this.pseudoTrackers[e].subscriber)}),this.pseudoTracking=!0}pseudoMouseEnter(e,i,r){this.pseudoTrackers[e].target!==r&&(this.pseudoTrackers[e].target&&this.dispatch(e+"-mouseleave",i,this.pseudoTrackers[e].target),this.pseudoMouseLeave(e,i),this.pseudoTrackers[e].target=r,this.dispatch(e+"-mouseenter",i,r))}pseudoMouseLeave(e,i){var r=Object.keys(this.pseudoTrackers),n={row:["cell"],cell:["row"]};r=r.filter(s=>{var o=n[e];return s!==e&&(!o||o&&!o.includes(s))}),r.forEach(s=>{var o=this.pseudoTrackers[s].target;this.pseudoTrackers[s].target&&(this.dispatch(s+"-mouseleave",i,o),this.pseudoTrackers[s].target=null)})}bindSubscriptionWatchers(){var e=Object.keys(this.listeners),i=Object.values(this.componentMap);for(let r of i)for(let n of e){let s=r+"-"+n;this.subscriptionChange(s,this.subscriptionChanged.bind(this,r,n))}this.subscribe("table-destroy",this.clearWatchers.bind(this))}subscriptionChanged(e,i,r){var n=this.listeners[i].components,s=n.indexOf(e),o=!1;r?s===-1&&(n.push(e),o=!0):this.subscribed(e+"-"+i)||s>-1&&(n.splice(s,1),o=!0),(i==="mouseenter"||i==="mouseleave")&&!this.pseudoTracking&&this.bindPseudoEvents(),o&&this.updateEventListeners()}updateEventListeners(){for(let e in this.listeners){let i=this.listeners[e];i.components.length?i.handler||(i.handler=this.track.bind(this,e),this.el.addEventListener(e,i.handler)):i.handler&&(this.el.removeEventListener(e,i.handler),i.handler=null)}}track(e,i){var r=i.composedPath&&i.composedPath()||i.path,n=this.findTargets(r);n=this.bindComponents(e,n),this.triggerEvents(e,i,n),this.pseudoTracking&&(e=="mouseover"||e=="mouseleave")&&!Object.keys(n).length&&this.pseudoMouseLeave("none",i)}findTargets(e){var i={};let r=Object.keys(this.componentMap);for(let n of e){let s=n.classList?[...n.classList]:[];if(s.filter(l=>this.abortClasses.includes(l)).length)break;let a=s.filter(l=>r.includes(l));for(let l of a)i[this.componentMap[l]]||(i[this.componentMap[l]]=n)}return i.group&&i.group===i.row&&delete i.row,i}bindComponents(e,i){var r=Object.keys(i).reverse(),n=this.listeners[e],s={},o={},a={};for(let l of r){let u,c=i[l],h=this.previousTargets[l];if(h&&h.target===c)u=h.component;else switch(l){case"row":case"group":(n.components.includes("row")||n.components.includes("cell")||n.components.includes("group"))&&(u=this.table.rowManager.getVisibleRows(!0).find(p=>p.getElement()===c),i.row&&i.row.parentNode&&i.row.parentNode.closest(".tabulator-row")&&(i[l]=!1));break;case"column":n.components.includes("column")&&(u=this.table.columnManager.findColumn(c));break;case"cell":n.components.includes("cell")&&(s.row instanceof Kr?u=s.row.findCell(c):i.row&&console.warn("Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?"));break}u&&(s[l]=u,a[l]={target:c,component:u})}return this.previousTargets=a,Object.keys(i).forEach(l=>{let u=s[l];o[l]=u}),o}triggerEvents(e,i,r){var n=this.listeners[e];for(let s in r)r[s]&&n.components.includes(s)&&this.dispatch(s+"-"+e,i,r[s])}clearWatchers(){for(let e in this.listeners){let i=this.listeners[e];i.handler&&(this.el.removeEventListener(e,i.handler),i.handler=null)}}},sP=class{constructor(e){this.table=e,this.bindings={}}bind(e,i,r){this.bindings[e]||(this.bindings[e]={}),this.bindings[e][i]?console.warn("Unable to bind component handler, a matching function name is already bound",e,i,r):this.bindings[e][i]=r}handle(e,i,r){if(this.bindings[e]&&this.bindings[e][r]&&typeof this.bindings[e][r].bind=="function")return this.bindings[e][r].bind(null,i);r!=="then"&&typeof r=="string"&&!r.startsWith("_")&&this.table.options.debugInvalidComponentFuncs&&console.error("The "+e+" component does not have a "+r+" function, have you checked that you have the correct Tabulator module installed?")}},oP=class extends Ar{constructor(e){super(e),this.requestOrder=0,this.loading=!1}initialize(){}load(e,i,r,n,s,o){var a=++this.requestOrder;if(this.table.destroyed)return Promise.resolve();if(this.dispatchExternal("dataLoading",e),e&&(e.indexOf("{")==0||e.indexOf("[")==0)&&(e=JSON.parse(e)),this.confirm("data-loading",[e,i,r,s])){this.loading=!0,s||this.alertLoader(),i=this.chain("data-params",[e,r,s],i||{},i||{}),i=this.mapParams(i,this.table.options.dataSendParams);var l=this.chain("data-load",[e,i,r,s],!1,Promise.resolve([]));return l.then(u=>{if(this.table.destroyed)console.warn("Data Load Response Blocked - Table has been destroyed");else{!Array.isArray(u)&&typeof u=="object"&&(u=this.mapParams(u,this.objectInvert(this.table.options.dataReceiveParams)));var c=this.chain("data-loaded",[u],null,u);a==this.requestOrder?(this.clearAlert(),c!==!1&&(this.dispatchExternal("dataLoaded",c),this.table.rowManager.setData(c,n,typeof o>"u"?!n:o))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}}).catch(u=>{console.error("Data Load Error: ",u),this.dispatchExternal("dataLoadError",u),s||this.alertError(),setTimeout(()=>{this.clearAlert()},this.table.options.dataLoaderErrorTimeout)}).finally(()=>{this.loading=!1})}else return this.dispatchExternal("dataLoaded",e),e||(e=[]),this.table.rowManager.setData(e,n,typeof o>"u"?!n:o),Promise.resolve()}mapParams(e,i){var r={};for(let n in e)r[i.hasOwnProperty(n)?i[n]:n]=e[n];return r}objectInvert(e){var i={};for(let r in e)i[e[r]]=r;return i}blockActiveLoad(){this.requestOrder++}alertLoader(){var e=typeof this.table.options.dataLoader=="function"?this.table.options.dataLoader():this.table.options.dataLoader;e&&this.table.alertManager.alert(this.table.options.dataLoaderLoading||this.langText("data|loading"))}alertError(){this.table.alertManager.alert(this.table.options.dataLoaderError||this.langText("data|error"),"error")}clearAlert(){this.table.alertManager.clear()}},aP=class{constructor(e,i,r){this.table=e,this.events={},this.optionsList=i||{},this.subscriptionNotifiers={},this.dispatch=r?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=r}subscriptionChange(e,i){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(i),this.subscribed(e)&&this._notifySubscriptionChange(e,!0)}subscribe(e,i){this.events[e]||(this.events[e]=[]),this.events[e].push(i),this._notifySubscriptionChange(e,!0)}unsubscribe(e,i){var r;if(this.events[e])if(i)if(r=this.events[e].findIndex(n=>n===i),r>-1)this.events[e].splice(r,1);else{console.warn("Cannot remove event, no matching event found:",e,i);return}else delete this.events[e];else{console.warn("Cannot remove event, no events set on:",e);return}this._notifySubscriptionChange(e,!1)}subscribed(e){return this.events[e]&&this.events[e].length}_notifySubscriptionChange(e,i){var r=this.subscriptionNotifiers[e];r&&r.forEach(n=>{n(i)})}_dispatch(){var e=Array.from(arguments),i=e.shift(),r;return this.events[i]&&this.events[i].forEach((n,s)=>{let o=n.apply(this.table,e);s||(r=o)}),r}_debugDispatch(){var e=Array.from(arguments),i=e[0];return e[0]="ExternalEvent:"+e[0],(this.debug===!0||this.debug.includes(i))&&console.log(...e),this._dispatch(...arguments)}},lP=class{constructor(e){this.events={},this.subscriptionNotifiers={},this.dispatch=e?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=e?this._debugChain.bind(this):this._chain.bind(this),this.confirm=e?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=e}subscriptionChange(e,i){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(i),this.subscribed(e)&&this._notifySubscriptionChange(e,!0)}subscribe(e,i,r=1e4){this.events[e]||(this.events[e]=[]),this.events[e].push({callback:i,priority:r}),this.events[e].sort((n,s)=>n.priority-s.priority),this._notifySubscriptionChange(e,!0)}unsubscribe(e,i){var r;if(this.events[e]){if(i)if(r=this.events[e].findIndex(n=>n.callback===i),r>-1)this.events[e].splice(r,1);else{console.warn("Cannot remove event, no matching event found:",e,i);return}}else{console.warn("Cannot remove event, no events set on:",e);return}this._notifySubscriptionChange(e,!1)}subscribed(e){return this.events[e]&&this.events[e].length}_chain(e,i,r,n){var s=r;return Array.isArray(i)||(i=[i]),this.subscribed(e)?(this.events[e].forEach((o,a)=>{s=o.callback.apply(this,i.concat([s]))}),s):typeof n=="function"?n():n}_confirm(e,i){var r=!1;return Array.isArray(i)||(i=[i]),this.subscribed(e)&&this.events[e].forEach((n,s)=>{n.callback.apply(this,i)&&(r=!0)}),r}_notifySubscriptionChange(e,i){var r=this.subscriptionNotifiers[e];r&&r.forEach(n=>{n(i)})}_dispatch(){var e=Array.from(arguments),i=e.shift();this.events[i]&&this.events[i].forEach(r=>{r.callback.apply(this,e)})}_debugDispatch(){var e=Array.from(arguments),i=e[0];return e[0]="InternalEvent:"+i,(this.debug===!0||this.debug.includes(i))&&console.log(...e),this._dispatch(...arguments)}_debugChain(){var e=Array.from(arguments),i=e[0];return e[0]="InternalEvent:"+i,(this.debug===!0||this.debug.includes(i))&&console.log(...e),this._chain(...arguments)}_debugConfirm(){var e=Array.from(arguments),i=e[0];return e[0]="InternalEvent:"+i,(this.debug===!0||this.debug.includes(i))&&console.log(...e),this._confirm(...arguments)}},uP=class extends Ar{constructor(e){super(e)}_warnUser(){this.options("debugDeprecation")&&console.warn(...arguments)}check(e,i,r){var n="";return typeof this.options(e)<"u"?(n="Deprecated Setup Option - Use of the %c"+e+"%c option is now deprecated",i?(n=n+", Please use the %c"+i+"%c option instead",this._warnUser(n,"font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;"),r&&(this.table.options[i]=this.table.options[e])):this._warnUser(n,"font-weight: bold;","font-weight: normal;"),!1):!0}checkMsg(e,i){return typeof this.options(e)<"u"?(this._warnUser("%cDeprecated Setup Option - Use of the %c"+e+" %c option is now deprecated, "+i,"font-weight: normal;","font-weight: bold;","font-weight: normal;"),!1):!0}msg(e){this._warnUser(e)}},cP=class extends Ar{constructor(e){super(e),this.deps={},this.props={}}initialize(){this.deps=Object.assign({},this.options("dependencies"))}lookup(e,i,r){if(Array.isArray(e)){for(let s of e){var n=this.lookup(s,i,!0);if(n)break}if(n)return n;this.error(e)}else return i?this.lookupProp(e,i,r):this.lookupKey(e,r)}lookupProp(e,i,r){var n;if(this.props[e]&&this.props[e][i])return this.props[e][i];if(n=this.lookupKey(e,r),n)return this.props[e]||(this.props[e]={}),this.props[e][i]=n[i]||n,this.props[e][i]}lookupKey(e,i){var r;return this.deps[e]?r=this.deps[e]:window[e]?(this.deps[e]=window[e],r=this.deps[e]):i||this.error(e),r}error(e){console.error("Unable to find dependency",e,"Please check documentation and ensure you have imported the required library into your project")}};function KDe(t,e){e&&this.table.columnManager.renderer.reinitializeColumnWidths(t),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function hre(t,e){t.forEach(function(i){i.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function JDe(t,e){var i=0,r=this.table.rowManager.element.clientWidth,n=0,s=!1;t.forEach((o,a)=>{o.widthFixed||o.reinitializeWidth(),(this.table.options.responsiveLayout?o.modules.responsive.visible:o.visible)&&(s=o),o.visible&&(i+=o.getWidth())}),s?(n=r-i+s.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(s.setWidth(0),this.table.modules.responsiveLayout.update()),n>0?s.setWidth(n):s.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function ZDe(t,e){var i=this.table.rowManager.element.getBoundingClientRect().width,r=0,n=0,s=0,o=0,a=[],l=[],u=0,c=0,h=0;function d(f){var m;return typeof f=="string"?f.indexOf("%")>-1?m=i/100*parseInt(f):m=parseInt(f):m=f,m}function p(f,m,g,b){var v=[],y=0,x=0,_=0,w=s,C=0,E=0,A=[];function D(I){return g*(I.column.definition.widthGrow||1)}function R(I){return d(I.width)-g*(I.column.definition.widthShrink||0)}return f.forEach(function(I,z){var B=b?R(I):D(I);I.column.minWidth>=B?v.push(I):I.column.maxWidth&&I.column.maxWidth<B?(I.width=I.column.maxWidth,m-=I.column.maxWidth,w-=b?I.column.definition.widthShrink||1:I.column.definition.widthGrow||1,w&&(g=Math.floor(m/w))):(A.push(I),E+=b?I.column.definition.widthShrink||1:I.column.definition.widthGrow||1)}),v.length?(v.forEach(function(I){y+=b?I.width-I.column.minWidth:I.column.minWidth,I.width=I.column.minWidth}),x=m-y,_=E?Math.floor(x/E):x,C=p(A,x,_,b)):(C=E?m-Math.floor(m/E)*E:m,A.forEach(function(I){I.width=b?R(I):D(I)})),C}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(i-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),t.forEach(function(f){var m,g,b;f.visible&&(m=f.definition.width,g=parseInt(f.minWidth),m?(b=d(m),r+=b>g?b:g,f.definition.widthShrink&&(l.push({column:f,width:b>g?b:g}),u+=f.definition.widthShrink)):(a.push({column:f,width:0}),s+=f.definition.widthGrow||1))}),n=i-r,o=Math.floor(n/s),h=p(a,n,o,!1),a.length&&h>0&&(a[a.length-1].width+=h),a.forEach(function(f){n-=f.width}),c=Math.abs(h)+n,c>0&&u&&(h=p(l,c,Math.floor(c/u),!0)),h&&l.length&&(l[l.length-1].width-=h),a.forEach(function(f){f.column.setWidth(f.width)}),l.forEach(function(f){f.column.setWidth(f.width)})}var QDe={fitData:KDe,fitDataFill:hre,fitDataTable:hre,fitDataStretch:JDe,fitColumns:ZDe},l1=class l1 extends bt{constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;l1.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode),this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){e.definition.widthGrow&&(e.definition.widthGrow=Number(e.definition.widthGrow)),e.definition.widthShrink&&(e.definition.widthShrink=Number(e.definition.widthShrink))}getMode(){return this.mode}layout(e){var i=this.table.columnManager.columnsByIndex.find(r=>r.definition.variableHeight||r.definition.formatter==="textarea");this.dispatch("layout-refreshing"),l1.modes[this.mode].call(this,this.table.columnManager.columnsByIndex,e),i&&this.table.rowManager.normalizeHeight(!0),this.dispatch("layout-refreshed")}};de(l1,"moduleName","layout"),de(l1,"modes",QDe);var hP=l1,eMe={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All",counter:{showing:"Showing",of:"of",rows:"rows",pages:"pages"}},headerFilters:{default:"filter column...",columns:{}}}},fw=class fw extends bt{constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Qt.deepClone(fw.langs),this.table.options.columnDefaults.headerFilterPlaceholder!==!1&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}installLang(e,i){this.langList[e]?this._setLangProp(this.langList[e],i):this.langList[e]=i}_setLangProp(e,i){for(let r in i)e[r]&&typeof e[r]=="object"?this._setLangProp(e[r],i[r]):e[r]=i[r]}setLocale(e){e=e||"default";function i(r,n){for(var s in r)typeof r[s]=="object"?(n[s]||(n[s]={}),i(r[s],n[s])):n[s]=r[s]}if(e===!0&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let r=e.split("-")[0];this.langList[r]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,r),e=r):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=Qt.deepClone(this.langList.default||{}),e!="default"&&i(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,i){var r=i?e+"|"+i:e,n=r.split("|"),s=this._getLangElement(n,this.locale);return s||""}_getLangElement(e,i){var r=this.lang;return e.forEach(function(n){var s;r&&(s=r[n],typeof s<"u"?r=s:r=!1)}),r}bind(e,i){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(i),i(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(i=>{i(this.getText(e),this.lang)})}};de(fw,"moduleName","localize"),de(fw,"langs",eMe);var dP=fw,NE=class extends bt{constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var i=[],r;return r=this.table.constructor.registry.lookupTable(e),r.forEach(n=>{this.table!==n&&i.push(n)}),i}send(e,i,r,n){var s=this.getConnections(e);s.forEach(o=>{o.tableComms(this.table.element,i,r,n)}),!s.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,i,r,n){if(this.table.modExists(i))return this.table.modules[i].commsReceived(e,r,n);console.warn("Inter-table Comms Error - no such module:",i)}};de(NE,"moduleName","comms");var tMe=Object.freeze({__proto__:null,CommsModule:NE,LayoutModule:hP,LocalizeModule:dP}),So=class So{static findTable(e){var i=So.registry.lookupTable(e,!0);return Array.isArray(i)&&!i.length?!1:i}};de(So,"registry",{tables:[],register(e){So.registry.tables.push(e)},deregister(e){var i=So.registry.tables.indexOf(e);i>-1&&So.registry.tables.splice(i,1)},lookupTable(e,i){var r=[],n,s;if(typeof e=="string"){if(n=document.querySelectorAll(e),n.length)for(var o=0;o<n.length;o++)s=So.registry.matchElement(n[o]),s&&r.push(s)}else typeof HTMLElement<"u"&&e instanceof HTMLElement||e instanceof So?(s=So.registry.matchElement(e),s&&r.push(s)):Array.isArray(e)?e.forEach(function(a){r=r.concat(So.registry.lookupTable(a))}):i||console.warn("Table Connection Error - Invalid Selector",e);return r},matchElement(e){return So.registry.tables.find(function(i){return e instanceof So?i===e:i.element===e})}});var fP=So,si=class si extends fP{constructor(){super()}static initializeModuleBinder(e){si.modulesRegistered||(si.modulesRegistered=!0,si._registerModules(tMe,!0),e&&si._registerModules(e))}static _extendModule(e,i,r){if(si.moduleBindings[e]){var n=si.moduleBindings[e][i];if(n)if(typeof r=="object")for(let s in r)n[s]=r[s];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",i)}else console.warn("Module Error - module does not exist:",e)}static _registerModules(e,i){var r=Object.values(e);i&&r.forEach(n=>{n.prototype.moduleCore=!0}),si._registerModule(r)}static _registerModule(e){Array.isArray(e)||(e=[e]),e.forEach(i=>{si._registerModuleBinding(i),si._registerModuleExtensions(i)})}static _registerModuleBinding(e){e.moduleName?si.moduleBindings[e.moduleName]=e:console.error("Unable to bind module, no moduleName defined",e.moduleName)}static _registerModuleExtensions(e){var i=e.moduleExtensions;if(e.moduleExtensions)for(let r in i){let n=i[r];if(si.moduleBindings[r])for(let s in n)si._extendModule(r,s,n[s]);else{si.moduleExtensions[r]||(si.moduleExtensions[r]={});for(let s in n)si.moduleExtensions[r][s]||(si.moduleExtensions[r][s]={}),Object.assign(si.moduleExtensions[r][s],n[s])}}si._extendModuleFromQueue(e)}static _extendModuleFromQueue(e){var i=si.moduleExtensions[e.moduleName];if(i)for(let r in i)si._extendModule(e.moduleName,r,i[r])}_bindModules(){var e=[],i=[],r=[];this.modules={};for(var n in si.moduleBindings){let s=si.moduleBindings[n],o=new s(this);this.modules[n]=o,s.prototype.moduleCore?this.modulesCore.push(o):s.moduleInitOrder?s.moduleInitOrder<0?e.push(o):i.push(o):r.push(o)}e.sort((s,o)=>s.moduleInitOrder>o.moduleInitOrder?1:-1),i.sort((s,o)=>s.moduleInitOrder>o.moduleInitOrder?1:-1),this.modulesRegular=e.concat(r.concat(i))}};de(si,"moduleBindings",{}),de(si,"moduleExtensions",{}),de(si,"modulesRegistered",!1),de(si,"defaultModules",!1);var pP=si,mP=class extends Ar{constructor(e){super(e),this.element=this._createAlertElement(),this.msgElement=this._createMsgElement(),this.type=null,this.element.appendChild(this.msgElement)}_createAlertElement(){var e=document.createElement("div");return e.classList.add("tabulator-alert"),e}_createMsgElement(){var e=document.createElement("div");return e.classList.add("tabulator-alert-msg"),e.setAttribute("role","alert"),e}_typeClass(){return"tabulator-alert-state-"+this.type}alert(e,i="msg"){if(e){for(this.clear(),this.dispatch("alert-show",i),this.type=i;this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.add(this._typeClass()),typeof e=="function"&&(e=e()),e instanceof HTMLElement?this.msgElement.appendChild(e):this.msgElement.innerHTML=e,this.table.element.appendChild(this.element)}}clear(){this.dispatch("alert-hide",this.type),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.msgElement.classList.remove(this._typeClass())}},Ic=class Ic extends pP{static extendModule(){Ic.initializeModuleBinder(),Ic._extendModule(...arguments)}static registerModule(){Ic.initializeModuleBinder(),Ic._registerModule(...arguments)}constructor(e,i,r){super(),Ic.initializeModuleBinder(r),this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.alertManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new sP(this),this.dataLoader=!1,this.modules={},this.modulesCore=[],this.modulesRegular=[],this.deprecationAdvisor=new uP(this),this.optionsList=new jE(this,"table constructor"),this.dependencyRegistry=new cP(this),this.initialized=!1,this.destroyed=!1,this.initializeElement(e)&&(this.initializeCoreSystems(i),setTimeout(()=>{this._create()})),this.constructor.registry.register(this)}initializeElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement?(this.element=e,!0):typeof e=="string"?(this.element=document.querySelector(e),this.element?!0:(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initializeCoreSystems(e){this.columnManager=new QO(this),this.rowManager=new iP(this),this.footerManager=new rP(this),this.dataLoader=new oP(this),this.alertManager=new mP(this),this._bindModules(),this.options=this.optionsList.generate(Ic.defaultOptions,e),this._clearObjectPointers(),this._mapDeprecatedFunctionality(),this.externalEvents=new aP(this,this.options,this.options.debugEventsExternal),this.eventBus=new lP(this.options.debugEventsInternal),this.interactionMonitor=new nP(this),this.dataLoader.initialize(),this.footerManager.initialize(),this.dependencyRegistry.initialize()}_mapDeprecatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this.initialized=!0,this._loadInitialData().finally(()=>{this.eventBus.dispatch("table-initialized"),this.externalEvents.dispatch("tableBuilt")})}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(e.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),Array.isArray(this.options.data)&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var e=this.element,i=this.options,r;if(e.tagName==="TABLE"){this.originalElement=this.element,r=document.createElement("div");var n=e.attributes;for(var s in n)typeof n[s]=="object"&&r.setAttribute(n[s].name,n[s].value);e.parentNode.replaceChild(r,e),this.element=e=r}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);i.height&&(i.height=isNaN(i.height)?i.height:i.height+"px",e.style.height=i.height),i.minHeight!==!1&&(i.minHeight=isNaN(i.minHeight)?i.minHeight:i.minHeight+"px",e.style.minHeight=i.minHeight),i.maxHeight!==!1&&(i.maxHeight=isNaN(i.maxHeight)?i.maxHeight:i.maxHeight+"px",e.style.maxHeight=i.maxHeight)}_initializeTable(){var e=this.element,i=this.options;this.interactionMonitor.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modulesCore.forEach(r=>{r.initialize()}),e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),i.footerElement&&this.footerManager.activate(),i.autoColumns&&i.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modulesRegular.forEach(r=>{r.initialize()}),this.columnManager.setColumns(i.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){return this.dataLoader.load(this.options.data).finally(()=>{this.columnManager.verticalAlignHeaders()})}destroy(){var e=this.element;for(this.destroyed=!0,this.constructor.registry.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.destroy();e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator"),this.externalEvents.dispatch("tableDestroyed")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):e.indexOf("Mac OS")>-1?(this.browser="safari",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.slice(0,4))}initGuard(e,i){var r,n;return this.options.debugInitialization&&!this.initialized&&(e||(r=new Error().stack.split(`
`),n=r[0]=="Error"?r[2]:r[1],n[0]==" "?e=n.trim().split(" ")[1].split(".")[1]:e=n.trim().split("@")[0]),console.warn("Table Not Initialized - Calling the "+e+" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function."+(i?" "+i:""))),this.initialized}blockRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-blocking"),this.rowManager.blockRedraw(),this.columnManager.blockRedraw(),this.eventBus.dispatch("redraw-blocked")}restoreRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-restoring"),this.rowManager.restoreRedraw(),this.columnManager.restoreRedraw(),this.eventBus.dispatch("redraw-restored")}setData(e,i,r){return this.initGuard(!1,"To set initial data please use the 'data' property in the table constructor."),this.dataLoader.load(e,i,r,!1)}clearData(){this.initGuard(),this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,i,r){return this.initGuard(),this.dataLoader.load(e,i,r,!0,!0)}updateData(e){var i=0;return this.initGuard(),new Promise((r,n)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(s=>{var o=this.rowManager.findRow(s[this.options.index]);o?(i++,o.updateData(s).then(()=>{i--,i||r()}).catch(a=>{n("Update Error - Unable to update row",s,a)})):n("Update Error - Unable to find row",s)}):(console.warn("Update Error - No data provided"),n("Update Error - No data provided"))})}addData(e,i,r){return this.initGuard(),new Promise((n,s)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,i,r).then(o=>{var a=[];o.forEach(function(l){a.push(l.getComponent())}),n(a)}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})}updateOrAddData(e){var i=[],r=0;return this.initGuard(),new Promise((n,s)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(o=>{var a=this.rowManager.findRow(o[this.options.index]);r++,a?a.updateData(o).then(()=>{r--,i.push(a.getComponent()),r||n(i)}):this.rowManager.addRows(o).then(l=>{r--,i.push(l[0].getComponent()),r||n(i)})}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})}getRow(e){var i=this.rowManager.findRow(e);return i?i.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e){var i=this.rowManager.getRowFromPosition(e);return i?i.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var i=[];this.initGuard(),Array.isArray(e)||(e=[e]);for(let r of e){let n=this.rowManager.findRow(r,!0);if(n)i.push(n);else return console.error("Delete Error - No matching row found:",r),Promise.reject("Delete Error - No matching row found")}return i.sort((r,n)=>this.rowManager.rows.indexOf(r)>this.rowManager.rows.indexOf(n)?1:-1),i.forEach(r=>{r.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,i,r){return this.initGuard(),typeof e=="string"&&(e=JSON.parse(e)),this.rowManager.addRows(e,i,r,!0).then(n=>n[0].getComponent())}updateOrAddRow(e,i){var r=this.rowManager.findRow(e);return this.initGuard(),typeof i=="string"&&(i=JSON.parse(i)),r?r.updateData(i).then(()=>r.getComponent()):this.rowManager.addRows(i).then(n=>n[0].getComponent())}updateRow(e,i){var r=this.rowManager.findRow(e);return this.initGuard(),typeof i=="string"&&(i=JSON.parse(i)),r?r.updateData(i).then(()=>Promise.resolve(r.getComponent())):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,i,r){var n=this.rowManager.findRow(e);return n?this.rowManager.scrollToRow(n,i,r):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,i,r){var n=this.rowManager.findRow(e);this.initGuard(),n?n.moveToRow(i,r):console.warn("Move Error - No matching row found:",e)}getRows(e){return this.rowManager.getComponents(e)}getRowPosition(e){var i=this.rowManager.findRow(e);return i?i.getPosition():(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initGuard(!1,"To set initial columns please use the 'columns' property in the table constructor"),this.columnManager.setColumns(e)}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var i=this.columnManager.findColumn(e);return i?i.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var i=this.columnManager.findColumn(e);if(this.initGuard(),i)i.show();else return console.warn("Column Show Error - No matching column found:",e),!1}hideColumn(e){var i=this.columnManager.findColumn(e);if(this.initGuard(),i)i.hide();else return console.warn("Column Hide Error - No matching column found:",e),!1}toggleColumn(e){var i=this.columnManager.findColumn(e);if(this.initGuard(),i)i.visible?i.hide():i.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1}addColumn(e,i,r){var n=this.columnManager.findColumn(r);return this.initGuard(),this.columnManager.addColumn(e,i,n).then(s=>s.getComponent())}deleteColumn(e){var i=this.columnManager.findColumn(e);return this.initGuard(),i?i.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,i){var r=this.columnManager.findColumn(e);return this.initGuard(),r?r.updateDefinition(i):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,i,r){var n=this.columnManager.findColumn(e),s=this.columnManager.findColumn(i);this.initGuard(),n?s?this.columnManager.moveColumn(n,s,r):console.warn("Move Error - No matching column found:",s):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,i,r){return new Promise((n,s)=>{var o=this.columnManager.findColumn(e);return o?this.columnManager.scrollToColumn(o,i,r):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initGuard(),this.columnManager.redraw(e),this.rowManager.redraw(e)}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw(!0)}on(e,i){this.externalEvents.subscribe(e,i)}off(e,i){this.externalEvents.unsubscribe(e,i)}dispatchEvent(){var e=Array.from(arguments);e.shift(),this.externalEvents.dispatch(...arguments)}alert(e,i){this.initGuard(),this.alertManager.alert(e,i)}clearAlert(){this.initGuard(),this.alertManager.clear()}modExists(e,i){return this.modules[e]?!0:(i&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var i=this.modules[e];return i||console.error("Tabulator module not installed: "+e),i}};de(Ic,"defaultOptions",YDe);var gP=Ic,sw=gP,bP=class extends sw{static extendModule(){sw.initializeModuleBinder(EO),sw._extendModule(...arguments)}static registerModule(){sw.initializeModuleBinder(EO),sw._registerModule(...arguments)}constructor(e,i,r){super(e,i,EO)}},mre=bP;var iMe=[{id:1,name:"Oli Bob",progress:42,gender:"Male",rating:4,driver:!0,location:"Brighton",birthday:"1984-04-14"},{id:2,name:"Mary May",progress:68,gender:"Female",rating:5,driver:!0,location:"London",birthday:"1986-05-21"},{id:3,name:"Christine Lobowski",progress:15,gender:"Female",rating:3,driver:!1,location:"Manchester",birthday:"1992-02-22"},{id:4,name:"Brendon Philips",progress:82,gender:"Male",rating:4,driver:!0,location:"Bristol",birthday:"1990-07-14"},{id:5,name:"Margret Marmajuke",progress:33,gender:"Female",rating:2,driver:!1,location:"Newcastle",birthday:"1999-02-11"},{id:6,name:"Van Ng",progress:54,gender:"Male",rating:4,driver:!0,location:"Cardiff",birthday:"1997-06-09"}],rMe=[{title:"Name",field:"name",frozen:!0,widthGrow:1.4,minWidth:150},{title:"Progress",field:"progress",formatter:"progress",sorter:"number",hozAlign:"left",formatterParams:{color:"var(--tbx-grid-accent)"},widthGrow:1,minWidth:120},{title:"Gender",field:"gender",sorter:"string",widthGrow:.9,minWidth:110},{title:"Rating",field:"rating",formatter:"star",hozAlign:"center",widthGrow:1,minWidth:130},{title:"Driver",field:"driver",formatter:"tickCross",hozAlign:"center",widthGrow:.8,minWidth:110},{title:"Location",field:"location",widthGrow:1.1,minWidth:140},{title:"Birthday",field:"birthday",sorter:"date",hozAlign:"center",widthGrow:1,minWidth:140}],nMe={layout:"fitColumns",responsiveLayout:!1},sMe={minWidth:120,resizable:!0,hozAlign:"left"},oMe=typeof globalThis<"u"&&typeof globalThis.requestAnimationFrame=="function"?globalThis.requestAnimationFrame.bind(globalThis):t=>{setTimeout(()=>{let e=typeof performance<"u"?performance.now():Date.now();t(e)},16)},aMe=ze`
  :host {
    display: block;
    color: inherit;
    contain: content;
    --tbx-grid-font-size: 0.95rem;
    --tbx-grid-radius: 0.75rem;
    --tbx-grid-surface: #ffffff;
    --tbx-grid-surface-alt: #f9fafb;
    --tbx-grid-header-bg: #f3f4f6;
    --tbx-grid-header-text: #1f2937;
    --tbx-grid-text: #111827;
    --tbx-grid-muted: #4b5563;
    --tbx-grid-border: #e5e7eb;
    --tbx-grid-border-strong: #d1d5db;
    --tbx-grid-row-hover: rgba(37, 99, 235, 0.08);
    --tbx-grid-row-selected: rgba(37, 99, 235, 0.18);
    --tbx-grid-accent: #2563eb;
    --tbx-grid-tick: #16a34a;
    --tbx-grid-cross: #dc2626;
    --tbx-grid-star-active: #fbbf24;
    --tbx-grid-star-stroke: #b45309;
    --tbx-grid-star-inactive: #d1d5db;
  }

  :host([hidden]) {
    display: none !important;
  }

  :host([data-theme='dark']) {
    --tbx-grid-surface: #14161b;
    --tbx-grid-surface-alt: #1b1d23;
    --tbx-grid-header-bg: #1f2128;
    --tbx-grid-header-text: #f4f6fb;
    --tbx-grid-text: #e2e5ed;
    --tbx-grid-muted: #9ca3b5;
    --tbx-grid-border: #30333c;
    --tbx-grid-border-strong: #3d404b;
    --tbx-grid-row-hover: rgba(148, 163, 184, 0.12);
    --tbx-grid-row-selected: rgba(96, 165, 250, 0.18);
    --tbx-grid-accent: #60a5fa;
    --tbx-grid-tick: #34d399;
    --tbx-grid-cross: #f87171;
    --tbx-grid-star-active: #facc15;
    --tbx-grid-star-stroke: #f59e0b;
    --tbx-grid-star-inactive: #4b5563;
  }

  #grid {
    width: 100%;
    min-height: 240px;
    font-family: inherit;
  }

  .tabulator,
  .tabulator * {
    box-sizing: border-box;
  }

  .tabulator {
    background-color: var(--tbx-grid-surface);
    color: var(--tbx-grid-text);
    border: 1px solid var(--tbx-grid-border);
    border-radius: var(--tbx-grid-radius);
    font-family: inherit;
    font-size: var(--tbx-grid-font-size);
    overflow: hidden;
    position: relative;
    text-align: left;
  }

  .tabulator .tabulator-header {
    background-color: var(--tbx-grid-header-bg);
    color: var(--tbx-grid-header-text);
    border-bottom: 1px solid var(--tbx-grid-border);
    position: relative;
    overflow: hidden;
    width: 100%;
    white-space: nowrap;
  }

  .tabulator .tabulator-header .tabulator-header-contents {
    overflow: hidden;
    position: relative;
  }

  .tabulator .tabulator-header .tabulator-headers {
    display: inline-flex;
  }

  .tabulator .tabulator-header .tabulator-col {
    display: inline-flex;
    flex-direction: column;
    justify-content: center;
    background: transparent;
    border-right: 1px solid var(--tbx-grid-border);
    min-height: 2.1rem;
    max-width: 18rem;
    min-width: fit-content;
  }

  .tabulator .tabulator-header .tabulator-col.tabulator-frozen {
    background-color: var(--tbx-grid-header-bg);
    box-shadow: 1px 0 0 var(--tbx-grid-border);
    position: sticky;
    left: 0;
    z-index: 3;
  }

  .tabulator .tabulator-header .tabulator-col:last-of-type {
    border-right: none;
  }

  .tabulator .tabulator-header .tabulator-col .tabulator-col-content {
    padding: 0.28rem 0.5rem;
    position: relative;
  }

  .tabulator .tabulator-header .tabulator-col .tabulator-col-title {
    font-weight: 600;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    padding-right: 1rem;
  }

  .tabulator .tabulator-header .tabulator-col .tabulator-col-sorter {
    align-items: center;
    display: flex;
    position: absolute;
    right: 0.28rem;
    top: 0;
    bottom: 0;
    width: 0.9rem;
  }

  .tabulator .tabulator-header .tabulator-col .tabulator-col-sorter .tabulator-arrow {
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 6px solid var(--tbx-grid-muted);
    transition: transform 0.12s ease;
  }

  .tabulator .tabulator-header .tabulator-col[aria-sort='ascending'] .tabulator-arrow {
    transform: rotate(180deg);
  }

  .tabulator .tabulator-header .tabulator-col[aria-sort='ascending'] .tabulator-arrow,
  .tabulator .tabulator-header .tabulator-col[aria-sort='descending'] .tabulator-arrow {
    border-top-color: var(--tbx-grid-text);
  }

  .tabulator .tabulator-tableholder {
    position: relative;
    overflow: auto;
    background-color: var(--tbx-grid-surface);
    border-top: 1px solid var(--tbx-grid-border);
    border-bottom: 1px solid var(--tbx-grid-border);
  }

  .tabulator .tabulator-table {
    display: inline-block;
    min-width: max-content;
    background-color: inherit;
    color: inherit;
  }

  .tabulator .tabulator-row {
    background-color: var(--tbx-grid-surface);
    border-bottom: 1px solid var(--tbx-grid-border);
    transition: background-color 0.15s ease;
  }

  .tabulator .tabulator-row:nth-of-type(even) {
    background-color: var(--tbx-grid-surface-alt);
  }

  .tabulator .tabulator-row:hover {
    background-color: var(--tbx-grid-row-hover);
  }

  .tabulator .tabulator-row.tabulator-selected {
    background-color: var(--tbx-grid-row-selected);
  }

  .tabulator .tabulator-row .tabulator-cell {
    display: inline-flex;
    align-items: center;
    gap: 0.18rem;
    padding: 0.32rem 0.55rem;
    border-right: 1px solid var(--tbx-grid-border);
    background-color: inherit;
    color: inherit;
    min-height: 2rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    vertical-align: middle;
    position: relative;
  }

  .tabulator .tabulator-row .tabulator-cell:last-of-type {
    border-right: none;
  }

  .tabulator .tabulator-row .tabulator-cell .tabulator-data-tree-branch {
    border-color: var(--tbx-grid-border);
  }

  .tabulator .tabulator-row .tabulator-cell.tabulator-frozen {
    background-color: var(--tbx-grid-surface);
    box-shadow: 1px 0 0 var(--tbx-grid-border);
    position: sticky;
    left: 0;
    z-index: 2;
  }

  .tabulator .tabulator-row .tabulator-cell > div[data-max] {
    height: 0.45rem !important;
    border-radius: 999px;
    margin: 0.3rem 0;
    flex: 1 1 auto;
    width: 100%;
    background-color: var(--tbx-grid-accent);
  }

  .tabulator .tabulator-row .tabulator-cell > div[data-max] > div {
    height: 100% !important;
    border-radius: inherit;
  }

  .tabulator .tabulator-footer {
    background-color: var(--tbx-grid-surface-alt);
    border-top: 1px solid var(--tbx-grid-border);
    color: var(--tbx-grid-muted);
    font-size: 0.85rem;
    padding: 0.5rem 0.75rem;
  }

  .tabulator svg path[fill='#2DC214'] {
    fill: var(--tbx-grid-tick);
  }

  .tabulator svg path[fill='#CE1515'] {
    fill: var(--tbx-grid-cross);
  }

  .tabulator svg polygon[fill='#FFEA00'] {
    fill: var(--tbx-grid-star-active);
  }

  .tabulator svg polygon[fill='#D2D2D2'] {
    fill: var(--tbx-grid-star-inactive);
  }

  .tabulator svg polygon[stroke='#C1AB60'] {
    stroke: var(--tbx-grid-star-stroke);
  }

  .tabulator svg polygon[stroke='#686868'] {
    stroke: var(--tbx-grid-border-strong);
  }
`,Bc=class extends Su(ui){constructor(){super(...arguments);this.data=iMe;this.columns=rMe;this.redrawQueued=!1;this.currentTheme=$x()}connectedCallback(){super.connectedCallback(),this.applyTheme(this.currentTheme),typeof ResizeObserver<"u"&&(this.resizeObserver=new ResizeObserver(()=>{this.queueRedraw()}),this.resizeObserver.observe(this)),this.unsubscribeTheme=Hx(i=>{this.applyTheme(i)&&this.queueRedraw()})}firstUpdated(){this.initializeTable()}updated(i){if(super.updated(i),this.table==null){this.gridContainer!=null&&this.initializeTable();return}if(i.has("options")){this.initializeTable();return}i.has("columns")&&this.syncColumns(),i.has("data")&&this.syncData()}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.disconnect(),this.resizeObserver=void 0,this.unsubscribeTheme!=null&&(this.unsubscribeTheme(),this.unsubscribeTheme=void 0),this.destroyTable()}render(){return X`<div id="grid" part="grid"></div>`}initializeTable(){this.gridContainer!=null&&(this.destroyTable(),this.table=new mre(this.gridContainer,this.composeOptions()),this.queueRedraw())}destroyTable(){this.table!=null&&(this.table.destroy(),this.table=void 0,this.gridContainer?.replaceChildren())}composeOptions(){let{data:i,columns:r,columnDefaults:n,...s}=this.options??{};return{...nMe,...s,columnDefaults:{...sMe,...n??{}},data:i??this.data,columns:r??this.columns}}getResolvedData(){return this.options?.data??this.data}getResolvedColumns(){return this.options?.columns??this.columns}syncColumns(){this.table!=null&&(this.table.setColumns(this.getResolvedColumns()),this.queueRedraw())}async syncData(){this.table!=null&&(await this.table.replaceData(this.getResolvedData()),this.queueRedraw())}queueRedraw(){this.table==null||this.redrawQueued||(this.redrawQueued=!0,oMe(()=>{this.redrawQueued=!1,this.table?.redraw(!0)}))}applyTheme(i){let r=this.currentTheme!==i||this.getAttribute("data-theme")!==i;return this.currentTheme=i,this.setAttribute("data-theme",i),this.style.colorScheme=i,r}};Bc.styles=aMe,Ct([U({attribute:!1})],Bc.prototype,"data",2),Ct([U({attribute:!1})],Bc.prototype,"columns",2),Ct([U({attribute:!1})],Bc.prototype,"options",2),Ct([Ne("#grid")],Bc.prototype,"gridContainer",2),Bc=Ct([xn("tbx-grid")],Bc);function _P(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Up=_P();function wre(t){Up=t}var bw={exec:()=>null};function Gt(t,e=""){let i=typeof t=="string"?t:t.source,r={replace:(n,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(vs.caret,"$1"),i=i.replace(n,o),r},getRegex:()=>new RegExp(i,e)};return r}var vs={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},lMe=/^(?:[ \t]*(?:\n|$))+/,uMe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,cMe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,vw=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,hMe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,CP=/(?:[*+-]|\d{1,9}[.)])/,_re=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Cre=Gt(_re).replace(/bull/g,CP).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),dMe=Gt(_re).replace(/bull/g,CP).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),SP=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,fMe=/^[^\n]+/,EP=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,pMe=Gt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",EP).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),mMe=Gt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,CP).getRegex(),ZE="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kP=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,gMe=Gt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",kP).replace("tag",ZE).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Sre=Gt(SP).replace("hr",vw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ZE).getRegex(),bMe=Gt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Sre).getRegex(),AP={blockquote:bMe,code:uMe,def:pMe,fences:cMe,heading:hMe,hr:vw,html:gMe,lheading:Cre,list:mMe,newline:lMe,paragraph:Sre,table:bw,text:fMe},gre=Gt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",vw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ZE).getRegex(),vMe={...AP,lheading:dMe,table:gre,paragraph:Gt(SP).replace("hr",vw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",gre).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ZE).getRegex()},yMe={...AP,html:Gt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",kP).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:bw,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Gt(SP).replace("hr",vw).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Cre).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},xMe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,wMe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ere=/^( {2,}|\\)\n(?!\s*$)/,_Me=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,QE=/[\p{P}\p{S}]/u,TP=/[\s\p{P}\p{S}]/u,kre=/[^\s\p{P}\p{S}]/u,CMe=Gt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,TP).getRegex(),Are=/(?!~)[\p{P}\p{S}]/u,SMe=/(?!~)[\s\p{P}\p{S}]/u,EMe=/(?:[^\s\p{P}\p{S}]|~)/u,kMe=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,Tre=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,AMe=Gt(Tre,"u").replace(/punct/g,QE).getRegex(),TMe=Gt(Tre,"u").replace(/punct/g,Are).getRegex(),Rre="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",RMe=Gt(Rre,"gu").replace(/notPunctSpace/g,kre).replace(/punctSpace/g,TP).replace(/punct/g,QE).getRegex(),DMe=Gt(Rre,"gu").replace(/notPunctSpace/g,EMe).replace(/punctSpace/g,SMe).replace(/punct/g,Are).getRegex(),MMe=Gt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,kre).replace(/punctSpace/g,TP).replace(/punct/g,QE).getRegex(),FMe=Gt(/\\(punct)/,"gu").replace(/punct/g,QE).getRegex(),LMe=Gt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),OMe=Gt(kP).replace("(?:-->|$)","-->").getRegex(),PMe=Gt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",OMe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),YE=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,zMe=Gt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",YE).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Dre=Gt(/^!?\[(label)\]\[(ref)\]/).replace("label",YE).replace("ref",EP).getRegex(),Mre=Gt(/^!?\[(ref)\](?:\[\])?/).replace("ref",EP).getRegex(),IMe=Gt("reflink|nolink(?!\\()","g").replace("reflink",Dre).replace("nolink",Mre).getRegex(),RP={_backpedal:bw,anyPunctuation:FMe,autolink:LMe,blockSkip:kMe,br:Ere,code:wMe,del:bw,emStrongLDelim:AMe,emStrongRDelimAst:RMe,emStrongRDelimUnd:MMe,escape:xMe,link:zMe,nolink:Mre,punctuation:CMe,reflink:Dre,reflinkSearch:IMe,tag:PMe,text:_Me,url:bw},BMe={...RP,link:Gt(/^!?\[(label)\]\((.*?)\)/).replace("label",YE).getRegex(),reflink:Gt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",YE).getRegex()},yP={...RP,emStrongRDelimAst:DMe,emStrongLDelim:TMe,url:Gt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},NMe={...yP,br:Gt(Ere).replace("{2,}","*").getRegex(),text:Gt(yP.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},GE={normal:AP,gfm:vMe,pedantic:yMe},pw={normal:RP,gfm:yP,breaks:NMe,pedantic:BMe},$Me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bre=t=>$Me[t];function cu(t,e){if(e){if(vs.escapeTest.test(t))return t.replace(vs.escapeReplace,bre)}else if(vs.escapeTestNoEncode.test(t))return t.replace(vs.escapeReplaceNoEncode,bre);return t}function vre(t){try{t=encodeURI(t).replace(vs.percentDecode,"%")}catch{return null}return t}function yre(t,e){let i=t.replace(vs.findPipe,(s,o,a)=>{let l=!1,u=o;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),r=i.split(vs.splitPipe),n=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(vs.slashPipe,"|");return r}function mw(t,e,i){let r=t.length;if(r===0)return"";let n=0;for(;n<r;){let s=t.charAt(r-n-1);if(s===e&&!i)n++;else if(s!==e&&i)n++;else break}return t.slice(0,r-n)}function HMe(t,e){if(t.indexOf(e[1])===-1)return-1;let i=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&(i--,i<0))return r;return i>0?-2:-1}function xre(t,e,i,r,n){let s=e.href,o=e.title||null,a=t[1].replace(n.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:i,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function UMe(t,e,i){let r=t.match(i.other.indentCodeCompensation);if(r===null)return e;let n=r[1];return e.split(`
`).map(s=>{let o=s.match(i.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=n.length?s.slice(n.length):s}).join(`
`)}var KE=class{constructor(t){de(this,"options");de(this,"rules");de(this,"lexer");this.options=t||Up}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let i=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:mw(i,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let i=e[0],r=UMe(i,e[3]||"",this.rules);return{type:"code",raw:i,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let i=e[2].trim();if(this.rules.other.endingHash.test(i)){let r=mw(i,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(i=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:mw(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let i=mw(e[0],`
`).split(`
`),r="",n="",s=[];for(;i.length>0;){let o=!1,a=[],l;for(l=0;l<i.length;l++)if(this.rules.other.blockquoteStart.test(i[l]))a.push(i[l]),o=!0;else if(!o)a.push(i[l]);else break;i=i.slice(l);let u=a.join(`
`),c=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,n=n?`${n}
${c}`:c;let h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,s,!0),this.lexer.state.top=h,i.length===0)break;let d=s.at(-1);if(d?.type==="code")break;if(d?.type==="blockquote"){let p=d,f=p.raw+`
`+i.join(`
`),m=this.blockquote(f);s[s.length-1]=m,r=r.substring(0,r.length-p.raw.length)+m.raw,n=n.substring(0,n.length-p.text.length)+m.text;break}else if(d?.type==="list"){let p=d,f=p.raw+`
`+i.join(`
`),m=this.list(f);s[s.length-1]=m,r=r.substring(0,r.length-d.raw.length)+m.raw,n=n.substring(0,n.length-p.raw.length)+m.raw,i=f.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let i=e[1].trim(),r=i.length>1,n={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");let s=this.rules.other.listItemRegex(i),o=!1;for(;t;){let l=!1,u="",c="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;u=e[0],t=t.substring(u.length);let h=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),d=t.split(`
`,1)[0],p=!h.trim(),f=0;if(this.options.pedantic?(f=2,c=h.trimStart()):p?f=e[1].length+1:(f=e[2].search(this.rules.other.nonSpaceChar),f=f>4?1:f,c=h.slice(f),f+=e[1].length),p&&this.rules.other.blankLine.test(d)&&(u+=d+`
`,t=t.substring(d.length+1),l=!0),!l){let b=this.rules.other.nextBulletRegex(f),v=this.rules.other.hrRegex(f),y=this.rules.other.fencesBeginRegex(f),x=this.rules.other.headingBeginRegex(f),_=this.rules.other.htmlBeginRegex(f);for(;t;){let w=t.split(`
`,1)[0],C;if(d=w,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),C=d):C=d.replace(this.rules.other.tabCharGlobal,"    "),y.test(d)||x.test(d)||_.test(d)||b.test(d)||v.test(d))break;if(C.search(this.rules.other.nonSpaceChar)>=f||!d.trim())c+=`
`+C.slice(f);else{if(p||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||y.test(h)||x.test(h)||v.test(h))break;c+=`
`+d}!p&&!d.trim()&&(p=!0),u+=w+`
`,t=t.substring(w.length+1),h=C.slice(f)}}n.loose||(o?n.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0));let m=null,g;this.options.gfm&&(m=this.rules.other.listIsTask.exec(c),m&&(g=m[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:u,task:!!m,checked:g,loose:!1,text:c,tokens:[]}),n.raw+=u}let a=n.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let l=0;l<n.items.length;l++)if(this.lexer.state.top=!1,n.items[l].tokens=this.lexer.blockTokens(n.items[l].text,[]),!n.loose){let u=n.items[l].tokens.filter(h=>h.type==="space"),c=u.length>0&&u.some(h=>this.rules.other.anyLine.test(h.raw));n.loose=c}if(n.loose)for(let l=0;l<n.items.length;l++)n.items[l].loose=!0;return n}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let i=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:i,raw:e[0],href:r,title:n}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let i=yre(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(i.length===r.length){for(let o of r)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<i.length;o++)s.header.push({text:i[o],tokens:this.lexer.inline(i[o]),header:!0,align:s.align[o]});for(let o of n)s.rows.push(yre(o,s.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:s.align[l]})));return s}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let i=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:i,tokens:this.lexer.inline(i)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let i=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(i)){if(!this.rules.other.endAngleBracket.test(i))return;let s=mw(i.slice(0,-1),"\\");if((i.length-s.length)%2===0)return}else{let s=HMe(e[2],"()");if(s===-2)return;if(s>-1){let o=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let r=e[2],n="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],n=s[3])}else n=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(i)?r=r.slice(1):r=r.slice(1,-1)),xre(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){let r=(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=e[r.toLowerCase()];if(!n){let s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return xre(i,n,i[0],this.lexer,this.rules)}}emStrong(t,e,i=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!i||this.rules.inline.punctuation.exec(i))){let n=[...r[0]].length-1,s,o,a=n,l=0,u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*t.length+n);(r=u.exec(e))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(o=[...s].length,r[3]||r[4]){a+=o;continue}else if((r[5]||r[6])&&n%3&&!((n+o)%3)){l+=o;continue}if(a-=o,a>0)continue;o=Math.min(o,o+a+l);let c=[...r[0]][0].length,h=t.slice(0,n+r.index+c+o);if(Math.min(n,o)%2){let p=h.slice(1,-1);return{type:"em",raw:h,text:p,tokens:this.lexer.inlineTokens(p)}}let d=h.slice(2,-2);return{type:"strong",raw:h,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let i=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(i),n=this.rules.other.startingSpaceChar.test(i)&&this.rules.other.endingSpaceChar.test(i);return r&&n&&(i=i.substring(1,i.length-1)),{type:"codespan",raw:e[0],text:i}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let i,r;return e[2]==="@"?(i=e[1],r="mailto:"+i):(i=e[1],r=i),{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let i,r;if(e[2]==="@")i=e[0],r="mailto:"+i;else{let n;do n=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(n!==e[0]);i=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let i=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:i}}}},Nc=class xP{constructor(e){de(this,"tokens");de(this,"options");de(this,"state");de(this,"tokenizer");de(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Up,this.options.tokenizer=this.options.tokenizer||new KE,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let i={other:vs,block:GE.normal,inline:pw.normal};this.options.pedantic?(i.block=GE.pedantic,i.inline=pw.pedantic):this.options.gfm&&(i.block=GE.gfm,this.options.breaks?i.inline=pw.breaks:i.inline=pw.gfm),this.tokenizer.rules=i}static get rules(){return{block:GE,inline:pw}}static lex(e,i){return new xP(i).lex(e)}static lexInline(e,i){return new xP(i).inlineTokens(e)}lex(e){e=e.replace(vs.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){let r=this.inlineQueue[i];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,i=[],r=!1){for(this.options.pedantic&&(e=e.replace(vs.tabCharGlobal,"    ").replace(vs.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(o=>(n=o.call({lexer:this},e,i))?(e=e.substring(n.raw.length),i.push(n),!0):!1))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let o=i.at(-1);n.raw.length===1&&o!==void 0?o.raw+=`
`:i.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let o=i.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.at(-1).src=o.text):i.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let o=i.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},i.push(n));continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),i.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),i.push(n);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){let o=i.at(-1);r&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):i.push(n),r=s.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let o=i.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):i.push(n);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,i}inline(e,i=[]){return this.inlineQueue.push({src:e,tokens:i}),i}inlineTokens(e,i=[]){let r=e,n=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)a.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,n.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let s=!1,o="";for(;e;){s||(o=""),s=!1;let a;if(this.options.extensions?.inline?.some(u=>(a=u.call({lexer:this},e,i))?(e=e.substring(a.raw.length),i.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let u=i.at(-1);a.type==="text"&&u?.type==="text"?(u.raw+=a.raw,u.text+=a.text):i.push(a);continue}if(a=this.tokenizer.emStrong(e,r,o)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),i.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),i.push(a);continue}let l=e;if(this.options.extensions?.startInline){let u=1/0,c=e.slice(1),h;this.options.extensions.startInline.forEach(d=>{h=d.call({lexer:this},c),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(l=e.substring(0,u+1))}if(a=this.tokenizer.inlineText(l)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(o=a.raw.slice(-1)),s=!0;let u=i.at(-1);u?.type==="text"?(u.raw+=a.raw,u.text+=a.text):i.push(a);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return i}},JE=class{constructor(t){de(this,"options");de(this,"parser");this.options=t||Up}space(t){return""}code({text:t,lang:e,escaped:i}){let r=(e||"").match(vs.notSpaceStart)?.[0],n=t.replace(vs.endingNewline,"")+`
`;return r?'<pre><code class="language-'+cu(r)+'">'+(i?n:cu(n,!0))+`</code></pre>
`:"<pre><code>"+(i?n:cu(n,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,i=t.start,r="";for(let o=0;o<t.items.length;o++){let a=t.items[o];r+=this.listitem(a)}let n=e?"ol":"ul",s=e&&i!==1?' start="'+i+'"':"";return"<"+n+s+`>
`+r+"</"+n+`>
`}listitem(t){let e="";if(t.task){let i=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+cu(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):e+=i+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",i="";for(let n=0;n<t.header.length;n++)i+=this.tablecell(t.header[n]);e+=this.tablerow({text:i});let r="";for(let n=0;n<t.rows.length;n++){let s=t.rows[n];i="";for(let o=0;o<s.length;o++)i+=this.tablecell(s[o]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${cu(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:i}){let r=this.parser.parseInline(i),n=vre(t);if(n===null)return r;t=n;let s='<a href="'+t+'"';return e&&(s+=' title="'+cu(e)+'"'),s+=">"+r+"</a>",s}image({href:t,title:e,text:i,tokens:r}){r&&(i=this.parser.parseInline(r,this.parser.textRenderer));let n=vre(t);if(n===null)return cu(i);t=n;let s=`<img src="${t}" alt="${i}"`;return e&&(s+=` title="${cu(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:cu(t.text)}},DP=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},$c=class wP{constructor(e){de(this,"options");de(this,"renderer");de(this,"textRenderer");this.options=e||Up,this.options.renderer=this.options.renderer||new JE,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new DP}static parse(e,i){return new wP(i).parse(e)}static parseInline(e,i){return new wP(i).parseInline(e)}parse(e,i=!0){let r="";for(let n=0;n<e.length;n++){let s=e[n];if(this.options.extensions?.renderers?.[s.type]){let a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){r+=l||"";continue}}let o=s;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"def":{r+=this.renderer.def(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;n+1<e.length&&e[n+1].type==="text";)a=e[++n],l+=`
`+this.renderer.text(a);i?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,i=this.renderer){let r="";for(let n=0;n<e.length;n++){let s=e[n];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=a||"";continue}}let o=s;switch(o.type){case"escape":{r+=i.text(o);break}case"html":{r+=i.html(o);break}case"link":{r+=i.link(o);break}case"image":{r+=i.image(o);break}case"strong":{r+=i.strong(o);break}case"em":{r+=i.em(o);break}case"codespan":{r+=i.codespan(o);break}case"br":{r+=i.br(o);break}case"del":{r+=i.del(o);break}case"text":{r+=i.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},XE,gw=(XE=class{constructor(t){de(this,"options");de(this,"block");this.options=t||Up}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Nc.lex:Nc.lexInline}provideParser(){return this.block?$c.parse:$c.parseInline}},de(XE,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),de(XE,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),XE),WMe=class{constructor(...t){de(this,"defaults",_P());de(this,"options",this.setOptions);de(this,"parse",this.parseMarkdown(!0));de(this,"parseInline",this.parseMarkdown(!1));de(this,"Parser",$c);de(this,"Renderer",JE);de(this,"TextRenderer",DP);de(this,"Lexer",Nc);de(this,"Tokenizer",KE);de(this,"Hooks",gw);this.use(...t)}walkTokens(t,e){let i=[];for(let r of t)switch(i=i.concat(e.call(this,r)),r.type){case"table":{let n=r;for(let s of n.header)i=i.concat(this.walkTokens(s.tokens,e));for(let s of n.rows)for(let o of s)i=i.concat(this.walkTokens(o.tokens,e));break}case"list":{let n=r;i=i.concat(this.walkTokens(n.items,e));break}default:{let n=r;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(s=>{let o=n[s].flat(1/0);i=i.concat(this.walkTokens(o,e))}):n.tokens&&(i=i.concat(this.walkTokens(n.tokens,e)))}}return i}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{let r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let s=e.renderers[n.name];s?e.renderers[n.name]=function(...o){let a=n.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:e.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[n.level];s?s.unshift(n.tokenizer):e[n.level]=[n.tokenizer],n.start&&(n.level==="block"?e.startBlock?e.startBlock.push(n.start):e.startBlock=[n.start]:n.level==="inline"&&(e.startInline?e.startInline.push(n.start):e.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(e.childTokens[n.name]=n.childTokens)}),r.extensions=e),i.renderer){let n=this.defaults.renderer||new JE(this.defaults);for(let s in i.renderer){if(!(s in n))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let o=s,a=i.renderer[o],l=n[o];n[o]=(...u)=>{let c=a.apply(n,u);return c===!1&&(c=l.apply(n,u)),c||""}}r.renderer=n}if(i.tokenizer){let n=this.defaults.tokenizer||new KE(this.defaults);for(let s in i.tokenizer){if(!(s in n))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let o=s,a=i.tokenizer[o],l=n[o];n[o]=(...u)=>{let c=a.apply(n,u);return c===!1&&(c=l.apply(n,u)),c}}r.tokenizer=n}if(i.hooks){let n=this.defaults.hooks||new gw;for(let s in i.hooks){if(!(s in n))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let o=s,a=i.hooks[o],l=n[o];gw.passThroughHooks.has(s)?n[o]=u=>{if(this.defaults.async&&gw.passThroughHooksRespectAsync.has(s))return Promise.resolve(a.call(n,u)).then(h=>l.call(n,h));let c=a.call(n,u);return l.call(n,c)}:n[o]=(...u)=>{let c=a.apply(n,u);return c===!1&&(c=l.apply(n,u)),c}}r.hooks=n}if(i.walkTokens){let n=this.defaults.walkTokens,s=i.walkTokens;r.walkTokens=function(o){let a=[];return a.push(s.call(this,o)),n&&(a=a.concat(n.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Nc.lex(t,e??this.defaults)}parser(t,e){return $c.parse(t,e??this.defaults)}parseMarkdown(t){return(e,i)=>{let r={...i},n={...this.defaults,...r},s=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=t);let o=n.hooks?n.hooks.provideLexer():t?Nc.lex:Nc.lexInline,a=n.hooks?n.hooks.provideParser():t?$c.parse:$c.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(e):e).then(l=>o(l,n)).then(l=>n.hooks?n.hooks.processAllTokens(l):l).then(l=>n.walkTokens?Promise.all(this.walkTokens(l,n.walkTokens)).then(()=>l):l).then(l=>a(l,n)).then(l=>n.hooks?n.hooks.postprocess(l):l).catch(s);try{n.hooks&&(e=n.hooks.preprocess(e));let l=o(e,n);n.hooks&&(l=n.hooks.processAllTokens(l)),n.walkTokens&&this.walkTokens(l,n.walkTokens);let u=a(l,n);return n.hooks&&(u=n.hooks.postprocess(u)),u}catch(l){return s(l)}}}onError(t,e){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+cu(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(i);throw i}}},Hp=new WMe;function jt(t,e){return Hp.parse(t,e)}jt.options=jt.setOptions=function(t){return Hp.setOptions(t),jt.defaults=Hp.defaults,wre(jt.defaults),jt};jt.getDefaults=_P;jt.defaults=Up;jt.use=function(...t){return Hp.use(...t),jt.defaults=Hp.defaults,wre(jt.defaults),jt};jt.walkTokens=function(t,e){return Hp.walkTokens(t,e)};jt.parseInline=Hp.parseInline;jt.Parser=$c;jt.parser=$c.parse;jt.Renderer=JE;jt.TextRenderer=DP;jt.Lexer=Nc;jt.lexer=Nc.lex;jt.Tokenizer=KE;jt.Hooks=gw;jt.parse=jt;var LBt=jt.options,OBt=jt.setOptions,PBt=jt.use,zBt=jt.walkTokens,IBt=jt.parseInline;var BBt=$c.parse,NBt=Nc.lex;var Eo=class t{constructor(e,i,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=i,this.end=r}static range(e,i){return i?!e||!e.loc||!i.loc||e.loc.lexer!==i.loc.lexer?null:new t(e.loc.lexer,e.loc.start,i.loc.end):e&&e.loc}},pa=class t{constructor(e,i){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=i}range(e,i){return new t(i,Eo.range(this,e))}},Ee=class t{constructor(e,i){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+e,n,s,o=i&&i.loc;if(o&&o.start<=o.end){var a=o.lexer.input;n=o.start,s=o.end,n===a.length?r+=" at end of input: ":r+=" at position "+(n+1)+": ";var l=a.slice(n,s).replace(/[^]/g,"$&\u0332"),u;n>15?u="\u2026"+a.slice(n-15,n):u=a.slice(0,n);var c;s+15<a.length?c=a.slice(s,s+15)+"\u2026":c=a.slice(s),r+=u+l+c}var h=new Error(r);return h.name="ParseError",h.__proto__=t.prototype,h.position=n,n!=null&&s!=null&&(h.length=s-n),h.rawMessage=e,h}};Ee.prototype.__proto__=Error.prototype;var VMe=function(e,i){return e.indexOf(i)!==-1},jMe=function(e,i){return e===void 0?i:e},qMe=/([A-Z])/g,GMe=function(e){return e.replace(qMe,"-$1").toLowerCase()},XMe={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},YMe=/[&><"']/g;function KMe(t){return String(t).replace(YMe,e=>XMe[e])}var une=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},JMe=function(e){var i=une(e);return i.type==="mathord"||i.type==="textord"||i.type==="atom"},ZMe=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},QMe=function(e){var i=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return i?i[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(i[1])?null:i[1].toLowerCase():"_relative"},Qe={contains:VMe,deflt:jMe,escape:KMe,hyphenate:GMe,getBaseElem:une,isCharacterBox:JMe,protocolFromUrl:QMe},h6={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function eFe(t){if(t.default)return t.default;var e=t.type,i=Array.isArray(e)?e[0]:e;if(typeof i!="string")return i.enum[0];switch(i){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}var Cw=class{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var i in h6)if(h6.hasOwnProperty(i)){var r=h6[i];this[i]=e[i]!==void 0?r.processor?r.processor(e[i]):e[i]:eFe(r)}}reportNonstrict(e,i,r){var n=this.strict;if(typeof n=="function"&&(n=n(e,i,r)),!(!n||n==="ignore")){if(n===!0||n==="error")throw new Ee("LaTeX-incompatible input and strict mode is set to 'error': "+(i+" ["+e+"]"),r);n==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(i+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+n+"': "+i+" ["+e+"]"))}}useStrictBehavior(e,i,r){var n=this.strict;if(typeof n=="function")try{n=n(e,i,r)}catch{n="error"}return!n||n==="ignore"?!1:n===!0||n==="error"?!0:n==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(i+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+n+"': "+i+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var i=Qe.protocolFromUrl(e.url);if(i==null)return!1;e.protocol=i}var r=typeof this.trust=="function"?this.trust(e):this.trust;return!!r}},hu=class{constructor(e,i,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=i,this.cramped=r}sup(){return du[tFe[this.id]]}sub(){return du[iFe[this.id]]}fracNum(){return du[rFe[this.id]]}fracDen(){return du[nFe[this.id]]}cramp(){return du[sFe[this.id]]}text(){return du[oFe[this.id]]}isTight(){return this.size>=2}},iz=0,f6=1,d1=2,Wc=3,Sw=4,da=5,f1=6,xs=7,du=[new hu(iz,0,!1),new hu(f6,0,!0),new hu(d1,1,!1),new hu(Wc,1,!0),new hu(Sw,2,!1),new hu(da,2,!0),new hu(f1,3,!1),new hu(xs,3,!0)],tFe=[Sw,da,Sw,da,f1,xs,f1,xs],iFe=[da,da,da,da,xs,xs,xs,xs],rFe=[d1,Wc,Sw,da,f1,xs,f1,xs],nFe=[Wc,Wc,da,da,xs,xs,xs,xs],sFe=[f6,f6,Wc,Wc,da,da,xs,xs],oFe=[iz,f6,d1,Wc,d1,Wc,d1,Wc],rt={DISPLAY:du[iz],TEXT:du[d1],SCRIPT:du[Sw],SCRIPTSCRIPT:du[f1]},VP=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function aFe(t){for(var e=0;e<VP.length;e++)for(var i=VP[e],r=0;r<i.blocks.length;r++){var n=i.blocks[r];if(t>=n[0]&&t<=n[1])return i.name}return null}var d6=[];VP.forEach(t=>t.blocks.forEach(e=>d6.push(...e)));function cne(t){for(var e=0;e<d6.length;e+=2)if(t>=d6[e]&&t<=d6[e+1])return!0;return!1}var h1=80,lFe=function(e,i){return"M95,"+(622+e+i)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+i+"h400000v"+(40+e)+"h-400000z"},uFe=function(e,i){return"M263,"+(601+e+i)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+i+"h400000v"+(40+e)+"h-400000z"},cFe=function(e,i){return"M983 "+(10+e+i)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+i+"h400000v"+(40+e)+"h-400000z"},hFe=function(e,i){return"M424,"+(2398+e+i)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+i+`
h400000v`+(40+e)+"h-400000z"},dFe=function(e,i){return"M473,"+(2713+e+i)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+i+"h400000v"+(40+e)+"H1017.7z"},fFe=function(e){var i=e/2;return"M400000 "+e+" H0 L"+i+" 0 l65 45 L145 "+(e-80)+" H400000z"},pFe=function(e,i,r){var n=r-54-i-e;return"M702 "+(e+i)+"H400000"+(40+e)+`
H742v`+n+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+i+"H400000v"+(40+e)+"H742z"},mFe=function(e,i,r){i=1e3*i;var n="";switch(e){case"sqrtMain":n=lFe(i,h1);break;case"sqrtSize1":n=uFe(i,h1);break;case"sqrtSize2":n=cFe(i,h1);break;case"sqrtSize3":n=hFe(i,h1);break;case"sqrtSize4":n=dFe(i,h1);break;case"sqrtTall":n=pFe(i,h1,r)}return n},gFe=function(e,i){switch(e){case"\u239C":return"M291 0 H417 V"+i+" H291z M291 0 H417 V"+i+" H291z";case"\u2223":return"M145 0 H188 V"+i+" H145z M145 0 H188 V"+i+" H145z";case"\u2225":return"M145 0 H188 V"+i+" H145z M145 0 H188 V"+i+" H145z"+("M367 0 H410 V"+i+" H367z M367 0 H410 V"+i+" H367z");case"\u239F":return"M457 0 H583 V"+i+" H457z M457 0 H583 V"+i+" H457z";case"\u23A2":return"M319 0 H403 V"+i+" H319z M319 0 H403 V"+i+" H319z";case"\u23A5":return"M263 0 H347 V"+i+" H263z M263 0 H347 V"+i+" H263z";case"\u23AA":return"M384 0 H504 V"+i+" H384z M384 0 H504 V"+i+" H384z";case"\u23D0":return"M312 0 H355 V"+i+" H312z M312 0 H355 V"+i+" H312z";case"\u2016":return"M257 0 H300 V"+i+" H257z M257 0 H300 V"+i+" H257z"+("M478 0 H521 V"+i+" H478z M478 0 H521 V"+i+" H478z");default:return""}},Fre={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},bFe=function(e,i){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+i+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+i+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+i+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+i+" v1759 h84z";case"vert":return"M145 15 v585 v"+i+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-i+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+i+" v585 h43z";case"doublevert":return"M145 15 v585 v"+i+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-i+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+i+` v585 h43z
M367 15 v585 v`+i+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-i+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+i+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+i+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+i+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+i+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+i+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+i+` v602 h84z
M403 1759 V0 H319 V1759 v`+i+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+i+` v602 h84z
M347 1759 V0 h-84 V1759 v`+i+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(i+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(i+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(i+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(i+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}},Vp=class{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return Qe.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),i=0;i<this.children.length;i++)e.appendChild(this.children[i].toNode());return e}toMarkup(){for(var e="",i=0;i<this.children.length;i++)e+=this.children[i].toMarkup();return e}toText(){var e=i=>i.toText();return this.children.map(e).join("")}},fu={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},e6={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Lre={\u00C5:"A",\u00D0:"D",\u00DE:"o",\u00E5:"a",\u00F0:"d",\u00FE:"o",\u0410:"A",\u0411:"B",\u0412:"B",\u0413:"F",\u0414:"A",\u0415:"E",\u0416:"K",\u0417:"3",\u0418:"N",\u0419:"N",\u041A:"K",\u041B:"N",\u041C:"M",\u041D:"H",\u041E:"O",\u041F:"N",\u0420:"P",\u0421:"C",\u0422:"T",\u0423:"y",\u0424:"O",\u0425:"X",\u0426:"U",\u0427:"h",\u0428:"W",\u0429:"W",\u042A:"B",\u042B:"X",\u042C:"B",\u042D:"3",\u042E:"X",\u042F:"R",\u0430:"a",\u0431:"b",\u0432:"a",\u0433:"r",\u0434:"y",\u0435:"e",\u0436:"m",\u0437:"e",\u0438:"n",\u0439:"n",\u043A:"n",\u043B:"n",\u043C:"m",\u043D:"n",\u043E:"o",\u043F:"n",\u0440:"p",\u0441:"c",\u0442:"o",\u0443:"y",\u0444:"b",\u0445:"x",\u0446:"n",\u0447:"n",\u0448:"w",\u0449:"w",\u044A:"a",\u044B:"m",\u044C:"a",\u044D:"e",\u044E:"m",\u044F:"r"};function vFe(t,e){fu[t]=e}function rz(t,e,i){if(!fu[e])throw new Error("Font metrics not found for font: "+e+".");var r=t.charCodeAt(0),n=fu[e][r];if(!n&&t[0]in Lre&&(r=Lre[t[0]].charCodeAt(0),n=fu[e][r]),!n&&i==="text"&&cne(r)&&(n=fu[e][77]),n)return{depth:n[0],height:n[1],italic:n[2],skew:n[3],width:n[4]}}var MP={};function yFe(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!MP[e]){var i=MP[e]={cssEmPerMu:e6.quad[e]/18};for(var r in e6)e6.hasOwnProperty(r)&&(i[r]=e6[r][e])}return MP[e]}var xFe=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Ore=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Pre=function(e,i){return i.size<2?e:xFe[e-1][i.size-1]},p6=class t{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||t.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=Ore[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var i={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return new t(i)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:Pre(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:Ore[e-1]})}havingBaseStyle(e){e=e||this.style.text();var i=Pre(t.BASESIZE,e);return this.size===i&&this.textSize===t.BASESIZE&&this.style===e?this:this.extend({style:e,size:i})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==t.BASESIZE?["sizing","reset-size"+this.size,"size"+t.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=yFe(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}};p6.BASESIZE=6;var jP={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},wFe={ex:!0,em:!0,mu:!0},hne=function(e){return typeof e!="string"&&(e=e.unit),e in jP||e in wFe||e==="ex"},Ii=function(e,i){var r;if(e.unit in jP)r=jP[e.unit]/i.fontMetrics().ptPerEm/i.sizeMultiplier;else if(e.unit==="mu")r=i.fontMetrics().cssEmPerMu;else{var n;if(i.style.isTight()?n=i.havingStyle(i.style.text()):n=i,e.unit==="ex")r=n.fontMetrics().xHeight;else if(e.unit==="em")r=n.fontMetrics().quad;else throw new Ee("Invalid unit: '"+e.unit+"'");n!==i&&(r*=n.sizeMultiplier/i.sizeMultiplier)}return Math.min(e.number*r,i.maxSize)},Re=function(e){return+e.toFixed(4)+"em"},Dd=function(e){return e.filter(i=>i).join(" ")},dne=function(e,i,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},i){i.style.isTight()&&this.classes.push("mtight");var n=i.getColor();n&&(this.style.color=n)}},fne=function(e){var i=document.createElement(e);i.className=Dd(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(i.style[r]=this.style[r]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&i.setAttribute(n,this.attributes[n]);for(var s=0;s<this.children.length;s++)i.appendChild(this.children[s].toNode());return i},_Fe=/[\s"'>/=\x00-\x1f]/,pne=function(e){var i="<"+e;this.classes.length&&(i+=' class="'+Qe.escape(Dd(this.classes))+'"');var r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Qe.hyphenate(n)+":"+this.style[n]+";");r&&(i+=' style="'+Qe.escape(r)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(_Fe.test(s))throw new Ee("Invalid attribute name '"+s+"'");i+=" "+s+'="'+Qe.escape(this.attributes[s])+'"'}i+=">";for(var o=0;o<this.children.length;o++)i+=this.children[o].toMarkup();return i+="</"+e+">",i},jp=class{constructor(e,i,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,dne.call(this,e,r,n),this.children=i||[]}setAttribute(e,i){this.attributes[e]=i}hasClass(e){return Qe.contains(this.classes,e)}toNode(){return fne.call(this,"span")}toMarkup(){return pne.call(this,"span")}},Ew=class{constructor(e,i,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,dne.call(this,i,n),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,i){this.attributes[e]=i}hasClass(e){return Qe.contains(this.classes,e)}toNode(){return fne.call(this,"a")}toMarkup(){return pne.call(this,"a")}},qP=class{constructor(e,i,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=i,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return Qe.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var i in this.style)this.style.hasOwnProperty(i)&&(e.style[i]=this.style[i]);return e}toMarkup(){var e='<img src="'+Qe.escape(this.src)+'"'+(' alt="'+Qe.escape(this.alt)+'"'),i="";for(var r in this.style)this.style.hasOwnProperty(r)&&(i+=Qe.hyphenate(r)+":"+this.style[r]+";");return i&&(e+=' style="'+Qe.escape(i)+'"'),e+="'/>",e}},CFe={\u00EE:"\u0131\u0302",\u00EF:"\u0131\u0308",\u00ED:"\u0131\u0301",\u00EC:"\u0131\u0300"},Zs=class{constructor(e,i,r,n,s,o,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=i||0,this.depth=r||0,this.italic=n||0,this.skew=s||0,this.width=o||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var u=aFe(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=CFe[this.text])}hasClass(e){return Qe.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),i=null;this.italic>0&&(i=document.createElement("span"),i.style.marginRight=Re(this.italic)),this.classes.length>0&&(i=i||document.createElement("span"),i.className=Dd(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(i=i||document.createElement("span"),i.style[r]=this.style[r]);return i?(i.appendChild(e),i):e}toMarkup(){var e=!1,i="<span";this.classes.length&&(e=!0,i+=' class="',i+=Qe.escape(Dd(this.classes)),i+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Qe.hyphenate(n)+":"+this.style[n]+";");r&&(e=!0,i+=' style="'+Qe.escape(r)+'"');var s=Qe.escape(this.text);return e?(i+=">",i+=s,i+="</span>",i):s}},fl=class{constructor(e,i){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=i||{}}toNode(){var e="http://www.w3.org/2000/svg",i=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&i.setAttribute(r,this.attributes[r]);for(var n=0;n<this.children.length;n++)i.appendChild(this.children[n].toNode());return i}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&(e+=" "+i+'="'+Qe.escape(this.attributes[i])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}},pu=class{constructor(e,i){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=i}toNode(){var e="http://www.w3.org/2000/svg",i=document.createElementNS(e,"path");return this.alternate?i.setAttribute("d",this.alternate):i.setAttribute("d",Fre[this.pathName]),i}toMarkup(){return this.alternate?'<path d="'+Qe.escape(this.alternate)+'"/>':'<path d="'+Qe.escape(Fre[this.pathName])+'"/>'}},kw=class{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",i=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&i.setAttribute(r,this.attributes[r]);return i}toMarkup(){var e="<line";for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&(e+=" "+i+'="'+Qe.escape(this.attributes[i])+'"');return e+="/>",e}};function zre(t){if(t instanceof Zs)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function SFe(t){if(t instanceof jp)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var EFe={bin:1,close:1,inner:1,open:1,punct:1,rel:1},kFe={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},mi={math:{},text:{}};function S(t,e,i,r,n,s){mi[t][n]={font:e,group:i,replace:r},s&&r&&(mi[t][r]=mi[t][n])}var k="math",xe="text",M="main",V="ams",Ti="accent-token",Be="bin",ws="close",p1="inner",it="mathord",gr="op-token",ko="open",w6="punct",j="rel",Gc="spacing",q="textord";S(k,M,j,"\u2261","\\equiv",!0);S(k,M,j,"\u227A","\\prec",!0);S(k,M,j,"\u227B","\\succ",!0);S(k,M,j,"\u223C","\\sim",!0);S(k,M,j,"\u22A5","\\perp");S(k,M,j,"\u2AAF","\\preceq",!0);S(k,M,j,"\u2AB0","\\succeq",!0);S(k,M,j,"\u2243","\\simeq",!0);S(k,M,j,"\u2223","\\mid",!0);S(k,M,j,"\u226A","\\ll",!0);S(k,M,j,"\u226B","\\gg",!0);S(k,M,j,"\u224D","\\asymp",!0);S(k,M,j,"\u2225","\\parallel");S(k,M,j,"\u22C8","\\bowtie",!0);S(k,M,j,"\u2323","\\smile",!0);S(k,M,j,"\u2291","\\sqsubseteq",!0);S(k,M,j,"\u2292","\\sqsupseteq",!0);S(k,M,j,"\u2250","\\doteq",!0);S(k,M,j,"\u2322","\\frown",!0);S(k,M,j,"\u220B","\\ni",!0);S(k,M,j,"\u221D","\\propto",!0);S(k,M,j,"\u22A2","\\vdash",!0);S(k,M,j,"\u22A3","\\dashv",!0);S(k,M,j,"\u220B","\\owns");S(k,M,w6,".","\\ldotp");S(k,M,w6,"\u22C5","\\cdotp");S(k,M,q,"#","\\#");S(xe,M,q,"#","\\#");S(k,M,q,"&","\\&");S(xe,M,q,"&","\\&");S(k,M,q,"\u2135","\\aleph",!0);S(k,M,q,"\u2200","\\forall",!0);S(k,M,q,"\u210F","\\hbar",!0);S(k,M,q,"\u2203","\\exists",!0);S(k,M,q,"\u2207","\\nabla",!0);S(k,M,q,"\u266D","\\flat",!0);S(k,M,q,"\u2113","\\ell",!0);S(k,M,q,"\u266E","\\natural",!0);S(k,M,q,"\u2663","\\clubsuit",!0);S(k,M,q,"\u2118","\\wp",!0);S(k,M,q,"\u266F","\\sharp",!0);S(k,M,q,"\u2662","\\diamondsuit",!0);S(k,M,q,"\u211C","\\Re",!0);S(k,M,q,"\u2661","\\heartsuit",!0);S(k,M,q,"\u2111","\\Im",!0);S(k,M,q,"\u2660","\\spadesuit",!0);S(k,M,q,"\xA7","\\S",!0);S(xe,M,q,"\xA7","\\S");S(k,M,q,"\xB6","\\P",!0);S(xe,M,q,"\xB6","\\P");S(k,M,q,"\u2020","\\dag");S(xe,M,q,"\u2020","\\dag");S(xe,M,q,"\u2020","\\textdagger");S(k,M,q,"\u2021","\\ddag");S(xe,M,q,"\u2021","\\ddag");S(xe,M,q,"\u2021","\\textdaggerdbl");S(k,M,ws,"\u23B1","\\rmoustache",!0);S(k,M,ko,"\u23B0","\\lmoustache",!0);S(k,M,ws,"\u27EF","\\rgroup",!0);S(k,M,ko,"\u27EE","\\lgroup",!0);S(k,M,Be,"\u2213","\\mp",!0);S(k,M,Be,"\u2296","\\ominus",!0);S(k,M,Be,"\u228E","\\uplus",!0);S(k,M,Be,"\u2293","\\sqcap",!0);S(k,M,Be,"\u2217","\\ast");S(k,M,Be,"\u2294","\\sqcup",!0);S(k,M,Be,"\u25EF","\\bigcirc",!0);S(k,M,Be,"\u2219","\\bullet",!0);S(k,M,Be,"\u2021","\\ddagger");S(k,M,Be,"\u2240","\\wr",!0);S(k,M,Be,"\u2A3F","\\amalg");S(k,M,Be,"&","\\And");S(k,M,j,"\u27F5","\\longleftarrow",!0);S(k,M,j,"\u21D0","\\Leftarrow",!0);S(k,M,j,"\u27F8","\\Longleftarrow",!0);S(k,M,j,"\u27F6","\\longrightarrow",!0);S(k,M,j,"\u21D2","\\Rightarrow",!0);S(k,M,j,"\u27F9","\\Longrightarrow",!0);S(k,M,j,"\u2194","\\leftrightarrow",!0);S(k,M,j,"\u27F7","\\longleftrightarrow",!0);S(k,M,j,"\u21D4","\\Leftrightarrow",!0);S(k,M,j,"\u27FA","\\Longleftrightarrow",!0);S(k,M,j,"\u21A6","\\mapsto",!0);S(k,M,j,"\u27FC","\\longmapsto",!0);S(k,M,j,"\u2197","\\nearrow",!0);S(k,M,j,"\u21A9","\\hookleftarrow",!0);S(k,M,j,"\u21AA","\\hookrightarrow",!0);S(k,M,j,"\u2198","\\searrow",!0);S(k,M,j,"\u21BC","\\leftharpoonup",!0);S(k,M,j,"\u21C0","\\rightharpoonup",!0);S(k,M,j,"\u2199","\\swarrow",!0);S(k,M,j,"\u21BD","\\leftharpoondown",!0);S(k,M,j,"\u21C1","\\rightharpoondown",!0);S(k,M,j,"\u2196","\\nwarrow",!0);S(k,M,j,"\u21CC","\\rightleftharpoons",!0);S(k,V,j,"\u226E","\\nless",!0);S(k,V,j,"\uE010","\\@nleqslant");S(k,V,j,"\uE011","\\@nleqq");S(k,V,j,"\u2A87","\\lneq",!0);S(k,V,j,"\u2268","\\lneqq",!0);S(k,V,j,"\uE00C","\\@lvertneqq");S(k,V,j,"\u22E6","\\lnsim",!0);S(k,V,j,"\u2A89","\\lnapprox",!0);S(k,V,j,"\u2280","\\nprec",!0);S(k,V,j,"\u22E0","\\npreceq",!0);S(k,V,j,"\u22E8","\\precnsim",!0);S(k,V,j,"\u2AB9","\\precnapprox",!0);S(k,V,j,"\u2241","\\nsim",!0);S(k,V,j,"\uE006","\\@nshortmid");S(k,V,j,"\u2224","\\nmid",!0);S(k,V,j,"\u22AC","\\nvdash",!0);S(k,V,j,"\u22AD","\\nvDash",!0);S(k,V,j,"\u22EA","\\ntriangleleft");S(k,V,j,"\u22EC","\\ntrianglelefteq",!0);S(k,V,j,"\u228A","\\subsetneq",!0);S(k,V,j,"\uE01A","\\@varsubsetneq");S(k,V,j,"\u2ACB","\\subsetneqq",!0);S(k,V,j,"\uE017","\\@varsubsetneqq");S(k,V,j,"\u226F","\\ngtr",!0);S(k,V,j,"\uE00F","\\@ngeqslant");S(k,V,j,"\uE00E","\\@ngeqq");S(k,V,j,"\u2A88","\\gneq",!0);S(k,V,j,"\u2269","\\gneqq",!0);S(k,V,j,"\uE00D","\\@gvertneqq");S(k,V,j,"\u22E7","\\gnsim",!0);S(k,V,j,"\u2A8A","\\gnapprox",!0);S(k,V,j,"\u2281","\\nsucc",!0);S(k,V,j,"\u22E1","\\nsucceq",!0);S(k,V,j,"\u22E9","\\succnsim",!0);S(k,V,j,"\u2ABA","\\succnapprox",!0);S(k,V,j,"\u2246","\\ncong",!0);S(k,V,j,"\uE007","\\@nshortparallel");S(k,V,j,"\u2226","\\nparallel",!0);S(k,V,j,"\u22AF","\\nVDash",!0);S(k,V,j,"\u22EB","\\ntriangleright");S(k,V,j,"\u22ED","\\ntrianglerighteq",!0);S(k,V,j,"\uE018","\\@nsupseteqq");S(k,V,j,"\u228B","\\supsetneq",!0);S(k,V,j,"\uE01B","\\@varsupsetneq");S(k,V,j,"\u2ACC","\\supsetneqq",!0);S(k,V,j,"\uE019","\\@varsupsetneqq");S(k,V,j,"\u22AE","\\nVdash",!0);S(k,V,j,"\u2AB5","\\precneqq",!0);S(k,V,j,"\u2AB6","\\succneqq",!0);S(k,V,j,"\uE016","\\@nsubseteqq");S(k,V,Be,"\u22B4","\\unlhd");S(k,V,Be,"\u22B5","\\unrhd");S(k,V,j,"\u219A","\\nleftarrow",!0);S(k,V,j,"\u219B","\\nrightarrow",!0);S(k,V,j,"\u21CD","\\nLeftarrow",!0);S(k,V,j,"\u21CF","\\nRightarrow",!0);S(k,V,j,"\u21AE","\\nleftrightarrow",!0);S(k,V,j,"\u21CE","\\nLeftrightarrow",!0);S(k,V,j,"\u25B3","\\vartriangle");S(k,V,q,"\u210F","\\hslash");S(k,V,q,"\u25BD","\\triangledown");S(k,V,q,"\u25CA","\\lozenge");S(k,V,q,"\u24C8","\\circledS");S(k,V,q,"\xAE","\\circledR");S(xe,V,q,"\xAE","\\circledR");S(k,V,q,"\u2221","\\measuredangle",!0);S(k,V,q,"\u2204","\\nexists");S(k,V,q,"\u2127","\\mho");S(k,V,q,"\u2132","\\Finv",!0);S(k,V,q,"\u2141","\\Game",!0);S(k,V,q,"\u2035","\\backprime");S(k,V,q,"\u25B2","\\blacktriangle");S(k,V,q,"\u25BC","\\blacktriangledown");S(k,V,q,"\u25A0","\\blacksquare");S(k,V,q,"\u29EB","\\blacklozenge");S(k,V,q,"\u2605","\\bigstar");S(k,V,q,"\u2222","\\sphericalangle",!0);S(k,V,q,"\u2201","\\complement",!0);S(k,V,q,"\xF0","\\eth",!0);S(xe,M,q,"\xF0","\xF0");S(k,V,q,"\u2571","\\diagup");S(k,V,q,"\u2572","\\diagdown");S(k,V,q,"\u25A1","\\square");S(k,V,q,"\u25A1","\\Box");S(k,V,q,"\u25CA","\\Diamond");S(k,V,q,"\xA5","\\yen",!0);S(xe,V,q,"\xA5","\\yen",!0);S(k,V,q,"\u2713","\\checkmark",!0);S(xe,V,q,"\u2713","\\checkmark");S(k,V,q,"\u2136","\\beth",!0);S(k,V,q,"\u2138","\\daleth",!0);S(k,V,q,"\u2137","\\gimel",!0);S(k,V,q,"\u03DD","\\digamma",!0);S(k,V,q,"\u03F0","\\varkappa");S(k,V,ko,"\u250C","\\@ulcorner",!0);S(k,V,ws,"\u2510","\\@urcorner",!0);S(k,V,ko,"\u2514","\\@llcorner",!0);S(k,V,ws,"\u2518","\\@lrcorner",!0);S(k,V,j,"\u2266","\\leqq",!0);S(k,V,j,"\u2A7D","\\leqslant",!0);S(k,V,j,"\u2A95","\\eqslantless",!0);S(k,V,j,"\u2272","\\lesssim",!0);S(k,V,j,"\u2A85","\\lessapprox",!0);S(k,V,j,"\u224A","\\approxeq",!0);S(k,V,Be,"\u22D6","\\lessdot");S(k,V,j,"\u22D8","\\lll",!0);S(k,V,j,"\u2276","\\lessgtr",!0);S(k,V,j,"\u22DA","\\lesseqgtr",!0);S(k,V,j,"\u2A8B","\\lesseqqgtr",!0);S(k,V,j,"\u2251","\\doteqdot");S(k,V,j,"\u2253","\\risingdotseq",!0);S(k,V,j,"\u2252","\\fallingdotseq",!0);S(k,V,j,"\u223D","\\backsim",!0);S(k,V,j,"\u22CD","\\backsimeq",!0);S(k,V,j,"\u2AC5","\\subseteqq",!0);S(k,V,j,"\u22D0","\\Subset",!0);S(k,V,j,"\u228F","\\sqsubset",!0);S(k,V,j,"\u227C","\\preccurlyeq",!0);S(k,V,j,"\u22DE","\\curlyeqprec",!0);S(k,V,j,"\u227E","\\precsim",!0);S(k,V,j,"\u2AB7","\\precapprox",!0);S(k,V,j,"\u22B2","\\vartriangleleft");S(k,V,j,"\u22B4","\\trianglelefteq");S(k,V,j,"\u22A8","\\vDash",!0);S(k,V,j,"\u22AA","\\Vvdash",!0);S(k,V,j,"\u2323","\\smallsmile");S(k,V,j,"\u2322","\\smallfrown");S(k,V,j,"\u224F","\\bumpeq",!0);S(k,V,j,"\u224E","\\Bumpeq",!0);S(k,V,j,"\u2267","\\geqq",!0);S(k,V,j,"\u2A7E","\\geqslant",!0);S(k,V,j,"\u2A96","\\eqslantgtr",!0);S(k,V,j,"\u2273","\\gtrsim",!0);S(k,V,j,"\u2A86","\\gtrapprox",!0);S(k,V,Be,"\u22D7","\\gtrdot");S(k,V,j,"\u22D9","\\ggg",!0);S(k,V,j,"\u2277","\\gtrless",!0);S(k,V,j,"\u22DB","\\gtreqless",!0);S(k,V,j,"\u2A8C","\\gtreqqless",!0);S(k,V,j,"\u2256","\\eqcirc",!0);S(k,V,j,"\u2257","\\circeq",!0);S(k,V,j,"\u225C","\\triangleq",!0);S(k,V,j,"\u223C","\\thicksim");S(k,V,j,"\u2248","\\thickapprox");S(k,V,j,"\u2AC6","\\supseteqq",!0);S(k,V,j,"\u22D1","\\Supset",!0);S(k,V,j,"\u2290","\\sqsupset",!0);S(k,V,j,"\u227D","\\succcurlyeq",!0);S(k,V,j,"\u22DF","\\curlyeqsucc",!0);S(k,V,j,"\u227F","\\succsim",!0);S(k,V,j,"\u2AB8","\\succapprox",!0);S(k,V,j,"\u22B3","\\vartriangleright");S(k,V,j,"\u22B5","\\trianglerighteq");S(k,V,j,"\u22A9","\\Vdash",!0);S(k,V,j,"\u2223","\\shortmid");S(k,V,j,"\u2225","\\shortparallel");S(k,V,j,"\u226C","\\between",!0);S(k,V,j,"\u22D4","\\pitchfork",!0);S(k,V,j,"\u221D","\\varpropto");S(k,V,j,"\u25C0","\\blacktriangleleft");S(k,V,j,"\u2234","\\therefore",!0);S(k,V,j,"\u220D","\\backepsilon");S(k,V,j,"\u25B6","\\blacktriangleright");S(k,V,j,"\u2235","\\because",!0);S(k,V,j,"\u22D8","\\llless");S(k,V,j,"\u22D9","\\gggtr");S(k,V,Be,"\u22B2","\\lhd");S(k,V,Be,"\u22B3","\\rhd");S(k,V,j,"\u2242","\\eqsim",!0);S(k,M,j,"\u22C8","\\Join");S(k,V,j,"\u2251","\\Doteq",!0);S(k,V,Be,"\u2214","\\dotplus",!0);S(k,V,Be,"\u2216","\\smallsetminus");S(k,V,Be,"\u22D2","\\Cap",!0);S(k,V,Be,"\u22D3","\\Cup",!0);S(k,V,Be,"\u2A5E","\\doublebarwedge",!0);S(k,V,Be,"\u229F","\\boxminus",!0);S(k,V,Be,"\u229E","\\boxplus",!0);S(k,V,Be,"\u22C7","\\divideontimes",!0);S(k,V,Be,"\u22C9","\\ltimes",!0);S(k,V,Be,"\u22CA","\\rtimes",!0);S(k,V,Be,"\u22CB","\\leftthreetimes",!0);S(k,V,Be,"\u22CC","\\rightthreetimes",!0);S(k,V,Be,"\u22CF","\\curlywedge",!0);S(k,V,Be,"\u22CE","\\curlyvee",!0);S(k,V,Be,"\u229D","\\circleddash",!0);S(k,V,Be,"\u229B","\\circledast",!0);S(k,V,Be,"\u22C5","\\centerdot");S(k,V,Be,"\u22BA","\\intercal",!0);S(k,V,Be,"\u22D2","\\doublecap");S(k,V,Be,"\u22D3","\\doublecup");S(k,V,Be,"\u22A0","\\boxtimes",!0);S(k,V,j,"\u21E2","\\dashrightarrow",!0);S(k,V,j,"\u21E0","\\dashleftarrow",!0);S(k,V,j,"\u21C7","\\leftleftarrows",!0);S(k,V,j,"\u21C6","\\leftrightarrows",!0);S(k,V,j,"\u21DA","\\Lleftarrow",!0);S(k,V,j,"\u219E","\\twoheadleftarrow",!0);S(k,V,j,"\u21A2","\\leftarrowtail",!0);S(k,V,j,"\u21AB","\\looparrowleft",!0);S(k,V,j,"\u21CB","\\leftrightharpoons",!0);S(k,V,j,"\u21B6","\\curvearrowleft",!0);S(k,V,j,"\u21BA","\\circlearrowleft",!0);S(k,V,j,"\u21B0","\\Lsh",!0);S(k,V,j,"\u21C8","\\upuparrows",!0);S(k,V,j,"\u21BF","\\upharpoonleft",!0);S(k,V,j,"\u21C3","\\downharpoonleft",!0);S(k,M,j,"\u22B6","\\origof",!0);S(k,M,j,"\u22B7","\\imageof",!0);S(k,V,j,"\u22B8","\\multimap",!0);S(k,V,j,"\u21AD","\\leftrightsquigarrow",!0);S(k,V,j,"\u21C9","\\rightrightarrows",!0);S(k,V,j,"\u21C4","\\rightleftarrows",!0);S(k,V,j,"\u21A0","\\twoheadrightarrow",!0);S(k,V,j,"\u21A3","\\rightarrowtail",!0);S(k,V,j,"\u21AC","\\looparrowright",!0);S(k,V,j,"\u21B7","\\curvearrowright",!0);S(k,V,j,"\u21BB","\\circlearrowright",!0);S(k,V,j,"\u21B1","\\Rsh",!0);S(k,V,j,"\u21CA","\\downdownarrows",!0);S(k,V,j,"\u21BE","\\upharpoonright",!0);S(k,V,j,"\u21C2","\\downharpoonright",!0);S(k,V,j,"\u21DD","\\rightsquigarrow",!0);S(k,V,j,"\u21DD","\\leadsto");S(k,V,j,"\u21DB","\\Rrightarrow",!0);S(k,V,j,"\u21BE","\\restriction");S(k,M,q,"\u2018","`");S(k,M,q,"$","\\$");S(xe,M,q,"$","\\$");S(xe,M,q,"$","\\textdollar");S(k,M,q,"%","\\%");S(xe,M,q,"%","\\%");S(k,M,q,"_","\\_");S(xe,M,q,"_","\\_");S(xe,M,q,"_","\\textunderscore");S(k,M,q,"\u2220","\\angle",!0);S(k,M,q,"\u221E","\\infty",!0);S(k,M,q,"\u2032","\\prime");S(k,M,q,"\u25B3","\\triangle");S(k,M,q,"\u0393","\\Gamma",!0);S(k,M,q,"\u0394","\\Delta",!0);S(k,M,q,"\u0398","\\Theta",!0);S(k,M,q,"\u039B","\\Lambda",!0);S(k,M,q,"\u039E","\\Xi",!0);S(k,M,q,"\u03A0","\\Pi",!0);S(k,M,q,"\u03A3","\\Sigma",!0);S(k,M,q,"\u03A5","\\Upsilon",!0);S(k,M,q,"\u03A6","\\Phi",!0);S(k,M,q,"\u03A8","\\Psi",!0);S(k,M,q,"\u03A9","\\Omega",!0);S(k,M,q,"A","\u0391");S(k,M,q,"B","\u0392");S(k,M,q,"E","\u0395");S(k,M,q,"Z","\u0396");S(k,M,q,"H","\u0397");S(k,M,q,"I","\u0399");S(k,M,q,"K","\u039A");S(k,M,q,"M","\u039C");S(k,M,q,"N","\u039D");S(k,M,q,"O","\u039F");S(k,M,q,"P","\u03A1");S(k,M,q,"T","\u03A4");S(k,M,q,"X","\u03A7");S(k,M,q,"\xAC","\\neg",!0);S(k,M,q,"\xAC","\\lnot");S(k,M,q,"\u22A4","\\top");S(k,M,q,"\u22A5","\\bot");S(k,M,q,"\u2205","\\emptyset");S(k,V,q,"\u2205","\\varnothing");S(k,M,it,"\u03B1","\\alpha",!0);S(k,M,it,"\u03B2","\\beta",!0);S(k,M,it,"\u03B3","\\gamma",!0);S(k,M,it,"\u03B4","\\delta",!0);S(k,M,it,"\u03F5","\\epsilon",!0);S(k,M,it,"\u03B6","\\zeta",!0);S(k,M,it,"\u03B7","\\eta",!0);S(k,M,it,"\u03B8","\\theta",!0);S(k,M,it,"\u03B9","\\iota",!0);S(k,M,it,"\u03BA","\\kappa",!0);S(k,M,it,"\u03BB","\\lambda",!0);S(k,M,it,"\u03BC","\\mu",!0);S(k,M,it,"\u03BD","\\nu",!0);S(k,M,it,"\u03BE","\\xi",!0);S(k,M,it,"\u03BF","\\omicron",!0);S(k,M,it,"\u03C0","\\pi",!0);S(k,M,it,"\u03C1","\\rho",!0);S(k,M,it,"\u03C3","\\sigma",!0);S(k,M,it,"\u03C4","\\tau",!0);S(k,M,it,"\u03C5","\\upsilon",!0);S(k,M,it,"\u03D5","\\phi",!0);S(k,M,it,"\u03C7","\\chi",!0);S(k,M,it,"\u03C8","\\psi",!0);S(k,M,it,"\u03C9","\\omega",!0);S(k,M,it,"\u03B5","\\varepsilon",!0);S(k,M,it,"\u03D1","\\vartheta",!0);S(k,M,it,"\u03D6","\\varpi",!0);S(k,M,it,"\u03F1","\\varrho",!0);S(k,M,it,"\u03C2","\\varsigma",!0);S(k,M,it,"\u03C6","\\varphi",!0);S(k,M,Be,"\u2217","*",!0);S(k,M,Be,"+","+");S(k,M,Be,"\u2212","-",!0);S(k,M,Be,"\u22C5","\\cdot",!0);S(k,M,Be,"\u2218","\\circ",!0);S(k,M,Be,"\xF7","\\div",!0);S(k,M,Be,"\xB1","\\pm",!0);S(k,M,Be,"\xD7","\\times",!0);S(k,M,Be,"\u2229","\\cap",!0);S(k,M,Be,"\u222A","\\cup",!0);S(k,M,Be,"\u2216","\\setminus",!0);S(k,M,Be,"\u2227","\\land");S(k,M,Be,"\u2228","\\lor");S(k,M,Be,"\u2227","\\wedge",!0);S(k,M,Be,"\u2228","\\vee",!0);S(k,M,q,"\u221A","\\surd");S(k,M,ko,"\u27E8","\\langle",!0);S(k,M,ko,"\u2223","\\lvert");S(k,M,ko,"\u2225","\\lVert");S(k,M,ws,"?","?");S(k,M,ws,"!","!");S(k,M,ws,"\u27E9","\\rangle",!0);S(k,M,ws,"\u2223","\\rvert");S(k,M,ws,"\u2225","\\rVert");S(k,M,j,"=","=");S(k,M,j,":",":");S(k,M,j,"\u2248","\\approx",!0);S(k,M,j,"\u2245","\\cong",!0);S(k,M,j,"\u2265","\\ge");S(k,M,j,"\u2265","\\geq",!0);S(k,M,j,"\u2190","\\gets");S(k,M,j,">","\\gt",!0);S(k,M,j,"\u2208","\\in",!0);S(k,M,j,"\uE020","\\@not");S(k,M,j,"\u2282","\\subset",!0);S(k,M,j,"\u2283","\\supset",!0);S(k,M,j,"\u2286","\\subseteq",!0);S(k,M,j,"\u2287","\\supseteq",!0);S(k,V,j,"\u2288","\\nsubseteq",!0);S(k,V,j,"\u2289","\\nsupseteq",!0);S(k,M,j,"\u22A8","\\models");S(k,M,j,"\u2190","\\leftarrow",!0);S(k,M,j,"\u2264","\\le");S(k,M,j,"\u2264","\\leq",!0);S(k,M,j,"<","\\lt",!0);S(k,M,j,"\u2192","\\rightarrow",!0);S(k,M,j,"\u2192","\\to");S(k,V,j,"\u2271","\\ngeq",!0);S(k,V,j,"\u2270","\\nleq",!0);S(k,M,Gc,"\xA0","\\ ");S(k,M,Gc,"\xA0","\\space");S(k,M,Gc,"\xA0","\\nobreakspace");S(xe,M,Gc,"\xA0","\\ ");S(xe,M,Gc,"\xA0"," ");S(xe,M,Gc,"\xA0","\\space");S(xe,M,Gc,"\xA0","\\nobreakspace");S(k,M,Gc,null,"\\nobreak");S(k,M,Gc,null,"\\allowbreak");S(k,M,w6,",",",");S(k,M,w6,";",";");S(k,V,Be,"\u22BC","\\barwedge",!0);S(k,V,Be,"\u22BB","\\veebar",!0);S(k,M,Be,"\u2299","\\odot",!0);S(k,M,Be,"\u2295","\\oplus",!0);S(k,M,Be,"\u2297","\\otimes",!0);S(k,M,q,"\u2202","\\partial",!0);S(k,M,Be,"\u2298","\\oslash",!0);S(k,V,Be,"\u229A","\\circledcirc",!0);S(k,V,Be,"\u22A1","\\boxdot",!0);S(k,M,Be,"\u25B3","\\bigtriangleup");S(k,M,Be,"\u25BD","\\bigtriangledown");S(k,M,Be,"\u2020","\\dagger");S(k,M,Be,"\u22C4","\\diamond");S(k,M,Be,"\u22C6","\\star");S(k,M,Be,"\u25C3","\\triangleleft");S(k,M,Be,"\u25B9","\\triangleright");S(k,M,ko,"{","\\{");S(xe,M,q,"{","\\{");S(xe,M,q,"{","\\textbraceleft");S(k,M,ws,"}","\\}");S(xe,M,q,"}","\\}");S(xe,M,q,"}","\\textbraceright");S(k,M,ko,"{","\\lbrace");S(k,M,ws,"}","\\rbrace");S(k,M,ko,"[","\\lbrack",!0);S(xe,M,q,"[","\\lbrack",!0);S(k,M,ws,"]","\\rbrack",!0);S(xe,M,q,"]","\\rbrack",!0);S(k,M,ko,"(","\\lparen",!0);S(k,M,ws,")","\\rparen",!0);S(xe,M,q,"<","\\textless",!0);S(xe,M,q,">","\\textgreater",!0);S(k,M,ko,"\u230A","\\lfloor",!0);S(k,M,ws,"\u230B","\\rfloor",!0);S(k,M,ko,"\u2308","\\lceil",!0);S(k,M,ws,"\u2309","\\rceil",!0);S(k,M,q,"\\","\\backslash");S(k,M,q,"\u2223","|");S(k,M,q,"\u2223","\\vert");S(xe,M,q,"|","\\textbar",!0);S(k,M,q,"\u2225","\\|");S(k,M,q,"\u2225","\\Vert");S(xe,M,q,"\u2225","\\textbardbl");S(xe,M,q,"~","\\textasciitilde");S(xe,M,q,"\\","\\textbackslash");S(xe,M,q,"^","\\textasciicircum");S(k,M,j,"\u2191","\\uparrow",!0);S(k,M,j,"\u21D1","\\Uparrow",!0);S(k,M,j,"\u2193","\\downarrow",!0);S(k,M,j,"\u21D3","\\Downarrow",!0);S(k,M,j,"\u2195","\\updownarrow",!0);S(k,M,j,"\u21D5","\\Updownarrow",!0);S(k,M,gr,"\u2210","\\coprod");S(k,M,gr,"\u22C1","\\bigvee");S(k,M,gr,"\u22C0","\\bigwedge");S(k,M,gr,"\u2A04","\\biguplus");S(k,M,gr,"\u22C2","\\bigcap");S(k,M,gr,"\u22C3","\\bigcup");S(k,M,gr,"\u222B","\\int");S(k,M,gr,"\u222B","\\intop");S(k,M,gr,"\u222C","\\iint");S(k,M,gr,"\u222D","\\iiint");S(k,M,gr,"\u220F","\\prod");S(k,M,gr,"\u2211","\\sum");S(k,M,gr,"\u2A02","\\bigotimes");S(k,M,gr,"\u2A01","\\bigoplus");S(k,M,gr,"\u2A00","\\bigodot");S(k,M,gr,"\u222E","\\oint");S(k,M,gr,"\u222F","\\oiint");S(k,M,gr,"\u2230","\\oiiint");S(k,M,gr,"\u2A06","\\bigsqcup");S(k,M,gr,"\u222B","\\smallint");S(xe,M,p1,"\u2026","\\textellipsis");S(k,M,p1,"\u2026","\\mathellipsis");S(xe,M,p1,"\u2026","\\ldots",!0);S(k,M,p1,"\u2026","\\ldots",!0);S(k,M,p1,"\u22EF","\\@cdots",!0);S(k,M,p1,"\u22F1","\\ddots",!0);S(k,M,q,"\u22EE","\\varvdots");S(xe,M,q,"\u22EE","\\varvdots");S(k,M,Ti,"\u02CA","\\acute");S(k,M,Ti,"\u02CB","\\grave");S(k,M,Ti,"\xA8","\\ddot");S(k,M,Ti,"~","\\tilde");S(k,M,Ti,"\u02C9","\\bar");S(k,M,Ti,"\u02D8","\\breve");S(k,M,Ti,"\u02C7","\\check");S(k,M,Ti,"^","\\hat");S(k,M,Ti,"\u20D7","\\vec");S(k,M,Ti,"\u02D9","\\dot");S(k,M,Ti,"\u02DA","\\mathring");S(k,M,it,"\uE131","\\@imath");S(k,M,it,"\uE237","\\@jmath");S(k,M,q,"\u0131","\u0131");S(k,M,q,"\u0237","\u0237");S(xe,M,q,"\u0131","\\i",!0);S(xe,M,q,"\u0237","\\j",!0);S(xe,M,q,"\xDF","\\ss",!0);S(xe,M,q,"\xE6","\\ae",!0);S(xe,M,q,"\u0153","\\oe",!0);S(xe,M,q,"\xF8","\\o",!0);S(xe,M,q,"\xC6","\\AE",!0);S(xe,M,q,"\u0152","\\OE",!0);S(xe,M,q,"\xD8","\\O",!0);S(xe,M,Ti,"\u02CA","\\'");S(xe,M,Ti,"\u02CB","\\`");S(xe,M,Ti,"\u02C6","\\^");S(xe,M,Ti,"\u02DC","\\~");S(xe,M,Ti,"\u02C9","\\=");S(xe,M,Ti,"\u02D8","\\u");S(xe,M,Ti,"\u02D9","\\.");S(xe,M,Ti,"\xB8","\\c");S(xe,M,Ti,"\u02DA","\\r");S(xe,M,Ti,"\u02C7","\\v");S(xe,M,Ti,"\xA8",'\\"');S(xe,M,Ti,"\u02DD","\\H");S(xe,M,Ti,"\u25EF","\\textcircled");var mne={"--":!0,"---":!0,"``":!0,"''":!0};S(xe,M,q,"\u2013","--",!0);S(xe,M,q,"\u2013","\\textendash");S(xe,M,q,"\u2014","---",!0);S(xe,M,q,"\u2014","\\textemdash");S(xe,M,q,"\u2018","`",!0);S(xe,M,q,"\u2018","\\textquoteleft");S(xe,M,q,"\u2019","'",!0);S(xe,M,q,"\u2019","\\textquoteright");S(xe,M,q,"\u201C","``",!0);S(xe,M,q,"\u201C","\\textquotedblleft");S(xe,M,q,"\u201D","''",!0);S(xe,M,q,"\u201D","\\textquotedblright");S(k,M,q,"\xB0","\\degree",!0);S(xe,M,q,"\xB0","\\degree");S(xe,M,q,"\xB0","\\textdegree",!0);S(k,M,q,"\xA3","\\pounds");S(k,M,q,"\xA3","\\mathsterling",!0);S(xe,M,q,"\xA3","\\pounds");S(xe,M,q,"\xA3","\\textsterling",!0);S(k,V,q,"\u2720","\\maltese");S(xe,V,q,"\u2720","\\maltese");var Ire='0123456789/@."';for(t6=0;t6<Ire.length;t6++)FP=Ire.charAt(t6),S(k,M,q,FP,FP);var FP,t6,Bre='0123456789!@*()-=+";:?/.,';for(i6=0;i6<Bre.length;i6++)LP=Bre.charAt(i6),S(xe,M,q,LP,LP);var LP,i6,m6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(r6=0;r6<m6.length;r6++)yw=m6.charAt(r6),S(k,M,it,yw,yw),S(xe,M,q,yw,yw);var yw,r6;S(k,V,q,"C","\u2102");S(xe,V,q,"C","\u2102");S(k,V,q,"H","\u210D");S(xe,V,q,"H","\u210D");S(k,V,q,"N","\u2115");S(xe,V,q,"N","\u2115");S(k,V,q,"P","\u2119");S(xe,V,q,"P","\u2119");S(k,V,q,"Q","\u211A");S(xe,V,q,"Q","\u211A");S(k,V,q,"R","\u211D");S(xe,V,q,"R","\u211D");S(k,V,q,"Z","\u2124");S(xe,V,q,"Z","\u2124");S(k,M,it,"h","\u210E");S(xe,M,it,"h","\u210E");var at="";for(Xn=0;Xn<m6.length;Xn++)Pi=m6.charAt(Xn),at=String.fromCharCode(55349,56320+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at),at=String.fromCharCode(55349,56372+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at),at=String.fromCharCode(55349,56424+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at),at=String.fromCharCode(55349,56580+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at),at=String.fromCharCode(55349,56684+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at),at=String.fromCharCode(55349,56736+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at),at=String.fromCharCode(55349,56788+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at),at=String.fromCharCode(55349,56840+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at),at=String.fromCharCode(55349,56944+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at),Xn<26&&(at=String.fromCharCode(55349,56632+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at),at=String.fromCharCode(55349,56476+Xn),S(k,M,it,Pi,at),S(xe,M,q,Pi,at));var Pi,Xn;at="\u{1D55C}";S(k,M,it,"k",at);S(xe,M,q,"k",at);for(Td=0;Td<10;Td++)Hc=Td.toString(),at=String.fromCharCode(55349,57294+Td),S(k,M,it,Hc,at),S(xe,M,q,Hc,at),at=String.fromCharCode(55349,57314+Td),S(k,M,it,Hc,at),S(xe,M,q,Hc,at),at=String.fromCharCode(55349,57324+Td),S(k,M,it,Hc,at),S(xe,M,q,Hc,at),at=String.fromCharCode(55349,57334+Td),S(k,M,it,Hc,at),S(xe,M,q,Hc,at);var Hc,Td,GP="\xD0\xDE\xFE";for(n6=0;n6<GP.length;n6++)xw=GP.charAt(n6),S(k,M,it,xw,xw),S(xe,M,q,xw,xw);var xw,n6,s6=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Nre=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],AFe=function(e,i){var r=e.charCodeAt(0),n=e.charCodeAt(1),s=(r-55296)*1024+(n-56320)+65536,o=i==="math"?0:1;if(119808<=s&&s<120484){var a=Math.floor((s-119808)/26);return[s6[a][2],s6[a][o]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[Nre[l][2],Nre[l][o]]}else{if(s===120485||s===120486)return[s6[0][2],s6[0][o]];if(120486<s&&s<120782)return["",""];throw new Ee("Unsupported character: "+e)}},_6=function(e,i,r){return mi[r][e]&&mi[r][e].replace&&(e=mi[r][e].replace),{value:e,metrics:rz(e,i,r)}},dl=function(e,i,r,n,s){var o=_6(e,i,r),a=o.metrics;e=o.value;var l;if(a){var u=a.italic;(r==="text"||n&&n.font==="mathit")&&(u=0),l=new Zs(e,a.height,a.depth,u,a.skew,a.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+i+"' and mode '"+r+"'")),l=new Zs(e,0,0,0,0,0,s);if(n){l.maxFontSize=n.sizeMultiplier,n.style.isTight()&&l.classes.push("mtight");var c=n.getColor();c&&(l.style.color=c)}return l},TFe=function(e,i,r,n){return n===void 0&&(n=[]),r.font==="boldsymbol"&&_6(e,"Main-Bold",i).metrics?dl(e,"Main-Bold",i,r,n.concat(["mathbf"])):e==="\\"||mi[i][e].font==="main"?dl(e,"Main-Regular",i,r,n):dl(e,"AMS-Regular",i,r,n.concat(["amsrm"]))},RFe=function(e,i,r,n,s){return s!=="textord"&&_6(e,"Math-BoldItalic",i).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},DFe=function(e,i,r){var n=e.mode,s=e.text,o=["mord"],a=n==="math"||n==="text"&&i.font,l=a?i.font:i.fontFamily,u="",c="";if(s.charCodeAt(0)===55349&&([u,c]=AFe(s,n)),u.length>0)return dl(s,u,n,i,o.concat(c));if(l){var h,d;if(l==="boldsymbol"){var p=RFe(s,n,i,o,r);h=p.fontName,d=[p.fontClass]}else a?(h=vne[l].fontName,d=[l]):(h=o6(l,i.fontWeight,i.fontShape),d=[l,i.fontWeight,i.fontShape]);if(_6(s,h,n).metrics)return dl(s,h,n,i,o.concat(d));if(mne.hasOwnProperty(s)&&h.slice(0,10)==="Typewriter"){for(var f=[],m=0;m<s.length;m++)f.push(dl(s[m],h,n,i,o.concat(d)));return bne(f)}}if(r==="mathord")return dl(s,"Math-Italic",n,i,o.concat(["mathnormal"]));if(r==="textord"){var g=mi[n][s]&&mi[n][s].font;if(g==="ams"){var b=o6("amsrm",i.fontWeight,i.fontShape);return dl(s,b,n,i,o.concat("amsrm",i.fontWeight,i.fontShape))}else if(g==="main"||!g){var v=o6("textrm",i.fontWeight,i.fontShape);return dl(s,v,n,i,o.concat(i.fontWeight,i.fontShape))}else{var y=o6(g,i.fontWeight,i.fontShape);return dl(s,y,n,i,o.concat(y,i.fontWeight,i.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},MFe=(t,e)=>{if(Dd(t.classes)!==Dd(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var i=t.classes[0];if(i==="mbin"||i==="mord")return!1}for(var r in t.style)if(t.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;for(var n in e.style)if(e.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;return!0},FFe=t=>{for(var e=0;e<t.length-1;e++){var i=t[e],r=t[e+1];i instanceof Zs&&r instanceof Zs&&MFe(i,r)&&(i.text+=r.text,i.height=Math.max(i.height,r.height),i.depth=Math.max(i.depth,r.depth),i.italic=r.italic,t.splice(e+1,1),e--)}return t},nz=function(e){for(var i=0,r=0,n=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>i&&(i=o.height),o.depth>r&&(r=o.depth),o.maxFontSize>n&&(n=o.maxFontSize)}e.height=i,e.depth=r,e.maxFontSize=n},Js=function(e,i,r,n){var s=new jp(e,i,r,n);return nz(s),s},gne=(t,e,i,r)=>new jp(t,e,i,r),LFe=function(e,i,r){var n=Js([e],[],i);return n.height=Math.max(r||i.fontMetrics().defaultRuleThickness,i.minRuleThickness),n.style.borderBottomWidth=Re(n.height),n.maxFontSize=1,n},OFe=function(e,i,r,n){var s=new Ew(e,i,r,n);return nz(s),s},bne=function(e){var i=new Vp(e);return nz(i),i},PFe=function(e,i){return e instanceof Vp?Js([],[e],i):e},zFe=function(e){if(e.positionType==="individualShift"){for(var i=e.children,r=[i[0]],n=-i[0].shift-i[0].elem.depth,s=n,o=1;o<i.length;o++){var a=-i[o].shift-s-i[o].elem.depth,l=a-(i[o-1].elem.height+i[o-1].elem.depth);s=s+a,r.push({type:"kern",size:l}),r.push(i[o])}return{children:r,depth:n}}var u;if(e.positionType==="top"){for(var c=e.positionData,h=0;h<e.children.length;h++){var d=e.children[h];c-=d.type==="kern"?d.size:d.elem.height+d.elem.depth}u=c}else if(e.positionType==="bottom")u=-e.positionData;else{var p=e.children[0];if(p.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")u=-p.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")u=-p.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:u}},IFe=function(e,i){for(var{children:r,depth:n}=zFe(e),s=0,o=0;o<r.length;o++){var a=r[o];if(a.type==="elem"){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var u=Js(["pstrut"],[]);u.style.height=Re(s);for(var c=[],h=n,d=n,p=n,f=0;f<r.length;f++){var m=r[f];if(m.type==="kern")p+=m.size;else{var g=m.elem,b=m.wrapperClasses||[],v=m.wrapperStyle||{},y=Js(b,[u,g],void 0,v);y.style.top=Re(-s-p-g.depth),m.marginLeft&&(y.style.marginLeft=m.marginLeft),m.marginRight&&(y.style.marginRight=m.marginRight),c.push(y),p+=g.height+g.depth}h=Math.min(h,p),d=Math.max(d,p)}var x=Js(["vlist"],c);x.style.height=Re(d);var _;if(h<0){var w=Js([],[]),C=Js(["vlist"],[w]);C.style.height=Re(-h);var E=Js(["vlist-s"],[new Zs("\u200B")]);_=[Js(["vlist-r"],[x,E]),Js(["vlist-r"],[C])]}else _=[Js(["vlist-r"],[x])];var A=Js(["vlist-t"],_);return _.length===2&&A.classes.push("vlist-t2"),A.height=d,A.depth=-h,A},BFe=(t,e)=>{var i=Js(["mspace"],[],e),r=Ii(t,e);return i.style.marginRight=Re(r),i},o6=function(e,i,r){var n="";switch(e){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=e}var s;return i==="textbf"&&r==="textit"?s="BoldItalic":i==="textbf"?s="Bold":i==="textit"?s="Italic":s="Regular",n+"-"+s},vne={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},yne={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},NFe=function(e,i){var[r,n,s]=yne[e],o=new pu(r),a=new fl([o],{width:Re(n),height:Re(s),style:"width:"+Re(n),viewBox:"0 0 "+1e3*n+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=gne(["overlay"],[a],i);return l.height=s,l.style.height=Re(s),l.style.width=Re(n),l},J={fontMap:vne,makeSymbol:dl,mathsym:TFe,makeSpan:Js,makeSvgSpan:gne,makeLineSpan:LFe,makeAnchor:OFe,makeFragment:bne,wrapFragment:PFe,makeVList:IFe,makeOrd:DFe,makeGlue:BFe,staticSvg:NFe,svgData:yne,tryCombineChars:FFe},zi={number:3,unit:"mu"},Wp={number:4,unit:"mu"},Uc={number:5,unit:"mu"},$Fe={mord:{mop:zi,mbin:Wp,mrel:Uc,minner:zi},mop:{mord:zi,mop:zi,mrel:Uc,minner:zi},mbin:{mord:Wp,mop:Wp,mopen:Wp,minner:Wp},mrel:{mord:Uc,mop:Uc,mopen:Uc,minner:Uc},mopen:{},mclose:{mop:zi,mbin:Wp,mrel:Uc,minner:zi},mpunct:{mord:zi,mop:zi,mrel:Uc,mopen:zi,mclose:zi,mpunct:zi,minner:zi},minner:{mord:zi,mop:zi,mbin:Wp,mrel:Uc,mopen:zi,mpunct:zi,minner:zi}},HFe={mord:{mop:zi},mop:{mord:zi,mop:zi},mbin:{},mrel:{},mopen:{},mclose:{mop:zi},mpunct:{},minner:{mop:zi}},xne={},g6={},b6={};function Oe(t){for(var{type:e,names:i,props:r,handler:n,htmlBuilder:s,mathmlBuilder:o}=t,a={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:n},l=0;l<i.length;++l)xne[i[l]]=a;e&&(s&&(g6[e]=s),o&&(b6[e]=o))}function qp(t){var{type:e,htmlBuilder:i,mathmlBuilder:r}=t;Oe({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:i,mathmlBuilder:r})}var v6=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},rr=function(e){return e.type==="ordgroup"?e.body:[e]},jc=J.makeSpan,UFe=["leftmost","mbin","mopen","mrel","mop","mpunct"],WFe=["rightmost","mrel","mclose","mpunct"],VFe={display:rt.DISPLAY,text:rt.TEXT,script:rt.SCRIPT,scriptscript:rt.SCRIPTSCRIPT},jFe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Tr=function(e,i,r,n){n===void 0&&(n=[null,null]);for(var s=[],o=0;o<e.length;o++){var a=It(e[o],i);if(a instanceof Vp){var l=a.children;s.push(...l)}else s.push(a)}if(J.tryCombineChars(s),!r)return s;var u=i;if(e.length===1){var c=e[0];c.type==="sizing"?u=i.havingSize(c.size):c.type==="styling"&&(u=i.havingStyle(VFe[c.style]))}var h=jc([n[0]||"leftmost"],[],i),d=jc([n[1]||"rightmost"],[],i),p=r==="root";return $re(s,(f,m)=>{var g=m.classes[0],b=f.classes[0];g==="mbin"&&Qe.contains(WFe,b)?m.classes[0]="mord":b==="mbin"&&Qe.contains(UFe,g)&&(f.classes[0]="mord")},{node:h},d,p),$re(s,(f,m)=>{var g=XP(m),b=XP(f),v=g&&b?f.hasClass("mtight")?HFe[g][b]:$Fe[g][b]:null;if(v)return J.makeGlue(v,u)},{node:h},d,p),s},$re=function t(e,i,r,n,s){n&&e.push(n);for(var o=0;o<e.length;o++){var a=e[o],l=wne(a);if(l){t(l.children,i,r,null,s);continue}var u=!a.hasClass("mspace");if(u){var c=i(a,r.node);c&&(r.insertAfter?r.insertAfter(c):(e.unshift(c),o++))}u?r.node=a:s&&a.hasClass("newline")&&(r.node=jc(["leftmost"])),r.insertAfter=(h=>d=>{e.splice(h+1,0,d),o++})(o)}n&&e.pop()},wne=function(e){return e instanceof Vp||e instanceof Ew||e instanceof jp&&e.hasClass("enclosing")?e:null},qFe=function t(e,i){var r=wne(e);if(r){var n=r.children;if(n.length){if(i==="right")return t(n[n.length-1],"right");if(i==="left")return t(n[0],"left")}}return e},XP=function(e,i){return e?(i&&(e=qFe(e,i)),jFe[e.classes[0]]||null):null},Aw=function(e,i){var r=["nulldelimiter"].concat(e.baseSizingClasses());return jc(i.concat(r))},It=function(e,i,r){if(!e)return jc();if(g6[e.type]){var n=g6[e.type](e,i);if(r&&i.size!==r.size){n=jc(i.sizingClasses(r),[n],i);var s=i.sizeMultiplier/r.sizeMultiplier;n.height*=s,n.depth*=s}return n}else throw new Ee("Got group of unknown type: '"+e.type+"'")};function a6(t,e){var i=jc(["base"],t,e),r=jc(["strut"]);return r.style.height=Re(i.height+i.depth),i.depth&&(r.style.verticalAlign=Re(-i.depth)),i.children.unshift(r),i}function YP(t,e){var i=null;t.length===1&&t[0].type==="tag"&&(i=t[0].tag,t=t[0].body);var r=Tr(t,e,"root"),n;r.length===2&&r[1].hasClass("tag")&&(n=r.pop());for(var s=[],o=[],a=0;a<r.length;a++)if(o.push(r[a]),r[a].hasClass("mbin")||r[a].hasClass("mrel")||r[a].hasClass("allowbreak")){for(var l=!1;a<r.length-1&&r[a+1].hasClass("mspace")&&!r[a+1].hasClass("newline");)a++,o.push(r[a]),r[a].hasClass("nobreak")&&(l=!0);l||(s.push(a6(o,e)),o=[])}else r[a].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(a6(o,e)),o=[]),s.push(r[a]));o.length>0&&s.push(a6(o,e));var u;i?(u=a6(Tr(i,e,!0)),u.classes=["tag"],s.push(u)):n&&s.push(n);var c=jc(["katex-html"],s);if(c.setAttribute("aria-hidden","true"),u){var h=u.children[0];h.style.height=Re(c.height+c.depth),c.depth&&(h.style.verticalAlign=Re(-c.depth))}return c}function _ne(t){return new Vp(t)}var ys=class{constructor(e,i,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=i||[],this.classes=r||[]}setAttribute(e,i){this.attributes[e]=i}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&e.setAttribute(i,this.attributes[i]);this.classes.length>0&&(e.className=Dd(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof fa&&this.children[r+1]instanceof fa){for(var n=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof fa;)n+=this.children[++r].toText();e.appendChild(new fa(n).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&(e+=" "+i+'="',e+=Qe.escape(this.attributes[i]),e+='"');this.classes.length>0&&(e+=' class ="'+Qe.escape(Dd(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}},fa=class{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Qe.escape(this.toText())}toText(){return this.text}},KP=class{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="\u200A":e>=.1666&&e<=.1667?this.character="\u2009":e>=.2222&&e<=.2223?this.character="\u2005":e>=.2777&&e<=.2778?this.character="\u2005\u200A":e>=-.05556&&e<=-.05555?this.character="\u200A\u2063":e>=-.1667&&e<=-.1666?this.character="\u2009\u2063":e>=-.2223&&e<=-.2222?this.character="\u205F\u2063":e>=-.2778&&e<=-.2777?this.character="\u2005\u2063":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Re(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Re(this.width)+'"/>'}toText(){return this.character?this.character:" "}},Ce={MathNode:ys,TextNode:fa,SpaceNode:KP,newDocumentFragment:_ne},ma=function(e,i,r){return mi[i][e]&&mi[i][e].replace&&e.charCodeAt(0)!==55349&&!(mne.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=mi[i][e].replace),new Ce.TextNode(e)},sz=function(e){return e.length===1?e[0]:new Ce.MathNode("mrow",e)},oz=function(e,i){if(i.fontFamily==="texttt")return"monospace";if(i.fontFamily==="textsf")return i.fontShape==="textit"&&i.fontWeight==="textbf"?"sans-serif-bold-italic":i.fontShape==="textit"?"sans-serif-italic":i.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(i.fontShape==="textit"&&i.fontWeight==="textbf")return"bold-italic";if(i.fontShape==="textit")return"italic";if(i.fontWeight==="textbf")return"bold";var r=i.font;if(!r||r==="mathnormal")return null;var n=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var s=e.text;if(Qe.contains(["\\imath","\\jmath"],s))return null;mi[n][s]&&mi[n][s].replace&&(s=mi[n][s].replace);var o=J.fontMap[r].fontName;return rz(s,o,n)?J.fontMap[r].variant:null};function OP(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof fa&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var i=t.children[0];return i instanceof fa&&i.text===","}else return!1}var Qs=function(e,i,r){if(e.length===1){var n=li(e[0],i);return r&&n instanceof ys&&n.type==="mo"&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var s=[],o,a=0;a<e.length;a++){var l=li(e[a],i);if(l instanceof ys&&o instanceof ys){if(l.type==="mtext"&&o.type==="mtext"&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...l.children);continue}else if(l.type==="mn"&&o.type==="mn"){o.children.push(...l.children);continue}else if(OP(l)&&o.type==="mn"){o.children.push(...l.children);continue}else if(l.type==="mn"&&OP(o))l.children=[...o.children,...l.children],s.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(o.type==="mn"||OP(o))){var u=l.children[0];u instanceof ys&&u.type==="mn"&&(u.children=[...o.children,...u.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var c=o.children[0];if(c instanceof fa&&c.text==="\u0338"&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var h=l.children[0];h instanceof fa&&h.text.length>0&&(h.text=h.text.slice(0,1)+"\u0338"+h.text.slice(1),s.pop())}}}s.push(l),o=l}return s},Md=function(e,i,r){return sz(Qs(e,i,r))},li=function(e,i){if(!e)return new Ce.MathNode("mrow");if(b6[e.type]){var r=b6[e.type](e,i);return r}else throw new Ee("Got group of unknown type: '"+e.type+"'")};function Hre(t,e,i,r,n){var s=Qs(t,i),o;s.length===1&&s[0]instanceof ys&&Qe.contains(["mrow","mtable"],s[0].type)?o=s[0]:o=new Ce.MathNode("mrow",s);var a=new Ce.MathNode("annotation",[new Ce.TextNode(e)]);a.setAttribute("encoding","application/x-tex");var l=new Ce.MathNode("semantics",[o,a]),u=new Ce.MathNode("math",[l]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&u.setAttribute("display","block");var c=n?"katex":"katex-mathml";return J.makeSpan([c],[u])}var Cne=function(e){return new p6({style:e.displayMode?rt.DISPLAY:rt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Sne=function(e,i){if(i.displayMode){var r=["katex-display"];i.leqno&&r.push("leqno"),i.fleqn&&r.push("fleqn"),e=J.makeSpan(r,[e])}return e},GFe=function(e,i,r){var n=Cne(r),s;if(r.output==="mathml")return Hre(e,i,n,r.displayMode,!0);if(r.output==="html"){var o=YP(e,n);s=J.makeSpan(["katex"],[o])}else{var a=Hre(e,i,n,r.displayMode,!1),l=YP(e,n);s=J.makeSpan(["katex"],[a,l])}return Sne(s,r)},XFe=function(e,i,r){var n=Cne(r),s=YP(e,n),o=J.makeSpan(["katex"],[s]);return Sne(o,r)},YFe={widehat:"^",widecheck:"\u02C7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23DF",overbrace:"\u23DE",overgroup:"\u23E0",undergroup:"\u23E1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21D2",xRightarrow:"\u21D2",overleftharpoon:"\u21BC",xleftharpoonup:"\u21BC",overrightharpoon:"\u21C0",xrightharpoonup:"\u21C0",xLeftarrow:"\u21D0",xLeftrightarrow:"\u21D4",xhookleftarrow:"\u21A9",xhookrightarrow:"\u21AA",xmapsto:"\u21A6",xrightharpoondown:"\u21C1",xleftharpoondown:"\u21BD",xrightleftharpoons:"\u21CC",xleftrightharpoons:"\u21CB",xtwoheadleftarrow:"\u219E",xtwoheadrightarrow:"\u21A0",xlongequal:"=",xtofrom:"\u21C4",xrightleftarrows:"\u21C4",xrightequilibrium:"\u21CC",xleftequilibrium:"\u21CB","\\cdrightarrow":"\u2192","\\cdleftarrow":"\u2190","\\cdlongequal":"="},KFe=function(e){var i=new Ce.MathNode("mo",[new Ce.TextNode(YFe[e.replace(/^\\/,"")])]);return i.setAttribute("stretchy","true"),i},JFe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},ZFe=function(e){return e.type==="ordgroup"?e.body.length:1},QFe=function(e,i){function r(){var a=4e5,l=e.label.slice(1);if(Qe.contains(["widehat","widecheck","widetilde","utilde"],l)){var u=e,c=ZFe(u.base),h,d,p;if(c>5)l==="widehat"||l==="widecheck"?(h=420,a=2364,p=.42,d=l+"4"):(h=312,a=2340,p=.34,d="tilde4");else{var f=[1,1,2,2,3,3][c];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][f],h=[0,239,300,360,420][f],p=[0,.24,.3,.3,.36,.42][f],d=l+f):(a=[0,600,1033,2339,2340][f],h=[0,260,286,306,312][f],p=[0,.26,.286,.3,.306,.34][f],d="tilde"+f)}var m=new pu(d),g=new fl([m],{width:"100%",height:Re(p),viewBox:"0 0 "+a+" "+h,preserveAspectRatio:"none"});return{span:J.makeSvgSpan([],[g],i),minWidth:0,height:p}}else{var b=[],v=JFe[l],[y,x,_]=v,w=_/1e3,C=y.length,E,A;if(C===1){var D=v[3];E=["hide-tail"],A=[D]}else if(C===2)E=["halfarrow-left","halfarrow-right"],A=["xMinYMin","xMaxYMin"];else if(C===3)E=["brace-left","brace-center","brace-right"],A=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+C+" children.");for(var R=0;R<C;R++){var I=new pu(y[R]),z=new fl([I],{width:"400em",height:Re(w),viewBox:"0 0 "+a+" "+_,preserveAspectRatio:A[R]+" slice"}),B=J.makeSvgSpan([E[R]],[z],i);if(C===1)return{span:B,minWidth:x,height:w};B.style.height=Re(w),b.push(B)}return{span:J.makeSpan(["stretchy"],b,i),minWidth:x,height:w}}}var{span:n,minWidth:s,height:o}=r();return n.height=o,n.style.height=Re(o),s>0&&(n.style.minWidth=Re(s)),n},eLe=function(e,i,r,n,s){var o,a=e.height+e.depth+r+n;if(/fbox|color|angl/.test(i)){if(o=J.makeSpan(["stretchy",i],[],s),i==="fbox"){var l=s.color&&s.getColor();l&&(o.style.borderColor=l)}}else{var u=[];/^[bx]cancel$/.test(i)&&u.push(new kw({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(i)&&u.push(new kw({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new fl(u,{width:"100%",height:Re(a)});o=J.makeSvgSpan([],[c],s)}return o.height=a,o.style.height=Re(a),o},qc={encloseSpan:eLe,mathMLnode:KFe,svgSpan:QFe};function vt(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function az(t){var e=C6(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function C6(t){return t&&(t.type==="atom"||kFe.hasOwnProperty(t.type))?t:null}var lz=(t,e)=>{var i,r,n;t&&t.type==="supsub"?(r=vt(t.base,"accent"),i=r.base,t.base=i,n=SFe(It(t,e)),t.base=r):(r=vt(t,"accent"),i=r.base);var s=It(i,e.havingCrampedStyle()),o=r.isShifty&&Qe.isCharacterBox(i),a=0;if(o){var l=Qe.getBaseElem(i),u=It(l,e.havingCrampedStyle());a=zre(u).skew}var c=r.label==="\\c",h=c?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),d;if(r.isStretchy)d=qc.svgSpan(r,e),d=J.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:d,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+Re(2*a)+")",marginLeft:Re(2*a)}:void 0}]},e);else{var p,f;r.label==="\\vec"?(p=J.staticSvg("vec",e),f=J.svgData.vec[1]):(p=J.makeOrd({mode:r.mode,text:r.label},e,"textord"),p=zre(p),p.italic=0,f=p.width,c&&(h+=p.depth)),d=J.makeSpan(["accent-body"],[p]);var m=r.label==="\\textcircled";m&&(d.classes.push("accent-full"),h=s.height);var g=a;m||(g-=f/2),d.style.left=Re(g),r.label==="\\textcircled"&&(d.style.top=".2em"),d=J.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-h},{type:"elem",elem:d}]},e)}var b=J.makeSpan(["mord","accent"],[d],e);return n?(n.children[0]=b,n.height=Math.max(b.height,n.height),n.classes[0]="mord",n):b},Ene=(t,e)=>{var i=t.isStretchy?qc.mathMLnode(t.label):new Ce.MathNode("mo",[ma(t.label,t.mode)]),r=new Ce.MathNode("mover",[li(t.base,e),i]);return r.setAttribute("accent","true"),r},tLe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));Oe({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var i=v6(e[0]),r=!tLe.test(t.funcName),n=!r||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:r,isShifty:n,base:i}},htmlBuilder:lz,mathmlBuilder:Ene});Oe({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var i=e[0],r=t.parser.mode;return r==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:t.funcName,isStretchy:!1,isShifty:!0,base:i}},htmlBuilder:lz,mathmlBuilder:Ene});Oe({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:i,funcName:r}=t,n=e[0];return{type:"accentUnder",mode:i.mode,label:r,base:n}},htmlBuilder:(t,e)=>{var i=It(t.base,e),r=qc.svgSpan(t,e),n=t.label==="\\utilde"?.12:0,s=J.makeVList({positionType:"top",positionData:i.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:n},{type:"elem",elem:i}]},e);return J.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(t,e)=>{var i=qc.mathMLnode(t.label),r=new Ce.MathNode("munder",[li(t.base,e),i]);return r.setAttribute("accentunder","true"),r}});var l6=t=>{var e=new Ce.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Oe({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,i){var{parser:r,funcName:n}=t;return{type:"xArrow",mode:r.mode,label:n,body:e[0],below:i[0]}},htmlBuilder(t,e){var i=e.style,r=e.havingStyle(i.sup()),n=J.wrapFragment(It(t.body,r,e),e),s=t.label.slice(0,2)==="\\x"?"x":"cd";n.classes.push(s+"-arrow-pad");var o;t.below&&(r=e.havingStyle(i.sub()),o=J.wrapFragment(It(t.below,r,e),e),o.classes.push(s+"-arrow-pad"));var a=qc.svgSpan(t,e),l=-e.fontMetrics().axisHeight+.5*a.height,u=-e.fontMetrics().axisHeight-.5*a.height-.111;(n.depth>.25||t.label==="\\xleftequilibrium")&&(u-=n.depth);var c;if(o){var h=-e.fontMetrics().axisHeight+o.height+.5*a.height+.111;c=J.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:u},{type:"elem",elem:a,shift:l},{type:"elem",elem:o,shift:h}]},e)}else c=J.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:u},{type:"elem",elem:a,shift:l}]},e);return c.children[0].children[0].children[1].classes.push("svg-align"),J.makeSpan(["mrel","x-arrow"],[c],e)},mathmlBuilder(t,e){var i=qc.mathMLnode(t.label);i.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(t.body){var n=l6(li(t.body,e));if(t.below){var s=l6(li(t.below,e));r=new Ce.MathNode("munderover",[i,s,n])}else r=new Ce.MathNode("mover",[i,n])}else if(t.below){var o=l6(li(t.below,e));r=new Ce.MathNode("munder",[i,o])}else r=l6(),r=new Ce.MathNode("mover",[i,r]);return r}});var iLe=J.makeSpan;function kne(t,e){var i=Tr(t.body,e,!0);return iLe([t.mclass],i,e)}function Ane(t,e){var i,r=Qs(t.body,e);return t.mclass==="minner"?i=new Ce.MathNode("mpadded",r):t.mclass==="mord"?t.isCharacterBox?(i=r[0],i.type="mi"):i=new Ce.MathNode("mi",r):(t.isCharacterBox?(i=r[0],i.type="mo"):i=new Ce.MathNode("mo",r),t.mclass==="mbin"?(i.attributes.lspace="0.22em",i.attributes.rspace="0.22em"):t.mclass==="mpunct"?(i.attributes.lspace="0em",i.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(i.attributes.lspace="0em",i.attributes.rspace="0em"):t.mclass==="minner"&&(i.attributes.lspace="0.0556em",i.attributes.width="+0.1111em")),i}Oe({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:i,funcName:r}=t,n=e[0];return{type:"mclass",mode:i.mode,mclass:"m"+r.slice(5),body:rr(n),isCharacterBox:Qe.isCharacterBox(n)}},htmlBuilder:kne,mathmlBuilder:Ane});var S6=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Oe({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:i}=t;return{type:"mclass",mode:i.mode,mclass:S6(e[0]),body:rr(e[1]),isCharacterBox:Qe.isCharacterBox(e[1])}}});Oe({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:i,funcName:r}=t,n=e[1],s=e[0],o;r!=="\\stackrel"?o=S6(n):o="mrel";var a={type:"op",mode:n.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:rr(n)},l={type:"supsub",mode:s.mode,base:a,sup:r==="\\underset"?null:s,sub:r==="\\underset"?s:null};return{type:"mclass",mode:i.mode,mclass:o,body:[l],isCharacterBox:Qe.isCharacterBox(l)}},htmlBuilder:kne,mathmlBuilder:Ane});Oe({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:i}=t;return{type:"pmb",mode:i.mode,mclass:S6(e[0]),body:rr(e[0])}},htmlBuilder(t,e){var i=Tr(t.body,e,!0),r=J.makeSpan([t.mclass],i,e);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(t,e){var i=Qs(t.body,e),r=new Ce.MathNode("mstyle",i);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var rLe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Ure=()=>({type:"styling",body:[],mode:"math",style:"display"}),Wre=t=>t.type==="textord"&&t.text==="@",nLe=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function sLe(t,e,i){var r=rLe[t];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return i.callFunction(r,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var n=i.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:r,mode:"math",family:"rel"},o=i.callFunction("\\Big",[s],[]),a=i.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[n,o,a]};return i.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return i.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return i.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function oLe(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var i=t.fetch().text;if(i==="&"||i==="\\\\")t.consume();else if(i==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Ee("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var r=[],n=[r],s=0;s<e.length;s++){for(var o=e[s],a=Ure(),l=0;l<o.length;l++)if(!Wre(o[l]))a.body.push(o[l]);else{r.push(a),l+=1;var u=az(o[l]).text,c=new Array(2);if(c[0]={type:"ordgroup",mode:"math",body:[]},c[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var h=0;h<2;h++){for(var d=!0,p=l+1;p<o.length;p++){if(nLe(o[p],u)){d=!1,l=p;break}if(Wre(o[p]))throw new Ee("Missing a "+u+" character to complete a CD arrow.",o[p]);c[h].body.push(o[p])}if(d)throw new Ee("Missing a "+u+" character to complete a CD arrow.",o[l])}else throw new Ee('Expected one of "<>AV=|." after @',o[l]);var f=sLe(u,c,t),m={type:"styling",body:[f],mode:"math",style:"display"};r.push(m),a=Ure()}s%2===0?r.push(a):r.shift(),r=[],n.push(r)}t.gullet.endGroup(),t.gullet.endGroup();var g=new Array(n[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:n,arraystretch:1,addJot:!0,rowGaps:[null],cols:g,colSeparationType:"CD",hLinesBeforeRow:new Array(n.length+1).fill([])}}Oe({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:i,funcName:r}=t;return{type:"cdlabel",mode:i.mode,side:r.slice(4),label:e[0]}},htmlBuilder(t,e){var i=e.havingStyle(e.style.sup()),r=J.wrapFragment(It(t.label,i,e),e);return r.classes.push("cd-label-"+t.side),r.style.bottom=Re(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(t,e){var i=new Ce.MathNode("mrow",[li(t.label,e)]);return i=new Ce.MathNode("mpadded",[i]),i.setAttribute("width","0"),t.side==="left"&&i.setAttribute("lspace","-1width"),i.setAttribute("voffset","0.7em"),i=new Ce.MathNode("mstyle",[i]),i.setAttribute("displaystyle","false"),i.setAttribute("scriptlevel","1"),i}});Oe({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:i}=t;return{type:"cdlabelparent",mode:i.mode,fragment:e[0]}},htmlBuilder(t,e){var i=J.wrapFragment(It(t.fragment,e),e);return i.classes.push("cd-vert-arrow"),i},mathmlBuilder(t,e){return new Ce.MathNode("mrow",[li(t.fragment,e)])}});Oe({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:i}=t,r=vt(e[0],"ordgroup"),n=r.body,s="",o=0;o<n.length;o++){var a=vt(n[o],"textord");s+=a.text}var l=parseInt(s),u;if(isNaN(l))throw new Ee("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new Ee("\\@char with invalid code point "+s);return l<=65535?u=String.fromCharCode(l):(l-=65536,u=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:i.mode,text:u}}});var Tne=(t,e)=>{var i=Tr(t.body,e.withColor(t.color),!1);return J.makeFragment(i)},Rne=(t,e)=>{var i=Qs(t.body,e.withColor(t.color)),r=new Ce.MathNode("mstyle",i);return r.setAttribute("mathcolor",t.color),r};Oe({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:i}=t,r=vt(e[0],"color-token").color,n=e[1];return{type:"color",mode:i.mode,color:r,body:rr(n)}},htmlBuilder:Tne,mathmlBuilder:Rne});Oe({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:i,breakOnTokenText:r}=t,n=vt(e[0],"color-token").color;i.gullet.macros.set("\\current@color",n);var s=i.parseExpression(!0,r);return{type:"color",mode:i.mode,color:n,body:s}},htmlBuilder:Tne,mathmlBuilder:Rne});Oe({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,i){var{parser:r}=t,n=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:n&&vt(n,"size").value}},htmlBuilder(t,e){var i=J.makeSpan(["mspace"],[],e);return t.newLine&&(i.classes.push("newline"),t.size&&(i.style.marginTop=Re(Ii(t.size,e)))),i},mathmlBuilder(t,e){var i=new Ce.MathNode("mspace");return t.newLine&&(i.setAttribute("linebreak","newline"),t.size&&i.setAttribute("height",Re(Ii(t.size,e)))),i}});var JP={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Dne=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Ee("Expected a control sequence",t);return e},aLe=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},Mne=(t,e,i,r)=>{var n=t.gullet.macros.get(i.text);n==null&&(i.noexpand=!0,n={tokens:[i],numArgs:0,unexpandable:!t.gullet.isExpandable(i.text)}),t.gullet.macros.set(e,n,r)};Oe({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:i}=t;e.consumeSpaces();var r=e.fetch();if(JP[r.text])return(i==="\\global"||i==="\\\\globallong")&&(r.text=JP[r.text]),vt(e.parseFunction(),"internal");throw new Ee("Invalid token after macro prefix",r)}});Oe({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:i}=t,r=e.gullet.popToken(),n=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(n))throw new Ee("Expected a control sequence",r);for(var s=0,o,a=[[]];e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),a[s].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new Ee('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new Ee('Argument number "'+r.text+'" out of order');s++,a.push([])}else{if(r.text==="EOF")throw new Ee("Expected a macro definition");a[s].push(r.text)}var{tokens:l}=e.gullet.consumeArg();return o&&l.unshift(o),(i==="\\edef"||i==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(n,{tokens:l,numArgs:s,delimiters:a},i===JP[i]),{type:"internal",mode:e.mode}}});Oe({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:i}=t,r=Dne(e.gullet.popToken());e.gullet.consumeSpaces();var n=aLe(e);return Mne(e,r,n,i==="\\\\globallet"),{type:"internal",mode:e.mode}}});Oe({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:i}=t,r=Dne(e.gullet.popToken()),n=e.gullet.popToken(),s=e.gullet.popToken();return Mne(e,r,s,i==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(n),{type:"internal",mode:e.mode}}});var ww=function(e,i,r){var n=mi.math[e]&&mi.math[e].replace,s=rz(n||e,i,r);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+i+".");return s},uz=function(e,i,r,n){var s=r.havingBaseStyle(i),o=J.makeSpan(n.concat(s.sizingClasses(r)),[e],r),a=s.sizeMultiplier/r.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=s.sizeMultiplier,o},Fne=function(e,i,r){var n=i.havingBaseStyle(r),s=(1-i.sizeMultiplier/n.sizeMultiplier)*i.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Re(s),e.height-=s,e.depth+=s},lLe=function(e,i,r,n,s,o){var a=J.makeSymbol(e,"Main-Regular",s,n),l=uz(a,i,n,o);return r&&Fne(l,n,i),l},uLe=function(e,i,r,n){return J.makeSymbol(e,"Size"+i+"-Regular",r,n)},Lne=function(e,i,r,n,s,o){var a=uLe(e,i,s,n),l=uz(J.makeSpan(["delimsizing","size"+i],[a],n),rt.TEXT,n,o);return r&&Fne(l,n,rt.TEXT),l},PP=function(e,i,r){var n;i==="Size1-Regular"?n="delim-size1":n="delim-size4";var s=J.makeSpan(["delimsizinginner",n],[J.makeSpan([],[J.makeSymbol(e,i,r)])]);return{type:"elem",elem:s}},zP=function(e,i,r){var n=fu["Size4-Regular"][e.charCodeAt(0)]?fu["Size4-Regular"][e.charCodeAt(0)][4]:fu["Size1-Regular"][e.charCodeAt(0)][4],s=new pu("inner",gFe(e,Math.round(1e3*i))),o=new fl([s],{width:Re(n),height:Re(i),style:"width:"+Re(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*i),preserveAspectRatio:"xMinYMin"}),a=J.makeSvgSpan([],[o],r);return a.height=i,a.style.height=Re(i),a.style.width=Re(n),{type:"elem",elem:a}},ZP=.008,u6={type:"kern",size:-1*ZP},cLe=["|","\\lvert","\\rvert","\\vert"],hLe=["\\|","\\lVert","\\rVert","\\Vert"],One=function(e,i,r,n,s,o){var a,l,u,c,h="",d=0;a=u=c=e,l=null;var p="Size1-Regular";e==="\\uparrow"?u=c="\u23D0":e==="\\Uparrow"?u=c="\u2016":e==="\\downarrow"?a=u="\u23D0":e==="\\Downarrow"?a=u="\u2016":e==="\\updownarrow"?(a="\\uparrow",u="\u23D0",c="\\downarrow"):e==="\\Updownarrow"?(a="\\Uparrow",u="\u2016",c="\\Downarrow"):Qe.contains(cLe,e)?(u="\u2223",h="vert",d=333):Qe.contains(hLe,e)?(u="\u2225",h="doublevert",d=556):e==="["||e==="\\lbrack"?(a="\u23A1",u="\u23A2",c="\u23A3",p="Size4-Regular",h="lbrack",d=667):e==="]"||e==="\\rbrack"?(a="\u23A4",u="\u23A5",c="\u23A6",p="Size4-Regular",h="rbrack",d=667):e==="\\lfloor"||e==="\u230A"?(u=a="\u23A2",c="\u23A3",p="Size4-Regular",h="lfloor",d=667):e==="\\lceil"||e==="\u2308"?(a="\u23A1",u=c="\u23A2",p="Size4-Regular",h="lceil",d=667):e==="\\rfloor"||e==="\u230B"?(u=a="\u23A5",c="\u23A6",p="Size4-Regular",h="rfloor",d=667):e==="\\rceil"||e==="\u2309"?(a="\u23A4",u=c="\u23A5",p="Size4-Regular",h="rceil",d=667):e==="("||e==="\\lparen"?(a="\u239B",u="\u239C",c="\u239D",p="Size4-Regular",h="lparen",d=875):e===")"||e==="\\rparen"?(a="\u239E",u="\u239F",c="\u23A0",p="Size4-Regular",h="rparen",d=875):e==="\\{"||e==="\\lbrace"?(a="\u23A7",l="\u23A8",c="\u23A9",u="\u23AA",p="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(a="\u23AB",l="\u23AC",c="\u23AD",u="\u23AA",p="Size4-Regular"):e==="\\lgroup"||e==="\u27EE"?(a="\u23A7",c="\u23A9",u="\u23AA",p="Size4-Regular"):e==="\\rgroup"||e==="\u27EF"?(a="\u23AB",c="\u23AD",u="\u23AA",p="Size4-Regular"):e==="\\lmoustache"||e==="\u23B0"?(a="\u23A7",c="\u23AD",u="\u23AA",p="Size4-Regular"):(e==="\\rmoustache"||e==="\u23B1")&&(a="\u23AB",c="\u23A9",u="\u23AA",p="Size4-Regular");var f=ww(a,p,s),m=f.height+f.depth,g=ww(u,p,s),b=g.height+g.depth,v=ww(c,p,s),y=v.height+v.depth,x=0,_=1;if(l!==null){var w=ww(l,p,s);x=w.height+w.depth,_=2}var C=m+y+x,E=Math.max(0,Math.ceil((i-C)/(_*b))),A=C+E*_*b,D=n.fontMetrics().axisHeight;r&&(D*=n.sizeMultiplier);var R=A/2-D,I=[];if(h.length>0){var z=A-m-y,B=Math.round(A*1e3),N=bFe(h,Math.round(z*1e3)),H=new pu(h,N),T=(d/1e3).toFixed(3)+"em",L=(B/1e3).toFixed(3)+"em",P=new fl([H],{width:T,height:L,viewBox:"0 0 "+d+" "+B}),W=J.makeSvgSpan([],[P],n);W.height=B/1e3,W.style.width=T,W.style.height=L,I.push({type:"elem",elem:W})}else{if(I.push(PP(c,p,s)),I.push(u6),l===null){var Y=A-m-y+2*ZP;I.push(zP(u,Y,n))}else{var ne=(A-m-y-x)/2+2*ZP;I.push(zP(u,ne,n)),I.push(u6),I.push(PP(l,p,s)),I.push(u6),I.push(zP(u,ne,n))}I.push(u6),I.push(PP(a,p,s))}var ke=n.havingBaseStyle(rt.TEXT),Ae=J.makeVList({positionType:"bottom",positionData:R,children:I},ke);return uz(J.makeSpan(["delimsizing","mult"],[Ae],ke),rt.TEXT,n,o)},IP=80,BP=.08,NP=function(e,i,r,n,s){var o=mFe(e,n,r),a=new pu(e,o),l=new fl([a],{width:"400em",height:Re(i),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return J.makeSvgSpan(["hide-tail"],[l],s)},dLe=function(e,i){var r=i.havingBaseSizing(),n=Bne("\\surd",e*r.sizeMultiplier,Ine,r),s=r.sizeMultiplier,o=Math.max(0,i.minRuleThickness-i.fontMetrics().sqrtRuleThickness),a,l=0,u=0,c=0,h;return n.type==="small"?(c=1e3+1e3*o+IP,e<1?s=1:e<1.4&&(s=.7),l=(1+o+BP)/s,u=(1+o)/s,a=NP("sqrtMain",l,c,o,i),a.style.minWidth="0.853em",h=.833/s):n.type==="large"?(c=(1e3+IP)*_w[n.size],u=(_w[n.size]+o)/s,l=(_w[n.size]+o+BP)/s,a=NP("sqrtSize"+n.size,l,c,o,i),a.style.minWidth="1.02em",h=1/s):(l=e+o+BP,u=e+o,c=Math.floor(1e3*e+o)+IP,a=NP("sqrtTall",l,c,o,i),a.style.minWidth="0.742em",h=1.056),a.height=u,a.style.height=Re(l),{span:a,advanceWidth:h,ruleWidth:(i.fontMetrics().sqrtRuleThickness+o)*s}},Pne=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","\\surd"],fLe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1"],zne=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],_w=[0,1.2,1.8,2.4,3],pLe=function(e,i,r,n,s){if(e==="<"||e==="\\lt"||e==="\u27E8"?e="\\langle":(e===">"||e==="\\gt"||e==="\u27E9")&&(e="\\rangle"),Qe.contains(Pne,e)||Qe.contains(zne,e))return Lne(e,i,!1,r,n,s);if(Qe.contains(fLe,e))return One(e,_w[i],!1,r,n,s);throw new Ee("Illegal delimiter: '"+e+"'")},mLe=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],gLe=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"stack"}],Ine=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],bLe=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},Bne=function(e,i,r,n){for(var s=Math.min(2,3-n.style.size),o=s;o<r.length&&r[o].type!=="stack";o++){var a=ww(e,bLe(r[o]),"math"),l=a.height+a.depth;if(r[o].type==="small"){var u=n.havingBaseStyle(r[o].style);l*=u.sizeMultiplier}if(l>i)return r[o]}return r[r.length-1]},Nne=function(e,i,r,n,s,o){e==="<"||e==="\\lt"||e==="\u27E8"?e="\\langle":(e===">"||e==="\\gt"||e==="\u27E9")&&(e="\\rangle");var a;Qe.contains(zne,e)?a=mLe:Qe.contains(Pne,e)?a=Ine:a=gLe;var l=Bne(e,i,a,n);return l.type==="small"?lLe(e,l.style,r,n,s,o):l.type==="large"?Lne(e,l.size,r,n,s,o):One(e,i,r,n,s,o)},vLe=function(e,i,r,n,s,o){var a=n.fontMetrics().axisHeight*n.sizeMultiplier,l=901,u=5/n.fontMetrics().ptPerEm,c=Math.max(i-a,r+a),h=Math.max(c/500*l,2*c-u);return Nne(e,h,!0,n,s,o)},Vc={sqrtImage:dLe,sizedDelim:pLe,sizeToMaxHeight:_w,customSizedDelim:Nne,leftRightDelim:vLe},Vre={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},yLe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27E8","\\rangle","\u27E9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function E6(t,e){var i=C6(t);if(i&&Qe.contains(yLe,i.text))return i;throw i?new Ee("Invalid delimiter '"+i.text+"' after '"+e.funcName+"'",t):new Ee("Invalid delimiter type '"+t.type+"'",t)}Oe({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var i=E6(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:Vre[t.funcName].size,mclass:Vre[t.funcName].mclass,delim:i.text}},htmlBuilder:(t,e)=>t.delim==="."?J.makeSpan([t.mclass]):Vc.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(ma(t.delim,t.mode));var i=new Ce.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?i.setAttribute("fence","true"):i.setAttribute("fence","false"),i.setAttribute("stretchy","true");var r=Re(Vc.sizeToMaxHeight[t.size]);return i.setAttribute("minsize",r),i.setAttribute("maxsize",r),i}});function jre(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Oe({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var i=t.parser.gullet.macros.get("\\current@color");if(i&&typeof i!="string")throw new Ee("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:E6(e[0],t).text,color:i}}});Oe({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var i=E6(e[0],t),r=t.parser;++r.leftrightDepth;var n=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=vt(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:n,left:i.text,right:s.delim,rightColor:s.color}},htmlBuilder:(t,e)=>{jre(t);for(var i=Tr(t.body,e,!0,["mopen","mclose"]),r=0,n=0,s=!1,o=0;o<i.length;o++)i[o].isMiddle?s=!0:(r=Math.max(i[o].height,r),n=Math.max(i[o].depth,n));r*=e.sizeMultiplier,n*=e.sizeMultiplier;var a;if(t.left==="."?a=Aw(e,["mopen"]):a=Vc.leftRightDelim(t.left,r,n,e,t.mode,["mopen"]),i.unshift(a),s)for(var l=1;l<i.length;l++){var u=i[l],c=u.isMiddle;c&&(i[l]=Vc.leftRightDelim(c.delim,r,n,c.options,t.mode,[]))}var h;if(t.right===".")h=Aw(e,["mclose"]);else{var d=t.rightColor?e.withColor(t.rightColor):e;h=Vc.leftRightDelim(t.right,r,n,d,t.mode,["mclose"])}return i.push(h),J.makeSpan(["minner"],i,e)},mathmlBuilder:(t,e)=>{jre(t);var i=Qs(t.body,e);if(t.left!=="."){var r=new Ce.MathNode("mo",[ma(t.left,t.mode)]);r.setAttribute("fence","true"),i.unshift(r)}if(t.right!=="."){var n=new Ce.MathNode("mo",[ma(t.right,t.mode)]);n.setAttribute("fence","true"),t.rightColor&&n.setAttribute("mathcolor",t.rightColor),i.push(n)}return sz(i)}});Oe({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var i=E6(e[0],t);if(!t.parser.leftrightDepth)throw new Ee("\\middle without preceding \\left",i);return{type:"middle",mode:t.parser.mode,delim:i.text}},htmlBuilder:(t,e)=>{var i;if(t.delim===".")i=Aw(e,[]);else{i=Vc.sizedDelim(t.delim,1,e,t.mode,[]);var r={delim:t.delim,options:e};i.isMiddle=r}return i},mathmlBuilder:(t,e)=>{var i=t.delim==="\\vert"||t.delim==="|"?ma("|","text"):ma(t.delim,t.mode),r=new Ce.MathNode("mo",[i]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var cz=(t,e)=>{var i=J.wrapFragment(It(t.body,e),e),r=t.label.slice(1),n=e.sizeMultiplier,s,o=0,a=Qe.isCharacterBox(t.body);if(r==="sout")s=J.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/n,o=-.5*e.fontMetrics().xHeight;else if(r==="phase"){var l=Ii({number:.6,unit:"pt"},e),u=Ii({number:.35,unit:"ex"},e),c=e.havingBaseSizing();n=n/c.sizeMultiplier;var h=i.height+i.depth+l+u;i.style.paddingLeft=Re(h/2+l);var d=Math.floor(1e3*h*n),p=fFe(d),f=new fl([new pu("phase",p)],{width:"400em",height:Re(d/1e3),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});s=J.makeSvgSpan(["hide-tail"],[f],e),s.style.height=Re(h),o=i.depth+l+u}else{/cancel/.test(r)?a||i.classes.push("cancel-pad"):r==="angl"?i.classes.push("anglpad"):i.classes.push("boxpad");var m=0,g=0,b=0;/box/.test(r)?(b=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),m=e.fontMetrics().fboxsep+(r==="colorbox"?0:b),g=m):r==="angl"?(b=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),m=4*b,g=Math.max(0,.25-i.depth)):(m=a?.2:0,g=m),s=qc.encloseSpan(i,r,m,g,e),/fbox|boxed|fcolorbox/.test(r)?(s.style.borderStyle="solid",s.style.borderWidth=Re(b)):r==="angl"&&b!==.049&&(s.style.borderTopWidth=Re(b),s.style.borderRightWidth=Re(b)),o=i.depth+g,t.backgroundColor&&(s.style.backgroundColor=t.backgroundColor,t.borderColor&&(s.style.borderColor=t.borderColor))}var v;if(t.backgroundColor)v=J.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:i,shift:0}]},e);else{var y=/cancel|phase/.test(r)?["svg-align"]:[];v=J.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:y}]},e)}return/cancel/.test(r)&&(v.height=i.height,v.depth=i.depth),/cancel/.test(r)&&!a?J.makeSpan(["mord","cancel-lap"],[v],e):J.makeSpan(["mord"],[v],e)},hz=(t,e)=>{var i=0,r=new Ce.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[li(t.body,e)]);switch(t.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(i=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*i+"pt"),r.setAttribute("height","+"+2*i+"pt"),r.setAttribute("lspace",i+"pt"),r.setAttribute("voffset",i+"pt"),t.label==="\\fcolorbox"){var n=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+n+"em solid "+String(t.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&r.setAttribute("mathbackground",t.backgroundColor),r};Oe({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,i){var{parser:r,funcName:n}=t,s=vt(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:r.mode,label:n,backgroundColor:s,body:o}},htmlBuilder:cz,mathmlBuilder:hz});Oe({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,i){var{parser:r,funcName:n}=t,s=vt(e[0],"color-token").color,o=vt(e[1],"color-token").color,a=e[2];return{type:"enclose",mode:r.mode,label:n,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:cz,mathmlBuilder:hz});Oe({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:i}=t;return{type:"enclose",mode:i.mode,label:"\\fbox",body:e[0]}}});Oe({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:i,funcName:r}=t,n=e[0];return{type:"enclose",mode:i.mode,label:r,body:n}},htmlBuilder:cz,mathmlBuilder:hz});Oe({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:i}=t;return{type:"enclose",mode:i.mode,label:"\\angl",body:e[0]}}});var $ne={};function mu(t){for(var{type:e,names:i,props:r,handler:n,htmlBuilder:s,mathmlBuilder:o}=t,a={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:n},l=0;l<i.length;++l)$ne[i[l]]=a;s&&(g6[e]=s),o&&(b6[e]=o)}var Hne={};function O(t,e){Hne[t]=e}function qre(t){var e=[];t.consumeSpaces();var i=t.fetch().text;for(i==="\\relax"&&(t.consume(),t.consumeSpaces(),i=t.fetch().text);i==="\\hline"||i==="\\hdashline";)t.consume(),e.push(i==="\\hdashline"),t.consumeSpaces(),i=t.fetch().text;return e}var k6=t=>{var e=t.parser.settings;if(!e.displayMode)throw new Ee("{"+t.envName+"} can be used only in display mode.")};function dz(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Fd(t,e,i){var{hskipBeforeAndAfter:r,addJot:n,cols:s,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:u,emptySingleRow:c,maxNumCols:h,leqno:d}=e;if(t.gullet.beginGroup(),u||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var p=t.gullet.expandMacroAsText("\\arraystretch");if(p==null)o=1;else if(o=parseFloat(p),!o||o<0)throw new Ee("Invalid \\arraystretch: "+p)}t.gullet.beginGroup();var f=[],m=[f],g=[],b=[],v=l!=null?[]:void 0;function y(){l&&t.gullet.macros.set("\\@eqnsw","1",!0)}function x(){v&&(t.gullet.macros.get("\\df@tag")?(v.push(t.subparse([new pa("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):v.push(!!l&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(y(),b.push(qre(t));;){var _=t.parseExpression(!1,u?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),_={type:"ordgroup",mode:t.mode,body:_},i&&(_={type:"styling",mode:t.mode,style:i,body:[_]}),f.push(_);var w=t.fetch().text;if(w==="&"){if(h&&f.length===h){if(u||a)throw new Ee("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(w==="\\end"){x(),f.length===1&&_.type==="styling"&&_.body[0].body.length===0&&(m.length>1||!c)&&m.pop(),b.length<m.length+1&&b.push([]);break}else if(w==="\\\\"){t.consume();var C=void 0;t.gullet.future().text!==" "&&(C=t.parseSizeGroup(!0)),g.push(C?C.value:null),x(),b.push(qre(t)),f=[],m.push(f),y()}else throw new Ee("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:n,arraystretch:o,body:m,cols:s,rowGaps:g,hskipBeforeAndAfter:r,hLinesBeforeRow:b,colSeparationType:a,tags:v,leqno:d}}function fz(t){return t.slice(0,1)==="d"?"display":"text"}var gu=function(e,i){var r,n,s=e.body.length,o=e.hLinesBeforeRow,a=0,l=new Array(s),u=[],c=Math.max(i.fontMetrics().arrayRuleWidth,i.minRuleThickness),h=1/i.fontMetrics().ptPerEm,d=5*h;if(e.colSeparationType&&e.colSeparationType==="small"){var p=i.havingStyle(rt.SCRIPT).sizeMultiplier;d=.2778*(p/i.sizeMultiplier)}var f=e.colSeparationType==="CD"?Ii({number:3,unit:"ex"},i):12*h,m=3*h,g=e.arraystretch*f,b=.7*g,v=.3*g,y=0;function x(eo){for(var Xc=0;Xc<eo.length;++Xc)Xc>0&&(y+=.25),u.push({pos:y,isDashed:eo[Xc]})}for(x(o[0]),r=0;r<e.body.length;++r){var _=e.body[r],w=b,C=v;a<_.length&&(a=_.length);var E=new Array(_.length);for(n=0;n<_.length;++n){var A=It(_[n],i);C<A.depth&&(C=A.depth),w<A.height&&(w=A.height),E[n]=A}var D=e.rowGaps[r],R=0;D&&(R=Ii(D,i),R>0&&(R+=v,C<R&&(C=R),R=0)),e.addJot&&(C+=m),E.height=w,E.depth=C,y+=w,E.pos=y,y+=C+R,l[r]=E,x(o[r+1])}var I=y/2+i.fontMetrics().axisHeight,z=e.cols||[],B=[],N,H,T=[];if(e.tags&&e.tags.some(eo=>eo))for(r=0;r<s;++r){var L=l[r],P=L.pos-I,W=e.tags[r],Y=void 0;W===!0?Y=J.makeSpan(["eqn-num"],[],i):W===!1?Y=J.makeSpan([],[],i):Y=J.makeSpan([],Tr(W,i,!0),i),Y.depth=L.depth,Y.height=L.height,T.push({type:"elem",elem:Y,shift:P})}for(n=0,H=0;n<a||H<z.length;++n,++H){for(var ne=z[H]||{},ke=!0;ne.type==="separator";){if(ke||(N=J.makeSpan(["arraycolsep"],[]),N.style.width=Re(i.fontMetrics().doubleRuleSep),B.push(N)),ne.separator==="|"||ne.separator===":"){var Ae=ne.separator==="|"?"solid":"dashed",G=J.makeSpan(["vertical-separator"],[],i);G.style.height=Re(y),G.style.borderRightWidth=Re(c),G.style.borderRightStyle=Ae,G.style.margin="0 "+Re(-c/2);var $=y-I;$&&(G.style.verticalAlign=Re(-$)),B.push(G)}else throw new Ee("Invalid separator type: "+ne.separator);H++,ne=z[H]||{},ke=!1}if(!(n>=a)){var le=void 0;(n>0||e.hskipBeforeAndAfter)&&(le=Qe.deflt(ne.pregap,d),le!==0&&(N=J.makeSpan(["arraycolsep"],[]),N.style.width=Re(le),B.push(N)));var me=[];for(r=0;r<s;++r){var ie=l[r],ue=ie[n];if(ue){var Me=ie.pos-I;ue.depth=ie.depth,ue.height=ie.height,me.push({type:"elem",elem:ue,shift:Me})}}me=J.makeVList({positionType:"individualShift",children:me},i),me=J.makeSpan(["col-align-"+(ne.align||"c")],[me]),B.push(me),(n<a-1||e.hskipBeforeAndAfter)&&(le=Qe.deflt(ne.postgap,d),le!==0&&(N=J.makeSpan(["arraycolsep"],[]),N.style.width=Re(le),B.push(N)))}}if(l=J.makeSpan(["mtable"],B),u.length>0){for(var he=J.makeLineSpan("hline",i,c),gt=J.makeLineSpan("hdashline",i,c),ot=[{type:"elem",elem:l,shift:0}];u.length>0;){var He=u.pop(),oi=He.pos-I;He.isDashed?ot.push({type:"elem",elem:gt,shift:oi}):ot.push({type:"elem",elem:he,shift:oi})}l=J.makeVList({positionType:"individualShift",children:ot},i)}if(T.length===0)return J.makeSpan(["mord"],[l],i);var Rr=J.makeVList({positionType:"individualShift",children:T},i);return Rr=J.makeSpan(["tag"],[Rr],i),J.makeFragment([l,Rr])},xLe={c:"center ",l:"left ",r:"right "},bu=function(e,i){for(var r=[],n=new Ce.MathNode("mtd",[],["mtr-glue"]),s=new Ce.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],l=[],u=0;u<a.length;u++)l.push(new Ce.MathNode("mtd",[li(a[u],i)]));e.tags&&e.tags[o]&&(l.unshift(n),l.push(n),e.leqno?l.unshift(s):l.push(s)),r.push(new Ce.MathNode("mtr",l))}var c=new Ce.MathNode("mtable",r),h=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);c.setAttribute("rowspacing",Re(h));var d="",p="";if(e.cols&&e.cols.length>0){var f=e.cols,m="",g=!1,b=0,v=f.length;f[0].type==="separator"&&(d+="top ",b=1),f[f.length-1].type==="separator"&&(d+="bottom ",v-=1);for(var y=b;y<v;y++)f[y].type==="align"?(p+=xLe[f[y].align],g&&(m+="none "),g=!0):f[y].type==="separator"&&g&&(m+=f[y].separator==="|"?"solid ":"dashed ",g=!1);c.setAttribute("columnalign",p.trim()),/[sd]/.test(m)&&c.setAttribute("columnlines",m.trim())}if(e.colSeparationType==="align"){for(var x=e.cols||[],_="",w=1;w<x.length;w++)_+=w%2?"0em ":"1em ";c.setAttribute("columnspacing",_.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?c.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?c.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var C="",E=e.hLinesBeforeRow;d+=E[0].length>0?"left ":"",d+=E[E.length-1].length>0?"right ":"";for(var A=1;A<E.length-1;A++)C+=E[A].length===0?"none ":E[A][0]?"dashed ":"solid ";return/[sd]/.test(C)&&c.setAttribute("rowlines",C.trim()),d!==""&&(c=new Ce.MathNode("menclose",[c]),c.setAttribute("notation",d.trim())),e.arraystretch&&e.arraystretch<1&&(c=new Ce.MathNode("mstyle",[c]),c.setAttribute("scriptlevel","1")),c},Une=function(e,i){e.envName.indexOf("ed")===-1&&k6(e);var r=[],n=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",o=Fd(e.parser,{cols:r,addJot:!0,autoTag:s?void 0:dz(e.envName),emptySingleRow:!0,colSeparationType:n,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),a,l=0,u={type:"ordgroup",mode:e.mode,body:[]};if(i[0]&&i[0].type==="ordgroup"){for(var c="",h=0;h<i[0].body.length;h++){var d=vt(i[0].body[h],"textord");c+=d.text}a=Number(c),l=a*2}var p=!l;o.body.forEach(function(b){for(var v=1;v<b.length;v+=2){var y=vt(b[v],"styling"),x=vt(y.body[0],"ordgroup");x.body.unshift(u)}if(p)l<b.length&&(l=b.length);else{var _=b.length/2;if(a<_)throw new Ee("Too many math in a row: "+("expected "+a+", but got "+_),b[0])}});for(var f=0;f<l;++f){var m="r",g=0;f%2===1?m="l":f>0&&p&&(g=1),r[f]={type:"align",align:m,pregap:g,postgap:0}}return o.colSeparationType=p?"align":"alignat",o};mu({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var i=C6(e[0]),r=i?[e[0]]:vt(e[0],"ordgroup").body,n=r.map(function(o){var a=az(o),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new Ee("Unknown column alignment: "+l,o)}),s={cols:n,hskipBeforeAndAfter:!0,maxNumCols:n.length};return Fd(t.parser,s,fz(t.envName))},htmlBuilder:gu,mathmlBuilder:bu});mu({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],i="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:i}]};if(t.envName.charAt(t.envName.length-1)==="*"){var n=t.parser;if(n.consumeSpaces(),n.fetch().text==="["){if(n.consume(),n.consumeSpaces(),i=n.fetch().text,"lcr".indexOf(i)===-1)throw new Ee("Expected l or c or r",n.nextToken);n.consume(),n.consumeSpaces(),n.expect("]"),n.consume(),r.cols=[{type:"align",align:i}]}}var s=Fd(t.parser,r,fz(t.envName)),o=Math.max(0,...s.body.map(a=>a.length));return s.cols=new Array(o).fill({type:"align",align:i}),e?{type:"leftright",mode:t.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:gu,mathmlBuilder:bu});mu({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},i=Fd(t.parser,e,"script");return i.colSeparationType="small",i},htmlBuilder:gu,mathmlBuilder:bu});mu({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var i=C6(e[0]),r=i?[e[0]]:vt(e[0],"ordgroup").body,n=r.map(function(o){var a=az(o),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new Ee("Unknown column alignment: "+l,o)});if(n.length>1)throw new Ee("{subarray} can contain only one column");var s={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=Fd(t.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new Ee("{subarray} can contain only one column");return s},htmlBuilder:gu,mathmlBuilder:bu});mu({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},i=Fd(t.parser,e,fz(t.envName));return{type:"leftright",mode:t.mode,body:[i],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:gu,mathmlBuilder:bu});mu({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Une,htmlBuilder:gu,mathmlBuilder:bu});mu({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){Qe.contains(["gather","gather*"],t.envName)&&k6(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:dz(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Fd(t.parser,e,"display")},htmlBuilder:gu,mathmlBuilder:bu});mu({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Une,htmlBuilder:gu,mathmlBuilder:bu});mu({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){k6(t);var e={autoTag:dz(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Fd(t.parser,e,"display")},htmlBuilder:gu,mathmlBuilder:bu});mu({type:"array",names:["CD"],props:{numArgs:0},handler(t){return k6(t),oLe(t.parser)},htmlBuilder:gu,mathmlBuilder:bu});O("\\nonumber","\\gdef\\@eqnsw{0}");O("\\notag","\\nonumber");Oe({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new Ee(t.funcName+" valid only within array environment")}});var Gre=$ne;Oe({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:i,funcName:r}=t,n=e[0];if(n.type!=="ordgroup")throw new Ee("Invalid environment name",n);for(var s="",o=0;o<n.body.length;++o)s+=vt(n.body[o],"textord").text;if(r==="\\begin"){if(!Gre.hasOwnProperty(s))throw new Ee("No such environment: "+s,n);var a=Gre[s],{args:l,optArgs:u}=i.parseArguments("\\begin{"+s+"}",a),c={mode:i.mode,envName:s,parser:i},h=a.handler(c,l,u);i.expect("\\end",!1);var d=i.nextToken,p=vt(i.parseFunction(),"environment");if(p.name!==s)throw new Ee("Mismatch: \\begin{"+s+"} matched by \\end{"+p.name+"}",d);return h}return{type:"environment",mode:i.mode,name:s,nameGroup:n}}});var Wne=(t,e)=>{var i=t.font,r=e.withFont(i);return It(t.body,r)},Vne=(t,e)=>{var i=t.font,r=e.withFont(i);return li(t.body,r)},Xre={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Oe({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:i,funcName:r}=t,n=v6(e[0]),s=r;return s in Xre&&(s=Xre[s]),{type:"font",mode:i.mode,font:s.slice(1),body:n}},htmlBuilder:Wne,mathmlBuilder:Vne});Oe({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:i}=t,r=e[0],n=Qe.isCharacterBox(r);return{type:"mclass",mode:i.mode,mclass:S6(r),body:[{type:"font",mode:i.mode,font:"boldsymbol",body:r}],isCharacterBox:n}}});Oe({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:i,funcName:r,breakOnTokenText:n}=t,{mode:s}=i,o=i.parseExpression(!0,n),a="math"+r.slice(1);return{type:"font",mode:s,font:a,body:{type:"ordgroup",mode:i.mode,body:o}}},htmlBuilder:Wne,mathmlBuilder:Vne});var jne=(t,e)=>{var i=e;return t==="display"?i=i.id>=rt.SCRIPT.id?i.text():rt.DISPLAY:t==="text"&&i.size===rt.DISPLAY.size?i=rt.TEXT:t==="script"?i=rt.SCRIPT:t==="scriptscript"&&(i=rt.SCRIPTSCRIPT),i},pz=(t,e)=>{var i=jne(t.size,e.style),r=i.fracNum(),n=i.fracDen(),s;s=e.havingStyle(r);var o=It(t.numer,s,e);if(t.continued){var a=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}s=e.havingStyle(n);var u=It(t.denom,s,e),c,h,d;t.hasBarLine?(t.barSize?(h=Ii(t.barSize,e),c=J.makeLineSpan("frac-line",e,h)):c=J.makeLineSpan("frac-line",e),h=c.height,d=c.height):(c=null,h=0,d=e.fontMetrics().defaultRuleThickness);var p,f,m;i.size===rt.DISPLAY.size||t.size==="display"?(p=e.fontMetrics().num1,h>0?f=3*d:f=7*d,m=e.fontMetrics().denom1):(h>0?(p=e.fontMetrics().num2,f=d):(p=e.fontMetrics().num3,f=3*d),m=e.fontMetrics().denom2);var g;if(c){var v=e.fontMetrics().axisHeight;p-o.depth-(v+.5*h)<f&&(p+=f-(p-o.depth-(v+.5*h))),v-.5*h-(u.height-m)<f&&(m+=f-(v-.5*h-(u.height-m)));var y=-(v-.5*h);g=J.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:m},{type:"elem",elem:c,shift:y},{type:"elem",elem:o,shift:-p}]},e)}else{var b=p-o.depth-(u.height-m);b<f&&(p+=.5*(f-b),m+=.5*(f-b)),g=J.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:m},{type:"elem",elem:o,shift:-p}]},e)}s=e.havingStyle(i),g.height*=s.sizeMultiplier/e.sizeMultiplier,g.depth*=s.sizeMultiplier/e.sizeMultiplier;var x;i.size===rt.DISPLAY.size?x=e.fontMetrics().delim1:i.size===rt.SCRIPTSCRIPT.size?x=e.havingStyle(rt.SCRIPT).fontMetrics().delim2:x=e.fontMetrics().delim2;var _,w;return t.leftDelim==null?_=Aw(e,["mopen"]):_=Vc.customSizedDelim(t.leftDelim,x,!0,e.havingStyle(i),t.mode,["mopen"]),t.continued?w=J.makeSpan([]):t.rightDelim==null?w=Aw(e,["mclose"]):w=Vc.customSizedDelim(t.rightDelim,x,!0,e.havingStyle(i),t.mode,["mclose"]),J.makeSpan(["mord"].concat(s.sizingClasses(e)),[_,J.makeSpan(["mfrac"],[g]),w],e)},mz=(t,e)=>{var i=new Ce.MathNode("mfrac",[li(t.numer,e),li(t.denom,e)]);if(!t.hasBarLine)i.setAttribute("linethickness","0px");else if(t.barSize){var r=Ii(t.barSize,e);i.setAttribute("linethickness",Re(r))}var n=jne(t.size,e.style);if(n.size!==e.style.size){i=new Ce.MathNode("mstyle",[i]);var s=n.size===rt.DISPLAY.size?"true":"false";i.setAttribute("displaystyle",s),i.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var a=new Ce.MathNode("mo",[new Ce.TextNode(t.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(i),t.rightDelim!=null){var l=new Ce.MathNode("mo",[new Ce.TextNode(t.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return sz(o)}return i};Oe({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:i,funcName:r}=t,n=e[0],s=e[1],o,a=null,l=null,u="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,a="(",l=")";break;case"\\\\bracefrac":o=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":o=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:i.mode,continued:!1,numer:n,denom:s,hasBarLine:o,leftDelim:a,rightDelim:l,size:u,barSize:null}},htmlBuilder:pz,mathmlBuilder:mz});Oe({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:i,funcName:r}=t,n=e[0],s=e[1];return{type:"genfrac",mode:i.mode,continued:!0,numer:n,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Oe({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:i,token:r}=t,n;switch(i){case"\\over":n="\\frac";break;case"\\choose":n="\\binom";break;case"\\atop":n="\\\\atopfrac";break;case"\\brace":n="\\\\bracefrac";break;case"\\brack":n="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:n,token:r}}});var Yre=["display","text","script","scriptscript"],Kre=function(e){var i=null;return e.length>0&&(i=e,i=i==="."?null:i),i};Oe({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:i}=t,r=e[4],n=e[5],s=v6(e[0]),o=s.type==="atom"&&s.family==="open"?Kre(s.text):null,a=v6(e[1]),l=a.type==="atom"&&a.family==="close"?Kre(a.text):null,u=vt(e[2],"size"),c,h=null;u.isBlank?c=!0:(h=u.value,c=h.number>0);var d="auto",p=e[3];if(p.type==="ordgroup"){if(p.body.length>0){var f=vt(p.body[0],"textord");d=Yre[Number(f.text)]}}else p=vt(p,"textord"),d=Yre[Number(p.text)];return{type:"genfrac",mode:i.mode,numer:r,denom:n,continued:!1,hasBarLine:c,barSize:h,leftDelim:o,rightDelim:l,size:d}},htmlBuilder:pz,mathmlBuilder:mz});Oe({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:i,funcName:r,token:n}=t;return{type:"infix",mode:i.mode,replaceWith:"\\\\abovefrac",size:vt(e[0],"size").value,token:n}}});Oe({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:i,funcName:r}=t,n=e[0],s=ZMe(vt(e[1],"infix").size),o=e[2],a=s.number>0;return{type:"genfrac",mode:i.mode,numer:n,denom:o,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:pz,mathmlBuilder:mz});var qne=(t,e)=>{var i=e.style,r,n;t.type==="supsub"?(r=t.sup?It(t.sup,e.havingStyle(i.sup()),e):It(t.sub,e.havingStyle(i.sub()),e),n=vt(t.base,"horizBrace")):n=vt(t,"horizBrace");var s=It(n.base,e.havingBaseStyle(rt.DISPLAY)),o=qc.svgSpan(n,e),a;if(n.isOver?(a=J.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e),a.children[0].children[0].children[1].classes.push("svg-align")):(a=J.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e),a.children[0].children[0].children[0].classes.push("svg-align")),r){var l=J.makeSpan(["mord",n.isOver?"mover":"munder"],[a],e);n.isOver?a=J.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},e):a=J.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return J.makeSpan(["mord",n.isOver?"mover":"munder"],[a],e)},wLe=(t,e)=>{var i=qc.mathMLnode(t.label);return new Ce.MathNode(t.isOver?"mover":"munder",[li(t.base,e),i])};Oe({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:i,funcName:r}=t;return{type:"horizBrace",mode:i.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:qne,mathmlBuilder:wLe});Oe({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:i}=t,r=e[1],n=vt(e[0],"url").url;return i.settings.isTrusted({command:"\\href",url:n})?{type:"href",mode:i.mode,href:n,body:rr(r)}:i.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var i=Tr(t.body,e,!1);return J.makeAnchor(t.href,[],i,e)},mathmlBuilder:(t,e)=>{var i=Md(t.body,e);return i instanceof ys||(i=new ys("mrow",[i])),i.setAttribute("href",t.href),i}});Oe({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:i}=t,r=vt(e[0],"url").url;if(!i.settings.isTrusted({command:"\\url",url:r}))return i.formatUnsupportedCmd("\\url");for(var n=[],s=0;s<r.length;s++){var o=r[s];o==="~"&&(o="\\textasciitilde"),n.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:i.mode,font:"\\texttt",body:n};return{type:"href",mode:i.mode,href:r,body:rr(a)}}});Oe({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:i}=t;return{type:"hbox",mode:i.mode,body:rr(e[0])}},htmlBuilder(t,e){var i=Tr(t.body,e,!1);return J.makeFragment(i)},mathmlBuilder(t,e){return new Ce.MathNode("mrow",Qs(t.body,e))}});Oe({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:i,funcName:r,token:n}=t,s=vt(e[0],"raw").string,o=e[1];i.settings.strict&&i.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(r){case"\\htmlClass":l.class=s,a={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,a={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,a={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var u=s.split(","),c=0;c<u.length;c++){var h=u[c].split("=");if(h.length!==2)throw new Ee("Error parsing key-value for \\htmlData");l["data-"+h[0].trim()]=h[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return i.settings.isTrusted(a)?{type:"html",mode:i.mode,attributes:l,body:rr(o)}:i.formatUnsupportedCmd(r)},htmlBuilder:(t,e)=>{var i=Tr(t.body,e,!1),r=["enclosing"];t.attributes.class&&r.push(...t.attributes.class.trim().split(/\s+/));var n=J.makeSpan(r,i,e);for(var s in t.attributes)s!=="class"&&t.attributes.hasOwnProperty(s)&&n.setAttribute(s,t.attributes[s]);return n},mathmlBuilder:(t,e)=>Md(t.body,e)});Oe({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:i}=t;return{type:"htmlmathml",mode:i.mode,html:rr(e[0]),mathml:rr(e[1])}},htmlBuilder:(t,e)=>{var i=Tr(t.html,e,!1);return J.makeFragment(i)},mathmlBuilder:(t,e)=>Md(t.mathml,e)});var $P=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!i)throw new Ee("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(i[1]+i[2]),unit:i[3]};if(!hne(r))throw new Ee("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};Oe({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,i)=>{var{parser:r}=t,n={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(i[0])for(var l=vt(i[0],"raw").string,u=l.split(","),c=0;c<u.length;c++){var h=u[c].split("=");if(h.length===2){var d=h[1].trim();switch(h[0].trim()){case"alt":a=d;break;case"width":n=$P(d);break;case"height":s=$P(d);break;case"totalheight":o=$P(d);break;default:throw new Ee("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var p=vt(e[0],"url").url;return a===""&&(a=p,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:p})?{type:"includegraphics",mode:r.mode,alt:a,width:n,height:s,totalheight:o,src:p}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var i=Ii(t.height,e),r=0;t.totalheight.number>0&&(r=Ii(t.totalheight,e)-i);var n=0;t.width.number>0&&(n=Ii(t.width,e));var s={height:Re(i+r)};n>0&&(s.width=Re(n)),r>0&&(s.verticalAlign=Re(-r));var o=new qP(t.src,t.alt,s);return o.height=i,o.depth=r,o},mathmlBuilder:(t,e)=>{var i=new Ce.MathNode("mglyph",[]);i.setAttribute("alt",t.alt);var r=Ii(t.height,e),n=0;if(t.totalheight.number>0&&(n=Ii(t.totalheight,e)-r,i.setAttribute("valign",Re(-n))),i.setAttribute("height",Re(r+n)),t.width.number>0){var s=Ii(t.width,e);i.setAttribute("width",Re(s))}return i.setAttribute("src",t.src),i}});Oe({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:i,funcName:r}=t,n=vt(e[0],"size");if(i.settings.strict){var s=r[1]==="m",o=n.value.unit==="mu";s?(o||i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+n.value.unit+" units")),i.mode!=="math"&&i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):o&&i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:i.mode,dimension:n.value}},htmlBuilder(t,e){return J.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var i=Ii(t.dimension,e);return new Ce.SpaceNode(i)}});Oe({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:i,funcName:r}=t,n=e[0];return{type:"lap",mode:i.mode,alignment:r.slice(5),body:n}},htmlBuilder:(t,e)=>{var i;t.alignment==="clap"?(i=J.makeSpan([],[It(t.body,e)]),i=J.makeSpan(["inner"],[i],e)):i=J.makeSpan(["inner"],[It(t.body,e)]);var r=J.makeSpan(["fix"],[]),n=J.makeSpan([t.alignment],[i,r],e),s=J.makeSpan(["strut"]);return s.style.height=Re(n.height+n.depth),n.depth&&(s.style.verticalAlign=Re(-n.depth)),n.children.unshift(s),n=J.makeSpan(["thinbox"],[n],e),J.makeSpan(["mord","vbox"],[n],e)},mathmlBuilder:(t,e)=>{var i=new Ce.MathNode("mpadded",[li(t.body,e)]);if(t.alignment!=="rlap"){var r=t.alignment==="llap"?"-1":"-0.5";i.setAttribute("lspace",r+"width")}return i.setAttribute("width","0px"),i}});Oe({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:i,parser:r}=t,n=r.mode;r.switchMode("math");var s=i==="\\("?"\\)":"$",o=r.parseExpression(!1,s);return r.expect(s),r.switchMode(n),{type:"styling",mode:r.mode,style:"text",body:o}}});Oe({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new Ee("Mismatched "+t.funcName)}});var Jre=(t,e)=>{switch(e.style.size){case rt.DISPLAY.size:return t.display;case rt.TEXT.size:return t.text;case rt.SCRIPT.size:return t.script;case rt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};Oe({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:i}=t;return{type:"mathchoice",mode:i.mode,display:rr(e[0]),text:rr(e[1]),script:rr(e[2]),scriptscript:rr(e[3])}},htmlBuilder:(t,e)=>{var i=Jre(t,e),r=Tr(i,e,!1);return J.makeFragment(r)},mathmlBuilder:(t,e)=>{var i=Jre(t,e);return Md(i,e)}});var Gne=(t,e,i,r,n,s,o)=>{t=J.makeSpan([],[t]);var a=i&&Qe.isCharacterBox(i),l,u;if(e){var c=It(e,r.havingStyle(n.sup()),r);u={elem:c,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-c.depth)}}if(i){var h=It(i,r.havingStyle(n.sub()),r);l={elem:h,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-h.height)}}var d;if(u&&l){var p=r.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+t.depth+o;d=J.makeVList({positionType:"bottom",positionData:p,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Re(-s)},{type:"kern",size:l.kern},{type:"elem",elem:t},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:Re(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(l){var f=t.height-o;d=J.makeVList({positionType:"top",positionData:f,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Re(-s)},{type:"kern",size:l.kern},{type:"elem",elem:t}]},r)}else if(u){var m=t.depth+o;d=J.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:t},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:Re(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return t;var g=[d];if(l&&s!==0&&!a){var b=J.makeSpan(["mspace"],[],r);b.style.marginRight=Re(s),g.unshift(b)}return J.makeSpan(["mop","op-limits"],g,r)},Xne=["\\smallint"],m1=(t,e)=>{var i,r,n=!1,s;t.type==="supsub"?(i=t.sup,r=t.sub,s=vt(t.base,"op"),n=!0):s=vt(t,"op");var o=e.style,a=!1;o.size===rt.DISPLAY.size&&s.symbol&&!Qe.contains(Xne,s.name)&&(a=!0);var l;if(s.symbol){var u=a?"Size2-Regular":"Size1-Regular",c="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(c=s.name.slice(1),s.name=c==="oiint"?"\\iint":"\\iiint"),l=J.makeSymbol(s.name,u,"math",e,["mop","op-symbol",a?"large-op":"small-op"]),c.length>0){var h=l.italic,d=J.staticSvg(c+"Size"+(a?"2":"1"),e);l=J.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:d,shift:a?.08:0}]},e),s.name="\\"+c,l.classes.unshift("mop"),l.italic=h}}else if(s.body){var p=Tr(s.body,e,!0);p.length===1&&p[0]instanceof Zs?(l=p[0],l.classes[0]="mop"):l=J.makeSpan(["mop"],p,e)}else{for(var f=[],m=1;m<s.name.length;m++)f.push(J.mathsym(s.name[m],s.mode,e));l=J.makeSpan(["mop"],f,e)}var g=0,b=0;return(l instanceof Zs||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(g=(l.height-l.depth)/2-e.fontMetrics().axisHeight,b=l.italic),n?Gne(l,i,r,e,o,b,g):(g&&(l.style.position="relative",l.style.top=Re(g)),l)},Tw=(t,e)=>{var i;if(t.symbol)i=new ys("mo",[ma(t.name,t.mode)]),Qe.contains(Xne,t.name)&&i.setAttribute("largeop","false");else if(t.body)i=new ys("mo",Qs(t.body,e));else{i=new ys("mi",[new fa(t.name.slice(1))]);var r=new ys("mo",[ma("\u2061","text")]);t.parentIsSupSub?i=new ys("mrow",[i,r]):i=_ne([i,r])}return i},_Le={"\u220F":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22C0":"\\bigwedge","\u22C1":"\\bigvee","\u22C2":"\\bigcap","\u22C3":"\\bigcup","\u2A00":"\\bigodot","\u2A01":"\\bigoplus","\u2A02":"\\bigotimes","\u2A04":"\\biguplus","\u2A06":"\\bigsqcup"};Oe({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220F","\u2210","\u2211","\u22C0","\u22C1","\u22C2","\u22C3","\u2A00","\u2A01","\u2A02","\u2A04","\u2A06"],props:{numArgs:0},handler:(t,e)=>{var{parser:i,funcName:r}=t,n=r;return n.length===1&&(n=_Le[n]),{type:"op",mode:i.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:m1,mathmlBuilder:Tw});Oe({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:i}=t,r=e[0];return{type:"op",mode:i.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:rr(r)}},htmlBuilder:m1,mathmlBuilder:Tw});var CLe={"\u222B":"\\int","\u222C":"\\iint","\u222D":"\\iiint","\u222E":"\\oint","\u222F":"\\oiint","\u2230":"\\oiiint"};Oe({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:i}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:i}},htmlBuilder:m1,mathmlBuilder:Tw});Oe({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:i}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:i}},htmlBuilder:m1,mathmlBuilder:Tw});Oe({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222B","\u222C","\u222D","\u222E","\u222F","\u2230"],props:{numArgs:0},handler(t){var{parser:e,funcName:i}=t,r=i;return r.length===1&&(r=CLe[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:m1,mathmlBuilder:Tw});var Yne=(t,e)=>{var i,r,n=!1,s;t.type==="supsub"?(i=t.sup,r=t.sub,s=vt(t.base,"operatorname"),n=!0):s=vt(t,"operatorname");var o;if(s.body.length>0){for(var a=s.body.map(h=>{var d=h.text;return typeof d=="string"?{type:"textord",mode:h.mode,text:d}:h}),l=Tr(a,e.withFont("mathrm"),!0),u=0;u<l.length;u++){var c=l[u];c instanceof Zs&&(c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=J.makeSpan(["mop"],l,e)}else o=J.makeSpan(["mop"],[],e);return n?Gne(o,i,r,e,e.style,0,0):o},SLe=(t,e)=>{for(var i=Qs(t.body,e.withFont("mathrm")),r=!0,n=0;n<i.length;n++){var s=i[n];if(!(s instanceof Ce.SpaceNode))if(s instanceof Ce.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof Ce.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var a=i.map(c=>c.toText()).join("");i=[new Ce.TextNode(a)]}var l=new Ce.MathNode("mi",i);l.setAttribute("mathvariant","normal");var u=new Ce.MathNode("mo",[ma("\u2061","text")]);return t.parentIsSupSub?new Ce.MathNode("mrow",[l,u]):Ce.newDocumentFragment([l,u])};Oe({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:i,funcName:r}=t,n=e[0];return{type:"operatorname",mode:i.mode,body:rr(n),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Yne,mathmlBuilder:SLe});O("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");qp({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?J.makeFragment(Tr(t.body,e,!1)):J.makeSpan(["mord"],Tr(t.body,e,!0),e)},mathmlBuilder(t,e){return Md(t.body,e,!0)}});Oe({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:i}=t,r=e[0];return{type:"overline",mode:i.mode,body:r}},htmlBuilder(t,e){var i=It(t.body,e.havingCrampedStyle()),r=J.makeLineSpan("overline-line",e),n=e.fontMetrics().defaultRuleThickness,s=J.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:3*n},{type:"elem",elem:r},{type:"kern",size:n}]},e);return J.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(t,e){var i=new Ce.MathNode("mo",[new Ce.TextNode("\u203E")]);i.setAttribute("stretchy","true");var r=new Ce.MathNode("mover",[li(t.body,e),i]);return r.setAttribute("accent","true"),r}});Oe({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:i}=t,r=e[0];return{type:"phantom",mode:i.mode,body:rr(r)}},htmlBuilder:(t,e)=>{var i=Tr(t.body,e.withPhantom(),!1);return J.makeFragment(i)},mathmlBuilder:(t,e)=>{var i=Qs(t.body,e);return new Ce.MathNode("mphantom",i)}});Oe({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:i}=t,r=e[0];return{type:"hphantom",mode:i.mode,body:r}},htmlBuilder:(t,e)=>{var i=J.makeSpan([],[It(t.body,e.withPhantom())]);if(i.height=0,i.depth=0,i.children)for(var r=0;r<i.children.length;r++)i.children[r].height=0,i.children[r].depth=0;return i=J.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},e),J.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var i=Qs(rr(t.body),e),r=new Ce.MathNode("mphantom",i),n=new Ce.MathNode("mpadded",[r]);return n.setAttribute("height","0px"),n.setAttribute("depth","0px"),n}});Oe({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:i}=t,r=e[0];return{type:"vphantom",mode:i.mode,body:r}},htmlBuilder:(t,e)=>{var i=J.makeSpan(["inner"],[It(t.body,e.withPhantom())]),r=J.makeSpan(["fix"],[]);return J.makeSpan(["mord","rlap"],[i,r],e)},mathmlBuilder:(t,e)=>{var i=Qs(rr(t.body),e),r=new Ce.MathNode("mphantom",i),n=new Ce.MathNode("mpadded",[r]);return n.setAttribute("width","0px"),n}});Oe({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:i}=t,r=vt(e[0],"size").value,n=e[1];return{type:"raisebox",mode:i.mode,dy:r,body:n}},htmlBuilder(t,e){var i=It(t.body,e),r=Ii(t.dy,e);return J.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:i}]},e)},mathmlBuilder(t,e){var i=new Ce.MathNode("mpadded",[li(t.body,e)]),r=t.dy.number+t.dy.unit;return i.setAttribute("voffset",r),i}});Oe({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});Oe({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,i){var{parser:r}=t,n=i[0],s=vt(e[0],"size"),o=vt(e[1],"size");return{type:"rule",mode:r.mode,shift:n&&vt(n,"size").value,width:s.value,height:o.value}},htmlBuilder(t,e){var i=J.makeSpan(["mord","rule"],[],e),r=Ii(t.width,e),n=Ii(t.height,e),s=t.shift?Ii(t.shift,e):0;return i.style.borderRightWidth=Re(r),i.style.borderTopWidth=Re(n),i.style.bottom=Re(s),i.width=r,i.height=n+s,i.depth=-s,i.maxFontSize=n*1.125*e.sizeMultiplier,i},mathmlBuilder(t,e){var i=Ii(t.width,e),r=Ii(t.height,e),n=t.shift?Ii(t.shift,e):0,s=e.color&&e.getColor()||"black",o=new Ce.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",Re(i)),o.setAttribute("height",Re(r));var a=new Ce.MathNode("mpadded",[o]);return n>=0?a.setAttribute("height",Re(n)):(a.setAttribute("height",Re(n)),a.setAttribute("depth",Re(-n))),a.setAttribute("voffset",Re(n)),a}});function Kne(t,e,i){for(var r=Tr(t,e,!1),n=e.sizeMultiplier/i.sizeMultiplier,s=0;s<r.length;s++){var o=r[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(r[s].classes,e.sizingClasses(i)):r[s].classes[o+1]==="reset-size"+e.size&&(r[s].classes[o+1]="reset-size"+i.size),r[s].height*=n,r[s].depth*=n}return J.makeFragment(r)}var Zre=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],ELe=(t,e)=>{var i=e.havingSize(t.size);return Kne(t.body,i,e)};Oe({type:"sizing",names:Zre,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:i,funcName:r,parser:n}=t,s=n.parseExpression(!1,i);return{type:"sizing",mode:n.mode,size:Zre.indexOf(r)+1,body:s}},htmlBuilder:ELe,mathmlBuilder:(t,e)=>{var i=e.havingSize(t.size),r=Qs(t.body,i),n=new Ce.MathNode("mstyle",r);return n.setAttribute("mathsize",Re(i.sizeMultiplier)),n}});Oe({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,i)=>{var{parser:r}=t,n=!1,s=!1,o=i[0]&&vt(i[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l){var u=o.body[l];if(a=u.text,a==="t")n=!0;else if(a==="b")s=!0;else{n=!1,s=!1;break}}else n=!0,s=!0;var c=e[0];return{type:"smash",mode:r.mode,body:c,smashHeight:n,smashDepth:s}},htmlBuilder:(t,e)=>{var i=J.makeSpan([],[It(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return i;if(t.smashHeight&&(i.height=0,i.children))for(var r=0;r<i.children.length;r++)i.children[r].height=0;if(t.smashDepth&&(i.depth=0,i.children))for(var n=0;n<i.children.length;n++)i.children[n].depth=0;var s=J.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},e);return J.makeSpan(["mord"],[s],e)},mathmlBuilder:(t,e)=>{var i=new Ce.MathNode("mpadded",[li(t.body,e)]);return t.smashHeight&&i.setAttribute("height","0px"),t.smashDepth&&i.setAttribute("depth","0px"),i}});Oe({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,i){var{parser:r}=t,n=i[0],s=e[0];return{type:"sqrt",mode:r.mode,body:s,index:n}},htmlBuilder(t,e){var i=It(t.body,e.havingCrampedStyle());i.height===0&&(i.height=e.fontMetrics().xHeight),i=J.wrapFragment(i,e);var r=e.fontMetrics(),n=r.defaultRuleThickness,s=n;e.style.id<rt.TEXT.id&&(s=e.fontMetrics().xHeight);var o=n+s/4,a=i.height+i.depth+o+n,{span:l,ruleWidth:u,advanceWidth:c}=Vc.sqrtImage(a,e),h=l.height-u;h>i.height+i.depth+o&&(o=(o+h-i.height-i.depth)/2);var d=l.height-i.height-o-u;i.style.paddingLeft=Re(c);var p=J.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:-(i.height+d)},{type:"elem",elem:l},{type:"kern",size:u}]},e);if(t.index){var f=e.havingStyle(rt.SCRIPTSCRIPT),m=It(t.index,f,e),g=.6*(p.height-p.depth),b=J.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:m}]},e),v=J.makeSpan(["root"],[b]);return J.makeSpan(["mord","sqrt"],[v,p],e)}else return J.makeSpan(["mord","sqrt"],[p],e)},mathmlBuilder(t,e){var{body:i,index:r}=t;return r?new Ce.MathNode("mroot",[li(i,e),li(r,e)]):new Ce.MathNode("msqrt",[li(i,e)])}});var Qre={display:rt.DISPLAY,text:rt.TEXT,script:rt.SCRIPT,scriptscript:rt.SCRIPTSCRIPT};Oe({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:i,funcName:r,parser:n}=t,s=n.parseExpression(!0,i),o=r.slice(1,r.length-5);return{type:"styling",mode:n.mode,style:o,body:s}},htmlBuilder(t,e){var i=Qre[t.style],r=e.havingStyle(i).withFont("");return Kne(t.body,r,e)},mathmlBuilder(t,e){var i=Qre[t.style],r=e.havingStyle(i),n=Qs(t.body,r),s=new Ce.MathNode("mstyle",n),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=o[t.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});var kLe=function(e,i){var r=e.base;if(r)if(r.type==="op"){var n=r.limits&&(i.style.size===rt.DISPLAY.size||r.alwaysHandleSupSub);return n?m1:null}else if(r.type==="operatorname"){var s=r.alwaysHandleSupSub&&(i.style.size===rt.DISPLAY.size||r.limits);return s?Yne:null}else{if(r.type==="accent")return Qe.isCharacterBox(r.base)?lz:null;if(r.type==="horizBrace"){var o=!e.sub;return o===r.isOver?qne:null}else return null}else return null};qp({type:"supsub",htmlBuilder(t,e){var i=kLe(t,e);if(i)return i(t,e);var{base:r,sup:n,sub:s}=t,o=It(r,e),a,l,u=e.fontMetrics(),c=0,h=0,d=r&&Qe.isCharacterBox(r);if(n){var p=e.havingStyle(e.style.sup());a=It(n,p,e),d||(c=o.height-p.fontMetrics().supDrop*p.sizeMultiplier/e.sizeMultiplier)}if(s){var f=e.havingStyle(e.style.sub());l=It(s,f,e),d||(h=o.depth+f.fontMetrics().subDrop*f.sizeMultiplier/e.sizeMultiplier)}var m;e.style===rt.DISPLAY?m=u.sup1:e.style.cramped?m=u.sup3:m=u.sup2;var g=e.sizeMultiplier,b=Re(.5/u.ptPerEm/g),v=null;if(l){var y=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof Zs||y)&&(v=Re(-o.italic))}var x;if(a&&l){c=Math.max(c,m,a.depth+.25*u.xHeight),h=Math.max(h,u.sub2);var _=u.defaultRuleThickness,w=4*_;if(c-a.depth-(l.height-h)<w){h=w-(c-a.depth)+l.height;var C=.8*u.xHeight-(c-a.depth);C>0&&(c+=C,h-=C)}var E=[{type:"elem",elem:l,shift:h,marginRight:b,marginLeft:v},{type:"elem",elem:a,shift:-c,marginRight:b}];x=J.makeVList({positionType:"individualShift",children:E},e)}else if(l){h=Math.max(h,u.sub1,l.height-.8*u.xHeight);var A=[{type:"elem",elem:l,marginLeft:v,marginRight:b}];x=J.makeVList({positionType:"shift",positionData:h,children:A},e)}else if(a)c=Math.max(c,m,a.depth+.25*u.xHeight),x=J.makeVList({positionType:"shift",positionData:-c,children:[{type:"elem",elem:a,marginRight:b}]},e);else throw new Error("supsub must have either sup or sub.");var D=XP(o,"right")||"mord";return J.makeSpan([D],[o,J.makeSpan(["msupsub"],[x])],e)},mathmlBuilder(t,e){var i=!1,r,n;t.base&&t.base.type==="horizBrace"&&(n=!!t.sup,n===t.base.isOver&&(i=!0,r=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var s=[li(t.base,e)];t.sub&&s.push(li(t.sub,e)),t.sup&&s.push(li(t.sup,e));var o;if(i)o=r?"mover":"munder";else if(t.sub)if(t.sup){var u=t.base;u&&u.type==="op"&&u.limits&&e.style===rt.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(e.style===rt.DISPLAY||u.limits)?o="munderover":o="msubsup"}else{var l=t.base;l&&l.type==="op"&&l.limits&&(e.style===rt.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===rt.DISPLAY)?o="munder":o="msub"}else{var a=t.base;a&&a.type==="op"&&a.limits&&(e.style===rt.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===rt.DISPLAY)?o="mover":o="msup"}return new Ce.MathNode(o,s)}});qp({type:"atom",htmlBuilder(t,e){return J.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var i=new Ce.MathNode("mo",[ma(t.text,t.mode)]);if(t.family==="bin"){var r=oz(t,e);r==="bold-italic"&&i.setAttribute("mathvariant",r)}else t.family==="punct"?i.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&i.setAttribute("stretchy","false");return i}});var Jne={mi:"italic",mn:"normal",mtext:"normal"};qp({type:"mathord",htmlBuilder(t,e){return J.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var i=new Ce.MathNode("mi",[ma(t.text,t.mode,e)]),r=oz(t,e)||"italic";return r!==Jne[i.type]&&i.setAttribute("mathvariant",r),i}});qp({type:"textord",htmlBuilder(t,e){return J.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var i=ma(t.text,t.mode,e),r=oz(t,e)||"normal",n;return t.mode==="text"?n=new Ce.MathNode("mtext",[i]):/[0-9]/.test(t.text)?n=new Ce.MathNode("mn",[i]):t.text==="\\prime"?n=new Ce.MathNode("mo",[i]):n=new Ce.MathNode("mi",[i]),r!==Jne[n.type]&&n.setAttribute("mathvariant",r),n}});var HP={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},UP={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};qp({type:"spacing",htmlBuilder(t,e){if(UP.hasOwnProperty(t.text)){var i=UP[t.text].className||"";if(t.mode==="text"){var r=J.makeOrd(t,e,"textord");return r.classes.push(i),r}else return J.makeSpan(["mspace",i],[J.mathsym(t.text,t.mode,e)],e)}else{if(HP.hasOwnProperty(t.text))return J.makeSpan(["mspace",HP[t.text]],[],e);throw new Ee('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var i;if(UP.hasOwnProperty(t.text))i=new Ce.MathNode("mtext",[new Ce.TextNode("\xA0")]);else{if(HP.hasOwnProperty(t.text))return new Ce.MathNode("mspace");throw new Ee('Unknown type of space "'+t.text+'"')}return i}});var ene=()=>{var t=new Ce.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};qp({type:"tag",mathmlBuilder(t,e){var i=new Ce.MathNode("mtable",[new Ce.MathNode("mtr",[ene(),new Ce.MathNode("mtd",[Md(t.body,e)]),ene(),new Ce.MathNode("mtd",[Md(t.tag,e)])])]);return i.setAttribute("width","100%"),i}});var tne={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},ine={"\\textbf":"textbf","\\textmd":"textmd"},ALe={"\\textit":"textit","\\textup":"textup"},rne=(t,e)=>{var i=t.font;if(i){if(tne[i])return e.withTextFontFamily(tne[i]);if(ine[i])return e.withTextFontWeight(ine[i]);if(i==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(ALe[i])};Oe({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:i,funcName:r}=t,n=e[0];return{type:"text",mode:i.mode,body:rr(n),font:r}},htmlBuilder(t,e){var i=rne(t,e),r=Tr(t.body,i,!0);return J.makeSpan(["mord","text"],r,i)},mathmlBuilder(t,e){var i=rne(t,e);return Md(t.body,i)}});Oe({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:i}=t;return{type:"underline",mode:i.mode,body:e[0]}},htmlBuilder(t,e){var i=It(t.body,e),r=J.makeLineSpan("underline-line",e),n=e.fontMetrics().defaultRuleThickness,s=J.makeVList({positionType:"top",positionData:i.height,children:[{type:"kern",size:n},{type:"elem",elem:r},{type:"kern",size:3*n},{type:"elem",elem:i}]},e);return J.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(t,e){var i=new Ce.MathNode("mo",[new Ce.TextNode("\u203E")]);i.setAttribute("stretchy","true");var r=new Ce.MathNode("munder",[li(t.body,e),i]);return r.setAttribute("accentunder","true"),r}});Oe({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:i}=t;return{type:"vcenter",mode:i.mode,body:e[0]}},htmlBuilder(t,e){var i=It(t.body,e),r=e.fontMetrics().axisHeight,n=.5*(i.height-r-(i.depth+r));return J.makeVList({positionType:"shift",positionData:n,children:[{type:"elem",elem:i}]},e)},mathmlBuilder(t,e){return new Ce.MathNode("mpadded",[li(t.body,e)],["vcenter"])}});Oe({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,i){throw new Ee("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var i=nne(t),r=[],n=e.havingStyle(e.style.text()),s=0;s<i.length;s++){var o=i[s];o==="~"&&(o="\\textasciitilde"),r.push(J.makeSymbol(o,"Typewriter-Regular",t.mode,n,["mord","texttt"]))}return J.makeSpan(["mord","text"].concat(n.sizingClasses(e)),J.tryCombineChars(r),n)},mathmlBuilder(t,e){var i=new Ce.TextNode(nne(t)),r=new Ce.MathNode("mtext",[i]);return r.setAttribute("mathvariant","monospace"),r}});var nne=t=>t.body.replace(/ /g,t.star?"\u2423":"\xA0"),Rd=xne,Zne=`[ \r
	]`,TLe="\\\\[a-zA-Z@]+",RLe="\\\\[^\uD800-\uDFFF]",DLe="("+TLe+")"+Zne+"*",MLe=`\\\\(
|[ \r	]+
?)[ \r	]*`,QP="[\u0300-\u036F]",FLe=new RegExp(QP+"+$"),LLe="("+Zne+"+)|"+(MLe+"|")+"([!-\\[\\]-\u2027\u202A-\uD7FF\uF900-\uFFFF]"+(QP+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(QP+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+DLe)+("|"+RLe+")"),y6=class{constructor(e,i){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=i,this.tokenRegex=new RegExp(LLe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,i){this.catcodes[e]=i}lex(){var e=this.input,i=this.tokenRegex.lastIndex;if(i===e.length)return new pa("EOF",new Eo(this,i,i));var r=this.tokenRegex.exec(e);if(r===null||r.index!==i)throw new Ee("Unexpected character: '"+e[i]+"'",new pa(e[i],new Eo(this,i,i+1)));var n=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[n]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new pa(n,new Eo(this,i,this.tokenRegex.lastIndex))}},ez=class{constructor(e,i){e===void 0&&(e={}),i===void 0&&(i={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=i,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Ee("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var i in e)e.hasOwnProperty(i)&&(e[i]==null?delete this.current[i]:this.current[i]=e[i])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,i,r){if(r===void 0&&(r=!1),r){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=i)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}i==null?delete this.current[e]:this.current[e]=i}},OLe=Hne;O("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});O("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});O("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});O("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});O("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var i=t.future();return e[0].length===1&&e[0][0].text===i.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});O("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");O("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var sne={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};O("\\char",function(t){var e=t.popToken(),i,r="";if(e.text==="'")i=8,e=t.popToken();else if(e.text==='"')i=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")r=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Ee("\\char` missing argument");r=e.text.charCodeAt(0)}else i=10;if(i){if(r=sne[e.text],r==null||r>=i)throw new Ee("Invalid base-"+i+" digit "+e.text);for(var n;(n=sne[t.future().text])!=null&&n<i;)r*=i,r+=n,t.popToken()}return"\\@char{"+r+"}"});var gz=(t,e,i,r)=>{var n=t.consumeArg().tokens;if(n.length!==1)throw new Ee("\\newcommand's first argument must be a macro name");var s=n[0].text,o=t.isDefined(s);if(o&&!e)throw new Ee("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!o&&!i)throw new Ee("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var a=0;if(n=t.consumeArg().tokens,n.length===1&&n[0].text==="["){for(var l="",u=t.expandNextToken();u.text!=="]"&&u.text!=="EOF";)l+=u.text,u=t.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new Ee("Invalid number of arguments: "+l);a=parseInt(l),n=t.consumeArg().tokens}return o&&r||t.macros.set(s,{tokens:n,numArgs:a}),""};O("\\newcommand",t=>gz(t,!1,!0,!1));O("\\renewcommand",t=>gz(t,!0,!1,!1));O("\\providecommand",t=>gz(t,!0,!0,!0));O("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(i=>i.text).join("")),""});O("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(i=>i.text).join("")),""});O("\\show",t=>{var e=t.popToken(),i=e.text;return console.log(e,t.macros.get(i),Rd[i],mi.math[i],mi.text[i]),""});O("\\bgroup","{");O("\\egroup","}");O("~","\\nobreakspace");O("\\lq","`");O("\\rq","'");O("\\aa","\\r a");O("\\AA","\\r A");O("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xA9}");O("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");O("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xAE}");O("\u212C","\\mathscr{B}");O("\u2130","\\mathscr{E}");O("\u2131","\\mathscr{F}");O("\u210B","\\mathscr{H}");O("\u2110","\\mathscr{I}");O("\u2112","\\mathscr{L}");O("\u2133","\\mathscr{M}");O("\u211B","\\mathscr{R}");O("\u212D","\\mathfrak{C}");O("\u210C","\\mathfrak{H}");O("\u2128","\\mathfrak{Z}");O("\\Bbbk","\\Bbb{k}");O("\xB7","\\cdotp");O("\\llap","\\mathllap{\\textrm{#1}}");O("\\rlap","\\mathrlap{\\textrm{#1}}");O("\\clap","\\mathclap{\\textrm{#1}}");O("\\mathstrut","\\vphantom{(}");O("\\underbar","\\underline{\\text{#1}}");O("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');O("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}");O("\\ne","\\neq");O("\u2260","\\neq");O("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}");O("\u2209","\\notin");O("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}");O("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}");O("\u225A","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225A}}");O("\u225B","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225B}}");O("\u225D","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225D}}");O("\u225E","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225E}}");O("\u225F","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225F}}");O("\u27C2","\\perp");O("\u203C","\\mathclose{!\\mkern-0.8mu!}");O("\u220C","\\notni");O("\u231C","\\ulcorner");O("\u231D","\\urcorner");O("\u231E","\\llcorner");O("\u231F","\\lrcorner");O("\xA9","\\copyright");O("\xAE","\\textregistered");O("\uFE0F","\\textregistered");O("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');O("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');O("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');O("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');O("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");O("\u22EE","\\vdots");O("\\varGamma","\\mathit{\\Gamma}");O("\\varDelta","\\mathit{\\Delta}");O("\\varTheta","\\mathit{\\Theta}");O("\\varLambda","\\mathit{\\Lambda}");O("\\varXi","\\mathit{\\Xi}");O("\\varPi","\\mathit{\\Pi}");O("\\varSigma","\\mathit{\\Sigma}");O("\\varUpsilon","\\mathit{\\Upsilon}");O("\\varPhi","\\mathit{\\Phi}");O("\\varPsi","\\mathit{\\Psi}");O("\\varOmega","\\mathit{\\Omega}");O("\\substack","\\begin{subarray}{c}#1\\end{subarray}");O("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");O("\\boxed","\\fbox{$\\displaystyle{#1}$}");O("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");O("\\implies","\\DOTSB\\;\\Longrightarrow\\;");O("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");O("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");O("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var one={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};O("\\dots",function(t){var e="\\dotso",i=t.expandAfterFuture().text;return i in one?e=one[i]:(i.slice(0,4)==="\\not"||i in mi.math&&Qe.contains(["bin","rel"],mi.math[i].group))&&(e="\\dotsb"),e});var bz={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};O("\\dotso",function(t){var e=t.future().text;return e in bz?"\\ldots\\,":"\\ldots"});O("\\dotsc",function(t){var e=t.future().text;return e in bz&&e!==","?"\\ldots\\,":"\\ldots"});O("\\cdots",function(t){var e=t.future().text;return e in bz?"\\@cdots\\,":"\\@cdots"});O("\\dotsb","\\cdots");O("\\dotsm","\\cdots");O("\\dotsi","\\!\\cdots");O("\\dotsx","\\ldots\\,");O("\\DOTSI","\\relax");O("\\DOTSB","\\relax");O("\\DOTSX","\\relax");O("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");O("\\,","\\tmspace+{3mu}{.1667em}");O("\\thinspace","\\,");O("\\>","\\mskip{4mu}");O("\\:","\\tmspace+{4mu}{.2222em}");O("\\medspace","\\:");O("\\;","\\tmspace+{5mu}{.2777em}");O("\\thickspace","\\;");O("\\!","\\tmspace-{3mu}{.1667em}");O("\\negthinspace","\\!");O("\\negmedspace","\\tmspace-{4mu}{.2222em}");O("\\negthickspace","\\tmspace-{5mu}{.277em}");O("\\enspace","\\kern.5em ");O("\\enskip","\\hskip.5em\\relax");O("\\quad","\\hskip1em\\relax");O("\\qquad","\\hskip2em\\relax");O("\\tag","\\@ifstar\\tag@literal\\tag@paren");O("\\tag@paren","\\tag@literal{({#1})}");O("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new Ee("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});O("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");O("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");O("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");O("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");O("\\newline","\\\\\\relax");O("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Qne=Re(fu["Main-Regular"][84][1]-.7*fu["Main-Regular"][65][1]);O("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Qne+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");O("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Qne+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");O("\\hspace","\\@ifstar\\@hspacer\\@hspace");O("\\@hspace","\\hskip #1\\relax");O("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");O("\\ordinarycolon",":");O("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");O("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');O("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');O("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');O("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');O("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');O("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');O("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');O("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');O("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');O("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');O("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');O("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');O("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');O("\u2237","\\dblcolon");O("\u2239","\\eqcolon");O("\u2254","\\coloneqq");O("\u2255","\\eqqcolon");O("\u2A74","\\Coloneqq");O("\\ratio","\\vcentcolon");O("\\coloncolon","\\dblcolon");O("\\colonequals","\\coloneqq");O("\\coloncolonequals","\\Coloneqq");O("\\equalscolon","\\eqqcolon");O("\\equalscoloncolon","\\Eqqcolon");O("\\colonminus","\\coloneq");O("\\coloncolonminus","\\Coloneq");O("\\minuscolon","\\eqcolon");O("\\minuscoloncolon","\\Eqcolon");O("\\coloncolonapprox","\\Colonapprox");O("\\coloncolonsim","\\Colonsim");O("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");O("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");O("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");O("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");O("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220C}}");O("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");O("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");O("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");O("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");O("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");O("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");O("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");O("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");O("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}");O("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}");O("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}");O("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}");O("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}");O("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}");O("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}");O("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}");O("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}");O("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}");O("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228A}");O("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2ACB}");O("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228B}");O("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2ACC}");O("\\imath","\\html@mathml{\\@imath}{\u0131}");O("\\jmath","\\html@mathml{\\@jmath}{\u0237}");O("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27E6}}");O("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27E7}}");O("\u27E6","\\llbracket");O("\u27E7","\\rrbracket");O("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}");O("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}");O("\u2983","\\lBrace");O("\u2984","\\rBrace");O("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`\u29B5}}");O("\u29B5","\\minuso");O("\\darr","\\downarrow");O("\\dArr","\\Downarrow");O("\\Darr","\\Downarrow");O("\\lang","\\langle");O("\\rang","\\rangle");O("\\uarr","\\uparrow");O("\\uArr","\\Uparrow");O("\\Uarr","\\Uparrow");O("\\N","\\mathbb{N}");O("\\R","\\mathbb{R}");O("\\Z","\\mathbb{Z}");O("\\alef","\\aleph");O("\\alefsym","\\aleph");O("\\Alpha","\\mathrm{A}");O("\\Beta","\\mathrm{B}");O("\\bull","\\bullet");O("\\Chi","\\mathrm{X}");O("\\clubs","\\clubsuit");O("\\cnums","\\mathbb{C}");O("\\Complex","\\mathbb{C}");O("\\Dagger","\\ddagger");O("\\diamonds","\\diamondsuit");O("\\empty","\\emptyset");O("\\Epsilon","\\mathrm{E}");O("\\Eta","\\mathrm{H}");O("\\exist","\\exists");O("\\harr","\\leftrightarrow");O("\\hArr","\\Leftrightarrow");O("\\Harr","\\Leftrightarrow");O("\\hearts","\\heartsuit");O("\\image","\\Im");O("\\infin","\\infty");O("\\Iota","\\mathrm{I}");O("\\isin","\\in");O("\\Kappa","\\mathrm{K}");O("\\larr","\\leftarrow");O("\\lArr","\\Leftarrow");O("\\Larr","\\Leftarrow");O("\\lrarr","\\leftrightarrow");O("\\lrArr","\\Leftrightarrow");O("\\Lrarr","\\Leftrightarrow");O("\\Mu","\\mathrm{M}");O("\\natnums","\\mathbb{N}");O("\\Nu","\\mathrm{N}");O("\\Omicron","\\mathrm{O}");O("\\plusmn","\\pm");O("\\rarr","\\rightarrow");O("\\rArr","\\Rightarrow");O("\\Rarr","\\Rightarrow");O("\\real","\\Re");O("\\reals","\\mathbb{R}");O("\\Reals","\\mathbb{R}");O("\\Rho","\\mathrm{P}");O("\\sdot","\\cdot");O("\\sect","\\S");O("\\spades","\\spadesuit");O("\\sub","\\subset");O("\\sube","\\subseteq");O("\\supe","\\supseteq");O("\\Tau","\\mathrm{T}");O("\\thetasym","\\vartheta");O("\\weierp","\\wp");O("\\Zeta","\\mathrm{Z}");O("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");O("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");O("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");O("\\bra","\\mathinner{\\langle{#1}|}");O("\\ket","\\mathinner{|{#1}\\rangle}");O("\\braket","\\mathinner{\\langle{#1}\\rangle}");O("\\Bra","\\left\\langle#1\\right|");O("\\Ket","\\left|#1\\right\\rangle");var ese=t=>e=>{var i=e.consumeArg().tokens,r=e.consumeArg().tokens,n=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),a=e.macros.get("\\|");e.macros.beginGroup();var l=h=>d=>{t&&(d.macros.set("|",o),n.length&&d.macros.set("\\|",a));var p=h;if(!h&&n.length){var f=d.future();f.text==="|"&&(d.popToken(),p=!0)}return{tokens:p?n:r,numArgs:0}};e.macros.set("|",l(!1)),n.length&&e.macros.set("\\|",l(!0));var u=e.consumeArg().tokens,c=e.expandTokens([...s,...u,...i]);return e.macros.endGroup(),{tokens:c.reverse(),numArgs:0}};O("\\bra@ket",ese(!1));O("\\bra@set",ese(!0));O("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");O("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");O("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");O("\\angln","{\\angl n}");O("\\blue","\\textcolor{##6495ed}{#1}");O("\\orange","\\textcolor{##ffa500}{#1}");O("\\pink","\\textcolor{##ff00af}{#1}");O("\\red","\\textcolor{##df0030}{#1}");O("\\green","\\textcolor{##28ae7b}{#1}");O("\\gray","\\textcolor{gray}{#1}");O("\\purple","\\textcolor{##9d38bd}{#1}");O("\\blueA","\\textcolor{##ccfaff}{#1}");O("\\blueB","\\textcolor{##80f6ff}{#1}");O("\\blueC","\\textcolor{##63d9ea}{#1}");O("\\blueD","\\textcolor{##11accd}{#1}");O("\\blueE","\\textcolor{##0c7f99}{#1}");O("\\tealA","\\textcolor{##94fff5}{#1}");O("\\tealB","\\textcolor{##26edd5}{#1}");O("\\tealC","\\textcolor{##01d1c1}{#1}");O("\\tealD","\\textcolor{##01a995}{#1}");O("\\tealE","\\textcolor{##208170}{#1}");O("\\greenA","\\textcolor{##b6ffb0}{#1}");O("\\greenB","\\textcolor{##8af281}{#1}");O("\\greenC","\\textcolor{##74cf70}{#1}");O("\\greenD","\\textcolor{##1fab54}{#1}");O("\\greenE","\\textcolor{##0d923f}{#1}");O("\\goldA","\\textcolor{##ffd0a9}{#1}");O("\\goldB","\\textcolor{##ffbb71}{#1}");O("\\goldC","\\textcolor{##ff9c39}{#1}");O("\\goldD","\\textcolor{##e07d10}{#1}");O("\\goldE","\\textcolor{##a75a05}{#1}");O("\\redA","\\textcolor{##fca9a9}{#1}");O("\\redB","\\textcolor{##ff8482}{#1}");O("\\redC","\\textcolor{##f9685d}{#1}");O("\\redD","\\textcolor{##e84d39}{#1}");O("\\redE","\\textcolor{##bc2612}{#1}");O("\\maroonA","\\textcolor{##ffbde0}{#1}");O("\\maroonB","\\textcolor{##ff92c6}{#1}");O("\\maroonC","\\textcolor{##ed5fa6}{#1}");O("\\maroonD","\\textcolor{##ca337c}{#1}");O("\\maroonE","\\textcolor{##9e034e}{#1}");O("\\purpleA","\\textcolor{##ddd7ff}{#1}");O("\\purpleB","\\textcolor{##c6b9fc}{#1}");O("\\purpleC","\\textcolor{##aa87ff}{#1}");O("\\purpleD","\\textcolor{##7854ab}{#1}");O("\\purpleE","\\textcolor{##543b78}{#1}");O("\\mintA","\\textcolor{##f5f9e8}{#1}");O("\\mintB","\\textcolor{##edf2df}{#1}");O("\\mintC","\\textcolor{##e0e5cc}{#1}");O("\\grayA","\\textcolor{##f6f7f7}{#1}");O("\\grayB","\\textcolor{##f0f1f2}{#1}");O("\\grayC","\\textcolor{##e3e5e6}{#1}");O("\\grayD","\\textcolor{##d6d8da}{#1}");O("\\grayE","\\textcolor{##babec2}{#1}");O("\\grayF","\\textcolor{##888d93}{#1}");O("\\grayG","\\textcolor{##626569}{#1}");O("\\grayH","\\textcolor{##3b3e40}{#1}");O("\\grayI","\\textcolor{##21242c}{#1}");O("\\kaBlue","\\textcolor{##314453}{#1}");O("\\kaGreen","\\textcolor{##71B307}{#1}");var tse={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},tz=class{constructor(e,i,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=i,this.expansionCount=0,this.feed(e),this.macros=new ez(OLe,i.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new y6(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var i,r,n;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;i=this.popToken(),{tokens:n,end:r}=this.consumeArg(["]"])}else({tokens:n,start:i,end:r}=this.consumeArg());return this.pushToken(new pa("EOF",r.loc)),this.pushTokens(n),i.range(r,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var i=[],r=e&&e.length>0;r||this.consumeSpaces();var n=this.future(),s,o=0,a=0;do{if(s=this.popToken(),i.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new Ee("Extra }",s)}else if(s.text==="EOF")throw new Ee("Unexpected end of input in a macro argument, expected '"+(e&&r?e[a]:"}")+"'",s);if(e&&r)if((o===0||o===1&&e[a]==="{")&&s.text===e[a]){if(++a,a===e.length){i.splice(-a,a);break}}else a=0}while(o!==0||r);return n.text==="{"&&i[i.length-1].text==="}"&&(i.pop(),i.shift()),i.reverse(),{tokens:i,start:n,end:s}}consumeArgs(e,i){if(i){if(i.length!==e+1)throw new Ee("The length of delimiters doesn't match the number of args!");for(var r=i[0],n=0;n<r.length;n++){var s=this.popToken();if(r[n]!==s.text)throw new Ee("Use of the macro doesn't match its definition",s)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(i&&i[a+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new Ee("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var i=this.popToken(),r=i.text,n=i.noexpand?null:this._getExpansion(r);if(n==null||e&&n.unexpandable){if(e&&n==null&&r[0]==="\\"&&!this.isDefined(r))throw new Ee("Undefined control sequence: "+r);return this.pushToken(i),!1}this.countExpansion(1);var s=n.tokens,o=this.consumeArgs(n.numArgs,n.delimiters);if(n.numArgs){s=s.slice();for(var a=s.length-1;a>=0;--a){var l=s[a];if(l.text==="#"){if(a===0)throw new Ee("Incomplete placeholder at end of macro body",l);if(l=s[--a],l.text==="#")s.splice(a+1,1);else if(/^[1-9]$/.test(l.text))s.splice(a,2,...o[+l.text-1]);else throw new Ee("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new pa(e)]):void 0}expandTokens(e){var i=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var n=this.stack.pop();n.treatAsRelax&&(n.noexpand=!1,n.treatAsRelax=!1),i.push(n)}return this.countExpansion(i.length),i}expandMacroAsText(e){var i=this.expandMacro(e);return i&&i.map(r=>r.text).join("")}_getExpansion(e){var i=this.macros.get(e);if(i==null)return i;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var n=typeof i=="function"?i(this):i;if(typeof n=="string"){var s=0;if(n.indexOf("#")!==-1)for(var o=n.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var a=new y6(n,this.settings),l=[],u=a.lex();u.text!=="EOF";)l.push(u),u=a.lex();l.reverse();var c={tokens:l,numArgs:s};return c}return n}isDefined(e){return this.macros.has(e)||Rd.hasOwnProperty(e)||mi.math.hasOwnProperty(e)||mi.text.hasOwnProperty(e)||tse.hasOwnProperty(e)}isExpandable(e){var i=this.macros.get(e);return i!=null?typeof i=="string"||typeof i=="function"||!i.unexpandable:Rd.hasOwnProperty(e)&&!Rd[e].primitive}},ane=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,c6=Object.freeze({"\u208A":"+","\u208B":"-","\u208C":"=","\u208D":"(","\u208E":")","\u2080":"0","\u2081":"1","\u2082":"2","\u2083":"3","\u2084":"4","\u2085":"5","\u2086":"6","\u2087":"7","\u2088":"8","\u2089":"9","\u2090":"a","\u2091":"e","\u2095":"h","\u1D62":"i","\u2C7C":"j","\u2096":"k","\u2097":"l","\u2098":"m","\u2099":"n","\u2092":"o","\u209A":"p","\u1D63":"r","\u209B":"s","\u209C":"t","\u1D64":"u","\u1D65":"v","\u2093":"x","\u1D66":"\u03B2","\u1D67":"\u03B3","\u1D68":"\u03C1","\u1D69":"\u03D5","\u1D6A":"\u03C7","\u207A":"+","\u207B":"-","\u207C":"=","\u207D":"(","\u207E":")","\u2070":"0","\xB9":"1","\xB2":"2","\xB3":"3","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u1D2C":"A","\u1D2E":"B","\u1D30":"D","\u1D31":"E","\u1D33":"G","\u1D34":"H","\u1D35":"I","\u1D36":"J","\u1D37":"K","\u1D38":"L","\u1D39":"M","\u1D3A":"N","\u1D3C":"O","\u1D3E":"P","\u1D3F":"R","\u1D40":"T","\u1D41":"U","\u2C7D":"V","\u1D42":"W","\u1D43":"a","\u1D47":"b","\u1D9C":"c","\u1D48":"d","\u1D49":"e","\u1DA0":"f","\u1D4D":"g",\u02B0:"h","\u2071":"i",\u02B2:"j","\u1D4F":"k",\u02E1:"l","\u1D50":"m",\u207F:"n","\u1D52":"o","\u1D56":"p",\u02B3:"r",\u02E2:"s","\u1D57":"t","\u1D58":"u","\u1D5B":"v",\u02B7:"w",\u02E3:"x",\u02B8:"y","\u1DBB":"z","\u1D5D":"\u03B2","\u1D5E":"\u03B3","\u1D5F":"\u03B4","\u1D60":"\u03D5","\u1D61":"\u03C7","\u1DBF":"\u03B8"}),WP={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030C":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030A":{text:"\\r",math:"\\mathring"},"\u030B":{text:"\\H"},"\u0327":{text:"\\c"}},lne={\u00E1:"a\u0301",\u00E0:"a\u0300",\u00E4:"a\u0308",\u01DF:"a\u0308\u0304",\u00E3:"a\u0303",\u0101:"a\u0304",\u0103:"a\u0306",\u1EAF:"a\u0306\u0301",\u1EB1:"a\u0306\u0300",\u1EB5:"a\u0306\u0303",\u01CE:"a\u030C",\u00E2:"a\u0302",\u1EA5:"a\u0302\u0301",\u1EA7:"a\u0302\u0300",\u1EAB:"a\u0302\u0303",\u0227:"a\u0307",\u01E1:"a\u0307\u0304",\u00E5:"a\u030A",\u01FB:"a\u030A\u0301",\u1E03:"b\u0307",\u0107:"c\u0301",\u1E09:"c\u0327\u0301",\u010D:"c\u030C",\u0109:"c\u0302",\u010B:"c\u0307",\u00E7:"c\u0327",\u010F:"d\u030C",\u1E0B:"d\u0307",\u1E11:"d\u0327",\u00E9:"e\u0301",\u00E8:"e\u0300",\u00EB:"e\u0308",\u1EBD:"e\u0303",\u0113:"e\u0304",\u1E17:"e\u0304\u0301",\u1E15:"e\u0304\u0300",\u0115:"e\u0306",\u1E1D:"e\u0327\u0306",\u011B:"e\u030C",\u00EA:"e\u0302",\u1EBF:"e\u0302\u0301",\u1EC1:"e\u0302\u0300",\u1EC5:"e\u0302\u0303",\u0117:"e\u0307",\u0229:"e\u0327",\u1E1F:"f\u0307",\u01F5:"g\u0301",\u1E21:"g\u0304",\u011F:"g\u0306",\u01E7:"g\u030C",\u011D:"g\u0302",\u0121:"g\u0307",\u0123:"g\u0327",\u1E27:"h\u0308",\u021F:"h\u030C",\u0125:"h\u0302",\u1E23:"h\u0307",\u1E29:"h\u0327",\u00ED:"i\u0301",\u00EC:"i\u0300",\u00EF:"i\u0308",\u1E2F:"i\u0308\u0301",\u0129:"i\u0303",\u012B:"i\u0304",\u012D:"i\u0306",\u01D0:"i\u030C",\u00EE:"i\u0302",\u01F0:"j\u030C",\u0135:"j\u0302",\u1E31:"k\u0301",\u01E9:"k\u030C",\u0137:"k\u0327",\u013A:"l\u0301",\u013E:"l\u030C",\u013C:"l\u0327",\u1E3F:"m\u0301",\u1E41:"m\u0307",\u0144:"n\u0301",\u01F9:"n\u0300",\u00F1:"n\u0303",\u0148:"n\u030C",\u1E45:"n\u0307",\u0146:"n\u0327",\u00F3:"o\u0301",\u00F2:"o\u0300",\u00F6:"o\u0308",\u022B:"o\u0308\u0304",\u00F5:"o\u0303",\u1E4D:"o\u0303\u0301",\u1E4F:"o\u0303\u0308",\u022D:"o\u0303\u0304",\u014D:"o\u0304",\u1E53:"o\u0304\u0301",\u1E51:"o\u0304\u0300",\u014F:"o\u0306",\u01D2:"o\u030C",\u00F4:"o\u0302",\u1ED1:"o\u0302\u0301",\u1ED3:"o\u0302\u0300",\u1ED7:"o\u0302\u0303",\u022F:"o\u0307",\u0231:"o\u0307\u0304",\u0151:"o\u030B",\u1E55:"p\u0301",\u1E57:"p\u0307",\u0155:"r\u0301",\u0159:"r\u030C",\u1E59:"r\u0307",\u0157:"r\u0327",\u015B:"s\u0301",\u1E65:"s\u0301\u0307",\u0161:"s\u030C",\u1E67:"s\u030C\u0307",\u015D:"s\u0302",\u1E61:"s\u0307",\u015F:"s\u0327",\u1E97:"t\u0308",\u0165:"t\u030C",\u1E6B:"t\u0307",\u0163:"t\u0327",\u00FA:"u\u0301",\u00F9:"u\u0300",\u00FC:"u\u0308",\u01D8:"u\u0308\u0301",\u01DC:"u\u0308\u0300",\u01D6:"u\u0308\u0304",\u01DA:"u\u0308\u030C",\u0169:"u\u0303",\u1E79:"u\u0303\u0301",\u016B:"u\u0304",\u1E7B:"u\u0304\u0308",\u016D:"u\u0306",\u01D4:"u\u030C",\u00FB:"u\u0302",\u016F:"u\u030A",\u0171:"u\u030B",\u1E7D:"v\u0303",\u1E83:"w\u0301",\u1E81:"w\u0300",\u1E85:"w\u0308",\u0175:"w\u0302",\u1E87:"w\u0307",\u1E98:"w\u030A",\u1E8D:"x\u0308",\u1E8B:"x\u0307",\u00FD:"y\u0301",\u1EF3:"y\u0300",\u00FF:"y\u0308",\u1EF9:"y\u0303",\u0233:"y\u0304",\u0177:"y\u0302",\u1E8F:"y\u0307",\u1E99:"y\u030A",\u017A:"z\u0301",\u017E:"z\u030C",\u1E91:"z\u0302",\u017C:"z\u0307",\u00C1:"A\u0301",\u00C0:"A\u0300",\u00C4:"A\u0308",\u01DE:"A\u0308\u0304",\u00C3:"A\u0303",\u0100:"A\u0304",\u0102:"A\u0306",\u1EAE:"A\u0306\u0301",\u1EB0:"A\u0306\u0300",\u1EB4:"A\u0306\u0303",\u01CD:"A\u030C",\u00C2:"A\u0302",\u1EA4:"A\u0302\u0301",\u1EA6:"A\u0302\u0300",\u1EAA:"A\u0302\u0303",\u0226:"A\u0307",\u01E0:"A\u0307\u0304",\u00C5:"A\u030A",\u01FA:"A\u030A\u0301",\u1E02:"B\u0307",\u0106:"C\u0301",\u1E08:"C\u0327\u0301",\u010C:"C\u030C",\u0108:"C\u0302",\u010A:"C\u0307",\u00C7:"C\u0327",\u010E:"D\u030C",\u1E0A:"D\u0307",\u1E10:"D\u0327",\u00C9:"E\u0301",\u00C8:"E\u0300",\u00CB:"E\u0308",\u1EBC:"E\u0303",\u0112:"E\u0304",\u1E16:"E\u0304\u0301",\u1E14:"E\u0304\u0300",\u0114:"E\u0306",\u1E1C:"E\u0327\u0306",\u011A:"E\u030C",\u00CA:"E\u0302",\u1EBE:"E\u0302\u0301",\u1EC0:"E\u0302\u0300",\u1EC4:"E\u0302\u0303",\u0116:"E\u0307",\u0228:"E\u0327",\u1E1E:"F\u0307",\u01F4:"G\u0301",\u1E20:"G\u0304",\u011E:"G\u0306",\u01E6:"G\u030C",\u011C:"G\u0302",\u0120:"G\u0307",\u0122:"G\u0327",\u1E26:"H\u0308",\u021E:"H\u030C",\u0124:"H\u0302",\u1E22:"H\u0307",\u1E28:"H\u0327",\u00CD:"I\u0301",\u00CC:"I\u0300",\u00CF:"I\u0308",\u1E2E:"I\u0308\u0301",\u0128:"I\u0303",\u012A:"I\u0304",\u012C:"I\u0306",\u01CF:"I\u030C",\u00CE:"I\u0302",\u0130:"I\u0307",\u0134:"J\u0302",\u1E30:"K\u0301",\u01E8:"K\u030C",\u0136:"K\u0327",\u0139:"L\u0301",\u013D:"L\u030C",\u013B:"L\u0327",\u1E3E:"M\u0301",\u1E40:"M\u0307",\u0143:"N\u0301",\u01F8:"N\u0300",\u00D1:"N\u0303",\u0147:"N\u030C",\u1E44:"N\u0307",\u0145:"N\u0327",\u00D3:"O\u0301",\u00D2:"O\u0300",\u00D6:"O\u0308",\u022A:"O\u0308\u0304",\u00D5:"O\u0303",\u1E4C:"O\u0303\u0301",\u1E4E:"O\u0303\u0308",\u022C:"O\u0303\u0304",\u014C:"O\u0304",\u1E52:"O\u0304\u0301",\u1E50:"O\u0304\u0300",\u014E:"O\u0306",\u01D1:"O\u030C",\u00D4:"O\u0302",\u1ED0:"O\u0302\u0301",\u1ED2:"O\u0302\u0300",\u1ED6:"O\u0302\u0303",\u022E:"O\u0307",\u0230:"O\u0307\u0304",\u0150:"O\u030B",\u1E54:"P\u0301",\u1E56:"P\u0307",\u0154:"R\u0301",\u0158:"R\u030C",\u1E58:"R\u0307",\u0156:"R\u0327",\u015A:"S\u0301",\u1E64:"S\u0301\u0307",\u0160:"S\u030C",\u1E66:"S\u030C\u0307",\u015C:"S\u0302",\u1E60:"S\u0307",\u015E:"S\u0327",\u0164:"T\u030C",\u1E6A:"T\u0307",\u0162:"T\u0327",\u00DA:"U\u0301",\u00D9:"U\u0300",\u00DC:"U\u0308",\u01D7:"U\u0308\u0301",\u01DB:"U\u0308\u0300",\u01D5:"U\u0308\u0304",\u01D9:"U\u0308\u030C",\u0168:"U\u0303",\u1E78:"U\u0303\u0301",\u016A:"U\u0304",\u1E7A:"U\u0304\u0308",\u016C:"U\u0306",\u01D3:"U\u030C",\u00DB:"U\u0302",\u016E:"U\u030A",\u0170:"U\u030B",\u1E7C:"V\u0303",\u1E82:"W\u0301",\u1E80:"W\u0300",\u1E84:"W\u0308",\u0174:"W\u0302",\u1E86:"W\u0307",\u1E8C:"X\u0308",\u1E8A:"X\u0307",\u00DD:"Y\u0301",\u1EF2:"Y\u0300",\u0178:"Y\u0308",\u1EF8:"Y\u0303",\u0232:"Y\u0304",\u0176:"Y\u0302",\u1E8E:"Y\u0307",\u0179:"Z\u0301",\u017D:"Z\u030C",\u1E90:"Z\u0302",\u017B:"Z\u0307",\u03AC:"\u03B1\u0301",\u1F70:"\u03B1\u0300",\u1FB1:"\u03B1\u0304",\u1FB0:"\u03B1\u0306",\u03AD:"\u03B5\u0301",\u1F72:"\u03B5\u0300",\u03AE:"\u03B7\u0301",\u1F74:"\u03B7\u0300",\u03AF:"\u03B9\u0301",\u1F76:"\u03B9\u0300",\u03CA:"\u03B9\u0308",\u0390:"\u03B9\u0308\u0301",\u1FD2:"\u03B9\u0308\u0300",\u1FD1:"\u03B9\u0304",\u1FD0:"\u03B9\u0306",\u03CC:"\u03BF\u0301",\u1F78:"\u03BF\u0300",\u03CD:"\u03C5\u0301",\u1F7A:"\u03C5\u0300",\u03CB:"\u03C5\u0308",\u03B0:"\u03C5\u0308\u0301",\u1FE2:"\u03C5\u0308\u0300",\u1FE1:"\u03C5\u0304",\u1FE0:"\u03C5\u0306",\u03CE:"\u03C9\u0301",\u1F7C:"\u03C9\u0300",\u038E:"\u03A5\u0301",\u1FEA:"\u03A5\u0300",\u03AB:"\u03A5\u0308",\u1FE9:"\u03A5\u0304",\u1FE8:"\u03A5\u0306",\u038F:"\u03A9\u0301",\u1FFA:"\u03A9\u0300"},x6=class t{constructor(e,i){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new tz(e,i,this.mode),this.settings=i,this.leftrightDepth=0}expect(e,i){if(i===void 0&&(i=!0),this.fetch().text!==e)throw new Ee("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());i&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var i=this.nextToken;this.consume(),this.gullet.pushToken(new pa("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=i,r}parseExpression(e,i){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var n=this.fetch();if(t.endOfExpression.indexOf(n.text)!==-1||i&&n.text===i||e&&Rd[n.text]&&Rd[n.text].infix)break;var s=this.parseAtom(i);if(s){if(s.type==="internal")continue}else break;r.push(s)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var i=-1,r,n=0;n<e.length;n++)if(e[n].type==="infix"){if(i!==-1)throw new Ee("only one infix operator per group",e[n].token);i=n,r=e[n].replaceWith}if(i!==-1&&r){var s,o,a=e.slice(0,i),l=e.slice(i+1);a.length===1&&a[0].type==="ordgroup"?s=a[0]:s={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l};var u;return r==="\\\\abovefrac"?u=this.callFunction(r,[s,e[i],o],[]):u=this.callFunction(r,[s,o],[]),[u]}else return e}handleSupSubscript(e){var i=this.fetch(),r=i.text;this.consume(),this.consumeSpaces();var n;do{var s;n=this.parseGroup(e)}while(((s=n)==null?void 0:s.type)==="internal");if(!n)throw new Ee("Expected group after '"+r+"'",i);return n}formatUnsupportedCmd(e){for(var i=[],r=0;r<e.length;r++)i.push({type:"textord",mode:"text",text:e[r]});var n={type:"text",mode:this.mode,body:i},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]};return s}parseAtom(e){var i=this.parseGroup("atom",e);if(i?.type==="internal"||this.mode==="text")return i;for(var r,n;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(i&&i.type==="op"){var o=s.text==="\\limits";i.limits=o,i.alwaysHandleSupSub=!0}else if(i&&i.type==="operatorname")i.alwaysHandleSupSub&&(i.limits=s.text==="\\limits");else throw new Ee("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(r)throw new Ee("Double superscript",s);r=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(n)throw new Ee("Double subscript",s);n=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(r)throw new Ee("Double superscript",s);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:l}}else if(c6[s.text]){var u=ane.test(s.text),c=[];for(c.push(new pa(c6[s.text])),this.consume();;){var h=this.fetch().text;if(!c6[h]||ane.test(h)!==u)break;c.unshift(new pa(c6[h])),this.consume()}var d=this.subparse(c);u?n={type:"ordgroup",mode:"math",body:d}:r={type:"ordgroup",mode:"math",body:d}}else break}return r||n?{type:"supsub",mode:this.mode,base:i,sup:r,sub:n}:i}parseFunction(e,i){var r=this.fetch(),n=r.text,s=Rd[n];if(!s)return null;if(this.consume(),i&&i!=="atom"&&!s.allowedInArgument)throw new Ee("Got function '"+n+"' with no arguments"+(i?" as "+i:""),r);if(this.mode==="text"&&!s.allowedInText)throw new Ee("Can't use function '"+n+"' in text mode",r);if(this.mode==="math"&&s.allowedInMath===!1)throw new Ee("Can't use function '"+n+"' in math mode",r);var{args:o,optArgs:a}=this.parseArguments(n,s);return this.callFunction(n,o,a,r,e)}callFunction(e,i,r,n,s){var o={funcName:e,parser:this,token:n,breakOnTokenText:s},a=Rd[e];if(a&&a.handler)return a.handler(o,i,r);throw new Ee("No function handler for "+e)}parseArguments(e,i){var r=i.numArgs+i.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var n=[],s=[],o=0;o<r;o++){var a=i.argTypes&&i.argTypes[o],l=o<i.numOptionalArgs;(i.primitive&&a==null||i.type==="sqrt"&&o===1&&s[0]==null)&&(a="primitive");var u=this.parseGroupOfType("argument to '"+e+"'",a,l);if(l)s.push(u);else if(u!=null)n.push(u);else throw new Ee("Null argument, please report this as a bug")}return{args:n,optArgs:s}}parseGroupOfType(e,i,r){switch(i){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,i);case"hbox":{var n=this.parseArgumentGroup(r,"text");return n!=null?{type:"styling",mode:n.mode,body:[n],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",r);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(r)throw new Ee("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new Ee("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new Ee("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,i){var r=this.gullet.scanArgument(i);if(r==null)return null;for(var n="",s;(s=this.fetch()).text!=="EOF";)n+=s.text,this.consume();return this.consume(),r.text=n,r}parseRegexGroup(e,i){for(var r=this.fetch(),n=r,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)n=o,s+=n.text,this.consume();if(s==="")throw new Ee("Invalid "+i+": '"+r.text+"'",r);return r.range(n,s)}parseColorGroup(e){var i=this.parseStringGroup("color",e);if(i==null)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(i.text);if(!r)throw new Ee("Invalid color: '"+i.text+"'",i);var n=r[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}}parseSizeGroup(e){var i,r=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?i=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):i=this.parseStringGroup("size",e),!i)return null;!e&&i.text.length===0&&(i.text="0pt",r=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(i.text);if(!n)throw new Ee("Invalid size: '"+i.text+"'",i);var s={number:+(n[1]+n[2]),unit:n[3]};if(!hne(s))throw new Ee("Invalid unit: '"+s.unit+"'",i);return{type:"size",mode:this.mode,value:s,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var i=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),i==null)return null;var r=i.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,i){var r=this.gullet.scanArgument(e);if(r==null)return null;var n=this.mode;i&&this.switchMode(i),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return i&&this.switchMode(n),o}parseGroup(e,i){var r=this.fetch(),n=r.text,s;if(n==="{"||n==="\\begingroup"){this.consume();var o=n==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),l=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:Eo.range(r,l),body:a,semisimple:n==="\\begingroup"||void 0}}else if(s=this.parseFunction(i,e)||this.parseSymbol(),s==null&&n[0]==="\\"&&!tse.hasOwnProperty(n)){if(this.settings.throwOnError)throw new Ee("Undefined control sequence: "+n,r);s=this.formatUnsupportedCmd(n),this.consume()}return s}formLigatures(e){for(var i=e.length-1,r=0;r<i;++r){var n=e[r],s=n.text;s==="-"&&e[r+1].text==="-"&&(r+1<i&&e[r+2].text==="-"?(e.splice(r,3,{type:"textord",mode:"text",loc:Eo.range(n,e[r+2]),text:"---"}),i-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:Eo.range(n,e[r+1]),text:"--"}),i-=1)),(s==="'"||s==="`")&&e[r+1].text===s&&(e.splice(r,2,{type:"textord",mode:"text",loc:Eo.range(n,e[r+1]),text:s+s}),i-=1)}}parseSymbol(){var e=this.fetch(),i=e.text;if(/^\\verb[^a-zA-Z]/.test(i)){this.consume();var r=i.slice(5),n=r.charAt(0)==="*";if(n&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new Ee(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:n}}lne.hasOwnProperty(i[0])&&!mi[this.mode][i[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+i[0]+'" used in math mode',e),i=lne[i[0]]+i.slice(1));var s=FLe.exec(i);s&&(i=i.substring(0,s.index),i==="i"?i="\u0131":i==="j"&&(i="\u0237"));var o;if(mi[this.mode][i]){this.settings.strict&&this.mode==="math"&&GP.indexOf(i)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+i[0]+'" used in math mode',e);var a=mi[this.mode][i].group,l=Eo.range(e),u;if(EFe.hasOwnProperty(a)){var c=a;u={type:"atom",mode:this.mode,family:c,loc:l,text:i}}else u={type:a,mode:this.mode,loc:l,text:i};o=u}else if(i.charCodeAt(0)>=128)this.settings.strict&&(cne(i.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+i[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+i[0]+'"'+(" ("+i.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:Eo.range(e),text:i};else return null;if(this.consume(),s)for(var h=0;h<s[0].length;h++){var d=s[0][h];if(!WP[d])throw new Ee("Unknown accent ' "+d+"'",e);var p=WP[d][this.mode]||WP[d].text;if(!p)throw new Ee("Accent "+d+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:Eo.range(e),label:p,isStretchy:!1,isShifty:!0,base:o}}return o}};x6.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var vz=function(e,i){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new x6(e,i);delete r.gullet.macros.current["\\df@tag"];var n=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!i.displayMode)throw new Ee("\\tag works only in display equations");n=[{type:"tag",mode:"text",body:n,tag:r.subparse([new pa("\\df@tag")])}]}return n},ise=function(e,i,r){i.textContent="";var n=yz(e,r).toNode();i.appendChild(n)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),ise=function(){throw new Ee("KaTeX doesn't work in quirks mode.")});var PLe=function(e,i){var r=yz(e,i).toMarkup();return r},zLe=function(e,i){var r=new Cw(i);return vz(e,r)},rse=function(e,i,r){if(r.throwOnError||!(e instanceof Ee))throw e;var n=J.makeSpan(["katex-error"],[new Zs(i)]);return n.setAttribute("title",e.toString()),n.setAttribute("style","color:"+r.errorColor),n},yz=function(e,i){var r=new Cw(i);try{var n=vz(e,r);return GFe(n,e,r)}catch(s){return rse(s,e,r)}},ILe=function(e,i){var r=new Cw(i);try{var n=vz(e,r);return XFe(n,e,r)}catch(s){return rse(s,e,r)}},BLe="0.16.22",NLe={Span:jp,Anchor:Ew,SymbolNode:Zs,SvgNode:fl,PathNode:pu,LineNode:kw},nse={version:BLe,render:ise,renderToString:PLe,ParseError:Ee,SETTINGS_SCHEMA:h6,__parse:zLe,__renderToDomTree:yz,__renderToHTMLTree:ILe,__setFontMetrics:vFe,__defineSymbol:S,__defineFunction:Oe,__defineMacro:O,__domTree:NLe};var $Le=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1(?=[\s?!\.,:？！。，：]|$)/,HLe=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1/,ULe=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function ose(t={}){return{extensions:[WLe(t,sse(t,!1)),VLe(t,sse(t,!0))]}}function sse(t,e){return i=>nse.renderToString(i.text,{...t,displayMode:i.displayMode})+(e?`
`:"")}function WLe(t,e){let i=t&&t.nonStandard,r=i?HLe:$Le;return{name:"inlineKatex",level:"inline",start(n){let s,o=n;for(;o;){if(s=o.indexOf("$"),s===-1)return;if((i?s>-1:s===0||o.charAt(s-1)===" ")&&o.substring(s).match(r))return s;o=o.substring(s+1).replace(/^\$+/,"")}},tokenizer(n,s){let o=n.match(r);if(o)return{type:"inlineKatex",raw:o[0],text:o[2].trim(),displayMode:o[1].length===2}},renderer:e}}function VLe(t,e){return{name:"blockKatex",level:"block",tokenizer(i,r){let n=i.match(ULe);if(n)return{type:"blockKatex",raw:n[0],text:n[2].trim(),displayMode:n[1].length===2}},renderer:e}}var jLe={throwOnError:!1,output:"mathml",strict:"warn"},qLe={...jLe,nonStandard:!1};jt.use(ose(qLe));var A6=class extends Su(ui){render(){let i=this.querySelector('script[type="text/markdown"]')?.textContent;return X`${wd(jt.parse(i))}`}};A6=Ct([xn("tbx-markdown")],A6);var vu=class extends ui{constructor(){super(...arguments);this.timezone="UTC";this.now=new Date}connectedCallback(){super.connectedCallback(),this.startTicking()}disconnectedCallback(){super.disconnectedCallback(),this.stopTicking()}startTicking(){this.stopTicking(),this.now=new Date,this.intervalId=window.setInterval(()=>{this.now=new Date},1e3)}stopTicking(){this.intervalId!==void 0&&(window.clearInterval(this.intervalId),this.intervalId=void 0)}static composeDateString(i){let r=l=>i.find(c=>c.type===l)?.value??"",n=r("weekday"),s=r("month"),o=r("day"),a=r("year");return`${n}, ${s} ${o} ${a}`}resolveTimeZone(){let i=(this.timezone??"").trim(),r=i===""?"UTC":i;return{zone:r,label:r}}formatTime(i){let{zone:r,label:n}=this.resolveTimeZone();try{let s=new Intl.DateTimeFormat("en-US",{timeZone:r,weekday:"long",month:"long",day:"numeric",year:"numeric"}),o=new Intl.DateTimeFormat("en-US",{timeZone:r,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),a=vu.composeDateString(s.formatToParts(i)),l=o.format(i);return`${a} ${l} (${n})`}catch{let o=new Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),a=new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),l=vu.composeDateString(o.formatToParts(i)),u=a.format(i);return`${l} ${u} (${n})`}}render(){return X`<span>${this.formatTime(this.now)}</span>`}};vu.styles=ze`
    :host {
      display: block;
      font-variant-numeric: tabular-nums;
    }

    span {
      display: block;
    }
  `,Ct([U({type:String})],vu.prototype,"timezone",2),Ct([Ie()],vu.prototype,"now",2),vu=Ct([xn("tbx-clock")],vu);function GLe(t){if(t==null||t.trim()==="")return"/";let e=t.trim();return e.startsWith("/")||(e=`/${e}`),e.length>1&&e.endsWith("/")&&(e=e.replace(/\/+/g,"/"),e=e.replace(/\/+$/,""),e===""&&(e="/")),e}function XLe(t){return t==null?"":t.trim()}function YLe(t){return t==null?"":t.trim()}var Ld=class extends ui{constructor(){super(...arguments);this.title="";this.route="/";this.icon=""}willUpdate(i){if(i.has("route")){let r=GLe(this.route);r!==this.route&&(this.route=r)}if(i.has("title")){let r=XLe(this.title);r!==this.title&&(this.title=r)}if(i.has("icon")){let r=YLe(this.icon);r!==this.icon&&(this.icon=r)}}render(){return X`<slot></slot>`}};Ld.styles=ze`
    :host {
      display: block;
      width: 100%;
    }

    :host([hidden]) {
      display: none !important;
    }

    :host([inert]) {
      pointer-events: none;
    }

    ::slotted(*) {
      max-width: 100%;
      box-sizing: border-box;
    }

    ::slotted(tbx-chart),
    ::slotted(tbx-grid),
    ::slotted(tbx-clock),
    ::slotted(tbx-form),
    ::slotted(tbx-markdown),
    ::slotted(tbx-console) {
      display: block;
      width: 100%;
      max-width: 100%;
    }

    ::slotted(pre),
    ::slotted(code),
    ::slotted(table),
    ::slotted(tbx-console) {
      overflow-x: auto;
    }
  `,Ct([U({type:String,reflect:!0})],Ld.prototype,"title",2),Ct([U({type:String,reflect:!0})],Ld.prototype,"route",2),Ct([U({type:String,reflect:!0})],Ld.prototype,"icon",2),Ld=Ct([xn("tbx-page")],Ld);var ase=(t,e,i)=>{let r=new Map;for(let n=e;n<=i;n++)r.set(t[n],n);return r},lse=Yn(class extends Cs{constructor(t){if(super(t),t.type!==Jr.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let r;i===void 0?i=e:e!==void 0&&(r=e);let n=[],s=[],o=0;for(let a of t)n[o]=r?r(a,o):o,s[o]=i(a,o),o++;return{values:s,keys:n}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,r]){let n=dI(t),{values:s,keys:o}=this.dt(e,i,r);if(!Array.isArray(n))return this.ut=o,s;let a=this.ut??(this.ut=[]),l=[],u,c,h=0,d=n.length-1,p=0,f=s.length-1;for(;h<=d&&p<=f;)if(n[h]===null)h++;else if(n[d]===null)d--;else if(a[h]===o[p])l[p]=Qc(n[h],s[p]),h++,p++;else if(a[d]===o[f])l[f]=Qc(n[d],s[f]),d--,f--;else if(a[h]===o[f])l[f]=Qc(n[h],s[f]),Jp(t,l[f+1],n[h]),h++,f--;else if(a[d]===o[p])l[p]=Qc(n[d],s[p]),Jp(t,n[h],n[d]),d--,p++;else if(u===void 0&&(u=ase(o,p,f),c=ase(a,h,d)),u.has(a[h]))if(u.has(a[d])){let m=c.get(o[p]),g=m!==void 0?n[m]:null;if(g===null){let b=Jp(t,n[h]);Qc(b,s[p]),l[p]=b}else l[p]=Qc(g,s[p]),Jp(t,n[h],g),n[m]=null;p++}else Gw(n[d]),d--;else Gw(n[h]),h++;for(;p<=f;){let m=Jp(t,l[f+1]);Qc(m,s[p]),l[p++]=m}for(;h<=d;){let m=n[h++];m!==null&&Gw(m)}return this.ut=o,qw(t,l),nr}});Gn.define("sl-icon-button");var use=ze`
  :host {
    display: block;
    outline: 0;
    z-index: 0;
  }

  :host(:focus) {
    outline: none;
  }

  slot:not([name])::slotted(sl-icon) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .tree-item {
    position: relative;
    display: flex;
    align-items: stretch;
    flex-direction: column;
    color: var(--sl-color-neutral-700);
    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;
  }

  .tree-item__checkbox {
    pointer-events: none;
  }

  .tree-item__expand-button,
  .tree-item__checkbox,
  .tree-item__label {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-dense);
    letter-spacing: var(--sl-letter-spacing-normal);
  }

  .tree-item__checkbox::part(base) {
    display: flex;
    align-items: center;
  }

  .tree-item__indentation {
    display: block;
    width: 1em;
    flex-shrink: 0;
  }

  .tree-item__expand-button {
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: content-box;
    color: var(--sl-color-neutral-500);
    padding: var(--sl-spacing-x-small);
    width: 1rem;
    height: 1rem;
    flex-shrink: 0;
    cursor: pointer;
  }

  .tree-item__expand-button {
    transition: var(--sl-transition-medium) rotate ease;
  }

  .tree-item--expanded .tree-item__expand-button {
    rotate: 90deg;
  }

  .tree-item--expanded.tree-item--rtl .tree-item__expand-button {
    rotate: -90deg;
  }

  .tree-item--expanded slot[name='expand-icon'],
  .tree-item:not(.tree-item--expanded) slot[name='collapse-icon'] {
    display: none;
  }

  .tree-item:not(.tree-item--has-expand-button) .tree-item__expand-icon-slot {
    display: none;
  }

  .tree-item__expand-button--visible {
    cursor: pointer;
  }

  .tree-item__item {
    display: flex;
    align-items: center;
    border-inline-start: solid 3px transparent;
  }

  .tree-item--disabled .tree-item__item {
    opacity: 0.5;
    outline: none;
    cursor: not-allowed;
  }

  :host(:focus-visible) .tree-item__item {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
    z-index: 2;
  }

  :host(:not([aria-disabled='true'])) .tree-item--selected .tree-item__item {
    background-color: var(--sl-color-neutral-100);
    border-inline-start-color: var(--sl-color-primary-600);
  }

  :host(:not([aria-disabled='true'])) .tree-item__expand-button {
    color: var(--sl-color-neutral-600);
  }

  .tree-item__label {
    display: flex;
    align-items: center;
    transition: var(--sl-transition-fast) color;
  }

  .tree-item__children {
    display: block;
    font-size: calc(1em + var(--indent-size, var(--sl-spacing-medium)));
  }

  /* Indentation lines */
  .tree-item__children {
    position: relative;
  }

  .tree-item__children::before {
    content: '';
    position: absolute;
    top: var(--indent-guide-offset);
    bottom: var(--indent-guide-offset);
    left: calc(1em - (var(--indent-guide-width) / 2) - 1px);
    border-inline-end: var(--indent-guide-width) var(--indent-guide-style) var(--indent-guide-color);
    z-index: 1;
  }

  .tree-item--rtl .tree-item__children::before {
    left: auto;
    right: 1em;
  }

  @media (forced-colors: active) {
    :host(:not([aria-disabled='true'])) .tree-item--selected .tree-item__item {
      outline: dashed 1px SelectedItem;
    }
  }
`;function xz(t,e,i){return t?e(t):i?.(t)}var Yi=class wz extends Xe{constructor(){super(...arguments),this.localize=new ei(this),this.indeterminate=!1,this.isLeaf=!1,this.loading=!1,this.selectable=!1,this.expanded=!1,this.selected=!1,this.disabled=!1,this.lazy=!1}static isTreeItem(e){return e instanceof Element&&e.getAttribute("role")==="treeitem"}connectedCallback(){super.connectedCallback(),this.setAttribute("role","treeitem"),this.setAttribute("tabindex","-1"),this.isNestedItem()&&(this.slot="children")}firstUpdated(){this.childrenContainer.hidden=!this.expanded,this.childrenContainer.style.height=this.expanded?"auto":"0",this.isLeaf=!this.lazy&&this.getChildrenItems().length===0,this.handleExpandedChange()}async animateCollapse(){this.emit("sl-collapse"),await Pc(this.childrenContainer);let{keyframes:e,options:i}=Lc(this,"tree-item.collapse",{dir:this.localize.dir()});await Oc(this.childrenContainer,bO(e,this.childrenContainer.scrollHeight),i),this.childrenContainer.hidden=!0,this.emit("sl-after-collapse")}isNestedItem(){let e=this.parentElement;return!!e&&wz.isTreeItem(e)}handleChildrenSlotChange(){this.loading=!1,this.isLeaf=!this.lazy&&this.getChildrenItems().length===0}willUpdate(e){e.has("selected")&&!e.has("indeterminate")&&(this.indeterminate=!1)}async animateExpand(){this.emit("sl-expand"),await Pc(this.childrenContainer),this.childrenContainer.hidden=!1;let{keyframes:e,options:i}=Lc(this,"tree-item.expand",{dir:this.localize.dir()});await Oc(this.childrenContainer,bO(e,this.childrenContainer.scrollHeight),i),this.childrenContainer.style.height="auto",this.emit("sl-after-expand")}handleLoadingChange(){this.setAttribute("aria-busy",this.loading?"true":"false"),this.loading||this.animateExpand()}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleSelectedChange(){this.setAttribute("aria-selected",this.selected?"true":"false")}handleExpandedChange(){this.isLeaf?this.removeAttribute("aria-expanded"):this.setAttribute("aria-expanded",this.expanded?"true":"false")}handleExpandAnimation(){this.expanded?this.lazy?(this.loading=!0,this.emit("sl-lazy-load")):this.animateExpand():this.animateCollapse()}handleLazyChange(){this.emit("sl-lazy-change")}getChildrenItems({includeDisabled:e=!0}={}){return this.childrenSlot?[...this.childrenSlot.assignedElements({flatten:!0})].filter(i=>wz.isTreeItem(i)&&(e||!i.disabled)):[]}render(){let e=this.localize.dir()==="rtl",i=!this.loading&&(!this.isLeaf||this.lazy);return X`
      <div
        part="base"
        class="${et({"tree-item":!0,"tree-item--expanded":this.expanded,"tree-item--selected":this.selected,"tree-item--disabled":this.disabled,"tree-item--leaf":this.isLeaf,"tree-item--has-expand-button":i,"tree-item--rtl":this.localize.dir()==="rtl"})}"
      >
        <div
          class="tree-item__item"
          part="
            item
            ${this.disabled?"item--disabled":""}
            ${this.expanded?"item--expanded":""}
            ${this.indeterminate?"item--indeterminate":""}
            ${this.selected?"item--selected":""}
          "
        >
          <div class="tree-item__indentation" part="indentation"></div>

          <div
            part="expand-button"
            class=${et({"tree-item__expand-button":!0,"tree-item__expand-button--visible":i})}
            aria-hidden="true"
          >
            ${xz(this.loading,()=>X` <sl-spinner part="spinner" exportparts="base:spinner__base"></sl-spinner> `)}
            <slot class="tree-item__expand-icon-slot" name="expand-icon">
              <sl-icon library="system" name=${e?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
            <slot class="tree-item__expand-icon-slot" name="collapse-icon">
              <sl-icon library="system" name=${e?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
          </div>

          ${xz(this.selectable,()=>X`
              <sl-checkbox
                part="checkbox"
                exportparts="
                    base:checkbox__base,
                    control:checkbox__control,
                    control--checked:checkbox__control--checked,
                    control--indeterminate:checkbox__control--indeterminate,
                    checked-icon:checkbox__checked-icon,
                    indeterminate-icon:checkbox__indeterminate-icon,
                    label:checkbox__label
                  "
                class="tree-item__checkbox"
                ?disabled="${this.disabled}"
                ?checked="${wo(this.selected)}"
                ?indeterminate="${this.indeterminate}"
                tabindex="-1"
              ></sl-checkbox>
            `)}

          <slot class="tree-item__label" part="label"></slot>
        </div>

        <div class="tree-item__children" part="children" role="group">
          <slot name="children" @slotchange="${this.handleChildrenSlotChange}"></slot>
        </div>
      </div>
    `}};Yi.styles=[tt,use];Yi.dependencies={"sl-checkbox":ir,"sl-icon":Bt,"sl-spinner":Jx};F([Ie()],Yi.prototype,"indeterminate",2);F([Ie()],Yi.prototype,"isLeaf",2);F([Ie()],Yi.prototype,"loading",2);F([Ie()],Yi.prototype,"selectable",2);F([U({type:Boolean,reflect:!0})],Yi.prototype,"expanded",2);F([U({type:Boolean,reflect:!0})],Yi.prototype,"selected",2);F([U({type:Boolean,reflect:!0})],Yi.prototype,"disabled",2);F([U({type:Boolean,reflect:!0})],Yi.prototype,"lazy",2);F([Ne("slot:not([name])")],Yi.prototype,"defaultSlot",2);F([Ne("slot[name=children]")],Yi.prototype,"childrenSlot",2);F([Ne(".tree-item__item")],Yi.prototype,"itemElement",2);F([Ne(".tree-item__children")],Yi.prototype,"childrenContainer",2);F([Ne(".tree-item__expand-button slot")],Yi.prototype,"expandButtonSlot",2);F([je("loading",{waitUntilFirstUpdate:!0})],Yi.prototype,"handleLoadingChange",1);F([je("disabled")],Yi.prototype,"handleDisabledChange",1);F([je("selected")],Yi.prototype,"handleSelectedChange",1);F([je("expanded",{waitUntilFirstUpdate:!0})],Yi.prototype,"handleExpandedChange",1);F([je("expanded",{waitUntilFirstUpdate:!0})],Yi.prototype,"handleExpandAnimation",1);F([je("lazy",{waitUntilFirstUpdate:!0})],Yi.prototype,"handleLazyChange",1);var Gp=Yi;Fc("tree-item.expand",{keyframes:[{height:"0",opacity:"0",overflow:"hidden"},{height:"auto",opacity:"1",overflow:"hidden"}],options:{duration:250,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)"}});Fc("tree-item.collapse",{keyframes:[{height:"auto",opacity:"1",overflow:"hidden"},{height:"0",opacity:"0",overflow:"hidden"}],options:{duration:200,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)"}});var cse=ze`
  :host {
    /*
     * These are actually used by tree item, but we define them here so they can more easily be set and all tree items
     * stay consistent.
     */
    --indent-guide-color: var(--sl-color-neutral-200);
    --indent-guide-offset: 0;
    --indent-guide-style: solid;
    --indent-guide-width: 0;
    --indent-size: var(--sl-spacing-large);

    display: block;

    /*
     * Tree item indentation uses the "em" unit to increment its width on each level, so setting the font size to zero
     * here removes the indentation for all the nodes on the first level.
     */
    font-size: 0;
  }
`;function hse(t,e=!1){function i(s){let o=s.getChildrenItems({includeDisabled:!1});if(o.length){let a=o.every(u=>u.selected),l=o.every(u=>!u.selected&&!u.indeterminate);s.selected=a,s.indeterminate=!a&&!l}}function r(s){let o=s.parentElement;Gp.isTreeItem(o)&&(i(o),r(o))}function n(s){for(let o of s.getChildrenItems())o.selected=e?s.selected||o.selected:!o.disabled&&s.selected,n(o);e&&i(s)}n(t),r(t)}var Od=class extends Xe{constructor(){super(),this.selection="single",this.clickTarget=null,this.localize=new ei(this),this.initTreeItem=t=>{t.selectable=this.selection==="multiple",["expand","collapse"].filter(e=>!!this.querySelector(`[slot="${e}-icon"]`)).forEach(e=>{let i=t.querySelector(`[slot="${e}-icon"]`),r=this.getExpandButtonIcon(e);r&&(i===null?t.append(r):i.hasAttribute("data-default")&&i.replaceWith(r))})},this.handleTreeChanged=t=>{for(let e of t){let i=[...e.addedNodes].filter(Gp.isTreeItem),r=[...e.removedNodes].filter(Gp.isTreeItem);i.forEach(this.initTreeItem),this.lastFocusedItem&&r.includes(this.lastFocusedItem)&&(this.lastFocusedItem=null)}},this.handleFocusOut=t=>{let e=t.relatedTarget;(!e||!this.contains(e))&&(this.tabIndex=0)},this.handleFocusIn=t=>{let e=t.target;t.target===this&&this.focusItem(this.lastFocusedItem||this.getAllTreeItems()[0]),Gp.isTreeItem(e)&&!e.disabled&&(this.lastFocusedItem&&(this.lastFocusedItem.tabIndex=-1),this.lastFocusedItem=e,this.tabIndex=-1,e.tabIndex=0)},this.addEventListener("focusin",this.handleFocusIn),this.addEventListener("focusout",this.handleFocusOut),this.addEventListener("sl-lazy-change",this.handleSlotChange)}async connectedCallback(){super.connectedCallback(),this.setAttribute("role","tree"),this.setAttribute("tabindex","0"),await this.updateComplete,this.mutationObserver=new MutationObserver(this.handleTreeChanged),this.mutationObserver.observe(this,{childList:!0,subtree:!0})}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this.mutationObserver)==null||t.disconnect()}getExpandButtonIcon(t){let i=(t==="expand"?this.expandedIconSlot:this.collapsedIconSlot).assignedElements({flatten:!0})[0];if(i){let r=i.cloneNode(!0);return[r,...r.querySelectorAll("[id]")].forEach(n=>n.removeAttribute("id")),r.setAttribute("data-default",""),r.slot=`${t}-icon`,r}return null}selectItem(t){let e=[...this.selectedItems];if(this.selection==="multiple")t.selected=!t.selected,t.lazy&&(t.expanded=!0),hse(t);else if(this.selection==="single"||t.isLeaf){let r=this.getAllTreeItems();for(let n of r)n.selected=n===t}else this.selection==="leaf"&&(t.expanded=!t.expanded);let i=this.selectedItems;(e.length!==i.length||i.some(r=>!e.includes(r)))&&Promise.all(i.map(r=>r.updateComplete)).then(()=>{this.emit("sl-selection-change",{detail:{selection:i}})})}getAllTreeItems(){return[...this.querySelectorAll("sl-tree-item")]}focusItem(t){t?.focus()}handleKeyDown(t){if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft","Home","End","Enter"," "].includes(t.key)||t.composedPath().some(n=>{var s;return["input","textarea"].includes((s=n?.tagName)==null?void 0:s.toLowerCase())}))return;let e=this.getFocusableItems(),i=this.localize.dir()==="ltr",r=this.localize.dir()==="rtl";if(e.length>0){t.preventDefault();let n=e.findIndex(l=>l.matches(":focus")),s=e[n],o=l=>{let u=e[vn(l,0,e.length-1)];this.focusItem(u)},a=l=>{s.expanded=l};t.key==="ArrowDown"?o(n+1):t.key==="ArrowUp"?o(n-1):i&&t.key==="ArrowRight"||r&&t.key==="ArrowLeft"?!s||s.disabled||s.expanded||s.isLeaf&&!s.lazy?o(n+1):a(!0):i&&t.key==="ArrowLeft"||r&&t.key==="ArrowRight"?!s||s.disabled||s.isLeaf||!s.expanded?o(n-1):a(!1):t.key==="Home"?o(0):t.key==="End"?o(e.length-1):(t.key==="Enter"||t.key===" ")&&(s.disabled||this.selectItem(s))}}handleClick(t){let e=t.target,i=e.closest("sl-tree-item"),r=t.composedPath().some(n=>{var s;return(s=n?.classList)==null?void 0:s.contains("tree-item__expand-button")});!i||i.disabled||e!==this.clickTarget||(r?i.expanded=!i.expanded:this.selectItem(i))}handleMouseDown(t){this.clickTarget=t.target}handleSlotChange(){this.getAllTreeItems().forEach(this.initTreeItem)}async handleSelectionChange(){let t=this.selection==="multiple",e=this.getAllTreeItems();this.setAttribute("aria-multiselectable",t?"true":"false");for(let i of e)i.selectable=t;t&&(await this.updateComplete,[...this.querySelectorAll(":scope > sl-tree-item")].forEach(i=>hse(i,!0)))}get selectedItems(){let t=this.getAllTreeItems(),e=i=>i.selected;return t.filter(e)}getFocusableItems(){let t=this.getAllTreeItems(),e=new Set;return t.filter(i=>{var r;if(i.disabled)return!1;let n=(r=i.parentElement)==null?void 0:r.closest("[role=treeitem]");return n&&(!n.expanded||n.loading||e.has(n))&&e.add(i),!e.has(i)})}render(){return X`
      <div
        part="base"
        class="tree"
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mousedown=${this.handleMouseDown}
      >
        <slot @slotchange=${this.handleSlotChange}></slot>
        <span hidden aria-hidden="true"><slot name="expand-icon"></slot></span>
        <span hidden aria-hidden="true"><slot name="collapse-icon"></slot></span>
      </div>
    `}};Od.styles=[tt,cse];F([Ne("slot:not([name])")],Od.prototype,"defaultSlot",2);F([Ne("slot[name=expand-icon]")],Od.prototype,"expandedIconSlot",2);F([Ne("slot[name=collapse-icon]")],Od.prototype,"collapsedIconSlot",2);F([U()],Od.prototype,"selection",2);F([je("selection")],Od.prototype,"handleSelectionChange",1);Od.define("sl-tree");Gp.define("sl-tree-item");var dse="tbx-router:panel-open",fse="tbx-router:selected-route",pse="(max-width: 768px)";function pl(){return typeof window<"u"&&typeof document<"u"}function T6(t){if(t==null||t.trim()==="")return"/";let e=t.trim();return e.startsWith("/")||(e=`/${e}`),e.length>1&&e.endsWith("/")&&(e=e.replace(/\/+/g,"/"),e=e.replace(/\/+$/,""),e===""&&(e="/")),e}function bse(t){return t==="/"?[]:t.replace(/^\//,"").split("/")}function KLe(t){let e=bse(t);return e.length<=1?null:`/${e.slice(0,-1).join("/")}`}function JLe(t){let e=bse(t);if(e.length===0)return[];let i=[];for(let r=1;r<e.length;r++)i.push(`/${e.slice(0,r).join("/")}`);return i}function mse(t){return t===""?"/":(t.startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.replace(/\/+/g,"/"),t=t.replace(/\/+$/,""),t===""&&(t="/")),t)}function _z(t){return t===""||t==="/"?"":t.replace(/\/+$/,"").replace(/\/+/g,"/")}function gse(t,e){let i=_z(t),r=T6(e);return r==="/"?i===""?"/":i:i===""?r:`${i}${r}`}function ZLe(t,e){let i=T6(e);if(i==="/")return t;if(!t.endsWith(i))return null;let r=t.length-i.length;if(r>0&&t[r-1]!=="/")return null;let n=t.slice(0,r);return n===""?"":n.replace(/\/+$/,"")}function QLe(t){let e=new Map;for(let r of t)e.set(r.route,{route:r.route,title:r.title,icon:r.icon,children:[]});let i=[];for(let r of t){let n=e.get(r.route);if(n==null)continue;let s=r.parentRoute;s!=null&&e.has(s)?e.get(s)?.children.push(n):i.push(n)}return i}function vse(t,e,i=[]){for(let r of t){let n=[...i,r];if(r.route===e)return n;if(r.children.length>0){let s=vse(r.children,e,n);if(s!=null)return s}}return null}var yu=class extends ui{constructor(){super(...arguments);this.title="ToolboxUI";this.panelOpen=!0;this.activeRoute=null;this.pages=[];this.storedPanelOpen=!0;this.skipNextPersist=!1;this.narrowQuery=null;this.narrowQueryListener=null;this.layoutObserver=null;this.layoutScrollHandler=null;this.isInitialised=!1;this.storedRoutePreference=null;this.basePath="";this.assetBasePath="";this.expandedRouteSet=new Set;this.handlePopState=()=>{this.syncRouteWithLocation(),this.updatePageVisibility()};this.handleTreeExpand=i=>{let r=i.target;if(r==null||r.tagName!=="SL-TREE-ITEM")return;let n=r.dataset.route;n!=null&&(this.expandedRouteSet.has(n)||(this.expandedRouteSet.add(n),this.requestUpdate()))};this.handleTreeCollapse=i=>{let r=i.target;if(r==null||r.tagName!=="SL-TREE-ITEM")return;let n=r.dataset.route;n!=null&&this.expandedRouteSet.delete(n)&&this.requestUpdate()};this.handleTreeSelection=i=>{let[r]=i.detail.selection;if(r==null)return;let n=r.dataset.route;n==null||n===this.activeRoute||this.setActiveRoute(n)};this.handlePanelToggle=()=>{this.panelOpen=!this.panelOpen,this.storedPanelOpen=this.panelOpen,this.persistState()};this.handleHomeButtonClick=()=>{this.hasRoute("/")&&this.activeRoute!=="/"&&this.setActiveRoute("/")};this.handleHomeLinkClick=i=>{i.defaultPrevented||i.button!==0||i.metaKey||i.ctrlKey||i.shiftKey||i.altKey||(i.preventDefault(),this.activeRoute!=="/"&&this.setActiveRoute("/"))}}connectedCallback(){if(super.connectedCallback(),pl()&&this.assetBasePath===""){let i=this.detectAssetBasePath();i!==""&&(this.assetBasePath=i,this.basePath===""&&(this.basePath=i))}this.setupViewportWatcher(),this.restoreState(),pl()&&window.addEventListener("popstate",this.handlePopState)}disconnectedCallback(){super.disconnectedCallback(),this.teardownViewportWatcher(),this.layoutObserver!=null&&(this.layoutObserver.disconnect(),this.layoutObserver=null),this.layoutScrollHandler!=null&&(window.removeEventListener("scroll",this.layoutScrollHandler),this.layoutScrollHandler=null),pl()&&window.removeEventListener("popstate",this.handlePopState)}firstUpdated(){this.isInitialised=!0,this.observeLayoutMetrics(),this.refreshPages(),this.syncDocumentTitle()}updated(i){i.has("title")&&this.syncDocumentTitle(),(i.has("activeRoute")||i.has("panelOpen"))&&this.persistState()}syncDocumentTitle(){pl()&&(document.title=this.title)}restoreState(){if(pl()){try{let i=window.localStorage.getItem(dse),r;i==="true"||i==="false"?r=i==="true":r=!window.matchMedia(pse).matches,this.storedPanelOpen=r,this.panelOpen=r,this.storedRoutePreference=window.localStorage.getItem(fse)}catch{}this.isNarrowViewport()&&this.forceCollapseForMobile()}}persistState(){if(!(!pl()||!this.isInitialised)){if(this.skipNextPersist){this.skipNextPersist=!1;return}try{window.localStorage.setItem(dse,String(this.storedPanelOpen)),this.activeRoute!=null&&window.localStorage.setItem(fse,this.activeRoute)}catch{}}}setupViewportWatcher(){if(!pl())return;let i=window.matchMedia(pse);this.narrowQuery=i;let r=n=>{this.handleViewportChange(n.matches)};this.narrowQueryListener=r,typeof i.addEventListener=="function"?i.addEventListener("change",r):typeof i.addListener=="function"&&i.addListener(r)}teardownViewportWatcher(){let i=this.narrowQuery,r=this.narrowQueryListener;i!=null&&r!=null&&(typeof i.removeEventListener=="function"?i.removeEventListener("change",r):typeof i.removeListener=="function"&&i.removeListener(r)),this.narrowQuery=null,this.narrowQueryListener=null}observeLayoutMetrics(){if(!pl())return;let i=this.shadowRoot?.querySelector(".menu-toolbar"),r=this.shadowRoot?.querySelector("header.page-header"),n=()=>{let o=i?.getBoundingClientRect()??null,a=r?.getBoundingClientRect()??null,l=o?.height??0,u=a?.height??0,c=o?.bottom??a?.bottom??0;this.style.setProperty("--page-toolbar-height",`${l}px`),this.style.setProperty("--page-header-height",`${u}px`),this.style.setProperty("--page-overlay-top-offset",`${Math.max(0,c)}px`)};n();let s=()=>{n()};if(this.layoutScrollHandler!=null&&window.removeEventListener("scroll",this.layoutScrollHandler),window.addEventListener("scroll",s,{passive:!0}),this.layoutScrollHandler=s,typeof ResizeObserver=="function"){this.layoutObserver==null?this.layoutObserver=new ResizeObserver(()=>{n()}):this.layoutObserver.disconnect();let o=[i,r].filter(a=>a!=null);for(let a of o)this.layoutObserver.observe(a)}}detectAssetBasePath(){if(!pl())return"";let i=['script[type="module"][src]','link[rel="modulepreload"][href]','link[rel="stylesheet"][href]'];for(let r of i){let n=document.querySelector(r);if(n==null)continue;let s=n instanceof HTMLScriptElement?n.getAttribute("src"):n.getAttribute("href");if(!(s==null||s.trim()===""))try{let o=new URL(s,window.location.origin),a=o.pathname.indexOf("/assets/");if(a>=0){let l=o.pathname.slice(0,a);return _z(l)}}catch{}}return""}refreshPages(){let i=this.contentSlot;if(i==null)return;let r=i.assignedElements({flatten:!0}),n=[],s=new Set;for(let a of r){if(!(a instanceof HTMLElement)||a.tagName!=="TBX-PAGE")continue;let l=a,u=T6(l.route),c=l.title.trim()!==""?l.title.trim():u,h=l.icon.trim(),d=h!==""?h:null;s.has(u)?(console.warn(`Duplicate tbx-page route detected: ${u}. Only the first occurrence will be used.`),l.hidden=!0):(l.route!==u&&(l.route=u),n.push({element:l,route:u,title:c,icon:d,parentRoute:KLe(u)}),s.add(u))}let o=new Set(n.map(a=>a.route));this.expandedRouteSet=new Set([...this.expandedRouteSet].filter(a=>o.has(a))),this.pages=n,this.syncRouteWithLocation(this.activeRoute==null),this.updatePageVisibility()}resolveRouteFromPath(i){let r=mse(i),n=[...this.pages.map(a=>a.route)].sort((a,l)=>l.length-a.length),s=this.assetBasePath;for(let a of n){let l=ZLe(r,a);if(l==null)continue;let u=_z(l);if(a==="/"){let h=s!==""?s:this.basePath;if(h===""){if(u!=="")continue}else if(u!==h)continue}let c=gse(u,a);if(mse(c)===r)return{basePath:u,route:a}}return{basePath:s!==""?s:this.basePath,route:null}}syncRouteWithLocation(i=!1){if(!pl())return;if(this.pages.length===0){this.activeRoute=null;return}let{pathname:r}=window.location,{basePath:n,route:s}=this.resolveRouteFromPath(r);this.basePath=n;let o=s;(o==null||!this.hasRoute(o))&&(o=(i&&this.storedRoutePreference!=null&&this.hasRoute(this.storedRoutePreference)?this.storedRoutePreference:null)??this.pages[0]?.route??null,o!=null&&this.updateHistory(o,!0)),o!=null&&this.setActiveRoute(o,{skipHistory:!0})}hasRoute(i){return this.pages.some(r=>r.route===i)}setActiveRoute(i,r={}){let n=T6(i),{replaceHistory:s=!1,skipHistory:o=!1}=r;if(!this.hasRoute(n))return;let a=this.activeRoute===n;if(this.ensureRouteAncestorsExpanded(n),a){o||this.updateHistory(n,s);return}this.activeRoute=n,this.updatePageVisibility(),o||this.updateHistory(n,s),this.isNarrowViewport()&&this.forceCollapseForMobile()}ensureRouteAncestorsExpanded(i){let r=[...JLe(i),i],n=!1;for(let s of r)this.hasRoute(s)&&(this.expandedRouteSet.has(s)||(this.expandedRouteSet.add(s),n=!0));n&&this.requestUpdate()}updateHistory(i,r=!1){if(!pl())return;let n=gse(this.basePath,i),s=`${window.location.search??""}${window.location.hash??""}`,o=`${n}${s}`;`${window.location.pathname}${window.location.search}${window.location.hash}`!==o&&(r?window.history.replaceState({},"",o):window.history.pushState({},"",o))}updatePageVisibility(){let i=this.activeRoute;for(let r of this.pages){let n=r.route===i;r.element.hidden=!n,r.element.toggleAttribute("inert",!n),r.element.toggleAttribute("data-active",n)}}handleViewportChange(i){i?this.forceCollapseForMobile():this.panelOpen!==this.storedPanelOpen&&(this.panelOpen=this.storedPanelOpen)}forceCollapseForMobile(){this.panelOpen&&(this.skipNextPersist=!0,this.panelOpen=!1)}isNarrowViewport(){return this.narrowQuery?.matches??!1}get routeTree(){return QLe(this.pages)}get activePath(){return this.activeRoute==null?[]:vse(this.routeTree,this.activeRoute)??[]}renderTree(i){return i.length===0?X``:X`${lse(i,r=>r.route,r=>{let n=this.expandedRouteSet.has(r.route),s=r.route===this.activeRoute,o=r.children.length>0,a=r.icon;return X`
        <sl-tree-item
          part="tree-item"
          data-route=${r.route}
          ?expanded=${n}
          ?selected=${s}
        >
          ${a!=null?X`<sl-icon name=${a}></sl-icon>`:lt}
          ${r.title}
          ${o?this.renderTree(r.children):lt}
        </sl-tree-item>
      `})}`}handleBreadcrumbClick(i){i!==this.activeRoute&&this.setActiveRoute(i)}renderBreadcrumbs(){let i=this.activePath;return i.length===0?X`<sl-breadcrumb></sl-breadcrumb>`:X`
      <sl-breadcrumb>
        ${i.map((r,n)=>{let s=n===i.length-1;return X`
            <sl-breadcrumb-item
              aria-current=${s?"page":lt}
              ?disabled=${s}
              @click=${s?void 0:()=>this.handleBreadcrumbClick(r.route)}
            >
              ${r.title}
            </sl-breadcrumb-item>
          `})}
      </sl-breadcrumb>
    `}render(){let i=this.panelOpen?"content-shell panel-open":"content-shell panel-collapsed",r=this.panelOpen?X`
          <nav
            class="tree-panel"
            aria-label="Site navigation"
          >
            <div class="tree-scroll-container">
              <sl-tree
                class="tree-with-icons"
                selection="single"
                tabindex="0"
                @sl-selection-change=${this.handleTreeSelection}
                @sl-expand=${this.handleTreeExpand}
                @sl-collapse=${this.handleTreeCollapse}
              >
                ${this.renderTree(this.routeTree)}
              </sl-tree>
            </div>
          </nav>
        `:lt;return X`
      <div class="page-shell">
        <header class="page-header">
          <h1>
            <a href="/" @click=${this.handleHomeLinkClick}>${this.title}</a>
          </h1>
          <tbx-theme-toggle></tbx-theme-toggle>
        </header>

        <div class="menu-toolbar">
          <sl-icon-button
            name="list"
            label=${this.panelOpen?"Hide navigation menu":"Show navigation menu"}
            @click=${this.handlePanelToggle}
          ></sl-icon-button>
          <sl-icon-button
            name="house-fill"
            label="Go to home"
            @click=${this.handleHomeButtonClick}
          ></sl-icon-button>
          ${this.renderBreadcrumbs()}
        </div>

        <div class=${i}>
          ${r}

          <div class="content-panel">
            <slot @slotchange=${this.refreshPages}></slot>
          </div>
        </div>
      </div>
    `}};yu.styles=ze`
    :host {
      --page-toolbar-height: 0px;
      --page-shell-padding-inline: clamp(0.75rem, 2vw, 1.5rem);
      --page-shell-padding-block: clamp(0.85rem, 2vw, 1.5rem);
      --page-surface: var(--sl-color-neutral-0);
      --tree-panel-width: clamp(280px, 25%, 320px);
      display: flex;
      flex-direction: column;
      box-sizing: border-box;
      width: 100%;
      min-height: 100vh;
      min-height: 100dvh;
      background-color: var(--page-surface);
    }

    :host-context(.sl-theme-dark) {
      --page-surface: var(--sl-color-neutral-950, var(--sl-color-neutral-900));
    }

    @media (max-width: 640px) {
      :host {
        --page-shell-padding-inline: 0rem;
      }
    }

    .page-shell {
      display: flex;
      flex-direction: column;
      gap: 0;
      padding: var(--page-shell-padding-block) var(--page-shell-padding-inline) 0;
      background-color: var(--page-surface);
      flex: 1 1 auto;
      min-height: 0;
    }

    header.page-header {
      display: flex;
      align-items: center;
      gap: 0.65rem;
      flex-wrap: nowrap;
      margin-inline: calc(-1 * var(--page-shell-padding-inline));
      padding: 0 max(var(--page-shell-padding-inline), env(safe-area-inset-right)) clamp(0.4rem, 1vw, 0.6rem) max(var(--page-shell-padding-inline), env(safe-area-inset-left));
    }

    header.page-header h1 {
      font-size: 1.75rem;
      margin: 0;
      flex: 1 1 auto;
      min-width: 0;
    }

    header.page-header h1 a {
      color: inherit;
      text-decoration: none;
    }

    header.page-header h1 a:focus-visible {
      text-decoration: underline;
    }

    header.page-header tbx-theme-toggle {
      margin-left: auto;
      flex: 0 0 auto;
    }

    .menu-toolbar {
      position: sticky;
      top: 0;
      z-index: 20;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
      padding-block: 0.35rem;
      margin-inline: calc(-1 * var(--page-shell-padding-inline));
      padding-inline: max(var(--page-shell-padding-inline), env(safe-area-inset-left)) max(var(--page-shell-padding-inline), env(safe-area-inset-right));
      background-color: var(--page-toolbar-background, var(--page-surface));
      border-bottom: 1px solid var(--page-divider-color, var(--sl-color-neutral-200));
    }

    .menu-toolbar::after {
      content: '';
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    :host-context(.sl-theme-dark) .menu-toolbar {
      --page-toolbar-background: var(--sl-color-neutral-900);
      --page-divider-color: var(--sl-color-neutral-800);
    }

    .menu-toolbar sl-breadcrumb {
      flex: 1 1 auto;
      min-width: 0;
    }

    sl-icon-button::part(base) {
      font-size: 1.25rem;
    }

    .content-shell {
      width: 100%;
      flex: 1 1 auto;
      min-height: 0;
      margin-inline: calc(-1 * var(--page-shell-padding-inline));
      margin-bottom: 0;
      padding-bottom: 0;
      display: flex;
      align-items: stretch;
      gap: 0;
      background-color: var(--page-surface);
    }

    .content-shell.panel-open .content-panel {
      border-inline-start: 1px solid var(--page-divider-color, var(--sl-color-neutral-200));
    }

    .content-shell.panel-collapsed .content-panel {
      border-inline-start: none;
    }

    :host-context(.sl-theme-dark) .content-shell.panel-open .content-panel {
      border-inline-start-color: var(--sl-color-neutral-800);
    }

    nav.tree-panel {
      position: sticky;
      top: var(--page-toolbar-height, 0px);
      align-self: flex-start;
      display: block;
      flex: 0 0 var(--tree-panel-width);
      max-width: var(--tree-panel-width);
      min-width: var(--tree-panel-width);
      padding: 0;
      margin-bottom: var(--page-shell-padding-block);
      box-sizing: border-box;
      background-color: var(--page-surface);
    }

    nav.tree-panel .tree-scroll-container {
      max-height: calc(100vh - var(--page-toolbar-height, 0px) - var(--page-shell-padding-block));
      overflow: auto;
      padding: clamp(0.4rem, 1vw, 0.55rem) clamp(0.25rem, 0.8vw, 0.45rem) clamp(0.6rem, 1.2vw, 0.8rem) clamp(0.5rem, 1.2vw, 0.65rem);
      box-sizing: border-box;
    }

    nav.tree-panel sl-tree {
      min-height: 100%;
    }

    nav.tree-panel sl-tree.tree-with-icons sl-tree-item sl-icon {
      display: inline-flex;
      align-items: center;
      font-size: 1.05em;
      margin-inline-end: 0.5rem;
    }

    nav.tree-panel sl-tree::part(base) {
      background-color: transparent;
      padding: 0;
    }

    .content-panel {
      flex: 1 1 auto;
      min-height: 0;
      min-width: 0;
      padding: clamp(0.4rem, 1vw, 0.65rem) var(--page-shell-padding-inline) var(--page-shell-padding-block) var(--page-shell-padding-inline);
      box-sizing: border-box;
      overflow: auto;
      overflow-wrap: anywhere;
      word-break: break-word;
      background-color: var(--page-surface);
    }

    nav.tree-panel sl-tree-item::part(item) {
      border-radius: 4px;
    }

    nav.tree-panel sl-tree-item::part(label) {
      display: block;
      white-space: normal;
      overflow-wrap: anywhere;
      word-break: break-word;
    }

    ::slotted(*) {
      max-width: 100%;
      box-sizing: border-box;
    }

    @media (max-width: 768px) {
      :host {
        padding: 1rem;
        --tree-panel-width: clamp(240px, 80vw, 320px);
      }
      .content-shell {
        min-height: 50vh;
        position: relative;
      }
      header.page-header {
        gap: 0.75rem;
      }
      nav.tree-panel {
        flex: 0 0 var(--tree-panel-width);
        width: var(--tree-panel-width);
        max-width: none;
        min-width: 0;
        margin-bottom: 0;
        box-shadow: none;
      }
      .content-shell.panel-open nav.tree-panel {
        position: fixed;
        inset-inline-start: env(safe-area-inset-left);
        top: var(--page-overlay-top-offset, 0px);
        height: calc(100vh - var(--page-overlay-top-offset, 0px));
        z-index: 40;
        box-shadow: none;
        border-inline-end: 1px solid var(--page-divider-color, var(--sl-color-neutral-200));
      }
      :host-context(.sl-theme-dark) .content-shell.panel-open nav.tree-panel {
        border-inline-end-color: var(--sl-color-neutral-800);
        box-shadow: none;
      }
      .content-shell.panel-open .content-panel {
        border-inline-start: none;
      }
    }

    @media (max-width: 540px) {
      header.page-header {
        flex-wrap: wrap;
      }
      header.page-header tbx-theme-toggle {
        margin-left: 0;
      }
    }

    @media (max-width: 600px) {
      .menu-toolbar sl-breadcrumb-item:not(:last-of-type) {
        display: none;
      }

      .menu-toolbar sl-breadcrumb-item::part(separator) {
        display: none;
      }
    }
  `,Ct([U({type:String})],yu.prototype,"title",2),Ct([Ie()],yu.prototype,"panelOpen",2),Ct([Ie()],yu.prototype,"activeRoute",2),Ct([Ie()],yu.prototype,"pages",2),Ct([Ne("slot")],yu.prototype,"contentSlot",2),yu=Ct([xn("tbx-router")],yu);R1("https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/dist/");
/*! Bundled license information:

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
lit-html/lit-html.js:
lit-element/lit-element.js:
@lit/reactive-element/decorators/custom-element.js:
@lit/reactive-element/decorators/property.js:
@lit/reactive-element/decorators/state.js:
@lit/reactive-element/decorators/event-options.js:
@lit/reactive-element/decorators/base.js:
@lit/reactive-element/decorators/query.js:
@lit/reactive-element/decorators/query-all.js:
@lit/reactive-element/decorators/query-async.js:
@lit/reactive-element/decorators/query-assigned-nodes.js:
lit-html/directive.js:
lit-html/async-directive.js:
lit-html/directives/unsafe-html.js:
lit-html/directives/repeat.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
lit-html/directives/when.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
lit-html/directives/live.js:
lit-html/directives/ref.js:
lit-html/static.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/class-map.js:
lit-html/directives/if-defined.js:
lit-html/directives/style-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

signal-polyfill/dist/index.js:
  (**
   * @license
   * Copyright Google LLC All Rights Reserved.
   *
   * Use of this source code is governed by an MIT-style license that can be
   * found in the LICENSE file at https://angular.io/license
   *)
  (**
   * @license
   * Copyright 2024 Bloomberg Finance L.P.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@lit-labs/signals/lib/signal-watcher.js:
@lit-labs/signals/lib/watch.js:
@lit-labs/signals/lib/html-tag.js:
@lit-labs/signals/index.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

fast-json-patch/module/helpers.mjs:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2022 Joachim Wester
   * MIT licensed
   *)

fast-json-patch/module/duplex.mjs:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2021 Joachim Wester
   * MIT license
   *)
*/
