var die=Object.create;var qg=Object.defineProperty;var _$=Object.getOwnPropertyDescriptor;var pie=Object.getOwnPropertyNames;var mie=Object.getPrototypeOf,gie=Object.prototype.hasOwnProperty;var w$=e=>{throw TypeError(e)};var vie=(e,t,r)=>t in e?qg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var S$=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pi=(e,t)=>{for(var r in t)qg(e,r,{get:t[r],enumerable:!0})},bie=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of pie(t))!gie.call(e,n)&&n!==r&&qg(e,n,{get:()=>t[n],enumerable:!(i=_$(t,n))||i.enumerable});return e};var C$=(e,t,r)=>(r=e!=null?die(mie(e)):{},bie(t||!e||!e.__esModule?qg(r,"default",{value:e,enumerable:!0}):r,e));var Lt=(e,t,r,i)=>{for(var n=i>1?void 0:i?_$(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(n=(i?s(t,r,n):s(n))||n);return i&&n&&qg(t,r,n),n};var Zt=(e,t,r)=>vie(e,typeof t!="symbol"?t+"":t,r),k$=(e,t,r)=>t.has(e)||w$("Cannot "+r);var j2=(e,t,r)=>(k$(e,t,"read from private field"),r?r.call(e):t.get(e)),x7=(e,t,r)=>t.has(e)?w$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),_7=(e,t,r,i)=>(k$(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);var SL=S$((MOe,wL)=>{"use strict";var Rne=/("(?:[^\\"]|\\.)*")|[:,]/g;wL.exports=function(t,r){var i,n,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),n=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,(function s(a,l,u){var c,f,h,p,d,m,g,v,b,y,x,S;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,o),x===void 0)return x;if(g=n-l.length-u,x.length<=g&&(b=x.replace(Rne,function(_,w){return w||_+" "}),b.length<=g))return b;if(o!=null&&(a=JSON.parse(x),o=void 0),typeof a=="object"&&a!==null){if(v=l+i,h=[],f=0,Array.isArray(a))for(y="[",c="]",g=a.length;f<g;f++)h.push(s(a[f],v,f===g-1?0:1)||"null");else for(y="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)p=m[f],d=JSON.stringify(p)+": ",S=s(a[p],v,d.length+(f===g-1?0:1)),S!==void 0&&h.push(d+S);if(h.length>0)return[y,i+h.join(`,
`+v),c].join(`
`+l)}return x})(t,"",0)}});var wJ=S$((gS,VF)=>{(function(e,t){if(typeof gS=="object"&&typeof VF=="object")VF.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var i in r)(typeof gS=="object"?gS:e)[i]=r[i]}})(globalThis,(()=>(()=>{"use strict";var e={4567:function(n,o,s){var a=this&&this.__decorate||function(g,v,b,y){var x,S=arguments.length,_=S<3?v:y===null?y=Object.getOwnPropertyDescriptor(v,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(g,v,b,y);else for(var w=g.length-1;w>=0;w--)(x=g[w])&&(_=(S<3?x(_):S>3?x(v,b,_):x(v,b))||_);return S>3&&_&&Object.defineProperty(v,b,_),_},l=this&&this.__param||function(g,v){return function(b,y){v(b,y,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;let u=s(9042),c=s(9924),f=s(844),h=s(4725),p=s(2585),d=s(3656),m=o.AccessibilityManager=class extends f.Disposable{constructor(g,v,b,y){super(),this._terminal=g,this._coreBrowserService=b,this._renderService=y,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let x=0;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);if(this._topBoundaryFocusListener=x=>this._handleBoundaryFocus(x,0),this._bottomBoundaryFocusListener=x=>this._handleBoundaryFocus(x,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new c.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((x=>this._handleResize(x.rows)))),this.register(this._terminal.onRender((x=>this._refreshRows(x.start,x.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((x=>this._handleChar(x)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((x=>this._handleTab(x)))),this.register(this._terminal.onKey((x=>this._handleKey(x.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,d.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,f.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(g){for(let v=0;v<g;v++)this._handleChar(" ")}_handleChar(g){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==g&&(this._charsToAnnounce+=g):this._charsToAnnounce+=g,g===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(g){this._clearLiveRegion(),/\p{Control}/u.test(g)||this._charsToConsume.push(g)}_refreshRows(g,v){this._liveRegionDebouncer.refresh(g,v,this._terminal.rows)}_renderRows(g,v){let b=this._terminal.buffer,y=b.lines.length.toString();for(let x=g;x<=v;x++){let S=b.lines.get(b.ydisp+x),_=[],w=S?.translateToString(!0,void 0,void 0,_)||"",k=(b.ydisp+x+1).toString(),A=this._rowElements[x];A&&(w.length===0?(A.innerText="\xA0",this._rowColumns.set(A,[0,1])):(A.textContent=w,this._rowColumns.set(A,_)),A.setAttribute("aria-posinset",k),A.setAttribute("aria-setsize",y))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(g,v){let b=g.target,y=this._rowElements[v===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(v===0?"1":`${this._terminal.buffer.lines.length}`)||g.relatedTarget!==y)return;let x,S;if(v===0?(x=b,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(x=this._rowElements.shift(),S=b,this._rowContainer.removeChild(x)),x.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),v===0){let _=this._createAccessibilityTreeNode();this._rowElements.unshift(_),this._rowContainer.insertAdjacentElement("afterbegin",_)}else{let _=this._createAccessibilityTreeNode();this._rowElements.push(_),this._rowContainer.appendChild(_)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(v===0?-1:1),this._rowElements[v===0?1:this._rowElements.length-2].focus(),g.preventDefault(),g.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let g=document.getSelection();if(!g)return;if(g.isCollapsed)return void(this._rowContainer.contains(g.anchorNode)&&this._terminal.clearSelection());if(!g.anchorNode||!g.focusNode)return void console.error("anchorNode and/or focusNode are null");let v={node:g.anchorNode,offset:g.anchorOffset},b={node:g.focusNode,offset:g.focusOffset};if((v.node.compareDocumentPosition(b.node)&Node.DOCUMENT_POSITION_PRECEDING||v.node===b.node&&v.offset>b.offset)&&([v,b]=[b,v]),v.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(v={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(v.node))return;let y=this._rowElements.slice(-1)[0];if(b.node.compareDocumentPosition(y)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(b={node:y,offset:y.textContent?.length??0}),!this._rowContainer.contains(b.node))return;let x=({node:w,offset:k})=>{let A=w instanceof Text?w.parentNode:w,M=parseInt(A?.getAttribute("aria-posinset"),10)-1;if(isNaN(M))return console.warn("row is invalid. Race condition?"),null;let D=this._rowColumns.get(A);if(!D)return console.warn("columns is null. Race condition?"),null;let z=k<D.length?D[k]:D.slice(-1)[0]+1;return z>=this._terminal.cols&&(++M,z=0),{row:M,column:z}},S=x(v),_=x(b);if(S&&_){if(S.row>_.row||S.row===_.row&&S.column>=_.column)throw new Error("invalid range");this._terminal.select(S.column,S.row,(_.row-S.row)*this._terminal.cols-S.column+_.column)}}_handleResize(g){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let v=this._rowContainer.children.length;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);for(;this._rowElements.length>g;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let g=this._coreBrowserService.mainDocument.createElement("div");return g.setAttribute("role","listitem"),g.tabIndex=-1,this._refreshRowDimensions(g),g}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let g=0;g<this._terminal.rows;g++)this._refreshRowDimensions(this._rowElements[g])}}_refreshRowDimensions(g){g.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=m=a([l(1,p.IInstantiationService),l(2,h.ICoreBrowserService),l(3,h.IRenderService)],m)},3614:(n,o)=>{function s(c){return c.replace(/\r?\n/g,"\r")}function a(c,f){return f?"\x1B[200~"+c+"\x1B[201~":c}function l(c,f,h,p){c=a(c=s(c),h.decPrivateModes.bracketedPasteMode&&p.rawOptions.ignoreBracketedPasteMode!==!0),h.triggerDataEvent(c,!0),f.value=""}function u(c,f,h){let p=h.getBoundingClientRect(),d=c.clientX-p.left-10,m=c.clientY-p.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${d}px`,f.style.top=`${m}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=s,o.bracketTextForPaste=a,o.copyHandler=function(c,f){c.clipboardData&&c.clipboardData.setData("text/plain",f.selectionText),c.preventDefault()},o.handlePasteEvent=function(c,f,h,p){c.stopPropagation(),c.clipboardData&&l(c.clipboardData.getData("text/plain"),f,h,p)},o.paste=l,o.moveTextAreaUnderMouseCursor=u,o.rightClickHandler=function(c,f,h,p,d){u(c,f,h),d&&p.rightClickSelect(c),f.value=p.selectionText,f.select()}},7239:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;let a=s(1505);o.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(l,u,c){this._css.set(l,u,c)}getCss(l,u){return this._css.get(l,u)}setColor(l,u,c){this._color.set(l,u,c)}getColor(l,u){return this._color.get(l,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(s,a,l,u){s.addEventListener(a,l,u);let c=!1;return{dispose:()=>{c||(c=!0,s.removeEventListener(a,l,u))}}}},3551:function(n,o,s){var a=this&&this.__decorate||function(m,g,v,b){var y,x=arguments.length,S=x<3?g:b===null?b=Object.getOwnPropertyDescriptor(g,v):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,g,v,b);else for(var _=m.length-1;_>=0;_--)(y=m[_])&&(S=(x<3?y(S):x>3?y(g,v,S):y(g,v))||S);return x>3&&S&&Object.defineProperty(g,v,S),S},l=this&&this.__param||function(m,g){return function(v,b){g(v,b,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier=void 0;let u=s(3656),c=s(8460),f=s(844),h=s(2585),p=s(4725),d=o.Linkifier=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(m,g,v,b,y){super(),this._element=m,this._mouseService=g,this._renderService=v,this._bufferService=b,this._linkProviderService=y,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new c.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new c.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)((()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(m){this._lastMouseEvent=m;let g=this._positionFromMouseEvent(m,this._element,this._mouseService);if(!g)return;this._isMouseOut=!1;let v=m.composedPath();for(let b=0;b<v.length;b++){let y=v[b];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&g.x===this._lastBufferCell.x&&g.y===this._lastBufferCell.y||(this._handleHover(g),this._lastBufferCell=g)}_handleHover(m){if(this._activeLine!==m.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(m,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,m)||(this._clearCurrentLink(),this._askForLink(m,!0))}_askForLink(m,g){this._activeProviderReplies&&g||(this._activeProviderReplies?.forEach((b=>{b?.forEach((y=>{y.link.dispose&&y.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=m.y);let v=!1;for(let[b,y]of this._linkProviderService.linkProviders.entries())g?this._activeProviderReplies?.get(b)&&(v=this._checkLinkProviderResult(b,m,v)):y.provideLinks(m.y,(x=>{if(this._isMouseOut)return;let S=x?.map((_=>({link:_})));this._activeProviderReplies?.set(b,S),v=this._checkLinkProviderResult(b,m,v),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(m.y,this._activeProviderReplies)}))}_removeIntersectingLinks(m,g){let v=new Set;for(let b=0;b<g.size;b++){let y=g.get(b);if(y)for(let x=0;x<y.length;x++){let S=y[x],_=S.link.range.start.y<m?0:S.link.range.start.x,w=S.link.range.end.y>m?this._bufferService.cols:S.link.range.end.x;for(let k=_;k<=w;k++){if(v.has(k)){y.splice(x--,1);break}v.add(k)}}}}_checkLinkProviderResult(m,g,v){if(!this._activeProviderReplies)return v;let b=this._activeProviderReplies.get(m),y=!1;for(let x=0;x<m;x++)this._activeProviderReplies.has(x)&&!this._activeProviderReplies.get(x)||(y=!0);if(!y&&b){let x=b.find((S=>this._linkAtPosition(S.link,g)));x&&(v=!0,this._handleNewLink(x))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!v)for(let x=0;x<this._activeProviderReplies.size;x++){let S=this._activeProviderReplies.get(x)?.find((_=>this._linkAtPosition(_.link,g)));if(S){v=!0,this._handleNewLink(S);break}}return v}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(m){if(!this._currentLink)return;let g=this._positionFromMouseEvent(m,this._element,this._mouseService);g&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,g)&&this._currentLink.link.activate(m,this._currentLink.link.text)}_clearCurrentLink(m,g){this._currentLink&&this._lastMouseEvent&&(!m||!g||this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=g)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(m){if(!this._lastMouseEvent)return;let g=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);g&&this._linkAtPosition(m.link,g)&&(this._currentLink=m,this._currentLink.state={decorations:{underline:m.link.decorations===void 0||m.link.decorations.underline,pointerCursor:m.link.decorations===void 0||m.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,m.link,this._lastMouseEvent),m.link.decorations={},Object.defineProperties(m.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:v=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==v&&(this._currentLink.state.decorations.pointerCursor=v,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",v))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:v=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==v&&(this._currentLink.state.decorations.underline=v,this._currentLink.state.isHovered&&this._fireUnderlineEvent(m.link,v))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((v=>{if(!this._currentLink)return;let b=v.start===0?0:v.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+v.end;if(this._currentLink.link.range.start.y>=b&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(b,y),this._lastMouseEvent)){let x=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);x&&this._askForLink(x,!1)}}))))}_linkHover(m,g,v){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(g,!0),this._currentLink.state.decorations.pointerCursor&&m.classList.add("xterm-cursor-pointer")),g.hover&&g.hover(v,g.text)}_fireUnderlineEvent(m,g){let v=m.range,b=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(v.start.x-1,v.start.y-b-1,v.end.x,v.end.y-b-1,void 0);(g?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(m,g,v){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(g,!1),this._currentLink.state.decorations.pointerCursor&&m.classList.remove("xterm-cursor-pointer")),g.leave&&g.leave(v,g.text)}_linkAtPosition(m,g){let v=m.range.start.y*this._bufferService.cols+m.range.start.x,b=m.range.end.y*this._bufferService.cols+m.range.end.x,y=g.y*this._bufferService.cols+g.x;return v<=y&&y<=b}_positionFromMouseEvent(m,g,v){let b=v.getCoords(m,g,this._bufferService.cols,this._bufferService.rows);if(b)return{x:b[0],y:b[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(m,g,v,b,y){return{x1:m,y1:g,x2:v,y2:b,cols:this._bufferService.cols,fg:y}}};o.Linkifier=d=a([l(1,p.IMouseService),l(2,p.IRenderService),l(3,h.IBufferService),l(4,p.ILinkProviderService)],d)},9042:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(n,o,s){var a=this&&this.__decorate||function(p,d,m,g){var v,b=arguments.length,y=b<3?d:g===null?g=Object.getOwnPropertyDescriptor(d,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,d,m,g);else for(var x=p.length-1;x>=0;x--)(v=p[x])&&(y=(b<3?v(y):b>3?v(d,m,y):v(d,m))||y);return b>3&&y&&Object.defineProperty(d,m,y),y},l=this&&this.__param||function(p,d){return function(m,g){d(m,g,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;let u=s(511),c=s(2585),f=o.OscLinkProvider=class{constructor(p,d,m){this._bufferService=p,this._optionsService=d,this._oscLinkService=m}provideLinks(p,d){let m=this._bufferService.buffer.lines.get(p-1);if(!m)return void d(void 0);let g=[],v=this._optionsService.rawOptions.linkHandler,b=new u.CellData,y=m.getTrimmedLength(),x=-1,S=-1,_=!1;for(let w=0;w<y;w++)if(S!==-1||m.hasContent(w)){if(m.loadCell(w,b),b.hasExtendedAttrs()&&b.extended.urlId){if(S===-1){S=w,x=b.extended.urlId;continue}_=b.extended.urlId!==x}else S!==-1&&(_=!0);if(_||S!==-1&&w===y-1){let k=this._oscLinkService.getLinkData(x)?.uri;if(k){let A={start:{x:S+1,y:p},end:{x:w+(_||w!==y-1?0:1),y:p}},M=!1;if(!v?.allowNonHttpProtocols)try{let D=new URL(k);["http:","https:"].includes(D.protocol)||(M=!0)}catch{M=!0}M||g.push({text:k,range:A,activate:(D,z)=>v?v.activate(D,z,A):h(0,z),hover:(D,z)=>v?.hover?.(D,z,A),leave:(D,z)=>v?.leave?.(D,z,A)})}_=!1,b.hasExtendedAttrs()&&b.extended.urlId?(S=w,x=b.extended.urlId):(S=-1,x=-1)}}d(g)}};function h(p,d){if(confirm(`Do you want to navigate to ${d}?

WARNING: This link could potentially be dangerous`)){let m=window.open();if(m){try{m.opener=null}catch{}m.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=f=a([l(0,c.IBufferService),l(1,c.IOptionsService),l(2,c.IOscLinkService)],f)},6193:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(s,a){this._renderCallback=s,this._coreBrowserService=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(s){return this._refreshCallbacks.push(s),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(s,a,l){this._rowCount=l,s=s!==void 0?s:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,s):s,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let s=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(s,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let s of this._refreshCallbacks)s(0);this._refreshCallbacks=[]}}},3236:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;let a=s(3614),l=s(3656),u=s(3551),c=s(9042),f=s(3730),h=s(1680),p=s(3107),d=s(5744),m=s(2950),g=s(1296),v=s(428),b=s(4269),y=s(5114),x=s(8934),S=s(3230),_=s(9312),w=s(4725),k=s(6731),A=s(8055),M=s(8969),D=s(8460),z=s(844),P=s(6114),I=s(8437),N=s(2584),H=s(7399),T=s(5941),O=s(9074),L=s(2585),q=s(5435),X=s(4567),ne=s(779);class ke extends M.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(G={}){super(G),this.browser=P,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new z.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService(L.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ne.LinkProviderService),this._instantiationService.setService(w.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((B,le)=>this.refresh(B,le)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((B=>this._reportWindowsOptions(B)))),this.register(this._inputHandler.onColor((B=>this._handleColorEvent(B)))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((B=>this._afterResize(B.cols,B.rows)))),this.register((0,z.toDisposable)((()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)})))}_handleColorEvent(G){if(this._themeService)for(let B of G){let le,pe="";switch(B.index){case 256:le="foreground",pe="10";break;case 257:le="background",pe="11";break;case 258:le="cursor",pe="12";break;default:le="ansi",pe="4;"+B.index}switch(B.type){case 0:let re=A.color.toColorRGB(le==="ansi"?this._themeService.colors.ansi[B.index]:this._themeService.colors[le]);this.coreService.triggerDataEvent(`${N.C0.ESC}]${pe};${(0,T.toRgbString)(re)}${N.C1_ESCAPED.ST}`);break;case 1:if(le==="ansi")this._themeService.modifyColors((ue=>ue.ansi[B.index]=A.channels.toColor(...B.color)));else{let ue=le;this._themeService.modifyColors((Re=>Re[ue]=A.channels.toColor(...B.color)))}break;case 2:this._themeService.restoreColor(B.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(G){G?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(X.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(G){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let G=this.buffer.ybase+this.buffer.y,B=this.buffer.lines.get(G);if(!B)return;let le=Math.min(this.buffer.x,this.cols-1),pe=this._renderService.dimensions.css.cell.height,re=B.getWidth(le),ue=this._renderService.dimensions.css.cell.width*re,Re=this.buffer.y*this._renderService.dimensions.css.cell.height,fe=le*this._renderService.dimensions.css.cell.width;this.textarea.style.left=fe+"px",this.textarea.style.top=Re+"px",this.textarea.style.width=ue+"px",this.textarea.style.height=pe+"px",this.textarea.style.lineHeight=pe+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,l.addDisposableDomListener)(this.element,"copy",(B=>{this.hasSelection()&&(0,a.copyHandler)(B,this._selectionService)})));let G=B=>(0,a.handlePasteEvent)(B,this.textarea,this.coreService,this.optionsService);this.register((0,l.addDisposableDomListener)(this.textarea,"paste",G)),this.register((0,l.addDisposableDomListener)(this.element,"paste",G)),P.isFirefox?this.register((0,l.addDisposableDomListener)(this.element,"mousedown",(B=>{B.button===2&&(0,a.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,l.addDisposableDomListener)(this.element,"contextmenu",(B=>{(0,a.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),P.isLinux&&this.register((0,l.addDisposableDomListener)(this.element,"auxclick",(B=>{B.button===1&&(0,a.moveTextAreaUnderMouseCursor)(B,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,l.addDisposableDomListener)(this.textarea,"keyup",(G=>this._keyUp(G)),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keydown",(G=>this._keyDown(G)),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keypress",(G=>this._keyPress(G)),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionupdate",(G=>this._compositionHelper.compositionupdate(G)))),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,l.addDisposableDomListener)(this.textarea,"input",(G=>this._inputEvent(G)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(G){if(!G)throw new Error("Terminal requires a parent element.");if(G.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=G.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),G.appendChild(this.element);let B=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),B.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,l.addDisposableDomListener)(this.screenElement,"mousemove",(le=>this.updateCursorStyle(le)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),B.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",c.promptLabel),P.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(y.CoreBrowserService,this.textarea,G.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,l.addDisposableDomListener)(this.textarea,"focus",(le=>this._handleTextAreaFocus(le)))),this.register((0,l.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(v.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(k.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(b.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(S.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((le=>this._onRender.fire(le)))),this.onResize((le=>this._renderService.resize(le.cols,le.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(m.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(u.Linkifier,this.screenElement)),this.element.appendChild(B);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(h.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((le=>this.scrollLines(le.amount,le.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(_.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((le=>this.scrollLines(le.amount,le.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((le=>this._renderService.handleSelectionChanged(le.start,le.end,le.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((le=>{this.textarea.value=le,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((le=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(p.BufferDecorationRenderer,this.screenElement)),this.register((0,l.addDisposableDomListener)(this.element,"mousedown",(le=>this._selectionService.handleMouseDown(le)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(X.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(le=>this._handleScreenReaderModeOptionChange(le)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(d.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(le=>{!this._overviewRulerRenderer&&le&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(d.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(g.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let G=this,B=this.element;function le(ue){let Re=G._mouseService.getMouseReportCoords(ue,G.screenElement);if(!Re)return!1;let fe,mt;switch(ue.overrideType||ue.type){case"mousemove":mt=32,ue.buttons===void 0?(fe=3,ue.button!==void 0&&(fe=ue.button<3?ue.button:3)):fe=1&ue.buttons?0:4&ue.buttons?1:2&ue.buttons?2:3;break;case"mouseup":mt=0,fe=ue.button<3?ue.button:3;break;case"mousedown":mt=1,fe=ue.button<3?ue.button:3;break;case"wheel":if(G._customWheelEventHandler&&G._customWheelEventHandler(ue)===!1||G.viewport.getLinesScrolled(ue)===0)return!1;mt=ue.deltaY<0?0:1,fe=4;break;default:return!1}return!(mt===void 0||fe===void 0||fe>4)&&G.coreMouseService.triggerMouseEvent({col:Re.col,row:Re.row,x:Re.x,y:Re.y,button:fe,action:mt,ctrl:ue.ctrlKey,alt:ue.altKey,shift:ue.shiftKey})}let pe={mouseup:null,wheel:null,mousedrag:null,mousemove:null},re={mouseup:ue=>(le(ue),ue.buttons||(this._document.removeEventListener("mouseup",pe.mouseup),pe.mousedrag&&this._document.removeEventListener("mousemove",pe.mousedrag)),this.cancel(ue)),wheel:ue=>(le(ue),this.cancel(ue,!0)),mousedrag:ue=>{ue.buttons&&le(ue)},mousemove:ue=>{ue.buttons||le(ue)}};this.register(this.coreMouseService.onProtocolChange((ue=>{ue?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ue)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ue?pe.mousemove||(B.addEventListener("mousemove",re.mousemove),pe.mousemove=re.mousemove):(B.removeEventListener("mousemove",pe.mousemove),pe.mousemove=null),16&ue?pe.wheel||(B.addEventListener("wheel",re.wheel,{passive:!1}),pe.wheel=re.wheel):(B.removeEventListener("wheel",pe.wheel),pe.wheel=null),2&ue?pe.mouseup||(pe.mouseup=re.mouseup):(this._document.removeEventListener("mouseup",pe.mouseup),pe.mouseup=null),4&ue?pe.mousedrag||(pe.mousedrag=re.mousedrag):(this._document.removeEventListener("mousemove",pe.mousedrag),pe.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,l.addDisposableDomListener)(B,"mousedown",(ue=>{if(ue.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ue))return le(ue),pe.mouseup&&this._document.addEventListener("mouseup",pe.mouseup),pe.mousedrag&&this._document.addEventListener("mousemove",pe.mousedrag),this.cancel(ue)}))),this.register((0,l.addDisposableDomListener)(B,"wheel",(ue=>{if(!pe.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(ue)===!1)return!1;if(!this.buffer.hasScrollback){let Re=this.viewport.getLinesScrolled(ue);if(Re===0)return;let fe=N.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ue.deltaY<0?"A":"B"),mt="";for(let ot=0;ot<Math.abs(Re);ot++)mt+=fe;return this.coreService.triggerDataEvent(mt,!0),this.cancel(ue,!0)}return this.viewport.handleWheel(ue)?this.cancel(ue):void 0}}),{passive:!1})),this.register((0,l.addDisposableDomListener)(B,"touchstart",(ue=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ue),this.cancel(ue)}),{passive:!0})),this.register((0,l.addDisposableDomListener)(B,"touchmove",(ue=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ue)?void 0:this.cancel(ue)}),{passive:!1}))}refresh(G,B){this._renderService?.refreshRows(G,B)}updateCursorStyle(G){this._selectionService?.shouldColumnSelect(G)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(G,B,le=0){le===1?(super.scrollLines(G,B,le),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(G)}paste(G){(0,a.paste)(G,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(G){this._customKeyEventHandler=G}attachCustomWheelEventHandler(G){this._customWheelEventHandler=G}registerLinkProvider(G){return this._linkProviderService.registerLinkProvider(G)}registerCharacterJoiner(G){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let B=this._characterJoinerService.register(G);return this.refresh(0,this.rows-1),B}deregisterCharacterJoiner(G){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(G)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(G){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+G)}registerDecoration(G){return this._decorationService.registerDecoration(G)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(G,B,le){this._selectionService.setSelection(G,B,le)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(G,B){this._selectionService?.selectLines(G,B)}_keyDown(G){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(G)===!1)return!1;let B=this.browser.isMac&&this.options.macOptionIsMeta&&G.altKey;if(!B&&!this._compositionHelper.keydown(G))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;B||G.key!=="Dead"&&G.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let le=(0,H.evaluateKeyboardEvent)(G,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(G),le.type===3||le.type===2){let pe=this.rows-1;return this.scrollLines(le.type===2?-pe:pe),this.cancel(G,!0)}return le.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,G)||(le.cancel&&this.cancel(G,!0),!le.key||!!(G.key&&!G.ctrlKey&&!G.altKey&&!G.metaKey&&G.key.length===1&&G.key.charCodeAt(0)>=65&&G.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(le.key!==N.C0.ETX&&le.key!==N.C0.CR||(this.textarea.value=""),this._onKey.fire({key:le.key,domEvent:G}),this._showCursor(),this.coreService.triggerDataEvent(le.key,!0),!this.optionsService.rawOptions.screenReaderMode||G.altKey||G.ctrlKey?this.cancel(G,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(G,B){let le=G.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||G.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||G.isWindows&&B.getModifierState("AltGraph");return B.type==="keypress"?le:le&&(!B.keyCode||B.keyCode>47)}_keyUp(G){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(G)===!1||((function(B){return B.keyCode===16||B.keyCode===17||B.keyCode===18})(G)||this.focus(),this.updateCursorStyle(G),this._keyPressHandled=!1)}_keyPress(G){let B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(G)===!1)return!1;if(this.cancel(G),G.charCode)B=G.charCode;else if(G.which===null||G.which===void 0)B=G.keyCode;else{if(G.which===0||G.charCode===0)return!1;B=G.which}return!(!B||(G.altKey||G.ctrlKey||G.metaKey)&&!this._isThirdLevelShift(this.browser,G)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:G}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(G){if(G.data&&G.inputType==="insertText"&&(!G.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let B=G.data;return this.coreService.triggerDataEvent(B,!0),this.cancel(G),!0}return!1}resize(G,B){G!==this.cols||B!==this.rows?super.resize(G,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(G,B){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let G=1;G<this.rows;G++)this.buffer.lines.push(this.buffer.getBlankLine(I.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let G=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=G,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(N.C0.ESC+"[I"):this.coreService.triggerDataEvent(N.C0.ESC+"[O")}_reportWindowsOptions(G){if(this._renderService)switch(G){case q.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let B=this._renderService.dimensions.css.canvas.width.toFixed(0),le=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[4;${le};${B}t`);break;case q.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let pe=this._renderService.dimensions.css.cell.width.toFixed(0),re=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[6;${re};${pe}t`)}}cancel(G,B){if(this.options.cancelEvents||B)return G.preventDefault(),G.stopPropagation(),!1}}o.Terminal=ke},9924:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(s,a=1e3){this._renderCallback=s,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(s,a,l){this._rowCount=l,s=s!==void 0?s:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,s):s,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){let c=u-this._lastRefreshMs,f=this._debounceThresholdMS-c;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let s=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(s,a)}}},1680:function(n,o,s){var a=this&&this.__decorate||function(m,g,v,b){var y,x=arguments.length,S=x<3?g:b===null?b=Object.getOwnPropertyDescriptor(g,v):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,g,v,b);else for(var _=m.length-1;_>=0;_--)(y=m[_])&&(S=(x<3?y(S):x>3?y(g,v,S):y(g,v))||S);return x>3&&S&&Object.defineProperty(g,v,S),S},l=this&&this.__param||function(m,g){return function(v,b){g(v,b,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;let u=s(3656),c=s(4725),f=s(8460),h=s(844),p=s(2585),d=o.Viewport=class extends h.Disposable{constructor(m,g,v,b,y,x,S,_){super(),this._viewportElement=m,this._scrollArea=g,this._bufferService=v,this._optionsService=b,this._charSizeService=y,this._renderService=x,this._coreBrowserService=S,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((w=>this._activeBuffer=w.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((w=>this._renderDimensions=w))),this._handleThemeChange(_.colors),this.register(_.onChangeColors((w=>this._handleThemeChange(w)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(m){this._viewportElement.style.backgroundColor=m.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(m){if(m)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let g=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==g&&(this._lastRecordedBufferHeight=g,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let m=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==m&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=m),this._refreshAnimationFrame=null}syncScrollArea(m=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(m);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(m)}_handleScroll(m){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let g=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:g,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let m=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(m*(this._smoothScrollState.target-this._smoothScrollState.origin)),m<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(m,g){let v=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(g<0&&this._viewportElement.scrollTop!==0||g>0&&v<this._lastRecordedBufferHeight)||(m.cancelable&&m.preventDefault(),!1)}handleWheel(m){let g=this._getPixelsScrolled(m);return g!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+g:this._smoothScrollState.target+=g,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=g,this._bubbleScroll(m,g))}scrollLines(m){if(m!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let g=m*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+g,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:m,suppressScrollEvent:!1})}_getPixelsScrolled(m){if(m.deltaY===0||m.shiftKey)return 0;let g=this._applyScrollModifier(m.deltaY,m);return m.deltaMode===WheelEvent.DOM_DELTA_LINE?g*=this._currentRowHeight:m.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(g*=this._currentRowHeight*this._bufferService.rows),g}getBufferElements(m,g){let v,b="",y=[],x=g??this._bufferService.buffer.lines.length,S=this._bufferService.buffer.lines;for(let _=m;_<x;_++){let w=S.get(_);if(!w)continue;let k=S.get(_+1)?.isWrapped;if(b+=w.translateToString(!k),!k||_===S.length-1){let A=document.createElement("div");A.textContent=b,y.push(A),b.length>0&&(v=A),b=""}}return{bufferElements:y,cursorElement:v}}getLinesScrolled(m){if(m.deltaY===0||m.shiftKey)return 0;let g=this._applyScrollModifier(m.deltaY,m);return m.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(g/=this._currentRowHeight+0,this._wheelPartialScroll+=g,g=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):m.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(g*=this._bufferService.rows),g}_applyScrollModifier(m,g){let v=this._optionsService.rawOptions.fastScrollModifier;return v==="alt"&&g.altKey||v==="ctrl"&&g.ctrlKey||v==="shift"&&g.shiftKey?m*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:m*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(m){this._lastTouchY=m.touches[0].pageY}handleTouchMove(m){let g=this._lastTouchY-m.touches[0].pageY;return this._lastTouchY=m.touches[0].pageY,g!==0&&(this._viewportElement.scrollTop+=g,this._bubbleScroll(m,g))}};o.Viewport=d=a([l(2,p.IBufferService),l(3,p.IOptionsService),l(4,c.ICharSizeService),l(5,c.IRenderService),l(6,c.ICoreBrowserService),l(7,c.IThemeService)],d)},3107:function(n,o,s){var a=this&&this.__decorate||function(p,d,m,g){var v,b=arguments.length,y=b<3?d:g===null?g=Object.getOwnPropertyDescriptor(d,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,d,m,g);else for(var x=p.length-1;x>=0;x--)(v=p[x])&&(y=(b<3?v(y):b>3?v(d,m,y):v(d,m))||y);return b>3&&y&&Object.defineProperty(d,m,y),y},l=this&&this.__param||function(p,d){return function(m,g){d(m,g,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;let u=s(4725),c=s(844),f=s(2585),h=o.BufferDecorationRenderer=class extends c.Disposable{constructor(p,d,m,g,v){super(),this._screenElement=p,this._bufferService=d,this._coreBrowserService=m,this._decorationService=g,this._renderService=v,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((b=>this._removeDecoration(b)))),this.register((0,c.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(let p of this._decorationService.decorations)this._renderDecoration(p);this._dimensionsChanged=!1}_renderDecoration(p){this._refreshStyle(p),this._dimensionsChanged&&this._refreshXPosition(p)}_createElement(p){let d=this._coreBrowserService.mainDocument.createElement("div");d.classList.add("xterm-decoration"),d.classList.toggle("xterm-decoration-top-layer",p?.options?.layer==="top"),d.style.width=`${Math.round((p.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,d.style.height=(p.options.height||1)*this._renderService.dimensions.css.cell.height+"px",d.style.top=(p.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",d.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let m=p.options.x??0;return m&&m>this._bufferService.cols&&(d.style.display="none"),this._refreshXPosition(p,d),d}_refreshStyle(p){let d=p.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)p.element&&(p.element.style.display="none",p.onRenderEmitter.fire(p.element));else{let m=this._decorationElements.get(p);m||(m=this._createElement(p),p.element=m,this._decorationElements.set(p,m),this._container.appendChild(m),p.onDispose((()=>{this._decorationElements.delete(p),m.remove()}))),m.style.top=d*this._renderService.dimensions.css.cell.height+"px",m.style.display=this._altBufferIsActive?"none":"block",p.onRenderEmitter.fire(m)}}_refreshXPosition(p,d=p.element){if(!d)return;let m=p.options.x??0;(p.options.anchor||"left")==="right"?d.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(p){this._decorationElements.get(p)?.remove(),this._decorationElements.delete(p),p.dispose()}};o.BufferDecorationRenderer=h=a([l(1,f.IBufferService),l(2,u.ICoreBrowserService),l(3,f.IDecorationService),l(4,u.IRenderService)],h)},5871:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(s){if(s.options.overviewRulerOptions){for(let a of this._zones)if(a.color===s.options.overviewRulerOptions.color&&a.position===s.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,s.marker.line))return;if(this._lineAdjacentToZone(a,s.marker.line,s.options.overviewRulerOptions.position))return void this._addLineToZone(a,s.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=s.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=s.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=s.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=s.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:s.options.overviewRulerOptions.color,position:s.options.overviewRulerOptions.position,startBufferLine:s.marker.line,endBufferLine:s.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(s){this._linePadding=s}_lineIntersectsZone(s,a){return a>=s.startBufferLine&&a<=s.endBufferLine}_lineAdjacentToZone(s,a,l){return a>=s.startBufferLine-this._linePadding[l||"full"]&&a<=s.endBufferLine+this._linePadding[l||"full"]}_addLineToZone(s,a){s.startBufferLine=Math.min(s.startBufferLine,a),s.endBufferLine=Math.max(s.endBufferLine,a)}}},5744:function(n,o,s){var a=this&&this.__decorate||function(v,b,y,x){var S,_=arguments.length,w=_<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(v,b,y,x);else for(var k=v.length-1;k>=0;k--)(S=v[k])&&(w=(_<3?S(w):_>3?S(b,y,w):S(b,y))||w);return _>3&&w&&Object.defineProperty(b,y,w),w},l=this&&this.__param||function(v,b){return function(y,x){b(y,x,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;let u=s(5871),c=s(4725),f=s(844),h=s(2585),p={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0},g=o.OverviewRulerRenderer=class extends f.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(v,b,y,x,S,_,w){super(),this._viewportElement=v,this._screenElement=b,this._bufferService=y,this._decorationService=x,this._renderService=S,this._optionsService=_,this._coreBrowserService=w,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);let k=this._canvas.getContext("2d");if(!k)throw new Error("Ctx cannot be null");this._ctx=k,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,f.toDisposable)((()=>{this._canvas?.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){let v=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=v,d.center=b,d.right=v,this._refreshDrawHeightConstants(),m.full=0,m.left=0,m.center=d.left,m.right=d.left+d.center}_refreshDrawHeightConstants(){p.full=Math.round(2*this._coreBrowserService.dpr);let v=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(v,12),6)*this._coreBrowserService.dpr);p.left=b,p.center=b,p.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*p.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;let v=this._colorZoneStore.zones;for(let b of v)b.position!=="full"&&this._renderColorZone(b);for(let b of v)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(v){this._ctx.fillStyle=v.color,this._ctx.fillRect(m[v.position||"full"],Math.round((this._canvas.height-1)*(v.startBufferLine/this._bufferService.buffers.active.lines.length)-p[v.position||"full"]/2),d[v.position||"full"],Math.round((this._canvas.height-1)*((v.endBufferLine-v.startBufferLine)/this._bufferService.buffers.active.lines.length)+p[v.position||"full"]))}_queueRefresh(v,b){this._shouldUpdateDimensions=v||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};o.OverviewRulerRenderer=g=a([l(2,h.IBufferService),l(3,h.IDecorationService),l(4,c.IRenderService),l(5,h.IOptionsService),l(6,c.ICoreBrowserService)],g)},2950:function(n,o,s){var a=this&&this.__decorate||function(p,d,m,g){var v,b=arguments.length,y=b<3?d:g===null?g=Object.getOwnPropertyDescriptor(d,m):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,d,m,g);else for(var x=p.length-1;x>=0;x--)(v=p[x])&&(y=(b<3?v(y):b>3?v(d,m,y):v(d,m))||y);return b>3&&y&&Object.defineProperty(d,m,y),y},l=this&&this.__param||function(p,d){return function(m,g){d(m,g,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;let u=s(4725),c=s(2585),f=s(2584),h=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(p,d,m,g,v,b){this._textarea=p,this._compositionView=d,this._bufferService=m,this._optionsService=g,this._coreService=v,this._renderService=b,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(p){this._compositionView.textContent=p.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(p){if(this._isComposing||this._isSendingComposition){if(p.keyCode===229||p.keyCode===16||p.keyCode===17||p.keyCode===18)return!1;this._finalizeComposition(!1)}return p.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(p){if(this._compositionView.classList.remove("active"),this._isComposing=!1,p){let d={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let m;this._isSendingComposition=!1,d.start+=this._dataAlreadySent.length,m=this._isComposing?this._textarea.value.substring(d.start,d.end):this._textarea.value.substring(d.start),m.length>0&&this._coreService.triggerDataEvent(m,!0)}}),0)}else{this._isSendingComposition=!1;let d=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(d,!0)}}_handleAnyTextareaChanges(){let p=this._textarea.value;setTimeout((()=>{if(!this._isComposing){let d=this._textarea.value,m=d.replace(p,"");this._dataAlreadySent=m,d.length>p.length?this._coreService.triggerDataEvent(m,!0):d.length<p.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):d.length===p.length&&d!==p&&this._coreService.triggerDataEvent(d,!0)}}),0)}updateCompositionElements(p){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),m=this._renderService.dimensions.css.cell.height,g=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,v=d*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=v+"px",this._compositionView.style.top=g+"px",this._compositionView.style.height=m+"px",this._compositionView.style.lineHeight=m+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let b=this._compositionView.getBoundingClientRect();this._textarea.style.left=v+"px",this._textarea.style.top=g+"px",this._textarea.style.width=Math.max(b.width,1)+"px",this._textarea.style.height=Math.max(b.height,1)+"px",this._textarea.style.lineHeight=b.height+"px"}p||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};o.CompositionHelper=h=a([l(2,c.IBufferService),l(3,c.IOptionsService),l(4,c.ICoreService),l(5,u.IRenderService)],h)},9806:(n,o)=>{function s(a,l,u){let c=u.getBoundingClientRect(),f=a.getComputedStyle(u),h=parseInt(f.getPropertyValue("padding-left")),p=parseInt(f.getPropertyValue("padding-top"));return[l.clientX-c.left-h,l.clientY-c.top-p]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=s,o.getCoords=function(a,l,u,c,f,h,p,d,m){if(!h)return;let g=s(a,l,u);return g?(g[0]=Math.ceil((g[0]+(m?p/2:0))/p),g[1]=Math.ceil(g[1]/d),g[0]=Math.min(Math.max(g[0],1),c+(m?1:0)),g[1]=Math.min(Math.max(g[1],1),f),g):void 0}},9504:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;let a=s(2584);function l(d,m,g,v){let b=d-u(d,g),y=m-u(m,g),x=Math.abs(b-y)-(function(S,_,w){let k=0,A=S-u(S,w),M=_-u(_,w);for(let D=0;D<Math.abs(A-M);D++){let z=c(S,_)==="A"?-1:1;w.buffer.lines.get(A+z*D)?.isWrapped&&k++}return k})(d,m,g);return p(x,h(c(d,m),v))}function u(d,m){let g=0,v=m.buffer.lines.get(d),b=v?.isWrapped;for(;b&&d>=0&&d<m.rows;)g++,v=m.buffer.lines.get(--d),b=v?.isWrapped;return g}function c(d,m){return d>m?"A":"B"}function f(d,m,g,v,b,y){let x=d,S=m,_="";for(;x!==g||S!==v;)x+=b?1:-1,b&&x>y.cols-1?(_+=y.buffer.translateBufferLineToString(S,!1,d,x),x=0,d=0,S++):!b&&x<0&&(_+=y.buffer.translateBufferLineToString(S,!1,0,d+1),x=y.cols-1,d=x,S--);return _+y.buffer.translateBufferLineToString(S,!1,d,x)}function h(d,m){let g=m?"O":"[";return a.C0.ESC+g+d}function p(d,m){d=Math.floor(d);let g="";for(let v=0;v<d;v++)g+=m;return g}o.moveToCellSequence=function(d,m,g,v){let b=g.buffer.x,y=g.buffer.y;if(!g.buffer.hasScrollback)return(function(_,w,k,A,M,D){return l(w,A,M,D).length===0?"":p(f(_,w,_,w-u(w,M),!1,M).length,h("D",D))})(b,y,0,m,g,v)+l(y,m,g,v)+(function(_,w,k,A,M,D){let z;z=l(w,A,M,D).length>0?A-u(A,M):w;let P=A,I=(function(N,H,T,O,L,q){let X;return X=l(T,O,L,q).length>0?O-u(O,L):H,N<T&&X<=O||N>=T&&X<O?"C":"D"})(_,w,k,A,M,D);return p(f(_,z,k,P,I==="C",M).length,h(I,D))})(b,y,d,m,g,v);let x;if(y===m)return x=b>d?"D":"C",p(Math.abs(b-d),h(x,v));x=y>m?"D":"C";let S=Math.abs(y-m);return p((function(_,w){return w.cols-_})(y>m?d:b,g)+(S-1)*g.cols+1+((y>m?b:d)-1),h(x,v))}},1296:function(n,o,s){var a=this&&this.__decorate||function(D,z,P,I){var N,H=arguments.length,T=H<3?z:I===null?I=Object.getOwnPropertyDescriptor(z,P):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(D,z,P,I);else for(var O=D.length-1;O>=0;O--)(N=D[O])&&(T=(H<3?N(T):H>3?N(z,P,T):N(z,P))||T);return H>3&&T&&Object.defineProperty(z,P,T),T},l=this&&this.__param||function(D,z){return function(P,I){z(P,I,D)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;let u=s(3787),c=s(2550),f=s(2223),h=s(6171),p=s(6052),d=s(4725),m=s(8055),g=s(8460),v=s(844),b=s(2585),y="xterm-dom-renderer-owner-",x="xterm-rows",S="xterm-fg-",_="xterm-bg-",w="xterm-focus",k="xterm-selection",A=1,M=o.DomRenderer=class extends v.Disposable{constructor(D,z,P,I,N,H,T,O,L,q,X,ne,ke){super(),this._terminal=D,this._document=z,this._element=P,this._screenElement=I,this._viewportElement=N,this._helperContainer=H,this._linkifier2=T,this._charSizeService=L,this._optionsService=q,this._bufferService=X,this._coreBrowserService=ne,this._themeService=ke,this._terminalClass=A++,this._rowElements=[],this._selectionRenderModel=(0,p.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new g.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(x),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(k),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,h.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((Ee=>this._injectCss(Ee)))),this._injectCss(this._themeService.colors),this._rowFactory=O.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((Ee=>this._handleLinkHover(Ee)))),this.register(this._linkifier2.onHideLinkUnderline((Ee=>this._handleLinkLeave(Ee)))),this.register((0,v.toDisposable)((()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new c.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let P of this._rowElements)P.style.width=`${this.dimensions.css.canvas.width}px`,P.style.height=`${this.dimensions.css.cell.height}px`,P.style.lineHeight=`${this.dimensions.css.cell.height}px`,P.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let z=`${this._terminalSelector} .${x} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=z,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let z=`${this._terminalSelector} .${x} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;z+=`${this._terminalSelector} .${x} .xterm-dim { color: ${m.color.multiplyOpacity(D.foreground,.5).css};}`,z+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let P=`blink_underline_${this._terminalClass}`,I=`blink_bar_${this._terminalClass}`,N=`blink_block_${this._terminalClass}`;z+=`@keyframes ${P} { 50% {  border-bottom-style: hidden; }}`,z+=`@keyframes ${I} { 50% {  box-shadow: none; }}`,z+=`@keyframes ${N} { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,z+=`${this._terminalSelector} .${x}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${P} 1s step-end infinite;}${this._terminalSelector} .${x}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${I} 1s step-end infinite;}${this._terminalSelector} .${x}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${N} 1s step-end infinite;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${D.cursor.css} !important; color: ${D.cursorAccent.css} !important;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${x} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,z+=`${this._terminalSelector} .${k} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(let[H,T]of D.ansi.entries())z+=`${this._terminalSelector} .${S}${H} { color: ${T.css}; }${this._terminalSelector} .${S}${H}.xterm-dim { color: ${m.color.multiplyOpacity(T,.5).css}; }${this._terminalSelector} .${_}${H} { background-color: ${T.css}; }`;z+=`${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR} { color: ${m.color.opaque(D.background).css}; }${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${m.color.multiplyOpacity(m.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${_}${f.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=z}_setDefaultSpacing(){let D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,z){for(let P=this._rowElements.length;P<=z;P++){let I=this._document.createElement("div");this._rowContainer.appendChild(I),this._rowElements.push(I)}for(;this._rowElements.length>z;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,z){this._refreshRowElements(D,z),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(w),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(w),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,z,P){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,z,P),this.renderRows(0,this._bufferService.rows-1),!D||!z)return;this._selectionRenderModel.update(this._terminal,D,z,P);let I=this._selectionRenderModel.viewportStartRow,N=this._selectionRenderModel.viewportEndRow,H=this._selectionRenderModel.viewportCappedStartRow,T=this._selectionRenderModel.viewportCappedEndRow;if(H>=this._bufferService.rows||T<0)return;let O=this._document.createDocumentFragment();if(P){let L=D[0]>z[0];O.appendChild(this._createSelectionElement(H,L?z[0]:D[0],L?D[0]:z[0],T-H+1))}else{let L=I===H?D[0]:0,q=H===N?z[0]:this._bufferService.cols;O.appendChild(this._createSelectionElement(H,L,q));let X=T-H-1;if(O.appendChild(this._createSelectionElement(H+1,0,this._bufferService.cols,X)),H!==T){let ne=N===T?z[0]:this._bufferService.cols;O.appendChild(this._createSelectionElement(T,0,ne))}}this._selectionContainer.appendChild(O)}_createSelectionElement(D,z,P,I=1){let N=this._document.createElement("div"),H=z*this.dimensions.css.cell.width,T=this.dimensions.css.cell.width*(P-z);return H+T>this.dimensions.css.canvas.width&&(T=this.dimensions.css.canvas.width-H),N.style.height=I*this.dimensions.css.cell.height+"px",N.style.top=D*this.dimensions.css.cell.height+"px",N.style.left=`${H}px`,N.style.width=`${T}px`,N}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let D of this._rowElements)D.replaceChildren()}renderRows(D,z){let P=this._bufferService.buffer,I=P.ybase+P.y,N=Math.min(P.x,this._bufferService.cols-1),H=this._optionsService.rawOptions.cursorBlink,T=this._optionsService.rawOptions.cursorStyle,O=this._optionsService.rawOptions.cursorInactiveStyle;for(let L=D;L<=z;L++){let q=L+P.ydisp,X=this._rowElements[L],ne=P.lines.get(q);if(!X||!ne)break;X.replaceChildren(...this._rowFactory.createRow(ne,q,q===I,T,O,N,H,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,z,P,I,N,H){P<0&&(D=0),I<0&&(z=0);let T=this._bufferService.rows-1;P=Math.max(Math.min(P,T),0),I=Math.max(Math.min(I,T),0),N=Math.min(N,this._bufferService.cols);let O=this._bufferService.buffer,L=O.ybase+O.y,q=Math.min(O.x,N-1),X=this._optionsService.rawOptions.cursorBlink,ne=this._optionsService.rawOptions.cursorStyle,ke=this._optionsService.rawOptions.cursorInactiveStyle;for(let Ee=P;Ee<=I;++Ee){let G=Ee+O.ydisp,B=this._rowElements[Ee],le=O.lines.get(G);if(!B||!le)break;B.replaceChildren(...this._rowFactory.createRow(le,G,G===L,ne,ke,q,X,this.dimensions.css.cell.width,this._widthCache,H?Ee===P?D:0:-1,H?(Ee===I?z:N)-1:-1))}}};o.DomRenderer=M=a([l(7,b.IInstantiationService),l(8,d.ICharSizeService),l(9,b.IOptionsService),l(10,b.IBufferService),l(11,d.ICoreBrowserService),l(12,d.IThemeService)],M)},3787:function(n,o,s){var a=this&&this.__decorate||function(x,S,_,w){var k,A=arguments.length,M=A<3?S:w===null?w=Object.getOwnPropertyDescriptor(S,_):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(x,S,_,w);else for(var D=x.length-1;D>=0;D--)(k=x[D])&&(M=(A<3?k(M):A>3?k(S,_,M):k(S,_))||M);return A>3&&M&&Object.defineProperty(S,_,M),M},l=this&&this.__param||function(x,S){return function(_,w){S(_,w,x)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;let u=s(2223),c=s(643),f=s(511),h=s(2585),p=s(8055),d=s(4725),m=s(4269),g=s(6171),v=s(3734),b=o.DomRendererRowFactory=class{constructor(x,S,_,w,k,A,M){this._document=x,this._characterJoinerService=S,this._optionsService=_,this._coreBrowserService=w,this._coreService=k,this._decorationService=A,this._themeService=M,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,S,_){this._selectionStart=x,this._selectionEnd=S,this._columnSelectMode=_}createRow(x,S,_,w,k,A,M,D,z,P,I){let N=[],H=this._characterJoinerService.getJoinedCharacters(S),T=this._themeService.colors,O,L=x.getNoBgTrimmedLength();_&&L<A+1&&(L=A+1);let q=0,X="",ne=0,ke=0,Ee=0,G=!1,B=0,le=!1,pe=0,re=[],ue=P!==-1&&I!==-1;for(let Re=0;Re<L;Re++){x.loadCell(Re,this._workCell);let fe=this._workCell.getWidth();if(fe===0)continue;let mt=!1,ot=Re,ze=this._workCell;if(H.length>0&&Re===H[0][0]){mt=!0;let Er=H.shift();ze=new m.JoinedCellData(this._workCell,x.translateToString(!0,Er[0],Er[1]),Er[1]-Er[0]),ot=Er[1]-1,fe=ze.getWidth()}let ir=this._isCellInSelection(Re,S),ki=_&&Re===A,Xo=ue&&Re>=P&&Re<=I,Ic=!1;this._decorationService.forEachDecorationAtCell(Re,S,void 0,(Er=>{Ic=!0}));let U2=ze.getChars()||c.WHITESPACE_CELL_CHAR;if(U2===" "&&(ze.isUnderline()||ze.isOverline())&&(U2="\xA0"),pe=fe*D-z.get(U2,ze.isBold(),ze.isItalic()),O){if(q&&(ir&&le||!ir&&!le&&ze.bg===ne)&&(ir&&le&&T.selectionForeground||ze.fg===ke)&&ze.extended.ext===Ee&&Xo===G&&pe===B&&!ki&&!mt&&!Ic){ze.isInvisible()?X+=c.WHITESPACE_CELL_CHAR:X+=U2,q++;continue}q&&(O.textContent=X),O=this._document.createElement("span"),q=0,X=""}else O=this._document.createElement("span");if(ne=ze.bg,ke=ze.fg,Ee=ze.extended.ext,G=Xo,B=pe,le=ir,mt&&A>=Re&&A<=ot&&(A=Re),!this._coreService.isCursorHidden&&ki&&this._coreService.isCursorInitialized){if(re.push("xterm-cursor"),this._coreBrowserService.isFocused)M&&re.push("xterm-cursor-blink"),re.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(k)switch(k){case"outline":re.push("xterm-cursor-outline");break;case"block":re.push("xterm-cursor-block");break;case"bar":re.push("xterm-cursor-bar");break;case"underline":re.push("xterm-cursor-underline")}}if(ze.isBold()&&re.push("xterm-bold"),ze.isItalic()&&re.push("xterm-italic"),ze.isDim()&&re.push("xterm-dim"),X=ze.isInvisible()?c.WHITESPACE_CELL_CHAR:ze.getChars()||c.WHITESPACE_CELL_CHAR,ze.isUnderline()&&(re.push(`xterm-underline-${ze.extended.underlineStyle}`),X===" "&&(X="\xA0"),!ze.isUnderlineColorDefault()))if(ze.isUnderlineColorRGB())O.style.textDecorationColor=`rgb(${v.AttributeData.toColorRGB(ze.getUnderlineColor()).join(",")})`;else{let Er=ze.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ze.isBold()&&Er<8&&(Er+=8),O.style.textDecorationColor=T.ansi[Er].css}ze.isOverline()&&(re.push("xterm-overline"),X===" "&&(X="\xA0")),ze.isStrikethrough()&&re.push("xterm-strikethrough"),Xo&&(O.style.textDecoration="underline");let xs=ze.getFgColor(),zg=ze.getFgColorMode(),al=ze.getBgColor(),Hg=ze.getBgColorMode(),y7=!!ze.isInverse();if(y7){let Er=xs;xs=al,al=Er;let hie=zg;zg=Hg,Hg=hie}let Nc,q2,Bc,Ug=!1;switch(this._decorationService.forEachDecorationAtCell(Re,S,void 0,(Er=>{Er.options.layer!=="top"&&Ug||(Er.backgroundColorRGB&&(Hg=50331648,al=Er.backgroundColorRGB.rgba>>8&16777215,Nc=Er.backgroundColorRGB),Er.foregroundColorRGB&&(zg=50331648,xs=Er.foregroundColorRGB.rgba>>8&16777215,q2=Er.foregroundColorRGB),Ug=Er.options.layer==="top")})),!Ug&&ir&&(Nc=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,al=Nc.rgba>>8&16777215,Hg=50331648,Ug=!0,T.selectionForeground&&(zg=50331648,xs=T.selectionForeground.rgba>>8&16777215,q2=T.selectionForeground)),Ug&&re.push("xterm-decoration-top"),Hg){case 16777216:case 33554432:Bc=T.ansi[al],re.push(`xterm-bg-${al}`);break;case 50331648:Bc=p.channels.toColor(al>>16,al>>8&255,255&al),this._addStyle(O,`background-color:#${y((al>>>0).toString(16),"0",6)}`);break;default:y7?(Bc=T.foreground,re.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):Bc=T.background}switch(Nc||ze.isDim()&&(Nc=p.color.multiplyOpacity(Bc,.5)),zg){case 16777216:case 33554432:ze.isBold()&&xs<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(xs+=8),this._applyMinimumContrast(O,Bc,T.ansi[xs],ze,Nc,void 0)||re.push(`xterm-fg-${xs}`);break;case 50331648:let Er=p.channels.toColor(xs>>16&255,xs>>8&255,255&xs);this._applyMinimumContrast(O,Bc,Er,ze,Nc,q2)||this._addStyle(O,`color:#${y(xs.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(O,Bc,T.foreground,ze,Nc,q2)||y7&&re.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}re.length&&(O.className=re.join(" "),re.length=0),ki||mt||Ic?O.textContent=X:q++,pe!==this.defaultSpacing&&(O.style.letterSpacing=`${pe}px`),N.push(O),Re=ot}return O&&q&&(O.textContent=X),N}_applyMinimumContrast(x,S,_,w,k,A){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,g.treatGlyphAsBackgroundColor)(w.getCode()))return!1;let M=this._getContrastCache(w),D;if(k||A||(D=M.getColor(S.rgba,_.rgba)),D===void 0){let z=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);D=p.color.ensureContrastRatio(k||S,A||_,z),M.setColor((k||S).rgba,(A||_).rgba,D??null)}return!!D&&(this._addStyle(x,`color:${D.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,S){x.setAttribute("style",`${x.getAttribute("style")||""}${S};`)}_isCellInSelection(x,S){let _=this._selectionStart,w=this._selectionEnd;return!(!_||!w)&&(this._columnSelectMode?_[0]<=w[0]?x>=_[0]&&S>=_[1]&&x<w[0]&&S<=w[1]:x<_[0]&&S>=_[1]&&x>=w[0]&&S<=w[1]:S>_[1]&&S<w[1]||_[1]===w[1]&&S===_[1]&&x>=_[0]&&x<w[0]||_[1]<w[1]&&S===w[1]&&x<w[0]||_[1]<w[1]&&S===_[1]&&x>=_[0])}};function y(x,S,_){for(;x.length<_;)x=S+x;return x}o.DomRendererRowFactory=b=a([l(1,d.ICharacterJoinerService),l(2,h.IOptionsService),l(3,d.ICoreBrowserService),l(4,h.ICoreService),l(5,h.IDecorationService),l(6,d.IThemeService)],b)},2550:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(s,a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=s.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let l=s.createElement("span");l.classList.add("xterm-char-measure-element");let u=s.createElement("span");u.classList.add("xterm-char-measure-element"),u.style.fontWeight="bold";let c=s.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontStyle="italic";let f=s.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold",f.style.fontStyle="italic",this._measureElements=[l,u,c,f],this._container.appendChild(l),this._container.appendChild(u),this._container.appendChild(c),this._container.appendChild(f),a.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(s,a,l,u){s===this._font&&a===this._fontSize&&l===this._weight&&u===this._weightBold||(this._font=s,this._fontSize=a,this._weight=l,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${l}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${l}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(s,a,l){let u=0;if(!a&&!l&&s.length===1&&(u=s.charCodeAt(0))<256){if(this._flat[u]!==-9999)return this._flat[u];let h=this._measure(s,0);return h>0&&(this._flat[u]=h),h}let c=s;a&&(c+="B"),l&&(c+="I");let f=this._holey.get(c);if(f===void 0){let h=0;a&&(h|=1),l&&(h|=2),f=this._measure(s,h),f>0&&this._holey.set(c,f)}return f}_measure(s,a){let l=this._measureElements[a];return l.textContent=s.repeat(32),l.offsetWidth/32}}},2223:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;let a=s(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(n,o)=>{function s(l){return 57508<=l&&l<=57558}function a(l){return l>=128512&&l<=128591||l>=127744&&l<=128511||l>=128640&&l<=128767||l>=9728&&l<=9983||l>=9984&&l<=10175||l>=65024&&l<=65039||l>=129280&&l<=129535||l>=127462&&l<=127487}Object.defineProperty(o,"__esModule",{value:!0}),o.computeNextVariantOffset=o.createRenderDimensions=o.treatGlyphAsBackgroundColor=o.allowRescaling=o.isEmoji=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},o.isPowerlineGlyph=s,o.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},o.isEmoji=a,o.allowRescaling=function(l,u,c,f){return u===1&&c>Math.ceil(1.5*f)&&l!==void 0&&l>255&&!a(l)&&!s(l)&&!(function(h){return 57344<=h&&h<=63743})(l)},o.treatGlyphAsBackgroundColor=function(l){return s(l)||(function(u){return 9472<=u&&u<=9631})(l)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},o.computeNextVariantOffset=function(l,u,c=0){return(l-(2*Math.round(u)-c))%(2*Math.round(u))}},6052:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createSelectionRenderModel=void 0;class s{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(l,u,c,f=!1){if(this.selectionStart=u,this.selectionEnd=c,!u||!c||u[0]===c[0]&&u[1]===c[1])return void this.clear();let h=l.buffers.active.ydisp,p=u[1]-h,d=c[1]-h,m=Math.max(p,0),g=Math.min(d,l.rows-1);m>=l.rows||g<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=p,this.viewportEndRow=d,this.viewportCappedStartRow=m,this.viewportCappedEndRow=g,this.startCol=u[0],this.endCol=c[0])}isCellSelected(l,u,c){return!!this.hasSelection&&(c-=l.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&c>=this.viewportCappedStartRow&&u<this.endCol&&c<=this.viewportCappedEndRow:u<this.startCol&&c>=this.viewportCappedStartRow&&u>=this.endCol&&c<=this.viewportCappedEndRow:c>this.viewportStartRow&&c<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&c===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&c===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&c===this.viewportStartRow&&u>=this.startCol)}}o.createSelectionRenderModel=function(){return new s}},456:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(s){this._bufferService=s,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let s=this.selectionStart[0]+this.selectionStartLength;return s>this._bufferService.cols?s%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(s/this._bufferService.cols)-1]:[s%this._bufferService.cols,this.selectionStart[1]+Math.floor(s/this._bufferService.cols)]:[s,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let s=this.selectionStart[0]+this.selectionStartLength;return s>this._bufferService.cols?[s%this._bufferService.cols,this.selectionStart[1]+Math.floor(s/this._bufferService.cols)]:[Math.max(s,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let s=this.selectionStart,a=this.selectionEnd;return!(!s||!a)&&(s[1]>a[1]||s[1]===a[1]&&s[0]>a[0])}handleTrim(s){return this.selectionStart&&(this.selectionStart[1]-=s),this.selectionEnd&&(this.selectionEnd[1]-=s),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(n,o,s){var a=this&&this.__decorate||function(g,v,b,y){var x,S=arguments.length,_=S<3?v:y===null?y=Object.getOwnPropertyDescriptor(v,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(g,v,b,y);else for(var w=g.length-1;w>=0;w--)(x=g[w])&&(_=(S<3?x(_):S>3?x(v,b,_):x(v,b))||_);return S>3&&_&&Object.defineProperty(v,b,_),_},l=this&&this.__param||function(g,v){return function(b,y){v(b,y,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;let u=s(2585),c=s(8460),f=s(844),h=o.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(g,v,b){super(),this._optionsService=b,this.width=0,this.height=0,this._onCharSizeChange=this.register(new c.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new m(this._optionsService))}catch{this._measureStrategy=this.register(new d(g,v,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){let g=this._measureStrategy.measure();g.width===this.width&&g.height===this.height||(this.width=g.width,this.height=g.height,this._onCharSizeChange.fire())}};o.CharSizeService=h=a([l(2,u.IOptionsService)],h);class p extends f.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(v,b){v!==void 0&&v>0&&b!==void 0&&b>0&&(this._result.width=v,this._result.height=b)}}class d extends p{constructor(v,b,y){super(),this._document=v,this._parentElement=b,this._optionsService=y,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class m extends p{constructor(v){super(),this._optionsService=v,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let b=this._ctx.measureText("W");if(!("width"in b&&"fontBoundingBoxAscent"in b&&"fontBoundingBoxDescent"in b))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let v=this._ctx.measureText("W");return this._validateAndSet(v.width,v.fontBoundingBoxAscent+v.fontBoundingBoxDescent),this._result}}},4269:function(n,o,s){var a=this&&this.__decorate||function(m,g,v,b){var y,x=arguments.length,S=x<3?g:b===null?b=Object.getOwnPropertyDescriptor(g,v):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,g,v,b);else for(var _=m.length-1;_>=0;_--)(y=m[_])&&(S=(x<3?y(S):x>3?y(g,v,S):y(g,v))||S);return x>3&&S&&Object.defineProperty(g,v,S),S},l=this&&this.__param||function(m,g){return function(v,b){g(v,b,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;let u=s(3734),c=s(643),f=s(511),h=s(2585);class p extends u.AttributeData{constructor(g,v,b){super(),this.content=0,this.combinedData="",this.fg=g.fg,this.bg=g.bg,this.combinedData=v,this._width=b}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(g){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=p;let d=o.CharacterJoinerService=class _J{constructor(g){this._bufferService=g,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(g){let v={id:this._nextCharacterJoinerId++,handler:g};return this._characterJoiners.push(v),v.id}deregister(g){for(let v=0;v<this._characterJoiners.length;v++)if(this._characterJoiners[v].id===g)return this._characterJoiners.splice(v,1),!0;return!1}getJoinedCharacters(g){if(this._characterJoiners.length===0)return[];let v=this._bufferService.buffer.lines.get(g);if(!v||v.length===0)return[];let b=[],y=v.translateToString(!0),x=0,S=0,_=0,w=v.getFg(0),k=v.getBg(0);for(let A=0;A<v.getTrimmedLength();A++)if(v.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==k){if(A-x>1){let M=this._getJoinedRanges(y,_,S,v,x);for(let D=0;D<M.length;D++)b.push(M[D])}x=A,_=S,w=this._workCell.fg,k=this._workCell.bg}S+=this._workCell.getChars().length||c.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){let A=this._getJoinedRanges(y,_,S,v,x);for(let M=0;M<A.length;M++)b.push(A[M])}return b}_getJoinedRanges(g,v,b,y,x){let S=g.substring(v,b),_=[];try{_=this._characterJoiners[0].handler(S)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let k=this._characterJoiners[w].handler(S);for(let A=0;A<k.length;A++)_J._mergeRanges(_,k[A])}catch(k){console.error(k)}return this._stringRangesToCellRanges(_,y,x),_}_stringRangesToCellRanges(g,v,b){let y=0,x=!1,S=0,_=g[y];if(_){for(let w=b;w<this._bufferService.cols;w++){let k=v.getWidth(w),A=v.getString(w).length||c.WHITESPACE_CELL_CHAR.length;if(k!==0){if(!x&&_[0]<=S&&(_[0]=w,x=!0),_[1]<=S){if(_[1]=w,_=g[++y],!_)break;_[0]<=S?(_[0]=w,x=!0):x=!1}S+=A}}_&&(_[1]=this._bufferService.cols)}}static _mergeRanges(g,v){let b=!1;for(let y=0;y<g.length;y++){let x=g[y];if(b){if(v[1]<=x[0])return g[y-1][1]=v[1],g;if(v[1]<=x[1])return g[y-1][1]=Math.max(v[1],x[1]),g.splice(y,1),g;g.splice(y,1),y--}else{if(v[1]<=x[0])return g.splice(y,0,v),g;if(v[1]<=x[1])return x[0]=Math.min(v[0],x[0]),g;v[0]<x[1]&&(x[0]=Math.min(v[0],x[0]),b=!0)}}return b?g[g.length-1][1]=v[1]:g.push(v),g}};o.CharacterJoinerService=d=a([l(0,h.IBufferService)],d)},5114:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0;let a=s(844),l=s(8460),u=s(3656);class c extends a.Disposable{constructor(p,d,m){super(),this._textarea=p,this._window=d,this.mainDocument=m,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new f(this._window),this._onDprChange=this.register(new l.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new l.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((g=>this._screenDprMonitor.setWindow(g)))),this.register((0,l.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(p){this._window!==p&&(this._window=p,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}o.CoreBrowserService=c;class f extends a.Disposable{constructor(p){super(),this._parentWindow=p,this._windowResizeListener=this.register(new a.MutableDisposable),this._onDprChange=this.register(new l.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,a.toDisposable)((()=>this.clearListener())))}setWindow(p){this._parentWindow=p,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,u.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkProviderService=void 0;let a=s(844);class l extends a.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,a.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(c){return this.linkProviders.push(c),{dispose:()=>{let f=this.linkProviders.indexOf(c);f!==-1&&this.linkProviders.splice(f,1)}}}}o.LinkProviderService=l},8934:function(n,o,s){var a=this&&this.__decorate||function(h,p,d,m){var g,v=arguments.length,b=v<3?p:m===null?m=Object.getOwnPropertyDescriptor(p,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(h,p,d,m);else for(var y=h.length-1;y>=0;y--)(g=h[y])&&(b=(v<3?g(b):v>3?g(p,d,b):g(p,d))||b);return v>3&&b&&Object.defineProperty(p,d,b),b},l=this&&this.__param||function(h,p){return function(d,m){p(d,m,h)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;let u=s(4725),c=s(9806),f=o.MouseService=class{constructor(h,p){this._renderService=h,this._charSizeService=p}getCoords(h,p,d,m,g){return(0,c.getCoords)(window,h,p,d,m,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,g)}getMouseReportCoords(h,p){let d=(0,c.getCoordsRelativeToElement)(window,h,p);if(this._charSizeService.hasValidSize)return d[0]=Math.min(Math.max(d[0],0),this._renderService.dimensions.css.canvas.width-1),d[1]=Math.min(Math.max(d[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(d[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(d[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(d[0]),y:Math.floor(d[1])}}};o.MouseService=f=a([l(0,u.IRenderService),l(1,u.ICharSizeService)],f)},3230:function(n,o,s){var a=this&&this.__decorate||function(g,v,b,y){var x,S=arguments.length,_=S<3?v:y===null?y=Object.getOwnPropertyDescriptor(v,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(g,v,b,y);else for(var w=g.length-1;w>=0;w--)(x=g[w])&&(_=(S<3?x(_):S>3?x(v,b,_):x(v,b))||_);return S>3&&_&&Object.defineProperty(v,b,_),_},l=this&&this.__param||function(g,v){return function(b,y){v(b,y,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;let u=s(6193),c=s(4725),f=s(8460),h=s(844),p=s(7226),d=s(2585),m=o.RenderService=class extends h.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,v,b,y,x,S,_,w){super(),this._rowCount=g,this._charSizeService=y,this._renderer=this.register(new h.MutableDisposable),this._pausedResizeTask=new p.DebouncedIdleTask,this._observerDisposable=this.register(new h.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new u.RenderDebouncer(((k,A)=>this._renderRows(k,A)),_),this.register(this._renderDebouncer),this.register(_.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(S.onResize((()=>this._fullRefresh()))),this.register(S.buffers.onBufferActivate((()=>this._renderer.value?.clear()))),this.register(b.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(x.onDecorationRegistered((()=>this._fullRefresh()))),this.register(x.onDecorationRemoved((()=>this._fullRefresh()))),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(S.cols,S.rows),this._fullRefresh()}))),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(S.buffer.y,S.buffer.y,!0)))),this.register(w.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(_.window,v),this.register(_.onWindowChange((k=>this._registerIntersectionObserver(k,v))))}_registerIntersectionObserver(g,v){if("IntersectionObserver"in g){let b=new g.IntersectionObserver((y=>this._handleIntersectionChange(y[y.length-1])),{threshold:0});b.observe(v),this._observerDisposable.value=(0,h.toDisposable)((()=>b.disconnect()))}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,v,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,v,this._rowCount))}_renderRows(g,v){this._renderer.value&&(g=Math.min(g,this._rowCount-1),v=Math.min(v,this._rowCount-1),this._renderer.value.renderRows(g,v),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:v}),this._onRender.fire({start:g,end:v}),this._isNextRenderRedrawOnly=!0)}resize(g,v){this._rowCount=v,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value&&(this._renderer.value.onRequestRedraw((v=>this.refreshRows(v.start,v.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,v){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value?.handleResize(g,v))):this._renderer.value.handleResize(g,v),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(g,v,b){this._selectionState.start=g,this._selectionState.end=v,this._selectionState.columnSelectMode=b,this._renderer.value?.handleSelectionChanged(g,v,b)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};o.RenderService=m=a([l(2,d.IOptionsService),l(3,c.ICharSizeService),l(4,d.IDecorationService),l(5,d.IBufferService),l(6,c.ICoreBrowserService),l(7,c.IThemeService)],m)},9312:function(n,o,s){var a=this&&this.__decorate||function(_,w,k,A){var M,D=arguments.length,z=D<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,k):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(_,w,k,A);else for(var P=_.length-1;P>=0;P--)(M=_[P])&&(z=(D<3?M(z):D>3?M(w,k,z):M(w,k))||z);return D>3&&z&&Object.defineProperty(w,k,z),z},l=this&&this.__param||function(_,w){return function(k,A){w(k,A,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;let u=s(9806),c=s(9504),f=s(456),h=s(4725),p=s(8460),d=s(844),m=s(6114),g=s(4841),v=s(511),b=s(2585),y="\xA0",x=new RegExp(y,"g"),S=o.SelectionService=class extends d.Disposable{constructor(_,w,k,A,M,D,z,P,I){super(),this._element=_,this._screenElement=w,this._linkifier=k,this._bufferService=A,this._coreService=M,this._mouseService=D,this._optionsService=z,this._renderService=P,this._coreBrowserService=I,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new v.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new p.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new p.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new p.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=N=>this._handleMouseMove(N),this._mouseUpListener=N=>this._handleMouseUp(N),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((N=>this._handleTrim(N))),this.register(this._bufferService.buffers.onBufferActivate((N=>this._handleBufferActivate(N)))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,d.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let _=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!_||!w||_[0]===w[0]&&_[1]===w[1])}get selectionText(){let _=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!_||!w)return"";let k=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(_[0]===w[0])return"";let M=_[0]<w[0]?_[0]:w[0],D=_[0]<w[0]?w[0]:_[0];for(let z=_[1];z<=w[1];z++){let P=k.translateBufferLineToString(z,!0,M,D);A.push(P)}}else{let M=_[1]===w[1]?w[0]:void 0;A.push(k.translateBufferLineToString(_[1],!0,_[0],M));for(let D=_[1]+1;D<=w[1]-1;D++){let z=k.lines.get(D),P=k.translateBufferLineToString(D,!0);z?.isWrapped?A[A.length-1]+=P:A.push(P)}if(_[1]!==w[1]){let D=k.lines.get(w[1]),z=k.translateBufferLineToString(w[1],!0,0,w[0]);D&&D.isWrapped?A[A.length-1]+=z:A.push(z)}}return A.map((M=>M.replace(x," "))).join(m.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(_){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),m.isLinux&&_&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(_){let w=this._getMouseBufferCoords(_),k=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!!(k&&A&&w)&&this._areCoordsInSelection(w,k,A)}isCellInSelection(_,w){let k=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!k||!A)&&this._areCoordsInSelection([_,w],k,A)}_areCoordsInSelection(_,w,k){return _[1]>w[1]&&_[1]<k[1]||w[1]===k[1]&&_[1]===w[1]&&_[0]>=w[0]&&_[0]<k[0]||w[1]<k[1]&&_[1]===k[1]&&_[0]<k[0]||w[1]<k[1]&&_[1]===w[1]&&_[0]>=w[0]}_selectWordAtCursor(_,w){let k=this._linkifier.currentLink?.link?.range;if(k)return this._model.selectionStart=[k.start.x-1,k.start.y-1],this._model.selectionStartLength=(0,g.getRangeLength)(k,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let A=this._getMouseBufferCoords(_);return!!A&&(this._selectWordAt(A,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(_,w){this._model.clearSelection(),_=Math.max(_,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,_],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(_){this._model.handleTrim(_)&&this.refresh()}_getMouseBufferCoords(_){let w=this._mouseService.getCoords(_,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(_){let w=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,_,this._screenElement)[1],k=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=k?0:(w>k&&(w-=k),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(_){return m.isMac?_.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:_.shiftKey}handleMouseDown(_){if(this._mouseDownTimeStamp=_.timeStamp,(_.button!==2||!this.hasSelection)&&_.button===0){if(!this._enabled){if(!this.shouldForceSelection(_))return;_.stopPropagation()}_.preventDefault(),this._dragScrollAmount=0,this._enabled&&_.shiftKey?this._handleIncrementalClick(_):_.detail===1?this._handleSingleClick(_):_.detail===2?this._handleDoubleClick(_):_.detail===3&&this._handleTripleClick(_),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(_){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(_))}_handleSingleClick(_){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(_)?3:0,this._model.selectionStart=this._getMouseBufferCoords(_),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(_){this._selectWordAtCursor(_,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(_){let w=this._getMouseBufferCoords(_);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(_){return _.altKey&&!(m.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(_){if(_.stopImmediatePropagation(),!this._model.selectionStart)return;let w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(_),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(_),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let k=this._bufferService.buffer;if(this._model.selectionEnd[1]<k.lines.length){let A=k.lines.get(this._model.selectionEnd[1]);A&&A.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let _=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(_.ydisp+this._bufferService.rows,_.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=_.ydisp),this.refresh()}}_handleMouseUp(_){let w=_.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&_.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let k=this._mouseService.getCoords(_,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(k&&k[0]!==void 0&&k[1]!==void 0){let A=(0,c.moveToCellSequence)(k[0]-1,k[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(A,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let _=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,k=!(!_||!w||_[0]===w[0]&&_[1]===w[1]);k?_&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&_[0]===this._oldSelectionStart[0]&&_[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(_,w,k)):this._oldHasSelection&&this._fireOnSelectionChange(_,w,k)}_fireOnSelectionChange(_,w,k){this._oldSelectionStart=_,this._oldSelectionEnd=w,this._oldHasSelection=k,this._onSelectionChange.fire()}_handleBufferActivate(_){this.clearSelection(),this._trimListener.dispose(),this._trimListener=_.activeBuffer.lines.onTrim((w=>this._handleTrim(w)))}_convertViewportColToCharacterIndex(_,w){let k=w;for(let A=0;w>=A;A++){let M=_.loadCell(A,this._workCell).getChars().length;this._workCell.getWidth()===0?k--:M>1&&w!==A&&(k+=M-1)}return k}setSelection(_,w,k){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[_,w],this._model.selectionStartLength=k,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(_){this._isClickInSelection(_)||(this._selectWordAtCursor(_,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(_,w,k=!0,A=!0){if(_[0]>=this._bufferService.cols)return;let M=this._bufferService.buffer,D=M.lines.get(_[1]);if(!D)return;let z=M.translateBufferLineToString(_[1],!1),P=this._convertViewportColToCharacterIndex(D,_[0]),I=P,N=_[0]-P,H=0,T=0,O=0,L=0;if(z.charAt(P)===" "){for(;P>0&&z.charAt(P-1)===" ";)P--;for(;I<z.length&&z.charAt(I+1)===" ";)I++}else{let ne=_[0],ke=_[0];D.getWidth(ne)===0&&(H++,ne--),D.getWidth(ke)===2&&(T++,ke++);let Ee=D.getString(ke).length;for(Ee>1&&(L+=Ee-1,I+=Ee-1);ne>0&&P>0&&!this._isCharWordSeparator(D.loadCell(ne-1,this._workCell));){D.loadCell(ne-1,this._workCell);let G=this._workCell.getChars().length;this._workCell.getWidth()===0?(H++,ne--):G>1&&(O+=G-1,P-=G-1),P--,ne--}for(;ke<D.length&&I+1<z.length&&!this._isCharWordSeparator(D.loadCell(ke+1,this._workCell));){D.loadCell(ke+1,this._workCell);let G=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,ke++):G>1&&(L+=G-1,I+=G-1),I++,ke++}}I++;let q=P+N-H+O,X=Math.min(this._bufferService.cols,I-P+H+T-O-L);if(w||z.slice(P,I).trim()!==""){if(k&&q===0&&D.getCodePoint(0)!==32){let ne=M.lines.get(_[1]-1);if(ne&&D.isWrapped&&ne.getCodePoint(this._bufferService.cols-1)!==32){let ke=this._getWordAt([this._bufferService.cols-1,_[1]-1],!1,!0,!1);if(ke){let Ee=this._bufferService.cols-ke.start;q-=Ee,X+=Ee}}}if(A&&q+X===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){let ne=M.lines.get(_[1]+1);if(ne?.isWrapped&&ne.getCodePoint(0)!==32){let ke=this._getWordAt([0,_[1]+1],!1,!1,!0);ke&&(X+=ke.length)}}return{start:q,length:X}}}_selectWordAt(_,w){let k=this._getWordAt(_,w);if(k){for(;k.start<0;)k.start+=this._bufferService.cols,_[1]--;this._model.selectionStart=[k.start,_[1]],this._model.selectionStartLength=k.length}}_selectToWordAt(_){let w=this._getWordAt(_,!0);if(w){let k=_[1];for(;w.start<0;)w.start+=this._bufferService.cols,k--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,k++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,k]}}_isCharWordSeparator(_){return _.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(_.getChars())>=0}_selectLineAt(_){let w=this._bufferService.buffer.getWrappedRangeForLine(_),k={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,g.getRangeLength)(k,this._bufferService.cols)}};o.SelectionService=S=a([l(3,b.IBufferService),l(4,b.ICoreService),l(5,h.IMouseService),l(6,b.IOptionsService),l(7,h.IRenderService),l(8,h.ICoreBrowserService)],S)},4725:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ILinkProviderService=o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;let a=s(8343);o.ICharSizeService=(0,a.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),o.IMouseService=(0,a.createDecorator)("MouseService"),o.IRenderService=(0,a.createDecorator)("RenderService"),o.ISelectionService=(0,a.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,a.createDecorator)("ThemeService"),o.ILinkProviderService=(0,a.createDecorator)("LinkProviderService")},6731:function(n,o,s){var a=this&&this.__decorate||function(S,_,w,k){var A,M=arguments.length,D=M<3?_:k===null?k=Object.getOwnPropertyDescriptor(_,w):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(S,_,w,k);else for(var z=S.length-1;z>=0;z--)(A=S[z])&&(D=(M<3?A(D):M>3?A(_,w,D):A(_,w))||D);return M>3&&D&&Object.defineProperty(_,w,D),D},l=this&&this.__param||function(S,_){return function(w,k){_(w,k,S)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;let u=s(7239),c=s(8055),f=s(8460),h=s(844),p=s(2585),d=c.css.toColor("#ffffff"),m=c.css.toColor("#000000"),g=c.css.toColor("#ffffff"),v=c.css.toColor("#000000"),b={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let S=[c.css.toColor("#2e3436"),c.css.toColor("#cc0000"),c.css.toColor("#4e9a06"),c.css.toColor("#c4a000"),c.css.toColor("#3465a4"),c.css.toColor("#75507b"),c.css.toColor("#06989a"),c.css.toColor("#d3d7cf"),c.css.toColor("#555753"),c.css.toColor("#ef2929"),c.css.toColor("#8ae234"),c.css.toColor("#fce94f"),c.css.toColor("#729fcf"),c.css.toColor("#ad7fa8"),c.css.toColor("#34e2e2"),c.css.toColor("#eeeeec")],_=[0,95,135,175,215,255];for(let w=0;w<216;w++){let k=_[w/36%6|0],A=_[w/6%6|0],M=_[w%6];S.push({css:c.channels.toCss(k,A,M),rgba:c.channels.toRgba(k,A,M)})}for(let w=0;w<24;w++){let k=8+10*w;S.push({css:c.channels.toCss(k,k,k),rgba:c.channels.toRgba(k,k,k)})}return S})());let y=o.ThemeService=class extends h.Disposable{get colors(){return this._colors}constructor(S){super(),this._optionsService=S,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:d,background:m,cursor:g,cursorAccent:v,selectionForeground:void 0,selectionBackgroundTransparent:b,selectionBackgroundOpaque:c.color.blend(m,b),selectionInactiveBackgroundTransparent:b,selectionInactiveBackgroundOpaque:c.color.blend(m,b),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(S={}){let _=this._colors;if(_.foreground=x(S.foreground,d),_.background=x(S.background,m),_.cursor=x(S.cursor,g),_.cursorAccent=x(S.cursorAccent,v),_.selectionBackgroundTransparent=x(S.selectionBackground,b),_.selectionBackgroundOpaque=c.color.blend(_.background,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundTransparent=x(S.selectionInactiveBackground,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundOpaque=c.color.blend(_.background,_.selectionInactiveBackgroundTransparent),_.selectionForeground=S.selectionForeground?x(S.selectionForeground,c.NULL_COLOR):void 0,_.selectionForeground===c.NULL_COLOR&&(_.selectionForeground=void 0),c.color.isOpaque(_.selectionBackgroundTransparent)&&(_.selectionBackgroundTransparent=c.color.opacity(_.selectionBackgroundTransparent,.3)),c.color.isOpaque(_.selectionInactiveBackgroundTransparent)&&(_.selectionInactiveBackgroundTransparent=c.color.opacity(_.selectionInactiveBackgroundTransparent,.3)),_.ansi=o.DEFAULT_ANSI_COLORS.slice(),_.ansi[0]=x(S.black,o.DEFAULT_ANSI_COLORS[0]),_.ansi[1]=x(S.red,o.DEFAULT_ANSI_COLORS[1]),_.ansi[2]=x(S.green,o.DEFAULT_ANSI_COLORS[2]),_.ansi[3]=x(S.yellow,o.DEFAULT_ANSI_COLORS[3]),_.ansi[4]=x(S.blue,o.DEFAULT_ANSI_COLORS[4]),_.ansi[5]=x(S.magenta,o.DEFAULT_ANSI_COLORS[5]),_.ansi[6]=x(S.cyan,o.DEFAULT_ANSI_COLORS[6]),_.ansi[7]=x(S.white,o.DEFAULT_ANSI_COLORS[7]),_.ansi[8]=x(S.brightBlack,o.DEFAULT_ANSI_COLORS[8]),_.ansi[9]=x(S.brightRed,o.DEFAULT_ANSI_COLORS[9]),_.ansi[10]=x(S.brightGreen,o.DEFAULT_ANSI_COLORS[10]),_.ansi[11]=x(S.brightYellow,o.DEFAULT_ANSI_COLORS[11]),_.ansi[12]=x(S.brightBlue,o.DEFAULT_ANSI_COLORS[12]),_.ansi[13]=x(S.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),_.ansi[14]=x(S.brightCyan,o.DEFAULT_ANSI_COLORS[14]),_.ansi[15]=x(S.brightWhite,o.DEFAULT_ANSI_COLORS[15]),S.extendedAnsi){let w=Math.min(_.ansi.length-16,S.extendedAnsi.length);for(let k=0;k<w;k++)_.ansi[k+16]=x(S.extendedAnsi[k],o.DEFAULT_ANSI_COLORS[k+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(S){this._restoreColor(S),this._onChangeColors.fire(this.colors)}_restoreColor(S){if(S!==void 0)switch(S){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[S]=this._restoreColors.ansi[S]}else for(let _=0;_<this._restoreColors.ansi.length;++_)this._colors.ansi[_]=this._restoreColors.ansi[_]}modifyColors(S){S(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(S,_){if(S!==void 0)try{return c.css.toColor(S)}catch{}return _}o.ThemeService=y=a([l(0,p.IOptionsService)],y)},6349:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;let a=s(8460),l=s(844);class u extends l.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;let h=new Array(f);for(let p=0;p<Math.min(f,this.length);p++)h[p]=this._array[this._getCyclicIndex(p)];this._array=h,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let h=this._length;h<f;h++)this._array[h]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,h){this._array[this._getCyclicIndex(f)]=h}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,h,...p){if(h){for(let d=f;d<this._length-h;d++)this._array[this._getCyclicIndex(d)]=this._array[this._getCyclicIndex(d+h)];this._length-=h,this.onDeleteEmitter.fire({index:f,amount:h})}for(let d=this._length-1;d>=f;d--)this._array[this._getCyclicIndex(d+p.length)]=this._array[this._getCyclicIndex(d)];for(let d=0;d<p.length;d++)this._array[this._getCyclicIndex(f+d)]=p[d];if(p.length&&this.onInsertEmitter.fire({index:f,amount:p.length}),this._length+p.length>this._maxLength){let d=this._length+p.length-this._maxLength;this._startIndex+=d,this._length=this._maxLength,this.onTrimEmitter.fire(d)}else this._length+=p.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,h,p){if(!(h<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+p<0)throw new Error("Cannot shift elements in list beyond index 0");if(p>0){for(let m=h-1;m>=0;m--)this.set(f+m+p,this.get(f+m));let d=f+h+p-this._length;if(d>0)for(this._length+=d;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let d=0;d<h;d++)this.set(f+d+p,this.get(f+d))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}o.CircularList=u},1439:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function s(a,l=5){if(typeof a!="object")return a;let u=Array.isArray(a)?[]:{};for(let c in a)u[c]=l<=1?a[c]:a[c]&&s(a[c],l-1);return u}},8055:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;let s=0,a=0,l=0,u=0;var c,f,h,p,d;function m(v){let b=v.toString(16);return b.length<2?"0"+b:b}function g(v,b){return v<b?(b+.05)/(v+.05):(v+.05)/(b+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},(function(v){v.toCss=function(b,y,x,S){return S!==void 0?`#${m(b)}${m(y)}${m(x)}${m(S)}`:`#${m(b)}${m(y)}${m(x)}`},v.toRgba=function(b,y,x,S=255){return(b<<24|y<<16|x<<8|S)>>>0},v.toColor=function(b,y,x,S){return{css:v.toCss(b,y,x,S),rgba:v.toRgba(b,y,x,S)}}})(c||(o.channels=c={})),(function(v){function b(y,x){return u=Math.round(255*x),[s,a,l]=d.toChannels(y.rgba),{css:c.toCss(s,a,l,u),rgba:c.toRgba(s,a,l,u)}}v.blend=function(y,x){if(u=(255&x.rgba)/255,u===1)return{css:x.css,rgba:x.rgba};let S=x.rgba>>24&255,_=x.rgba>>16&255,w=x.rgba>>8&255,k=y.rgba>>24&255,A=y.rgba>>16&255,M=y.rgba>>8&255;return s=k+Math.round((S-k)*u),a=A+Math.round((_-A)*u),l=M+Math.round((w-M)*u),{css:c.toCss(s,a,l),rgba:c.toRgba(s,a,l)}},v.isOpaque=function(y){return(255&y.rgba)==255},v.ensureContrastRatio=function(y,x,S){let _=d.ensureContrastRatio(y.rgba,x.rgba,S);if(_)return c.toColor(_>>24&255,_>>16&255,_>>8&255)},v.opaque=function(y){let x=(255|y.rgba)>>>0;return[s,a,l]=d.toChannels(x),{css:c.toCss(s,a,l),rgba:x}},v.opacity=b,v.multiplyOpacity=function(y,x){return u=255&y.rgba,b(y,u*x/255)},v.toColorRGB=function(y){return[y.rgba>>24&255,y.rgba>>16&255,y.rgba>>8&255]}})(f||(o.color=f={})),(function(v){let b,y;try{let x=document.createElement("canvas");x.width=1,x.height=1;let S=x.getContext("2d",{willReadFrequently:!0});S&&(b=S,b.globalCompositeOperation="copy",y=b.createLinearGradient(0,0,1,1))}catch{}v.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return s=parseInt(x.slice(1,2).repeat(2),16),a=parseInt(x.slice(2,3).repeat(2),16),l=parseInt(x.slice(3,4).repeat(2),16),c.toColor(s,a,l);case 5:return s=parseInt(x.slice(1,2).repeat(2),16),a=parseInt(x.slice(2,3).repeat(2),16),l=parseInt(x.slice(3,4).repeat(2),16),u=parseInt(x.slice(4,5).repeat(2),16),c.toColor(s,a,l,u);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}let S=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(S)return s=parseInt(S[1]),a=parseInt(S[2]),l=parseInt(S[3]),u=Math.round(255*(S[5]===void 0?1:parseFloat(S[5]))),c.toColor(s,a,l,u);if(!b||!y)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=y,b.fillStyle=x,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[s,a,l,u]=b.getImageData(0,0,1,1).data,u!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:c.toRgba(s,a,l,u),css:x}}})(h||(o.css=h={})),(function(v){function b(y,x,S){let _=y/255,w=x/255,k=S/255;return .2126*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))}v.relativeLuminance=function(y){return b(y>>16&255,y>>8&255,255&y)},v.relativeLuminance2=b})(p||(o.rgb=p={})),(function(v){function b(x,S,_){let w=x>>24&255,k=x>>16&255,A=x>>8&255,M=S>>24&255,D=S>>16&255,z=S>>8&255,P=g(p.relativeLuminance2(M,D,z),p.relativeLuminance2(w,k,A));for(;P<_&&(M>0||D>0||z>0);)M-=Math.max(0,Math.ceil(.1*M)),D-=Math.max(0,Math.ceil(.1*D)),z-=Math.max(0,Math.ceil(.1*z)),P=g(p.relativeLuminance2(M,D,z),p.relativeLuminance2(w,k,A));return(M<<24|D<<16|z<<8|255)>>>0}function y(x,S,_){let w=x>>24&255,k=x>>16&255,A=x>>8&255,M=S>>24&255,D=S>>16&255,z=S>>8&255,P=g(p.relativeLuminance2(M,D,z),p.relativeLuminance2(w,k,A));for(;P<_&&(M<255||D<255||z<255);)M=Math.min(255,M+Math.ceil(.1*(255-M))),D=Math.min(255,D+Math.ceil(.1*(255-D))),z=Math.min(255,z+Math.ceil(.1*(255-z))),P=g(p.relativeLuminance2(M,D,z),p.relativeLuminance2(w,k,A));return(M<<24|D<<16|z<<8|255)>>>0}v.blend=function(x,S){if(u=(255&S)/255,u===1)return S;let _=S>>24&255,w=S>>16&255,k=S>>8&255,A=x>>24&255,M=x>>16&255,D=x>>8&255;return s=A+Math.round((_-A)*u),a=M+Math.round((w-M)*u),l=D+Math.round((k-D)*u),c.toRgba(s,a,l)},v.ensureContrastRatio=function(x,S,_){let w=p.relativeLuminance(x>>8),k=p.relativeLuminance(S>>8);if(g(w,k)<_){if(k<w){let D=b(x,S,_),z=g(w,p.relativeLuminance(D>>8));if(z<_){let P=y(x,S,_);return z>g(w,p.relativeLuminance(P>>8))?D:P}return D}let A=y(x,S,_),M=g(w,p.relativeLuminance(A>>8));if(M<_){let D=b(x,S,_);return M>g(w,p.relativeLuminance(D>>8))?A:D}return A}},v.reduceLuminance=b,v.increaseLuminance=y,v.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]}})(d||(o.rgba=d={})),o.toPaddedHex=m,o.contrastRatio=g},8969:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;let a=s(844),l=s(2585),u=s(4348),c=s(7866),f=s(744),h=s(7302),p=s(6975),d=s(8460),m=s(1753),g=s(1480),v=s(7994),b=s(9282),y=s(5435),x=s(5981),S=s(2660),_=!1;class w extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new d.EventEmitter),this._onScroll.event((A=>{this._onScrollApi?.fire(A.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(A){for(let M in A)this.optionsService.options[M]=A[M]}constructor(A){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new d.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new d.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new d.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new h.OptionsService(A)),this._instantiationService.setService(l.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(l.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(c.LogService)),this._instantiationService.setService(l.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(p.CoreService)),this._instantiationService.setService(l.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(m.CoreMouseService)),this._instantiationService.setService(l.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(g.UnicodeService)),this._instantiationService.setService(l.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(v.CharsetService),this._instantiationService.setService(l.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(S.OscLinkService),this._instantiationService.setService(l.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new y.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,d.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,d.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,d.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,d.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((M=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((M=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new x.WriteBuffer(((M,D)=>this._inputHandler.parse(M,D)))),this.register((0,d.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(A,M){this._writeBuffer.write(A,M)}writeSync(A,M){this._logService.logLevel<=l.LogLevelEnum.WARN&&!_&&(this._logService.warn("writeSync is unreliable and will be removed soon."),_=!0),this._writeBuffer.writeSync(A,M)}input(A,M=!0){this.coreService.triggerDataEvent(A,M)}resize(A,M){isNaN(A)||isNaN(M)||(A=Math.max(A,f.MINIMUM_COLS),M=Math.max(M,f.MINIMUM_ROWS),this._bufferService.resize(A,M))}scroll(A,M=!1){this._bufferService.scroll(A,M)}scrollLines(A,M,D){this._bufferService.scrollLines(A,M,D)}scrollPages(A){this.scrollLines(A*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(A){let M=A-this._bufferService.buffer.ydisp;M!==0&&this.scrollLines(M)}registerEscHandler(A,M){return this._inputHandler.registerEscHandler(A,M)}registerDcsHandler(A,M){return this._inputHandler.registerDcsHandler(A,M)}registerCsiHandler(A,M){return this._inputHandler.registerCsiHandler(A,M)}registerOscHandler(A,M){return this._inputHandler.registerOscHandler(A,M)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let A=!1,M=this.optionsService.rawOptions.windowsPty;M&&M.buildNumber!==void 0&&M.buildNumber!==void 0?A=M.backend==="conpty"&&M.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(A=!0),A?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let A=[];A.push(this.onLineFeed(b.updateWindowsModeWrappedState.bind(null,this._bufferService))),A.push(this.registerCsiHandler({final:"H"},(()=>((0,b.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)((()=>{for(let M of A)M.dispose()}))}}}o.CoreTerminal=w},8460:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.runAndSubscribe=o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=s=>(this._listeners.push(s),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===s)return void this._listeners.splice(a,1)}}})),this._event}fire(s,a){let l=[];for(let u=0;u<this._listeners.length;u++)l.push(this._listeners[u]);for(let u=0;u<l.length;u++)l[u].call(void 0,s,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(s,a){return s((l=>a.fire(l)))},o.runAndSubscribe=function(s,a){return a(void 0),s((l=>a(l)))}},5435:function(n,o,s){var a=this&&this.__decorate||function(H,T,O,L){var q,X=arguments.length,ne=X<3?T:L===null?L=Object.getOwnPropertyDescriptor(T,O):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ne=Reflect.decorate(H,T,O,L);else for(var ke=H.length-1;ke>=0;ke--)(q=H[ke])&&(ne=(X<3?q(ne):X>3?q(T,O,ne):q(T,O))||ne);return X>3&&ne&&Object.defineProperty(T,O,ne),ne},l=this&&this.__param||function(H,T){return function(O,L){T(O,L,H)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;let u=s(2584),c=s(7116),f=s(2015),h=s(844),p=s(482),d=s(8437),m=s(8460),g=s(643),v=s(511),b=s(3734),y=s(2585),x=s(1480),S=s(6242),_=s(6351),w=s(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},A=131072;function M(H,T){if(H>24)return T.setWinLines||!1;switch(H){case 1:return!!T.restoreWin;case 2:return!!T.minimizeWin;case 3:return!!T.setWinPosition;case 4:return!!T.setWinSizePixels;case 5:return!!T.raiseWin;case 6:return!!T.lowerWin;case 7:return!!T.refreshWin;case 8:return!!T.setWinSizeChars;case 9:return!!T.maximizeWin;case 10:return!!T.fullscreenWin;case 11:return!!T.getWinState;case 13:return!!T.getWinPosition;case 14:return!!T.getWinSizePixels;case 15:return!!T.getScreenSizePixels;case 16:return!!T.getCellSizePixels;case 18:return!!T.getWinSizeChars;case 19:return!!T.getScreenSizeChars;case 20:return!!T.getIconTitle;case 21:return!!T.getWinTitle;case 22:return!!T.pushTitle;case 23:return!!T.popTitle;case 24:return!!T.setWinLines}return!1}var D;(function(H){H[H.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",H[H.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(o.WindowsOptionsReportType=D={}));let z=0;class P extends h.Disposable{getAttrData(){return this._curAttrData}constructor(T,O,L,q,X,ne,ke,Ee,G=new f.EscapeSequenceParser){super(),this._bufferService=T,this._charsetService=O,this._coreService=L,this._logService=q,this._optionsService=X,this._oscLinkService=ne,this._coreMouseService=ke,this._unicodeService=Ee,this._parser=G,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new p.StringToUtf32,this._utf8Decoder=new p.Utf8ToUtf32,this._workCell=new v.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new m.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new m.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new m.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new m.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new m.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new m.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new m.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new m.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new m.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new m.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new m.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new m.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new m.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new I(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((B=>this._activeBuffer=B.activeBuffer))),this._parser.setCsiHandlerFallback(((B,le)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(B),params:le.toArray()})})),this._parser.setEscHandlerFallback((B=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(B)})})),this._parser.setExecuteHandlerFallback((B=>{this._logService.debug("Unknown EXECUTE code: ",{code:B})})),this._parser.setOscHandlerFallback(((B,le,pe)=>{this._logService.debug("Unknown OSC code: ",{identifier:B,action:le,data:pe})})),this._parser.setDcsHandlerFallback(((B,le,pe)=>{le==="HOOK"&&(pe=pe.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(B),action:le,payload:pe})})),this._parser.setPrintHandler(((B,le,pe)=>this.print(B,le,pe))),this._parser.registerCsiHandler({final:"@"},(B=>this.insertChars(B))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(B=>this.scrollLeft(B))),this._parser.registerCsiHandler({final:"A"},(B=>this.cursorUp(B))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(B=>this.scrollRight(B))),this._parser.registerCsiHandler({final:"B"},(B=>this.cursorDown(B))),this._parser.registerCsiHandler({final:"C"},(B=>this.cursorForward(B))),this._parser.registerCsiHandler({final:"D"},(B=>this.cursorBackward(B))),this._parser.registerCsiHandler({final:"E"},(B=>this.cursorNextLine(B))),this._parser.registerCsiHandler({final:"F"},(B=>this.cursorPrecedingLine(B))),this._parser.registerCsiHandler({final:"G"},(B=>this.cursorCharAbsolute(B))),this._parser.registerCsiHandler({final:"H"},(B=>this.cursorPosition(B))),this._parser.registerCsiHandler({final:"I"},(B=>this.cursorForwardTab(B))),this._parser.registerCsiHandler({final:"J"},(B=>this.eraseInDisplay(B,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(B=>this.eraseInDisplay(B,!0))),this._parser.registerCsiHandler({final:"K"},(B=>this.eraseInLine(B,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(B=>this.eraseInLine(B,!0))),this._parser.registerCsiHandler({final:"L"},(B=>this.insertLines(B))),this._parser.registerCsiHandler({final:"M"},(B=>this.deleteLines(B))),this._parser.registerCsiHandler({final:"P"},(B=>this.deleteChars(B))),this._parser.registerCsiHandler({final:"S"},(B=>this.scrollUp(B))),this._parser.registerCsiHandler({final:"T"},(B=>this.scrollDown(B))),this._parser.registerCsiHandler({final:"X"},(B=>this.eraseChars(B))),this._parser.registerCsiHandler({final:"Z"},(B=>this.cursorBackwardTab(B))),this._parser.registerCsiHandler({final:"`"},(B=>this.charPosAbsolute(B))),this._parser.registerCsiHandler({final:"a"},(B=>this.hPositionRelative(B))),this._parser.registerCsiHandler({final:"b"},(B=>this.repeatPrecedingCharacter(B))),this._parser.registerCsiHandler({final:"c"},(B=>this.sendDeviceAttributesPrimary(B))),this._parser.registerCsiHandler({prefix:">",final:"c"},(B=>this.sendDeviceAttributesSecondary(B))),this._parser.registerCsiHandler({final:"d"},(B=>this.linePosAbsolute(B))),this._parser.registerCsiHandler({final:"e"},(B=>this.vPositionRelative(B))),this._parser.registerCsiHandler({final:"f"},(B=>this.hVPosition(B))),this._parser.registerCsiHandler({final:"g"},(B=>this.tabClear(B))),this._parser.registerCsiHandler({final:"h"},(B=>this.setMode(B))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(B=>this.setModePrivate(B))),this._parser.registerCsiHandler({final:"l"},(B=>this.resetMode(B))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(B=>this.resetModePrivate(B))),this._parser.registerCsiHandler({final:"m"},(B=>this.charAttributes(B))),this._parser.registerCsiHandler({final:"n"},(B=>this.deviceStatus(B))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(B=>this.deviceStatusPrivate(B))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(B=>this.softReset(B))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(B=>this.setCursorStyle(B))),this._parser.registerCsiHandler({final:"r"},(B=>this.setScrollRegion(B))),this._parser.registerCsiHandler({final:"s"},(B=>this.saveCursor(B))),this._parser.registerCsiHandler({final:"t"},(B=>this.windowOptions(B))),this._parser.registerCsiHandler({final:"u"},(B=>this.restoreCursor(B))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(B=>this.insertColumns(B))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(B=>this.deleteColumns(B))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(B=>this.selectProtected(B))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(B=>this.requestMode(B,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(B=>this.requestMode(B,!1))),this._parser.setExecuteHandler(u.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(u.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(u.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(u.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(u.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(u.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(u.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(u.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(u.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(u.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(u.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(u.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new S.OscHandler((B=>(this.setTitle(B),this.setIconName(B),!0)))),this._parser.registerOscHandler(1,new S.OscHandler((B=>this.setIconName(B)))),this._parser.registerOscHandler(2,new S.OscHandler((B=>this.setTitle(B)))),this._parser.registerOscHandler(4,new S.OscHandler((B=>this.setOrReportIndexedColor(B)))),this._parser.registerOscHandler(8,new S.OscHandler((B=>this.setHyperlink(B)))),this._parser.registerOscHandler(10,new S.OscHandler((B=>this.setOrReportFgColor(B)))),this._parser.registerOscHandler(11,new S.OscHandler((B=>this.setOrReportBgColor(B)))),this._parser.registerOscHandler(12,new S.OscHandler((B=>this.setOrReportCursorColor(B)))),this._parser.registerOscHandler(104,new S.OscHandler((B=>this.restoreIndexedColor(B)))),this._parser.registerOscHandler(110,new S.OscHandler((B=>this.restoreFgColor(B)))),this._parser.registerOscHandler(111,new S.OscHandler((B=>this.restoreBgColor(B)))),this._parser.registerOscHandler(112,new S.OscHandler((B=>this.restoreCursorColor(B)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(let B in c.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:B},(()=>this.selectCharset("("+B))),this._parser.registerEscHandler({intermediates:")",final:B},(()=>this.selectCharset(")"+B))),this._parser.registerEscHandler({intermediates:"*",final:B},(()=>this.selectCharset("*"+B))),this._parser.registerEscHandler({intermediates:"+",final:B},(()=>this.selectCharset("+"+B))),this._parser.registerEscHandler({intermediates:"-",final:B},(()=>this.selectCharset("-"+B))),this._parser.registerEscHandler({intermediates:".",final:B},(()=>this.selectCharset("."+B))),this._parser.registerEscHandler({intermediates:"/",final:B},(()=>this.selectCharset("/"+B)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((B=>(this._logService.error("Parsing error: ",B),B))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new _.DcsHandler(((B,le)=>this.requestStatusString(B,le))))}_preserveStack(T,O,L,q){this._parseStack.paused=!0,this._parseStack.cursorStartX=T,this._parseStack.cursorStartY=O,this._parseStack.decodedLength=L,this._parseStack.position=q}_logSlowResolvingAsync(T){this._logService.logLevel<=y.LogLevelEnum.WARN&&Promise.race([T,new Promise(((O,L)=>setTimeout((()=>L("#SLOW_TIMEOUT")),5e3)))]).catch((O=>{if(O!=="#SLOW_TIMEOUT")throw O;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(T,O){let L,q=this._activeBuffer.x,X=this._activeBuffer.y,ne=0,ke=this._parseStack.paused;if(ke){if(L=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,O))return this._logSlowResolvingAsync(L),L;q=this._parseStack.cursorStartX,X=this._parseStack.cursorStartY,this._parseStack.paused=!1,T.length>A&&(ne=this._parseStack.position+A)}if(this._logService.logLevel<=y.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof T=="string"?` "${T}"`:` "${Array.prototype.map.call(T,(B=>String.fromCharCode(B))).join("")}"`),typeof T=="string"?T.split("").map((B=>B.charCodeAt(0))):T),this._parseBuffer.length<T.length&&this._parseBuffer.length<A&&(this._parseBuffer=new Uint32Array(Math.min(T.length,A))),ke||this._dirtyRowTracker.clearRange(),T.length>A)for(let B=ne;B<T.length;B+=A){let le=B+A<T.length?B+A:T.length,pe=typeof T=="string"?this._stringDecoder.decode(T.substring(B,le),this._parseBuffer):this._utf8Decoder.decode(T.subarray(B,le),this._parseBuffer);if(L=this._parser.parse(this._parseBuffer,pe))return this._preserveStack(q,X,pe,B),this._logSlowResolvingAsync(L),L}else if(!ke){let B=typeof T=="string"?this._stringDecoder.decode(T,this._parseBuffer):this._utf8Decoder.decode(T,this._parseBuffer);if(L=this._parser.parse(this._parseBuffer,B))return this._preserveStack(q,X,B,0),this._logSlowResolvingAsync(L),L}this._activeBuffer.x===q&&this._activeBuffer.y===X||this._onCursorMove.fire();let Ee=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),G=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);G<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(G,this._bufferService.rows-1),Math.min(Ee,this._bufferService.rows-1))}print(T,O,L){let q,X,ne=this._charsetService.charset,ke=this._optionsService.rawOptions.screenReaderMode,Ee=this._bufferService.cols,G=this._coreService.decPrivateModes.wraparound,B=this._coreService.modes.insertMode,le=this._curAttrData,pe=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&L-O>0&&pe.getWidth(this._activeBuffer.x-1)===2&&pe.setCellFromCodepoint(this._activeBuffer.x-1,0,1,le);let re=this._parser.precedingJoinState;for(let ue=O;ue<L;++ue){if(q=T[ue],q<127&&ne){let ot=ne[String.fromCharCode(q)];ot&&(q=ot.charCodeAt(0))}let Re=this._unicodeService.charProperties(q,re);X=x.UnicodeService.extractWidth(Re);let fe=x.UnicodeService.extractShouldJoin(Re),mt=fe?x.UnicodeService.extractWidth(re):0;if(re=Re,ke&&this._onA11yChar.fire((0,p.stringFromCodePoint)(q)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+X-mt>Ee){if(G){let ot=pe,ze=this._activeBuffer.x-mt;for(this._activeBuffer.x=mt,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),pe=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),mt>0&&pe instanceof d.BufferLine&&pe.copyCellsFrom(ot,ze,0,mt,!1);ze<Ee;)ot.setCellFromCodepoint(ze++,0,1,le)}else if(this._activeBuffer.x=Ee-1,X===2)continue}if(fe&&this._activeBuffer.x){let ot=pe.getWidth(this._activeBuffer.x-1)?1:2;pe.addCodepointToCell(this._activeBuffer.x-ot,q,X);for(let ze=X-mt;--ze>=0;)pe.setCellFromCodepoint(this._activeBuffer.x++,0,0,le)}else if(B&&(pe.insertCells(this._activeBuffer.x,X-mt,this._activeBuffer.getNullCell(le)),pe.getWidth(Ee-1)===2&&pe.setCellFromCodepoint(Ee-1,g.NULL_CELL_CODE,g.NULL_CELL_WIDTH,le)),pe.setCellFromCodepoint(this._activeBuffer.x++,q,X,le),X>0)for(;--X;)pe.setCellFromCodepoint(this._activeBuffer.x++,0,0,le)}this._parser.precedingJoinState=re,this._activeBuffer.x<Ee&&L-O>0&&pe.getWidth(this._activeBuffer.x)===0&&!pe.hasContent(this._activeBuffer.x)&&pe.setCellFromCodepoint(this._activeBuffer.x,0,1,le),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(T,O){return T.final!=="t"||T.prefix||T.intermediates?this._parser.registerCsiHandler(T,O):this._parser.registerCsiHandler(T,(L=>!M(L.params[0],this._optionsService.rawOptions.windowOptions)||O(L)))}registerDcsHandler(T,O){return this._parser.registerDcsHandler(T,new _.DcsHandler(O))}registerEscHandler(T,O){return this._parser.registerEscHandler(T,O)}registerOscHandler(T,O){return this._parser.registerOscHandler(T,new S.OscHandler(O))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-T),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(T=this._bufferService.cols-1){this._activeBuffer.x=Math.min(T,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(T,O){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=T,this._activeBuffer.y=this._activeBuffer.scrollTop+O):(this._activeBuffer.x=T,this._activeBuffer.y=O),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(T,O){this._restrictCursor(),this._setCursor(this._activeBuffer.x+T,this._activeBuffer.y+O)}cursorUp(T){let O=this._activeBuffer.y-this._activeBuffer.scrollTop;return O>=0?this._moveCursor(0,-Math.min(O,T.params[0]||1)):this._moveCursor(0,-(T.params[0]||1)),!0}cursorDown(T){let O=this._activeBuffer.scrollBottom-this._activeBuffer.y;return O>=0?this._moveCursor(0,Math.min(O,T.params[0]||1)):this._moveCursor(0,T.params[0]||1),!0}cursorForward(T){return this._moveCursor(T.params[0]||1,0),!0}cursorBackward(T){return this._moveCursor(-(T.params[0]||1),0),!0}cursorNextLine(T){return this.cursorDown(T),this._activeBuffer.x=0,!0}cursorPrecedingLine(T){return this.cursorUp(T),this._activeBuffer.x=0,!0}cursorCharAbsolute(T){return this._setCursor((T.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(T){return this._setCursor(T.length>=2?(T.params[1]||1)-1:0,(T.params[0]||1)-1),!0}charPosAbsolute(T){return this._setCursor((T.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(T){return this._moveCursor(T.params[0]||1,0),!0}linePosAbsolute(T){return this._setCursor(this._activeBuffer.x,(T.params[0]||1)-1),!0}vPositionRelative(T){return this._moveCursor(0,T.params[0]||1),!0}hVPosition(T){return this.cursorPosition(T),!0}tabClear(T){let O=T.params[0];return O===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:O===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(T){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=T.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(T){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=T.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(T){let O=T.params[0];return O===1&&(this._curAttrData.bg|=536870912),O!==2&&O!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(T,O,L,q=!1,X=!1){let ne=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);ne.replaceCells(O,L,this._activeBuffer.getNullCell(this._eraseAttrData()),X),q&&(ne.isWrapped=!1)}_resetBufferLine(T,O=!1){let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);L&&(L.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),O),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+T),L.isWrapped=!1)}eraseInDisplay(T,O=!1){let L;switch(this._restrictCursor(this._bufferService.cols),T.params[0]){case 0:for(L=this._activeBuffer.y,this._dirtyRowTracker.markDirty(L),this._eraseInBufferLine(L++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);L<this._bufferService.rows;L++)this._resetBufferLine(L,O);this._dirtyRowTracker.markDirty(L);break;case 1:for(L=this._activeBuffer.y,this._dirtyRowTracker.markDirty(L),this._eraseInBufferLine(L,0,this._activeBuffer.x+1,!0,O),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(L+1).isWrapped=!1);L--;)this._resetBufferLine(L,O);this._dirtyRowTracker.markDirty(0);break;case 2:for(L=this._bufferService.rows,this._dirtyRowTracker.markDirty(L-1);L--;)this._resetBufferLine(L,O);this._dirtyRowTracker.markDirty(0);break;case 3:let q=this._activeBuffer.lines.length-this._bufferService.rows;q>0&&(this._activeBuffer.lines.trimStart(q),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-q,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-q,0),this._onScroll.fire(0))}return!0}eraseInLine(T,O=!1){switch(this._restrictCursor(this._bufferService.cols),T.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,O);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,O)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(T){this._restrictCursor();let O=T.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let L=this._activeBuffer.ybase+this._activeBuffer.y,q=this._bufferService.rows-1-this._activeBuffer.scrollBottom,X=this._bufferService.rows-1+this._activeBuffer.ybase-q+1;for(;O--;)this._activeBuffer.lines.splice(X-1,1),this._activeBuffer.lines.splice(L,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(T){this._restrictCursor();let O=T.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let L=this._activeBuffer.ybase+this._activeBuffer.y,q;for(q=this._bufferService.rows-1-this._activeBuffer.scrollBottom,q=this._bufferService.rows-1+this._activeBuffer.ybase-q;O--;)this._activeBuffer.lines.splice(L,1),this._activeBuffer.lines.splice(q,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(T){this._restrictCursor();let O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.insertCells(this._activeBuffer.x,T.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(T){this._restrictCursor();let O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.deleteCells(this._activeBuffer.x,T.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(T){let O=T.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(T){let O=T.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(d.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let O=T.params[0]||1;for(let L=this._activeBuffer.scrollTop;L<=this._activeBuffer.scrollBottom;++L){let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);q.deleteCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData())),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let O=T.params[0]||1;for(let L=this._activeBuffer.scrollTop;L<=this._activeBuffer.scrollBottom;++L){let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);q.insertCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData())),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let O=T.params[0]||1;for(let L=this._activeBuffer.scrollTop;L<=this._activeBuffer.scrollBottom;++L){let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);q.insertCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData())),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let O=T.params[0]||1;for(let L=this._activeBuffer.scrollTop;L<=this._activeBuffer.scrollBottom;++L){let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);q.deleteCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData())),q.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(T){this._restrictCursor();let O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(T.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(T){let O=this._parser.precedingJoinState;if(!O)return!0;let L=T.params[0]||1,q=x.UnicodeService.extractWidth(O),X=this._activeBuffer.x-q,ne=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(X),ke=new Uint32Array(ne.length*L),Ee=0;for(let B=0;B<ne.length;){let le=ne.codePointAt(B)||0;ke[Ee++]=le,B+=le>65535?2:1}let G=Ee;for(let B=1;B<L;++B)ke.copyWithin(G,0,Ee),G+=Ee;return this.print(ke,0,G),!0}sendDeviceAttributesPrimary(T){return T.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(T){return T.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(T.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(T){return(this._optionsService.rawOptions.termName+"").indexOf(T)===0}setMode(T){for(let O=0;O<T.length;O++)switch(T.params[O]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(T){for(let O=0;O<T.length;O++)switch(T.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,c.DEFAULT_CHARSET),this._charsetService.setgCharset(1,c.DEFAULT_CHARSET),this._charsetService.setgCharset(2,c.DEFAULT_CHARSET),this._charsetService.setgCharset(3,c.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(T){for(let O=0;O<T.length;O++)switch(T.params[O]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(T){for(let O=0;O<T.length;O++)switch(T.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),T.params[O]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(T,O){let L=this._coreService.decPrivateModes,{activeProtocol:q,activeEncoding:X}=this._coreMouseService,ne=this._coreService,{buffers:ke,cols:Ee}=this._bufferService,{active:G,alt:B}=ke,le=this._optionsService.rawOptions,pe=fe=>fe?1:2,re=T.params[0];return ue=re,Re=O?re===2?4:re===4?pe(ne.modes.insertMode):re===12?3:re===20?pe(le.convertEol):0:re===1?pe(L.applicationCursorKeys):re===3?le.windowOptions.setWinLines?Ee===80?2:Ee===132?1:0:0:re===6?pe(L.origin):re===7?pe(L.wraparound):re===8?3:re===9?pe(q==="X10"):re===12?pe(le.cursorBlink):re===25?pe(!ne.isCursorHidden):re===45?pe(L.reverseWraparound):re===66?pe(L.applicationKeypad):re===67?4:re===1e3?pe(q==="VT200"):re===1002?pe(q==="DRAG"):re===1003?pe(q==="ANY"):re===1004?pe(L.sendFocus):re===1005?4:re===1006?pe(X==="SGR"):re===1015?4:re===1016?pe(X==="SGR_PIXELS"):re===1048?1:re===47||re===1047||re===1049?pe(G===B):re===2004?pe(L.bracketedPasteMode):0,ne.triggerDataEvent(`${u.C0.ESC}[${O?"":"?"}${ue};${Re}$y`),!0;var ue,Re}_updateAttrColor(T,O,L,q,X){return O===2?(T|=50331648,T&=-16777216,T|=b.AttributeData.fromColorRGB([L,q,X])):O===5&&(T&=-50331904,T|=33554432|255&L),T}_extractColor(T,O,L){let q=[0,0,-1,0,0,0],X=0,ne=0;do{if(q[ne+X]=T.params[O+ne],T.hasSubParams(O+ne)){let ke=T.getSubParams(O+ne),Ee=0;do q[1]===5&&(X=1),q[ne+Ee+1+X]=ke[Ee];while(++Ee<ke.length&&Ee+ne+1+X<q.length);break}if(q[1]===5&&ne+X>=2||q[1]===2&&ne+X>=5)break;q[1]&&(X=1)}while(++ne+O<T.length&&ne+X<q.length);for(let ke=2;ke<q.length;++ke)q[ke]===-1&&(q[ke]=0);switch(q[0]){case 38:L.fg=this._updateAttrColor(L.fg,q[1],q[3],q[4],q[5]);break;case 48:L.bg=this._updateAttrColor(L.bg,q[1],q[3],q[4],q[5]);break;case 58:L.extended=L.extended.clone(),L.extended.underlineColor=this._updateAttrColor(L.extended.underlineColor,q[1],q[3],q[4],q[5])}return ne}_processUnderline(T,O){O.extended=O.extended.clone(),(!~T||T>5)&&(T=1),O.extended.underlineStyle=T,O.fg|=268435456,T===0&&(O.fg&=-268435457),O.updateExtended()}_processSGR0(T){T.fg=d.DEFAULT_ATTR_DATA.fg,T.bg=d.DEFAULT_ATTR_DATA.bg,T.extended=T.extended.clone(),T.extended.underlineStyle=0,T.extended.underlineColor&=-67108864,T.updateExtended()}charAttributes(T){if(T.length===1&&T.params[0]===0)return this._processSGR0(this._curAttrData),!0;let O=T.length,L,q=this._curAttrData;for(let X=0;X<O;X++)L=T.params[X],L>=30&&L<=37?(q.fg&=-50331904,q.fg|=16777216|L-30):L>=40&&L<=47?(q.bg&=-50331904,q.bg|=16777216|L-40):L>=90&&L<=97?(q.fg&=-50331904,q.fg|=16777224|L-90):L>=100&&L<=107?(q.bg&=-50331904,q.bg|=16777224|L-100):L===0?this._processSGR0(q):L===1?q.fg|=134217728:L===3?q.bg|=67108864:L===4?(q.fg|=268435456,this._processUnderline(T.hasSubParams(X)?T.getSubParams(X)[0]:1,q)):L===5?q.fg|=536870912:L===7?q.fg|=67108864:L===8?q.fg|=1073741824:L===9?q.fg|=2147483648:L===2?q.bg|=134217728:L===21?this._processUnderline(2,q):L===22?(q.fg&=-134217729,q.bg&=-134217729):L===23?q.bg&=-67108865:L===24?(q.fg&=-268435457,this._processUnderline(0,q)):L===25?q.fg&=-536870913:L===27?q.fg&=-67108865:L===28?q.fg&=-1073741825:L===29?q.fg&=2147483647:L===39?(q.fg&=-67108864,q.fg|=16777215&d.DEFAULT_ATTR_DATA.fg):L===49?(q.bg&=-67108864,q.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):L===38||L===48||L===58?X+=this._extractColor(T,X,q):L===53?q.bg|=1073741824:L===55?q.bg&=-1073741825:L===59?(q.extended=q.extended.clone(),q.extended.underlineColor=-1,q.updateExtended()):L===100?(q.fg&=-67108864,q.fg|=16777215&d.DEFAULT_ATTR_DATA.fg,q.bg&=-67108864,q.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",L);return!0}deviceStatus(T){switch(T.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:let O=this._activeBuffer.y+1,L=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${O};${L}R`)}return!0}deviceStatusPrivate(T){if(T.params[0]===6){let O=this._activeBuffer.y+1,L=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${O};${L}R`)}return!0}softReset(T){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(T){let O=T.params[0]||1;switch(O){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let L=O%2==1;return this._optionsService.options.cursorBlink=L,!0}setScrollRegion(T){let O=T.params[0]||1,L;return(T.length<2||(L=T.params[1])>this._bufferService.rows||L===0)&&(L=this._bufferService.rows),L>O&&(this._activeBuffer.scrollTop=O-1,this._activeBuffer.scrollBottom=L-1,this._setCursor(0,0)),!0}windowOptions(T){if(!M(T.params[0],this._optionsService.rawOptions.windowOptions))return!0;let O=T.length>1?T.params[1]:0;switch(T.params[0]){case 14:O!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:O!==0&&O!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),O!==0&&O!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:O!==0&&O!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),O!==0&&O!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(T){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(T){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(T){return this._windowTitle=T,this._onTitleChange.fire(T),!0}setIconName(T){return this._iconName=T,!0}setOrReportIndexedColor(T){let O=[],L=T.split(";");for(;L.length>1;){let q=L.shift(),X=L.shift();if(/^\d+$/.exec(q)){let ne=parseInt(q);if(N(ne))if(X==="?")O.push({type:0,index:ne});else{let ke=(0,w.parseColor)(X);ke&&O.push({type:1,index:ne,color:ke})}}}return O.length&&this._onColor.fire(O),!0}setHyperlink(T){let O=T.split(";");return!(O.length<2)&&(O[1]?this._createHyperlink(O[0],O[1]):!O[0]&&this._finishHyperlink())}_createHyperlink(T,O){this._getCurrentLinkId()&&this._finishHyperlink();let L=T.split(":"),q,X=L.findIndex((ne=>ne.startsWith("id=")));return X!==-1&&(q=L[X].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:q,uri:O}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(T,O){let L=T.split(";");for(let q=0;q<L.length&&!(O>=this._specialColors.length);++q,++O)if(L[q]==="?")this._onColor.fire([{type:0,index:this._specialColors[O]}]);else{let X=(0,w.parseColor)(L[q]);X&&this._onColor.fire([{type:1,index:this._specialColors[O],color:X}])}return!0}setOrReportFgColor(T){return this._setOrReportSpecialColor(T,0)}setOrReportBgColor(T){return this._setOrReportSpecialColor(T,1)}setOrReportCursorColor(T){return this._setOrReportSpecialColor(T,2)}restoreIndexedColor(T){if(!T)return this._onColor.fire([{type:2}]),!0;let O=[],L=T.split(";");for(let q=0;q<L.length;++q)if(/^\d+$/.exec(L[q])){let X=parseInt(L[q]);N(X)&&O.push({type:2,index:X})}return O.length&&this._onColor.fire(O),!0}restoreFgColor(T){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(T){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(T){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,c.DEFAULT_CHARSET),!0}selectCharset(T){return T.length!==2?(this.selectDefaultCharset(),!0):(T[0]==="/"||this._charsetService.setgCharset(k[T[0]],c.CHARSETS[T[1]]||c.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let T=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,T,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(T){return this._charsetService.setgLevel(T),!0}screenAlignmentPattern(){let T=new v.CellData;T.content=4194373,T.fg=this._curAttrData.fg,T.bg=this._curAttrData.bg,this._setCursor(0,0);for(let O=0;O<this._bufferService.rows;++O){let L=this._activeBuffer.ybase+this._activeBuffer.y+O,q=this._activeBuffer.lines.get(L);q&&(q.fill(T),q.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(T,O){let L=this._bufferService.buffer,q=this._optionsService.rawOptions;return(X=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${X}${u.C0.ESC}\\`),!0))(T==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:T==='"p'?'P1$r61;1"p':T==="r"?`P1$r${L.scrollTop+1};${L.scrollBottom+1}r`:T==="m"?"P1$r0m":T===" q"?`P1$r${{block:2,underline:4,bar:6}[q.cursorStyle]-(q.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(T,O){this._dirtyRowTracker.markRangeDirty(T,O)}}o.InputHandler=P;let I=class{constructor(H){this._bufferService=H,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(H){H<this.start?this.start=H:H>this.end&&(this.end=H)}markRangeDirty(H,T){H>T&&(z=H,H=T,T=z),H<this.start&&(this.start=H),T>this.end&&(this.end=T)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function N(H){return 0<=H&&H<256}I=a([l(0,y.IBufferService)],I)},844:(n,o)=>{function s(a){for(let l of a)l.dispose();a.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let l=this._disposables.indexOf(a);l!==-1&&this._disposables.splice(l,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){this._isDisposed||a===this._value||(this._value?.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},o.toDisposable=function(a){return{dispose:a}},o.disposeArray=s,o.getDisposeArrayDisposable=function(a){return{dispose:()=>s(a)}}},1505:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class s{constructor(){this._data={}}set(l,u,c){this._data[l]||(this._data[l]={}),this._data[l][u]=c}get(l,u){return this._data[l]?this._data[l][u]:void 0}clear(){this._data={}}}o.TwoKeyMap=s,o.FourKeyMap=class{constructor(){this._data=new s}set(a,l,u,c,f){this._data.get(a,l)||this._data.set(a,l,new s),this._data.get(a,l).set(u,c,f)}get(a,l,u,c){return this._data.get(a,l)?.get(u,c)}clear(){this._data.clear()}}},6114:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof process<"u"&&"title"in process;let s=o.isNode?"node":navigator.userAgent,a=o.isNode?"node":navigator.platform;o.isFirefox=s.includes("Firefox"),o.isLegacyEdge=s.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(s),o.getSafariVersion=function(){if(!o.isSafari)return 0;let l=s.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),o.isIpad=a==="iPad",o.isIphone=a==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),o.isLinux=a.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(s)},6106:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let s=0;o.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(s=this._search(this._getKey(a)),this._array.splice(s,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let l=this._getKey(a);if(l===void 0||(s=this._search(l),s===-1)||this._getKey(this._array[s])!==l)return!1;do if(this._array[s]===a)return this._array.splice(s,1),!0;while(++s<this._array.length&&this._getKey(this._array[s])===l);return!1}*getKeyIterator(a){if(this._array.length!==0&&(s=this._search(a),!(s<0||s>=this._array.length)&&this._getKey(this._array[s])===a))do yield this._array[s];while(++s<this._array.length&&this._getKey(this._array[s])===a)}forEachByKey(a,l){if(this._array.length!==0&&(s=this._search(a),!(s<0||s>=this._array.length)&&this._getKey(this._array[s])===a))do l(this._array[s]);while(++s<this._array.length&&this._getKey(this._array[s])===a)}values(){return[...this._array].values()}_search(a){let l=0,u=this._array.length-1;for(;u>=l;){let c=l+u>>1,f=this._getKey(this._array[c]);if(f>a)u=c-1;else{if(!(f<a)){for(;c>0&&this._getKey(this._array[c-1])===a;)c--;return c}l=c+1}}return l}}},7226:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;let a=s(6114);class l{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let h=0,p=0,d=f.timeRemaining(),m=0;for(;this._i<this._tasks.length;){if(h=Date.now(),this._tasks[this._i]()||this._i++,h=Math.max(1,Date.now()-h),p=Math.max(h,p),m=f.timeRemaining(),1.5*p>m)return d-h<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(d-h))}ms`),void this._start();d=m}this.clear()}}class u extends l{_requestCallback(f){return setTimeout((()=>f(this._createDeadline(16))))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let h=Date.now()+f;return{timeRemaining:()=>Math.max(0,h-Date.now())}}}o.PriorityTaskQueue=u,o.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(c){return requestIdleCallback(c)}_cancelCallback(c){cancelIdleCallback(c)}}:u,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(c){this._queue.clear(),this._queue.enqueue(c)}flush(){this._queue.flush()}}},9282:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;let a=s(643);o.updateWindowsModeWrappedState=function(l){let u=l.buffer.lines.get(l.buffer.ybase+l.buffer.y-1),c=u?.get(l.cols-1),f=l.buffer.lines.get(l.buffer.ybase+l.buffer.y);f&&c&&(f.isWrapped=c[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&c[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class s{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){let u=new s;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}o.AttributeData=s;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}get underlineVariantOffset(){let u=(3758096384&this._ext)>>29;return u<0?4294967288^u:u}set underlineVariantOffset(u){this._ext&=536870911,this._ext|=u<<29&3758096384}constructor(u=0,c=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=c}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=a},9092:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;let a=s(6349),l=s(7226),u=s(3734),c=s(8437),f=s(4634),h=s(511),p=s(643),d=s(4863),m=s(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(g,v,b){this._hasScrollback=g,this._optionsService=v,this._bufferService=b,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=c.DEFAULT_ATTR_DATA.clone(),this.savedCharset=m.DEFAULT_CHARSET,this.markers=[],this._nullCell=h.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),this._whitespaceCell=h.CellData.fromCharData([0,p.WHITESPACE_CELL_CHAR,p.WHITESPACE_CELL_WIDTH,p.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new l.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(g){return g?(this._nullCell.fg=g.fg,this._nullCell.bg=g.bg,this._nullCell.extended=g.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(g){return g?(this._whitespaceCell.fg=g.fg,this._whitespaceCell.bg=g.bg,this._whitespaceCell.extended=g.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(g,v){return new c.BufferLine(this._bufferService.cols,this.getNullCell(g),v)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let g=this.ybase+this.y-this.ydisp;return g>=0&&g<this._rows}_getCorrectBufferLength(g){if(!this._hasScrollback)return g;let v=g+this._optionsService.rawOptions.scrollback;return v>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:v}fillViewportRows(g){if(this.lines.length===0){g===void 0&&(g=c.DEFAULT_ATTR_DATA);let v=this._rows;for(;v--;)this.lines.push(this.getBlankLine(g))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(g,v){let b=this.getNullCell(c.DEFAULT_ATTR_DATA),y=0,x=this._getCorrectBufferLength(v);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<g)for(let _=0;_<this.lines.length;_++)y+=+this.lines.get(_).resize(g,b);let S=0;if(this._rows<v)for(let _=this._rows;_<v;_++)this.lines.length<v+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new c.BufferLine(g,b)):this.ybase>0&&this.lines.length<=this.ybase+this.y+S+1?(this.ybase--,S++,this.ydisp>0&&this.ydisp--):this.lines.push(new c.BufferLine(g,b)));else for(let _=this._rows;_>v;_--)this.lines.length>v+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){let _=this.lines.length-x;_>0&&(this.lines.trimStart(_),this.ybase=Math.max(this.ybase-_,0),this.ydisp=Math.max(this.ydisp-_,0),this.savedY=Math.max(this.savedY-_,0)),this.lines.maxLength=x}this.x=Math.min(this.x,g-1),this.y=Math.min(this.y,v-1),S&&(this.y+=S),this.savedX=Math.min(this.savedX,g-1),this.scrollTop=0}if(this.scrollBottom=v-1,this._isReflowEnabled&&(this._reflow(g,v),this._cols>g))for(let S=0;S<this.lines.length;S++)y+=+this.lines.get(S).resize(g,b);this._cols=g,this._rows=v,this._memoryCleanupQueue.clear(),y>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let g=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,g=!1);let v=0;for(;this._memoryCleanupPosition<this.lines.length;)if(v+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),v>100)return!0;return g}get _isReflowEnabled(){let g=this._optionsService.rawOptions.windowsPty;return g&&g.buildNumber?this._hasScrollback&&g.backend==="conpty"&&g.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(g,v){this._cols!==g&&(g>this._cols?this._reflowLarger(g,v):this._reflowSmaller(g,v))}_reflowLarger(g,v){let b=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,g,this.ybase+this.y,this.getNullCell(c.DEFAULT_ATTR_DATA));if(b.length>0){let y=(0,f.reflowLargerCreateNewLayout)(this.lines,b);(0,f.reflowLargerApplyNewLayout)(this.lines,y.layout),this._reflowLargerAdjustViewport(g,v,y.countRemoved)}}_reflowLargerAdjustViewport(g,v,b){let y=this.getNullCell(c.DEFAULT_ATTR_DATA),x=b;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<v&&this.lines.push(new c.BufferLine(g,y))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-b,0)}_reflowSmaller(g,v){let b=this.getNullCell(c.DEFAULT_ATTR_DATA),y=[],x=0;for(let S=this.lines.length-1;S>=0;S--){let _=this.lines.get(S);if(!_||!_.isWrapped&&_.getTrimmedLength()<=g)continue;let w=[_];for(;_.isWrapped&&S>0;)_=this.lines.get(--S),w.unshift(_);let k=this.ybase+this.y;if(k>=S&&k<S+w.length)continue;let A=w[w.length-1].getTrimmedLength(),M=(0,f.reflowSmallerGetNewLineLengths)(w,this._cols,g),D=M.length-w.length,z;z=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);let P=[];for(let L=0;L<D;L++){let q=this.getBlankLine(c.DEFAULT_ATTR_DATA,!0);P.push(q)}P.length>0&&(y.push({start:S+w.length+x,newLines:P}),x+=P.length),w.push(...P);let I=M.length-1,N=M[I];N===0&&(I--,N=M[I]);let H=w.length-D-1,T=A;for(;H>=0;){let L=Math.min(T,N);if(w[I]===void 0)break;if(w[I].copyCellsFrom(w[H],T-L,N-L,L,!0),N-=L,N===0&&(I--,N=M[I]),T-=L,T===0){H--;let q=Math.max(H,0);T=(0,f.getWrappedLineTrimmedLength)(w,q,this._cols)}}for(let L=0;L<w.length;L++)M[L]<g&&w[L].setCell(M[L],b);let O=D-z;for(;O-- >0;)this.ybase===0?this.y<v-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-v&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+v-1)}if(y.length>0){let S=[],_=[];for(let I=0;I<this.lines.length;I++)_.push(this.lines.get(I));let w=this.lines.length,k=w-1,A=0,M=y[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let D=0;for(let I=Math.min(this.lines.maxLength-1,w+x-1);I>=0;I--)if(M&&M.start>k+D){for(let N=M.newLines.length-1;N>=0;N--)this.lines.set(I--,M.newLines[N]);I++,S.push({index:k+1,amount:M.newLines.length}),D+=M.newLines.length,M=y[++A]}else this.lines.set(I,_[k--]);let z=0;for(let I=S.length-1;I>=0;I--)S[I].index+=z,this.lines.onInsertEmitter.fire(S[I]),z+=S[I].amount;let P=Math.max(0,w+x-this.lines.maxLength);P>0&&this.lines.onTrimEmitter.fire(P)}}translateBufferLineToString(g,v,b=0,y){let x=this.lines.get(g);return x?x.translateToString(v,b,y):""}getWrappedRangeForLine(g){let v=g,b=g;for(;v>0&&this.lines.get(v).isWrapped;)v--;for(;b+1<this.lines.length&&this.lines.get(b+1).isWrapped;)b++;return{first:v,last:b}}setupTabStops(g){for(g!=null?this.tabs[g]||(g=this.prevStop(g)):(this.tabs={},g=0);g<this._cols;g+=this._optionsService.rawOptions.tabStopWidth)this.tabs[g]=!0}prevStop(g){for(g==null&&(g=this.x);!this.tabs[--g]&&g>0;);return g>=this._cols?this._cols-1:g<0?0:g}nextStop(g){for(g==null&&(g=this.x);!this.tabs[++g]&&g<this._cols;);return g>=this._cols?this._cols-1:g<0?0:g}clearMarkers(g){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].line===g&&(this.markers[v].dispose(),this.markers.splice(v--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let g=0;g<this.markers.length;g++)this.markers[g].dispose(),this.markers.splice(g--,1);this._isClearing=!1}addMarker(g){let v=new d.Marker(g);return this.markers.push(v),v.register(this.lines.onTrim((b=>{v.line-=b,v.line<0&&v.dispose()}))),v.register(this.lines.onInsert((b=>{v.line>=b.index&&(v.line+=b.amount)}))),v.register(this.lines.onDelete((b=>{v.line>=b.index&&v.line<b.index+b.amount&&v.dispose(),v.line>b.index&&(v.line-=b.amount)}))),v.register(v.onDispose((()=>this._removeMarker(v)))),v}_removeMarker(g){this._isClearing||this.markers.splice(this.markers.indexOf(g),1)}}},8437:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;let a=s(3734),l=s(511),u=s(643),c=s(482);o.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let f=0;class h{constructor(d,m,g=!1){this.isWrapped=g,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*d);let v=m||l.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let b=0;b<d;++b)this.setCell(b,v);this.length=d}get(d){let m=this._data[3*d+0],g=2097151&m;return[this._data[3*d+1],2097152&m?this._combined[d]:g?(0,c.stringFromCodePoint)(g):"",m>>22,2097152&m?this._combined[d].charCodeAt(this._combined[d].length-1):g]}set(d,m){this._data[3*d+1]=m[u.CHAR_DATA_ATTR_INDEX],m[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[d]=m[1],this._data[3*d+0]=2097152|d|m[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*d+0]=m[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|m[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(d){return this._data[3*d+0]>>22}hasWidth(d){return 12582912&this._data[3*d+0]}getFg(d){return this._data[3*d+1]}getBg(d){return this._data[3*d+2]}hasContent(d){return 4194303&this._data[3*d+0]}getCodePoint(d){let m=this._data[3*d+0];return 2097152&m?this._combined[d].charCodeAt(this._combined[d].length-1):2097151&m}isCombined(d){return 2097152&this._data[3*d+0]}getString(d){let m=this._data[3*d+0];return 2097152&m?this._combined[d]:2097151&m?(0,c.stringFromCodePoint)(2097151&m):""}isProtected(d){return 536870912&this._data[3*d+2]}loadCell(d,m){return f=3*d,m.content=this._data[f+0],m.fg=this._data[f+1],m.bg=this._data[f+2],2097152&m.content&&(m.combinedData=this._combined[d]),268435456&m.bg&&(m.extended=this._extendedAttrs[d]),m}setCell(d,m){2097152&m.content&&(this._combined[d]=m.combinedData),268435456&m.bg&&(this._extendedAttrs[d]=m.extended),this._data[3*d+0]=m.content,this._data[3*d+1]=m.fg,this._data[3*d+2]=m.bg}setCellFromCodepoint(d,m,g,v){268435456&v.bg&&(this._extendedAttrs[d]=v.extended),this._data[3*d+0]=m|g<<22,this._data[3*d+1]=v.fg,this._data[3*d+2]=v.bg}addCodepointToCell(d,m,g){let v=this._data[3*d+0];2097152&v?this._combined[d]+=(0,c.stringFromCodePoint)(m):2097151&v?(this._combined[d]=(0,c.stringFromCodePoint)(2097151&v)+(0,c.stringFromCodePoint)(m),v&=-2097152,v|=2097152):v=m|4194304,g&&(v&=-12582913,v|=g<<22),this._data[3*d+0]=v}insertCells(d,m,g){if((d%=this.length)&&this.getWidth(d-1)===2&&this.setCellFromCodepoint(d-1,0,1,g),m<this.length-d){let v=new l.CellData;for(let b=this.length-d-m-1;b>=0;--b)this.setCell(d+m+b,this.loadCell(d+b,v));for(let b=0;b<m;++b)this.setCell(d+b,g)}else for(let v=d;v<this.length;++v)this.setCell(v,g);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,g)}deleteCells(d,m,g){if(d%=this.length,m<this.length-d){let v=new l.CellData;for(let b=0;b<this.length-d-m;++b)this.setCell(d+b,this.loadCell(d+m+b,v));for(let b=this.length-m;b<this.length;++b)this.setCell(b,g)}else for(let v=d;v<this.length;++v)this.setCell(v,g);d&&this.getWidth(d-1)===2&&this.setCellFromCodepoint(d-1,0,1,g),this.getWidth(d)!==0||this.hasContent(d)||this.setCellFromCodepoint(d,0,1,g)}replaceCells(d,m,g,v=!1){if(v)for(d&&this.getWidth(d-1)===2&&!this.isProtected(d-1)&&this.setCellFromCodepoint(d-1,0,1,g),m<this.length&&this.getWidth(m-1)===2&&!this.isProtected(m)&&this.setCellFromCodepoint(m,0,1,g);d<m&&d<this.length;)this.isProtected(d)||this.setCell(d,g),d++;else for(d&&this.getWidth(d-1)===2&&this.setCellFromCodepoint(d-1,0,1,g),m<this.length&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m,0,1,g);d<m&&d<this.length;)this.setCell(d++,g)}resize(d,m){if(d===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let g=3*d;if(d>this.length){if(this._data.buffer.byteLength>=4*g)this._data=new Uint32Array(this._data.buffer,0,g);else{let v=new Uint32Array(g);v.set(this._data),this._data=v}for(let v=this.length;v<d;++v)this.setCell(v,m)}else{this._data=this._data.subarray(0,g);let v=Object.keys(this._combined);for(let y=0;y<v.length;y++){let x=parseInt(v[y],10);x>=d&&delete this._combined[x]}let b=Object.keys(this._extendedAttrs);for(let y=0;y<b.length;y++){let x=parseInt(b[y],10);x>=d&&delete this._extendedAttrs[x]}}return this.length=d,4*g*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let d=new Uint32Array(this._data.length);return d.set(this._data),this._data=d,1}return 0}fill(d,m=!1){if(m)for(let g=0;g<this.length;++g)this.isProtected(g)||this.setCell(g,d);else{this._combined={},this._extendedAttrs={};for(let g=0;g<this.length;++g)this.setCell(g,d)}}copyFrom(d){this.length!==d.length?this._data=new Uint32Array(d._data):this._data.set(d._data),this.length=d.length,this._combined={};for(let m in d._combined)this._combined[m]=d._combined[m];this._extendedAttrs={};for(let m in d._extendedAttrs)this._extendedAttrs[m]=d._extendedAttrs[m];this.isWrapped=d.isWrapped}clone(){let d=new h(0);d._data=new Uint32Array(this._data),d.length=this.length;for(let m in this._combined)d._combined[m]=this._combined[m];for(let m in this._extendedAttrs)d._extendedAttrs[m]=this._extendedAttrs[m];return d.isWrapped=this.isWrapped,d}getTrimmedLength(){for(let d=this.length-1;d>=0;--d)if(4194303&this._data[3*d+0])return d+(this._data[3*d+0]>>22);return 0}getNoBgTrimmedLength(){for(let d=this.length-1;d>=0;--d)if(4194303&this._data[3*d+0]||50331648&this._data[3*d+2])return d+(this._data[3*d+0]>>22);return 0}copyCellsFrom(d,m,g,v,b){let y=d._data;if(b)for(let S=v-1;S>=0;S--){for(let _=0;_<3;_++)this._data[3*(g+S)+_]=y[3*(m+S)+_];268435456&y[3*(m+S)+2]&&(this._extendedAttrs[g+S]=d._extendedAttrs[m+S])}else for(let S=0;S<v;S++){for(let _=0;_<3;_++)this._data[3*(g+S)+_]=y[3*(m+S)+_];268435456&y[3*(m+S)+2]&&(this._extendedAttrs[g+S]=d._extendedAttrs[m+S])}let x=Object.keys(d._combined);for(let S=0;S<x.length;S++){let _=parseInt(x[S],10);_>=m&&(this._combined[_-m+g]=d._combined[_])}}translateToString(d,m,g,v){m=m??0,g=g??this.length,d&&(g=Math.min(g,this.getTrimmedLength())),v&&(v.length=0);let b="";for(;m<g;){let y=this._data[3*m+0],x=2097151&y,S=2097152&y?this._combined[m]:x?(0,c.stringFromCodePoint)(x):u.WHITESPACE_CELL_CHAR;if(b+=S,v)for(let _=0;_<S.length;++_)v.push(m);m+=y>>22||1}return v&&v.push(m),b}}o.BufferLine=h},4841:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(s,a){if(s.start.y>s.end.y)throw new Error(`Buffer range end (${s.end.x}, ${s.end.y}) cannot be before start (${s.start.x}, ${s.start.y})`);return a*(s.end.y-s.start.y)+(s.end.x-s.start.x+1)}},4634:(n,o)=>{function s(a,l,u){if(l===a.length-1)return a[l].getTrimmedLength();let c=!a[l].hasContent(u-1)&&a[l].getWidth(u-1)===1,f=a[l+1].getWidth(0)===2;return c&&f?u-1:u}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(a,l,u,c,f){let h=[];for(let p=0;p<a.length-1;p++){let d=p,m=a.get(++d);if(!m.isWrapped)continue;let g=[a.get(p)];for(;d<a.length&&m.isWrapped;)g.push(m),m=a.get(++d);if(c>=p&&c<d){p+=g.length-1;continue}let v=0,b=s(g,v,l),y=1,x=0;for(;y<g.length;){let _=s(g,y,l),w=_-x,k=u-b,A=Math.min(w,k);g[v].copyCellsFrom(g[y],x,b,A,!1),b+=A,b===u&&(v++,b=0),x+=A,x===_&&(y++,x=0),b===0&&v!==0&&g[v-1].getWidth(u-1)===2&&(g[v].copyCellsFrom(g[v-1],u-1,b++,1,!1),g[v-1].setCell(u-1,f))}g[v].replaceCells(b,u,f);let S=0;for(let _=g.length-1;_>0&&(_>v||g[_].getTrimmedLength()===0);_--)S++;S>0&&(h.push(p+g.length-S),h.push(S)),p+=g.length-1}return h},o.reflowLargerCreateNewLayout=function(a,l){let u=[],c=0,f=l[c],h=0;for(let p=0;p<a.length;p++)if(f===p){let d=l[++c];a.onDeleteEmitter.fire({index:p-h,amount:d}),p+=d-1,h+=d,f=l[++c]}else u.push(p);return{layout:u,countRemoved:h}},o.reflowLargerApplyNewLayout=function(a,l){let u=[];for(let c=0;c<l.length;c++)u.push(a.get(l[c]));for(let c=0;c<u.length;c++)a.set(c,u[c]);a.length=l.length},o.reflowSmallerGetNewLineLengths=function(a,l,u){let c=[],f=a.map(((m,g)=>s(a,g,l))).reduce(((m,g)=>m+g)),h=0,p=0,d=0;for(;d<f;){if(f-d<u){c.push(f-d);break}h+=u;let m=s(a,p,l);h>m&&(h-=m,p++);let g=a[p].getWidth(h-1)===2;g&&h--;let v=g?u-1:u;c.push(v),d+=v}return c},o.getWrappedLineTrimmedLength=s},5295:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;let a=s(8460),l=s(844),u=s(9092);class c extends l.Disposable{constructor(h,p){super(),this._optionsService=h,this._bufferService=p,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(h){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(h),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(h,p){this._normal.resize(h,p),this._alt.resize(h,p),this.setupTabStops(h)}setupTabStops(h){this._normal.setupTabStops(h),this._alt.setupTabStops(h)}}o.BufferSet=c},511:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;let a=s(482),l=s(643),u=s(3734);class c extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(h){let p=new c;return p.setFromCharData(h),p}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(h){this.fg=h[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let p=!1;if(h[l.CHAR_DATA_CHAR_INDEX].length>2)p=!0;else if(h[l.CHAR_DATA_CHAR_INDEX].length===2){let d=h[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=d&&d<=56319){let m=h[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=m&&m<=57343?this.content=1024*(d-55296)+m-56320+65536|h[l.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=h[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[l.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=h[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|h[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=c},643:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;let a=s(8460),l=s(844);class u{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,l.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}o.Marker=u,u._nextId=1},7116:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},o.CHARSETS.A={"#":"\xA3"},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},o.CHARSETS.C=o.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},o.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},o.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},o.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},o.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},o.CHARSETS.E=o.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},o.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},o.CHARSETS.H=o.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},o.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(n,o)=>{var s,a,l;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,(function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F"})(s||(o.C0=s={})),(function(u){u.PAD="\x80",u.HOP="\x81",u.BPH="\x82",u.NBH="\x83",u.IND="\x84",u.NEL="\x85",u.SSA="\x86",u.ESA="\x87",u.HTS="\x88",u.HTJ="\x89",u.VTS="\x8A",u.PLD="\x8B",u.PLU="\x8C",u.RI="\x8D",u.SS2="\x8E",u.SS3="\x8F",u.DCS="\x90",u.PU1="\x91",u.PU2="\x92",u.STS="\x93",u.CCH="\x94",u.MW="\x95",u.SPA="\x96",u.EPA="\x97",u.SOS="\x98",u.SGCI="\x99",u.SCI="\x9A",u.CSI="\x9B",u.ST="\x9C",u.OSC="\x9D",u.PM="\x9E",u.APC="\x9F"})(a||(o.C1=a={})),(function(u){u.ST=`${s.ESC}\\`})(l||(o.C1_ESCAPED=l={}))},7399:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;let a=s(2584),l={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(u,c,f,h){let p={type:0,cancel:!1,key:void 0},d=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?p.key=c?a.C0.ESC+"OA":a.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?p.key=c?a.C0.ESC+"OD":a.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?p.key=c?a.C0.ESC+"OC":a.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(p.key=c?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:p.key=u.ctrlKey?"\b":a.C0.DEL,u.altKey&&(p.key=a.C0.ESC+p.key);break;case 9:if(u.shiftKey){p.key=a.C0.ESC+"[Z";break}p.key=a.C0.HT,p.cancel=!0;break;case 13:p.key=u.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,p.cancel=!0;break;case 27:p.key=a.C0.ESC,u.altKey&&(p.key=a.C0.ESC+a.C0.ESC),p.cancel=!0;break;case 37:if(u.metaKey)break;d?(p.key=a.C0.ESC+"[1;"+(d+1)+"D",p.key===a.C0.ESC+"[1;3D"&&(p.key=a.C0.ESC+(f?"b":"[1;5D"))):p.key=c?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(u.metaKey)break;d?(p.key=a.C0.ESC+"[1;"+(d+1)+"C",p.key===a.C0.ESC+"[1;3C"&&(p.key=a.C0.ESC+(f?"f":"[1;5C"))):p.key=c?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(u.metaKey)break;d?(p.key=a.C0.ESC+"[1;"+(d+1)+"A",f||p.key!==a.C0.ESC+"[1;3A"||(p.key=a.C0.ESC+"[1;5A")):p.key=c?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(u.metaKey)break;d?(p.key=a.C0.ESC+"[1;"+(d+1)+"B",f||p.key!==a.C0.ESC+"[1;3B"||(p.key=a.C0.ESC+"[1;5B")):p.key=c?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(p.key=a.C0.ESC+"[2~");break;case 46:p.key=d?a.C0.ESC+"[3;"+(d+1)+"~":a.C0.ESC+"[3~";break;case 36:p.key=d?a.C0.ESC+"[1;"+(d+1)+"H":c?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:p.key=d?a.C0.ESC+"[1;"+(d+1)+"F":c?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:u.shiftKey?p.type=2:u.ctrlKey?p.key=a.C0.ESC+"[5;"+(d+1)+"~":p.key=a.C0.ESC+"[5~";break;case 34:u.shiftKey?p.type=3:u.ctrlKey?p.key=a.C0.ESC+"[6;"+(d+1)+"~":p.key=a.C0.ESC+"[6~";break;case 112:p.key=d?a.C0.ESC+"[1;"+(d+1)+"P":a.C0.ESC+"OP";break;case 113:p.key=d?a.C0.ESC+"[1;"+(d+1)+"Q":a.C0.ESC+"OQ";break;case 114:p.key=d?a.C0.ESC+"[1;"+(d+1)+"R":a.C0.ESC+"OR";break;case 115:p.key=d?a.C0.ESC+"[1;"+(d+1)+"S":a.C0.ESC+"OS";break;case 116:p.key=d?a.C0.ESC+"[15;"+(d+1)+"~":a.C0.ESC+"[15~";break;case 117:p.key=d?a.C0.ESC+"[17;"+(d+1)+"~":a.C0.ESC+"[17~";break;case 118:p.key=d?a.C0.ESC+"[18;"+(d+1)+"~":a.C0.ESC+"[18~";break;case 119:p.key=d?a.C0.ESC+"[19;"+(d+1)+"~":a.C0.ESC+"[19~";break;case 120:p.key=d?a.C0.ESC+"[20;"+(d+1)+"~":a.C0.ESC+"[20~";break;case 121:p.key=d?a.C0.ESC+"[21;"+(d+1)+"~":a.C0.ESC+"[21~";break;case 122:p.key=d?a.C0.ESC+"[23;"+(d+1)+"~":a.C0.ESC+"[23~";break;case 123:p.key=d?a.C0.ESC+"[24;"+(d+1)+"~":a.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(f&&!h||!u.altKey||u.metaKey)!f||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?p.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(p.key=a.C0.US),u.key==="@"&&(p.key=a.C0.NUL)):u.keyCode===65&&(p.type=1);else{let m=l[u.keyCode],g=m?.[u.shiftKey?1:0];if(g)p.key=a.C0.ESC+g;else if(u.keyCode>=65&&u.keyCode<=90){let v=u.ctrlKey?u.keyCode-64:u.keyCode+32,b=String.fromCharCode(v);u.shiftKey&&(b=b.toUpperCase()),p.key=a.C0.ESC+b}else if(u.keyCode===32)p.key=a.C0.ESC+(u.ctrlKey?a.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let v=u.code.slice(3,4);u.shiftKey||(v=v.toLowerCase()),p.key=a.C0.ESC+v,p.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?p.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?p.key=a.C0.NUL:u.keyCode>=51&&u.keyCode<=55?p.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?p.key=a.C0.DEL:u.keyCode===219?p.key=a.C0.ESC:u.keyCode===220?p.key=a.C0.FS:u.keyCode===221&&(p.key=a.C0.GS)}return p}},482:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(s){return s>65535?(s-=65536,String.fromCharCode(55296+(s>>10))+String.fromCharCode(s%1024+56320)):String.fromCharCode(s)},o.utf32ToString=function(s,a=0,l=s.length){let u="";for(let c=a;c<l;++c){let f=s[c];f>65535?(f-=65536,u+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):u+=String.fromCharCode(f)}return u},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(s,a){let l=s.length;if(!l)return 0;let u=0,c=0;if(this._interim){let f=s.charCodeAt(c++);56320<=f&&f<=57343?a[u++]=1024*(this._interim-55296)+f-56320+65536:(a[u++]=this._interim,a[u++]=f),this._interim=0}for(let f=c;f<l;++f){let h=s.charCodeAt(f);if(55296<=h&&h<=56319){if(++f>=l)return this._interim=h,u;let p=s.charCodeAt(f);56320<=p&&p<=57343?a[u++]=1024*(h-55296)+p-56320+65536:(a[u++]=h,a[u++]=p)}else h!==65279&&(a[u++]=h)}return u}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(s,a){let l=s.length;if(!l)return 0;let u,c,f,h,p=0,d=0,m=0;if(this.interim[0]){let b=!1,y=this.interim[0];y&=(224&y)==192?31:(240&y)==224?15:7;let x,S=0;for(;(x=63&this.interim[++S])&&S<4;)y<<=6,y|=x;let _=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=_-S;for(;m<w;){if(m>=l)return 0;if(x=s[m++],(192&x)!=128){m--,b=!0;break}this.interim[S++]=x,y<<=6,y|=63&x}b||(_===2?y<128?m--:a[p++]=y:_===3?y<2048||y>=55296&&y<=57343||y===65279||(a[p++]=y):y<65536||y>1114111||(a[p++]=y)),this.interim.fill(0)}let g=l-4,v=m;for(;v<l;){for(;!(!(v<g)||128&(u=s[v])||128&(c=s[v+1])||128&(f=s[v+2])||128&(h=s[v+3]));)a[p++]=u,a[p++]=c,a[p++]=f,a[p++]=h,v+=4;if(u=s[v++],u<128)a[p++]=u;else if((224&u)==192){if(v>=l)return this.interim[0]=u,p;if(c=s[v++],(192&c)!=128){v--;continue}if(d=(31&u)<<6|63&c,d<128){v--;continue}a[p++]=d}else if((240&u)==224){if(v>=l)return this.interim[0]=u,p;if(c=s[v++],(192&c)!=128){v--;continue}if(v>=l)return this.interim[0]=u,this.interim[1]=c,p;if(f=s[v++],(192&f)!=128){v--;continue}if(d=(15&u)<<12|(63&c)<<6|63&f,d<2048||d>=55296&&d<=57343||d===65279)continue;a[p++]=d}else if((248&u)==240){if(v>=l)return this.interim[0]=u,p;if(c=s[v++],(192&c)!=128){v--;continue}if(v>=l)return this.interim[0]=u,this.interim[1]=c,p;if(f=s[v++],(192&f)!=128){v--;continue}if(v>=l)return this.interim[0]=u,this.interim[1]=c,this.interim[2]=f,p;if(h=s[v++],(192&h)!=128){v--;continue}if(d=(7&u)<<18|(63&c)<<12|(63&f)<<6|63&h,d<65536||d>1114111)continue;a[p++]=d}}return p}}},225:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;let a=s(1480),l=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],c;o.UnicodeV6=class{constructor(){if(this.version="6",!c){c=new Uint8Array(65536),c.fill(1),c[0]=0,c.fill(0,1,32),c.fill(0,127,160),c.fill(2,4352,4448),c[9001]=2,c[9002]=2,c.fill(2,11904,42192),c[12351]=1,c.fill(2,44032,55204),c.fill(2,63744,64256),c.fill(2,65040,65050),c.fill(2,65072,65136),c.fill(2,65280,65377),c.fill(2,65504,65511);for(let f=0;f<l.length;++f)c.fill(0,l[f][0],l[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?c[f]:(function(h,p){let d,m=0,g=p.length-1;if(h<p[0][0]||h>p[g][1])return!1;for(;g>=m;)if(d=m+g>>1,h>p[d][1])m=d+1;else{if(!(h<p[d][0]))return!0;g=d-1}return!1})(f,u)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}charProperties(f,h){let p=this.wcwidth(f),d=p===0&&h!==0;if(d){let m=a.UnicodeService.extractWidth(h);m===0?d=!1:m>p&&(p=m)}return a.UnicodeService.createPropertyValue(0,p,d)}}},5981:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;let a=s(8460),l=s(844);class u extends l.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,h){if(h!==void 0&&this._syncCalls>h)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let p;for(this._isSyncWriting=!0;p=this._writeBuffer.shift();){this._action(p);let d=this._callbacks.shift();d&&d()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,h){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(h),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(h)}_innerWrite(f=0,h=!0){let p=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let d=this._writeBuffer[this._bufferOffset],m=this._action(d,h);if(m){let v=b=>Date.now()-p>=12?setTimeout((()=>this._innerWrite(0,b))):this._innerWrite(p,b);return void m.catch((b=>(queueMicrotask((()=>{throw b})),Promise.resolve(!1)))).then(v)}let g=this._callbacks[this._bufferOffset];if(g&&g(),this._bufferOffset++,this._pendingData-=d.length,Date.now()-p>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=u},5941:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;let s=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function l(u,c){let f=u.toString(16),h=f.length<2?"0"+f:f;switch(c){case 4:return f[0];case 8:return h;case 12:return(h+h).slice(0,3);default:return h+h}}o.parseColor=function(u){if(!u)return;let c=u.toLowerCase();if(c.indexOf("rgb:")===0){c=c.slice(4);let f=s.exec(c);if(f){let h=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/h*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/h*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/h*255)]}}else if(c.indexOf("#")===0&&(c=c.slice(1),a.exec(c)&&[3,6,9,12].includes(c.length))){let f=c.length/3,h=[0,0,0];for(let p=0;p<3;++p){let d=parseInt(c.slice(f*p,f*p+f),16);h[p]=f===1?d<<4:f===2?d:f===3?d>>4:d>>8}return h}},o.toRgbString=function(u,c=16){let[f,h,p]=u;return`rgb:${l(f,c)}/${l(h,c)}/${l(p,c)}`}},5770:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;let a=s(482),l=s(8742),u=s(5770),c=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=c,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}registerHandler(h,p){this._handlers[h]===void 0&&(this._handlers[h]=[]);let d=this._handlers[h];return d.push(p),{dispose:()=>{let m=d.indexOf(p);m!==-1&&d.splice(m,1)}}}clearHandler(h){this._handlers[h]&&delete this._handlers[h]}setHandlerFallback(h){this._handlerFb=h}reset(){if(this._active.length)for(let h=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;h>=0;--h)this._active[h].unhook(!1);this._stack.paused=!1,this._active=c,this._ident=0}hook(h,p){if(this.reset(),this._ident=h,this._active=this._handlers[h]||c,this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].hook(p);else this._handlerFb(this._ident,"HOOK",p)}put(h,p,d){if(this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].put(h,p,d);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(h,p,d))}unhook(h,p=!0){if(this._active.length){let d=!1,m=this._active.length-1,g=!1;if(this._stack.paused&&(m=this._stack.loopPosition-1,d=p,g=this._stack.fallThrough,this._stack.paused=!1),!g&&d===!1){for(;m>=0&&(d=this._active[m].unhook(h),d!==!0);m--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!1,d;m--}for(;m>=0;m--)if(d=this._active[m].unhook(!1),d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!0,d}else this._handlerFb(this._ident,"UNHOOK",h);this._active=c,this._ident=0}};let f=new l.Params;f.addParam(0),o.DcsHandler=class{constructor(h){this._handler=h,this._data="",this._params=f,this._hitLimit=!1}hook(h){this._params=h.length>1||h.params[0]?h.clone():f,this._data="",this._hitLimit=!1}put(h,p,d){this._hitLimit||(this._data+=(0,a.utf32ToString)(h,p,d),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(h){let p=!1;if(this._hitLimit)p=!1;else if(h&&(p=this._handler(this._data,this._params),p instanceof Promise))return p.then((d=>(this._params=f,this._data="",this._hitLimit=!1,d)));return this._params=f,this._data="",this._hitLimit=!1,p}}},2015:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;let a=s(844),l=s(8742),u=s(6242),c=s(6351);class f{constructor(m){this.table=new Uint8Array(m)}setDefault(m,g){this.table.fill(m<<4|g)}add(m,g,v,b){this.table[g<<8|m]=v<<4|b}addMany(m,g,v,b){for(let y=0;y<m.length;y++)this.table[g<<8|m[y]]=v<<4|b}}o.TransitionTable=f;let h=160;o.VT500_TRANSITION_TABLE=(function(){let d=new f(4095),m=Array.apply(null,Array(256)).map(((S,_)=>_)),g=(S,_)=>m.slice(S,_),v=g(32,127),b=g(0,24);b.push(25),b.push.apply(b,g(28,32));let y=g(0,14),x;for(x in d.setDefault(1,0),d.addMany(v,0,2,0),y)d.addMany([24,26,153,154],x,3,0),d.addMany(g(128,144),x,3,0),d.addMany(g(144,152),x,3,0),d.add(156,x,0,0),d.add(27,x,11,1),d.add(157,x,4,8),d.addMany([152,158,159],x,0,7),d.add(155,x,11,3),d.add(144,x,11,9);return d.addMany(b,0,3,0),d.addMany(b,1,3,1),d.add(127,1,0,1),d.addMany(b,8,0,8),d.addMany(b,3,3,3),d.add(127,3,0,3),d.addMany(b,4,3,4),d.add(127,4,0,4),d.addMany(b,6,3,6),d.addMany(b,5,3,5),d.add(127,5,0,5),d.addMany(b,2,3,2),d.add(127,2,0,2),d.add(93,1,4,8),d.addMany(v,8,5,8),d.add(127,8,5,8),d.addMany([156,27,24,26,7],8,6,0),d.addMany(g(28,32),8,0,8),d.addMany([88,94,95],1,0,7),d.addMany(v,7,0,7),d.addMany(b,7,0,7),d.add(156,7,0,0),d.add(127,7,0,7),d.add(91,1,11,3),d.addMany(g(64,127),3,7,0),d.addMany(g(48,60),3,8,4),d.addMany([60,61,62,63],3,9,4),d.addMany(g(48,60),4,8,4),d.addMany(g(64,127),4,7,0),d.addMany([60,61,62,63],4,0,6),d.addMany(g(32,64),6,0,6),d.add(127,6,0,6),d.addMany(g(64,127),6,0,0),d.addMany(g(32,48),3,9,5),d.addMany(g(32,48),5,9,5),d.addMany(g(48,64),5,0,6),d.addMany(g(64,127),5,7,0),d.addMany(g(32,48),4,9,5),d.addMany(g(32,48),1,9,2),d.addMany(g(32,48),2,9,2),d.addMany(g(48,127),2,10,0),d.addMany(g(48,80),1,10,0),d.addMany(g(81,88),1,10,0),d.addMany([89,90,92],1,10,0),d.addMany(g(96,127),1,10,0),d.add(80,1,11,9),d.addMany(b,9,0,9),d.add(127,9,0,9),d.addMany(g(28,32),9,0,9),d.addMany(g(32,48),9,9,12),d.addMany(g(48,60),9,8,10),d.addMany([60,61,62,63],9,9,10),d.addMany(b,11,0,11),d.addMany(g(32,128),11,0,11),d.addMany(g(28,32),11,0,11),d.addMany(b,10,0,10),d.add(127,10,0,10),d.addMany(g(28,32),10,0,10),d.addMany(g(48,60),10,8,10),d.addMany([60,61,62,63],10,0,11),d.addMany(g(32,48),10,9,12),d.addMany(b,12,0,12),d.add(127,12,0,12),d.addMany(g(28,32),12,0,12),d.addMany(g(32,48),12,9,12),d.addMany(g(48,64),12,0,11),d.addMany(g(64,127),12,12,13),d.addMany(g(64,127),10,12,13),d.addMany(g(64,127),9,12,13),d.addMany(b,13,13,13),d.addMany(v,13,13,13),d.add(127,13,0,13),d.addMany([27,156,24,26],13,14,0),d.add(h,0,2,0),d.add(h,8,5,8),d.add(h,6,0,6),d.add(h,11,0,11),d.add(h,13,13,13),d})();class p extends a.Disposable{constructor(m=o.VT500_TRANSITION_TABLE){super(),this._transitions=m,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new l.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(g,v,b)=>{},this._executeHandlerFb=g=>{},this._csiHandlerFb=(g,v)=>{},this._escHandlerFb=g=>{},this._errorHandlerFb=g=>g,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new c.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(m,g=[64,126]){let v=0;if(m.prefix){if(m.prefix.length>1)throw new Error("only one byte as prefix supported");if(v=m.prefix.charCodeAt(0),v&&60>v||v>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(m.intermediates){if(m.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let y=0;y<m.intermediates.length;++y){let x=m.intermediates.charCodeAt(y);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");v<<=8,v|=x}}if(m.final.length!==1)throw new Error("final must be a single byte");let b=m.final.charCodeAt(0);if(g[0]>b||b>g[1])throw new Error(`final must be in range ${g[0]} .. ${g[1]}`);return v<<=8,v|=b,v}identToString(m){let g=[];for(;m;)g.push(String.fromCharCode(255&m)),m>>=8;return g.reverse().join("")}setPrintHandler(m){this._printHandler=m}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(m,g){let v=this._identifier(m,[48,126]);this._escHandlers[v]===void 0&&(this._escHandlers[v]=[]);let b=this._escHandlers[v];return b.push(g),{dispose:()=>{let y=b.indexOf(g);y!==-1&&b.splice(y,1)}}}clearEscHandler(m){this._escHandlers[this._identifier(m,[48,126])]&&delete this._escHandlers[this._identifier(m,[48,126])]}setEscHandlerFallback(m){this._escHandlerFb=m}setExecuteHandler(m,g){this._executeHandlers[m.charCodeAt(0)]=g}clearExecuteHandler(m){this._executeHandlers[m.charCodeAt(0)]&&delete this._executeHandlers[m.charCodeAt(0)]}setExecuteHandlerFallback(m){this._executeHandlerFb=m}registerCsiHandler(m,g){let v=this._identifier(m);this._csiHandlers[v]===void 0&&(this._csiHandlers[v]=[]);let b=this._csiHandlers[v];return b.push(g),{dispose:()=>{let y=b.indexOf(g);y!==-1&&b.splice(y,1)}}}clearCsiHandler(m){this._csiHandlers[this._identifier(m)]&&delete this._csiHandlers[this._identifier(m)]}setCsiHandlerFallback(m){this._csiHandlerFb=m}registerDcsHandler(m,g){return this._dcsParser.registerHandler(this._identifier(m),g)}clearDcsHandler(m){this._dcsParser.clearHandler(this._identifier(m))}setDcsHandlerFallback(m){this._dcsParser.setHandlerFallback(m)}registerOscHandler(m,g){return this._oscParser.registerHandler(m,g)}clearOscHandler(m){this._oscParser.clearHandler(m)}setOscHandlerFallback(m){this._oscParser.setHandlerFallback(m)}setErrorHandler(m){this._errorHandler=m}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(m,g,v,b,y){this._parseStack.state=m,this._parseStack.handlers=g,this._parseStack.handlerPos=v,this._parseStack.transition=b,this._parseStack.chunkPos=y}parse(m,g,v){let b,y=0,x=0,S=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,S=this._parseStack.chunkPos+1;else{if(v===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let _=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(v===!1&&w>-1){for(;w>=0&&(b=_[w](this._params),b!==!0);w--)if(b instanceof Promise)return this._parseStack.handlerPos=w,b}this._parseStack.handlers=[];break;case 4:if(v===!1&&w>-1){for(;w>=0&&(b=_[w](),b!==!0);w--)if(b instanceof Promise)return this._parseStack.handlerPos=w,b}this._parseStack.handlers=[];break;case 6:if(y=m[this._parseStack.chunkPos],b=this._dcsParser.unhook(y!==24&&y!==26,v),b)return b;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=m[this._parseStack.chunkPos],b=this._oscParser.end(y!==24&&y!==26,v),b)return b;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,S=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let _=S;_<g;++_){switch(y=m[_],x=this._transitions.table[this.currentState<<8|(y<160?y:h)],x>>4){case 2:for(let D=_+1;;++D){if(D>=g||(y=m[D])<32||y>126&&y<h){this._printHandler(m,_,D),_=D-1;break}if(++D>=g||(y=m[D])<32||y>126&&y<h){this._printHandler(m,_,D),_=D-1;break}if(++D>=g||(y=m[D])<32||y>126&&y<h){this._printHandler(m,_,D),_=D-1;break}if(++D>=g||(y=m[D])<32||y>126&&y<h){this._printHandler(m,_,D),_=D-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let w=this._csiHandlers[this._collect<<8|y],k=w?w.length-1:-1;for(;k>=0&&(b=w[k](this._params),b!==!0);k--)if(b instanceof Promise)return this._preserveStack(3,w,k,x,_),b;k<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingJoinState=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++_<g&&(y=m[_])>47&&y<60);_--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:let A=this._escHandlers[this._collect<<8|y],M=A?A.length-1:-1;for(;M>=0&&(b=A[M](),b!==!0);M--)if(b instanceof Promise)return this._preserveStack(4,A,M,x,_),b;M<0&&this._escHandlerFb(this._collect<<8|y),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(let D=_+1;;++D)if(D>=g||(y=m[D])===24||y===26||y===27||y>127&&y<h){this._dcsParser.put(m,_,D),_=D-1;break}break;case 14:if(b=this._dcsParser.unhook(y!==24&&y!==26),b)return this._preserveStack(6,[],0,x,_),b;y===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let D=_+1;;D++)if(D>=g||(y=m[D])<32||y>127&&y<h){this._oscParser.put(m,_,D),_=D-1;break}break;case 6:if(b=this._oscParser.end(y!==24&&y!==26),b)return this._preserveStack(5,[],0,x,_),b;y===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&x}}}o.EscapeSequenceParser=p},6242:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;let a=s(5770),l=s(482),u=[];o.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(c,f){this._handlers[c]===void 0&&(this._handlers[c]=[]);let h=this._handlers[c];return h.push(f),{dispose:()=>{let p=h.indexOf(f);p!==-1&&h.splice(p,1)}}}clearHandler(c){this._handlers[c]&&delete this._handlers[c]}setHandlerFallback(c){this._handlerFb=c}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let c=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;c>=0;--c)this._active[c].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].start();else this._handlerFb(this._id,"START")}_put(c,f,h){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(c,f,h);else this._handlerFb(this._id,"PUT",(0,l.utf32ToString)(c,f,h))}start(){this.reset(),this._state=1}put(c,f,h){if(this._state!==3){if(this._state===1)for(;f<h;){let p=c[f++];if(p===59){this._state=2,this._start();break}if(p<48||57<p)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+p-48}this._state===2&&h-f>0&&this._put(c,f,h)}}end(c,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let h=!1,p=this._active.length-1,d=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,h=f,d=this._stack.fallThrough,this._stack.paused=!1),!d&&h===!1){for(;p>=0&&(h=this._active[p].end(c),h!==!0);p--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,h;p--}for(;p>=0;p--)if(h=this._active[p].end(!1),h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,h}else this._handlerFb(this._id,"END",c);this._active=u,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(c){this._handler=c,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(c,f,h){this._hitLimit||(this._data+=(0,l.utf32ToString)(c,f,h),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(c){let f=!1;if(this._hitLimit)f=!1;else if(c&&(f=this._handler(this._data),f instanceof Promise))return f.then((h=>(this._data="",this._hitLimit=!1,h)));return this._data="",this._hitLimit=!1,f}}},8742:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;let s=2147483647;class a{static fromArray(u){let c=new a;if(!u.length)return c;for(let f=Array.isArray(u[0])?1:0;f<u.length;++f){let h=u[f];if(Array.isArray(h))for(let p=0;p<h.length;++p)c.addSubParam(h[p]);else c.addParam(h)}return c}constructor(u=32,c=32){if(this.maxLength=u,this.maxSubParamsLength=c,c>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(c),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let u=new a(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){let u=[];for(let c=0;c<this.length;++c){u.push(this.params[c]);let f=this._subParamsIdx[c]>>8,h=255&this._subParamsIdx[c];h-f>0&&u.push(Array.prototype.slice.call(this._subParams,f,h))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>s?s:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>s?s:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){let c=this._subParamsIdx[u]>>8,f=255&this._subParamsIdx[u];return f-c>0?this._subParams.subarray(c,f):null}getSubParamsAll(){let u={};for(let c=0;c<this.length;++c){let f=this._subParamsIdx[c]>>8,h=255&this._subParamsIdx[c];h-f>0&&(u[c]=this._subParams.slice(f,h))}return u}addDigit(u){let c;if(this._rejectDigits||!(c=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let f=this._digitIsSub?this._subParams:this.params,h=f[c-1];f[c-1]=~h?Math.min(10*h+u,s):u}}o.Params=a},5741:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let s=this._addons.length-1;s>=0;s--)this._addons[s].instance.dispose()}loadAddon(s,a){let l={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(l),a.dispose=()=>this._wrappedAddonDispose(l),a.activate(s)}_wrappedAddonDispose(s){if(s.isDisposed)return;let a=-1;for(let l=0;l<this._addons.length;l++)if(this._addons[l]===s){a=l;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");s.isDisposed=!0,s.dispose.apply(s.instance),this._addons.splice(a,1)}}},8771:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;let a=s(3785),l=s(511);o.BufferApiView=class{constructor(u,c){this._buffer=u,this.type=c}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){let c=this._buffer.lines.get(u);if(c)return new a.BufferLineApiView(c)}getNullCell(){return new l.CellData}}},3785:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;let a=s(511);o.BufferLineApiView=class{constructor(l){this._line=l}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(l,u){if(!(l<0||l>=this._line.length))return u?(this._line.loadCell(l,u),u):this._line.loadCell(l,new a.CellData)}translateToString(l,u,c){return this._line.translateToString(l,u,c)}}},8285:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;let a=s(8771),l=s(8460),u=s(844);class c extends u.Disposable{constructor(h){super(),this._core=h,this._onBufferChange=this.register(new l.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=c},7975:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(s){this._core=s}registerCsiHandler(s,a){return this._core.registerCsiHandler(s,(l=>a(l.toArray())))}addCsiHandler(s,a){return this.registerCsiHandler(s,a)}registerDcsHandler(s,a){return this._core.registerDcsHandler(s,((l,u)=>a(l,u.toArray())))}addDcsHandler(s,a){return this.registerDcsHandler(s,a)}registerEscHandler(s,a){return this._core.registerEscHandler(s,a)}addEscHandler(s,a){return this.registerEscHandler(s,a)}registerOscHandler(s,a){return this._core.registerOscHandler(s,a)}addOscHandler(s,a){return this.registerOscHandler(s,a)}}},7090:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(s){this._core=s}register(s){this._core.unicodeService.register(s)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(s){this._core.unicodeService.activeVersion=s}}},744:function(n,o,s){var a=this&&this.__decorate||function(d,m,g,v){var b,y=arguments.length,x=y<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,g):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(d,m,g,v);else for(var S=d.length-1;S>=0;S--)(b=d[S])&&(x=(y<3?b(x):y>3?b(m,g,x):b(m,g))||x);return y>3&&x&&Object.defineProperty(m,g,x),x},l=this&&this.__param||function(d,m){return function(g,v){m(g,v,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;let u=s(8460),c=s(844),f=s(5295),h=s(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let p=o.BufferService=class extends c.Disposable{get buffer(){return this.buffers.active}constructor(d){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(d.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(d.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(d,this))}resize(d,m){this.cols=d,this.rows=m,this.buffers.resize(d,m),this._onResize.fire({cols:d,rows:m})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(d,m=!1){let g=this.buffer,v;v=this._cachedBlankLine,v&&v.length===this.cols&&v.getFg(0)===d.fg&&v.getBg(0)===d.bg||(v=g.getBlankLine(d,m),this._cachedBlankLine=v),v.isWrapped=m;let b=g.ybase+g.scrollTop,y=g.ybase+g.scrollBottom;if(g.scrollTop===0){let x=g.lines.isFull;y===g.lines.length-1?x?g.lines.recycle().copyFrom(v):g.lines.push(v.clone()):g.lines.splice(y+1,0,v.clone()),x?this.isUserScrolling&&(g.ydisp=Math.max(g.ydisp-1,0)):(g.ybase++,this.isUserScrolling||g.ydisp++)}else{let x=y-b+1;g.lines.shiftElements(b+1,x-1,-1),g.lines.set(y,v.clone())}this.isUserScrolling||(g.ydisp=g.ybase),this._onScroll.fire(g.ydisp)}scrollLines(d,m,g){let v=this.buffer;if(d<0){if(v.ydisp===0)return;this.isUserScrolling=!0}else d+v.ydisp>=v.ybase&&(this.isUserScrolling=!1);let b=v.ydisp;v.ydisp=Math.max(Math.min(v.ydisp+d,v.ybase),0),b!==v.ydisp&&(m||this._onScroll.fire(v.ydisp))}};o.BufferService=p=a([l(0,h.IOptionsService)],p)},7994:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(s){this.glevel=s,this.charset=this._charsets[s]}setgCharset(s,a){this._charsets[s]=a,this.glevel===s&&(this.charset=a)}}},1753:function(n,o,s){var a=this&&this.__decorate||function(v,b,y,x){var S,_=arguments.length,w=_<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(v,b,y,x);else for(var k=v.length-1;k>=0;k--)(S=v[k])&&(w=(_<3?S(w):_>3?S(b,y,w):S(b,y))||w);return _>3&&w&&Object.defineProperty(b,y,w),w},l=this&&this.__param||function(v,b){return function(y,x){b(y,x,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;let u=s(2585),c=s(8460),f=s(844),h={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:v=>v.button!==4&&v.action===1&&(v.ctrl=!1,v.alt=!1,v.shift=!1,!0)},VT200:{events:19,restrict:v=>v.action!==32},DRAG:{events:23,restrict:v=>v.action!==32||v.button!==3},ANY:{events:31,restrict:v=>!0}};function p(v,b){let y=(v.ctrl?16:0)|(v.shift?4:0)|(v.alt?8:0);return v.button===4?(y|=64,y|=v.action):(y|=3&v.button,4&v.button&&(y|=64),8&v.button&&(y|=128),v.action===32?y|=32:v.action!==0||b||(y|=3)),y}let d=String.fromCharCode,m={DEFAULT:v=>{let b=[p(v,!1)+32,v.col+32,v.row+32];return b[0]>255||b[1]>255||b[2]>255?"":`\x1B[M${d(b[0])}${d(b[1])}${d(b[2])}`},SGR:v=>{let b=v.action===0&&v.button!==4?"m":"M";return`\x1B[<${p(v,!0)};${v.col};${v.row}${b}`},SGR_PIXELS:v=>{let b=v.action===0&&v.button!==4?"m":"M";return`\x1B[<${p(v,!0)};${v.x};${v.y}${b}`}},g=o.CoreMouseService=class extends f.Disposable{constructor(v,b){super(),this._bufferService=v,this._coreService=b,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new c.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let y of Object.keys(h))this.addProtocol(y,h[y]);for(let y of Object.keys(m))this.addEncoding(y,m[y]);this.reset()}addProtocol(v,b){this._protocols[v]=b}addEncoding(v,b){this._encodings[v]=b}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(v){if(!this._protocols[v])throw new Error(`unknown protocol "${v}"`);this._activeProtocol=v,this._onProtocolChange.fire(this._protocols[v].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(v){if(!this._encodings[v])throw new Error(`unknown encoding "${v}"`);this._activeEncoding=v}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(v){if(v.col<0||v.col>=this._bufferService.cols||v.row<0||v.row>=this._bufferService.rows||v.button===4&&v.action===32||v.button===3&&v.action!==32||v.button!==4&&(v.action===2||v.action===3)||(v.col++,v.row++,v.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,v,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(v))return!1;let b=this._encodings[this._activeEncoding](v);return b&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(b):this._coreService.triggerDataEvent(b,!0)),this._lastEvent=v,!0}explainEvents(v){return{down:!!(1&v),up:!!(2&v),drag:!!(4&v),move:!!(8&v),wheel:!!(16&v)}}_equalEvents(v,b,y){if(y){if(v.x!==b.x||v.y!==b.y)return!1}else if(v.col!==b.col||v.row!==b.row)return!1;return v.button===b.button&&v.action===b.action&&v.ctrl===b.ctrl&&v.alt===b.alt&&v.shift===b.shift}};o.CoreMouseService=g=a([l(0,u.IBufferService),l(1,u.ICoreService)],g)},6975:function(n,o,s){var a=this&&this.__decorate||function(g,v,b,y){var x,S=arguments.length,_=S<3?v:y===null?y=Object.getOwnPropertyDescriptor(v,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(g,v,b,y);else for(var w=g.length-1;w>=0;w--)(x=g[w])&&(_=(S<3?x(_):S>3?x(v,b,_):x(v,b))||_);return S>3&&_&&Object.defineProperty(v,b,_),_},l=this&&this.__param||function(g,v){return function(b,y){v(b,y,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;let u=s(1439),c=s(8460),f=s(844),h=s(2585),p=Object.freeze({insertMode:!1}),d=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),m=o.CoreService=class extends f.Disposable{constructor(g,v,b){super(),this._bufferService=g,this._logService=v,this._optionsService=b,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new c.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new c.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(p),this.decPrivateModes=(0,u.clone)(d)}reset(){this.modes=(0,u.clone)(p),this.decPrivateModes=(0,u.clone)(d)}triggerDataEvent(g,v=!1){if(this._optionsService.rawOptions.disableStdin)return;let b=this._bufferService.buffer;v&&this._optionsService.rawOptions.scrollOnUserInput&&b.ybase!==b.ydisp&&this._onRequestScrollToBottom.fire(),v&&this._onUserInput.fire(),this._logService.debug(`sending data "${g}"`,(()=>g.split("").map((y=>y.charCodeAt(0))))),this._onData.fire(g)}triggerBinaryEvent(g){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${g}"`,(()=>g.split("").map((v=>v.charCodeAt(0))))),this._onBinary.fire(g))}};o.CoreService=m=a([l(0,h.IBufferService),l(1,h.ILogService),l(2,h.IOptionsService)],m)},9074:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;let a=s(8055),l=s(8460),u=s(844),c=s(6106),f=0,h=0;class p extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new c.SortedList((g=>g?.marker.line)),this._onDecorationRegistered=this.register(new l.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new l.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)((()=>this.reset())))}registerDecoration(g){if(g.marker.isDisposed)return;let v=new d(g);if(v){let b=v.marker.onDispose((()=>v.dispose()));v.onDispose((()=>{v&&(this._decorations.delete(v)&&this._onDecorationRemoved.fire(v),b.dispose())})),this._decorations.insert(v),this._onDecorationRegistered.fire(v)}return v}reset(){for(let g of this._decorations.values())g.dispose();this._decorations.clear()}*getDecorationsAtCell(g,v,b){let y=0,x=0;for(let S of this._decorations.getKeyIterator(v))y=S.options.x??0,x=y+(S.options.width??1),g>=y&&g<x&&(!b||(S.options.layer??"bottom")===b)&&(yield S)}forEachDecorationAtCell(g,v,b,y){this._decorations.forEachByKey(v,(x=>{f=x.options.x??0,h=f+(x.options.width??1),g>=f&&g<h&&(!b||(x.options.layer??"bottom")===b)&&y(x)}))}}o.DecorationService=p;class d extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(g){super(),this.options=g,this.onRenderEmitter=this.register(new l.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=g.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;let a=s(2585),l=s(8343);class u{constructor(...f){this._entries=new Map;for(let[h,p]of f)this.set(h,p)}set(f,h){let p=this._entries.get(f);return this._entries.set(f,h),p}forEach(f){for(let[h,p]of this._entries.entries())f(h,p)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}o.ServiceCollection=u,o.InstantiationService=class{constructor(){this._services=new u,this._services.set(a.IInstantiationService,this)}setService(c,f){this._services.set(c,f)}getService(c){return this._services.get(c)}createInstance(c,...f){let h=(0,l.getServiceDependencies)(c).sort(((m,g)=>m.index-g.index)),p=[];for(let m of h){let g=this._services.get(m.id);if(!g)throw new Error(`[createInstance] ${c.name} depends on UNKNOWN service ${m.id}.`);p.push(g)}let d=h.length>0?h[0].index:f.length;if(f.length!==d)throw new Error(`[createInstance] First service dependency of ${c.name} at position ${d+1} conflicts with ${f.length} static arguments`);return new c(...f,...p)}}},7866:function(n,o,s){var a=this&&this.__decorate||function(d,m,g,v){var b,y=arguments.length,x=y<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,g):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(d,m,g,v);else for(var S=d.length-1;S>=0;S--)(b=d[S])&&(x=(y<3?b(x):y>3?b(m,g,x):b(m,g))||x);return y>3&&x&&Object.defineProperty(m,g,x),x},l=this&&this.__param||function(d,m){return function(g,v){m(g,v,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;let u=s(844),c=s(2585),f={trace:c.LogLevelEnum.TRACE,debug:c.LogLevelEnum.DEBUG,info:c.LogLevelEnum.INFO,warn:c.LogLevelEnum.WARN,error:c.LogLevelEnum.ERROR,off:c.LogLevelEnum.OFF},h,p=o.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(d){super(),this._optionsService=d,this._logLevel=c.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),h=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(d){for(let m=0;m<d.length;m++)typeof d[m]=="function"&&(d[m]=d[m]())}_log(d,m,g){this._evalLazyOptionalParams(g),d.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+m,...g)}trace(d,...m){this._logLevel<=c.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,d,m)}debug(d,...m){this._logLevel<=c.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,d,m)}info(d,...m){this._logLevel<=c.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,d,m)}warn(d,...m){this._logLevel<=c.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,d,m)}error(d,...m){this._logLevel<=c.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,d,m)}};o.LogService=p=a([l(0,c.IOptionsService)],p),o.setTraceLogger=function(d){h=d},o.traceCall=function(d,m,g){if(typeof g.value!="function")throw new Error("not supported");let v=g.value;g.value=function(...b){if(h.logLevel!==c.LogLevelEnum.TRACE)return v.apply(this,b);h.trace(`GlyphRenderer#${v.name}(${b.map((x=>JSON.stringify(x))).join(", ")})`);let y=v.apply(this,b);return h.trace(`GlyphRenderer#${v.name} return`,y),y}}},7302:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;let a=s(8460),l=s(844),u=s(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let c=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends l.Disposable{constructor(p){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let d={...o.DEFAULT_OPTIONS};for(let m in p)if(m in d)try{let g=p[m];d[m]=this._sanitizeAndValidateOption(m,g)}catch(g){console.error(g)}this.rawOptions=d,this.options={...d},this._setupOptions(),this.register((0,l.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(p,d){return this.onOptionChange((m=>{m===p&&d(this.rawOptions[p])}))}onMultipleOptionChange(p,d){return this.onOptionChange((m=>{p.indexOf(m)!==-1&&d()}))}_setupOptions(){let p=m=>{if(!(m in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${m}"`);return this.rawOptions[m]},d=(m,g)=>{if(!(m in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${m}"`);g=this._sanitizeAndValidateOption(m,g),this.rawOptions[m]!==g&&(this.rawOptions[m]=g,this._onOptionChange.fire(m))};for(let m in this.rawOptions){let g={get:p.bind(this,m),set:d.bind(this,m)};Object.defineProperty(this.options,m,g)}}_sanitizeAndValidateOption(p,d){switch(p){case"cursorStyle":if(d||(d=o.DEFAULT_OPTIONS[p]),!(function(m){return m==="block"||m==="underline"||m==="bar"})(d))throw new Error(`"${d}" is not a valid value for ${p}`);break;case"wordSeparator":d||(d=o.DEFAULT_OPTIONS[p]);break;case"fontWeight":case"fontWeightBold":if(typeof d=="number"&&1<=d&&d<=1e3)break;d=c.includes(d)?d:o.DEFAULT_OPTIONS[p];break;case"cursorWidth":d=Math.floor(d);case"lineHeight":case"tabStopWidth":if(d<1)throw new Error(`${p} cannot be less than 1, value: ${d}`);break;case"minimumContrastRatio":d=Math.max(1,Math.min(21,Math.round(10*d)/10));break;case"scrollback":if((d=Math.min(d,4294967295))<0)throw new Error(`${p} cannot be less than 0, value: ${d}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(d<=0)throw new Error(`${p} cannot be less than or equal to 0, value: ${d}`);break;case"rows":case"cols":if(!d&&d!==0)throw new Error(`${p} must be numeric, value: ${d}`);break;case"windowsPty":d=d??{}}return d}}o.OptionsService=f},2660:function(n,o,s){var a=this&&this.__decorate||function(f,h,p,d){var m,g=arguments.length,v=g<3?h:d===null?d=Object.getOwnPropertyDescriptor(h,p):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(f,h,p,d);else for(var b=f.length-1;b>=0;b--)(m=f[b])&&(v=(g<3?m(v):g>3?m(h,p,v):m(h,p))||v);return g>3&&v&&Object.defineProperty(h,p,v),v},l=this&&this.__param||function(f,h){return function(p,d){h(p,d,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;let u=s(2585),c=o.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){let h=this._bufferService.buffer;if(f.id===void 0){let b=h.addMarker(h.ybase+h.y),y={data:f,id:this._nextId++,lines:[b]};return b.onDispose((()=>this._removeMarkerFromLink(y,b))),this._dataByLinkId.set(y.id,y),y.id}let p=f,d=this._getEntryIdKey(p),m=this._entriesWithId.get(d);if(m)return this.addLineToLink(m.id,h.ybase+h.y),m.id;let g=h.addMarker(h.ybase+h.y),v={id:this._nextId++,key:this._getEntryIdKey(p),data:p,lines:[g]};return g.onDispose((()=>this._removeMarkerFromLink(v,g))),this._entriesWithId.set(v.key,v),this._dataByLinkId.set(v.id,v),v.id}addLineToLink(f,h){let p=this._dataByLinkId.get(f);if(p&&p.lines.every((d=>d.line!==h))){let d=this._bufferService.buffer.addMarker(h);p.lines.push(d),d.onDispose((()=>this._removeMarkerFromLink(p,d)))}}getLinkData(f){return this._dataByLinkId.get(f)?.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,h){let p=f.lines.indexOf(h);p!==-1&&(f.lines.splice(p,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};o.OscLinkService=c=a([l(0,u.IBufferService)],c)},8343:(n,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;let s="di$target",a="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(l){return l[a]||[]},o.createDecorator=function(l){if(o.serviceRegistry.has(l))return o.serviceRegistry.get(l);let u=function(c,f,h){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(p,d,m){d[s]===d?d[a].push({id:p,index:m}):(d[a]=[{id:p,index:m}],d[s]=d)})(u,c,h)};return u.toString=()=>l,o.serviceRegistry.set(l,u),u}},2585:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;let a=s(8343);var l;o.IBufferService=(0,a.createDecorator)("BufferService"),o.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),o.ICoreService=(0,a.createDecorator)("CoreService"),o.ICharsetService=(0,a.createDecorator)("CharsetService"),o.IInstantiationService=(0,a.createDecorator)("InstantiationService"),(function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"})(l||(o.LogLevelEnum=l={})),o.ILogService=(0,a.createDecorator)("LogService"),o.IOptionsService=(0,a.createDecorator)("OptionsService"),o.IOscLinkService=(0,a.createDecorator)("OscLinkService"),o.IUnicodeService=(0,a.createDecorator)("UnicodeService"),o.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(n,o,s)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;let a=s(8460),l=s(225);class u{static extractShouldJoin(f){return(1&f)!=0}static extractWidth(f){return f>>1&3}static extractCharKind(f){return f>>3}static createPropertyValue(f,h,p=!1){return(16777215&f)<<3|(3&h)<<1|(p?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let f=new l.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let h=0,p=0,d=f.length;for(let m=0;m<d;++m){let g=f.charCodeAt(m);if(55296<=g&&g<=56319){if(++m>=d)return h+this.wcwidth(g);let y=f.charCodeAt(m);56320<=y&&y<=57343?g=1024*(g-55296)+y-56320+65536:h+=this.wcwidth(y)}let v=this.charProperties(g,p),b=u.extractWidth(v);u.extractShouldJoin(v)&&(b-=u.extractWidth(p)),h+=b,p=v}return h}charProperties(f,h){return this._activeProvider.charProperties(f,h)}}o.UnicodeService=u}},t={};function r(n){var o=t[n];if(o!==void 0)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}var i={};return(()=>{var n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.Terminal=void 0;let o=r(9042),s=r(3236),a=r(844),l=r(5741),u=r(8285),c=r(7975),f=r(7090),h=["cols","rows"];class p extends a.Disposable{constructor(m){super(),this._core=this.register(new s.Terminal(m)),this._addonManager=this.register(new l.AddonManager),this._publicOptions={...this._core.options};let g=b=>this._core.options[b],v=(b,y)=>{this._checkReadonlyOptions(b),this._core.options[b]=y};for(let b in this._core.options){let y={get:g.bind(this,b),set:v.bind(this,b)};Object.defineProperty(this._publicOptions,b,y)}}_checkReadonlyOptions(m){if(h.includes(m))throw new Error(`Option "${m}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new c.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let m=this._core.coreService.decPrivateModes,g="none";switch(this._core.coreMouseService.activeProtocol){case"X10":g="x10";break;case"VT200":g="vt200";break;case"DRAG":g="drag";break;case"ANY":g="any"}return{applicationCursorKeysMode:m.applicationCursorKeys,applicationKeypadMode:m.applicationKeypad,bracketedPasteMode:m.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:g,originMode:m.origin,reverseWraparoundMode:m.reverseWraparound,sendFocusMode:m.sendFocus,wraparoundMode:m.wraparound}}get options(){return this._publicOptions}set options(m){for(let g in m)this._publicOptions[g]=m[g]}blur(){this._core.blur()}focus(){this._core.focus()}input(m,g=!0){this._core.input(m,g)}resize(m,g){this._verifyIntegers(m,g),this._core.resize(m,g)}open(m){this._core.open(m)}attachCustomKeyEventHandler(m){this._core.attachCustomKeyEventHandler(m)}attachCustomWheelEventHandler(m){this._core.attachCustomWheelEventHandler(m)}registerLinkProvider(m){return this._core.registerLinkProvider(m)}registerCharacterJoiner(m){return this._checkProposedApi(),this._core.registerCharacterJoiner(m)}deregisterCharacterJoiner(m){this._checkProposedApi(),this._core.deregisterCharacterJoiner(m)}registerMarker(m=0){return this._verifyIntegers(m),this._core.registerMarker(m)}registerDecoration(m){return this._checkProposedApi(),this._verifyPositiveIntegers(m.x??0,m.width??0,m.height??0),this._core.registerDecoration(m)}hasSelection(){return this._core.hasSelection()}select(m,g,v){this._verifyIntegers(m,g,v),this._core.select(m,g,v)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(m,g){this._verifyIntegers(m,g),this._core.selectLines(m,g)}dispose(){super.dispose()}scrollLines(m){this._verifyIntegers(m),this._core.scrollLines(m)}scrollPages(m){this._verifyIntegers(m),this._core.scrollPages(m)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(m){this._verifyIntegers(m),this._core.scrollToLine(m)}clear(){this._core.clear()}write(m,g){this._core.write(m,g)}writeln(m,g){this._core.write(m),this._core.write(`\r
`,g)}paste(m){this._core.paste(m)}refresh(m,g){this._verifyIntegers(m,g),this._core.refresh(m,g)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(m){this._addonManager.loadAddon(this,m)}static get strings(){return o}_verifyIntegers(...m){for(let g of m)if(g===1/0||isNaN(g)||g%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...m){for(let g of m)if(g&&(g===1/0||isNaN(g)||g%1!=0||g<0))throw new Error("This API only accepts positive integers")}}n.Terminal=p})(),i})()))});var W2=globalThis,V2=W2.ShadowRoot&&(W2.ShadyCSS===void 0||W2.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,w7=Symbol(),E$=new WeakMap,jg=class{constructor(t,r,i){if(this._$cssResult$=!0,i!==w7)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=r}get styleSheet(){let t=this.o,r=this.t;if(V2&&t===void 0){let i=r!==void 0&&r.length===1;i&&(t=E$.get(r)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&E$.set(r,t))}return t}toString(){return this.cssText}},G2=e=>new jg(typeof e=="string"?e:e+"",void 0,w7),Ie=(e,...t)=>{let r=e.length===1?e[0]:t.reduce(((i,n,o)=>i+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[o+1]),e[0]);return new jg(r,e,w7)},A$=(e,t)=>{if(V2)e.adoptedStyleSheets=t.map((r=>r instanceof CSSStyleSheet?r:r.styleSheet));else for(let r of t){let i=document.createElement("style"),n=W2.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=r.cssText,e.appendChild(i)}},S7=V2?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let r="";for(let i of t.cssRules)r+=i.cssText;return G2(r)})(e):e;var{is:yie,defineProperty:xie,getOwnPropertyDescriptor:_ie,getOwnPropertyNames:wie,getOwnPropertySymbols:Sie,getPrototypeOf:Cie}=Object,zc=globalThis,T$=zc.trustedTypes,kie=T$?T$.emptyScript:"",Eie=zc.reactiveElementPolyfillSupport,Wg=(e,t)=>e,Hc={toAttribute(e,t){switch(t){case Boolean:e=e?kie:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=e!==null;break;case Number:r=e===null?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch{r=null}}return r}},Y2=(e,t)=>!yie(e,t),D$={attribute:!0,type:String,converter:Hc,reflect:!1,useDefault:!1,hasChanged:Y2};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),zc.litPropertyMetadata??(zc.litPropertyMetadata=new WeakMap);var hu=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,r=D$){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(t,r),!r.noAccessor){let i=Symbol(),n=this.getPropertyDescriptor(t,i,r);n!==void 0&&xie(this.prototype,t,n)}}static getPropertyDescriptor(t,r,i){let{get:n,set:o}=_ie(this.prototype,t)??{get(){return this[r]},set(s){this[r]=s}};return{get:n,set(s){let a=n?.call(this);o?.call(this,s),this.requestUpdate(t,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??D$}static _$Ei(){if(this.hasOwnProperty(Wg("elementProperties")))return;let t=Cie(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(Wg("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Wg("properties"))){let r=this.properties,i=[...wie(r),...Sie(r)];for(let n of i)this.createProperty(n,r[n])}let t=this[Symbol.metadata];if(t!==null){let r=litPropertyMetadata.get(t);if(r!==void 0)for(let[i,n]of r)this.elementProperties.set(i,n)}this._$Eh=new Map;for(let[r,i]of this.elementProperties){let n=this._$Eu(r,i);n!==void 0&&this._$Eh.set(n,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let r=[];if(Array.isArray(t)){let i=new Set(t.flat(1/0).reverse());for(let n of i)r.unshift(S7(n))}else t!==void 0&&r.push(S7(t));return r}static _$Eu(t,r){let i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){let t=new Map,r=this.constructor.elementProperties;for(let i of r.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){let t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return A$(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,r,i){this._$AK(t,i)}_$ET(t,r){let i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(n!==void 0&&i.reflect===!0){let o=(i.converter?.toAttribute!==void 0?i.converter:Hc).toAttribute(r,i.type);this._$Em=t,o==null?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(t,r){let i=this.constructor,n=i._$Eh.get(t);if(n!==void 0&&this._$Em!==n){let o=i.getPropertyOptions(n),s=typeof o.converter=="function"?{fromAttribute:o.converter}:o.converter?.fromAttribute!==void 0?o.converter:Hc;this._$Em=n;let a=s.fromAttribute(r,o.type);this[n]=a??this._$Ej?.get(n)??a,this._$Em=null}}requestUpdate(t,r,i){if(t!==void 0){let n=this.constructor,o=this[t];if(i??(i=n.getPropertyOptions(t)),!((i.hasChanged??Y2)(o,r)||i.useDefault&&i.reflect&&o===this._$Ej?.get(t)&&!this.hasAttribute(n._$Eu(t,i))))return;this.C(t,r,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(t,r,{useDefault:i,reflect:n,wrapped:o},s){i&&!(this._$Ej??(this._$Ej=new Map)).has(t)&&(this._$Ej.set(t,s??r??this[t]),o!==!0||s!==void 0)||(this._$AL.has(t)||(this.hasUpdated||i||(r=void 0),this._$AL.set(t,r)),n===!0&&this._$Em!==t&&(this._$Eq??(this._$Eq=new Set)).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}let t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(let[n,o]of this._$Ep)this[n]=o;this._$Ep=void 0}let i=this.constructor.elementProperties;if(i.size>0)for(let[n,o]of i){let{wrapped:s}=o,a=this[n];s!==!0||this._$AL.has(n)||a===void 0||this.C(n,void 0,o,a)}}let t=!1,r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),this._$EO?.forEach((i=>i.hostUpdate?.())),this.update(r)):this._$EM()}catch(i){throw t=!1,this._$EM(),i}t&&this._$AE(r)}willUpdate(t){}_$AE(t){this._$EO?.forEach((r=>r.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&(this._$Eq=this._$Eq.forEach((r=>this._$ET(r,this[r])))),this._$EM()}updated(t){}firstUpdated(t){}};hu.elementStyles=[],hu.shadowRootOptions={mode:"open"},hu[Wg("elementProperties")]=new Map,hu[Wg("finalized")]=new Map,Eie?.({ReactiveElement:hu}),(zc.reactiveElementVersions??(zc.reactiveElementVersions=[])).push("2.1.1");var Gg=globalThis,X2=Gg.trustedTypes,R$=X2?X2.createPolicy("lit-html",{createHTML:e=>e}):void 0,k7="$lit$",du=`lit$${Math.random().toFixed(9).slice(2)}$`,E7="?"+du,Aie=`<${E7}>`,_h=document,Yg=()=>_h.createComment(""),Xg=e=>e===null||typeof e!="object"&&typeof e!="function",A7=Array.isArray,P$=e=>A7(e)||typeof e?.[Symbol.iterator]=="function",C7=`[ 	
\f\r]`,Vg=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,M$=/-->/g,F$=/>/g,yh=RegExp(`>|${C7}(?:([^\\s"'>=/]+)(${C7}*=${C7}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),O$=/'/g,$$=/"/g,I$=/^(?:script|style|textarea|title)$/i,T7=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),Y=T7(1),tx=T7(2),N$=T7(3),ti=Symbol.for("lit-noChange"),at=Symbol.for("lit-nothing"),L$=new WeakMap,xh=_h.createTreeWalker(_h,129);function B$(e,t){if(!A7(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return R$!==void 0?R$.createHTML(t):t}var z$=(e,t)=>{let r=e.length-1,i=[],n,o=t===2?"<svg>":t===3?"<math>":"",s=Vg;for(let a=0;a<r;a++){let l=e[a],u,c,f=-1,h=0;for(;h<l.length&&(s.lastIndex=h,c=s.exec(l),c!==null);)h=s.lastIndex,s===Vg?c[1]==="!--"?s=M$:c[1]!==void 0?s=F$:c[2]!==void 0?(I$.test(c[2])&&(n=RegExp("</"+c[2],"g")),s=yh):c[3]!==void 0&&(s=yh):s===yh?c[0]===">"?(s=n??Vg,f=-1):c[1]===void 0?f=-2:(f=s.lastIndex-c[2].length,u=c[1],s=c[3]===void 0?yh:c[3]==='"'?$$:O$):s===$$||s===O$?s=yh:s===M$||s===F$?s=Vg:(s=yh,n=void 0);let p=s===yh&&e[a+1].startsWith("/>")?" ":"";o+=s===Vg?l+Aie:f>=0?(i.push(u),l.slice(0,f)+k7+l.slice(f)+du+p):l+du+(f===-2?a:p)}return[B$(e,o+(e[r]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),i]},Kg=class e{constructor({strings:t,_$litType$:r},i){let n;this.parts=[];let o=0,s=0,a=t.length-1,l=this.parts,[u,c]=z$(t,r);if(this.el=e.createElement(u,i),xh.currentNode=this.el.content,r===2||r===3){let f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(n=xh.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(let f of n.getAttributeNames())if(f.endsWith(k7)){let h=c[s++],p=n.getAttribute(f).split(du),d=/([.?@])?(.*)/.exec(h);l.push({type:1,index:o,name:d[2],strings:p,ctor:d[1]==="."?Z2:d[1]==="?"?J2:d[1]==="@"?Q2:Sh}),n.removeAttribute(f)}else f.startsWith(du)&&(l.push({type:6,index:o}),n.removeAttribute(f));if(I$.test(n.tagName)){let f=n.textContent.split(du),h=f.length-1;if(h>0){n.textContent=X2?X2.emptyScript:"";for(let p=0;p<h;p++)n.append(f[p],Yg()),xh.nextNode(),l.push({type:2,index:++o});n.append(f[h],Yg())}}}else if(n.nodeType===8)if(n.data===E7)l.push({type:2,index:o});else{let f=-1;for(;(f=n.data.indexOf(du,f+1))!==-1;)l.push({type:7,index:o}),f+=du.length-1}o++}}static createElement(t,r){let i=_h.createElement("template");return i.innerHTML=t,i}};function wh(e,t,r=e,i){if(t===ti)return t;let n=i!==void 0?r._$Co?.[i]:r._$Cl,o=Xg(t)?void 0:t._$litDirective$;return n?.constructor!==o&&(n?._$AO?.(!1),o===void 0?n=void 0:(n=new o(e),n._$AT(e,r,i)),i!==void 0?(r._$Co??(r._$Co=[]))[i]=n:r._$Cl=n),n!==void 0&&(t=wh(e,n._$AS(e,t.values),n,i)),t}var K2=class{constructor(t,r){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){let{el:{content:r},parts:i}=this._$AD,n=(t?.creationScope??_h).importNode(r,!0);xh.currentNode=n;let o=xh.nextNode(),s=0,a=0,l=i[0];for(;l!==void 0;){if(s===l.index){let u;l.type===2?u=new E0(o,o.nextSibling,this,t):l.type===1?u=new l.ctor(o,l.name,l.strings,this,t):l.type===6&&(u=new ex(o,this,t)),this._$AV.push(u),l=i[++a]}s!==l?.index&&(o=xh.nextNode(),s++)}return xh.currentNode=_h,n}p(t){let r=0;for(let i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,r),r+=i.strings.length-2):i._$AI(t[r])),r++}},E0=class e{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,r,i,n){this.type=2,this._$AH=at,this._$AN=void 0,this._$AA=t,this._$AB=r,this._$AM=i,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode,r=this._$AM;return r!==void 0&&t?.nodeType===11&&(t=r.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,r=this){t=wh(this,t,r),Xg(t)?t===at||t==null||t===""?(this._$AH!==at&&this._$AR(),this._$AH=at):t!==this._$AH&&t!==ti&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):P$(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==at&&Xg(this._$AH)?this._$AA.nextSibling.data=t:this.T(_h.createTextNode(t)),this._$AH=t}$(t){let{values:r,_$litType$:i}=t,n=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=Kg.createElement(B$(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===n)this._$AH.p(r);else{let o=new K2(n,this),s=o.u(this.options);o.p(r),this.T(s),this._$AH=o}}_$AC(t){let r=L$.get(t.strings);return r===void 0&&L$.set(t.strings,r=new Kg(t)),r}k(t){A7(this._$AH)||(this._$AH=[],this._$AR());let r=this._$AH,i,n=0;for(let o of t)n===r.length?r.push(i=new e(this.O(Yg()),this.O(Yg()),this,this.options)):i=r[n],i._$AI(o),n++;n<r.length&&(this._$AR(i&&i._$AB.nextSibling,n),r.length=n)}_$AR(t=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);t!==this._$AB;){let i=t.nextSibling;t.remove(),t=i}}setConnected(t){this._$AM===void 0&&(this._$Cv=t,this._$AP?.(t))}},Sh=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,r,i,n,o){this.type=1,this._$AH=at,this._$AN=void 0,this.element=t,this.name=r,this._$AM=n,this.options=o,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=at}_$AI(t,r=this,i,n){let o=this.strings,s=!1;if(o===void 0)t=wh(this,t,r,0),s=!Xg(t)||t!==this._$AH&&t!==ti,s&&(this._$AH=t);else{let a=t,l,u;for(t=o[0],l=0;l<o.length-1;l++)u=wh(this,a[i+l],r,l),u===ti&&(u=this._$AH[l]),s||(s=!Xg(u)||u!==this._$AH[l]),u===at?t=at:t!==at&&(t+=(u??"")+o[l+1]),this._$AH[l]=u}s&&!n&&this.j(t)}j(t){t===at?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},Z2=class extends Sh{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===at?void 0:t}},J2=class extends Sh{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==at)}},Q2=class extends Sh{constructor(t,r,i,n,o){super(t,r,i,n,o),this.type=5}_$AI(t,r=this){if((t=wh(this,t,r,0)??at)===ti)return;let i=this._$AH,n=t===at&&i!==at||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,o=t!==at&&(i===at||n);n&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}},ex=class{constructor(t,r,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){wh(this,t)}},H$={M:k7,P:du,A:E7,C:1,L:z$,R:K2,D:P$,V:wh,I:E0,H:Sh,N:J2,U:Q2,B:Z2,F:ex},Tie=Gg.litHtmlPolyfillSupport;Tie?.(Kg,E0),(Gg.litHtmlVersions??(Gg.litHtmlVersions=[])).push("3.3.1");var U$=(e,t,r)=>{let i=r?.renderBefore??t,n=i._$litPart$;if(n===void 0){let o=r?.renderBefore??null;i._$litPart$=n=new E0(t.insertBefore(Yg(),o),o,void 0,r??{})}return n._$AI(e),n};var Zg=globalThis,sr=class extends hu{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;let t=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=t.firstChild),t}update(t){let r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=U$(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return ti}};sr._$litElement$=!0,sr.finalized=!0,Zg.litElementHydrateSupport?.({LitElement:sr});var Die=Zg.litElementPolyfillSupport;Die?.({LitElement:sr});(Zg.litElementVersions??(Zg.litElementVersions=[])).push("4.2.1");var q$=Ie`
  .breadcrumb {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
  }
`;var D7=new Set,A0=new Map,Ch,R7="ltr",M7="en",j$=typeof MutationObserver<"u"&&typeof document<"u"&&typeof document.documentElement<"u";if(j$){let e=new MutationObserver(W$);R7=document.documentElement.dir||"ltr",M7=document.documentElement.lang||navigator.language,e.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]})}function Jg(...e){e.map(t=>{let r=t.$code.toLowerCase();A0.has(r)?A0.set(r,Object.assign(Object.assign({},A0.get(r)),t)):A0.set(r,t),Ch||(Ch=t)}),W$()}function W$(){j$&&(R7=document.documentElement.dir||"ltr",M7=document.documentElement.lang||navigator.language),[...D7.keys()].map(e=>{typeof e.requestUpdate=="function"&&e.requestUpdate()})}var rx=class{constructor(t){this.host=t,this.host.addController(this)}hostConnected(){D7.add(this.host)}hostDisconnected(){D7.delete(this.host)}dir(){return`${this.host.dir||R7}`.toLowerCase()}lang(){return`${this.host.lang||M7}`.toLowerCase()}getTranslationData(t){var r,i;let n=new Intl.Locale(t.replace(/_/g,"-")),o=n?.language.toLowerCase(),s=(i=(r=n?.region)===null||r===void 0?void 0:r.toLowerCase())!==null&&i!==void 0?i:"",a=A0.get(`${o}-${s}`),l=A0.get(o);return{locale:n,language:o,region:s,primary:a,secondary:l}}exists(t,r){var i;let{primary:n,secondary:o}=this.getTranslationData((i=r.lang)!==null&&i!==void 0?i:this.lang());return r=Object.assign({includeFallback:!1},r),!!(n&&n[t]||o&&o[t]||r.includeFallback&&Ch&&Ch[t])}term(t,...r){let{primary:i,secondary:n}=this.getTranslationData(this.lang()),o;if(i&&i[t])o=i[t];else if(n&&n[t])o=n[t];else if(Ch&&Ch[t])o=Ch[t];else return console.error(`No translation found for: ${String(t)}`),String(t);return typeof o=="function"?o(...r):o}date(t,r){return t=new Date(t),new Intl.DateTimeFormat(this.lang(),r).format(t)}number(t,r){return t=Number(t),isNaN(t)?"":new Intl.NumberFormat(this.lang(),r).format(t)}relativeTime(t,r,i){return new Intl.RelativeTimeFormat(this.lang(),i).format(t,r)}};var V$={$code:"en",$name:"English",$dir:"ltr",carousel:"Carousel",clearEntry:"Clear entry",close:"Close",copied:"Copied",copy:"Copy",currentValue:"Current value",error:"Error",goToSlide:(e,t)=>`Go to slide ${e} of ${t}`,hidePassword:"Hide password",loading:"Loading",nextSlide:"Next slide",numOptionsSelected:e=>e===0?"No options selected":e===1?"1 option selected":`${e} options selected`,previousSlide:"Previous slide",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",slideNum:e=>`Slide ${e}`,toggleColorFormat:"Toggle color format"};Jg(V$);var G$=V$;var Jt=class extends rx{};Jg(G$);var F7="";function Qg(e){F7=e}function O7(e=""){if(!F7){let t=[...document.getElementsByTagName("script")],r=t.find(i=>i.hasAttribute("data-shoelace"));if(r)Qg(r.getAttribute("data-shoelace"));else{let i=t.find(o=>/shoelace(\.min)?\.js($|\?)/.test(o.src)||/shoelace-autoloader(\.min)?\.js($|\?)/.test(o.src)),n="";i&&(n=i.getAttribute("src")),Qg(n.split("/").slice(0,-1).join("/"))}}return F7.replace(/\/$/,"")+(e?`/${e.replace(/^\//,"")}`:"")}var Rie={name:"default",resolver:e=>O7(`assets/icons/${e}.svg`)},Y$=Rie;var X$={caret:`
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  `,check:`
    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor">
          <g transform="translate(3.428571, 3.428571)">
            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>
            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"chevron-down":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,"chevron-left":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
    </svg>
  `,"chevron-right":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,copy:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2Zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6ZM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2Z"/>
    </svg>
  `,eye:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
    </svg>
  `,"eye-slash":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
    </svg>
  `,eyedropper:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">
      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>
    </svg>
  `,"grip-vertical":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">
      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>
    </svg>
  `,indeterminate:`
    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(2.285714, 6.857143)">
            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"person-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
    </svg>
  `,"play-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
    </svg>
  `,"pause-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">
      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
    </svg>
  `,radio:`
    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g fill="currentColor">
          <circle cx="8" cy="8" r="3.42857143"></circle>
        </g>
      </g>
    </svg>
  `,"star-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  `,"x-lg":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
    </svg>
  `,"x-circle-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>
    </svg>
  `},Mie={name:"system",resolver:e=>e in X$?`data:image/svg+xml,${encodeURIComponent(X$[e])}`:""},K$=Mie;var Fie=[Y$,K$],$7=[];function Z$(e){$7.push(e)}function J$(e){$7=$7.filter(t=>t!==e)}function L7(e){return Fie.find(t=>t.name===e)}var Q$=Ie`
  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    box-sizing: content-box !important;
  }

  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`;var rL=Object.defineProperty,Oie=Object.defineProperties,$ie=Object.getOwnPropertyDescriptor,Lie=Object.getOwnPropertyDescriptors,eL=Object.getOwnPropertySymbols,Pie=Object.prototype.hasOwnProperty,Iie=Object.prototype.propertyIsEnumerable,P7=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),I7=e=>{throw TypeError(e)},tL=(e,t,r)=>t in e?rL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bo=(e,t)=>{for(var r in t||(t={}))Pie.call(t,r)&&tL(e,r,t[r]);if(eL)for(var r of eL(t))Iie.call(t,r)&&tL(e,r,t[r]);return e},pu=(e,t)=>Oie(e,Lie(t)),F=(e,t,r,i)=>{for(var n=i>1?void 0:i?$ie(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(n=(i?s(t,r,n):s(n))||n);return i&&n&&rL(t,r,n),n},iL=(e,t,r)=>t.has(e)||I7("Cannot "+r),nL=(e,t,r)=>(iL(e,t,"read from private field"),r?r.call(e):t.get(e)),oL=(e,t,r)=>t.has(e)?I7("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),sL=(e,t,r,i)=>(iL(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Nie=function(e,t){this[0]=e,this[1]=t},aL=e=>{var t=e[P7("asyncIterator")],r=!1,i,n={};return t==null?(t=e[P7("iterator")](),i=o=>n[o]=s=>t[o](s)):(t=t.call(e),i=o=>n[o]=s=>{if(r){if(r=!1,o==="throw")throw s;return s}return r=!0,{done:!1,value:new Nie(new Promise(a=>{var l=t[o](s);l instanceof Object||I7("Object expected"),a(l)}),1)}}),n[P7("iterator")]=()=>n,i("next"),"throw"in t?i("throw"):n.throw=o=>{throw o},"return"in t&&i("return"),n};function je(e,t){let r=bo({waitUntilFirstUpdate:!1},t);return(i,n)=>{let{update:o}=i,s=Array.isArray(e)?e:[e];i.update=function(a){s.forEach(l=>{let u=l;if(a.has(u)){let c=a.get(u),f=this[u];c!==f&&(!r.waitUntilFirstUpdate||this.hasUpdated)&&this[n](c,f)}}),o.call(this,a)}}}var et=Ie`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`;var mn=e=>(t,r)=>{r!==void 0?r.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)};var Bie={attribute:!0,type:String,converter:Hc,reflect:!1,hasChanged:Y2},zie=(e=Bie,t,r)=>{let{kind:i,metadata:n}=r,o=globalThis.litPropertyMetadata.get(n);if(o===void 0&&globalThis.litPropertyMetadata.set(n,o=new Map),i==="setter"&&((e=Object.create(e)).wrapped=!0),o.set(r.name,e),i==="accessor"){let{name:s}=r;return{set(a){let l=t.get.call(this);t.set.call(this,a),this.requestUpdate(s,l,e)},init(a){return a!==void 0&&this.C(s,void 0,e,a),a}}}if(i==="setter"){let{name:s}=r;return function(a){let l=this[s];t.call(this,a),this.requestUpdate(s,l,e)}}throw Error("Unsupported decorator location: "+i)};function U(e){return(t,r)=>typeof r=="object"?zie(e,t,r):((i,n,o)=>{let s=n.hasOwnProperty(o);return n.constructor.createProperty(o,i),s?Object.getOwnPropertyDescriptor(n,o):void 0})(e,t,r)}function Le(e){return U({...e,state:!0,attribute:!1})}function T0(e){return(t,r)=>{let i=typeof t=="function"?t:t[r];Object.assign(i,e)}}var kh=(e,t,r)=>(r.configurable=!0,r.enumerable=!0,Reflect.decorate&&typeof t!="object"&&Object.defineProperty(e,t,r),r);function Ne(e,t){return(r,i,n)=>{let o=s=>s.renderRoot?.querySelector(e)??null;if(t){let{get:s,set:a}=typeof i=="object"?r:n??(()=>{let l=Symbol();return{get(){return this[l]},set(u){this[l]=u}}})();return kh(r,i,{get(){let l=s.call(this);return l===void 0&&(l=o(this),(l!==null||this.hasUpdated)&&a.call(this,l)),l}})}return kh(r,i,{get(){return o(this)}})}}var ix,Ge=class extends sr{constructor(){super(),oL(this,ix,!1),this.initialReflectedProperties=new Map,Object.entries(this.constructor.dependencies).forEach(([e,t])=>{this.constructor.define(e,t)})}emit(e,t){let r=new CustomEvent(e,bo({bubbles:!0,cancelable:!1,composed:!0,detail:{}},t));return this.dispatchEvent(r),r}static define(e,t=this,r={}){let i=customElements.get(e);if(!i){try{customElements.define(e,t,r)}catch{customElements.define(e,class extends t{},r)}return}let n=" (unknown version)",o=n;"version"in t&&t.version&&(n=" v"+t.version),"version"in i&&i.version&&(o=" v"+i.version),!(n&&o&&n===o)&&console.warn(`Attempted to register <${e}>${n}, but <${e}>${o} has already been registered.`)}attributeChangedCallback(e,t,r){nL(this,ix)||(this.constructor.elementProperties.forEach((i,n)=>{i.reflect&&this[n]!=null&&this.initialReflectedProperties.set(n,this[n])}),sL(this,ix,!0)),super.attributeChangedCallback(e,t,r)}willUpdate(e){super.willUpdate(e),this.initialReflectedProperties.forEach((t,r)=>{e.has(r)&&this[r]==null&&(this[r]=t)})}};ix=new WeakMap;Ge.version="2.20.1";Ge.dependencies={};F([U()],Ge.prototype,"dir",2);F([U()],Ge.prototype,"lang",2);var{I:Hie}=H$;var uL=(e,t)=>t===void 0?e?._$litType$!==void 0:e?._$litType$===t;var nx=e=>e.strings===void 0,lL=()=>document.createComment(""),D0=(e,t,r)=>{let i=e._$AA.parentNode,n=t===void 0?e._$AB:t._$AA;if(r===void 0){let o=i.insertBefore(lL(),n),s=i.insertBefore(lL(),n);r=new Hie(o,s,e,e.options)}else{let o=r._$AB.nextSibling,s=r._$AM,a=s!==e;if(a){let l;r._$AQ?.(e),r._$AM=e,r._$AP!==void 0&&(l=e._$AU)!==s._$AU&&r._$AP(l)}if(o!==n||a){let l=r._$AA;for(;l!==o;){let u=l.nextSibling;i.insertBefore(l,n),l=u}}}return r},Uc=(e,t,r=e)=>(e._$AI(t,r),e),Uie={},ox=(e,t=Uie)=>e._$AH=t,cL=e=>e._$AH,sx=e=>{e._$AR(),e._$AA.remove()};var e1=Symbol(),ax=Symbol(),N7,B7=new Map,Pt=class extends Ge{constructor(){super(...arguments),this.initialRender=!1,this.svg=null,this.label="",this.library="default"}async resolveIcon(e,t){var r;let i;if(t?.spriteSheet)return this.svg=Y`<svg part="svg">
        <use part="use" href="${e}"></use>
      </svg>`,this.svg;try{if(i=await fetch(e,{mode:"cors"}),!i.ok)return i.status===410?e1:ax}catch{return ax}try{let n=document.createElement("div");n.innerHTML=await i.text();let o=n.firstElementChild;if(((r=o?.tagName)==null?void 0:r.toLowerCase())!=="svg")return e1;N7||(N7=new DOMParser);let a=N7.parseFromString(o.outerHTML,"text/html").body.querySelector("svg");return a?(a.part.add("svg"),document.adoptNode(a)):e1}catch{return e1}}connectedCallback(){super.connectedCallback(),Z$(this)}firstUpdated(){this.initialRender=!0,this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),J$(this)}getIconSource(){let e=L7(this.library);return this.name&&e?{url:e.resolver(this.name),fromLibrary:!0}:{url:this.src,fromLibrary:!1}}handleLabelChange(){typeof this.label=="string"&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var e;let{url:t,fromLibrary:r}=this.getIconSource(),i=r?L7(this.library):void 0;if(!t){this.svg=null;return}let n=B7.get(t);if(n||(n=this.resolveIcon(t,i),B7.set(t,n)),!this.initialRender)return;let o=await n;if(o===ax&&B7.delete(t),t===this.getIconSource().url){if(uL(o)){if(this.svg=o,i){await this.updateComplete;let s=this.shadowRoot.querySelector("[part='svg']");typeof i.mutator=="function"&&s&&i.mutator(s)}return}switch(o){case ax:case e1:this.svg=null,this.emit("sl-error");break;default:this.svg=o.cloneNode(!0),(e=i?.mutator)==null||e.call(i,this.svg),this.emit("sl-load")}}}render(){return this.svg}};Pt.styles=[et,Q$];F([Le()],Pt.prototype,"svg",2);F([U({reflect:!0})],Pt.prototype,"name",2);F([U()],Pt.prototype,"src",2);F([U()],Pt.prototype,"label",2);F([U({reflect:!0})],Pt.prototype,"library",2);F([je("label")],Pt.prototype,"handleLabelChange",1);F([je(["name","src","library"])],Pt.prototype,"setIcon",1);var Eh=class extends Ge{constructor(){super(...arguments),this.localize=new Jt(this),this.separatorDir=this.localize.dir(),this.label=""}getSeparator(){let t=this.separatorSlot.assignedElements({flatten:!0})[0].cloneNode(!0);return[t,...t.querySelectorAll("[id]")].forEach(r=>r.removeAttribute("id")),t.setAttribute("data-default",""),t.slot="separator",t}handleSlotChange(){let e=[...this.defaultSlot.assignedElements({flatten:!0})].filter(t=>t.tagName.toLowerCase()==="sl-breadcrumb-item");e.forEach((t,r)=>{let i=t.querySelector('[slot="separator"]');i===null?t.append(this.getSeparator()):i.hasAttribute("data-default")&&i.replaceWith(this.getSeparator()),r===e.length-1?t.setAttribute("aria-current","page"):t.removeAttribute("aria-current")})}render(){return this.separatorDir!==this.localize.dir()&&(this.separatorDir=this.localize.dir(),this.updateComplete.then(()=>this.handleSlotChange())),Y`
      <nav part="base" class="breadcrumb" aria-label=${this.label}>
        <slot @slotchange=${this.handleSlotChange}></slot>
      </nav>

      <span hidden aria-hidden="true">
        <slot name="separator">
          <sl-icon name=${this.localize.dir()==="rtl"?"chevron-left":"chevron-right"} library="system"></sl-icon>
        </slot>
      </span>
    `}};Eh.styles=[et,q$];Eh.dependencies={"sl-icon":Pt};F([Ne("slot")],Eh.prototype,"defaultSlot",2);F([Ne('slot[name="separator"]')],Eh.prototype,"separatorSlot",2);F([U()],Eh.prototype,"label",2);Eh.define("sl-breadcrumb");var fL=Ie`
  :host {
    display: inline-flex;
  }

  .breadcrumb-item {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    color: var(--sl-color-neutral-600);
    line-height: var(--sl-line-height-normal);
    white-space: nowrap;
  }

  .breadcrumb-item__label {
    display: inline-block;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: inherit;
    text-decoration: none;
    color: inherit;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    padding: 0;
    margin: 0;
    cursor: pointer;
    transition: var(--sl-transition-fast) --color;
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label {
    color: var(--sl-color-primary-600);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:hover {
    color: var(--sl-color-primary-500);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:active {
    color: var(--sl-color-primary-600);
  }

  .breadcrumb-item__label:focus {
    outline: none;
  }

  .breadcrumb-item__label:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .breadcrumb-item__prefix,
  .breadcrumb-item__suffix {
    display: none;
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .breadcrumb-item--has-prefix .breadcrumb-item__prefix {
    display: inline-flex;
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .breadcrumb-item--has-suffix .breadcrumb-item__suffix {
    display: inline-flex;
    margin-inline-start: var(--sl-spacing-x-small);
  }

  :host(:last-of-type) .breadcrumb-item__separator {
    display: none;
  }

  .breadcrumb-item__separator {
    display: inline-flex;
    align-items: center;
    margin: 0 var(--sl-spacing-x-small);
    user-select: none;
    -webkit-user-select: none;
  }
`;var Lr=class{constructor(e,...t){this.slotNames=[],this.handleSlotChange=r=>{let i=r.target;(this.slotNames.includes("[default]")&&!i.name||i.name&&this.slotNames.includes(i.name))&&this.host.requestUpdate()},(this.host=e).addController(this),this.slotNames=t}hasDefaultSlot(){return[...this.host.childNodes].some(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent.trim()!=="")return!0;if(e.nodeType===e.ELEMENT_NODE){let t=e;if(t.tagName.toLowerCase()==="sl-visually-hidden")return!1;if(!t.hasAttribute("slot"))return!0}return!1})}hasNamedSlot(e){return this.host.querySelector(`:scope > [slot="${e}"]`)!==null}test(e){return e==="[default]"?this.hasDefaultSlot():this.hasNamedSlot(e)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}};var Vi={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},jn=e=>(...t)=>({_$litDirective$:e,values:t}),yo=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,r,i){this._$Ct=t,this._$AM=r,this._$Ci=i}_$AS(t,r){return this.update(t,r)}update(t,r){return this.render(...r)}};var Qe=jn(class extends yo{constructor(e){if(super(e),e.type!==Vi.ATTRIBUTE||e.name!=="class"||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((i=>i!==""))));for(let i in t)t[i]&&!this.nt?.has(i)&&this.st.add(i);return this.render(t)}let r=e.element.classList;for(let i of this.st)i in t||(r.remove(i),this.st.delete(i));for(let i in t){let n=!!t[i];n===this.st.has(i)||this.nt?.has(i)||(n?(r.add(i),this.st.add(i)):(r.remove(i),this.st.delete(i)))}return ti}});var Se=e=>e??at;var mu=class extends Ge{constructor(){super(...arguments),this.hasSlotController=new Lr(this,"prefix","suffix"),this.renderType="button",this.rel="noreferrer noopener"}setRenderType(){let e=this.defaultSlot.assignedElements({flatten:!0}).filter(t=>t.tagName.toLowerCase()==="sl-dropdown").length>0;if(this.href){this.renderType="link";return}if(e){this.renderType="dropdown";return}this.renderType="button"}hrefChanged(){this.setRenderType()}handleSlotChange(){this.setRenderType()}render(){return Y`
      <div
        part="base"
        class=${Qe({"breadcrumb-item":!0,"breadcrumb-item--has-prefix":this.hasSlotController.test("prefix"),"breadcrumb-item--has-suffix":this.hasSlotController.test("suffix")})}
      >
        <span part="prefix" class="breadcrumb-item__prefix">
          <slot name="prefix"></slot>
        </span>

        ${this.renderType==="link"?Y`
              <a
                part="label"
                class="breadcrumb-item__label breadcrumb-item__label--link"
                href="${this.href}"
                target="${Se(this.target?this.target:void 0)}"
                rel=${Se(this.target?this.rel:void 0)}
              >
                <slot @slotchange=${this.handleSlotChange}></slot>
              </a>
            `:""}
        ${this.renderType==="button"?Y`
              <button part="label" type="button" class="breadcrumb-item__label breadcrumb-item__label--button">
                <slot @slotchange=${this.handleSlotChange}></slot>
              </button>
            `:""}
        ${this.renderType==="dropdown"?Y`
              <div part="label" class="breadcrumb-item__label breadcrumb-item__label--drop-down">
                <slot @slotchange=${this.handleSlotChange}></slot>
              </div>
            `:""}

        <span part="suffix" class="breadcrumb-item__suffix">
          <slot name="suffix"></slot>
        </span>

        <span part="separator" class="breadcrumb-item__separator" aria-hidden="true">
          <slot name="separator"></slot>
        </span>
      </div>
    `}};mu.styles=[et,fL];F([Ne("slot:not([name])")],mu.prototype,"defaultSlot",2);F([Le()],mu.prototype,"renderType",2);F([U()],mu.prototype,"href",2);F([U()],mu.prototype,"target",2);F([U()],mu.prototype,"rel",2);F([je("href",{waitUntilFirstUpdate:!0})],mu.prototype,"hrefChanged",1);mu.define("sl-breadcrumb-item");var qie=Object.defineProperty,jie=(e,t,r)=>t in e?qie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z7=(e,t,r)=>(jie(e,typeof t!="symbol"?t+"":t,r),r),Wie=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},H7=(e,t)=>{if(Object(t)!==t)throw TypeError('Cannot use the "in" operator on this value');return e.has(t)},lx=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},hL=(e,t,r)=>(Wie(e,t,"access private method"),r);function dL(e,t){return Object.is(e,t)}var ri=null,t1=!1,ux=1,cx=Symbol("SIGNAL");function R0(e){let t=ri;return ri=e,t}function Vie(){return ri}function Gie(){return t1}var V7={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fx(e){if(t1)throw new Error(typeof ngDevMode<"u"&&ngDevMode?"Assertion error: signal read during notification phase":"");if(ri===null)return;ri.consumerOnSignalRead(e);let t=ri.nextProducerIndex++;if(M0(ri),t<ri.producerNode.length&&ri.producerNode[t]!==e&&j7(ri)){let r=ri.producerNode[t];hx(r,ri.producerIndexOfThis[t])}ri.producerNode[t]!==e&&(ri.producerNode[t]=e,ri.producerIndexOfThis[t]=j7(ri)?gL(e,ri,t):0),ri.producerLastReadVersion[t]=e.version}function Yie(){ux++}function pL(e){if(!(!e.dirty&&e.lastCleanEpoch===ux)){if(!e.producerMustRecompute(e)&&!Qie(e)){e.dirty=!1,e.lastCleanEpoch=ux;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=ux}}function mL(e){if(e.liveConsumerNode===void 0)return;let t=t1;t1=!0;try{for(let r of e.liveConsumerNode)r.dirty||Kie(r)}finally{t1=t}}function Xie(){return ri?.consumerAllowSignalWrites!==!1}function Kie(e){var t;e.dirty=!0,mL(e),(t=e.consumerMarkedDirty)==null||t.call(e.wrapper??e)}function Zie(e){return e&&(e.nextProducerIndex=0),R0(e)}function Jie(e,t){if(R0(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(j7(e))for(let r=e.nextProducerIndex;r<e.producerNode.length;r++)hx(e.producerNode[r],e.producerIndexOfThis[r]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Qie(e){M0(e);for(let t=0;t<e.producerNode.length;t++){let r=e.producerNode[t],i=e.producerLastReadVersion[t];if(i!==r.version||(pL(r),i!==r.version))return!0}return!1}function gL(e,t,r){var i;if(G7(e),M0(e),e.liveConsumerNode.length===0){(i=e.watched)==null||i.call(e.wrapper);for(let n=0;n<e.producerNode.length;n++)e.producerIndexOfThis[n]=gL(e.producerNode[n],e,n)}return e.liveConsumerIndexOfThis.push(r),e.liveConsumerNode.push(t)-1}function hx(e,t){var r;if(G7(e),M0(e),typeof ngDevMode<"u"&&ngDevMode&&t>=e.liveConsumerNode.length)throw new Error(`Assertion error: active consumer index ${t} is out of bounds of ${e.liveConsumerNode.length} consumers)`);if(e.liveConsumerNode.length===1){(r=e.unwatched)==null||r.call(e.wrapper);for(let n=0;n<e.producerNode.length;n++)hx(e.producerNode[n],e.producerIndexOfThis[n])}let i=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[i],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[i],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let n=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];M0(o),o.producerIndexOfThis[n]=t}}function j7(e){var t;return e.consumerIsAlwaysLive||(((t=e?.liveConsumerNode)==null?void 0:t.length)??0)>0}function M0(e){e.producerNode??(e.producerNode=[]),e.producerIndexOfThis??(e.producerIndexOfThis=[]),e.producerLastReadVersion??(e.producerLastReadVersion=[])}function G7(e){e.liveConsumerNode??(e.liveConsumerNode=[]),e.liveConsumerIndexOfThis??(e.liveConsumerIndexOfThis=[])}function vL(e){if(pL(e),fx(e),e.value===W7)throw e.error;return e.value}function ene(e){let t=Object.create(tne);t.computation=e;let r=()=>vL(t);return r[cx]=t,r}var U7=Symbol("UNSET"),q7=Symbol("COMPUTING"),W7=Symbol("ERRORED"),tne={...V7,value:U7,dirty:!0,error:null,equal:dL,producerMustRecompute(e){return e.value===U7||e.value===q7},producerRecomputeValue(e){if(e.value===q7)throw new Error("Detected cycle in computations.");let t=e.value;e.value=q7;let r=Zie(e),i,n=!1;try{i=e.computation.call(e.wrapper),n=t!==U7&&t!==W7&&e.equal.call(e.wrapper,t,i)}catch(o){i=W7,e.error=o}finally{Jie(e,r)}if(n){e.value=t;return}e.value=i,e.version++}};function rne(){throw new Error}var ine=rne;function nne(){ine()}function one(e){let t=Object.create(lne);t.value=e;let r=()=>(fx(t),t.value);return r[cx]=t,r}function sne(){return fx(this),this.value}function ane(e,t){Xie()||nne(),e.equal.call(e.wrapper,e.value,t)||(e.value=t,une(e))}var lne={...V7,equal:dL,value:void 0};function une(e){e.version++,Yie(),mL(e)}var Gi=Symbol("node"),Ei;(e=>{var t,r,i,n,o,s;class a{constructor(c,f={}){lx(this,r),z7(this,t);let p=one(c)[cx];if(this[Gi]=p,p.wrapper=this,f){let d=f.equals;d&&(p.equal=d),p.watched=f[e.subtle.watched],p.unwatched=f[e.subtle.unwatched]}}get(){if(!(0,e.isState)(this))throw new TypeError("Wrong receiver type for Signal.State.prototype.get");return sne.call(this[Gi])}set(c){if(!(0,e.isState)(this))throw new TypeError("Wrong receiver type for Signal.State.prototype.set");if(Gie())throw new Error("Writes to signals not permitted during Watcher callback");let f=this[Gi];ane(f,c)}}t=Gi,r=new WeakSet,i=function(){},e.isState=u=>typeof u=="object"&&H7(r,u),e.State=a;class l{constructor(c,f){lx(this,o),z7(this,n);let p=ene(c)[cx];if(p.consumerAllowSignalWrites=!0,this[Gi]=p,p.wrapper=this,f){let d=f.equals;d&&(p.equal=d),p.watched=f[e.subtle.watched],p.unwatched=f[e.subtle.unwatched]}}get(){if(!(0,e.isComputed)(this))throw new TypeError("Wrong receiver type for Signal.Computed.prototype.get");return vL(this[Gi])}}n=Gi,o=new WeakSet,s=function(){},e.isComputed=u=>typeof u=="object"&&H7(o,u),e.Computed=l,(u=>{var c,f,h,p,d;function m(_){let w,k=null;try{k=R0(null),w=_()}finally{R0(k)}return w}u.untrack=m;function g(_){var w;if(!(0,e.isComputed)(_)&&!(0,e.isWatcher)(_))throw new TypeError("Called introspectSources without a Computed or Watcher argument");return((w=_[Gi].producerNode)==null?void 0:w.map(k=>k.wrapper))??[]}u.introspectSources=g;function v(_){var w;if(!(0,e.isComputed)(_)&&!(0,e.isState)(_))throw new TypeError("Called introspectSinks without a Signal argument");return((w=_[Gi].liveConsumerNode)==null?void 0:w.map(k=>k.wrapper))??[]}u.introspectSinks=v;function b(_){if(!(0,e.isComputed)(_)&&!(0,e.isState)(_))throw new TypeError("Called hasSinks without a Signal argument");let w=_[Gi].liveConsumerNode;return w?w.length>0:!1}u.hasSinks=b;function y(_){if(!(0,e.isComputed)(_)&&!(0,e.isWatcher)(_))throw new TypeError("Called hasSources without a Computed or Watcher argument");let w=_[Gi].producerNode;return w?w.length>0:!1}u.hasSources=y;class x{constructor(w){lx(this,f),lx(this,p),z7(this,c);let k=Object.create(V7);k.wrapper=this,k.consumerMarkedDirty=w,k.consumerIsAlwaysLive=!0,k.consumerAllowSignalWrites=!1,k.producerNode=[],this[Gi]=k}watch(...w){if(!(0,e.isWatcher)(this))throw new TypeError("Called unwatch without Watcher receiver");hL(this,p,d).call(this,w);let k=this[Gi];k.dirty=!1;let A=R0(k);for(let M of w)fx(M[Gi]);R0(A)}unwatch(...w){if(!(0,e.isWatcher)(this))throw new TypeError("Called unwatch without Watcher receiver");hL(this,p,d).call(this,w);let k=this[Gi];M0(k);for(let A=k.producerNode.length-1;A>=0;A--)if(w.includes(k.producerNode[A].wrapper)){hx(k.producerNode[A],k.producerIndexOfThis[A]);let M=k.producerNode.length-1;if(k.producerNode[A]=k.producerNode[M],k.producerIndexOfThis[A]=k.producerIndexOfThis[M],k.producerNode.length--,k.producerIndexOfThis.length--,k.nextProducerIndex--,A<k.producerNode.length){let D=k.producerIndexOfThis[A],z=k.producerNode[A];G7(z),z.liveConsumerIndexOfThis[D]=A}}}getPending(){if(!(0,e.isWatcher)(this))throw new TypeError("Called getPending without Watcher receiver");return this[Gi].producerNode.filter(k=>k.dirty).map(k=>k.wrapper)}}c=Gi,f=new WeakSet,h=function(){},p=new WeakSet,d=function(_){for(let w of _)if(!(0,e.isComputed)(w)&&!(0,e.isState)(w))throw new TypeError("Called watch/unwatch without a Computed or State argument")},e.isWatcher=_=>H7(f,_),u.Watcher=x;function S(){var _;return(_=Vie())==null?void 0:_.wrapper}u.currentComputed=S,u.watched=Symbol("watched"),u.unwatched=Symbol("unwatched")})(e.subtle||(e.subtle={}))})(Ei||(Ei={}));var cne=Symbol("SignalWatcherBrand"),fne=new FinalizationRegistry((({watcher:e,signal:t})=>{e.unwatch(t)})),bL=new WeakMap;function gu(e){return e[cne]===!0?(console.warn("SignalWatcher should not be applied to the same class more than once."),e):class extends e{constructor(){super(...arguments),this._$St=new Ei.State(0),this._$Si=!1,this._$So=!0,this._$Sh=new Set}_$Sl(){if(this._$Su!==void 0)return;this._$Sv=new Ei.Computed((()=>{this._$St.get(),super.performUpdate()}));let t=this._$Su=new Ei.subtle.Watcher((function(){let r=bL.get(this);r!==void 0&&(r._$Si===!1&&r.requestUpdate(),this.watch())}));bL.set(t,this),fne.register(this,{watcher:t,signal:this._$Sv}),t.watch(this._$Sv)}_$Sp(){this._$Su!==void 0&&(this._$Su.unwatch(this._$Sv),this._$Sv=void 0,this._$Su=void 0)}performUpdate(){this.isUpdatePending&&(this._$Sl(),this._$Si=!0,this._$St.set(this._$St.get()+1),this._$Si=!1,this._$Sv.get())}update(t){try{this._$So?(this._$So=!1,super.update(t)):this._$Sh.forEach((r=>r.commit()))}finally{this.isUpdatePending=!1,this._$Sh.clear()}}requestUpdate(t,r,i){this._$So=!0,super.requestUpdate(t,r,i)}connectedCallback(){super.connectedCallback(),this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),queueMicrotask((()=>{this.isConnected===!1&&this._$Sp()}))}_(t){this._$Sh.add(t);let r=this._$So;this.requestUpdate(),this._$So=r}m(t){this._$Sh.delete(t)}}}var r1=(e,t)=>{let r=e._$AN;if(r===void 0)return!1;for(let i of r)i._$AO?.(t,!1),r1(i,t);return!0},dx=e=>{let t,r;do{if((t=e._$AM)===void 0)break;r=t._$AN,r.delete(e),e=t}while(r?.size===0)},yL=e=>{for(let t;t=e._$AM;e=t){let r=t._$AN;if(r===void 0)t._$AN=r=new Set;else if(r.has(e))break;r.add(e),pne(t)}};function hne(e){this._$AN!==void 0?(dx(this),this._$AM=e,yL(this)):this._$AM=e}function dne(e,t=!1,r=0){let i=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(t)if(Array.isArray(i))for(let o=r;o<i.length;o++)r1(i[o],!1),dx(i[o]);else i!=null&&(r1(i,!1),dx(i));else r1(this,e)}var pne=e=>{e.type==Vi.CHILD&&(e._$AP??(e._$AP=dne),e._$AQ??(e._$AQ=hne))},F0=class extends yo{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,r,i){super._$AT(t,r,i),yL(this),this.isConnected=t._$AU}_$AO(t,r=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),r&&(r1(this,t),dx(this))}setValue(t){if(nx(this._$Ct))this._$Ct._$AI(t,this);else{let r=[...this._$Ct._$AH];r[this._$Ci]=t,this._$Ct._$AI(r,this,0)}}disconnected(){}reconnected(){}};var px=class extends F0{_$Sl(){if(this._$Su!==void 0)return;this._$SW=new Ei.Computed((()=>{var r;return(r=this._$Sj)===null||r===void 0?void 0:r.get()}));let t=this._$Su=new Ei.subtle.Watcher((()=>{var r;(r=this._$SO)===null||r===void 0||r._(this),t.watch()}));t.watch(this._$SW)}_$Sp(){var t;this._$Su!==void 0&&(this._$Su.unwatch(this._$SW),this._$SW=void 0,this._$Su=void 0,(t=this._$SO)===null||t===void 0||t.m(this))}commit(){this.setValue(Ei.subtle.untrack((()=>{var t;return(t=this._$SW)===null||t===void 0?void 0:t.get()})))}render(t){return Ei.subtle.untrack((()=>t.get()))}update(t,[r]){var i,n;return(i=this._$SO)!==null&&i!==void 0||(this._$SO=(n=t.options)===null||n===void 0?void 0:n.host),r!==this._$Sj&&this._$Sj!==void 0&&this._$Sp(),this._$Sj=r,this._$Sl(),Ei.subtle.untrack((()=>this._$SW.get()))}disconnected(){this._$Sp()}reconnected(){this._$Sl()}},Y7=jn(px);var X7=e=>(t,...r)=>e(t,...r.map((i=>i instanceof Ei.State||i instanceof Ei.Computed?Y7(i):i))),mne=X7(Y),gne=X7(tx);var pOe=Ei.State,mOe=Ei.Computed;var K7={};pi(K7,{JsonPatchError:()=>Pr,_areEquals:()=>o1,applyOperation:()=>Ah,applyPatch:()=>$0,applyReducer:()=>_ne,deepClone:()=>yne,getValueByPointer:()=>yx,validate:()=>_L,validator:()=>xx});var vne=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},e(t,r)};return function(t,r){e(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}})(),bne=Object.prototype.hasOwnProperty;function gx(e,t){return bne.call(e,t)}function vx(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);var i=[];for(var n in e)gx(e,n)&&i.push(n);return i}function Yi(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function bx(e){for(var t=0,r=e.length,i;t<r;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function ll(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function i1(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function mx(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,r=e.length;t<r;t++)if(mx(e[t]))return!0}else if(typeof e=="object"){for(var i=vx(e),n=i.length,o=0;o<n;o++)if(mx(e[i[o]]))return!0}}return!1}function xL(e,t){var r=[e];for(var i in t){var n=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof n<"u"&&r.push(i+": "+n)}return r.join(`
`)}var n1=(function(e){vne(t,e);function t(r,i,n,o,s){var a=this.constructor,l=e.call(this,xL(r,{name:i,index:n,operation:o,tree:s}))||this;return l.name=i,l.index=n,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=xL(r,{name:i,index:n,operation:o,tree:s}),l}return t})(Error);var Pr=n1,yne=Yi,O0={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var i=e[t];return delete e[t],{newDocument:r,removed:i}},replace:function(e,t,r){var i=e[t];return e[t]=this.value,{newDocument:r,removed:i}},move:function(e,t,r){var i=yx(r,this.path);i&&(i=Yi(i));var n=Ah(r,{op:"remove",path:this.from}).removed;return Ah(r,{op:"add",path:this.path,value:n}),{newDocument:r,removed:i}},copy:function(e,t,r){var i=yx(r,this.from);return Ah(r,{op:"add",path:this.path,value:Yi(i)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:o1(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},xne={add:function(e,t,r){return bx(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){var i=e.splice(t,1);return{newDocument:r,removed:i[0]}},replace:function(e,t,r){var i=e[t];return e[t]=this.value,{newDocument:r,removed:i}},move:O0.move,copy:O0.copy,test:O0.test,_get:O0._get};function yx(e,t){if(t=="")return e;var r={op:"_get",path:t};return Ah(e,r),r.value}function Ah(e,t,r,i,n,o){if(r===void 0&&(r=!1),i===void 0&&(i=!0),n===void 0&&(n=!0),o===void 0&&(o=0),r&&(typeof r=="function"?r(t,0,e,t.path):xx(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=yx(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=o1(e,t.value),s.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(r)throw new Pr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{i||(e=Yi(e));var a=t.path||"",l=a.split("/"),u=e,c=1,f=l.length,h=void 0,p=void 0,d=void 0;for(typeof r=="function"?d=r:d=xx;;){if(p=l[c],p&&p.indexOf("~")!=-1&&(p=i1(p)),n&&(p=="__proto__"||p=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&h===void 0&&(u[p]===void 0?h=l.slice(0,c).join("/"):c==f-1&&(h=t.path),h!==void 0&&d(t,0,e,h)),c++,Array.isArray(u)){if(p==="-")p=u.length;else{if(r&&!bx(p))throw new Pr("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);bx(p)&&(p=~~p)}if(c>=f){if(r&&t.op==="add"&&p>u.length)throw new Pr("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=xne[t.op].call(t,u,p,e);if(s.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=O0[t.op].call(t,u,p,e);if(s.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[p],r&&c<f&&(!u||typeof u!="object"))throw new Pr("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function $0(e,t,r,i,n){if(i===void 0&&(i=!0),n===void 0&&(n=!0),r&&!Array.isArray(t))throw new Pr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=Yi(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Ah(e,t[s],r,!0,n,s),e=o[s].newDocument;return o.newDocument=e,o}function _ne(e,t,r){var i=Ah(e,t);if(i.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return i.newDocument}function xx(e,t,r,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Pr("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(O0[e.op]){if(typeof e.path!="string")throw new Pr("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Pr('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Pr("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Pr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if((e.op==="add"||e.op==="replace"||e.op==="test")&&mx(e.value))throw new Pr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r){if(e.op=="add"){var n=e.path.split("/").length,o=i.split("/").length;if(n!==o+1&&n!==o)throw new Pr("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Pr("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=_L([s],r);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Pr("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}}else throw new Pr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r)}function _L(e,t,r){try{if(!Array.isArray(e))throw new Pr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)$0(Yi(t),Yi(e),r||!0);else{r=r||xx;for(var i=0;i<e.length;i++)r(e[i],i,t,void 0)}}catch(n){if(n instanceof Pr)return n;throw n}}function o1(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),i=Array.isArray(t),n,o,s;if(r&&i){if(o=e.length,o!=t.length)return!1;for(n=o;n--!==0;)if(!o1(e[n],t[n]))return!1;return!0}if(r!=i)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(n=o;n--!==0;)if(!t.hasOwnProperty(a[n]))return!1;for(n=o;n--!==0;)if(s=a[n],!o1(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var e8={};pi(e8,{compare:()=>Dne,generate:()=>Z7,observe:()=>Tne,unobserve:()=>Ane});var J7=new WeakMap,wne=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),Sne=(function(){function e(t,r){this.callback=t,this.observer=r}return e})();function Cne(e){return J7.get(e)}function kne(e,t){return e.observers.get(t)}function Ene(e,t){e.observers.delete(t.callback)}function Ane(e,t){t.unobserve()}function Tne(e,t){var r=[],i,n=Cne(e);if(!n)n=new wne(e),J7.set(e,n);else{var o=kne(n,t);i=o&&o.observer}if(i)return i;if(i={},n.value=Yi(e),t){i.callback=t,i.next=null;var s=function(){Z7(i)},a=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return i.patches=r,i.object=e,i.unobserve=function(){Z7(i),clearTimeout(i.next),Ene(n,i),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},n.observers.set(t,new Sne(t,i)),i}function Z7(e,t){t===void 0&&(t=!1);var r=J7.get(e.object);Q7(r.value,e.object,e.patches,"",t),e.patches.length&&$0(r.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function Q7(e,t,r,i,n){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=vx(t),s=vx(e),a=!1,l=!1,u=s.length-1;u>=0;u--){var c=s[u],f=e[c];if(gx(t,c)&&!(t[c]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var h=t[c];typeof f=="object"&&f!=null&&typeof h=="object"&&h!=null&&Array.isArray(f)===Array.isArray(h)?Q7(f,h,r,i+"/"+ll(c),n):f!==h&&(a=!0,n&&r.push({op:"test",path:i+"/"+ll(c),value:Yi(f)}),r.push({op:"replace",path:i+"/"+ll(c),value:Yi(h)}))}else Array.isArray(e)===Array.isArray(t)?(n&&r.push({op:"test",path:i+"/"+ll(c),value:Yi(f)}),r.push({op:"remove",path:i+"/"+ll(c)}),l=!0):(n&&r.push({op:"test",path:i,value:e}),r.push({op:"replace",path:i,value:t}),a=!0)}if(!(!l&&o.length==s.length))for(var u=0;u<o.length;u++){var c=o[u];!gx(e,c)&&t[c]!==void 0&&r.push({op:"add",path:i+"/"+ll(c),value:Yi(t[c])})}}}function Dne(e,t,r){r===void 0&&(r=!1);var i=[];return Q7(e,t,i,"",r),i}var EOe=Object.assign({},K7,e8,{JsonPatchError:n1,deepClone:Yi,escapePathComponent:ll,unescapePathComponent:i1});var uS=C$(SL());var lR={};pi(lR,{Bounds:()=>Nr,CanvasHandler:()=>wf,CanvasRenderer:()=>xp,DATE:()=>Kn,DAY:()=>Xi,DAYOFYEAR:()=>dl,Dataflow:()=>ef,Debug:()=>r8,Error:()=>a1,EventStream:()=>Z0,Gradient:()=>BE,GroupItem:()=>Xv,HOURS:()=>So,Handler:()=>Uv,HybridHandler:()=>N4,HybridRenderer:()=>jv,Info:()=>t8,Item:()=>Yv,MILLISECONDS:()=>Es,MINUTES:()=>Co,MONTH:()=>Ki,Marks:()=>Qn,MultiPulse:()=>Qx,None:()=>EL,Operator:()=>Vt,Parameters:()=>j1,Pulse:()=>Tu,QUARTER:()=>Xn,RenderType:()=>Iu,Renderer:()=>cd,ResourceLoader:()=>C4,SECONDS:()=>Jo,SVGHandler:()=>$4,SVGRenderer:()=>qv,SVGStringRenderer:()=>I4,Scenegraph:()=>Hv,TIME_UNITS:()=>Bx,Transform:()=>ee,View:()=>LD,WEEK:()=>ni,Warn:()=>Sx,YEAR:()=>Ti,accessor:()=>gn,accessorFields:()=>mi,accessorName:()=>dr,array:()=>ve,ascending:()=>yu,bandwidthNRD:()=>i_,bin:()=>SC,bootstrapCI:()=>CC,boundClip:()=>c9,boundContext:()=>Kv,boundItem:()=>OE,boundMark:()=>nz,boundStroke:()=>kl,changeset:()=>Ru,clampRange:()=>u8,codegenExpression:()=>r5,compare:()=>h1,constant:()=>br,cumulativeLogNormal:()=>u_,cumulativeNormal:()=>G1,cumulativeUniform:()=>d_,dayofyear:()=>K8,debounce:()=>d1,defaultLocale:()=>z1,definition:()=>e_,densityLogNormal:()=>l_,densityNormal:()=>n_,densityUniform:()=>h_,domChild:()=>yi,domClear:()=>Fs,domCreate:()=>gf,domFind:()=>i9,dotbin:()=>kC,error:()=>te,expressionFunction:()=>Ur,extend:()=>Ze,extent:()=>Wn,extentIndex:()=>c8,falsy:()=>vu,fastmap:()=>qc,field:()=>Ai,flush:()=>f8,font:()=>W4,fontFamily:()=>Qv,fontSize:()=>El,format:()=>Vx,formatLocale:()=>B1,formats:()=>gC,hasOwnProperty:()=>_e,id:()=>L0,identity:()=>Ir,inferType:()=>WP,inferTypes:()=>VP,ingest:()=>xt,inherits:()=>xe,inrange:()=>jc,interpolate:()=>Rv,interpolateColors:()=>pp,interpolateRange:()=>u4,intersect:()=>u9,intersectBoxLine:()=>gp,intersectPath:()=>qE,intersectPoint:()=>jE,intersectRule:()=>GB,isArray:()=>K,isBoolean:()=>xo,isDate:()=>ca,isFunction:()=>Ke,isIterable:()=>h8,isNumber:()=>ut,isObject:()=>me,isRegExp:()=>Ex,isString:()=>he,isTuple:()=>Bh,key:()=>p1,lerp:()=>d8,lineHeight:()=>xf,loader:()=>X0,locale:()=>jx,logger:()=>l1,lruCache:()=>p8,markup:()=>l9,merge:()=>m8,mergeConfig:()=>cl,multiLineOffset:()=>j4,one:()=>ul,pad:()=>g8,panLinear:()=>i8,panLog:()=>n8,panPow:()=>o8,panSymlog:()=>s8,parse:()=>rV,parseExpression:()=>t5,parseSelector:()=>En,path:()=>qh,pathCurves:()=>zE,pathEqual:()=>$z,pathParse:()=>ud,pathRectangle:()=>UB,pathRender:()=>vp,pathSymbols:()=>HB,pathTrail:()=>qB,peek:()=>ct,point:()=>eb,projection:()=>Cb,quantileLogNormal:()=>c_,quantileNormal:()=>Y1,quantileUniform:()=>p_,quantiles:()=>t_,quantizeInterpolator:()=>c4,quarter:()=>a8,quartiles:()=>r_,random:()=>Zn,randomInteger:()=>qae,randomKDE:()=>s_,randomLCG:()=>Uae,randomLogNormal:()=>EC,randomMixture:()=>AC,randomNormal:()=>o_,randomUniform:()=>TC,read:()=>bC,regressionConstant:()=>m_,regressionExp:()=>RC,regressionLinear:()=>v_,regressionLoess:()=>OC,regressionLog:()=>DC,regressionPoly:()=>FC,regressionPow:()=>MC,regressionQuad:()=>b_,renderModule:()=>tb,repeat:()=>s1,resetDefaultLocale:()=>HP,resetSVGClipId:()=>WB,resetSVGDefIds:()=>Ahe,responseType:()=>vC,runtimeContext:()=>l5,sampleCurve:()=>Q0,sampleLogNormal:()=>a_,sampleNormal:()=>V1,sampleUniform:()=>f_,scale:()=>_t,sceneEqual:()=>f9,sceneFromJSON:()=>sz,scenePickVisit:()=>E4,sceneToJSON:()=>oz,sceneVisit:()=>ba,sceneZOrder:()=>WE,scheme:()=>Mv,serializeXML:()=>wz,setHybridRendererOptions:()=>She,setRandom:()=>zae,span:()=>xu,splitAccessPath:()=>_s,stringValue:()=>de,textMetrics:()=>ko,timeBin:()=>sC,timeFloor:()=>eC,timeFormatLocale:()=>Nh,timeInterval:()=>ku,timeOffset:()=>rC,timeSequence:()=>nC,timeUnitSpecifier:()=>Y8,timeUnits:()=>zx,toBoolean:()=>m1,toDate:()=>g1,toNumber:()=>Gr,toSet:()=>ii,toString:()=>v1,transform:()=>wC,transforms:()=>Du,truncate:()=>v8,truthy:()=>gi,tupleid:()=>qe,typeParsers:()=>dC,utcFloor:()=>tC,utcInterval:()=>Eu,utcOffset:()=>iC,utcSequence:()=>oC,utcdayofyear:()=>J8,utcquarter:()=>l8,utcweek:()=>Q8,version:()=>qxe,visitArray:()=>_u,week:()=>Z8,writeConfig:()=>bu,zero:()=>ua,zoomLinear:()=>u1,zoomLog:()=>c1,zoomPow:()=>P0,zoomSymlog:()=>f1});function gn(e,t,r){return e.fields=t||[],e.fname=r,e}function dr(e){return e==null?null:e.fname}function mi(e){return e==null?null:e.fields}function kL(e){return e.length===1?Mne(e[0]):Fne(e)}var Mne=e=>function(t){return t[e]},Fne=e=>{let t=e.length;return function(r){for(let i=0;i<t;++i)r=r[e[i]];return r}};function te(e){throw Error(e)}function _s(e){let t=[],r=e.length,i=null,n=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<r;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===i)u(),i=null,n=-1;else{if(i)continue;s===n&&l==='"'||s===n&&l==="'"?(s=a+1,i=l):l==="."&&!n?a>s?u():s=a+1:l==="["?(a>s&&u(),n=s=a+1):l==="]"&&(n||te("Access path missing open bracket: "+e),n>0&&u(),n=0,s=a+1)}return n&&te("Access path missing closing bracket: "+e),i&&te("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Ai(e,t,r){let i=_s(e);return e=i.length===1?i[0]:e,gn((r&&r.get||kL)(i),[e],t||e)}var L0=Ai("id"),Ir=gn(e=>e,[],"identity"),ua=gn(()=>0,[],"zero"),ul=gn(()=>1,[],"one"),gi=gn(()=>!0,[],"true"),vu=gn(()=>!1,[],"false");function One(e,t,r){let i=[t].concat([].slice.call(r));console[e].apply(console,i)}var EL=0,a1=1,Sx=2,t8=3,r8=4;function l1(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:One,i=e||EL;return{level(n){return arguments.length?(i=+n,this):i},error(){return i>=a1&&r(t||"error","ERROR",arguments),this},warn(){return i>=Sx&&r(t||"warn","WARN",arguments),this},info(){return i>=t8&&r(t||"log","INFO",arguments),this},debug(){return i>=r8&&r(t||"log","DEBUG",arguments),this}}}var K=Array.isArray;function me(e){return e===Object(e)}var CL=e=>e!=="__proto__";function cl(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((i,n)=>{for(let o in n)if(o==="signals")i.signals=$ne(i.signals,n.signals);else{let s=o==="legend"?{layout:1}:o==="style"?!0:null;bu(i,o,n[o],s)}return i},{})}function bu(e,t,r,i){if(!CL(t))return;let n,o;if(me(r)&&!K(r)){o=me(e[t])?e[t]:e[t]={};for(n in r)i&&(i===!0||i[n])?bu(o,n,r[n]):CL(n)&&(o[n]=r[n])}else e[t]=r}function $ne(e,t){if(e==null)return t;let r={},i=[];function n(o){r[o.name]||(r[o.name]=1,i.push(o))}return t.forEach(n),e.forEach(n),i}function ct(e){return e[e.length-1]}function Gr(e){return e==null||e===""?null:+e}var AL=e=>t=>e*Math.exp(t),TL=e=>t=>Math.log(e*t),DL=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),RL=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,wx=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Cx(e,t,r,i){let n=r(e[0]),o=r(ct(e)),s=(o-n)*t;return[i(n-s),i(o-s)]}function i8(e,t){return Cx(e,t,Gr,Ir)}function n8(e,t){var r=Math.sign(e[0]);return Cx(e,t,TL(r),AL(r))}function o8(e,t,r){return Cx(e,t,wx(r),wx(1/r))}function s8(e,t,r){return Cx(e,t,DL(r),RL(r))}function kx(e,t,r,i,n){let o=i(e[0]),s=i(ct(e)),a=t!=null?i(t):(o+s)/2;return[n(a+(o-a)*r),n(a+(s-a)*r)]}function u1(e,t,r){return kx(e,t,r,Gr,Ir)}function c1(e,t,r){let i=Math.sign(e[0]);return kx(e,t,r,TL(i),AL(i))}function P0(e,t,r,i){return kx(e,t,r,wx(i),wx(1/i))}function f1(e,t,r,i){return kx(e,t,r,DL(i),RL(i))}function a8(e){return 1+~~(new Date(e).getMonth()/3)}function l8(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ve(e){return e!=null?K(e)?e:[e]:[]}function u8(e,t,r){let i=e[0],n=e[1],o;return n<i&&(o=n,n=i,i=o),o=n-i,o>=r-t?[t,r]:[i=Math.min(Math.max(i,t),r-o),i+o]}function Ke(e){return typeof e=="function"}var Lne="descending";function h1(e,t,r){r=r||{},t=ve(t)||[];let i=[],n=[],o={},s=r.comparator||Pne;return ve(e).forEach((a,l)=>{a!=null&&(i.push(t[l]===Lne?-1:1),n.push(a=Ke(a)?a:Ai(a,null,r)),(mi(a)||[]).forEach(u=>o[u]=1))}),n.length===0?null:gn(s(n,i),Object.keys(o))}var yu=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Pne=(e,t)=>e.length===1?Ine(e[0],t[0]):Nne(e,t,e.length),Ine=(e,t)=>function(r,i){return yu(e(r),e(i))*t},Nne=(e,t,r)=>(t.push(0),function(i,n){let o,s=0,a=-1;for(;s===0&&++a<r;)o=e[a],s=yu(o(i),o(n));return s*t[a]});function br(e){return Ke(e)?e:()=>e}function d1(e,t){let r;return i=>{r&&clearTimeout(r),r=setTimeout(()=>(t(i),r=null),e)}}function Ze(e){for(let t,r,i=1,n=arguments.length;i<n;++i){t=arguments[i];for(r in t)e[r]=t[r]}return e}function Wn(e,t){let r=0,i,n,o,s;if(e&&(i=e.length))if(t==null){for(n=e[r];r<i&&(n==null||n!==n);n=e[++r]);for(o=s=n;r<i;++r)n=e[r],n!=null&&(n<o&&(o=n),n>s&&(s=n))}else{for(n=t(e[r]);r<i&&(n==null||n!==n);n=t(e[++r]));for(o=s=n;r<i;++r)n=t(e[r]),n!=null&&(n<o&&(o=n),n>s&&(s=n))}return[o,s]}function c8(e,t){let r=e.length,i=-1,n,o,s,a,l;if(t==null){for(;++i<r;)if(o=e[i],o!=null&&o>=o){n=s=o;break}if(i===r)return[-1,-1];for(a=l=i;++i<r;)o=e[i],o!=null&&(n>o&&(n=o,a=i),s<o&&(s=o,l=i))}else{for(;++i<r;)if(o=t(e[i],i,e),o!=null&&o>=o){n=s=o;break}if(i===r)return[-1,-1];for(a=l=i;++i<r;)o=t(e[i],i,e),o!=null&&(n>o&&(n=o,a=i),s<o&&(s=o,l=i))}return[a,l]}function _e(e,t){return Object.hasOwn(e,t)}var _x={};function qc(e){let t={},r;function i(o){return _e(t,o)&&t[o]!==_x}let n={size:0,empty:0,object:t,has:i,get(o){return i(o)?t[o]:void 0},set(o,s){return i(o)||(++n.size,t[o]===_x&&--n.empty),t[o]=s,this},delete(o){return i(o)&&(--n.size,++n.empty,t[o]=_x),this},clear(){n.size=n.empty=0,n.object=t={}},test(o){return arguments.length?(r=o,n):r},clean(){let o={},s=0;for(let a in t){let l=t[a];l!==_x&&(!r||!r(l))&&(o[a]=l,++s)}n.size=s,n.empty=0,n.object=t=o}};return e&&Object.keys(e).forEach(o=>{n.set(o,e[o])}),n}function f8(e,t,r,i,n,o){if(!r&&r!==0)return o;let s=+r,a=e[0],l=ct(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);let c=Math.abs(l-t);return u<c&&u<=s?i:c<=s?n:o}function xe(e,t,r){let i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ze(i,r)}function jc(e,t,r,i){let n=t[0],o=t[t.length-1],s;return n>o&&(s=n,n=o,o=s),r=r===void 0||r,i=i===void 0||i,(r?n<=e:n<e)&&(i?e<=o:e<o)}function xo(e){return typeof e=="boolean"}function ca(e){return Object.prototype.toString.call(e)==="[object Date]"}function h8(e){return e&&Ke(e[Symbol.iterator])}function ut(e){return typeof e=="number"}function Ex(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function he(e){return typeof e=="string"}function p1(e,t,r){e&&(e=t?ve(e).map(a=>a.replace(/\\(.)/g,"$1")):ve(e));let i=e&&e.length,n=r&&r.get||kL,o=a=>n(t?[a]:_s(a)),s;if(!i)s=function(){return""};else if(i===1){let a=o(e[0]);s=function(l){return""+a(l)}}else{let a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<i;)u+="|"+a[c](l);return u}}return gn(s,e,"key")}function d8(e,t){let r=e[0],i=ct(e),n=+t;return n?n===1?i:r+n*(i-r):r}var Bne=1e4;function p8(e){e=+e||Bne;let t,r,i,n=()=>{t={},r={},i=0},o=(s,a)=>(++i>e&&(r=t,t={},i=1),t[s]=a);return n(),{clear:n,has:s=>_e(t,s)||_e(r,s),get:s=>_e(t,s)?t[s]:_e(r,s)?o(s,r[s]):void 0,set:(s,a)=>_e(t,s)?t[s]=a:o(s,a)}}function m8(e,t,r,i){let n=t.length,o=r.length;if(!o)return t;if(!n)return r;let s=i||new t.constructor(n+o),a=0,l=0,u=0;for(;a<n&&l<o;++u)s[u]=e(t[a],r[l])>0?r[l++]:t[a++];for(;a<n;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=r[l];return s}function s1(e,t){let r="";for(;--t>=0;)r+=e;return r}function g8(e,t,r,i){let n=r||" ",o=e+"",s=t-o.length;return s<=0?o:i==="left"?s1(n,s)+o:i==="center"?s1(n,~~(s/2))+o+s1(n,Math.ceil(s/2)):o+s1(n,s)}function xu(e){return e&&ct(e)-e[0]||0}function de(e){return K(e)?"["+e.map(de)+"]":me(e)||he(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function m1(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}var zne=e=>ut(e)||ca(e)?e:Date.parse(e);function g1(e,t){return t=t||zne,e==null||e===""?null:t(e)}function v1(e){return e==null||e===""?null:e+""}function ii(e){let t={},r=e.length;for(let i=0;i<r;++i)t[e[i]]=!0;return t}function v8(e,t,r,i){let n=i??"\u2026",o=e+"",s=o.length,a=Math.max(0,t-n.length);return s<=t?o:r==="left"?n+o.slice(s-a):r==="center"?o.slice(0,Math.ceil(a/2))+n+o.slice(s-~~(a/2)):o.slice(0,a)+n}function _u(e,t,r){if(e)if(t){let i=e.length;for(let n=0;n<i;++n){let o=t(e[n]);o&&r(o,n,e)}}else e.forEach(r)}var ML={},b8={},y8=34,b1=10,x8=13;function OL(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function Hne(e,t){var r=OL(e);return function(i,n){return t(r(i),n,e)}}function FL(e){var t=Object.create(null),r=[];return e.forEach(function(i){for(var n in i)n in t||r.push(t[n]=n)}),r}function _o(e,t){var r=e+"",i=r.length;return i<t?new Array(t-i+1).join(0)+r:r}function Une(e){return e<0?"-"+_o(-e,6):e>9999?"+"+_o(e,6):_o(e,4)}function qne(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),n=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Une(e.getUTCFullYear(),4)+"-"+_o(e.getUTCMonth()+1,2)+"-"+_o(e.getUTCDate(),2)+(n?"T"+_o(t,2)+":"+_o(r,2)+":"+_o(i,2)+"."+_o(n,3)+"Z":i?"T"+_o(t,2)+":"+_o(r,2)+":"+_o(i,2)+"Z":r||t?"T"+_o(t,2)+":"+_o(r,2)+"Z":"")}function _8(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function i(f,h){var p,d,m=n(f,function(g,v){if(p)return p(g,v-1);d=g,p=h?Hne(g,h):OL(g)});return m.columns=d||[],m}function n(f,h){var p=[],d=f.length,m=0,g=0,v,b=d<=0,y=!1;f.charCodeAt(d-1)===b1&&--d,f.charCodeAt(d-1)===x8&&--d;function x(){if(b)return b8;if(y)return y=!1,ML;var _,w=m,k;if(f.charCodeAt(w)===y8){for(;m++<d&&f.charCodeAt(m)!==y8||f.charCodeAt(++m)===y8;);return(_=m)>=d?b=!0:(k=f.charCodeAt(m++))===b1?y=!0:k===x8&&(y=!0,f.charCodeAt(m)===b1&&++m),f.slice(w+1,_-1).replace(/""/g,'"')}for(;m<d;){if((k=f.charCodeAt(_=m++))===b1)y=!0;else if(k===x8)y=!0,f.charCodeAt(m)===b1&&++m;else if(k!==r)continue;return f.slice(w,_)}return b=!0,f.slice(w,d)}for(;(v=x())!==b8;){for(var S=[];v!==ML&&v!==b8;)S.push(v),v=x();h&&(S=h(S,g++))==null||p.push(S)}return p}function o(f,h){return f.map(function(p){return h.map(function(d){return c(p[d])}).join(e)})}function s(f,h){return h==null&&(h=FL(f)),[h.map(c).join(e)].concat(o(f,h)).join(`
`)}function a(f,h){return h==null&&(h=FL(f)),o(f,h).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?qne(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:n,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}function w8(e){return e}function Ax(e){if(e==null)return w8;var t,r,i=e.scale[0],n=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=r=0);var u=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*i+o,f[1]=(r+=a[1])*n+s;u<c;)f[u]=a[u],++u;return f}}function $L(e,t){for(var r,i=e.length,n=i-t;n<--i;)r=e[n],e[n++]=e[i],e[i]=r}function S8(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return LL(e,r)})}:LL(e,t)}function LL(e,t){var r=t.id,i=t.bbox,n=t.properties==null?{}:t.properties,o=Tx(e,t);return r==null&&i==null?{type:"Feature",properties:n,geometry:o}:i==null?{type:"Feature",id:r,properties:n,geometry:o}:{type:"Feature",id:r,bbox:i,properties:n,geometry:o}}function Tx(e,t){var r=Ax(e.transform),i=e.arcs;function n(c,f){f.length&&f.pop();for(var h=i[c<0?~c:c],p=0,d=h.length;p<d;++p)f.push(r(h[p],p));c<0&&$L(f,d)}function o(c){return r(c)}function s(c){for(var f=[],h=0,p=c.length;h<p;++h)n(c[h],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(a)}function u(c){var f=c.type,h;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":h=o(c.coordinates);break;case"MultiPoint":h=c.coordinates.map(o);break;case"LineString":h=s(c.arcs);break;case"MultiLineString":h=c.arcs.map(s);break;case"Polygon":h=l(c.arcs);break;case"MultiPolygon":h=c.arcs.map(l);break;default:return null}return{type:f,coordinates:h}}return u(t)}function C8(e,t){var r={},i={},n={},o=[],s=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],h;f.length<3&&!f[1][0]&&!f[1][1]&&(h=t[++s],t[s]=u,t[c]=h)}),t.forEach(function(u){var c=a(u),f=c[0],h=c[1],p,d;if(p=n[f])if(delete n[p.end],p.push(u),p.end=h,d=i[h]){delete i[d.start];var m=d===p?p:p.concat(d);i[m.start=p.start]=n[m.end=d.end]=m}else i[p.start]=n[p.end]=p;else if(p=i[h])if(delete i[p.start],p.unshift(u),p.start=f,d=n[f]){delete n[d.end];var g=d===p?p:d.concat(p);i[g.start=d.start]=n[g.end=p.end]=g}else i[p.start]=n[p.end]=p;else p=[u],i[p.start=f]=n[p.end=h]=p});function a(u){var c=e.arcs[u<0?~u:u],f=c[0],h;return e.transform?(h=[0,0],c.forEach(function(p){h[0]+=p[0],h[1]+=p[1]})):h=c[c.length-1],u<0?[h,f]:[f,h]}function l(u,c){for(var f in u){var h=u[f];delete c[h.start],delete h.start,delete h.end,h.forEach(function(p){r[p<0?~p:p]=1}),o.push(h)}}return l(n,i),l(i,n),t.forEach(function(u){r[u<0?~u:u]||o.push([u])}),o}function k8(e){return Tx(e,PL.apply(this,arguments))}function PL(e,t,r){var i,n,o;if(arguments.length>1)i=jne(e,t,r);else for(n=0,i=new Array(o=e.arcs.length);n<o;++n)i[n]=n;return{type:"MultiLineString",arcs:C8(e,i)}}function jne(e,t,r){var i=[],n=[],o;function s(f){var h=f<0?~f:f;(n[h]||(n[h]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function l(f){f.forEach(a)}function u(f){f.forEach(l)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),n.forEach(r==null?function(f){i.push(f[0].i)}:function(f){r(f[0].g,f[f.length-1].g)&&i.push(f[0].i)}),i}function vn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function E8(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ko(e){let t,r,i;e.length!==2?(t=vn,r=(a,l)=>vn(e(a),l),i=(a,l)=>e(a)-l):(t=e===vn||e===E8?e:Gne,r=e,i=e);function n(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{let f=u+c>>>1;r(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{let f=u+c>>>1;r(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){let f=n(a,l,u,c-1);return f>u&&i(a[f-1],l)>-i(a[f],l)?f-1:f}return{left:n,center:s,right:o}}function Gne(){return 0}function y1(e){return e===null?NaN:+e}function*IL(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&(yield i)}}var NL=Ko(vn),Th=NL.right,A8=NL.left,Yne=Ko(y1).center,fa=Th;function T8(e,t){let r=0,i,n=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-n,n+=i/++r,o+=i*(s-n));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(i=a-n,n+=i/++r,o+=i*(a-n))}if(r>1)return o/(r-1)}function Dx(e,t){let r=T8(e,t);return r&&Math.sqrt(r)}var yr=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let r=this._partials,i=0;for(let n=0;n<this._n&&n<32;n++){let o=r[n],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(r[i++]=a),t=s}return r[i]=t,this._n=i+1,this}valueOf(){let t=this._partials,r=this._n,i,n,o,s=0;if(r>0){for(s=t[--r];r>0&&(i=s,n=t[--r],s=i+n,o=n-(s-i),!o););r>0&&(o<0&&t[r-1]<0||o>0&&t[r-1]>0)&&(n=o*2,i=s+n,n==i-s&&(s=i))}return s}};var I0=class extends Map{constructor(t,r=HL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(let[i,n]of t)this.set(i,n)}get(t){return super.get(D8(this,t))}has(t){return super.has(D8(this,t))}set(t,r){return super.set(BL(this,t),r)}delete(t){return super.delete(zL(this,t))}},wu=class extends Set{constructor(t,r=HL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(let i of t)this.add(i)}has(t){return super.has(D8(this,t))}add(t){return super.add(BL(this,t))}delete(t){return super.delete(zL(this,t))}};function D8({_intern:e,_key:t},r){let i=t(r);return e.has(i)?e.get(i):r}function BL({_intern:e,_key:t},r){let i=t(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function zL({_intern:e,_key:t},r){let i=t(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}function HL(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Rx(e,t){return Array.from(t,r=>e[r])}function UL(e=vn){if(e===vn)return R8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{let i=e(t,r);return i||i===0?i:(e(r,r)===0)-(e(t,t)===0)}}function R8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var Xne=Math.sqrt(50),Kne=Math.sqrt(10),Zne=Math.sqrt(2);function Mx(e,t,r){let i=(t-e)/Math.max(0,r),n=Math.floor(Math.log10(i)),o=i/Math.pow(10,n),s=o>=Xne?10:o>=Kne?5:o>=Zne?2:1,a,l,u;return n<0?(u=Math.pow(10,-n)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,n)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=r&&r<2?Mx(e,t,r*2):[a,l,u]}function Dh(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];let i=t<e,[n,o,s]=i?Mx(t,e,r):Mx(e,t,r);if(!(o>=n))return[];let a=o-n+1,l=new Array(a);if(i)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(n+u)/-s;else for(let u=0;u<a;++u)l[u]=(n+u)*s;return l}function x1(e,t,r){return t=+t,e=+e,r=+r,Mx(e,t,r)[2]}function Vn(e,t,r){t=+t,e=+e,r=+r;let i=t<e,n=i?x1(t,e,r):x1(e,t,r);return(i?-1:1)*(n<0?1/-n:n)}function ws(e,t){let r;if(t===void 0)for(let i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let n of e)(n=t(n,++i,e))!=null&&(r<n||r===void 0&&n>=n)&&(r=n)}return r}function Rh(e,t){let r;if(t===void 0)for(let i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let n of e)(n=t(n,++i,e))!=null&&(r>n||r===void 0&&n>=n)&&(r=n)}return r}function Fx(e,t,r=0,i=1/0,n){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),i=Math.floor(Math.min(e.length-1,i)),!(r<=t&&t<=i))return e;for(n=n===void 0?R8:UL(n);i>r;){if(i-r>600){let l=i-r+1,u=t-r+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/l+h)),d=Math.min(i,Math.floor(t+(l-u)*f/l+h));Fx(e,t,p,d,n)}let o=e[t],s=r,a=i;for(_1(e,r,t),n(e[i],o)>0&&_1(e,r,i);s<a;){for(_1(e,s,a),++s,--a;n(e[s],o)<0;)++s;for(;n(e[a],o)>0;)--a}n(e[r],o)===0?_1(e,r,a):(++a,_1(e,a,i)),a<=t&&(r=a+1),t<=a&&(i=a-1)}return e}function _1(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}function Mh(e,t,r){if(e=Float64Array.from(IL(e,r)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Rh(e);if(t>=1)return ws(e);var i,n=(i-1)*t,o=Math.floor(n),s=ws(Fx(e,o).subarray(0,o+1)),a=Rh(e.subarray(o+1));return s+(a-s)*(n-o)}}function w1(e,t,r=y1){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+r(e[0],0,e);if(t>=1)return+r(e[i-1],i-1,e);var i,n=(i-1)*t,o=Math.floor(n),s=+r(e[o],o,e),a=+r(e[o+1],o+1,e);return s+(a-s)*(n-o)}}function Ox(e,t){let r=0,i=0;if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(++r,i+=n);else{let n=-1;for(let o of e)(o=t(o,++n,e))!=null&&(o=+o)>=o&&(++r,i+=o)}if(r)return i/r}function N0(e,t){return Mh(e,.5,t)}function*Qne(e){for(let t of e)yield*t}function B0(e){return Array.from(Qne(e))}function Yr(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var i=-1,n=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(n);++i<n;)o[i]=e+i*r;return o}function z0(e,t){let r=0;if(t===void 0)for(let i of e)(i=+i)&&(r+=i);else{let i=-1;for(let n of e)(n=+t(n,++i,e))&&(r+=n)}return r}function $x(e,...t){e=new wu(e),t=t.map(eoe);e:for(let r of e)for(let i of t)if(!i.has(r)){e.delete(r);continue e}return e}function eoe(e){return e instanceof wu?e:new wu(e)}function Lx(...e){let t=new wu;for(let r of e)for(let i of r)t.add(i);return t}function qL(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Fh(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function fl(e){return e=Fh(Math.abs(e)),e?e[1]:NaN}function jL(e,t){return function(r,i){for(var n=r.length,o=[],s=0,a=e[0],l=0;n>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(r.substring(n-=a,n+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function WL(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var toe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zo(e){if(!(t=toe.exec(e)))throw new Error("invalid format: "+e);var t;return new Px({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Zo.prototype=Px.prototype;function Px(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Px.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function VL(e){e:for(var t=e.length,r=1,i=-1,n;r<t;++r)switch(e[r]){case".":i=n=r;break;case"0":i===0&&(i=r),n=r;break;default:if(!+e[r])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(n+1):e}var M8;function GL(e,t){var r=Fh(e,t);if(!r)return e+"";var i=r[0],n=r[1],o=n-(M8=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Fh(e,Math.max(0,t+o-1))[0]}function F8(e,t){var r=Fh(e,t);if(!r)return e+"";var i=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}var O8={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qL,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>F8(e*100,t),r:F8,s:GL,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $8(e){return e}var YL=Array.prototype.map,XL=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function S1(e){var t=e.grouping===void 0||e.thousands===void 0?$8:jL(YL.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?$8:WL(YL.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Zo(f);var h=f.fill,p=f.align,d=f.sign,m=f.symbol,g=f.zero,v=f.width,b=f.comma,y=f.precision,x=f.trim,S=f.type;S==="n"?(b=!0,S="g"):O8[S]||(y===void 0&&(y=12),x=!0,S="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var _=m==="$"?r:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",w=m==="$"?i:/[%p]/.test(S)?s:"",k=O8[S],A=/[defgprs%]/.test(S);y=y===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function M(D){var z=_,P=w,I,N,H;if(S==="c")P=k(D)+P,D="";else{D=+D;var T=D<0||1/D<0;if(D=isNaN(D)?l:k(Math.abs(D),y),x&&(D=VL(D)),T&&+D==0&&d!=="+"&&(T=!1),z=(T?d==="("?d:a:d==="-"||d==="("?"":d)+z,P=(S==="s"?XL[8+M8/3]:"")+P+(T&&d==="("?")":""),A){for(I=-1,N=D.length;++I<N;)if(H=D.charCodeAt(I),48>H||H>57){P=(H===46?n+D.slice(I+1):D.slice(I))+P,D=D.slice(0,I);break}}}b&&!g&&(D=t(D,1/0));var O=z.length+D.length+P.length,L=O<v?new Array(v-O+1).join(h):"";switch(b&&g&&(D=t(L+D,L.length?v-P.length:1/0),L=""),p){case"<":D=z+D+P+L;break;case"=":D=z+L+D+P;break;case"^":D=L.slice(0,O=L.length>>1)+z+D+P+L.slice(O);break;default:D=L+z+D+P;break}return o(D)}return M.toString=function(){return f+""},M}function c(f,h){var p=u((f=Zo(f),f.type="f",f)),d=Math.max(-8,Math.min(8,Math.floor(fl(h)/3)))*3,m=Math.pow(10,-d),g=XL[8+d/3];return function(v){return p(m*v)+g}}return{format:u,formatPrefix:c}}var Ix,Wc,H0;L8({thousands:",",grouping:[3],currency:["$",""]});function L8(e){return Ix=S1(e),Wc=Ix.format,H0=Ix.formatPrefix,Ix}function C1(e){return Math.max(0,-fl(Math.abs(e)))}function k1(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fl(t)/3)))*3-fl(Math.abs(e)))}function E1(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,fl(t)-fl(e))+1}var P8=new Date,I8=new Date;function nr(e,t,r,i){function n(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return n.floor=o=>(e(o=new Date(+o)),o),n.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),n.round=o=>{let s=n(o),a=n.ceil(o);return o-s<a-o?s:a},n.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),n.range=(o,s,a)=>{let l=[];if(o=n.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},n.filter=o=>nr(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),r&&(n.count=(o,s)=>(P8.setTime(+o),I8.setTime(+s),e(P8),e(I8),Math.floor(r(P8,I8))),n.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?n.filter(i?s=>i(s)%o===0:s=>n.count(0,s)%o===0):n)),n}var ha=nr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ha.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?nr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):ha);var KL=ha.range;var bn=nr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),ZL=bn.range;var Vc=nr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),roe=Vc.range,Gc=nr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),ioe=Gc.range;var Yc=nr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),noe=Yc.range,Xc=nr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),ooe=Xc.range;var wo=nr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),soe=wo.range,Ss=nr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),aoe=Ss.range,Nx=nr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),loe=Nx.range;function Lh(e){return nr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var Cs=Lh(0),U0=Lh(1),QL=Lh(2),eP=Lh(3),Kc=Lh(4),tP=Lh(5),rP=Lh(6),iP=Cs.range,uoe=U0.range,coe=QL.range,foe=eP.range,hoe=Kc.range,doe=tP.range,poe=rP.range;function Ph(e){return nr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/6048e5)}var ks=Ph(0),q0=Ph(1),nP=Ph(2),oP=Ph(3),Zc=Ph(4),sP=Ph(5),aP=Ph(6),lP=ks.range,moe=q0.range,goe=nP.range,voe=oP.range,boe=Zc.range,yoe=sP.range,xoe=aP.range;var Su=nr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),_oe=Su.range,Cu=nr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),woe=Cu.range;var Gn=nr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Gn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:nr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});var Soe=Gn.range,Yn=nr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Yn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:nr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});var Coe=Yn.range;function cP(e,t,r,i,n,o){let s=[[bn,1,1e3],[bn,5,5*1e3],[bn,15,15*1e3],[bn,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[n,1,36e5],[n,3,3*36e5],[n,6,6*36e5],[n,12,12*36e5],[i,1,864e5],[i,2,2*864e5],[r,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function a(u,c,f){let h=c<u;h&&([u,c]=[c,u]);let p=f&&typeof f.range=="function"?f:l(u,c,f),d=p?p.range(u,+c+1):[];return h?d.reverse():d}function l(u,c,f){let h=Math.abs(c-u)/f,p=Ko(([,,g])=>g).right(s,h);if(p===s.length)return e.every(Vn(u/31536e6,c/31536e6,f));if(p===0)return ha.every(Math.max(Vn(u,c,f),1));let[d,m]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return d.every(m)}return[a,l]}var[N8,B8]=cP(Yn,Cu,ks,Nx,Xc,Gc),[z8,H8]=cP(Gn,Su,Cs,wo,Yc,Vc);var Ti="year",Xn="quarter",Ki="month",ni="week",Kn="date",Xi="day",dl="dayofyear",So="hours",Co="minutes",Jo="seconds",Es="milliseconds",Bx=[Ti,Xn,Ki,ni,Kn,Xi,dl,So,Co,Jo,Es],U8=Bx.reduce((e,t,r)=>(e[t]=1+r,e),{});function zx(e){let t=ve(e).slice(),r={};return t.length||te("Missing time unit."),t.forEach(n=>{_e(U8,n)?r[n]=1:te(`Invalid time unit: ${n}.`)}),(r[ni]||r[Xi]?1:0)+(r[Xn]||r[Ki]||r[Kn]?1:0)+(r[dl]?1:0)>1&&te(`Incompatible time units: ${e}`),t.sort((n,o)=>U8[n]-U8[o]),t}var Eoe={[Ti]:"%Y ",[Xn]:"Q%q ",[Ki]:"%b ",[Kn]:"%d ",[ni]:"W%U ",[Xi]:"%a ",[dl]:"%j ",[So]:"%H:00",[Co]:"00:%M",[Jo]:":%S",[Es]:".%L",[`${Ti}-${Ki}`]:"%Y-%m ",[`${Ti}-${Ki}-${Kn}`]:"%Y-%m-%d ",[`${So}-${Co}`]:"%H:%M"};function Y8(e,t){let r=Ze({},Eoe,t),i=zx(e),n=i.length,o="",s=0,a,l;for(s=0;s<n;)for(a=i.length;a>s;--a)if(l=i.slice(s,a).join("-"),r[l]!=null){o+=r[l],s=a;break}return o.trim()}var Ih=new Date;function X8(e){return Ih.setFullYear(e),Ih.setMonth(0),Ih.setDate(1),Ih.setHours(0,0,0,0),Ih}function K8(e){return dP(new Date(e))}function Z8(e){return q8(new Date(e))}function dP(e){return wo.count(X8(e.getFullYear())-1,e)}function q8(e){return Cs.count(X8(e.getFullYear())-1,e)}function j8(e){return X8(e).getDay()}function Aoe(e,t,r,i,n,o,s){if(0<=e&&e<100){let a=new Date(-1,t,r,i,n,o,s);return a.setFullYear(e),a}return new Date(e,t,r,i,n,o,s)}function J8(e){return pP(new Date(e))}function Q8(e){return W8(new Date(e))}function pP(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return Ss.count(t-1,e)}function W8(e){let t=Date.UTC(e.getUTCFullYear(),0,1);return ks.count(t-1,e)}function V8(e){return Ih.setTime(Date.UTC(e,0,1)),Ih.getUTCDay()}function Toe(e,t,r,i,n,o,s){if(0<=e&&e<100){let a=new Date(Date.UTC(-1,t,r,i,n,o,s));return a.setUTCFullYear(r.y),a}return new Date(Date.UTC(e,t,r,i,n,o,s))}function mP(e,t,r,i,n){let o=t||1,s=ct(e),a=(v,b,y)=>(y=y||v,Doe(r[y],i[y],v===s&&o,b)),l=new Date,u=ii(e),c=u[Ti]?a(Ti):br(2012),f=u[Ki]?a(Ki):u[Xn]?a(Xn):ua,h=u[ni]&&u[Xi]?a(Xi,1,ni+Xi):u[ni]?a(ni,1):u[Xi]?a(Xi,1):u[Kn]?a(Kn,1):u[dl]?a(dl,1):ul,p=u[So]?a(So):ua,d=u[Co]?a(Co):ua,m=u[Jo]?a(Jo):ua,g=u[Es]?a(Es):ua;return function(v){l.setTime(+v);let b=c(l);return n(b,f(l),h(l,b),p(l),d(l),m(l),g(l))}}function Doe(e,t,r,i){let n=r<=1?e:i?(o,s)=>i+r*Math.floor((e(o,s)-i)/r):(o,s)=>r*Math.floor(e(o,s)/r);return t?(o,s)=>t(n(o,s),s):n}function j0(e,t,r){return t+e*7-(r+6)%7}var Roe={[Ti]:e=>e.getFullYear(),[Xn]:e=>Math.floor(e.getMonth()/3),[Ki]:e=>e.getMonth(),[Kn]:e=>e.getDate(),[So]:e=>e.getHours(),[Co]:e=>e.getMinutes(),[Jo]:e=>e.getSeconds(),[Es]:e=>e.getMilliseconds(),[dl]:e=>dP(e),[ni]:e=>q8(e),[ni+Xi]:(e,t)=>j0(q8(e),e.getDay(),j8(t)),[Xi]:(e,t)=>j0(1,e.getDay(),j8(t))},Moe={[Xn]:e=>3*e,[ni]:(e,t)=>j0(e,0,j8(t))};function eC(e,t){return mP(e,t||1,Roe,Moe,Aoe)}var Foe={[Ti]:e=>e.getUTCFullYear(),[Xn]:e=>Math.floor(e.getUTCMonth()/3),[Ki]:e=>e.getUTCMonth(),[Kn]:e=>e.getUTCDate(),[So]:e=>e.getUTCHours(),[Co]:e=>e.getUTCMinutes(),[Jo]:e=>e.getUTCSeconds(),[Es]:e=>e.getUTCMilliseconds(),[dl]:e=>pP(e),[ni]:e=>W8(e),[Xi]:(e,t)=>j0(1,e.getUTCDay(),V8(t)),[ni+Xi]:(e,t)=>j0(W8(e),e.getUTCDay(),V8(t))},Ooe={[Xn]:e=>3*e,[ni]:(e,t)=>j0(e,0,V8(t))};function tC(e,t){return mP(e,t||1,Foe,Ooe,Toe)}var $oe={[Ti]:Gn,[Xn]:Su.every(3),[Ki]:Su,[ni]:Cs,[Kn]:wo,[Xi]:wo,[dl]:wo,[So]:Yc,[Co]:Vc,[Jo]:bn,[Es]:ha},Loe={[Ti]:Yn,[Xn]:Cu.every(3),[Ki]:Cu,[ni]:ks,[Kn]:Ss,[Xi]:Ss,[dl]:Ss,[So]:Xc,[Co]:Gc,[Jo]:bn,[Es]:ha};function ku(e){return $oe[e]}function Eu(e){return Loe[e]}function gP(e,t,r){return e?e.offset(t,r):void 0}function rC(e,t,r){return gP(ku(e),t,r)}function iC(e,t,r){return gP(Eu(e),t,r)}function vP(e,t,r,i){return e?e.range(t,r,i):void 0}function nC(e,t,r,i){return vP(ku(e),t,r,i)}function oC(e,t,r,i){return vP(Eu(e),t,r,i)}var D1=1e3,R1=D1*60,M1=R1*60,Hx=M1*24,Poe=Hx*7,fP=Hx*30,G8=Hx*365,bP=[Ti,Ki,Kn,So,Co,Jo,Es],F1=bP.slice(0,-1),O1=F1.slice(0,-1),$1=O1.slice(0,-1),Ioe=$1.slice(0,-1),Noe=[Ti,ni],hP=[Ti,Ki],yP=[Ti],T1=[[F1,1,D1],[F1,5,5*D1],[F1,15,15*D1],[F1,30,30*D1],[O1,1,R1],[O1,5,5*R1],[O1,15,15*R1],[O1,30,30*R1],[$1,1,M1],[$1,3,3*M1],[$1,6,6*M1],[$1,12,12*M1],[Ioe,1,Hx],[Noe,1,Poe],[hP,1,fP],[hP,3,3*fP],[yP,1,G8]];function sC(e){let t=e.extent,r=e.maxbins||40,i=Math.abs(xu(t))/r,n=Ko(a=>a[2]).right(T1,i),o,s;return n===T1.length?(o=yP,s=Vn(t[0]/G8,t[1]/G8,r)):n?(n=T1[i/T1[n-1][2]<T1[n][2]/i?n-1:n],o=n[0],s=n[1]):(o=bP,s=Math.max(Vn(t[0],t[1],r),1)),{units:o,step:s}}function aC(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function lC(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function L1(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function W0(e){var t=e.dateTime,r=e.date,i=e.time,n=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=P1(n),c=I1(n),f=P1(o),h=I1(o),p=P1(s),d=I1(s),m=P1(a),g=I1(a),v=P1(l),b=I1(l),y={a:T,A:O,b:L,B:q,c:null,d:kP,e:kP,f:ase,g:vse,G:yse,H:nse,I:ose,j:sse,L:RP,m:lse,M:use,p:X,q:ne,Q:TP,s:DP,S:cse,u:fse,U:hse,V:dse,w:pse,W:mse,x:null,X:null,y:gse,Y:bse,Z:xse,"%":AP},x={a:ke,A:Ee,b:G,B,c:null,d:EP,e:EP,f:Cse,g:$se,G:Pse,H:_se,I:wse,j:Sse,L:FP,m:kse,M:Ese,p:le,q:pe,Q:TP,s:DP,S:Ase,u:Tse,U:Dse,V:Rse,w:Mse,W:Fse,x:null,X:null,y:Ose,Y:Lse,Z:Ise,"%":AP},S={a:M,A:D,b:z,B:P,c:I,d:SP,e:SP,f:ese,g:wP,G:_P,H:CP,I:CP,j:Koe,L:Qoe,m:Xoe,M:Zoe,p:A,q:Yoe,Q:rse,s:ise,S:Joe,u:qoe,U:joe,V:Woe,w:Uoe,W:Voe,x:N,X:H,y:wP,Y:_P,Z:Goe,"%":tse};y.x=_(r,y),y.X=_(i,y),y.c=_(t,y),x.x=_(r,x),x.X=_(i,x),x.c=_(t,x);function _(re,ue){return function(Re){var fe=[],mt=-1,ot=0,ze=re.length,ir,ki,Xo;for(Re instanceof Date||(Re=new Date(+Re));++mt<ze;)re.charCodeAt(mt)===37&&(fe.push(re.slice(ot,mt)),(ki=xP[ir=re.charAt(++mt)])!=null?ir=re.charAt(++mt):ki=ir==="e"?" ":"0",(Xo=ue[ir])&&(ir=Xo(Re,ki)),fe.push(ir),ot=mt+1);return fe.push(re.slice(ot,mt)),fe.join("")}}function w(re,ue){return function(Re){var fe=L1(1900,void 0,1),mt=k(fe,re,Re+="",0),ot,ze;if(mt!=Re.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(ue&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(ot=lC(L1(fe.y,0,1)),ze=ot.getUTCDay(),ot=ze>4||ze===0?q0.ceil(ot):q0(ot),ot=Ss.offset(ot,(fe.V-1)*7),fe.y=ot.getUTCFullYear(),fe.m=ot.getUTCMonth(),fe.d=ot.getUTCDate()+(fe.w+6)%7):(ot=aC(L1(fe.y,0,1)),ze=ot.getDay(),ot=ze>4||ze===0?U0.ceil(ot):U0(ot),ot=wo.offset(ot,(fe.V-1)*7),fe.y=ot.getFullYear(),fe.m=ot.getMonth(),fe.d=ot.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),ze="Z"in fe?lC(L1(fe.y,0,1)).getUTCDay():aC(L1(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(ze+5)%7:fe.w+fe.U*7-(ze+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,lC(fe)):aC(fe)}}function k(re,ue,Re,fe){for(var mt=0,ot=ue.length,ze=Re.length,ir,ki;mt<ot;){if(fe>=ze)return-1;if(ir=ue.charCodeAt(mt++),ir===37){if(ir=ue.charAt(mt++),ki=S[ir in xP?ue.charAt(mt++):ir],!ki||(fe=ki(re,Re,fe))<0)return-1}else if(ir!=Re.charCodeAt(fe++))return-1}return fe}function A(re,ue,Re){var fe=u.exec(ue.slice(Re));return fe?(re.p=c.get(fe[0].toLowerCase()),Re+fe[0].length):-1}function M(re,ue,Re){var fe=p.exec(ue.slice(Re));return fe?(re.w=d.get(fe[0].toLowerCase()),Re+fe[0].length):-1}function D(re,ue,Re){var fe=f.exec(ue.slice(Re));return fe?(re.w=h.get(fe[0].toLowerCase()),Re+fe[0].length):-1}function z(re,ue,Re){var fe=v.exec(ue.slice(Re));return fe?(re.m=b.get(fe[0].toLowerCase()),Re+fe[0].length):-1}function P(re,ue,Re){var fe=m.exec(ue.slice(Re));return fe?(re.m=g.get(fe[0].toLowerCase()),Re+fe[0].length):-1}function I(re,ue,Re){return k(re,t,ue,Re)}function N(re,ue,Re){return k(re,r,ue,Re)}function H(re,ue,Re){return k(re,i,ue,Re)}function T(re){return s[re.getDay()]}function O(re){return o[re.getDay()]}function L(re){return l[re.getMonth()]}function q(re){return a[re.getMonth()]}function X(re){return n[+(re.getHours()>=12)]}function ne(re){return 1+~~(re.getMonth()/3)}function ke(re){return s[re.getUTCDay()]}function Ee(re){return o[re.getUTCDay()]}function G(re){return l[re.getUTCMonth()]}function B(re){return a[re.getUTCMonth()]}function le(re){return n[+(re.getUTCHours()>=12)]}function pe(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var ue=_(re+="",y);return ue.toString=function(){return re},ue},parse:function(re){var ue=w(re+="",!1);return ue.toString=function(){return re},ue},utcFormat:function(re){var ue=_(re+="",x);return ue.toString=function(){return re},ue},utcParse:function(re){var ue=w(re+="",!0);return ue.toString=function(){return re},ue}}}var xP={"-":"",_:" ",0:"0"},Di=/^\s*\d+/,Boe=/^%/,zoe=/[\\^$*+?|[\]().{}]/g;function It(e,t,r){var i=e<0?"-":"",n=(i?-e:e)+"",o=n.length;return i+(o<r?new Array(r-o+1).join(t)+n:n)}function Hoe(e){return e.replace(zoe,"\\$&")}function P1(e){return new RegExp("^(?:"+e.map(Hoe).join("|")+")","i")}function I1(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Uoe(e,t,r){var i=Di.exec(t.slice(r,r+1));return i?(e.w=+i[0],r+i[0].length):-1}function qoe(e,t,r){var i=Di.exec(t.slice(r,r+1));return i?(e.u=+i[0],r+i[0].length):-1}function joe(e,t,r){var i=Di.exec(t.slice(r,r+2));return i?(e.U=+i[0],r+i[0].length):-1}function Woe(e,t,r){var i=Di.exec(t.slice(r,r+2));return i?(e.V=+i[0],r+i[0].length):-1}function Voe(e,t,r){var i=Di.exec(t.slice(r,r+2));return i?(e.W=+i[0],r+i[0].length):-1}function _P(e,t,r){var i=Di.exec(t.slice(r,r+4));return i?(e.y=+i[0],r+i[0].length):-1}function wP(e,t,r){var i=Di.exec(t.slice(r,r+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function Goe(e,t,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function Yoe(e,t,r){var i=Di.exec(t.slice(r,r+1));return i?(e.q=i[0]*3-3,r+i[0].length):-1}function Xoe(e,t,r){var i=Di.exec(t.slice(r,r+2));return i?(e.m=i[0]-1,r+i[0].length):-1}function SP(e,t,r){var i=Di.exec(t.slice(r,r+2));return i?(e.d=+i[0],r+i[0].length):-1}function Koe(e,t,r){var i=Di.exec(t.slice(r,r+3));return i?(e.m=0,e.d=+i[0],r+i[0].length):-1}function CP(e,t,r){var i=Di.exec(t.slice(r,r+2));return i?(e.H=+i[0],r+i[0].length):-1}function Zoe(e,t,r){var i=Di.exec(t.slice(r,r+2));return i?(e.M=+i[0],r+i[0].length):-1}function Joe(e,t,r){var i=Di.exec(t.slice(r,r+2));return i?(e.S=+i[0],r+i[0].length):-1}function Qoe(e,t,r){var i=Di.exec(t.slice(r,r+3));return i?(e.L=+i[0],r+i[0].length):-1}function ese(e,t,r){var i=Di.exec(t.slice(r,r+6));return i?(e.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function tse(e,t,r){var i=Boe.exec(t.slice(r,r+1));return i?r+i[0].length:-1}function rse(e,t,r){var i=Di.exec(t.slice(r));return i?(e.Q=+i[0],r+i[0].length):-1}function ise(e,t,r){var i=Di.exec(t.slice(r));return i?(e.s=+i[0],r+i[0].length):-1}function kP(e,t){return It(e.getDate(),t,2)}function nse(e,t){return It(e.getHours(),t,2)}function ose(e,t){return It(e.getHours()%12||12,t,2)}function sse(e,t){return It(1+wo.count(Gn(e),e),t,3)}function RP(e,t){return It(e.getMilliseconds(),t,3)}function ase(e,t){return RP(e,t)+"000"}function lse(e,t){return It(e.getMonth()+1,t,2)}function use(e,t){return It(e.getMinutes(),t,2)}function cse(e,t){return It(e.getSeconds(),t,2)}function fse(e){var t=e.getDay();return t===0?7:t}function hse(e,t){return It(Cs.count(Gn(e)-1,e),t,2)}function MP(e){var t=e.getDay();return t>=4||t===0?Kc(e):Kc.ceil(e)}function dse(e,t){return e=MP(e),It(Kc.count(Gn(e),e)+(Gn(e).getDay()===4),t,2)}function pse(e){return e.getDay()}function mse(e,t){return It(U0.count(Gn(e)-1,e),t,2)}function gse(e,t){return It(e.getFullYear()%100,t,2)}function vse(e,t){return e=MP(e),It(e.getFullYear()%100,t,2)}function bse(e,t){return It(e.getFullYear()%1e4,t,4)}function yse(e,t){var r=e.getDay();return e=r>=4||r===0?Kc(e):Kc.ceil(e),It(e.getFullYear()%1e4,t,4)}function xse(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+It(t/60|0,"0",2)+It(t%60,"0",2)}function EP(e,t){return It(e.getUTCDate(),t,2)}function _se(e,t){return It(e.getUTCHours(),t,2)}function wse(e,t){return It(e.getUTCHours()%12||12,t,2)}function Sse(e,t){return It(1+Ss.count(Yn(e),e),t,3)}function FP(e,t){return It(e.getUTCMilliseconds(),t,3)}function Cse(e,t){return FP(e,t)+"000"}function kse(e,t){return It(e.getUTCMonth()+1,t,2)}function Ese(e,t){return It(e.getUTCMinutes(),t,2)}function Ase(e,t){return It(e.getUTCSeconds(),t,2)}function Tse(e){var t=e.getUTCDay();return t===0?7:t}function Dse(e,t){return It(ks.count(Yn(e)-1,e),t,2)}function OP(e){var t=e.getUTCDay();return t>=4||t===0?Zc(e):Zc.ceil(e)}function Rse(e,t){return e=OP(e),It(Zc.count(Yn(e),e)+(Yn(e).getUTCDay()===4),t,2)}function Mse(e){return e.getUTCDay()}function Fse(e,t){return It(q0.count(Yn(e)-1,e),t,2)}function Ose(e,t){return It(e.getUTCFullYear()%100,t,2)}function $se(e,t){return e=OP(e),It(e.getUTCFullYear()%100,t,2)}function Lse(e,t){return It(e.getUTCFullYear()%1e4,t,4)}function Pse(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Zc(e):Zc.ceil(e),It(e.getUTCFullYear()%1e4,t,4)}function Ise(){return"+0000"}function AP(){return"%"}function TP(e){return+e}function DP(e){return Math.floor(+e/1e3)}var V0,G0,Ux,Y0,qx;uC({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uC(e){return V0=W0(e),G0=V0.format,Ux=V0.parse,Y0=V0.utcFormat,qx=V0.utcParse,V0}function N1(e){let t={};return r=>t[r]||(t[r]=e(r))}function Nse(e,t){return r=>{let i=e(r),n=i.indexOf(t);if(n<0)return i;let o=Bse(i,n),s=o<i.length?i.slice(o):"";for(;--o>n;)if(i[o]!=="0"){++o;break}return i.slice(0,o)+s}}function Bse(e,t){let r=e.lastIndexOf("e"),i;if(r>0)return r;for(r=e.length;--r>t;)if(i=e.charCodeAt(r),i>=48&&i<=57)return r+1}function LP(e){let t=N1(e.format),r=e.formatPrefix;return{format:t,formatPrefix:r,formatFloat(i){let n=Zo(i||",");if(n.precision==null){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1;break}return Nse(t(n),t(".1f")(1)[1])}else return t(n)},formatSpan(i,n,o,s){s=Zo(s??",f");let a=Vn(i,n,o),l=Math.max(Math.abs(i),Math.abs(n)),u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=k1(a,l))||(s.precision=u),r(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=E1(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=C1(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}var cC;PP();function PP(){return cC=LP({format:Wc,formatPrefix:H0})}function IP(e){return LP(S1(e))}function B1(e){return arguments.length?cC=IP(e):cC}function $P(e,t,r){r=r||{},me(r)||te(`Invalid time multi-format specifier: ${r}`);let i=t(Jo),n=t(Co),o=t(So),s=t(Kn),a=t(ni),l=t(Ki),u=t(Xn),c=t(Ti),f=e(r[Es]||".%L"),h=e(r[Jo]||":%S"),p=e(r[Co]||"%I:%M"),d=e(r[So]||"%I %p"),m=e(r[Kn]||r[Xi]||"%a %d"),g=e(r[ni]||"%b %d"),v=e(r[Ki]||"%B"),b=e(r[Xn]||"%B"),y=e(r[Ti]||"%Y");return x=>(i(x)<x?f:n(x)<x?h:o(x)<x?p:s(x)<x?d:l(x)<x?a(x)<x?m:g:c(x)<x?u(x)<x?v:b:y)(x)}function NP(e){let t=N1(e.format),r=N1(e.utcFormat);return{timeFormat:i=>he(i)?t(i):$P(t,ku,i),utcFormat:i=>he(i)?r(i):$P(r,Eu,i),timeParse:N1(e.parse),utcParse:N1(e.utcParse)}}var fC;BP();function BP(){return fC=NP({format:G0,parse:Ux,utcFormat:Y0,utcParse:qx})}function zP(e){return NP(W0(e))}function Nh(e){return arguments.length?fC=zP(e):fC}var hC=(e,t)=>Ze({},e,t);function jx(e,t){let r=e?IP(e):B1(),i=t?zP(t):Nh();return hC(r,i)}function z1(e,t){let r=arguments.length;return r&&r!==2&&te("defaultLocale expects either zero or two arguments."),r?hC(B1(e),Nh(t)):hC(B1(),Nh())}function HP(){return PP(),BP(),z1()}var zse=/^(data:|([A-Za-z]+:)?\/\/)/,Hse=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Use=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,UP="file://";function qse(e,t){return r=>({options:r||{},sanitize:Wse,load:jse,fileAccess:!1,file:Vse(t),http:Yse(e)})}async function jse(e,t){let r=await this.sanitize(e,t),i=r.href;return r.localFile?this.file(i):this.http(i,t)}async function Wse(e,t){t=Ze({},this.options,t);let r=this.fileAccess,i={href:null},n,o,s,a=Hse.test(e.replace(Use,""));(e==null||typeof e!="string"||!a)&&te("Sanitize failure, invalid URI: "+de(e));let l=zse.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(n=e.startsWith(UP))||t.mode==="file"||t.mode!=="http"&&!l&&r,n?e=e.slice(UP.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function Vse(e){return e?t=>new Promise((r,i)=>{e.readFile(t,(n,o)=>{n?i(n):r(o)})}):Gse}async function Gse(){te("No file system access.")}function Yse(e){return e?async function(t,r){let i=Ze({},this.options.http,r),n=r&&r.response,o=await e(t,i);return o.ok?Ke(o[n])?o[n]():o.text():te(o.status+""+o.statusText)}:Xse}async function Xse(){te("No HTTP fetch method available.")}var Kse=e=>e!=null&&e===e,Zse=e=>e==="true"||e==="false"||e===!0||e===!1,Jse=e=>!Number.isNaN(Date.parse(e)),jP=e=>!Number.isNaN(+e)&&!(e instanceof Date),Qse=e=>jP(e)&&Number.isInteger(+e),dC={boolean:m1,integer:Gr,number:Gr,date:g1,string:v1,unknown:Ir},Wx=[Zse,Qse,jP,Jse],eae=["boolean","integer","number","date"];function WP(e,t){if(!e||!e.length)return"unknown";let r=e.length,i=Wx.length,n=Wx.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<r;++o)for(l=t?e[o][t]:e[o],a=0;a<i;++a)if(n[a]&&Kse(l)&&!Wx[a](l)&&(n[a]=0,++s,s===Wx.length))return"string";return eae[n.reduce((o,s)=>o===0?s:o,0)-1]}function VP(e,t){return t.reduce((r,i)=>(r[i]=WP(e,i),r),{})}function qP(e){let t=function(r,i){let n={delimiter:e};return pC(r,i?Ze(i,n):n)};return t.responseType="text",t}function pC(e,t){return t.header&&(e=t.header.map(de).join(t.delimiter)+`
`+e),_8(t.delimiter).parse(e+"")}pC.responseType="text";function tae(e){return typeof Buffer=="function"&&Ke(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function mC(e,t){let r=t&&t.property?Ai(t.property):Ir;return me(e)&&!tae(e)?rae(r(e),t):r(JSON.parse(e))}mC.responseType="json";function rae(e,t){return!K(e)&&h8(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}var iae={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function GP(e,t){let r,i,n,o;return e=mC(e,t),t&&t.feature?(r=S8,n=t.feature):t&&t.mesh?(r=k8,n=t.mesh,o=iae[t.filter]):te("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[n])?r(e,i,o):te("Invalid TopoJSON object: "+n),i&&i.features||[i]}GP.responseType="json";var Vx={dsv:pC,csv:qP(","),tsv:qP("	"),json:mC,topojson:GP};function gC(e,t){return arguments.length>1?(Vx[e]=t,this):_e(Vx,e)?Vx[e]:null}function vC(e){let t=gC(e);return t&&t.responseType||"text"}function bC(e,t,r,i){t=t||{};let n=gC(t.type||"json");return n||te("Unknown data format type: "+t.type),e=n(e,t),t.parse&&nae(e,t.parse,r,i),_e(e,"columns")&&delete e.columns,e}function nae(e,t,r,i){if(!e.length)return;let n=Nh();r=r||n.timeParse,i=i||n.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,c,f;t==="auto"&&(t=VP(e,o)),o=Object.keys(t);let h=o.map(p=>{let d=t[p],m,g;if(d&&(d.startsWith("date:")||d.startsWith("utc:")))return m=d.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?i:r)(g);if(!dC[d])throw Error("Illegal format pattern: "+p+":"+d);return dC[d]});for(l=0,c=e.length,f=o.length;l<c;++l)for(s=e[l],u=0;u<f;++u)a=o[u],s[a]=h[u](s[a])}var X0=qse(typeof fetch<"u"&&fetch,null);function Kx(e){let t=e||Ir,r=[],i={};return r.add=n=>{let o=t(n);return i[o]||(i[o]=1,r.push(n)),r},r.remove=n=>{let o=t(n);if(i[o]){i[o]=0;let s=r.indexOf(n);s>=0&&r.splice(s,1)}return r},r}async function q1(e,t){try{await t(e)}catch(r){e.error(r)}}var eI=Symbol("vega_id"),oae=1;function Bh(e){return!!(e&&qe(e))}function qe(e){return e[eI]}function tI(e,t){return e[eI]=t,e}function xt(e){let t=e===Object(e)?e:{data:e};return qe(t)?t:tI(t,oae++)}function Zx(e){return zh(e,xt({}))}function zh(e,t){for(let r in e)t[r]=e[r];return t}function Jx(e,t){return tI(t,qe(e))}function ml(e,t){return e?t?(r,i)=>e(r,i)||qe(t(r))-qe(t(i)):(r,i)=>e(r,i)||qe(r)-qe(i):null}function xC(e){return e&&e.constructor===Ru}function Ru(){let e=[],t=[],r=[],i=[],n=[],o=null,s=!1;return{constructor:Ru,insert(a){let l=ve(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){let l=Ke(a)?i:t,u=ve(a),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(a,l,u){let c={field:l,value:br(u)};return Ke(a)?(c.filter=a,n.push(c)):(c.tuple=a,r.push(c)),this},encode(a,l){return Ke(a)?n.push({filter:a,field:l}):r.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){let u={},c={},f,h,p,d,m,g;for(f=0,h=l.length;f<h;++f)u[qe(l[f])]=1;for(f=0,h=t.length;f<h;++f)m=t[f],u[qe(m)]=-1;for(f=0,h=i.length;f<h;++f)d=i[f],l.forEach(b=>{d(b)&&(u[qe(b)]=-1)});for(f=0,h=e.length;f<h;++f)m=e[f],g=qe(m),u[g]?u[g]=1:a.add.push(xt(e[f]));for(f=0,h=l.length;f<h;++f)m=l[f],u[qe(m)]<0&&a.rem.push(m);function v(b,y,x){x?b[y]=x(b):a.encode=y,s||(c[qe(b)]=b)}for(f=0,h=r.length;f<h;++f)p=r[f],m=p.tuple,d=p.field,g=u[qe(m)],g>0&&(v(m,d,p.value),a.modifies(d));for(f=0,h=n.length;f<h;++f)p=n[f],d=p.filter,l.forEach(b=>{d(b)&&u[qe(b)]>0&&v(b,p.field,p.value)}),a.modifies(p.field);if(s)a.mod=t.length||i.length?l.filter(b=>u[qe(b)]>0):l.slice();else for(g in c)a.mod.push(c[g]);return(o||o==null&&(t.length||i.length))&&a.clean(!0),a}}}var Yx="_:mod:_";function j1(){Object.defineProperty(this,Yx,{writable:!0,value:{}})}j1.prototype={set(e,t,r,i){let n=this,o=n[e],s=n[Yx];return t!=null&&t>=0?(o[t]!==r||i)&&(o[t]=r,s[t+":"+e]=-1,s[e]=-1):(o!==r||i)&&(n[e]=r,s[e]=K(r)?1+r.length:-1),n},modified(e,t){let r=this[Yx];if(arguments.length){if(K(e)){for(let i=0;i<e.length;++i)if(r[e[i]])return!0;return!1}}else{for(let i in r)if(r[i])return!0;return!1}return t!=null&&t>=0?t+1<r[e]||!!r[t+":"+e]:!!r[e]},clear(){return this[Yx]={},this}};var sae=0,aae="pulse",lae=new j1,uae=1,cae=2;function Vt(e,t,r,i){this.id=++sae,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),r&&this.parameters(r,i)}function YP(e){return function(t){let r=this.flags;return arguments.length===0?!!(r&e):(this.flags=t?r|e:r&~e,this)}}Vt.prototype={targets(){return this._targets||(this._targets=Kx(L0))},set(e){return this.value!==e?(this.value=e,1):0},skip:YP(uae),modified:YP(cae),parameters(e,t,r){t=t!==!1;let i=this._argval=this._argval||new j1,n=this._argops=this._argops||[],o=[],s,a,l,u,c=(f,h,p)=>{p instanceof Vt?(p!==this&&(t&&p.targets().add(this),o.push(p)),n.push({op:p,name:f,index:h})):i.set(f,h,p)};for(s in e)if(a=e[s],s===aae)ve(a).forEach(f=>{f instanceof Vt?f!==this&&(f.targets().add(this),o.push(f)):te("Pulse parameters must be operator instances.")}),this.source=a;else if(K(a))for(i.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),r&&(n.initonly=!0),o},marshall(e){let t=this._argval||lae,r=this._argops,i,n,o,s;if(r){let a=r.length;for(n=0;n<a;++n)i=r[n],o=i.op,s=o.modified()&&o.stamp===e,t.set(i.name,i.index,o.value,s);if(r.initonly){for(n=0;n<a;++n)i=r[n],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){let e=this._argops,t,r,i,n;if(e)for(t=0,r=e.length;t<r;++t)i=e[t],n=i.op,n._targets&&n._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){let t=this._update;if(t){let r=this.marshall(e.stamp),i=t.call(this,r,e);if(r.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function fae(e,t,r,i){let n=1,o;return e instanceof Vt?o=e:e&&e.prototype instanceof Vt?o=new e:Ke(e)?o=new Vt(null,e):(n=0,o=new Vt(e,t)),this.rank(o),n&&(i=r,r=t),r&&this.connect(o,o.parameters(r,i)),this.touch(o),o}function hae(e,t){let r=e.rank,i=t.length;for(let n=0;n<i;++n)if(r<t[n].rank){this.rerank(e);return}}var dae=0;function Z0(e,t,r){this.id=++dae,this.value=null,r&&(this.receive=r),e&&(this._filter=e),t&&(this._apply=t)}function Jc(e,t,r){return new Z0(e,t,r)}Z0.prototype={_filter:gi,_apply:Ir,targets(){return this._targets||(this._targets=Kx(L0))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){let t=this.value=this._apply(e),r=this._targets,i=r?r.length:0;for(let n=0;n<i;++n)r[n].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){let t=Jc(e);return this.targets().add(t),t},apply(e){let t=Jc(null,e);return this.targets().add(t),t},merge(){let e=Jc();this.targets().add(e);for(let t=0,r=arguments.length;t<r;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{let r=Date.now();return r-t>e?(t=r,1):0})},debounce(e){let t=Jc();return this.targets().add(Jc(null,null,d1(e,r=>{let i=r.dataflow;t.receive(r),i&&i.run&&i.run()}))),t},between(e,t){let r=!1;return e.targets().add(Jc(null,null,()=>r=!0)),t.targets().add(Jc(null,null,()=>r=!1)),this.filter(()=>r)},detach(){this._filter=gi,this._targets=null}};function pae(e,t,r,i){let n=this,o=Jc(r,i),s=function(u){u.dataflow=n;try{o.receive(u)}catch(c){n.error(c)}finally{n.run()}},a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ve(e);let l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function mae(e,t){let r=this.locale();return bC(e,t,r.timeParse,r.utcParse)}function gae(e,t,r){return t=this.parse(t,r),this.pulse(e,this.changeset().insert(t))}async function vae(e,t){let r=this,i=0,n;try{n=await r.loader().load(e,{context:"dataflow",response:vC(t&&t.type)});try{n=r.parse(n,t)}catch(o){i=-2,r.warn("Data ingestion failed",e,o)}}catch(o){i=-1,r.warn("Loading failed",e,o)}return{data:n,status:i}}async function bae(e,t,r){let i=this,n=i._pending||yae(i);n.requests+=1;let o=await i.request(t,r);return i.pulse(e,i.changeset().remove(gi).insert(o.data||[])),n.done(),o}function yae(e){let t,r=new Promise(i=>t=i);return r.requests=0,r.done=()=>{--r.requests===0&&(e._pending=null,t(e))},e._pending=r}var xae={skip:!0};function _ae(e,t,r,i,n){return(e instanceof Vt?Sae:wae)(this,e,t,r,i,n),this}function wae(e,t,r,i,n,o){let s=Ze({},o,xae),a,l;Ke(r)||(r=br(r)),i===void 0?a=u=>e.touch(r(u)):Ke(i)?(l=new Vt(null,i,n,!1),a=u=>{l.evaluate(u);let c=r(u),f=l.value;xC(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=u=>e.update(r(u),i,s),t.apply(a)}function Sae(e,t,r,i,n,o){if(i===void 0)t.targets().add(r);else{let s=o||{},a=new Vt(null,Cae(r,i),n,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),r&&(a.skip(!0),a.value=r.value,a.targets().add(r),e.connect(r,[a]))}}function Cae(e,t){return t=Ke(t)?t:br(t),e?function(r,i){let n=t(r,i);return e.skip()||(e.skip(n!==this.value).value=n),n}:t}function kae(e){e.rank=++this._rank}function Eae(e){let t=[e],r,i,n;for(;t.length;)if(this.rank(r=t.pop()),i=r._targets)for(n=i.length;--n>=0;)t.push(r=i[n]),r===e&&te("Cycle detected in dataflow graph.")}var Xx={},pl=1,Qc=2,Au=4,Aae=pl|Qc,XP=pl|Au,K0=pl|Qc|Au,KP=8,H1=16,ZP=32,JP=64;function Tu(e,t,r){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=r||null}function yC(e,t){let r=[];return _u(e,t,i=>r.push(i)),r}function QP(e,t){let r={};return e.visit(t,i=>{r[qe(i)]=1}),i=>r[qe(i)]?null:i}function Gx(e,t){return e?(r,i)=>e(r,i)&&t(r,i):t}Tu.prototype={StopPropagation:Xx,ADD:pl,REM:Qc,MOD:Au,ADD_REM:Aae,ADD_MOD:XP,ALL:K0,REFLOW:KP,SOURCE:H1,NO_SOURCE:ZP,NO_FIELDS:JP,fork(e){return new Tu(this.dataflow).init(this,e)},clone(){let e=this.fork(K0);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(K0|H1)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Tu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){let r=this;return r.stamp=e.stamp,r.encode=e.encode,e.fields&&!(t&JP)&&(r.fields=e.fields),t&pl?(r.addF=e.addF,r.add=e.add):(r.addF=null,r.add=[]),t&Qc?(r.remF=e.remF,r.rem=e.rem):(r.remF=null,r.rem=[]),t&Au?(r.modF=e.modF,r.mod=e.mod):(r.modF=null,r.mod=[]),t&ZP?(r.srcF=null,r.source=null):(r.srcF=e.srcF,r.source=e.source,e.cleans&&(r.cleans=e.cleans)),r},runAfter(e){this.dataflow.runAfter(e)},changed(e){let t=e||K0;return t&pl&&this.add.length||t&Qc&&this.rem.length||t&Au&&this.mod.length},reflow(e){if(e)return this.fork(K0).reflow();let t=this.add.length,r=this.source&&this.source.length;return r&&r!==t&&(this.mod=this.source,t&&this.filter(Au,QP(this,pl))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){let t=this.fields||(this.fields={});return K(e)?e.forEach(r=>t[r]=!0):t[e]=!0,this},modified(e,t){let r=this.fields;return(t||this.mod.length)&&r?arguments.length?K(e)?e.some(i=>r[i]):r[e]:!!r:!1},filter(e,t){let r=this;return e&pl&&(r.addF=Gx(r.addF,t)),e&Qc&&(r.remF=Gx(r.remF,t)),e&Au&&(r.modF=Gx(r.modF,t)),e&H1&&(r.srcF=Gx(r.srcF,t)),r},materialize(e){e=e||K0;let t=this;return e&pl&&t.addF&&(t.add=yC(t.add,t.addF),t.addF=null),e&Qc&&t.remF&&(t.rem=yC(t.rem,t.remF),t.remF=null),e&Au&&t.modF&&(t.mod=yC(t.mod,t.modF),t.modF=null),e&H1&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){let r=this,i=t;if(e&H1)return _u(r.source,r.srcF,i),r;e&pl&&_u(r.add,r.addF,i),e&Qc&&_u(r.rem,r.remF,i),e&Au&&_u(r.mod,r.modF,i);let n=r.source;if(e&KP&&n){let o=r.add.length+r.mod.length;o===n.length||(o?_u(n,QP(r,XP),i):_u(n,r.srcF,i))}return r}};function Qx(e,t,r,i){let n=this,o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=r;for(let s of r)if(s.stamp===t){if(s.fields){let a=n.fields||(n.fields={});for(let l in s.fields)a[l]=1}s.changed(n.ADD)&&(o|=n.ADD),s.changed(n.REM)&&(o|=n.REM),s.changed(n.MOD)&&(o|=n.MOD)}this.changes=o}xe(Qx,Tu,{fork(e){let t=new Tu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,r=>t.add.push(r)),e&t.REM&&this.visit(t.REM,r=>t.rem.push(r)),e&t.MOD&&this.visit(t.MOD,r=>t.mod.push(r))),t},changed(e){return this.changes&e},modified(e){let t=this,r=t.fields;return r&&t.changes&t.MOD?K(e)?e.some(i=>r[i]):r[e]:0},filter(){te("MultiPulse does not support filtering.")},materialize(){te("MultiPulse does not support materialization.")},visit(e,t){let r=this,i=r.pulses,n=i.length,o=0;if(e&r.SOURCE)for(;o<n;++o)i[o].visit(e,t);else for(;o<n;++o)i[o].stamp===r.stamp&&i[o].visit(e,t);return r}});async function Tae(e,t,r){let i=this,n=[];if(i._pulse)return rI(i);if(i._pending&&await i._pending,t&&await q1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;let o=++i._clock;i._pulse=new Tu(i,o,e),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=Kx(L0);let s=0,a,l,u;try{for(;i._heap.size()>0;){if(a=i._heap.pop(),a.rank!==a.qrank){i._enqueue(a,!0);continue}l=a.run(i._getPulse(a,e)),l.then?l=await l:l.async&&(n.push(l.async),l=Xx),l!==Xx&&a._targets&&a._targets.forEach(c=>i._enqueue(c)),++s}}catch(c){i._heap.clear(),u=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${s} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){let c=i._postrun.sort((f,h)=>h.priority-f.priority);i._postrun=[];for(let f=0;f<c.length;++f)await q1(i,c[f].callback)}return r&&await q1(i,r),n.length&&Promise.all(n).then(c=>i.runAsync(null,()=>{c.forEach(f=>{try{f(i)}catch(h){i.error(h)}})})),i}async function Dae(e,t,r){for(;this._running;)await this._running;let i=()=>this._running=null;return(this._running=this.evaluate(e,t,r)).then(i,i),this._running}function Rae(e,t,r){return this._pulse?rI(this):(this.evaluate(e,t,r),this)}function Mae(e,t,r){if(this._pulse||t)this._postrun.push({priority:r||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function rI(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Fae(e,t){let r=e.stamp<this._clock;r&&(e.stamp=this._clock),(r||t)&&(e.qrank=e.rank,this._heap.push(e))}function Oae(e,t){let r=e.source,i=this._clock;return r&&K(r)?new Qx(this,i,r.map(n=>n.pulse),t):this._input[e.id]||$ae(this._pulse,r&&r.pulse)}function $ae(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Xx&&(e.source=t.source),e)}var _C={skip:!1,force:!1};function Lae(e,t){let r=t||_C;return this._pulse?this._enqueue(e):this._touched.add(e),r.skip&&e.skip(!0),this}function Pae(e,t,r){let i=r||_C;return(e.set(t)||i.force)&&this.touch(e,i),this}function Iae(e,t,r){this.touch(e,r||_C);let i=new Tu(this,this._clock+(this._pulse?0:1)),n=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,n),this}function Nae(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:r=>(t.push(r),iI(t,0,t.length-1,e)),pop:()=>{let r=t.pop(),i;return t.length?(i=t[0],t[0]=r,Bae(t,0,e)):i=r,i}}}function iI(e,t,r,i){let n,o,s=e[r];for(;r>t;){if(o=r-1>>1,n=e[o],i(s,n)<0){e[r]=n,r=o;continue}break}return e[r]=s}function Bae(e,t,r){let i=t,n=e.length,o=e[t],s=(t<<1)+1,a;for(;s<n;)a=s+1,a<n&&r(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,iI(e,i,t,r)}function ef(){this.logger(l1()),this.logLevel(a1),this._clock=0,this._rank=0,this._locale=z1();try{this._loader=X0()}catch{}this._touched=Kx(L0),this._input={},this._pulse=null,this._heap=Nae((e,t)=>e.qrank-t.qrank),this._postrun=[]}function U1(e){return function(){return this._log[e].apply(this,arguments)}}ef.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:U1("error"),warn:U1("warn"),info:U1("info"),debug:U1("debug"),logLevel:U1("level"),cleanThreshold:1e4,add:fae,connect:hae,rank:kae,rerank:Eae,pulse:Iae,touch:Lae,update:Pae,changeset:Ru,ingest:gae,parse:mae,preload:bae,request:vae,events:pae,on:_ae,evaluate:Tae,run:Rae,runAsync:Dae,runAfter:Mae,_enqueue:Fae,_getPulse:Oae};function ee(e,t){Vt.call(this,e,null,t)}xe(ee,Vt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(r=>this.pulse=r):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){let t=this.marshall(e.stamp),r=this.transform(t,e);return t.clear(),r},transform(){}});var Du={};function e_(e){let t=wC(e);return t&&t.Definition||null}function wC(e){return e=e&&e.toLowerCase(),_e(Du,e)?Du[e]:null}var lk={};pi(lk,{aggregate:()=>tf,bin:()=>NC,collect:()=>BC,compare:()=>mI,countpattern:()=>zC,cross:()=>HC,density:()=>UC,dotbin:()=>jC,expression:()=>xI,extent:()=>WC,facet:()=>x_,field:()=>_I,filter:()=>GC,flatten:()=>YC,fold:()=>XC,formula:()=>KC,generate:()=>wI,impute:()=>ZC,joinaggregate:()=>JC,kde:()=>QC,key:()=>SI,load:()=>CI,lookup:()=>ek,multiextent:()=>kI,multivalues:()=>EI,params:()=>AI,pivot:()=>tk,prefacet:()=>TI,project:()=>rk,proxy:()=>DI,quantile:()=>ik,relay:()=>RI,sample:()=>nk,sequence:()=>ok,sieve:()=>MI,subflow:()=>VC,timeunit:()=>sk,tupleindex:()=>OI,values:()=>$I,window:()=>ak});function*sI(e,t){if(t==null)for(let r of e)r!=null&&r!==""&&(r=+r)>=r&&(yield r);else{let r=-1;for(let i of e)i=t(i,++r,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function t_(e,t,r){let i=Float64Array.from(sI(e,r));return i.sort(vn),t.map(n=>w1(i,n))}function r_(e,t){return t_(e,[.25,.5,.75],t)}function i_(e,t){let r=e.length,i=Dx(e,t),n=r_(e,t),o=(n[2]-n[0])/1.34;return 1.06*(Math.min(i,o)||i||Math.abs(n[0])||1)*Math.pow(r,-.2)}function SC(e){let t=e.maxbins||20,r=e.base||10,i=Math.log(r),n=e.divide||[5,2],o=e.extent[0],s=e.extent[1],a,l,u,c,f,h,p=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=p/t,f=0,h=e.steps.length;f<h&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/i),u=e.minstep||0,a=Math.max(u,Math.pow(r,Math.round(Math.log(p)/i)-l));Math.ceil(p/a)>t;)a*=r;for(f=0,h=n.length;f<h;++f)c=a/n[f],c>=u&&p/c<=t&&(a=c)}c=Math.log(a);let d=c>=0?0:~~(-c/i)+1,m=Math.pow(r,-d-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+m)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Zn=Math.random;function zae(e){Zn=e}function CC(e,t,r,i){if(!e.length)return[void 0,void 0];let n=Float64Array.from(sI(e,i)),o=n.length,s=t,a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=n[~~(Zn()*o)];c[u]=a/o}return c.sort(vn),[Mh(c,r/2),Mh(c,1-r/2)]}function kC(e,t,r,i){i=i||(h=>h);let n=e.length,o=new Float64Array(n),s=0,a=1,l=i(e[0]),u=l,c=l+t,f;for(;a<n;++a){if(f=i(e[a]),f>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;s<a;++s)o[s]=u;return r?Hae(o,t+t/4):o}function Hae(e,t){let r=e.length,i=0,n=1,o,s;for(;e[i]===e[n];)++n;for(;n<r;){for(o=n+1;e[n]===e[o];)++o;if(e[n]-e[n-1]<t){for(s=n+(i+o-n-n>>1);s<n;)e[s++]=e[n];for(;s>n;)e[s--]=e[i]}i=n,n=o}return e}function Uae(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function qae(e,t){t==null&&(t=e,e=0);let r,i,n,o={min(s){return arguments.length?(r=s||0,n=i-r,o):r},max(s){return arguments.length?(i=s||0,n=i-r,o):i},sample(){return r+Math.floor(n*Zn())},pdf(s){return s===Math.floor(s)&&s>=r&&s<i?1/n:0},cdf(s){let a=Math.floor(s);return a<r?0:a>=i?1:(a-r+1)/n},icdf(s){return s>=0&&s<=1?r-1+Math.floor(s*n):NaN}};return o.min(e).max(t)}var aI=Math.sqrt(2*Math.PI),jae=Math.SQRT2,W1=NaN;function V1(e,t){e=e||0,t=t??1;let r=0,i=0,n,o;if(W1===W1)r=W1,W1=NaN;else{do r=Zn()*2-1,i=Zn()*2-1,n=r*r+i*i;while(n===0||n>1);o=Math.sqrt(-2*Math.log(n)/n),r*=o,W1=i*o}return e+r*t}function n_(e,t,r){r=r??1;let i=(e-(t||0))/r;return Math.exp(-.5*i*i)/(r*aI)}function G1(e,t,r){t=t||0,r=r??1;let i=(e-t)/r,n=Math.abs(i),o;if(n>37)o=0;else{let s=Math.exp(-n*n/2),a;n<7.07106781186547?(a=.0352624965998911*n+.700383064443688,a=a*n+6.37396220353165,a=a*n+33.912866078383,a=a*n+112.079291497871,a=a*n+221.213596169931,a=a*n+220.206867912376,o=s*a,a=.0883883476483184*n+1.75566716318264,a=a*n+16.064177579207,a=a*n+86.7807322029461,a=a*n+296.564248779674,a=a*n+637.333633378831,a=a*n+793.826512519948,a=a*n+440.413735824752,o=o/a):(a=n+.65,a=n+4/a,a=n+3/a,a=n+2/a,a=n+1/a,o=s/a/2.506628274631)}return i>0?1-o:o}function Y1(e,t,r){return e<0||e>1?NaN:(t||0)+(r??1)*jae*Wae(2*e-1)}function Wae(e){let t=-Math.log((1-e)*(1+e)),r;return t<6.25?(t-=3.125,r=-364441206401782e-35,r=-16850591381820166e-35+r*t,r=128584807152564e-32+r*t,r=11157877678025181e-33+r*t,r=-1333171662854621e-31+r*t,r=20972767875968562e-33+r*t,r=6637638134358324e-30+r*t,r=-4054566272975207e-29+r*t,r=-8151934197605472e-29+r*t,r=26335093153082323e-28+r*t,r=-12975133253453532e-27+r*t,r=-5415412054294628e-26+r*t,r=10512122733215323e-25+r*t,r=-4112633980346984e-24+r*t,r=-29070369957882005e-24+r*t,r=42347877827932404e-23+r*t,r=-13654692000834679e-22+r*t,r=-13882523362786469e-21+r*t,r=.00018673420803405714+r*t,r=-.000740702534166267+r*t,r=-.006033670871430149+r*t,r=.24015818242558962+r*t,r=1.6536545626831027+r*t):t<16?(t=Math.sqrt(t)-3.25,r=22137376921775787e-25,r=9075656193888539e-23+r*t,r=-27517406297064545e-23+r*t,r=18239629214389228e-24+r*t,r=15027403968909828e-22+r*t,r=-4013867526981546e-21+r*t,r=29234449089955446e-22+r*t,r=12475304481671779e-21+r*t,r=-47318229009055734e-21+r*t,r=6828485145957318e-20+r*t,r=24031110387097894e-21+r*t,r=-.0003550375203628475+r*t,r=.0009532893797373805+r*t,r=-.0016882755560235047+r*t,r=.002491442096107851+r*t,r=-.003751208507569241+r*t,r=.005370914553590064+r*t,r=1.0052589676941592+r*t,r=3.0838856104922208+r*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,r=-27109920616438573e-27,r=-2555641816996525e-25+r*t,r=15076572693500548e-25+r*t,r=-3789465440126737e-24+r*t,r=761570120807834e-23+r*t,r=-1496002662714924e-23+r*t,r=2914795345090108e-23+r*t,r=-6771199775845234e-23+r*t,r=22900482228026655e-23+r*t,r=-99298272942317e-20+r*t,r=4526062597223154e-21+r*t,r=-1968177810553167e-20+r*t,r=7599527703001776e-20+r*t,r=-.00021503011930044477+r*t,r=-.00013871931833623122+r*t,r=1.0103004648645344+r*t,r=4.849906401408584+r*t):r=1/0,r*e}function o_(e,t){let r,i,n={mean(o){return arguments.length?(r=o||0,n):r},stdev(o){return arguments.length?(i=o??1,n):i},sample:()=>V1(r,i),pdf:o=>n_(o,r,i),cdf:o=>G1(o,r,i),icdf:o=>Y1(o,r,i)};return n.mean(e).stdev(t)}function s_(e,t){let r=o_(),i=0,n={data(o){return arguments.length?(e=o,i=o?o.length:0,n.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=i_(e)),n):t},sample(){return e[~~(Zn()*i)]+t*r.sample()},pdf(o){let s=0,a=0;for(;a<i;++a)s+=r.pdf((o-e[a])/t);return s/t/i},cdf(o){let s=0,a=0;for(;a<i;++a)s+=r.cdf((o-e[a])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return n.data(e)}function a_(e,t){return e=e||0,t=t??1,Math.exp(e+V1()*t)}function l_(e,t,r){if(e<=0)return 0;t=t||0,r=r??1;let i=(Math.log(e)-t)/r;return Math.exp(-.5*i*i)/(r*aI*e)}function u_(e,t,r){return G1(Math.log(e),t,r)}function c_(e,t,r){return Math.exp(Y1(e,t,r))}function EC(e,t){let r,i,n={mean(o){return arguments.length?(r=o||0,n):r},stdev(o){return arguments.length?(i=o??1,n):i},sample:()=>a_(r,i),pdf:o=>l_(o,r,i),cdf:o=>u_(o,r,i),icdf:o=>c_(o,r,i)};return n.mean(e).stdev(t)}function AC(e,t){let r=0,i;function n(s){let a=[],l=0,u;for(u=0;u<r;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<r;++u)a[u]/=l;return a}let o={weights(s){return arguments.length?(i=n(t=s||[]),o):t},distributions(s){return arguments.length?(s?(r=s.length,e=s):(r=0,e=[]),o.weights(t)):e},sample(){let s=Zn(),a=e[r-1],l=i[0],u=0;for(;u<r-1;l+=i[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<r;++l)a+=i[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<r;++l)a+=i[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function f_(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Zn()}function h_(e,t,r){return r==null&&(r=t??1,t=0),e>=t&&e<=r?1/(r-t):0}function d_(e,t,r){return r==null&&(r=t??1,t=0),e<t?0:e>r?1:(e-t)/(r-t)}function p_(e,t,r){return r==null&&(r=t??1,t=0),e>=0&&e<=1?t+e*(r-t):NaN}function TC(e,t){let r,i,n={min(o){return arguments.length?(r=o||0,n):r},max(o){return arguments.length?(i=o??1,n):i},sample:()=>f_(r,i),pdf:o=>h_(o,r,i),cdf:o=>d_(o,r,i),icdf:o=>p_(o,r,i)};return t==null&&(t=e??1,e=0),n.min(e).max(t)}function m_(e,t,r){let i=0,n=0;for(let o of e){let s=r(o);t(o)==null||s==null||isNaN(s)||(i+=(s-i)/++n)}return{coef:[i],predict:()=>i,rSquared:0}}function X1(e,t,r,i){let n=i-e*e,o=Math.abs(n)<1e-24?0:(r-e*t)/n;return[t-o*e,o]}function g_(e,t,r,i){e=e.filter(p=>{let d=t(p),m=r(p);return d!=null&&(d=+d)>=d&&m!=null&&(m=+m)>=m}),i&&e.sort((p,d)=>t(p)-t(d));let n=e.length,o=new Float64Array(n),s=new Float64Array(n),a=0,l=0,u=0,c,f,h;for(h of e)o[a]=c=+t(h),s[a]=f=+r(h),++a,l+=(c-l)/a,u+=(f-u)/a;for(a=0;a<n;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function K1(e,t,r,i){let n=-1,o,s;for(let a of e)o=t(a),s=r(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&i(o,s,++n)}function J0(e,t,r,i,n){let o=0,s=0;return K1(e,t,r,(a,l)=>{let u=l-n(a),c=l-i;o+=u*u,s+=c*c}),1-o/s}function v_(e,t,r){let i=0,n=0,o=0,s=0,a=0;K1(e,t,r,(c,f)=>{++a,i+=(c-i)/a,n+=(f-n)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});let l=X1(i,n,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:J0(e,t,r,n,u)}}function DC(e,t,r){let i=0,n=0,o=0,s=0,a=0;K1(e,t,r,(c,f)=>{++a,c=Math.log(c),i+=(c-i)/a,n+=(f-n)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});let l=X1(i,n,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:J0(e,t,r,n,u)}}function RC(e,t,r){let[i,n,o,s]=g_(e,t,r),a=0,l=0,u=0,c=0,f=0,h,p,d;K1(e,t,r,(b,y)=>{h=i[f++],p=Math.log(y),d=h*y,a+=(y*p-a)/f,l+=(d-l)/f,u+=(d*p-u)/f,c+=(h*d-c)/f});let[m,g]=X1(l/s,a/s,u/s,c/s),v=b=>Math.exp(m+g*(b-o));return{coef:[Math.exp(m-g*o),g],predict:v,rSquared:J0(e,t,r,s,v)}}function MC(e,t,r){let i=0,n=0,o=0,s=0,a=0,l=0;K1(e,t,r,(f,h)=>{let p=Math.log(f),d=Math.log(h);++l,i+=(p-i)/l,n+=(d-n)/l,o+=(p*d-o)/l,s+=(p*p-s)/l,a+=(h-a)/l});let u=X1(i,n,o,s),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:J0(e,t,r,a,c)}}function b_(e,t,r){let[i,n,o,s]=g_(e,t,r),a=i.length,l=0,u=0,c=0,f=0,h=0,p,d,m,g;for(p=0;p<a;)d=i[p],m=n[p++],g=d*d,l+=(g-l)/p,u+=(g*d-u)/p,c+=(g*g-c)/p,f+=(d*m-f)/p,h+=(g*m-h)/p;let v=c-l*l,b=l*v-u*u,y=(h*l-f*u)/b,x=(f*v-h*u)/b,S=-y*l,_=w=>(w=w-o,y*w*w+x*w+S+s);return{coef:[S-x*o+y*o*o+s,x-2*y*o,y],predict:_,rSquared:J0(e,t,r,s,_)}}function FC(e,t,r,i){if(i===0)return m_(e,t,r);if(i===1)return v_(e,t,r);if(i===2)return b_(e,t,r);let[n,o,s,a]=g_(e,t,r),l=n.length,u=[],c=[],f=i+1,h,p,d,m,g;for(h=0;h<f;++h){for(d=0,m=0;d<l;++d)m+=Math.pow(n[d],h)*o[d];for(u.push(m),g=new Float64Array(f),p=0;p<f;++p){for(d=0,m=0;d<l;++d)m+=Math.pow(n[d],h+p);g[p]=m}c.push(g)}c.push(u);let v=Gae(c),b=y=>{y-=s;let x=a+v[0]+v[1]*y+v[2]*y*y;for(h=3;h<f;++h)x+=v[h]*Math.pow(y,h);return x};return{coef:Vae(f,v,-s,a),predict:b,rSquared:J0(e,t,r,a,b)}}function Vae(e,t,r,i){let n=Array(e),o,s,a,l;for(o=0;o<e;++o)n[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,n[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,n[o-s]+=a*Math.pow(r,s)*l;return n[0]+=i,n}function Gae(e){let t=e.length-1,r=[],i,n,o,s,a;for(i=0;i<t;++i){for(s=i,n=i+1;n<t;++n)Math.abs(e[i][n])>Math.abs(e[i][s])&&(s=n);for(o=i;o<t+1;++o)a=e[o][i],e[o][i]=e[o][s],e[o][s]=a;for(n=i+1;n<t;++n)for(o=t;o>=i;o--)e[o][n]-=e[o][i]*e[i][n]/e[i][i]}for(n=t-1;n>=0;--n){for(a=0,o=n+1;o<t;++o)a+=e[o][n]*r[o];r[n]=(e[t][n]-a)/e[n][n]}return r}var nI=2,oI=1e-12;function OC(e,t,r,i){let[n,o,s,a]=g_(e,t,r,!0),l=n.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),f=new Float64Array(l),h=new Float64Array(l).fill(1);for(let p=-1;++p<=nI;){let d=[0,u-1];for(let g=0;g<l;++g){let v=n[g],b=d[0],y=d[1],x=v-n[b]>n[y]-v?b:y,S=0,_=0,w=0,k=0,A=0,M=1/Math.abs(n[x]-v||1);for(let P=b;P<=y;++P){let I=n[P],N=o[P],H=Yae(Math.abs(v-I)*M)*h[P],T=I*H;S+=H,_+=T,w+=N*H,k+=N*T,A+=I*T}let[D,z]=X1(_/S,w/S,k/S,A/S);c[g]=D+z*v,f[g]=Math.abs(o[g]-c[g]),Xae(n,g+1,d)}if(p===nI)break;let m=N0(f);if(Math.abs(m)<oI)break;for(let g=0,v,b;g<l;++g)v=f[g]/(6*m),h[g]=v>=1?oI:(b=1-v*v)*b}return Kae(n,c,s,a)}function Yae(e){return(e=1-e*e*e)*e*e}function Xae(e,t,r){let i=e[t],n=r[0],o=r[1]+1;if(!(o>=e.length))for(;t>n&&e[o]-i<=i-e[n];)r[0]=++n,r[1]=o,++o}function Kae(e,t,r,i){let n=e.length,o=[],s=0,a=0,l=[],u;for(;s<n;++s)u=e[s]+r,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=i,l=[u,t[s]],o.push(l));return l[1]+=i,o}var Zae=.5*Math.PI/180;function Q0(e,t,r,i){r=r||25,i=Math.max(r,i||200);let n=m=>[m,e(m)],o=t[0],s=t[1],a=s-o,l=a/i,u=[n(o)],c=[];if(r===i){for(let m=1;m<i;++m)u.push(n(o+m/r*a));return u.push(n(s)),u}else{c.push(n(s));for(let m=r;--m>0;)c.push(n(o+m/r*a))}let f=u[0],h=c[c.length-1],p=1/a,d=Jae(f[1],c);for(;h;){let m=n((f[0]+h[0])/2);m[0]-f[0]>=l&&Qae(f,m,h,p,d)>Zae?c.push(m):(f=h,u.push(h),c.pop()),h=c[c.length-1]}return u}function Jae(e,t){let r=e,i=e,n=t.length;for(let o=0;o<n;++o){let s=t[o][1];s<r&&(r=s),s>i&&(i=s)}return 1/(i-r)}function Qae(e,t,r,i,n){let o=Math.atan2(n*(r[1]-e[1]),i*(r[0]-e[0])),s=Math.atan2(n*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(o-s)}function ele(e){return t=>{let r=e.length,i=1,n=String(e[0](t));for(;i<r;++i)n+="|"+e[i](t);return n}}function PC(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:ele(e)}function cI(e,t,r){return r||e+(t?"_"+t:"")}var $C=()=>{},tle={init:$C,add:$C,rem:$C,idx:0},Z1={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,r)=>{t<e.min&&(e.argmin=r)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,r)=>{t>e.max&&(e.argmax=r)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Q1=Object.keys(Z1).filter(e=>e!=="__count__");function rle(e,t){return(r,i)=>Ze({name:e,aggregate_param:i,out:r||e},tle,t)}[...Q1,"__count__"].forEach(e=>{Z1[e]=rle(e,Z1[e])});function fI(e,t,r){return Z1[e](r,t)}function hI(e,t){return e.idx-t.idx}function ile(e){let t={};e.forEach(i=>t[i.name]=i);let r=i=>{i.req&&i.req.forEach(n=>{t[n]||r(t[n]=Z1[n]())})};return e.forEach(r),Object.values(t).sort(hI)}function nle(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function ole(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(r=>r.add(this,e,t)))}function sle(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(r=>r.rem(this,e,t)))}function ale(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function dI(e,t){let r=t||Ir,i=ile(e),n=e.slice().sort(hI);function o(s){this._ops=i,this._out=n,this.cell=s,this.init()}return o.prototype.init=nle,o.prototype.add=ole,o.prototype.rem=sle,o.prototype.set=ale,o.prototype.get=r,o.fields=e.map(s=>s.out),o}function IC(e){this._key=e?Ai(e):qe,this.reset()}var Zi=IC.prototype;Zi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Zi.add=function(e){this._add.push(e)};Zi.rem=function(e){this._rem.push(e)};Zi.values=function(){if(this._get=null,this._rem.length===0)return this._add;let e=this._add,t=this._rem,r=this._key,i=e.length,n=t.length,o=Array(i-n),s={},a,l,u;for(a=0;a<n;++a)s[r(t[a])]=1;for(a=0,l=0;a<i;++a)s[r(u=e[a])]?s[r(u)]=0:o[l++]=u;return this._rem=[],this._add=o};Zi.distinct=function(e){let t=this.values(),r={},i=t.length,n=0,o;for(;--i>=0;)o=e(t[i])+"",_e(r,o)||(r[o]=1,++n);return n};Zi.extent=function(e){if(this._get!==e||!this._ext){let t=this.values(),r=c8(t,e);this._ext=[t[r[0]],t[r[1]]],this._get=e}return this._ext};Zi.argmin=function(e){return this.extent(e)[0]||{}};Zi.argmax=function(e){return this.extent(e)[1]||{}};Zi.min=function(e){let t=this.extent(e)[0];return t!=null?e(t):void 0};Zi.max=function(e){let t=this.extent(e)[1];return t!=null?e(t):void 0};Zi.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=r_(this.values(),e),this._get=e),this._q};Zi.q1=function(e){return this.quartile(e)[0]};Zi.q2=function(e){return this.quartile(e)[1]};Zi.q3=function(e){return this.quartile(e)[2]};Zi.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=CC(this.values(),1e3,.05,e),this._get=e),this._ci};Zi.ci0=function(e){return this.ci(e)[0]};Zi.ci1=function(e){return this.ci(e)[1]};function tf(e){ee.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}tf.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Q1},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};xe(tf,ee,{transform(e,t){let r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),n=e.modified();return r.stamp=i.stamp,r.value&&(n||t.modified(r._inputs,!0))?(r._prev=r.value,r.value=n?r.init(e):Object.create(null),t.visit(t.SOURCE,o=>r.add(o))):(r.value=r.value||r.init(e),t.visit(t.REM,o=>r.rem(o)),t.visit(t.ADD,o=>r.add(o))),i.modifies(r._outputs),r._drop=e.drop!==!1,e.cross&&r._dims.length>1&&(r._drop=!1,r.cross()),t.clean()&&r._drop&&i.clean(!0).runAfter(()=>this.clean()),r.changes(i)},cross(){let e=this,t=e.value,r=e._dnames,i=r.map(()=>({})),n=r.length;function o(a){let l,u,c,f;for(l in a)for(c=a[l].tuple,u=0;u<n;++u)i[u][f=c[r[u]]]=f}o(e._prev),o(t);function s(a,l,u){let c=r[u],f=i[u++];for(let h in f){let p=a?a+"|"+h:h;l[c]=f[h],u<n?s(p,l,u):t[p]||e.cell(p,l)}}s("",{},0)},init(e){let t=this._inputs=[],r=this._outputs=[],i={};function n(b){let y=ve(mi(b)),x=y.length,S=0,_;for(;S<x;++S)i[_=y[S]]||(i[_]=1,t.push(_))}this._dims=ve(e.groupby),this._dnames=this._dims.map(b=>{let y=dr(b);return n(b),r.push(y),y}),this.cellkey=e.key?e.key:PC(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,c={},f,h,p,d,m,g,v;for(u!==s.length&&te("Unmatched number of fields and aggregate ops."),v=0;v<u;++v){if(f=o[v],h=s[v],p=a[v]||null,f==null&&h!=="count"&&te("Null aggregate field specified."),m=dr(f),g=cI(h,m,l[v]),r.push(g),h==="count"){this._counts.push(g);continue}d=c[m],d||(n(f),d=c[m]=[],d.field=f,this._measures.push(d)),h!=="count"&&(this._countOnly=!1),d.push(fI(h,p,g))}return this._measures=this._measures.map(b=>dI(b,b.field)),Object.create(null)},cellkey:PC(),cell(e,t){let r=this.value[e];return r?r.num===0&&this._drop&&r.stamp<this.stamp?(r.stamp=this.stamp,this._adds[this._alen++]=r):r.stamp<this.stamp&&(r.stamp=this.stamp,this._mods[this._mlen++]=r):(r=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=r),r},newcell(e,t){let r={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){let i=this._measures,n=i.length;r.agg=Array(n);for(let o=0;o<n;++o)r.agg[o]=new i[o](r)}return r.store&&(r.data=new IC),r},newtuple(e,t){let r=this._dnames,i=this._dims,n=i.length,o={};for(let s=0;s<n;++s)o[r[s]]=i[s](e);return t?Jx(t.tuple,o):xt(o)},clean(){let e=this.value;for(let t in e)e[t].num===0&&delete e[t]},add(e){let t=this.cellkey(e),r=this.cell(t,e);if(r.num+=1,this._countOnly)return;r.store&&r.data.add(e);let i=r.agg;for(let n=0,o=i.length;n<o;++n)i[n].add(i[n].get(e),e)},rem(e){let t=this.cellkey(e),r=this.cell(t,e);if(r.num-=1,this._countOnly)return;r.store&&r.data.rem(e);let i=r.agg;for(let n=0,o=i.length;n<o;++n)i[n].rem(i[n].get(e),e)},celltuple(e){let t=e.tuple,r=this._counts;e.store&&e.data.values();for(let i=0,n=r.length;i<n;++i)t[r[i]]=e.num;if(!this._countOnly){let i=e.agg;for(let n=0,o=i.length;n<o;++n)i[n].set(t)}return t},changes(e){let t=this._adds,r=this._mods,i=this._prev,n=this._drop,o=e.add,s=e.rem,a=e.mod,l,u,c,f;if(i)for(u in i)l=i[u],(!n||l.num)&&s.push(l.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=r[c],(l.num===0&&n?s:a).push(this.celltuple(l)),r[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});var lle=1e-14;function NC(e){ee.call(this,null,e)}NC.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};xe(NC,ee,{transform(e,t){let r=e.interval!==!1,i=this._bins(e),n=i.start,o=i.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1],u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(mi(e.field))?t.ADD_MOD:t.ADD,t.visit(u,r?c=>{let f=i(c);c[a]=f,c[l]=f==null?null:n+o*(1+(f-n)/o)}:c=>c[a]=i(c)),t.modifies(r?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;let t=e.field,r=SC(e),i=r.step,n=r.start,o=n+Math.ceil((r.stop-n)/i)*i,s,a;(s=e.anchor)!=null&&(a=s-(n+i*Math.floor((s-n)/i)),n+=a,o+=a);let l=function(u){let c=Gr(t(u));return c==null?null:c<n?-1/0:c>o?1/0:(c=Math.max(n,Math.min(c,o-i)),n+i*Math.floor(lle+(c-n)/i))};return l.start=n,l.stop=r.stop,l.step=i,this.value=gn(l,mi(t),e.name||"bin_"+dr(t))}});function pI(e,t,r){let i=e,n=t||[],o=r||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[i(l)]=++a,size:()=>n.length,data:(l,u)=>(a&&(n=n.filter(c=>!s[i(c)]),s={},a=0),u&&l&&n.sort(l),o.length&&(n=l?m8(l,n,o.sort(l)):n.concat(o),o=[]),n)}}function BC(e){ee.call(this,[],e)}BC.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};xe(BC,ee,{transform(e,t){let r=t.fork(t.ALL),i=pI(qe,this.value,r.materialize(r.ADD).add),n=e.sort,o=t.changed()||n&&(e.modified("sort")||t.modified(n.fields));return r.visit(r.REM,i.remove),this.modified(o),this.value=r.source=i.data(ml(n),o),t.source&&t.source.root&&(this.value.root=t.source.root),r}});function mI(e){Vt.call(this,null,ule,e)}xe(mI,Vt);function ule(e){return this.value&&!e.modified()?this.value:h1(e.fields,e.orders)}function zC(e){ee.call(this,null,e)}zC.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function cle(e,t,r){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(r)}xe(zC,ee,{transform(e,t){let r=f=>h=>{for(var p=cle(a(h),e.case,o)||[],d,m=0,g=p.length;m<g;++m)s.test(d=p[m])||f(d)},i=this._parameterCheck(e,t),n=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=r(f=>n[f]=1+(n[f]||0)),c=r(f=>n[f]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let r=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),r=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),r=!0),(e.modified("field")||t.modified(e.field.fields))&&(r=!0),r&&(this._counts={}),r},_finish(e,t){let r=this._counts,i=this._tuples||(this._tuples={}),n=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS),a,l,u;for(a in r)l=i[a],u=r[a]||0,!l&&u?(i[a]=l=xt({}),l[n]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),r[a]=null,i[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function HC(e){ee.call(this,null,e)}HC.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};xe(HC,ee,{transform(e,t){let r=t.fork(t.NO_SOURCE),i=e.as||["a","b"],n=i[0],o=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter"),a=this.value;return s?(a&&(r.rem=a),a=t.materialize(t.SOURCE).source,r.add=this.value=fle(a,n,o,e.filter||gi)):r.mod=a,r.source=this.value,r.modifies(i)}});function fle(e,t,r,i){for(var n=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[r]=e[l],i(o)&&(n.push(xt(o)),o={},o[t]=u);return n}var lI={kde:s_,mixture:AC,normal:o_,lognormal:EC,uniform:TC},hle="distributions",uI="function",dle="field";function gI(e,t){let r=e[uI];_e(lI,r)||te("Unknown distribution function: "+r);let i=lI[r]();for(let n in e)n===dle?i.data((e.from||t()).map(e[n])):n===hle?i[n](e[n].map(o=>gI(o,t))):typeof i[n]===uI&&i[n](e[n]);return i}function UC(e){ee.call(this,null,e)}var vI=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ple={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:vI},{name:"weights",type:"number",array:!0}]};UC.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:vI.concat(ple)},{name:"as",type:"string",array:!0,default:["value","density"]}]};xe(UC,ee,{transform(e,t){let r=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let i=gI(e.distribution,mle(t)),n=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200,s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&te("Invalid density method: "+s),!e.extent&&!i.data&&te("Missing density extent parameter."),s=i[s];let a=e.as||["value","density"],l=e.extent||Wn(i.data()),u=Q0(s,l,n,o).map(c=>{let f={};return f[a[0]]=c[0],f[a[1]]=c[1],xt(f)});this.value&&(r.rem=this.value),this.value=r.add=r.source=u}return r}});function mle(e){return()=>e.materialize(e.SOURCE).source}function bI(e,t){return e?e.map((r,i)=>t[i]||dr(r)):null}function qC(e,t,r){let i=[],n=f=>f(l),o,s,a,l,u,c;if(t==null)i.push(e.map(r));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(n),c=o[u],c||(o[u]=c=[],c.dims=u,i.push(c)),c.push(r(l));return i}var yI="bin";function jC(e){ee.call(this,null,e)}jC.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:yI}]};var gle=(e,t)=>xu(Wn(e,t))/30;xe(jC,ee,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;let r=t.materialize(t.SOURCE).source,i=qC(t.source,e.groupby,Ir),n=e.smooth||!1,o=e.field,s=e.step||gle(r,o),a=ml((d,m)=>o(d)-o(m)),l=e.as||yI,u=i.length,c=1/0,f=-1/0,h=0,p;for(;h<u;++h){let d=i[h].sort(a);p=-1;for(let m of kC(d,s,n,o))m<c&&(c=m),m>f&&(f=m),d[++p][l]=m}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(l)}});function xI(e){Vt.call(this,null,vle,e),this.modified(!0)}xe(xI,Vt);function vle(e){let t=e.expr;return this.value&&!e.modified("expr")?this.value:gn(r=>t(r,e),mi(t),dr(t))}function WC(e){ee.call(this,[void 0,void 0],e)}WC.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};xe(WC,ee,{transform(e,t){let r=this.value,i=e.field,n=t.changed()||t.modified(i.fields)||e.modified("field"),o=r[0],s=r[1];if((n||o==null)&&(o=1/0,s=-1/0),t.visit(n?t.SOURCE:t.ADD,a=>{let l=Gr(i(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=dr(i);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function VC(e,t){Vt.call(this,e),this.parent=t,this.count=0}xe(VC,Vt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function x_(e){ee.call(this,{},e),this._keys=qc();let t=this._targets=[];t.active=0,t.forEach=r=>{for(let i=0,n=t.active;i<n;++i)r(t[i],i,t)}}xe(x_,ee,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,r,i){let n=this.value,o=_e(n,e)&&n[e],s,a;return o?o.value.stamp<r.stamp&&(o.init(r),this.activate(o)):(a=i||(a=this._group[e])&&a.tuple,s=r.dataflow,o=new VC(r.fork(r.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),n[e]=o,this.activate(o)),o},clean(){let e=this.value,t=0;for(let r in e)if(e[r].count===0){let i=e[r].detachSubflow;i&&i(),delete e[r],++t}if(t){let r=this._targets.filter(i=>i&&i.count>0);this.initTargets(r)}},initTargets(e){let t=this._targets,r=t.length,i=e?e.length:0,n=0;for(;n<i;++n)t[n]=e[n];for(;n<r&&t[n]!=null;++n)t[n]=null;t.active=i},transform(e,t){let r=t.dataflow,i=e.key,n=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,n,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{let u=qe(l),c=o.get(u);c!==void 0&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{let u=i(l);o.set(qe(l),u),a(u).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{let u=qe(l),c=o.get(u),f=i(l);c===f?a(f).mod(l):(o.set(u,f),a(c).rem(l),a(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(qe(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{let u=qe(l),c=o.get(u),f=i(l);c!==f&&(o.set(u,f),a(c).rem(l),a(f).add(l))}),t.clean()?r.runAfter(()=>{this.clean(),o.clean()}):o.empty>r.cleanThreshold&&r.runAfter(o.clean),t}});function _I(e){Vt.call(this,null,ble,e)}xe(_I,Vt);function ble(e){return this.value&&!e.modified()?this.value:K(e.name)?ve(e.name).map(t=>Ai(t)):Ai(e.name,e.as)}function GC(e){ee.call(this,qc(),e)}GC.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};xe(GC,ee,{transform(e,t){let r=t.dataflow,i=this.value,n=t.fork(),o=n.add,s=n.rem,a=n.mod,l=e.expr,u=!0;t.visit(t.REM,f=>{let h=qe(f);i.has(h)?i.delete(h):s.push(f)}),t.visit(t.ADD,f=>{l(f,e)?o.push(f):i.set(qe(f),1)});function c(f){let h=qe(f),p=l(f,e),d=i.get(h);p&&d?(i.delete(h),o.push(f)):!p&&!d?(i.set(h,1),s.push(f)):u&&p&&!d&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),n}});function YC(e){ee.call(this,[],e)}YC.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};xe(YC,ee,{transform(e,t){let r=t.fork(t.NO_SOURCE),i=e.fields,n=bI(i,e.as||[]),o=e.index||null,s=n.length;return r.rem=this.value,t.visit(t.SOURCE,a=>{let l=i.map(d=>d(a)),u=l.reduce((d,m)=>Math.max(d,m.length),0),c=0,f,h,p;for(;c<u;++c){for(h=Zx(a),f=0;f<s;++f)h[n[f]]=(p=l[f][c])==null?null:p;o&&(h[o]=c),r.add.push(h)}}),this.value=r.source=r.add,o&&r.modifies(o),r.modifies(n)}});function XC(e){ee.call(this,[],e)}XC.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};xe(XC,ee,{transform(e,t){let r=t.fork(t.NO_SOURCE),i=e.fields,n=i.map(dr),o=e.as||["key","value"],s=o[0],a=o[1],l=i.length;return r.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=Zx(u),f[s]=n[c],f[a]=i[c](u),r.add.push(f)}),this.value=r.source=r.add,r.modifies(o)}});function KC(e){ee.call(this,null,e)}KC.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};xe(KC,ee,{transform(e,t){let r=e.expr,i=e.as,n=e.modified(),o=e.initonly?t.ADD:n?t.SOURCE:t.modified(r.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return n&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,s=>s[i]=r(s,e))}});function wI(e){ee.call(this,[],e)}xe(wI,ee,{transform(e,t){let r=t.fork(t.ALL),i=e.generator,n=this.value,o=e.size-n.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=xt(i(e))),n.push(l);r.add=r.add.length?r.materialize(r.ADD).add.concat(s):s}else a=n.slice(0,-o),r.rem=r.rem.length?r.materialize(r.REM).rem.concat(a):a,n=n.slice(-o);return r.source=this.value=n,r}});var y_={value:"value",median:N0,mean:Ox,min:Rh,max:ws},yle=[];function ZC(e){ee.call(this,[],e)}ZC.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function xle(e){var t=e.method||y_.value,r;if(y_[t]==null)te("Unrecognized imputation method: "+t);else return t===y_.value?(r=e.value!==void 0?e.value:0,()=>r):y_[t]}function _le(e){let t=e.field;return r=>r?t(r):NaN}xe(ZC,ee,{transform(e,t){var r=t.fork(t.ALL),i=xle(e),n=_le(e),o=dr(e.field),s=dr(e.key),a=(e.groupby||[]).map(dr),l=wle(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,h,p,d,m,g,v,b,y,x,S;for(g=0,y=l.length;g<y;++g)for(h=l[g],d=h.values,p=NaN,b=0;b<f;++b)if(h[b]==null){for(m=l.domain[b],S={_impute:!0},v=0,x=d.length;v<x;++v)S[a[v]]=d[v];S[s]=m,S[o]=Number.isNaN(p)?p=i(h,n):p,u.push(xt(S))}return u.length&&(r.add=r.materialize(r.ADD).add.concat(u)),c.length&&(r.rem=r.materialize(r.REM).rem.concat(c)),this.value=u,r}});function wle(e,t,r,i){var n=v=>v(g),o=[],s=i?i.slice():[],a={},l={},u,c,f,h,p,d,m,g;for(s.forEach((v,b)=>a[v]=b+1),h=0,m=e.length;h<m;++h)g=e[h],d=r(g),p=a[d]||(a[d]=s.push(d)),c=(u=t?t.map(n):yle)+"",(f=l[c])||(f=l[c]=[],o.push(f),f.values=u),f[p-1]=g;return o.domain=s,o}function JC(e){tf.call(this,e)}JC.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Q1},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};xe(JC,tf,{transform(e,t){let r=this,i=e.modified(),n;return r.value&&(i||t.modified(r._inputs,!0))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,o=>r.add(o))):(n=r.value=r.value||this.init(e),t.visit(t.REM,o=>r.rem(o)),t.visit(t.ADD,o=>r.add(o))),r.changes(),t.visit(t.SOURCE,o=>{Ze(o,n[r.cellkey(o)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){let e=this._adds,t=this._mods,r,i;for(r=0,i=this._alen;r<i;++r)this.celltuple(e[r]),e[r]=null;for(r=0,i=this._mlen;r<i;++r)this.celltuple(t[r]),t[r]=null;this._alen=this._mlen=0}});function QC(e){ee.call(this,null,e)}QC.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};xe(QC,ee,{transform(e,t){let r=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let i=t.materialize(t.SOURCE).source,n=qC(i,e.groupby,e.field),o=(e.groupby||[]).map(dr),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[],c=e.extent,f=e.steps||e.minsteps||25,h=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&te("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Wn(i,e.field)),f=h=e.steps||h),n.forEach(p=>{let d=s_(p,s)[a],m=e.counts?p.length:1,g=c||Wn(p);Q0(d,g,f,h).forEach(v=>{let b={};for(let y=0;y<o.length;++y)b[o[y]]=p.dims[y];b[l[0]]=v[0],b[l[1]]=v[1]*m,u.push(xt(b))})}),this.value&&(r.rem=this.value),this.value=r.add=r.source=u}return r}});function SI(e){Vt.call(this,null,Sle,e)}xe(SI,Vt);function Sle(e){return this.value&&!e.modified()?this.value:p1(e.fields,e.flat)}function CI(e){ee.call(this,[],e),this._pending=null}xe(CI,ee,{transform(e,t){let r=t.dataflow;return this._pending?LC(this,t,this._pending):Cle(e)?t.StopPropagation:e.values?LC(this,t,r.parse(e.values,e.format)):e.async?{async:r.request(e.url,e.format).then(n=>(this._pending=ve(n.data),o=>o.touch(this)))}:r.request(e.url,e.format).then(i=>LC(this,t,ve(i.data)))}});function Cle(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function LC(e,t,r){r.forEach(xt);let i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=r,e._pending=null,i.rem.length&&i.clean(!0),i}function ek(e){ee.call(this,{},e)}ek.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};xe(ek,ee,{transform(e,t){let r=e.fields,i=e.index,n=e.values,o=e.default==null?null:e.default,s=e.modified(),a=r.length,l=s?t.SOURCE:t.ADD,u=t,c=e.as,f,h,p;return n?(h=n.length,a>1&&!c&&te('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*h&&te('The "as" parameter has too few output field names.'),c=c||n.map(dr),f=function(d){for(var m=0,g=0,v,b;m<a;++m)if(b=i.get(r[m](d)),b==null)for(v=0;v<h;++v,++g)d[c[g]]=o;else for(v=0;v<h;++v,++g)d[c[g]]=n[v](b)}):(c||te("Missing output field names."),f=function(d){for(var m=0,g;m<a;++m)g=i.get(r[m](d)),d[c[m]]=g??o}),s?u=t.reflow(!0):(p=r.some(d=>t.modified(d.fields)),l|=p?t.MOD:0),t.visit(l,f),u.modifies(c)}});function kI(e){Vt.call(this,null,kle,e)}xe(kI,Vt);function kle(e){if(this.value&&!e.modified())return this.value;let t=e.extents,r=t.length,i=1/0,n=-1/0,o,s;for(o=0;o<r;++o)s=t[o],s[0]<i&&(i=s[0]),s[1]>n&&(n=s[1]);return[i,n]}function EI(e){Vt.call(this,null,Ele,e)}xe(EI,Vt);function Ele(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,r)=>t.concat(r),[])}function AI(e){ee.call(this,null,e)}xe(AI,ee,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function tk(e){tf.call(this,e)}tk.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Q1,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};xe(tk,tf,{_transform:tf.prototype.transform,transform(e,t){return this._transform(Ale(e,t),t)}});function Ale(e,t){let r=e.field,i=e.value,n=(e.op==="count"?"__count__":e.op)||"sum",o=mi(r).concat(mi(i)),s=Dle(r,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>n),fields:s.map(a=>Tle(a,r,i,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function Tle(e,t,r,i){return gn(n=>t(n)===e?r(n):NaN,i,e+"")}function Dle(e,t,r){let i={},n=[];return r.visit(r.SOURCE,o=>{let s=e(o);i[s]||(i[s]=1,n.push(s))}),n.sort(yu),t?n.slice(0,t):n}function TI(e){x_.call(this,e)}xe(TI,x_,{transform(e,t){let r=e.subflow,i=e.field,n=o=>this.subflow(qe(o),r,t,o);return(e.modified("field")||i&&t.modified(mi(i)))&&te("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,o=>{let s=n(o);i(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{let s=n(o);i(o).forEach(a=>s.add(xt(a)))}),t.visit(t.REM,o=>{let s=n(o);i(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>n(o).mod(o)),t.visit(t.ADD,o=>n(o).add(o)),t.visit(t.REM,o=>n(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function rk(e){ee.call(this,null,e)}rk.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};xe(rk,ee,{transform(e,t){let r=t.fork(t.NO_SOURCE),i=e.fields,n=bI(e.fields,e.as||[]),o=i?(a,l)=>Rle(a,l,i,n):zh,s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{let l=qe(a);r.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{let l=o(a,xt({}));s[qe(a)]=l,r.add.push(l)}),t.visit(t.MOD,a=>{r.mod.push(o(a,s[qe(a)]))}),r}});function Rle(e,t,r,i){for(let n=0,o=r.length;n<o;++n)t[i[n]]=r[n](e);return t}function DI(e){ee.call(this,null,e)}xe(DI,ee,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ik(e){ee.call(this,null,e)}ik.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var Mle=1e-14;xe(ik,ee,{transform(e,t){let r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return r.source=this.value,r;let n=t.materialize(t.SOURCE).source,o=qC(n,e.groupby,e.field),s=(e.groupby||[]).map(dr),a=[],l=e.step||.01,u=e.probs||Yr(l/2,1-Mle,l),c=u.length;return o.forEach(f=>{let h=t_(f,u);for(let p=0;p<c;++p){let d={};for(let m=0;m<s.length;++m)d[s[m]]=f.dims[m];d[i[0]]=u[p],d[i[1]]=h[p],a.push(xt(d))}}),this.value&&(r.rem=this.value),this.value=r.add=r.source=a,r}});function RI(e){ee.call(this,null,e)}xe(RI,ee,{transform(e,t){let r,i;return this.value?i=this.value:(r=t=t.addAll(),i=this.value={}),e.derive&&(r=t.fork(t.NO_SOURCE),t.visit(t.REM,n=>{let o=qe(n);r.rem.push(i[o]),i[o]=null}),t.visit(t.ADD,n=>{let o=Zx(n);i[qe(n)]=o,r.add.push(o)}),t.visit(t.MOD,n=>{let o=i[qe(n)];for(let s in n)o[s]=n[s],r.modifies(s);r.mod.push(o)})),r}});function nk(e){ee.call(this,[],e),this.count=0}nk.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};xe(nk,ee,{transform(e,t){let r=t.fork(t.NO_SOURCE),i=e.modified("size"),n=e.size,o=this.value.reduce((c,f)=>(c[qe(f)]=1,c),{}),s=this.value,a=this.count,l=0;function u(c){let f,h;s.length<n?s.push(c):(h=~~((a+1)*Zn()),h<s.length&&h>=l&&(f=s[h],o[qe(f)]&&r.rem.push(f),s[h]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{let f=qe(c);o[f]&&(o[f]=-1,r.rem.push(c)),--a}),s=s.filter(c=>o[qe(c)]!==-1)),(t.rem.length||i)&&s.length<n&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[qe(c)]||u(c)}),l=-1),i&&s.length>n){let c=s.length-n;for(let f=0;f<c;++f)o[qe(s[f])]=-1,r.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[qe(c)]&&r.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(r.add=s.filter(c=>!o[qe(c)])),this.count=a,this.value=r.source=s,r}});function ok(e){ee.call(this,null,e)}ok.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};xe(ok,ee,{transform(e,t){if(this.value&&!e.modified())return;let r=t.materialize().fork(t.MOD),i=e.as||"data";return r.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Yr(e.start,e.stop,e.step||1).map(n=>{let o={};return o[i]=n,xt(o)}),r.add=t.add.concat(this.value),r}});function MI(e){ee.call(this,null,e),this.modified(!0)}xe(MI,ee,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function sk(e){ee.call(this,null,e)}var FI=["unit0","unit1"];sk.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Bx,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:FI}]};xe(sk,ee,{transform(e,t){let r=e.field,i=e.interval!==!1,n=e.timezone==="utc",o=this._floor(e,t),s=(n?Eu:ku)(o.unit).offset,a=e.as||FI,l=a[0],u=a[1],c=o.step,f=o.start||1/0,h=o.stop||-1/0,p=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(mi(r)))&&(t=t.reflow(!0),p=t.SOURCE,f=1/0,h=-1/0),t.visit(p,d=>{let m=r(d),g,v;m==null?(d[l]=null,i&&(d[u]=null)):(d[l]=g=v=o(m),i&&(d[u]=v=s(g,c)),g<f&&(f=g),v>h&&(h=v))}),o.start=f,o.stop=h,t.modifies(i?a:l)},_floor(e,t){let r=e.timezone==="utc",{units:i,step:n}=e.units?{units:e.units,step:e.step||1}:sC({extent:e.extent||Wn(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=zx(i),s=this.value||{},a=(r?tC:eC)(o,n);return a.unit=ct(o),a.units=o,a.step=n,a.start=s.start,a.stop=s.stop,this.value=a}});function OI(e){ee.call(this,qc(),e)}xe(OI,ee,{transform(e,t){let r=t.dataflow,i=e.field,n=this.value,o=a=>n.set(i(a),a),s=!0;return e.modified("field")||t.modified(i.fields)?(n.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>n.delete(i(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),n.empty>r.cleanThreshold&&r.runAfter(n.clean),t.fork()}});function $I(e){ee.call(this,null,e)}xe($I,ee,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(ml(e.sort)):t.source).map(e.field))}});function Fle(e,t,r,i){let n=J1[e](t,r);return{init:n.init||ua,update:function(o,s){s[i]=n.next(o)}}}var J1={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{let r=t.index,i=t.data;return r&&t.compare(i[r-1],i[r])?e=r+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{let r=t.index,i=t.data;return r&&t.compare(i[r-1],i[r])?++e:e}}},percent_rank:function(){let e=J1.rank(),t=e.next;return{init:e.init,next:r=>(t(r)-1)/(r.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{let r=t.data,i=t.compare,n=t.index;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){t=+t,t>0||te("ntile num must be greater than zero.");let r=J1.cume_dist(),i=r.next;return{init:r.init,next:n=>Math.ceil(t*i(n))}},lag:function(e,t){return t=+t||1,{next:r=>{let i=r.index-t;return i>=0?e(r.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:r=>{let i=r.index+t,n=r.data;return i<n.length?e(n[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||te("nth_value nth must be greater than zero."),{next:r=>{let i=r.i0+(t-1);return i<r.i1?e(r.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:r=>{let i=e(r.data[r.index]);return i!=null?t=i:t}}},next_value:function(e){let t,r;return{init:()=>(t=null,r=-1),next:i=>{let n=i.data;return i.index<=r?t:(r=Ole(e,n,i.index))<0?(r=n.length,t=null):t=e(n[r])}}}};function Ole(e,t,r){for(let i=t.length;r<i;++r)if(e(t[r])!=null)return r;return-1}var $le=Object.keys(J1);function LI(e){let t=ve(e.ops),r=ve(e.fields),i=ve(e.params),n=ve(e.aggregate_params),o=ve(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[],h=!0;function p(d){ve(mi(d)).forEach(m=>l[m]=1)}p(e.sort),t.forEach((d,m)=>{let g=r[m],v=i[m],b=n[m]||null,y=dr(g),x=cI(d,y,o[m]);if(p(g),s.push(x),_e(J1,d))a.push(Fle(d,g,v,x));else{if(g==null&&d!=="count"&&te("Null aggregate field specified."),d==="count"){c.push(x);return}h=!1;let S=u[y];S||(S=u[y]=[],S.field=g,f.push(S)),S.push(fI(d,b,x))}}),(c.length||f.length)&&(this.cell=Lle(f,c,h)),this.inputs=Object.keys(l)}var PI=LI.prototype;PI.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};PI.update=function(e,t){let r=this.cell,i=this.windows,n=e.data,o=i&&i.length,s;if(r){for(s=e.p0;s<e.i0;++s)r.rem(n[s]);for(s=e.p1;s<e.i1;++s)r.add(n[s]);r.set(t)}for(s=0;s<o;++s)i[s].update(e,t)};function Lle(e,t,r){e=e.map(l=>dI(l,l.field));let i={num:0,agg:null,store:!1,count:t};if(!r)for(var n=e.length,o=i.agg=Array(n),s=0;s<n;++s)o[s]=new e[s](i);if(i.store)var a=i.data=new IC;return i.add=function(l){if(i.num+=1,!r){a&&a.add(l);for(let u=0;u<n;++u)o[u].add(o[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!r){a&&a.rem(l);for(let u=0;u<n;++u)o[u].rem(o[u].get(l),l)}},i.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=i.num;if(!r)for(u=0,c=o.length;u<c;++u)o[u].set(l)},i.init=function(){i.num=0,a&&a.reset();for(let l=0;l<n;++l)o[l].init()},i}function ak(e){ee.call(this,{},e),this._mlen=0,this._mods=[]}ak.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:$le.concat(Q1)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};xe(ak,ee,{transform(e,t){this.stamp=t.stamp;let r=e.modified(),i=ml(e.sort),n=PC(e.groupby),o=a=>this.group(n(a)),s=this.state;(!s||r)&&(s=this.state=new LI(e)),r||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)Ple(this._mods[a],s,i,e);return this._mlen=0,this._mods=[],t.reflow(r).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=pI(qe),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Ple(e,t,r,i){let n=i.sort,o=n&&!i.ignorePeers,s=i.frame||[null,0],a=e.data(r),l=a.length,u=o?Ko(n):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:n||br(-1)};t.init();for(let f=0;f<l;++f)Ile(c,s,f,l),o&&Nle(c,u),t.update(c,a[f])}function Ile(e,t,r,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,r-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,r+Math.abs(t[1])+1),e.index=r}function Nle(e,t){let r=e.i0,i=e.i1-1,n=e.compare,o=e.data,s=o.length-1;r>0&&!n(o[r],o[r-1])&&(e.i0=t.left(o,o[r])),i<s&&!n(o[i],o[i+1])&&(e.i1=t.right(o,o[i]))}var _9={};pi(_9,{bound:()=>Qz,identifier:()=>x9,mark:()=>eH,overlap:()=>tH,render:()=>iH,viewlayout:()=>oH});function At(e){return function(){return e}}var uk=Math.abs,Ji=Math.atan2,rf=Math.cos,II=Math.max,__=Math.min,da=Math.sin,Mu=Math.sqrt,Ri=1e-12,nf=Math.PI,ev=nf/2,w_=2*nf;function NI(e){return e>1?0:e<-1?nf:Math.acos(e)}function ck(e){return e>=1?ev:e<=-1?-ev:Math.asin(e)}var fk=Math.PI,hk=2*fk,Hh=1e-6,Ble=hk-Hh;function BI(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function zle(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BI;let r=10**t;return function(i){this._+=i[0];for(let n=1,o=i.length;n<o;++n)this._+=Math.round(arguments[n]*r)/r+i[n]}}var Uh=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BI:zle(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,i,n){this._append`Q${+t},${+r},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(t,r,i,n,o,s){this._append`C${+t},${+r},${+i},${+n},${this._x1=+o},${this._y1=+s}`}arcTo(t,r,i,n,o){if(t=+t,r=+r,i=+i,n=+n,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=i-t,u=n-r,c=s-t,f=a-r,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Hh)if(!(Math.abs(f*l-u*c)>Hh)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let p=i-s,d=n-a,m=l*l+u*u,g=p*p+d*d,v=Math.sqrt(m),b=Math.sqrt(h),y=o*Math.tan((fk-Math.acos((m+h-g)/(2*v*b)))/2),x=y/b,S=y/v;Math.abs(x-1)>Hh&&this._append`L${t+x*c},${r+x*f}`,this._append`A${o},${o},0,0,${+(f*p>c*d)},${this._x1=t+S*l},${this._y1=r+S*u}`}}arc(t,r,i,n,o,s){if(t=+t,r=+r,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(n),l=i*Math.sin(n),u=t+a,c=r+l,f=1^s,h=s?n-o:o-n;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Hh||Math.abs(this._y1-c)>Hh)&&this._append`L${u},${c}`,i&&(h<0&&(h=h%hk+hk),h>Ble?this._append`A${i},${i},0,1,${f},${t-a},${r-l}A${i},${i},0,1,${f},${this._x1=u},${this._y1=c}`:h>Hh&&this._append`A${i},${i},0,${+(h>=fk)},${f},${this._x1=t+i*Math.cos(o)},${this._y1=r+i*Math.sin(o)}`)}rect(t,r,i,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}};function qh(){return new Uh}qh.prototype=Uh.prototype;function of(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{let i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);t=i}return e},()=>new Uh(t)}function Hle(e){return e.innerRadius}function Ule(e){return e.outerRadius}function qle(e){return e.startAngle}function jle(e){return e.endAngle}function Wle(e){return e&&e.padAngle}function Vle(e,t,r,i,n,o,s,a){var l=r-e,u=i-t,c=s-n,f=a-o,h=f*l-c*u;if(!(h*h<Ri))return h=(c*(t-o)-f*(e-n))/h,[e+h*l,t+h*u]}function S_(e,t,r,i,n,o,s){var a=e-r,l=t-i,u=(s?o:-o)/Mu(a*a+l*l),c=u*l,f=-u*a,h=e+c,p=t+f,d=r+c,m=i+f,g=(h+d)/2,v=(p+m)/2,b=d-h,y=m-p,x=b*b+y*y,S=n-o,_=h*m-d*p,w=(y<0?-1:1)*Mu(II(0,S*S*x-_*_)),k=(_*y-b*w)/x,A=(-_*b-y*w)/x,M=(_*y+b*w)/x,D=(-_*b+y*w)/x,z=k-g,P=A-v,I=M-g,N=D-v;return z*z+P*P>I*I+N*N&&(k=M,A=D),{cx:k,cy:A,x01:-c,y01:-f,x11:k*(n/S-1),y11:A*(n/S-1)}}function dk(){var e=Hle,t=Ule,r=At(0),i=null,n=qle,o=jle,s=Wle,a=null,l=of(u);function u(){var c,f,h=+e.apply(this,arguments),p=+t.apply(this,arguments),d=n.apply(this,arguments)-ev,m=o.apply(this,arguments)-ev,g=uk(m-d),v=m>d;if(a||(a=c=l()),p<h&&(f=p,p=h,h=f),!(p>Ri))a.moveTo(0,0);else if(g>w_-Ri)a.moveTo(p*rf(d),p*da(d)),a.arc(0,0,p,d,m,!v),h>Ri&&(a.moveTo(h*rf(m),h*da(m)),a.arc(0,0,h,m,d,v));else{var b=d,y=m,x=d,S=m,_=g,w=g,k=s.apply(this,arguments)/2,A=k>Ri&&(i?+i.apply(this,arguments):Mu(h*h+p*p)),M=__(uk(p-h)/2,+r.apply(this,arguments)),D=M,z=M,P,I;if(A>Ri){var N=ck(A/h*da(k)),H=ck(A/p*da(k));(_-=N*2)>Ri?(N*=v?1:-1,x+=N,S-=N):(_=0,x=S=(d+m)/2),(w-=H*2)>Ri?(H*=v?1:-1,b+=H,y-=H):(w=0,b=y=(d+m)/2)}var T=p*rf(b),O=p*da(b),L=h*rf(S),q=h*da(S);if(M>Ri){var X=p*rf(y),ne=p*da(y),ke=h*rf(x),Ee=h*da(x),G;if(g<nf)if(G=Vle(T,O,ke,Ee,X,ne,L,q)){var B=T-G[0],le=O-G[1],pe=X-G[0],re=ne-G[1],ue=1/da(NI((B*pe+le*re)/(Mu(B*B+le*le)*Mu(pe*pe+re*re)))/2),Re=Mu(G[0]*G[0]+G[1]*G[1]);D=__(M,(h-Re)/(ue-1)),z=__(M,(p-Re)/(ue+1))}else D=z=0}w>Ri?z>Ri?(P=S_(ke,Ee,T,O,p,z,v),I=S_(X,ne,L,q,p,z,v),a.moveTo(P.cx+P.x01,P.cy+P.y01),z<M?a.arc(P.cx,P.cy,z,Ji(P.y01,P.x01),Ji(I.y01,I.x01),!v):(a.arc(P.cx,P.cy,z,Ji(P.y01,P.x01),Ji(P.y11,P.x11),!v),a.arc(0,0,p,Ji(P.cy+P.y11,P.cx+P.x11),Ji(I.cy+I.y11,I.cx+I.x11),!v),a.arc(I.cx,I.cy,z,Ji(I.y11,I.x11),Ji(I.y01,I.x01),!v))):(a.moveTo(T,O),a.arc(0,0,p,b,y,!v)):a.moveTo(T,O),!(h>Ri)||!(_>Ri)?a.lineTo(L,q):D>Ri?(P=S_(L,q,X,ne,h,-D,v),I=S_(T,O,ke,Ee,h,-D,v),a.lineTo(P.cx+P.x01,P.cy+P.y01),D<M?a.arc(P.cx,P.cy,D,Ji(P.y01,P.x01),Ji(I.y01,I.x01),!v):(a.arc(P.cx,P.cy,D,Ji(P.y01,P.x01),Ji(P.y11,P.x11),!v),a.arc(0,0,h,Ji(P.cy+P.y11,P.cx+P.x11),Ji(I.cy+I.y11,I.cx+I.x11),v),a.arc(I.cx,I.cy,D,Ji(I.y11,I.x11),Ji(I.y01,I.x01),!v))):a.arc(0,0,h,S,x,v)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+n.apply(this,arguments)+ +o.apply(this,arguments))/2-nf/2;return[rf(f)*c,da(f)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:At(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:At(+c),u):t},u.cornerRadius=function(c){return arguments.length?(r=typeof c=="function"?c:At(+c),u):r},u.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:At(+c),u):i},u.startAngle=function(c){return arguments.length?(n=typeof c=="function"?c:At(+c),u):n},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:At(+c),u):o},u.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:At(+c),u):s},u.context=function(c){return arguments.length?(a=c??null,u):a},u}var zIe=Array.prototype.slice;function C_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zI(e){this._context=e}zI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function jh(e){return new zI(e)}function k_(e){return e[0]}function E_(e){return e[1]}function tv(e,t){var r=At(!0),i=null,n=jh,o=null,s=of(a);e=typeof e=="function"?e:e===void 0?k_:At(e),t=typeof t=="function"?t:t===void 0?E_:At(t);function a(l){var u,c=(l=C_(l)).length,f,h=!1,p;for(i==null&&(o=n(p=s())),u=0;u<=c;++u)!(u<c&&r(f=l[u],u,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(f,u,l),+t(f,u,l));if(p)return o=null,p+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:At(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:At(+l),a):t},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:At(!!l),a):r},a.curve=function(l){return arguments.length?(n=l,i!=null&&(o=n(i)),a):n},a.context=function(l){return arguments.length?(l==null?i=o=null:o=n(i=l),a):i},a}function A_(e,t,r){var i=null,n=At(!0),o=null,s=jh,a=null,l=of(u);e=typeof e=="function"?e:e===void 0?k_:At(+e),t=typeof t=="function"?t:t===void 0?At(0):At(+t),r=typeof r=="function"?r:r===void 0?E_:At(+r);function u(f){var h,p,d,m=(f=C_(f)).length,g,v=!1,b,y=new Array(m),x=new Array(m);for(o==null&&(a=s(b=l())),h=0;h<=m;++h){if(!(h<m&&n(g=f[h],h,f))===v)if(v=!v)p=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),d=h-1;d>=p;--d)a.point(y[d],x[d]);a.lineEnd(),a.areaEnd()}v&&(y[h]=+e(g,h,f),x[h]=+t(g,h,f),a.point(i?+i(g,h,f):y[h],r?+r(g,h,f):x[h]))}if(b)return a=null,b+""||null}function c(){return tv().defined(n).curve(s).context(o)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:At(+f),i=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:At(+f),u):e},u.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:At(+f),u):i},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:At(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:At(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:At(+f),u):r},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(r)},u.lineX1=function(){return c().x(i).y(t)},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:At(!!f),u):n},u.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),u):s},u.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),u):o},u}var HI={draw(e,t){let r=Mu(t/nf);e.moveTo(r,0),e.arc(0,0,r,0,w_)}};function T_(e,t){let r=null,i=of(n);e=typeof e=="function"?e:At(e||HI),t=typeof t=="function"?t:At(t===void 0?64:+t);function n(){let o;if(r||(r=o=i()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return n.type=function(o){return arguments.length?(e=typeof o=="function"?o:At(o),n):e},n.size=function(o){return arguments.length?(t=typeof o=="function"?o:At(+o),n):t},n.context=function(o){return arguments.length?(r=o??null,n):r},n}function As(){}function ep(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function rv(e){this._context=e}rv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ep(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ep(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pk(e){return new rv(e)}function UI(e){this._context=e}UI.prototype={areaStart:As,areaEnd:As,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ep(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mk(e){return new UI(e)}function qI(e){this._context=e}qI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:ep(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gk(e){return new qI(e)}function jI(e,t){this._basis=new rv(e),this._beta=t}jI.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var i=e[0],n=t[0],o=e[r]-i,s=t[r]-n,a=-1,l;++a<=r;)l=a/r,this._basis.point(this._beta*e[a]+(1-this._beta)*(i+l*o),this._beta*t[a]+(1-this._beta)*(n+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var vk=(function e(t){function r(i){return t===1?new rv(i):new jI(i,t)}return r.beta=function(i){return e(+i)},r})(.85);function tp(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function D_(e,t){this._context=e,this._k=(1-t)/6}D_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:tp(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:tp(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var bk=(function e(t){function r(i){return new D_(i,t)}return r.tension=function(i){return e(+i)},r})(0);function R_(e,t){this._context=e,this._k=(1-t)/6}R_.prototype={areaStart:As,areaEnd:As,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:tp(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var yk=(function e(t){function r(i){return new R_(i,t)}return r.tension=function(i){return e(+i)},r})(0);function M_(e,t){this._context=e,this._k=(1-t)/6}M_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tp(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var xk=(function e(t){function r(i){return new M_(i,t)}return r.tension=function(i){return e(+i)},r})(0);function iv(e,t,r){var i=e._x1,n=e._y1,o=e._x2,s=e._y2;if(e._l01_a>Ri){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,n=(n*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Ri){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-r*e._l12_2a)/c}e._context.bezierCurveTo(i,n,o,s,e._x2,e._y2)}function WI(e,t){this._context=e,this._alpha=t}WI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:iv(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var _k=(function e(t){function r(i){return t?new WI(i,t):new D_(i,0)}return r.alpha=function(i){return e(+i)},r})(.5);function VI(e,t){this._context=e,this._alpha=t}VI.prototype={areaStart:As,areaEnd:As,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:iv(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var wk=(function e(t){function r(i){return t?new VI(i,t):new R_(i,0)}return r.alpha=function(i){return e(+i)},r})(.5);function GI(e,t){this._context=e,this._alpha=t}GI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:iv(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Sk=(function e(t){function r(i){return t?new GI(i,t):new M_(i,0)}return r.alpha=function(i){return e(+i)},r})(.5);function YI(e){this._context=e}YI.prototype={areaStart:As,areaEnd:As,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ck(e){return new YI(e)}function XI(e){return e<0?-1:1}function KI(e,t,r){var i=e._x1-e._x0,n=t-e._x1,o=(e._y1-e._y0)/(i||n<0&&-0),s=(r-e._y1)/(n||i<0&&-0),a=(o*n+s*i)/(i+n);return(XI(o)+XI(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function ZI(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function kk(e,t,r){var i=e._x0,n=e._y0,o=e._x1,s=e._y1,a=(o-i)/3;e._context.bezierCurveTo(i+a,n+a*t,o-a,s-a*r,o,s)}function F_(e){this._context=e}F_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kk(this,this._t0,ZI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,kk(this,ZI(this,r=KI(this,e,t)),r);break;default:kk(this,this._t0,r=KI(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function JI(e){this._context=new QI(e)}(JI.prototype=Object.create(F_.prototype)).point=function(e,t){F_.prototype.point.call(this,t,e)};function QI(e){this._context=e}QI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,n,o){this._context.bezierCurveTo(t,e,i,r,o,n)}};function Ek(e){return new F_(e)}function Ak(e){return new JI(e)}function tN(e){this._context=e}tN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var i=eN(e),n=eN(t),o=0,s=1;s<r;++o,++s)this._context.bezierCurveTo(i[0][o],n[0][o],i[1][o],n[1][o],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function eN(e){var t,r=e.length-1,i,n=new Array(r),o=new Array(r),s=new Array(r);for(n[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)n[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(n[r-1]=2,o[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)i=n[t]/o[t-1],o[t]-=i,s[t]-=i*s[t-1];for(n[r-1]=s[r-1]/o[r-1],t=r-2;t>=0;--t)n[t]=(s[t]-n[t+1])/o[t];for(o[r-1]=(e[r]+n[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-n[t+1];return[n,o]}function Tk(e){return new tN(e)}function O_(e,t){this._context=e,this._t=t}O_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Dk(e){return new O_(e,.5)}function Rk(e){return new O_(e,0)}function Mk(e){return new O_(e,1)}function Ts(e,t){if(typeof document<"u"&&document.createElement){let r=document.createElement("canvas");if(r&&r.getContext)return r.width=e,r.height=t,r}return null}var rN=()=>typeof Image<"u"?Image:null;function oi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function gl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var rp=Symbol("implicit");function Wh(){var e=new I0,t=[],r=[],i=rp;function n(o){let s=e.get(o);if(s===void 0){if(i!==rp)return i;e.set(o,s=t.push(o)-1)}return r[s%r.length]}return n.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new I0;for(let s of o)e.has(s)||e.set(s,t.push(s)-1);return n},n.range=function(o){return arguments.length?(r=Array.from(o),n):r.slice()},n.unknown=function(o){return arguments.length?(i=o,n):i},n.copy=function(){return Wh(t,r).unknown(i)},oi.apply(n,arguments),n}var Wk={};pi(Wk,{interpolate:()=>yn,interpolateArray:()=>TN,interpolateBasis:()=>H_,interpolateBasisClosed:()=>U_,interpolateCubehelix:()=>VN,interpolateCubehelixLong:()=>GN,interpolateDate:()=>j_,interpolateDiscrete:()=>DN,interpolateHcl:()=>qN,interpolateHclLong:()=>jN,interpolateHsl:()=>zN,interpolateHslLong:()=>HN,interpolateHue:()=>RN,interpolateLab:()=>jk,interpolateNumber:()=>xn,interpolateNumberArray:()=>ap,interpolateObject:()=>W_,interpolateRgb:()=>av,interpolateRgbBasis:()=>EN,interpolateRgbBasisClosed:()=>AN,interpolateRound:()=>xl,interpolateString:()=>V_,interpolateTransformCss:()=>LN,interpolateTransformSvg:()=>PN,interpolateZoom:()=>NN,piecewise:()=>Jh,quantize:()=>YN});function Fu(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function sf(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function bl(){}var af=.7,Yh=1/af,ip="\\s*([+-]?\\d+)\\s*",nv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yle=/^#([0-9a-f]{3,8})$/,Xle=new RegExp(`^rgb\\(${ip},${ip},${ip}\\)$`),Kle=new RegExp(`^rgb\\(${vl},${vl},${vl}\\)$`),Zle=new RegExp(`^rgba\\(${ip},${ip},${ip},${nv}\\)$`),Jle=new RegExp(`^rgba\\(${vl},${vl},${vl},${nv}\\)$`),Qle=new RegExp(`^hsl\\(${nv},${vl},${vl}\\)$`),eue=new RegExp(`^hsla\\(${nv},${vl},${vl},${nv}\\)$`),iN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fu(bl,lf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nN,formatHex:nN,formatHex8:tue,formatHsl:rue,formatRgb:oN,toString:oN});function nN(){return this.rgb().formatHex()}function tue(){return this.rgb().formatHex8()}function rue(){return fN(this).formatHsl()}function oN(){return this.rgb().formatRgb()}function lf(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Yle.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?sN(t):r===3?new si(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?$_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?$_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xle.exec(e))?new si(t[1],t[2],t[3],1):(t=Kle.exec(e))?new si(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Zle.exec(e))?$_(t[1],t[2],t[3],t[4]):(t=Jle.exec(e))?$_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Qle.exec(e))?uN(t[1],t[2]/100,t[3]/100,1):(t=eue.exec(e))?uN(t[1],t[2]/100,t[3]/100,t[4]):iN.hasOwnProperty(e)?sN(iN[e]):e==="transparent"?new si(NaN,NaN,NaN,0):null}function sN(e){return new si(e>>16&255,e>>8&255,e&255,1)}function $_(e,t,r,i){return i<=0&&(e=t=r=NaN),new si(e,t,r,i)}function ov(e){return e instanceof bl||(e=lf(e)),e?(e=e.rgb(),new si(e.r,e.g,e.b,e.opacity)):new si}function Ds(e,t,r,i){return arguments.length===1?ov(e):new si(e,t,r,i??1)}function si(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}Fu(si,Ds,sf(bl,{brighter(e){return e=e==null?Yh:Math.pow(Yh,e),new si(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?af:Math.pow(af,e),new si(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new si(Gh(this.r),Gh(this.g),Gh(this.b),P_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aN,formatHex:aN,formatHex8:iue,formatRgb:lN,toString:lN}));function aN(){return`#${Vh(this.r)}${Vh(this.g)}${Vh(this.b)}`}function iue(){return`#${Vh(this.r)}${Vh(this.g)}${Vh(this.b)}${Vh((isNaN(this.opacity)?1:this.opacity)*255)}`}function lN(){let e=P_(this.opacity);return`${e===1?"rgb(":"rgba("}${Gh(this.r)}, ${Gh(this.g)}, ${Gh(this.b)}${e===1?")":`, ${e})`}`}function P_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vh(e){return e=Gh(e),(e<16?"0":"")+e.toString(16)}function uN(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new pa(e,t,r,i)}function fN(e){if(e instanceof pa)return new pa(e.h,e.s,e.l,e.opacity);if(e instanceof bl||(e=lf(e)),!e)return new pa;if(e instanceof pa)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,n=Math.min(t,r,i),o=Math.max(t,r,i),s=NaN,a=o-n,l=(o+n)/2;return a?(t===o?s=(r-i)/a+(r<i)*6:r===o?s=(i-t)/a+2:s=(t-r)/a+4,a/=l<.5?o+n:2-o-n,s*=60):a=l>0&&l<1?0:s,new pa(s,a,l,e.opacity)}function Xh(e,t,r,i){return arguments.length===1?fN(e):new pa(e,t,r,i??1)}function pa(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}Fu(pa,Xh,sf(bl,{brighter(e){return e=e==null?Yh:Math.pow(Yh,e),new pa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?af:Math.pow(af,e),new pa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new si(Fk(e>=240?e-240:e+120,n,i),Fk(e,n,i),Fk(e<120?e+240:e-120,n,i),this.opacity)},clamp(){return new pa(cN(this.h),L_(this.s),L_(this.l),P_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=P_(this.opacity);return`${e===1?"hsl(":"hsla("}${cN(this.h)}, ${L_(this.s)*100}%, ${L_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function cN(e){return e=(e||0)%360,e<0?e+360:e}function L_(e){return Math.max(0,Math.min(1,e||0))}function Fk(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var I_=Math.PI/180,N_=180/Math.PI;var B_=18,hN=.96422,dN=1,pN=.82521,mN=4/29,np=6/29,gN=3*np*np,nue=np*np*np;function vN(e){if(e instanceof yl)return new yl(e.l,e.a,e.b,e.opacity);if(e instanceof Ou)return bN(e);e instanceof si||(e=ov(e));var t=Pk(e.r),r=Pk(e.g),i=Pk(e.b),n=Ok((.2225045*t+.7168786*r+.0606169*i)/dN),o,s;return t===r&&r===i?o=s=n:(o=Ok((.4360747*t+.3850649*r+.1430804*i)/hN),s=Ok((.0139322*t+.0971045*r+.7141733*i)/pN)),new yl(116*n-16,500*(o-n),200*(n-s),e.opacity)}function uf(e,t,r,i){return arguments.length===1?vN(e):new yl(e,t,r,i??1)}function yl(e,t,r,i){this.l=+e,this.a=+t,this.b=+r,this.opacity=+i}Fu(yl,uf,sf(bl,{brighter(e){return new yl(this.l+B_*(e??1),this.a,this.b,this.opacity)},darker(e){return new yl(this.l-B_*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=hN*$k(t),e=dN*$k(e),r=pN*$k(r),new si(Lk(3.1338561*t-1.6168667*e-.4906146*r),Lk(-.9787684*t+1.9161415*e+.033454*r),Lk(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));function Ok(e){return e>nue?Math.pow(e,1/3):e/gN+mN}function $k(e){return e>np?e*e*e:gN*(e-mN)}function Lk(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Pk(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function oue(e){if(e instanceof Ou)return new Ou(e.h,e.c,e.l,e.opacity);if(e instanceof yl||(e=vN(e)),e.a===0&&e.b===0)return new Ou(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*N_;return new Ou(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Kh(e,t,r,i){return arguments.length===1?oue(e):new Ou(e,t,r,i??1)}function Ou(e,t,r,i){this.h=+e,this.c=+t,this.l=+r,this.opacity=+i}function bN(e){if(isNaN(e.h))return new yl(e.l,0,0,e.opacity);var t=e.h*I_;return new yl(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Fu(Ou,Kh,sf(bl,{brighter(e){return new Ou(this.h,this.c,this.l+B_*(e??1),this.opacity)},darker(e){return new Ou(this.h,this.c,this.l-B_*(e??1),this.opacity)},rgb(){return bN(this).rgb()}}));var wN=-.14861,Ik=1.78277,Nk=-.29227,z_=-.90649,sv=1.97294,yN=sv*z_,xN=sv*Ik,_N=Ik*Nk-z_*wN;function sue(e){if(e instanceof Zh)return new Zh(e.h,e.s,e.l,e.opacity);e instanceof si||(e=ov(e));var t=e.r/255,r=e.g/255,i=e.b/255,n=(_N*i+yN*t-xN*r)/(_N+yN-xN),o=i-n,s=(sv*(r-n)-Nk*o)/z_,a=Math.sqrt(s*s+o*o)/(sv*n*(1-n)),l=a?Math.atan2(s,o)*N_-120:NaN;return new Zh(l<0?l+360:l,a,n,e.opacity)}function op(e,t,r,i){return arguments.length===1?sue(e):new Zh(e,t,r,i??1)}function Zh(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}Fu(Zh,op,sf(bl,{brighter(e){return e=e==null?Yh:Math.pow(Yh,e),new Zh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?af:Math.pow(af,e),new Zh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*I_,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),n=Math.sin(e);return new si(255*(t+r*(wN*i+Ik*n)),255*(t+r*(Nk*i+z_*n)),255*(t+r*(sv*i)),this.opacity)}}));function Bk(e,t,r,i,n){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*r+(1+3*e+3*o-3*s)*i+s*n)/6}function H_(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),n=e[i],o=e[i+1],s=i>0?e[i-1]:2*n-o,a=i<t-1?e[i+2]:2*o-n;return Bk((r-i/t)*t,s,n,o,a)}}function U_(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),n=e[(i+t-1)%t],o=e[i%t],s=e[(i+1)%t],a=e[(i+2)%t];return Bk((r-i/t)*t,n,o,s,a)}}var sp=e=>()=>e;function SN(e,t){return function(r){return e+r*t}}function aue(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function cf(e,t){var r=t-e;return r?SN(e,r>180||r<-180?r-360*Math.round(r/360):r):sp(isNaN(e)?t:e)}function CN(e){return(e=+e)==1?xr:function(t,r){return r-t?aue(t,r,e):sp(isNaN(t)?r:t)}}function xr(e,t){var r=t-e;return r?SN(e,r):sp(isNaN(e)?t:e)}var av=(function e(t){var r=CN(t);function i(n,o){var s=r((n=Ds(n)).r,(o=Ds(o)).r),a=r(n.g,o.g),l=r(n.b,o.b),u=xr(n.opacity,o.opacity);return function(c){return n.r=s(c),n.g=a(c),n.b=l(c),n.opacity=u(c),n+""}}return i.gamma=e,i})(1);function kN(e){return function(t){var r=t.length,i=new Array(r),n=new Array(r),o=new Array(r),s,a;for(s=0;s<r;++s)a=Ds(t[s]),i[s]=a.r||0,n[s]=a.g||0,o[s]=a.b||0;return i=e(i),n=e(n),o=e(o),a.opacity=1,function(l){return a.r=i(l),a.g=n(l),a.b=o(l),a+""}}}var EN=kN(H_),AN=kN(U_);function ap(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),n;return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function q_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function TN(e,t){return(q_(t)?ap:zk)(e,t)}function zk(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,n=new Array(i),o=new Array(r),s;for(s=0;s<i;++s)n[s]=yn(e[s],t[s]);for(;s<r;++s)o[s]=t[s];return function(a){for(s=0;s<i;++s)o[s]=n[s](a);return o}}function j_(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}function xn(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function W_(e,t){var r={},i={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=yn(e[n],t[n]):i[n]=t[n];return function(o){for(n in r)i[n]=r[n](o);return i}}var Uk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hk=new RegExp(Uk.source,"g");function lue(e){return function(){return e}}function uue(e){return function(t){return e(t)+""}}function V_(e,t){var r=Uk.lastIndex=Hk.lastIndex=0,i,n,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(i=Uk.exec(e))&&(n=Hk.exec(t));)(o=n.index)>r&&(o=t.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(n=n[0])?a[s]?a[s]+=n:a[++s]=n:(a[++s]=null,l.push({i:s,x:xn(i,n)})),r=Hk.lastIndex;return r<t.length&&(o=t.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?uue(l[0].x):lue(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function yn(e,t){var r=typeof t,i;return t==null||r==="boolean"?sp(t):(r==="number"?xn:r==="string"?(i=lf(t))?(t=i,av):V_:t instanceof lf?av:t instanceof Date?j_:q_(t)?ap:Array.isArray(t)?zk:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?W_:xn)(e,t)}function DN(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}function RN(e,t){var r=cf(+e,+t);return function(i){var n=r(i);return n-360*Math.floor(n/360)}}function xl(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var MN=180/Math.PI,G_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qk(e,t,r,i,n,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*r+t*i)&&(r-=e*l,i-=t*l),(a=Math.sqrt(r*r+i*i))&&(r/=a,i/=a,l/=a),e*i<t*r&&(e=-e,t=-t,l=-l,s=-s),{translateX:n,translateY:o,rotate:Math.atan2(t,e)*MN,skewX:Math.atan(l)*MN,scaleX:s,scaleY:a}}var Y_;function FN(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?G_:qk(t.a,t.b,t.c,t.d,t.e,t.f)}function ON(e){return e==null?G_:(Y_||(Y_=document.createElementNS("http://www.w3.org/2000/svg","g")),Y_.setAttribute("transform",e),(e=Y_.transform.baseVal.consolidate())?(e=e.matrix,qk(e.a,e.b,e.c,e.d,e.e,e.f)):G_)}function $N(e,t,r,i){function n(u){return u.length?u.pop()+" ":""}function o(u,c,f,h,p,d){if(u!==f||c!==h){var m=p.push("translate(",null,t,null,r);d.push({i:m-4,x:xn(u,f)},{i:m-2,x:xn(c,h)})}else(f||h)&&p.push("translate("+f+t+h+r)}function s(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(n(f)+"rotate(",null,i)-2,x:xn(u,c)})):c&&f.push(n(f)+"rotate("+c+i)}function a(u,c,f,h){u!==c?h.push({i:f.push(n(f)+"skewX(",null,i)-2,x:xn(u,c)}):c&&f.push(n(f)+"skewX("+c+i)}function l(u,c,f,h,p,d){if(u!==f||c!==h){var m=p.push(n(p)+"scale(",null,",",null,")");d.push({i:m-4,x:xn(u,f)},{i:m-2,x:xn(c,h)})}else(f!==1||h!==1)&&p.push(n(p)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,h),s(u.rotate,c.rotate,f,h),a(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(p){for(var d=-1,m=h.length,g;++d<m;)f[(g=h[d]).i]=g.x(p);return f.join("")}}}var LN=$N(FN,"px, ","px)","deg)"),PN=$N(ON,", ",")",")");var cue=1e-12;function IN(e){return((e=Math.exp(e))+1/e)/2}function fue(e){return((e=Math.exp(e))-1/e)/2}function hue(e){return((e=Math.exp(2*e))-1)/(e+1)}var NN=(function e(t,r,i){function n(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],h=s[2],p=c-a,d=f-l,m=p*p+d*d,g,v;if(m<cue)v=Math.log(h/u)/t,g=function(w){return[a+w*p,l+w*d,u*Math.exp(t*w*v)]};else{var b=Math.sqrt(m),y=(h*h-u*u+i*m)/(2*u*r*b),x=(h*h-u*u-i*m)/(2*h*r*b),S=Math.log(Math.sqrt(y*y+1)-y),_=Math.log(Math.sqrt(x*x+1)-x);v=(_-S)/t,g=function(w){var k=w*v,A=IN(S),M=u/(r*b)*(A*hue(t*k+S)-fue(S));return[a+M*p,l+M*d,u*A/IN(t*k+S)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return n.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},n})(Math.SQRT2,2,4);function BN(e){return function(t,r){var i=e((t=Xh(t)).h,(r=Xh(r)).h),n=xr(t.s,r.s),o=xr(t.l,r.l),s=xr(t.opacity,r.opacity);return function(a){return t.h=i(a),t.s=n(a),t.l=o(a),t.opacity=s(a),t+""}}}var zN=BN(cf),HN=BN(xr);function jk(e,t){var r=xr((e=uf(e)).l,(t=uf(t)).l),i=xr(e.a,t.a),n=xr(e.b,t.b),o=xr(e.opacity,t.opacity);return function(s){return e.l=r(s),e.a=i(s),e.b=n(s),e.opacity=o(s),e+""}}function UN(e){return function(t,r){var i=e((t=Kh(t)).h,(r=Kh(r)).h),n=xr(t.c,r.c),o=xr(t.l,r.l),s=xr(t.opacity,r.opacity);return function(a){return t.h=i(a),t.c=n(a),t.l=o(a),t.opacity=s(a),t+""}}}var qN=UN(cf),jN=UN(xr);function WN(e){return(function t(r){r=+r;function i(n,o){var s=e((n=op(n)).h,(o=op(o)).h),a=xr(n.s,o.s),l=xr(n.l,o.l),u=xr(n.opacity,o.opacity);return function(c){return n.h=s(c),n.s=a(c),n.l=l(Math.pow(c,r)),n.opacity=u(c),n+""}}return i.gamma=t,i})(1)}var VN=WN(cf),GN=WN(xr);function Jh(e,t){t===void 0&&(t=e,e=yn);for(var r=0,i=t.length-1,n=t[0],o=new Array(i<0?0:i);r<i;)o[r]=e(n,n=t[++r]);return function(s){var a=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return o[a](s-a)}}function YN(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e(i/(t-1));return r}function Vk(e){return function(){return e}}function lp(e){return+e}var XN=[0,1];function Qi(e){return e}function Gk(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Vk(isNaN(t)?NaN:.5)}function due(e,t){var r;return e>t&&(r=e,e=t,t=r),function(i){return Math.max(e,Math.min(t,i))}}function pue(e,t,r){var i=e[0],n=e[1],o=t[0],s=t[1];return n<i?(i=Gk(n,i),o=r(s,o)):(i=Gk(i,n),o=r(o,s)),function(a){return o(i(a))}}function mue(e,t,r){var i=Math.min(e.length,t.length)-1,n=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)n[s]=Gk(e[s],e[s+1]),o[s]=r(t[s],t[s+1]);return function(a){var l=fa(e,a,1,i)-1;return o[l](n[l](a))}}function _l(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Qh(){var e=XN,t=XN,r=yn,i,n,o,s=Qi,a,l,u;function c(){var h=Math.min(e.length,t.length);return s!==Qi&&(s=due(e[0],e[h-1])),a=h>2?mue:pue,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=a(e.map(i),t,r)))(i(s(h)))}return f.invert=function(h){return s(n((u||(u=a(t,e.map(i),xn)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,lp),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=xl,c()},f.clamp=function(h){return arguments.length?(s=h?!0:Qi,c()):s!==Qi},f.interpolate=function(h){return arguments.length?(r=h,c()):r},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,p){return i=h,n=p,c()}}function lv(){return Qh()(Qi,Qi)}function up(e,t,r,i){var n=Vn(e,t,r),o;switch(i=Zo(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(o=k1(n,s))&&(i.precision=o),H0(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=E1(n,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=C1(n))&&(i.precision=o-(i.type==="%")*2);break}}return Wc(i)}function Qo(e){var t=e.domain;return e.ticks=function(r){var i=t();return Dh(i[0],i[i.length-1],r??10)},e.tickFormat=function(r,i){var n=t();return up(n[0],n[n.length-1],r??10,i)},e.nice=function(r){r==null&&(r=10);var i=t(),n=0,o=i.length-1,s=i[n],a=i[o],l,u,c=10;for(a<s&&(u=s,s=a,a=u,u=n,n=o,o=u);c-- >0;){if(u=x1(s,a,r),u===l)return i[n]=s,i[o]=a,t(i);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function uv(){var e=lv();return e.copy=function(){return _l(e,uv())},oi.apply(e,arguments),Qo(e)}function cv(e){var t;function r(i){return i==null||isNaN(i=+i)?t:i}return r.invert=r,r.domain=r.range=function(i){return arguments.length?(e=Array.from(i,lp),r):e.slice()},r.unknown=function(i){return arguments.length?(t=i,r):t},r.copy=function(){return cv(e).unknown(t)},e=arguments.length?Array.from(e,lp):[0,1],Qo(r)}function fv(e,t){e=e.slice();var r=0,i=e.length-1,n=e[r],o=e[i],s;return o<n&&(s=r,r=i,i=s,s=n,n=o,o=s),e[r]=t.floor(n),e[i]=t.ceil(o),e}function KN(e){return Math.log(e)}function ZN(e){return Math.exp(e)}function gue(e){return-Math.log(-e)}function vue(e){return-Math.exp(-e)}function bue(e){return isFinite(e)?+("1e"+e):e<0?0:e}function yue(e){return e===10?bue:e===Math.E?Math.exp:t=>Math.pow(e,t)}function xue(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function JN(e){return(t,r)=>-e(-t,r)}function hv(e){let t=e(KN,ZN),r=t.domain,i=10,n,o;function s(){return n=xue(i),o=yue(i),r()[0]<0?(n=JN(n),o=JN(o),e(gue,vue)):e(KN,ZN),t}return t.base=function(a){return arguments.length?(i=+a,s()):i},t.domain=function(a){return arguments.length?(r(a),s()):r()},t.ticks=a=>{let l=r(),u=l[0],c=l[l.length-1],f=c<u;f&&([u,c]=[c,u]);let h=n(u),p=n(c),d,m,g=a==null?10:+a,v=[];if(!(i%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(d=1;d<i;++d)if(m=h<0?d/o(-h):d*o(h),!(m<u)){if(m>c)break;v.push(m)}}else for(;h<=p;++h)for(d=i-1;d>=1;--d)if(m=h>0?d/o(-h):d*o(h),!(m<u)){if(m>c)break;v.push(m)}v.length*2<g&&(v=Dh(u,c,g))}else v=Dh(h,p,Math.min(p-h,g)).map(o);return f?v.reverse():v},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Zo(l)).precision==null&&(l.trim=!0),l=Wc(l)),a===1/0)return l;let u=Math.max(1,i*a/t.ticks().length);return c=>{let f=c/o(Math.round(n(c)));return f*i<i-.5&&(f*=i),f<=u?l(c):""}},t.nice=()=>r(fv(r(),{floor:a=>o(Math.floor(n(a))),ceil:a=>o(Math.ceil(n(a)))})),t}function dv(){let e=hv(Qh()).domain([1,10]);return e.copy=()=>_l(e,dv()).base(e.base()),oi.apply(e,arguments),e}function QN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function eB(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function pv(e){var t=1,r=e(QN(t),eB(t));return r.constant=function(i){return arguments.length?e(QN(t=+i),eB(t)):t},Qo(r)}function mv(){var e=pv(Qh());return e.copy=function(){return _l(e,mv()).constant(e.constant())},oi.apply(e,arguments)}function tB(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _ue(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wue(e){return e<0?-e*e:e*e}function gv(e){var t=e(Qi,Qi),r=1;function i(){return r===1?e(Qi,Qi):r===.5?e(_ue,wue):e(tB(r),tB(1/r))}return t.exponent=function(n){return arguments.length?(r=+n,i()):r},Qo(t)}function cp(){var e=gv(Qh());return e.copy=function(){return _l(e,cp()).exponent(e.exponent())},oi.apply(e,arguments),e}function Yk(){return cp.apply(null,arguments).exponent(.5)}function vv(){var e=[],t=[],r=[],i;function n(){var s=0,a=Math.max(1,t.length);for(r=new Array(a-1);++s<a;)r[s-1]=w1(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?i:t[fa(r,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?r[a-1]:e[0],a<r.length?r[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(vn),n()},o.range=function(s){return arguments.length?(t=Array.from(s),n()):t.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.quantiles=function(){return r.slice()},o.copy=function(){return vv().domain(e).range(t).unknown(i)},oi.apply(o,arguments)}function bv(){var e=0,t=1,r=1,i=[.5],n=[0,1],o;function s(l){return l!=null&&l<=l?n[fa(i,l,0,r)]:o}function a(){var l=-1;for(i=new Array(r);++l<r;)i[l]=((l+1)*t-(l-r)*e)/(r+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(r=(n=Array.from(l)).length-1,a()):n.slice()},s.invertExtent=function(l){var u=n.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=r?[i[r-1],t]:[i[u-1],i[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return bv().domain([e,t]).range(n).unknown(o)},oi.apply(Qo(s),arguments)}function yv(){var e=[.5],t=[0,1],r,i=1;function n(o){return o!=null&&o<=o?t[fa(e,o,0,i)]:r}return n.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,t.length-1),n):e.slice()},n.range=function(o){return arguments.length?(t=Array.from(o),i=Math.min(e.length,t.length-1),n):t.slice()},n.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return yv().domain(e).range(t).unknown(r)},oi.apply(n,arguments)}function Sue(e){return new Date(e)}function Cue(e){return e instanceof Date?+e:+new Date(+e)}function X_(e,t,r,i,n,o,s,a,l,u){var c=lv(),f=c.invert,h=c.domain,p=u(".%L"),d=u(":%S"),m=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),b=u("%b %d"),y=u("%B"),x=u("%Y");function S(_){return(l(_)<_?p:a(_)<_?d:s(_)<_?m:o(_)<_?g:i(_)<_?n(_)<_?v:b:r(_)<_?y:x)(_)}return c.invert=function(_){return new Date(f(_))},c.domain=function(_){return arguments.length?h(Array.from(_,Cue)):h().map(Sue)},c.ticks=function(_){var w=h();return e(w[0],w[w.length-1],_??10)},c.tickFormat=function(_,w){return w==null?S:u(w)},c.nice=function(_){var w=h();return(!_||typeof _.range!="function")&&(_=t(w[0],w[w.length-1],_??10)),_?h(fv(w,_)):c},c.copy=function(){return _l(c,X_(e,t,r,i,n,o,s,a,l,u))},c}function K_(){return oi.apply(X_(z8,H8,Gn,Su,Cs,wo,Yc,Vc,bn,G0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Z_(){return oi.apply(X_(N8,B8,Yn,Cu,ks,Ss,Xc,Gc,bn,Y0).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function J_(){var e=0,t=1,r,i,n,o,s=Qi,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(n===0?.5:(f=(o(f)-r)*n,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=o(e=+e),i=o(t=+t),n=r===i?0:1/(i-r),u):[e,t]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(s=f,u):s};function c(f){return function(h){var p,d;return arguments.length?([p,d]=h,s=f(p,d),u):[s(0),s(1)]}}return u.range=c(yn),u.rangeRound=c(xl),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return o=f,r=f(e),i=f(t),n=r===i?0:1/(i-r),u}}function $u(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fp(){var e=Qo(J_()(Qi));return e.copy=function(){return $u(e,fp())},gl.apply(e,arguments)}function Q_(){var e=hv(J_()).domain([1,10]);return e.copy=function(){return $u(e,Q_()).base(e.base())},gl.apply(e,arguments)}function e4(){var e=pv(J_());return e.copy=function(){return $u(e,e4()).constant(e.constant())},gl.apply(e,arguments)}function xv(){var e=gv(J_());return e.copy=function(){return $u(e,xv()).exponent(e.exponent())},gl.apply(e,arguments)}function Xk(){return xv.apply(null,arguments).exponent(.5)}function t4(){var e=0,t=.5,r=1,i=1,n,o,s,a,l,u=Qi,c,f=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+c(m))-o)*(i*m<i*o?a:l),u(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,n=c(e=+e),o=c(t=+t),s=c(r=+r),a=n===o?0:.5/(o-n),l=o===s?0:.5/(s-o),i=o<n?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(u=m,p):u};function d(m){return function(g){var v,b,y;return arguments.length?([v,b,y]=g,u=Jh(m,[v,b,y]),p):[u(0),u(.5),u(1)]}}return p.range=d(yn),p.rangeRound=d(xl),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return c=m,n=m(e),o=m(t),s=m(r),a=n===o?0:.5/(o-n),l=o===s?0:.5/(s-o),i=o<n?-1:1,p}}function _v(){var e=Qo(t4()(Qi));return e.copy=function(){return $u(e,_v())},gl.apply(e,arguments)}function r4(){var e=hv(t4()).domain([.1,1,10]);return e.copy=function(){return $u(e,r4()).base(e.base())},gl.apply(e,arguments)}function i4(){var e=pv(t4());return e.copy=function(){return $u(e,i4()).constant(e.constant())},gl.apply(e,arguments)}function wv(){var e=gv(t4());return e.copy=function(){return $u(e,wv()).exponent(e.exponent())},gl.apply(e,arguments)}function Kk(){return wv.apply(null,arguments).exponent(.5)}function ai(e){for(var t=e.length/6|0,r=new Array(t),i=0;i<t;)r[i]="#"+e.slice(i*6,++i*6);return r}var Zk=ai("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Jk=ai("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");var Qk=ai("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");var eE=ai("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0");var tE=ai("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var rE=ai("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");var iE=ai("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");var nE=ai("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");var oE=ai("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");var sE=ai("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Sv(e,t,r){let i=e-t+r*2;return e?i>0?i:1:0}var Eue="identity",td="linear",wl="log",hp="pow",dp="sqrt",Cv="symlog",ff="time",hf="utc",ma="sequential",rd="diverging",ed="quantile",kv="quantize",Ev="threshold",o4="ordinal",s4="point",lE="band",a4="bin-ordinal",vi="continuous",Av="discrete",Tv="discretizing",Rs="interpolating",uE="temporal";function Aue(e){return function(t){let r=t[0],i=t[1],n;return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function Tue(e){return function(t){let r=e.range(),i=t[0],n=t[1],o=-1,s,a,l,u;for(n<i&&(a=i,i=n,n=a),l=0,u=r.length;l<u;++l)r[l]>=i&&r[l]<=n&&(o<0&&(o=l),s=l);if(!(o<0))return i=e.invertExtent(r[o]),n=e.invertExtent(r[s]),[i[0]===void 0?i[1]:i[0],n[1]===void 0?n[0]:n[1]]}}function cE(){let e=Wh().unknown(void 0),t=e.domain,r=e.range,i=[0,1],n,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function c(){let f=t().length,h=i[1]<i[0],p=i[1-h],d=Sv(f,a,l),m=i[h-0];n=(p-m)/(d||1),s&&(n=Math.floor(n)),m+=(p-m-n*(f-a))*u,o=n*(1-a),s&&(m=Math.round(m),o=Math.round(o));let g=Yr(f).map(v=>m+n*v);return r(h?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(i=[+f[0],+f[1]],c()):i.slice()},e.rangeRound=function(f){return i=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return n},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;let h=i[1]<i[0],p=h?r().reverse():r(),d=p.length-1,m=+f[0],g=+f[1],v,b,y;if(!(m!==m||g!==g)&&(g<m&&(y=m,m=g,g=y),!(g<p[0]||m>i[1-h])))return v=Math.max(0,Th(p,m)-1),b=m===g?v:Th(p,g)-1,m-p[v]>o+1e-10&&++v,h&&(y=v,v=d-b,b=d-y),v>b?void 0:t().slice(v,b+1)},e.invert=function(f){let h=e.invertRange([f,f]);return h&&h[0]},e.copy=function(){return cE().domain(t()).range(i).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function oB(e){let t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return oB(t())},e}function Due(){return oB(cE().paddingInner(1))}var Rue=Array.prototype.map;function Mue(e){return Rue.call(e,Gr)}var Fue=Array.prototype.slice;function sB(){let e=[],t=[];function r(i){return i==null||i!==i?void 0:t[(fa(e,i)-1)%t.length]}return r.domain=function(i){return arguments.length?(e=Mue(i),r):e.slice()},r.range=function(i){return arguments.length?(t=Fue.call(i),r):t.slice()},r.tickFormat=function(i,n){return up(e[0],ct(e),i??10,n)},r.copy=function(){return sB().domain(r.domain()).range(r.range())},r}var n4=new Map,aB=Symbol("vega_scale");function fE(e){return e[aB]=!0,e}function hE(e){return e&&e[aB]===!0}function Oue(e,t,r){let i=function(){let o=t();return o.invertRange||(o.invertRange=o.invert?Aue(o):o.invertExtent?Tue(o):void 0),o.type=e,fE(o)};return i.metadata=ii(ve(r)),i}function _t(e,t,r){return arguments.length>1?(n4.set(e,Oue(e,t,r)),this):dE(e)?n4.get(e):void 0}_t(Eue,cv);_t(td,uv,vi);_t(wl,dv,[vi,wl]);_t(hp,cp,vi);_t(dp,Yk,vi);_t(Cv,mv,vi);_t(ff,K_,[vi,uE]);_t(hf,Z_,[vi,uE]);_t(ma,fp,[vi,Rs]);_t(`${ma}-${td}`,fp,[vi,Rs]);_t(`${ma}-${wl}`,Q_,[vi,Rs,wl]);_t(`${ma}-${hp}`,xv,[vi,Rs]);_t(`${ma}-${dp}`,Xk,[vi,Rs]);_t(`${ma}-${Cv}`,e4,[vi,Rs]);_t(`${rd}-${td}`,_v,[vi,Rs]);_t(`${rd}-${wl}`,r4,[vi,Rs,wl]);_t(`${rd}-${hp}`,wv,[vi,Rs]);_t(`${rd}-${dp}`,Kk,[vi,Rs]);_t(`${rd}-${Cv}`,i4,[vi,Rs]);_t(ed,vv,[Tv,ed]);_t(kv,bv,Tv);_t(Ev,yv,Tv);_t(a4,sB,[Av,Tv]);_t(o4,Wh,Av);_t(lE,cE,Av);_t(s4,Due,Av);function dE(e){return n4.has(e)}function id(e,t){let r=n4.get(e);return r&&r.metadata[t]}function Dv(e){return id(e,vi)}function df(e){return id(e,Av)}function l4(e){return id(e,Tv)}function pE(e){return id(e,wl)}function $ue(e){return id(e,uE)}function mE(e){return id(e,Rs)}function gE(e){return id(e,ed)}var Lue=["clamp","base","constant","exponent"];function u4(e,t){let r=t[0],i=ct(t)-r;return function(n){return e(r+n*i)}}function pp(e,t,r){return Jh(Rv(t||"rgb",r),e)}function c4(e,t){let r=new Array(t),i=t+1;for(let n=0;n<t;)r[n]=e(++n/i);return r}function f4(e,t,r){let i=r-t,n,o,s;return!i||!Number.isFinite(i)?br(.5):(n=(o=e.type).indexOf("-"),o=n<0?o:o.slice(n+1),s=_t(o)().domain([t,r]).range([0,1]),Lue.forEach(a=>e[a]?s[a](e[a]()):0),s)}function Rv(e,t){let r=Wk[Pue(e)];return t!=null&&r&&r.gamma?r.gamma(t):r}function Pue(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}var Iue={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Nue={accent:Jk,category10:Zk,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Qk,observable10:eE,paired:tE,pastel1:rE,pastel2:iE,set1:nE,set2:oE,set3:sE,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function lB(e){if(K(e))return e;let t=e.length/6|0,r=new Array(t);for(let i=0;i<t;)r[i]="#"+e.slice(i*6,++i*6);return r}function uB(e,t){for(let r in e)Mv(r,t(e[r]))}var rB={};uB(Nue,lB);uB(Iue,e=>pp(lB(e)));function Mv(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(rB[e]=t,this):rB[e]}var Fv="symbol",Bue="discrete",cB="gradient",zue=e=>K(e)?e.map(t=>String(t)):String(e),Hue=(e,t)=>e[1]-t[1],Uue=(e,t)=>t[1]-e[1];function h4(e,t,r){let i;return ut(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),r!=null&&(t=Math.min(t,Math.floor(xu(e.domain())/r||1)+1))),me(t)&&(i=t.step,t=t.interval),he(t)&&(t=e.type===ff?ku(t):e.type==hf?Eu(t):te("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function vE(e,t,r){let i=e.range(),n=i[0],o=ct(i),s=Hue;if(n>o&&(i=o,o=n,n=i,s=Uue),n=Math.floor(n),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>n<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),r>0&&t.length>1){let a=[t[0],ct(t)];for(;t.length>r&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function d4(e,t){return e.bins?vE(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function bE(e,t,r,i,n,o){let s=t.type,a=zue;if(s===ff||n===ff)a=e.timeFormat(i);else if(s===hf||n===hf)a=e.utcFormat(i);else if(pE(s)){let l=e.formatFloat(i);if(o||t.bins)a=l;else{let u=fB(t,r,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){let l=t.domain();a=e.formatSpan(l[0],l[l.length-1],r,i)}else i&&(a=e.format(i));return a}function fB(e,t,r){let i=d4(e,t),n=e.base(),o=Math.log(n),s=Math.max(1,n*t/i.length),a=l=>{let u=l/Math.pow(n,Math.round(Math.log(l)/o));return u*n<n-.5&&(u*=n),u<=s};return r?i.filter(a):a}var aE={[ed]:"quantiles",[kv]:"thresholds",[Ev]:"domain"},hB={[ed]:"quantiles",[kv]:"domain"};function yE(e,t){return e.bins?Wue(e.bins):e.type===wl?fB(e,t,!0):aE[e.type]?jue(e[aE[e.type]]()):d4(e,t)}function que(e,t,r){let i=t[hB[t.type]](),n=i.length,o=n>1?i[1]-i[0]:i[0],s;for(s=1;s<n;++s)o=Math.min(o,i[s]-i[s-1]);return e.formatSpan(0,o,30,r)}function jue(e){let t=[-1/0].concat(e);return t.max=1/0,t}function Wue(e){let t=e.slice(0,-1);return t.max=ct(e),t}var Vue=e=>aE[e.type]||e.bins;function xE(e,t,r,i,n,o,s){let a=hB[t.type]&&o!==ff&&o!==hf?que(e,t,n):bE(e,t,r,n,o,s);return i===Fv&&Vue(t)?Gue(a):i===Bue?Yue(a):Xue(a)}var Gue=e=>(t,r,i)=>{let n=iB(i[r+1],iB(i.max,1/0)),o=nB(t,e),s=nB(n,e);return o&&s?o+" \u2013 "+s:s?"< "+s:"\u2265 "+o},iB=(e,t)=>e??t,Yue=e=>(t,r)=>r?e(t):null,Xue=e=>t=>e(t),nB=(e,t)=>Number.isFinite(e)?t(e):null;function dB(e){let t=e.domain(),r=t.length-1,i=+t[0],n=+ct(t),o=n-i;if(e.type===Ev){let s=r?o/r:.1;i-=s,n+=s,o=n-i}return s=>(s-i)/o}function Kue(e,t,r,i){let n=i||t.type;return he(r)&&$ue(n)&&(r=r.replace(/%a/g,"%A").replace(/%b/g,"%B")),!r&&n===ff?e.timeFormat("%A, %d %B %Y, %X"):!r&&n===hf?e.utcFormat("%A, %d %B %Y, %X UTC"):xE(e,t,5,null,r,i,!0)}function _E(e,t,r){r=r||{};let i=Math.max(3,r.maxlen||7),n=Kue(e,t,r.format,r.formatType);if(l4(t.type)){let o=yE(t).slice(1).map(n),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(df(t.type)){let o=t.domain(),s=o.length,a=s>i?o.slice(0,i-2).map(n).join(", ")+", ending with "+o.slice(-1).map(n):o.map(n).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{let o=t.domain();return`values from ${n(o[0])} to ${n(ct(o))}`}}var NB=0;function Zue(){NB=0}var S4="p_";function NE(e){return e&&e.gradient}function BB(e,t,r){let i=e.gradient,n=e.id,o=i==="radial"?S4:"";return n||(n=e.id="gradient_"+NB++,i==="radial"?(e.x1=Sl(e.x1,.5),e.y1=Sl(e.y1,.5),e.r1=Sl(e.r1,0),e.x2=Sl(e.x2,.5),e.y2=Sl(e.y2,.5),e.r2=Sl(e.r2,.5),o=S4):(e.x1=Sl(e.x1,0),e.y1=Sl(e.y1,0),e.x2=Sl(e.x2,1),e.y2=Sl(e.y2,0))),t[n]=e,"url("+(r||"")+"#"+o+n+")"}function Sl(e,t){return e??t}function BE(e,t){var r=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(n,o){return r.push({offset:n,color:o}),i}}}var pB={basis:{curve:pk},"basis-closed":{curve:mk},"basis-open":{curve:gk},bundle:{curve:vk,tension:"beta",value:.85},cardinal:{curve:bk,tension:"tension",value:0},"cardinal-open":{curve:xk,tension:"tension",value:0},"cardinal-closed":{curve:yk,tension:"tension",value:0},"catmull-rom":{curve:_k,tension:"alpha",value:.5},"catmull-rom-closed":{curve:wk,tension:"alpha",value:.5},"catmull-rom-open":{curve:Sk,tension:"alpha",value:.5},linear:{curve:jh},"linear-closed":{curve:Ck},monotone:{horizontal:Ak,vertical:Ek},natural:{curve:Tk},step:{curve:Dk},"step-after":{curve:Mk},"step-before":{curve:Rk}};function zE(e,t,r){var i=_e(pB,e)&&pB[e],n=null;return i&&(n=i.curve||i[t||"vertical"],i.tension&&r!=null&&(n=n[i.tension](r))),n}var Jue={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Que=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,ece=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,tce=/^((\s+,?\s*)|(,\s*))/,rce=/^[01]/;function ud(e){let t=[];return(e.match(Que)||[]).forEach(i=>{let n=i[0],o=n.toLowerCase(),s=Jue[o],a=ice(o,s,i.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([n,...a.slice(0,s)]),l!==s){o==="m"&&(n=n==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([n,...a.slice(u,u+s)])}}),t}function ice(e,t,r){let i=[];for(let n=0;t&&n<r.length;)for(let o=0;o<t;++o){let s=e==="a"&&(o===3||o===4)?rce:ece,a=r.slice(n).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");n+=a[0].length,i.push(+a[0]);let l=r.slice(n).match(tce);l!==null&&(n+=l[0].length)}return i}var yf=Math.PI/180,nce=1e-14,nd=Math.PI/2,Cl=Math.PI*2,mp=Math.sqrt(3)/2,wE={},SE={},zB=[].join;function oce(e,t,r,i,n,o,s,a,l){let u=zB.call(arguments);if(wE[u])return wE[u];let c=s*yf,f=Math.sin(c),h=Math.cos(c);r=Math.abs(r),i=Math.abs(i);let p=h*(a-e)*.5+f*(l-t)*.5,d=h*(l-t)*.5-f*(a-e)*.5,m=p*p/(r*r)+d*d/(i*i);m>1&&(m=Math.sqrt(m),r*=m,i*=m);let g=h/r,v=f/r,b=-f/i,y=h/i,x=g*a+v*l,S=b*a+y*l,_=g*e+v*t,w=b*e+y*t,A=1/((_-x)*(_-x)+(w-S)*(w-S))-.25;A<0&&(A=0);let M=Math.sqrt(A);o==n&&(M=-M);let D=.5*(x+_)-M*(w-S),z=.5*(S+w)+M*(_-x),P=Math.atan2(S-z,x-D),N=Math.atan2(w-z,_-D)-P;N<0&&o===1?N+=Cl:N>0&&o===0&&(N-=Cl);let H=Math.ceil(Math.abs(N/(nd+.001))),T=[];for(let O=0;O<H;++O){let L=P+O*N/H,q=P+(O+1)*N/H;T[O]=[D,z,L,q,r,i,f,h]}return wE[u]=T}function sce(e){let t=zB.call(e);if(SE[t])return SE[t];var r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];let c=u*s,f=-l*a,h=l*s,p=u*a,d=Math.cos(n),m=Math.sin(n),g=Math.cos(o),v=Math.sin(o),b=.5*(o-n),y=Math.sin(b*.5),x=8/3*y*y/Math.sin(b),S=r+d-x*m,_=i+m+x*d,w=r+g,k=i+v,A=w+x*v,M=k-x*g;return SE[t]=[c*S+f*_,h*S+p*_,c*A+f*M,h*A+p*M,c*w+f*k,h*w+p*k]}var Ms=["l",0,0,0,0,0,0,0];function ace(e,t,r){let i=Ms[0]=e[0];if(i==="a"||i==="A")Ms[1]=t*e[1],Ms[2]=r*e[2],Ms[3]=e[3],Ms[4]=e[4],Ms[5]=e[5],Ms[6]=t*e[6],Ms[7]=r*e[7];else if(i==="h"||i==="H")Ms[1]=t*e[1];else if(i==="v"||i==="V")Ms[1]=r*e[1];else for(var n=1,o=e.length;n<o;++n)Ms[n]=(n%2==1?t:r)*e[n];return Ms}function vp(e,t,r,i,n,o){var s,a=null,l=0,u=0,c=0,f=0,h,p,d,m,g=0,v=0;r==null&&(r=0),i==null&&(i=0),n==null&&(n=1),o==null&&(o=n),e.beginPath&&e.beginPath();for(var b=0,y=t.length;b<y;++b){switch(s=t[b],(n!==1||o!==1)&&(s=ace(s,n,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+r,u+i);break;case"L":l=s[1],u=s[2],e.lineTo(l+r,u+i);break;case"h":l+=s[1],e.lineTo(l+r,u+i);break;case"H":l=s[1],e.lineTo(l+r,u+i);break;case"v":u+=s[1],e.lineTo(l+r,u+i);break;case"V":u=s[1],e.lineTo(l+r,u+i);break;case"m":l+=s[1],u+=s[2],g=l,v=u,e.moveTo(l+r,u+i);break;case"M":l=s[1],u=s[2],g=l,v=u,e.moveTo(l+r,u+i);break;case"c":h=l+s[5],p=u+s[6],c=l+s[3],f=u+s[4],e.bezierCurveTo(l+s[1]+r,u+s[2]+i,c+r,f+i,h+r,p+i),l=h,u=p;break;case"C":l=s[5],u=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+r,s[2]+i,c+r,f+i,l+r,u+i);break;case"s":h=l+s[3],p=u+s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+r,f+i,l+s[1]+r,u+s[2]+i,h+r,p+i),c=l+s[1],f=u+s[2],l=h,u=p;break;case"S":h=s[3],p=s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+r,f+i,s[1]+r,s[2]+i,h+r,p+i),l=h,u=p,c=s[1],f=s[2];break;case"q":h=l+s[3],p=u+s[4],c=l+s[1],f=u+s[2],e.quadraticCurveTo(c+r,f+i,h+r,p+i),l=h,u=p;break;case"Q":h=s[3],p=s[4],e.quadraticCurveTo(s[1]+r,s[2]+i,h+r,p+i),l=h,u=p,c=s[1],f=s[2];break;case"t":h=l+s[1],p=u+s[2],a[0].match(/[QqTt]/)===null?(c=l,f=u):a[0]==="t"?(c=2*l-d,f=2*u-m):a[0]==="q"&&(c=2*l-c,f=2*u-f),d=c,m=f,e.quadraticCurveTo(c+r,f+i,h+r,p+i),l=h,u=p,c=l+s[1],f=u+s[2];break;case"T":h=s[1],p=s[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+r,f+i,h+r,p+i),l=h,u=p;break;case"a":mB(e,l+r,u+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+r,s[7]+u+i]),l+=s[6],u+=s[7];break;case"A":mB(e,l+r,u+i,[s[1],s[2],s[3],s[4],s[5],s[6]+r,s[7]+i]),l=s[6],u=s[7];break;case"z":case"Z":l=g,u=v,e.closePath();break}a=s}}function mB(e,t,r,i){let n=oce(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,r);for(let o=0;o<n.length;++o){let s=sce(n[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}var gB=.5773502691896257,vB={circle:{draw:function(e,t){let r=Math.sqrt(t)/2;e.moveTo(r,0),e.arc(0,0,r,0,Cl)}},cross:{draw:function(e,t){var r=Math.sqrt(t)/2,i=r/2.5;e.moveTo(-r,-i),e.lineTo(-r,i),e.lineTo(-i,i),e.lineTo(-i,r),e.lineTo(i,r),e.lineTo(i,i),e.lineTo(r,i),e.lineTo(r,-i),e.lineTo(i,-i),e.lineTo(i,-r),e.lineTo(-i,-r),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){let r=Math.sqrt(t)/2;e.moveTo(-r,0),e.lineTo(0,-r),e.lineTo(r,0),e.lineTo(0,r),e.closePath()}},square:{draw:function(e,t){var r=Math.sqrt(t),i=-r/2;e.rect(i,i,r,r)}},arrow:{draw:function(e,t){var r=Math.sqrt(t)/2,i=r/7,n=r/2.5,o=r/8;e.moveTo(-i,r),e.lineTo(i,r),e.lineTo(i,-o),e.lineTo(n,-o),e.lineTo(0,-r),e.lineTo(-n,-o),e.lineTo(-i,-o),e.closePath()}},wedge:{draw:function(e,t){var r=Math.sqrt(t)/2,i=mp*r,n=i-r*gB,o=r/4;e.moveTo(0,-i-n),e.lineTo(-o,i-n),e.lineTo(o,i-n),e.closePath()}},triangle:{draw:function(e,t){var r=Math.sqrt(t)/2,i=mp*r,n=i-r*gB;e.moveTo(0,-i-n),e.lineTo(-r,i-n),e.lineTo(r,i-n),e.closePath()}},"triangle-up":{draw:function(e,t){var r=Math.sqrt(t)/2,i=mp*r;e.moveTo(0,-i),e.lineTo(-r,i),e.lineTo(r,i),e.closePath()}},"triangle-down":{draw:function(e,t){var r=Math.sqrt(t)/2,i=mp*r;e.moveTo(0,i),e.lineTo(-r,-i),e.lineTo(r,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var r=Math.sqrt(t)/2,i=mp*r;e.moveTo(i,0),e.lineTo(-i,-r),e.lineTo(-i,r),e.closePath()}},"triangle-left":{draw:function(e,t){var r=Math.sqrt(t)/2,i=mp*r;e.moveTo(-i,0),e.lineTo(i,-r),e.lineTo(i,r),e.closePath()}},stroke:{draw:function(e,t){let r=Math.sqrt(t)/2;e.moveTo(-r,0),e.lineTo(r,0)}}};function HB(e){return _e(vB,e)?vB[e]:lce(e)}var CE={};function lce(e){if(!_e(CE,e)){let t=ud(e);CE[e]={draw:function(r,i){vp(r,t,0,0,Math.sqrt(i)/2)}}}return CE[e]}var pf=.448084975506;function uce(e){return e.x}function cce(e){return e.y}function fce(e){return e.width}function hce(e){return e.height}function Lu(e){return typeof e=="function"?e:()=>+e}function p4(e,t,r){return Math.max(t,Math.min(e,r))}function UB(){var e=uce,t=cce,r=fce,i=hce,n=Lu(0),o=n,s=n,a=n,l=null;function u(c,f,h){var p,d=f??+e.call(this,c),m=h??+t.call(this,c),g=+r.call(this,c),v=+i.call(this,c),b=Math.min(g,v)/2,y=p4(+n.call(this,c),0,b),x=p4(+o.call(this,c),0,b),S=p4(+s.call(this,c),0,b),_=p4(+a.call(this,c),0,b);if(l||(l=p=qh()),y<=0&&x<=0&&S<=0&&_<=0)l.rect(d,m,g,v);else{var w=d+g,k=m+v;l.moveTo(d+y,m),l.lineTo(w-x,m),l.bezierCurveTo(w-pf*x,m,w,m+pf*x,w,m+x),l.lineTo(w,k-_),l.bezierCurveTo(w,k-pf*_,w-pf*_,k,w-_,k),l.lineTo(d+S,k),l.bezierCurveTo(d+pf*S,k,d,k-pf*S,d,k-S),l.lineTo(d,m+y),l.bezierCurveTo(d,m+pf*y,d+pf*y,m,d+y,m),l.closePath()}if(p)return l=null,p+""||null}return u.x=function(c){return arguments.length?(e=Lu(c),u):e},u.y=function(c){return arguments.length?(t=Lu(c),u):t},u.width=function(c){return arguments.length?(r=Lu(c),u):r},u.height=function(c){return arguments.length?(i=Lu(c),u):i},u.cornerRadius=function(c,f,h,p){return arguments.length?(n=Lu(c),o=f!=null?Lu(f):n,a=h!=null?Lu(h):n,s=p!=null?Lu(p):o,u):n},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function qB(){var e,t,r,i,n=null,o,s,a,l;function u(f,h,p){let d=p/2;if(o){var m=a-h,g=f-s;if(m||g){var v=Math.hypot(m,g),b=(m/=v)*l,y=(g/=v)*l,x=Math.atan2(g,m);n.moveTo(s-b,a-y),n.lineTo(f-m*d,h-g*d),n.arc(f,h,d,x-Math.PI,x),n.lineTo(s+b,a+y),n.arc(s,a,l,x,x+Math.PI)}else n.arc(f,h,d,0,Cl);n.closePath()}else o=1;s=f,a=h,l=d}function c(f){var h,p=f.length,d,m=!1,g;for(n==null&&(n=g=qh()),h=0;h<=p;++h)!(h<p&&i(d=f[h],h,f))===m&&(m=!m)&&(o=0),m&&u(+e(d,h,f),+t(d,h,f),+r(d,h,f));if(g)return n=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(r=f,c):r},c.defined=function(f){return arguments.length?(i=f,c):i},c.context=function(f){return arguments.length?(f==null?n=null:n=f,c):n},c}function Wv(e,t){return e??t}var Vv=e=>e.x||0,Gv=e=>e.y||0,dce=e=>e.width||0,pce=e=>e.height||0,mce=e=>(e.x||0)+(e.width||0),gce=e=>(e.y||0)+(e.height||0),vce=e=>e.startAngle||0,bce=e=>e.endAngle||0,yce=e=>e.padAngle||0,xce=e=>e.innerRadius||0,_ce=e=>e.outerRadius||0,wce=e=>e.cornerRadius||0,Sce=e=>Wv(e.cornerRadiusTopLeft,e.cornerRadius)||0,Cce=e=>Wv(e.cornerRadiusTopRight,e.cornerRadius)||0,kce=e=>Wv(e.cornerRadiusBottomRight,e.cornerRadius)||0,Ece=e=>Wv(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Ace=e=>Wv(e.size,64),Tce=e=>e.size||1,B4=e=>e.defined!==!1,Dce=e=>HB(e.shape||"circle"),Rce=dk().startAngle(vce).endAngle(bce).padAngle(yce).innerRadius(xce).outerRadius(_ce).cornerRadius(wce),Mce=A_().x(Vv).y1(Gv).y0(gce).defined(B4),Fce=A_().y(Gv).x1(Vv).x0(mce).defined(B4),Oce=tv().x(Vv).y(Gv).defined(B4),$ce=UB().x(Vv).y(Gv).width(dce).height(pce).cornerRadius(Sce,Cce,kce,Ece),Lce=T_().type(Dce).size(Ace),Pce=qB().x(Vv).y(Gv).defined(B4).size(Tce);function HE(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Ice(e,t){return Rce.context(e)(t)}function Nce(e,t){let r=t[0],i=r.interpolate||"linear";return(r.orient==="horizontal"?Fce:Mce).curve(zE(i,r.orient,r.tension)).context(e)(t)}function Bce(e,t){let r=t[0],i=r.interpolate||"linear";return Oce.curve(zE(i,r.orient,r.tension)).context(e)(t)}function _p(e,t,r,i){return $ce.context(e)(t,r,i)}function zce(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Hce(e,t){return Lce.context(e)(t)}function Uce(e,t){return Pce.context(e)(t)}var jB=1;function WB(){jB=1}function UE(e,t,r){var i=t.clip,n=e._defs,o=t.clip_id||(t.clip_id="clip"+jB++),s=n.clipping[o]||(n.clipping[o]={id:o});return Ke(i)?s.path=i(null):HE(r)?s.path=_p(null,r,0,0):(s.width=r.width||0,s.height=r.height||0),"url(#"+o+")"}function Nr(e){this.clear(),e&&this.union(e)}Nr.prototype={clone(){return new Nr(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,r,i){return r<e?(this.x2=e,this.x1=r):(this.x1=e,this.x2=r),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,r){let i=this.rotatedPoints(e,t,r);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,r){var{x1:i,y1:n,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+r*l,c=r-t*l-r*a;return[a*i-l*n+u,l*i+a*n+c,a*i-l*s+u,l*i+a*s+c,a*o-l*n+u,l*o+a*n+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Yv(e){this.mark=e,this.bounds=this.bounds||new Nr}function Xv(e){Yv.call(this,e),this.items=this.items||[]}xe(Xv,Yv);var C4=class{constructor(t){this._pending=0,this._loader=t||X0()}pending(){return this._pending}sanitizeURL(t){let r=this;return bB(r),r._loader.sanitize(t,{context:"href"}).then(i=>(Ov(r),i)).catch(()=>(Ov(r),null))}loadImage(t){let r=this,i=rN();return bB(r),r._loader.sanitize(t,{context:"image"}).then(n=>{let o=n.href;if(!o||!i)throw{url:o};let s=new i,a=_e(n,"crossOrigin")?n.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>Ov(r),s.onerror=()=>Ov(r),s.src=o,s}).catch(n=>(Ov(r),{complete:!1,width:0,height:0,src:n&&n.url||""}))}ready(){let t=this;return new Promise(r=>{function i(n){t.pending()?setTimeout(()=>{i(!0)},10):r(n)}i(!1)})}};function bB(e){e._pending+=1}function Ov(e){e._pending-=1}function kl(e,t,r){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){let i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(r?qce(t,i):0))}return e}function qce(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}var jce=Cl-1e-8,z4,m4,g4,ad,DE,v4,RE,ME,mf=(e,t)=>z4.add(e,t),b4=(e,t)=>mf(m4=e,g4=t),yB=e=>mf(e,z4.y1),xB=e=>mf(z4.x1,e),od=(e,t)=>DE*e+RE*t,sd=(e,t)=>v4*e+ME*t,kE=(e,t)=>mf(od(e,t),sd(e,t)),EE=(e,t)=>b4(od(e,t),sd(e,t));function Kv(e,t){return z4=e,t?(ad=t*yf,DE=ME=Math.cos(ad),v4=Math.sin(ad),RE=-v4):(DE=ME=1,ad=v4=RE=0),Wce}var Wce={beginPath(){},closePath(){},moveTo:EE,lineTo:EE,rect(e,t,r,i){ad?(kE(e+r,t),kE(e+r,t+i),kE(e,t+i),EE(e,t)):(mf(e+r,t+i),b4(e,t))},quadraticCurveTo(e,t,r,i){let n=od(e,t),o=sd(e,t),s=od(r,i),a=sd(r,i);_B(m4,n,s,yB),_B(g4,o,a,xB),b4(s,a)},bezierCurveTo(e,t,r,i,n,o){let s=od(e,t),a=sd(e,t),l=od(r,i),u=sd(r,i),c=od(n,o),f=sd(n,o);wB(m4,s,l,c,yB),wB(g4,a,u,f,xB),b4(c,f)},arc(e,t,r,i,n,o){if(i+=ad,n+=ad,m4=r*Math.cos(n)+e,g4=r*Math.sin(n)+t,Math.abs(n-i)>jce)mf(e-r,t-r),mf(e+r,t+r);else{let s=u=>mf(r*Math.cos(u)+e,r*Math.sin(u)+t),a,l;if(s(i),s(n),n!==i)if(i=i%Cl,i<0&&(i+=Cl),n=n%Cl,n<0&&(n+=Cl),n<i&&(o=!o,a=i,i=n,n=a),o)for(n-=Cl,a=i-i%nd,l=0;l<4&&a>n;++l,a-=nd)s(a);else for(a=i-i%nd+nd,l=0;l<4&&a<n;++l,a=a+nd)s(a)}}};function _B(e,t,r,i){let n=(e-t)/(e+r-2*t);0<n&&n<1&&i(e+(t-e)*n)}function wB(e,t,r,i,n){let o=i-e+3*t-3*r,s=e+r-2*t,a=e-t,l=0,u=0,c;Math.abs(o)>nce?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&n(SB(l,e,t,r,i)),0<u&&u<1&&n(SB(u,e,t,r,i))}function SB(e,t,r,i,n){let o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*r+3*o*a*i+a*e*n}var bf=(bf=Ts(1,1))?bf.getContext("2d"):null,FE=new Nr;function qE(e){return function(t,r){if(!bf)return!0;e(bf,t),FE.clear().union(t.bounds).intersect(r).round();let{x1:i,y1:n,x2:o,y2:s}=FE;for(let a=n;a<=s;++a)for(let l=i;l<=o;++l)if(bf.isPointInPath(l,a))return!0;return!1}}function jE(e,t){return t.contains(e.x||0,e.y||0)}function VB(e,t){let r=e.x||0,i=e.y||0,n=e.width||0,o=e.height||0;return t.intersects(FE.set(r,i,r+n,i+o))}function GB(e,t){let r=e.x||0,i=e.y||0,n=e.x2!=null?e.x2:r,o=e.y2!=null?e.y2:i;return gp(t,r,i,n,o)}function gp(e,t,r,i,n){let{x1:o,y1:s,x2:a,y2:l}=e,u=i-t,c=n-r,f=0,h=1,p,d,m,g;for(g=0;g<4;++g){if(g===0&&(p=-u,d=-(o-t)),g===1&&(p=u,d=a-t),g===2&&(p=-c,d=-(s-r)),g===3&&(p=c,d=l-r),Math.abs(p)<1e-10&&d<0)return!1;if(m=d/p,p<0){if(m>h)return!1;m>f&&(f=m)}else if(p>0){if(m<f)return!1;m<h&&(h=m)}}return!0}function bp(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ga(e,t){return e??t}function CB(e,t){let r=t.length;for(let i=0;i<r;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Vce(e,t,r){let i=r.width(),n=r.height(),o;if(t.gradient==="radial")o=e.createRadialGradient(r.x1+ga(t.x1,.5)*i,r.y1+ga(t.y1,.5)*n,Math.max(i,n)*ga(t.r1,0),r.x1+ga(t.x2,.5)*i,r.y1+ga(t.y2,.5)*n,Math.max(i,n)*ga(t.r2,.5));else{let s=ga(t.x1,0),a=ga(t.y1,0),l=ga(t.x2,1),u=ga(t.y2,0);if(s===l||a===u||i===n)o=e.createLinearGradient(r.x1+s*i,r.y1+a*n,r.x1+l*i,r.y1+u*n);else{let c=Ts(Math.ceil(i),Math.ceil(n)),f=c.getContext("2d");return f.scale(i,n),f.fillStyle=CB(f.createLinearGradient(s,a,l,u),t.stops),f.fillRect(0,0,i,n),e.createPattern(c,"no-repeat")}}return CB(o,t.stops)}function YB(e,t,r){return NE(r)?Vce(e,r,t.bounds):r}function k4(e,t,r){return r*=t.fillOpacity==null?1:t.fillOpacity,r>0?(e.globalAlpha=r,e.fillStyle=YB(e,t,t.fill),!0):!1}var Gce=[];function yp(e,t,r){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(r*=t.strokeOpacity==null?1:t.strokeOpacity,r>0?(e.globalAlpha=r,e.strokeStyle=YB(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Gce),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Yce(e,t){return e.zindex-t.zindex||e.index-t.index}function WE(e){if(!e.zdirty)return e.zitems;var t=e.items,r=[],i,n,o;for(n=0,o=t.length;n<o;++n)i=t[n],i.index=n,i.zindex&&r.push(i);return e.zdirty=!1,e.zitems=r.sort(Yce)}function ba(e,t){var r=e.items,i,n;if(!r||!r.length)return;let o=WE(e);if(o&&o.length){for(i=0,n=r.length;i<n;++i)r[i].zindex||t(r[i]);r=o}for(i=0,n=r.length;i<n;++i)t(r[i])}function E4(e,t){var r=e.items,i,n;if(!r||!r.length)return null;let o=WE(e);for(o&&o.length&&(r=o),n=r.length;--n>=0;)if(i=t(r[n]))return i;if(r===o){for(r=e.items,n=r.length;--n>=0;)if(!r[n].zindex&&(i=t(r[n])))return i}return null}function VE(e){return function(t,r,i){ba(r,n=>{(!i||i.intersects(n.bounds))&&XB(e,t,n,n)})}}function Xce(e){return function(t,r,i){r.items.length&&(!i||i.intersects(r.bounds))&&XB(e,t,r.items[0],r.items)}}function XB(e,t,r,i){var n=r.opacity==null?1:r.opacity;n!==0&&(e(t,i)||(bp(t,r),r.fill&&k4(t,r,n)&&t.fill(),r.stroke&&yp(t,r,n)&&t.stroke()))}function H4(e){return e=e||gi,function(t,r,i,n,o,s){return i*=t.pixelRatio,n*=t.pixelRatio,E4(r,a=>{let l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,i,n,o,s))return a})}}function Zv(e,t){return function(r,i,n,o){var s=Array.isArray(i)?i[0]:i,a=t??s.fill,l=s.stroke&&r.isPointInStroke,u,c;return l&&(u=s.strokeWidth,c=s.strokeCap,r.lineWidth=u??1,r.lineCap=c??"butt"),e(r,i)?!1:a&&r.isPointInPath(n,o)||l&&r.isPointInStroke(n,o)}}function GE(e){return H4(Zv(e))}function ld(e,t){return"translate("+e+","+t+")"}function YE(e){return"rotate("+e+")"}function Kce(e,t){return"scale("+e+","+t+")"}function KB(e){return ld(e.x||0,e.y||0)}function Zce(e){return ld(e.x||0,e.y||0)+(e.angle?" "+YE(e.angle):"")}function Jce(e){return ld(e.x||0,e.y||0)+(e.angle?" "+YE(e.angle):"")+(e.scaleX||e.scaleY?" "+Kce(e.scaleX||1,e.scaleY||1):"")}function XE(e,t,r){function i(s,a){s("transform",Zce(a)),s("d",t(null,a))}function n(s,a){return t(Kv(s,a.angle),a),kl(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=yf),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:i,bound:n,draw:VE(o),pick:GE(o),isect:r||qE(o)}}var Qce=XE("arc",Ice);function efe(e,t){for(var r=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",n=e.length,o=1/0,s,a;--n>=0;)e[n].defined!==!1&&(a=Math.abs(e[n][i]-r),a<o&&(o=a,s=e[n]));return s}function tfe(e,t){for(var r=Math.pow(e[0].strokeWidth||1,2),i=e.length,n,o,s;--i>=0;)if(e[i].defined!==!1&&(n=e[i].x-t[0],o=e[i].y-t[1],s=n*n+o*o,s<r))return e[i];return null}function rfe(e,t){for(var r=e.length,i,n,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],n=e[r].y-t[1],o=i*i+n*n,i=e[r].size||1,o<i*i))return e[r];return null}function KE(e,t,r){function i(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function n(l,u){var c=u.items;return c.length===0?l:(t(Kv(l),c),kl(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}let s=Zv(o);function a(l,u,c,f,h,p){var d=u.items,m=u.bounds;return!d||!d.length||m&&!m.contains(h,p)?null:(c*=l.pixelRatio,f*=l.pixelRatio,s(l,d,c,f)?d[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:n,draw:Xce(o),pick:a,isect:jE,tip:r}}var ife=KE("area",Nce,efe);function nfe(e,t){var r=t.clip;e.save(),Ke(r)?(e.beginPath(),r(e),e.clip()):ZB(e,t.group)}function ZB(e,t){e.beginPath(),HE(t)?_p(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function JB(e){let t=ga(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function ofe(e,t){e("transform",KB(t))}function QB(e,t){let r=JB(t);e("d",_p(null,t,r,r))}function sfe(e,t){e("class","background"),e("aria-hidden",!0),QB(e,t)}function afe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?QB(e,t):e("d","")}function lfe(e,t,r){let i=t.clip?UE(r,t,t):null;e("clip-path",i)}function ufe(e,t){if(!t.clip&&t.items){let r=t.items,i=r.length;for(let n=0;n<i;++n)e.union(r[n].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),kl(e,t),e.translate(t.x||0,t.y||0)}function Bv(e,t,r,i){let n=JB(t);e.beginPath(),_p(e,t,(r||0)+n,(i||0)+n)}var cfe=Zv(Bv),ffe=Zv(Bv,!1),hfe=Zv(Bv,!0);function dfe(e,t,r,i){ba(t,n=>{let o=n.x||0,s=n.y||0,a=n.strokeForeground,l=n.opacity==null?1:n.opacity;(n.stroke||n.fill)&&l&&(Bv(e,n,o,s),bp(e,n),n.fill&&k4(e,n,l)&&e.fill(),n.stroke&&!a&&yp(e,n,l)&&e.stroke()),e.save(),e.translate(o,s),n.clip&&ZB(e,n),r&&r.translate(-o,-s),ba(n,u=>{(u.marktype==="group"||i==null||i.includes(u.marktype))&&this.draw(e,u,r,i)}),r&&r.translate(o,s),e.restore(),a&&n.stroke&&l&&(Bv(e,n,o,s),bp(e,n),yp(e,n,l)&&e.stroke())})}function pfe(e,t,r,i,n,o){if(t.bounds&&!t.bounds.contains(n,o)||!t.items)return null;let s=r*e.pixelRatio,a=i*e.pixelRatio;return E4(t,l=>{let u,c,f,h=l.bounds;if(h&&!h.contains(n,o))return;c=l.x||0,f=l.y||0;let p=c+(l.width||0),d=f+(l.height||0),m=l.clip;if(m&&(n<c||n>p||o<f||o>d))return;if(e.save(),e.translate(c,f),c=n-c,f=o-f,m&&HE(l)&&!hfe(e,l,s,a))return e.restore(),null;let g=l.strokeForeground,v=t.interactive!==!1;return v&&g&&l.stroke&&ffe(e,l,s,a)?(e.restore(),l):(u=E4(l,b=>mfe(b,c,f)?this.pick(b,r,i,c,f):null),!u&&v&&(l.fill||!g&&l.stroke)&&cfe(e,l,s,a)&&(u=l),e.restore(),u||null)})}function mfe(e,t,r){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,r)}var gfe={type:"group",tag:"g",nested:!1,attr:ofe,bound:ufe,draw:dfe,pick:pfe,isect:VB,content:lfe,background:sfe,foreground:afe},zv={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function ZE(e,t){var r=e.image;return(!r||e.url&&e.url!==r.url)&&(r={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),r}function JE(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function QE(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function U4(e,t){return e==="center"?t/2:e==="right"?t:0}function q4(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function vfe(e,t,r){let i=ZE(t,r),n=JE(t,i),o=QE(t,i),s=(t.x||0)-U4(t.align,n),a=(t.y||0)-q4(t.baseline,o),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,zv["xmlns:xlink"],"xlink:href"),e("transform",ld(s,a)),e("width",n),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function bfe(e,t){let r=t.image,i=JE(t,r),n=QE(t,r),o=(t.x||0)-U4(t.align,i),s=(t.y||0)-q4(t.baseline,n);return e.set(o,s,o+i,s+n)}function yfe(e,t,r){ba(t,i=>{if(r&&!r.intersects(i.bounds))return;let n=ZE(i,this),o=JE(i,n),s=QE(i,n);if(o===0||s===0)return;let a=(i.x||0)-U4(i.align,o),l=(i.y||0)-q4(i.baseline,s),u,c,f,h;i.aspect!==!1&&(c=n.width/n.height,f=i.width/i.height,c===c&&f===f&&c!==f&&(f<c?(h=o/c,l+=(s-h)/2,s=h):(h=s*c,a+=(o-h)/2,o=h))),(n.complete||n.toDataURL)&&(bp(e,i),e.globalAlpha=(u=i.opacity)!=null?u:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(n,a,l,o,s))})}var xfe={type:"image",tag:"image",nested:!1,attr:vfe,bound:bfe,draw:yfe,pick:H4(),isect:gi,get:ZE,xOffset:U4,yOffset:q4},_fe=KE("line",Bce,tfe);function wfe(e,t){var r=t.scaleX||1,i=t.scaleY||1;(r!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Jce(t)),e("d",t.path)}function y4(e,t){var r=t.path;if(r==null)return!0;var i=t.x||0,n=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*yf,l=t.pathCache;(!l||l.path!==r)&&((t.pathCache=l=ud(r)).path=r),a&&e.rotate&&e.translate?(e.translate(i,n),e.rotate(a),vp(e,l,0,0,o,s),e.rotate(-a),e.translate(-i,-n)):vp(e,l,i,n,o,s)}function Sfe(e,t){return y4(Kv(e,t.angle),t)?e.set(0,0,0,0):kl(e,t,!0)}var Cfe={type:"path",tag:"path",nested:!1,attr:wfe,bound:Sfe,draw:VE(y4),pick:GE(y4),isect:qE(y4)};function kfe(e,t){e("d",_p(null,t))}function Efe(e,t){var r,i;return kl(e.set(r=t.x||0,i=t.y||0,r+t.width||0,i+t.height||0),t)}function kB(e,t){e.beginPath(),_p(e,t)}var Afe={type:"rect",tag:"path",nested:!1,attr:kfe,bound:Efe,draw:VE(kB),pick:GE(kB),isect:VB};function Tfe(e,t){e("transform",KB(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Dfe(e,t){var r,i;return kl(e.set(r=t.x||0,i=t.y||0,t.x2!=null?t.x2:r,t.y2!=null?t.y2:i),t)}function ez(e,t,r){var i,n,o,s;return t.stroke&&yp(e,t,r)?(i=t.x||0,n=t.y||0,o=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:n,e.beginPath(),e.moveTo(i,n),e.lineTo(o,s),!0):!1}function Rfe(e,t,r){ba(t,i=>{if(!(r&&!r.intersects(i.bounds))){var n=i.opacity==null?1:i.opacity;n&&ez(e,i,n)&&(bp(e,i),e.stroke())}})}function Mfe(e,t,r,i){return e.isPointInStroke?ez(e,t,1)&&e.isPointInStroke(r,i):!1}var Ffe={type:"rule",tag:"line",nested:!1,attr:Tfe,bound:Dfe,draw:Rfe,pick:H4(Mfe),isect:GB},Ofe=XE("shape",zce),$fe=XE("symbol",Hce,jE),EB=p8(),ko={height:El,measureWidth:e9,estimateWidth:A4,width:A4,canvas:tz};tz(!0);function tz(e){ko.width=e&&bf?e9:A4}function A4(e,t){return rz(_f(e,t),El(e))}function rz(e,t){return~~(.8*e.length*t)}function e9(e,t){return El(e)<=0||!(t=_f(e,t))?0:iz(t,W4(e))}function iz(e,t){let r=`(${t}) ${e}`,i=EB.get(r);return i===void 0&&(bf.font=t,i=bf.measureText(e).width,EB.set(r,i)),i}function El(e){return e.fontSize!=null?+e.fontSize||0:11}function xf(e){return e.lineHeight!=null?e.lineHeight:El(e)+2}function Lfe(e){return K(e)?e.length>1?e:e[0]:e}function Jv(e){return Lfe(e.lineBreak&&e.text&&!K(e.text)?e.text.split(e.lineBreak):e.text)}function j4(e){let t=Jv(e);return(K(t)?t.length-1:0)*xf(e)}function _f(e,t){let r=t==null?"":(t+"").trim();return e.limit>0&&r.length?Ife(e,r):r}function Pfe(e){if(ko.width===e9){let t=W4(e);return r=>iz(r,t)}else if(ko.width===A4){let t=El(e);return r=>rz(r,t)}else return t=>ko.width(e,t)}function Ife(e,t){var r=+e.limit,i=Pfe(e);if(i(t)<r)return t;var n=e.ellipsis||"\u2026",o=e.dir==="rtl",s=0,a=t.length,l;if(r-=i(n),o){for(;s<a;)l=s+a>>>1,i(t.slice(l))>r?s=l+1:a=l;return n+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),i(t.slice(0,l))<r?s=l:a=l-1;return t.slice(0,s)+n}}function Qv(e,t){var r=e.font;return(t&&r?String(r).replace(/"/g,"'"):r)||"sans-serif"}function W4(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+El(e)+"px "+Qv(e,t)}function t9(e){var t=e.baseline,r=El(e);return Math.round(t==="top"?.79*r:t==="middle"?.3*r:t==="bottom"?-.21*r:t==="line-top"?.29*r+.5*xf(e):t==="line-bottom"?.29*r-.5*xf(e):0)}var Nfe={left:"start",center:"middle",right:"end"},Pv=new Nr;function V4(e){var t=e.x||0,r=e.y||0,i=e.radius||0,n;return i&&(n=(e.theta||0)-nd,t+=i*Math.cos(n),r+=i*Math.sin(n)),Pv.x1=t,Pv.y1=r,Pv}function Bfe(e,t){var r=t.dx||0,i=(t.dy||0)+t9(t),n=V4(t),o=n.x1,s=n.y1,a=t.angle||0,l;e("text-anchor",Nfe[t.align]||"start"),a?(l=ld(o,s)+" "+YE(a),(r||i)&&(l+=" "+ld(r,i))):l=ld(o+r,s+i),e("transform",l)}function r9(e,t,r){var i=ko.height(t),n=t.align,o=V4(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+t9(t)-Math.round(.8*i),c=Jv(t),f;if(K(c)?(i+=xf(t)*(c.length-1),f=c.reduce((h,p)=>Math.max(h,ko.width(t,p)),0)):f=ko.width(t,c),n==="center"?l-=f/2:n==="right"&&(l-=f),e.set(l+=s,u+=a,l+f,u+i),t.angle&&!r)e.rotate(t.angle*yf,s,a);else if(r===2)return e.rotatedPoints(t.angle*yf,s,a);return e}function zfe(e,t,r){ba(t,i=>{var n=i.opacity==null?1:i.opacity,o,s,a,l,u,c,f;if(!(r&&!r.intersects(i.bounds)||n===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=W4(i),e.textAlign=i.align||"left",o=V4(i),s=o.x1,a=o.y1,i.angle&&(e.save(),e.translate(s,a),e.rotate(i.angle*yf),s=a=0),s+=i.dx||0,a+=(i.dy||0)+t9(i),c=Jv(i),bp(e,i),K(c))for(u=xf(i),l=0;l<c.length;++l)f=_f(i,c[l]),i.fill&&k4(e,i,n)&&e.fillText(f,s,a),i.stroke&&yp(e,i,n)&&e.strokeText(f,s,a),a+=u;else f=_f(i,c),i.fill&&k4(e,i,n)&&e.fillText(f,s,a),i.stroke&&yp(e,i,n)&&e.strokeText(f,s,a);i.angle&&e.restore()}})}function Hfe(e,t,r,i,n,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=V4(t),a=s.x1,l=s.y1,u=r9(Pv,t,1),c=-t.angle*yf,f=Math.cos(c),h=Math.sin(c),p=f*n-h*o+(a-f*a+h*l),d=h*n+f*o+(l-h*a-f*l);return u.contains(p,d)}function Ufe(e,t){let r=r9(Pv,e,2);return gp(t,r[0],r[1],r[2],r[3])||gp(t,r[0],r[1],r[4],r[5])||gp(t,r[4],r[5],r[6],r[7])||gp(t,r[2],r[3],r[6],r[7])}var qfe={type:"text",tag:"text",nested:!1,attr:Bfe,bound:r9,draw:zfe,pick:H4(Hfe),isect:Ufe},jfe=KE("trail",Uce,rfe),Qn={arc:Qce,area:ife,group:gfe,image:xfe,line:_fe,path:Cfe,rect:Afe,rule:Ffe,shape:Ofe,symbol:$fe,text:qfe,trail:jfe};function OE(e,t,r){var i=Qn[e.mark.marktype],n=t||i.bound;return i.nested&&(e=e.mark),n(e.bounds||(e.bounds=new Nr),e,r)}var AB={mark:null};function nz(e,t,r){var i=Qn[e.marktype],n=i.bound,o=e.items,s=o&&o.length,a,l,u,c;if(i.nested)return s?u=o[0]:(AB.mark=e,u=AB),c=OE(u,n,r),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Nr,s)for(a=0,l=o.length;a<l;++a)t.union(OE(o[a],n,r));return e.bounds=t}var Wfe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function oz(e,t){return JSON.stringify(e,Wfe,t)}function sz(e){let t=typeof e=="string"?JSON.parse(e):e;return az(t)}function az(e){var t=e.marktype,r=e.items,i,n,o;if(r)for(n=0,o=r.length;n<o;++n)i=t?"mark":"group",r[n][i]=e,r[n].zindex&&(r[n][i].zdirty=!0),(t||i)==="group"&&az(r[n]);return t&&nz(e),e}var Hv=class{constructor(t){arguments.length?this.root=sz(t):(this.root=TB({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Xv(this.root)])}toJSON(t){return oz(this.root,t||0)}mark(t,r,i){r=r||this.root.items[0];let n=TB(t,r);return r.items[i]=n,n.zindex&&(n.group.zdirty=!0),n}};function TB(e,t){let r={bounds:new Nr,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(r.aria=e.aria),e.description&&(r.description=e.description),r}function gf(e,t,r){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?r?e.createElementNS(r,t):e.createElement(t):null}function i9(e,t){t=t.toLowerCase();for(var r=e.childNodes,i=0,n=r.length;i<n;++i)if(r[i].tagName.toLowerCase()===t)return r[i]}function yi(e,t,r,i){var n=e.childNodes[t],o;return(!n||n.tagName.toLowerCase()!==r.toLowerCase())&&(o=n||null,n=gf(e.ownerDocument,r,i),e.insertBefore(n,o)),n}function Fs(e,t){for(var r=e.childNodes,i=r.length;i>t;)e.removeChild(r[--i]);return e}function lz(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function eb(e,t){let r=t.getBoundingClientRect();return[e.clientX-r.left-(t.clientLeft||0),e.clientY-r.top-(t.clientTop||0)]}function Vfe(e,t,r,i){var n=e&&e.mark,o,s;if(n&&(o=Qn[n.marktype]).tip){for(s=eb(t,r),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(n.items,s)}return e}var Uv=class{constructor(t,r){this._active=null,this._handlers={},this._loader=t||X0(),this._tooltip=r||Gfe}initialize(t,r,i){return this._el=t,this._obj=i||null,this.origin(r)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,r,i){for(let n=t?t.length:0;--n>=0;)if(t[n].type===r&&(!i||t[n].handler===i))return n;return-1}handlers(t){let r=this._handlers,i=[];if(t)i.push(...r[this.eventName(t)]);else for(let n in r)i.push(...r[n]);return i}eventName(t){let r=t.indexOf(".");return r<0?t:t.slice(0,r)}handleHref(t,r,i){this._loader.sanitize(i,{context:"href"}).then(n=>{let o=new MouseEvent(t.type,t),s=gf(null,"a");for(let a in n)s.setAttribute(a,n[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,r,i){if(r&&r.tooltip!=null){r=Vfe(r,t,this.canvas(),this._origin);let n=i&&r&&r.tooltip||null;this._tooltip.call(this._obj,this,t,r,n)}}getItemBoundingClientRect(t){let r=this.canvas();if(!r)return;let i=r.getBoundingClientRect(),n=this._origin,o=t.bounds,s=o.width(),a=o.height(),l=o.x1+n[0]+i.left,u=o.y1+n[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function Gfe(e,t,r,i){e.element().setAttribute("title",i||"")}var cd=class{constructor(t){this._el=null,this._bgcolor=null,this._loader=new C4(t)}initialize(t,r,i,n,o){return this._el=t,this.resize(r,i,n,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,r,i,n){return this._width=t,this._height=r,this._origin=i||[0,0],this._scale=n||1,this}dirty(){}render(t,r){let i=this;return i._call=function(){i._render(t,r)},i._call(),i._call=null,i}_render(){}renderAsync(t,r){let i=this.render(t,r);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,r){var i=this,n=i._loader[t](r);if(!i._ready){let o=i._call;i._ready=i._loader.ready().then(s=>{s&&o(),i._ready=null})}return n}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}},Yfe="keydown",Xfe="keypress",Kfe="keyup",uz="dragenter",x4="dragleave",cz="dragover",$E="pointerdown",Zfe="pointerup",T4="pointermove",_4="pointerout",fz="pointerover",LE="mousedown",Jfe="mouseup",hz="mousemove",D4="mouseout",dz="mouseover",R4="click",Qfe="dblclick",ehe="wheel",pz="mousewheel",M4="touchstart",F4="touchmove",O4="touchend",the=[Yfe,Xfe,Kfe,uz,x4,cz,$E,Zfe,T4,_4,fz,LE,Jfe,hz,D4,dz,R4,Qfe,ehe,pz,M4,F4,O4],PE=T4,Iv=D4,IE=R4,wf=class extends Uv{constructor(t,r){super(t,r),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=the,this.pointermove=RB([T4,hz],[fz,dz],[_4,D4]),this.dragover=RB([cz],[uz],[x4]),this.pointerout=MB([_4,D4]),this.dragleave=MB([x4])}initialize(t,r,i){return this._canvas=t&&i9(t,"canvas"),[R4,LE,$E,T4,_4,x4].forEach(n=>DB(this,n)),super.initialize(t,r,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(pz,t)}pointerdown(t){this._down=this._active,this.fire($E,t)}mousedown(t){this._down=this._active,this.fire(LE,t)}click(t){this._down===this._active&&(this.fire(R4,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(M4,t,!0)}touchmove(t){this.fire(F4,t,!0)}touchend(t){this.fire(O4,t,!0),this._touch=null}fire(t,r,i){let n=i?this._touch:this._active,o=this._handlers[t];if(r.vegaType=t,t===IE&&n&&n.href?this.handleHref(r,n,n.href):(t===PE||t===Iv)&&this.handleTooltip(r,n,t!==Iv),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,r,n)}on(t,r){let i=this.eventName(t),n=this._handlers;return this._handlerIndex(n[i],t,r)<0&&(DB(this,t),(n[i]||(n[i]=[])).push({type:t,handler:r})),this}off(t,r){let i=this.eventName(t),n=this._handlers[i],o=this._handlerIndex(n,t,r);return o>=0&&n.splice(o,1),this}pickEvent(t){let r=eb(t,this._canvas),i=this._origin;return this.pick(this._scene,r[0],r[1],r[0]-i[0],r[1]-i[1])}pick(t,r,i,n,o){let s=this.context();return Qn[t.marktype].pick.call(this,s,t,r,i,n,o)}},rhe=e=>e===M4||e===F4||e===O4?[M4,F4,O4]:[e];function DB(e,t){rhe(t).forEach(r=>ihe(e,r))}function ihe(e,t){let r=e.canvas();r&&!e._events[t]&&(e._events[t]=1,r.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function Lv(e,t,r){t.forEach(i=>e.fire(i,r))}function RB(e,t,r){return function(i){let n=this._active,o=this.pickEvent(i);o===n?Lv(this,e,i):((!n||!n.exit)&&Lv(this,r,i),this._active=o,Lv(this,t,i),Lv(this,e,i))}}function MB(e){return function(t){Lv(this,e,t),this._active=null}}function nhe(){return typeof window<"u"&&window.devicePixelRatio||1}function ohe(e,t,r,i,n,o){let s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?nhe():n;e.width=t*l,e.height=r*l;for(let u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=r+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*i[0],l*i[1]),e}var xp=class extends cd{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Nr,this._tempb=new Nr}initialize(t,r,i,n,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Ts(1,1,this._options.type),t&&this._canvas&&(Fs(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,r,i,n,o)}resize(t,r,i,n){if(super.resize(t,r,i,n),this._canvas)ohe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let o=this._options.externalContext;o||te("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){let r=this._tempb.clear().union(t.bounds),i=t.mark.group;for(;i;)r.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(r)}_render(t,r){let i=this.context(),n=this._origin,o=this._width,s=this._height,a=this._dirty,l=she(n,o,s);i.save();let u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):ahe(i,l.intersect(a),n);return this.clear(-n[0],-n[1],o,s),this.draw(i,t,u,r),i.restore(),a.clear(),this}draw(t,r,i,n){if(r.marktype!=="group"&&n!=null&&!n.includes(r.marktype))return;let o=Qn[r.marktype];r.clip&&nfe(t,r),o.draw.call(this,t,r,i,n),r.clip&&t.restore()}clear(t,r,i,n){let o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,r,i,n),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,r,i,n))}},she=(e,t,r)=>new Nr().set(0,0,t,r).translate(-e[0],-e[1]);function ahe(e,t,r){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(r[0]%1),-(r[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}var $4=class extends Uv{constructor(t,r){super(t,r);let i=this;i._hrefHandler=AE(i,(n,o)=>{o&&o.href&&i.handleHref(n,o,o.href)}),i._tooltipHandler=AE(i,(n,o)=>{i.handleTooltip(n,o,n.type!==Iv)})}initialize(t,r,i){let n=this._svg;return n&&(n.removeEventListener(IE,this._hrefHandler),n.removeEventListener(PE,this._tooltipHandler),n.removeEventListener(Iv,this._tooltipHandler)),this._svg=n=t&&i9(t,"svg"),n&&(n.addEventListener(IE,this._hrefHandler),n.addEventListener(PE,this._tooltipHandler),n.addEventListener(Iv,this._tooltipHandler)),super.initialize(t,r,i)}canvas(){return this._svg}on(t,r){let i=this.eventName(t),n=this._handlers;if(this._handlerIndex(n[i],t,r)<0){let s={type:t,handler:r,listener:AE(this,r)};(n[i]||(n[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,r){let i=this.eventName(t),n=this._handlers[i],o=this._handlerIndex(n,t,r);return o>=0&&(this._svg&&this._svg.removeEventListener(i,n[o].listener),n.splice(o,1)),this}},AE=(e,t)=>r=>{let i=r.target.__data__;i=Array.isArray(i)?i[0]:i,r.vegaType=r.type,t.call(e._obj,r,i)},mz="aria-hidden",n9="aria-label",o9="role",s9="aria-roledescription",gz="graphics-object",a9="graphics-symbol",vz=(e,t,r)=>({[o9]:e,[s9]:t,[n9]:r||void 0}),lhe=ii(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),FB={axis:{desc:"axis",caption:fhe},legend:{desc:"legend",caption:hhe},"title-text":{desc:"title",caption:e=>`Title text '${$B(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${$B(e)}'`}},OB={ariaRole:o9,ariaRoleDescription:s9,description:n9};function bz(e,t){let r=t.aria===!1;if(e(mz,r||void 0),r||t.description==null)for(let i in OB)e(OB[i],void 0);else{let i=t.mark.marktype;e(n9,t.description),e(o9,t.ariaRole||(i==="group"?gz:a9)),e(s9,t.ariaRoleDescription||`${i} mark`)}}function yz(e){return e.aria===!1?{[mz]:!0}:lhe[e.role]?null:FB[e.role]?che(e,FB[e.role]):uhe(e)}function uhe(e){let t=e.marktype,r=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return vz(r?gz:a9,`${t} mark container`,e.description)}function che(e,t){try{let r=e.items[0],i=t.caption||(()=>"");return vz(t.role||a9,t.desc,r.description||i(r))}catch{return null}}function $B(e){return ve(e.text).join(" ")}function fhe(e){let t=e.datum,r=e.orient,i=t.title?xz(e):null,n=e.context,o=n.scales[t.scale].value,s=n.dataflow.locale(),a=o.type;return`${r==="left"||r==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${df(a)?"discrete":a} scale with ${_E(s,o,e)}`}function hhe(e){let t=e.datum,r=t.title?xz(e):null,i=`${t.type||""} legend`.trim(),n=t.scales,o=Object.keys(n),s=e.context,a=s.scales[n[o[0]]].value,l=s.dataflow.locale();return phe(i)+(r?` titled '${r}'`:"")+` for ${dhe(o)} with ${_E(l,a,e)}`}function xz(e){try{return ve(ct(e.items).items[0].text).join(" ")}catch{return null}}function dhe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+ct(e)}function phe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}var _z=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),mhe=e=>_z(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function l9(){let e="",t="",r="",i=[],n=()=>t=r="",o=l=>{t&&(e+=`${t}>${r}`,n()),i.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${mhe(u)}"`),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];for(let h of c)for(let p in h)s(p,h[p]);return a},close(){let l=i.pop();return t?e+=t+(r?`>${r}</${l}>`:"/>"):e+=`</${l}>`,n(),a},attr:s,text:l=>(r+=_z(l),a),toString:()=>e};return a}var wz=e=>Sz(l9(),e)+"";function Sz(e,t){if(e.open(t.tagName),t.hasAttributes()){let r=t.attributes,i=r.length;for(let n=0;n<i;++n)e.attr(r[n].name,r[n].value)}if(t.hasChildNodes()){let r=t.childNodes;for(let i of r)i.nodeType===3?e.text(i.nodeValue):Sz(e,i)}return e.close()}var L4={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},P4={blend:"mix-blend-mode"},Cz={fill:"none","stroke-miterlimit":10},$v=0,LB="http://www.w3.org/2000/xmlns/",bi=zv.xmlns,qv=class extends cd{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,r,i,n,o){return this._defs={},this._clearDefs(),t&&(this._svg=yi(t,0,"svg",bi),this._svg.setAttributeNS(LB,"xmlns",bi),this._svg.setAttributeNS(LB,"xmlns:xlink",zv["xmlns:xlink"]),this._svg.setAttribute("version",zv.version),this._svg.setAttribute("class","marks"),Fs(t,1),this._root=yi(this._svg,$v,"g",bi),vf(this._root,Cz),Fs(this._svg,$v+1)),this.background(this._bgcolor),super.initialize(t,r,i,n,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,r,i,n){return super.resize(t,r,i,n),this._svg&&(vf(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){let t=this._svg,r=this._bgcolor;if(!t)return null;let i;r&&(t.removeAttribute("style"),i=yi(t,$v,"rect",bi),vf(i,{width:this._width,height:this._height,fill:r}));let n=wz(t);return r&&(t.removeChild(i),this._svg.style.setProperty("background-color",r)),n}_render(t,r){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,r),Fs(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;let t=this._dirty;if(!t.length||!this._dirtyID)return!0;let r=++this._dirtyID,i,n,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(i=t[a],n=i.mark,n.marktype!==o&&(o=n.marktype,s=Qn[o]),n.zdirty&&n.dirty!==r&&(this._dirtyAll=!1,PB(i,r),n.items.forEach(c=>{c.dirty=r})),!n.zdirty){if(i.exit){s.nested&&n.items.length?(u=n.items[0],u._svg&&this._update(s,u._svg,u)):i._svg&&(u=i._svg.parentNode,u&&u.removeChild(i._svg)),i._svg=null;continue}i=s.nested?n.items[0]:i,i._update!==r&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,PB(i,r)):this._update(s,i._svg,i),i._update=r)}return!this._dirtyAll}mark(t,r,i,n){if(!this.isDirty(r))return r._svg;let o=this._svg,s=r.marktype,a=Qn[s],l=r.interactive===!1?"none":null,u=a.tag==="g",c=IB(r,t,i,"g",o);if(s!=="group"&&n!=null&&!n.includes(s))return Fs(c,0),r._svg;c.setAttribute("class",lz(r));let f=yz(r);for(let m in f)Jn(c,m,f[m]);u||Jn(c,"pointer-events",l),Jn(c,"clip-path",r.clip?UE(this,r,r.group):null);let h=null,p=0,d=m=>{let g=this.isDirty(m),v=IB(m,c,h,a.tag,o);g&&(this._update(a,v,m),u&&bhe(this,v,m,n)),h=v,++p};return a.nested?r.items.length&&d(r.items[0]):ba(r,d),Fs(c,p),c}_update(t,r,i){Pu=r,_n=r.__values__,bz(Nv,i),t.attr(Nv,i,this);let n=xhe[t.type];n&&n.call(this,t,r,i),Pu&&this.style(Pu,i)}style(t,r){if(r!=null){for(let i in L4){let n=i==="font"?Qv(r):r[i];if(n===_n[i])continue;let o=L4[i];n==null?t.removeAttribute(o):(NE(n)&&(n=BB(n,this._defs.gradient,kz())),t.setAttribute(o,n+"")),_n[i]=n}for(let i in P4)w4(t,P4[i],r[i])}}defs(){let t=this._svg,r=this._defs,i=r.el,n=0;for(let o in r.gradient)i||(r.el=i=yi(t,$v+1,"defs",bi)),n=ghe(i,r.gradient[o],n);for(let o in r.clipping)i||(r.el=i=yi(t,$v+1,"defs",bi)),n=vhe(i,r.clipping[o],n);i&&(n===0?(t.removeChild(i),r.el=null):Fs(i,n))}_clearDefs(){let t=this._defs;t.gradient={},t.clipping={}}};function PB(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function ghe(e,t,r){let i,n,o;if(t.gradient==="radial"){let s=yi(e,r++,"pattern",bi);vf(s,{id:S4+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=yi(s,0,"rect",bi),vf(s,{width:1,height:1,fill:`url(${kz()}#${t.id})`}),e=yi(e,r++,"radialGradient",bi),vf(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=yi(e,r++,"linearGradient",bi),vf(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,n=t.stops.length;i<n;++i)o=yi(e,i,"stop",bi),o.setAttribute("offset",t.stops[i].offset),o.setAttribute("stop-color",t.stops[i].color);return Fs(e,i),r}function vhe(e,t,r){let i;return e=yi(e,r,"clipPath",bi),e.setAttribute("id",t.id),t.path?(i=yi(e,0,"path",bi),i.setAttribute("d",t.path)):(i=yi(e,0,"rect",bi),vf(i,{x:0,y:0,width:t.width,height:t.height})),Fs(e,1),r+1}function bhe(e,t,r,i){t=t.lastChild.previousSibling;let n,o=0;ba(r,s=>{n=e.mark(t,s,n,i),++o}),Fs(t,1+o)}function IB(e,t,r,i,n){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=gf(s,i,bi),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},i==="g"))){let a=gf(s,"path",bi);o.appendChild(a),a.__data__=e;let l=gf(s,"g",bi);o.appendChild(l),l.__data__=e;let u=gf(s,"path",bi);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==n||yhe(o,r))&&t.insertBefore(o,r?r.nextSibling:t.firstChild),o}function yhe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}var Pu=null,_n=null,xhe={group(e,t,r){let i=Pu=t.childNodes[2];_n=i.__values__,e.foreground(Nv,r,this),_n=t.__values__,Pu=t.childNodes[1],e.content(Nv,r,this);let n=Pu=t.childNodes[0];e.background(Nv,r,this);let o=r.mark.interactive===!1?"none":null;if(o!==_n.events&&(Jn(i,"pointer-events",o),Jn(n,"pointer-events",o),_n.events=o),r.strokeForeground&&r.stroke){let s=r.fill;Jn(i,"display",null),this.style(n,r),Jn(n,"stroke",null),s&&(r.fill=null),_n=i.__values__,this.style(i,r),s&&(r.fill=s),Pu=null}else Jn(i,"display","none")},image(e,t,r){r.smooth===!1?(w4(t,"image-rendering","optimizeSpeed"),w4(t,"image-rendering","pixelated")):w4(t,"image-rendering",null)},text(e,t,r){let i=Jv(r),n,o,s,a;K(i)?(o=i.map(l=>_f(r,l)),n=o.join(`
`),n!==_n.text&&(Fs(t,0),s=t.ownerDocument,a=xf(r),o.forEach((l,u)=>{let c=gf(s,"tspan",bi);c.__data__=r,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),_n.text=n)):(o=_f(r,i),o!==_n.text&&(t.textContent=o,_n.text=o)),Jn(t,"font-family",Qv(r)),Jn(t,"font-size",El(r)+"px"),Jn(t,"font-style",r.fontStyle),Jn(t,"font-variant",r.fontVariant),Jn(t,"font-weight",r.fontWeight)}};function Nv(e,t,r){t!==_n[e]&&(r?_he(Pu,e,t,r):Jn(Pu,e,t),_n[e]=t)}function w4(e,t,r){r!==_n[t]&&(r==null?e.style.removeProperty(t):e.style.setProperty(t,r+""),_n[t]=r)}function vf(e,t){for(let r in t)Jn(e,r,t[r])}function Jn(e,t,r){r!=null?e.setAttribute(t,r):e.removeAttribute(t)}function _he(e,t,r,i){r!=null?e.setAttributeNS(i,t,r):e.removeAttributeNS(i,t)}function kz(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}var I4=class extends cd{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){let r=l9();r.open("svg",Ze({},zv,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&r.open("rect",{width:this._width,height:this._height,fill:i}).close(),r.open("g",Cz,{transform:"translate("+this._origin+")"}),this.mark(r,t),r.close(),this.defs(r),this._text=r.close()+"",this}mark(t,r){let i=Qn[r.marktype],n=i.tag,o=[bz,i.attr];t.open("g",{class:lz(r),"clip-path":r.clip?UE(this,r,r.group):null},yz(r),{"pointer-events":n!=="g"&&r.interactive===!1?"none":null});let s=a=>{let l=this.href(a);if(l&&t.open("a",l),t.open(n,this.attr(r,a,o,n!=="g"?n:null)),n==="text"){let u=Jv(a);if(K(u)){let c={x:0,dy:xf(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(_f(a,u[f])).close()}else t.text(_f(a,u))}else if(n==="g"){let u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(r,a,i.background,"bgrect")).close(),t.open("g",this.attr(r,a,i.content)),ba(a,h=>this.mark(t,h)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(r,a,i.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(r,a,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?r.items&&r.items.length&&s(r.items[0]):ba(r,s),t.close()}href(t){let r=t.href,i;if(r){if(i=this._hrefs&&this._hrefs[r])return i;this.sanitizeURL(r).then(n=>{n["xlink:href"]=n.href,n.href=null,(this._hrefs||(this._hrefs={}))[r]=n})}return null}attr(t,r,i,n){let o={},s=(a,l,u,c)=>{o[c||a]=l};return Array.isArray(i)?i.forEach(a=>a(s,r,this)):i(s,r,this),n&&whe(o,r,t,n,this._defs),o}defs(t){let r=this._defs.gradient,i=this._defs.clipping;if(Object.keys(r).length+Object.keys(i).length!==0){t.open("defs");for(let o in r){let s=r[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:S4+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(let o in i){let s=i[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}};function whe(e,t,r,i,n){let o;if(t==null||(i==="bgrect"&&r.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(r.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Qv(t),e["font-size"]=El(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(let s in L4){let a=t[s],l=L4[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(NE(a)&&(a=BB(a,n.gradient,"")),e[l]=a)}for(let s in P4){let a=t[s];a!=null&&(o=o||[],o.push(`${P4[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}var va={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function She(e){va.svgMarkTypes=e.svgMarkTypes??["text"],va.svgOnTop=e.svgOnTop??!0,va.debug=e.debug??!1}var jv=class extends cd{constructor(t){super(t),this._svgRenderer=new qv(t),this._canvasRenderer=new xp(t)}initialize(t,r,i,n,o){this._root_el=yi(t,0,"div");let s=yi(this._root_el,0,"div"),a=yi(this._root_el,1,"div");return this._root_el.style.position="relative",va.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=va.svgOnTop?a:s,this._canvasEl=va.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,r,i,n,o),this._svgRenderer.initialize(this._svgEl,r,i,n,o),super.initialize(t,r,i,n,o)}dirty(t){return va.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,r){let n=(r??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!va.svgMarkTypes.includes(o));this._svgRenderer.render(t,va.svgMarkTypes),this._canvasRenderer.render(t,n)}resize(t,r,i,n){return super.resize(t,r,i,n),this._svgRenderer.resize(t,r,i,n),this._canvasRenderer.resize(t,r,i,n),this}background(t){return va.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}},N4=class extends wf{constructor(t,r){super(t,r)}initialize(t,r,i){let n=yi(yi(t,0,"div"),va.svgOnTop?0:1,"div");return super.initialize(n,r,i)}},Ez="canvas",Az="hybrid",Tz="png",Dz="svg",Rz="none",Iu={Canvas:Ez,PNG:Tz,SVG:Dz,Hybrid:Az,None:Rz},fd={};fd[Ez]=fd[Tz]={renderer:xp,headless:xp,handler:wf};fd[Dz]={renderer:qv,headless:I4,handler:$4};fd[Az]={renderer:jv,headless:jv,handler:N4};fd[Rz]={};function tb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(fd[e]=t,this):fd[e]}function u9(e,t,r){let i=[],n=new Nr().union(t),o=e.marktype;return o?Mz(e,n,r,i):o==="group"?Fz(e,n,r,i):te("Intersect scene must be mark node or group item.")}function Mz(e,t,r,i){if(Che(e,t,r)){let n=e.items,o=e.marktype,s=n.length,a=0;if(o==="group")for(;a<s;++a)Fz(n[a],t,r,i);else for(let l=Qn[o].isect;a<s;++a){let u=n[a];Oz(u,t,l)&&i.push(u)}}return i}function Che(e,t,r){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!r||r(e)))}function Fz(e,t,r,i){r&&r(e.mark)&&Oz(e,t,Qn.group.isect)&&i.push(e);let n=e.items,o=n&&n.length;if(o){let s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)Mz(n[l],t,r,i);t.translate(s,a)}return i}function Oz(e,t,r){let i=e.bounds;return t.encloses(i)||t.intersects(i)&&r(e,t)}var TE=new Nr;function c9(e){let t=e.clip;if(Ke(t))t(Kv(TE.clear()));else if(t)TE.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(TE)}var khe=1e-9;function f9(e,t,r){return e===t?!0:r==="path"?$z(e,t):e instanceof Date&&t instanceof Date?+e==+t:ut(e)&&ut(t)?Math.abs(e-t)<=khe:!e||!t||!me(e)&&!me(t)?e==t:Ehe(e,t)}function $z(e,t){return f9(ud(e),ud(t))}function Ehe(e,t){var r=Object.keys(e),i=Object.keys(t),n,o;if(r.length!==i.length)return!1;for(r.sort(),i.sort(),o=r.length-1;o>=0;o--)if(r[o]!=i[o])return!1;for(o=r.length-1;o>=0;o--)if(n=r[o],!f9(e[n],t[n],n))return!1;return typeof e==typeof t}function Ahe(){WB(),Zue()}var Cp="top",ya="left",xa="right",kf="bottom",The="top-left",Dhe="top-right",Rhe="bottom-left",Mhe="bottom-right",p9="start",h9="middle",eo="end",Fhe="x",Ohe="y",Z4="group",m9="axis",g9="title",$he="frame",Lhe="scope",v9="legend",jz="row-header",Wz="row-footer",Vz="row-title",Gz="column-header",Yz="column-footer",Xz="column-title",Phe="padding",Ihe="symbol",Kz="fit",Zz="fit-x",Jz="fit-y",Nhe="pad",b9="none",G4="all",d9="each",y9="flush",Sf="column",Cf="row";function Qz(e){ee.call(this,null,e)}xe(Qz,ee,{transform(e,t){let r=t.dataflow,i=e.mark,n=i.marktype,o=Qn[n],s=o.bound,a=i.bounds,l;if(o.nested)i.items.length&&r.dirty(i.items[0]),a=Y4(i,s),i.items.forEach(u=>{u.bounds.clear().union(a)});else if(n===Z4||e.modified())switch(t.visit(t.MOD,u=>r.dirty(u)),a.clear(),i.items.forEach(u=>a.union(Y4(u,s))),i.role){case m9:case v9:case g9:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(Y4(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),r.dirty(u),a.union(Y4(u,s))}),l&&(a.clear(),i.items.forEach(u=>a.union(u.bounds)));return c9(i),t.modifies("bounds")}});function Y4(e,t,r){return t(e.bounds.clear(),e,r)}var Lz=":vega_identifier:";function x9(e){ee.call(this,0,e)}x9.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};xe(x9,ee,{transform(e,t){let r=Bhe(t.dataflow),i=e.as,n=r.value;return t.visit(t.ADD,o=>o[i]=o[i]||++n),r.set(this.value=n),t}});function Bhe(e){return e._signals[Lz]||(e._signals[Lz]=e.add(0))}function eH(e){ee.call(this,null,e)}xe(eH,ee,{transform(e,t){let r=this.value;r||(r=t.dataflow.scenegraph().mark(e.markdef,zhe(e),e.index),r.group.context=e.context,e.context.group||(e.context.group=r.group),r.source=this.source,r.clip=e.clip,r.interactive=e.interactive,this.value=r);let i=r.marktype===Z4?Xv:Yv;return t.visit(t.ADD,n=>i.call(n,r)),(e.modified("clip")||e.modified("interactive"))&&(r.clip=e.clip,r.interactive=!!e.interactive,r.zdirty=!0,t.reflow()),r.items=t.source,t}});function zhe(e){let t=e.groups,r=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&r?t.lookup(r):null}function tH(e){ee.call(this,null,e)}var Pz={parity:e=>e.filter((t,r)=>r%2?t.opacity=0:1),greedy:(e,t)=>{let r;return e.filter((i,n)=>!n||!rH(r.bounds,i.bounds,t)?(r=i,1):i.opacity=0)}},rH=(e,t,r)=>r>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Iz=(e,t)=>{for(var r=1,i=e.length,n=e[0].bounds,o;r<i;n=o,++r)if(rH(n,o=e[r].bounds,t))return!0},Hhe=e=>{let t=e.bounds;return t.width()>1&&t.height()>1},Uhe=(e,t,r)=>{var i=e.range(),n=new Nr;return t===Cp||t===kf?n.set(i[0],-1/0,i[1],1/0):n.set(-1/0,i[0],1/0,i[1]),n.expand(r||1),o=>n.encloses(o.bounds)},Nz=e=>(e.forEach(t=>t.opacity=1),e),Bz=(e,t)=>e.reflow(t.modified()).modifies("opacity");xe(tH,ee,{transform(e,t){let r=Pz[e.method]||Pz.parity,i=e.separation||0,n=t.materialize(t.SOURCE).source,o,s;if(!n||!n.length)return;if(!e.method)return e.modified("method")&&(Nz(n),t=Bz(t,e)),t;if(n=n.filter(Hhe),!n.length)return;if(e.sort&&(n=n.slice().sort(e.sort)),o=Nz(n),t=Bz(t,e),o.length>=3&&Iz(o,i)){do o=r(o,i);while(o.length>=3&&Iz(o,i));o.length<3&&!ct(n).opacity&&(o.length>1&&(ct(o).opacity=0),ct(n).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Uhe(e.boundScale,e.boundOrient,+e.boundTolerance),n.forEach(l=>{s(l)||(l.opacity=0)}));let a=o[0].mark.bounds.clear();return n.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function iH(e){ee.call(this,null,e)}xe(iH,ee,{transform(e,t){let r=t.dataflow;if(t.visit(t.ALL,i=>r.dirty(i)),t.fields&&t.fields.zindex){let i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});var wn=new Nr;function Sp(e,t,r){return e[t]===r?0:(e[t]=r,1)}function qhe(e){var t=e.items[0].orient;return t===ya||t===xa}function jhe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Whe(e,t,r,i){var n=t.items[0],o=n.datum,s=n.translate!=null?n.translate:.5,a=n.orient,l=jhe(o),u=n.range,c=n.offset,f=n.position,h=n.minExtent,p=n.maxExtent,d=o.title&&n.items[l[2]].items[0],m=n.titlePadding,g=n.bounds,v=d&&j4(d),b=0,y=0,x,S;switch(wn.clear().union(g),g.clear(),(x=l[0])>-1&&g.union(n.items[x].bounds),(x=l[1])>-1&&g.union(n.items[x].bounds),a){case Cp:b=f||0,y=-c,S=Math.max(h,Math.min(p,-g.y1)),g.add(0,-S).add(u,0),d&&X4(e,d,S,m,v,0,-1,g);break;case ya:b=-c,y=f||0,S=Math.max(h,Math.min(p,-g.x1)),g.add(-S,0).add(0,u),d&&X4(e,d,S,m,v,1,-1,g);break;case xa:b=r+c,y=f||0,S=Math.max(h,Math.min(p,g.x2)),g.add(0,0).add(S,u),d&&X4(e,d,S,m,v,1,1,g);break;case kf:b=f||0,y=i+c,S=Math.max(h,Math.min(p,g.y2)),g.add(0,0).add(u,S),d&&X4(e,d,S,m,0,0,1,g);break;default:b=n.x,y=n.y}return kl(g.translate(b,y),n),Sp(n,"x",b+s)|Sp(n,"y",y+s)&&(n.bounds=wn,e.dirty(n),n.bounds=g,e.dirty(n)),n.mark.bounds.clear().union(g)}function X4(e,t,r,i,n,o,s,a){let l=t.bounds;if(t.auto){let u=s*(r+n+i),c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}a.union(l)}var zz=(e,t)=>Math.floor(Math.min(e,t)),Hz=(e,t)=>Math.ceil(Math.max(e,t));function Vhe(e){var t=e.items,r=t.length,i=0,n,o;let s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<r;++i)if(n=t[i],o=n.items,n.marktype===Z4)switch(n.role){case m9:case v9:case g9:break;case jz:s.rowheaders.push(...o);break;case Wz:s.rowfooters.push(...o);break;case Gz:s.colheaders.push(...o);break;case Yz:s.colfooters.push(...o);break;case Vz:s.rowtitle=o[0];break;case Xz:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function Ghe(e){return new Nr().set(0,0,e.width||0,e.height||0)}function Yhe(e){let t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function _r(e,t,r){let i=me(e)?e[t]:e;return i??(r!==void 0?r:0)}function Uz(e){return e<0?Math.ceil(-e):0}function nH(e,t,r){var i=!r.nodirty,n=r.bounds===y9?Ghe:Yhe,o=wn.set(0,0,0,0),s=_r(r.align,Sf),a=_r(r.align,Cf),l=_r(r.padding,Sf),u=_r(r.padding,Cf),c=r.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),h=t.length,p=Array(h),d=Array(c),m=0,g=Array(h),v=Array(f),b=0,y=Array(h),x=Array(h),S=Array(h),_,w,k,A,M,D,z,P,I,N,H;for(w=0;w<c;++w)d[w]=0;for(w=0;w<f;++w)v[w]=0;for(w=0;w<h;++w)D=t[w],M=S[w]=n(D),D.x=D.x||0,y[w]=0,D.y=D.y||0,x[w]=0,k=w%c,A=~~(w/c),m=Math.max(m,z=Math.ceil(M.x2)),b=Math.max(b,P=Math.ceil(M.y2)),d[k]=Math.max(d[k],z),v[A]=Math.max(v[A],P),p[w]=l+Uz(M.x1),g[w]=u+Uz(M.y1),i&&e.dirty(t[w]);for(w=0;w<h;++w)w%c===0&&(p[w]=0),w<c&&(g[w]=0);if(s===d9)for(k=1;k<c;++k){for(H=0,w=k;w<h;w+=c)H<p[w]&&(H=p[w]);for(w=k;w<h;w+=c)p[w]=H+d[k-1]}else if(s===G4){for(H=0,w=0;w<h;++w)w%c&&H<p[w]&&(H=p[w]);for(w=0;w<h;++w)w%c&&(p[w]=H+m)}else for(s=!1,k=1;k<c;++k)for(w=k;w<h;w+=c)p[w]+=d[k-1];if(a===d9)for(A=1;A<f;++A){for(H=0,w=A*c,_=w+c;w<_;++w)H<g[w]&&(H=g[w]);for(w=A*c;w<_;++w)g[w]=H+v[A-1]}else if(a===G4){for(H=0,w=c;w<h;++w)H<g[w]&&(H=g[w]);for(w=c;w<h;++w)g[w]=H+b}else for(a=!1,A=1;A<f;++A)for(w=A*c,_=w+c;w<_;++w)g[w]+=v[A-1];for(I=0,w=0;w<h;++w)I=p[w]+(w%c?I:0),y[w]+=I-t[w].x;for(k=0;k<c;++k)for(N=0,w=k;w<h;w+=c)N+=g[w],x[w]+=N-t[w].y;if(s&&_r(r.center,Sf)&&f>1)for(w=0;w<h;++w)M=s===G4?m:d[w%c],I=M-S[w].x2-t[w].x-y[w],I>0&&(y[w]+=I/2);if(a&&_r(r.center,Cf)&&c!==1)for(w=0;w<h;++w)M=a===G4?b:v[~~(w/c)],N=M-S[w].y2-t[w].y-x[w],N>0&&(x[w]+=N/2);for(w=0;w<h;++w)o.union(S[w].translate(y[w],x[w]));switch(I=_r(r.anchor,Fhe),N=_r(r.anchor,Ohe),_r(r.anchor,Sf)){case eo:I-=o.width();break;case h9:I-=o.width()/2}switch(_r(r.anchor,Cf)){case eo:N-=o.height();break;case h9:N-=o.height()/2}for(I=Math.round(I),N=Math.round(N),o.clear(),w=0;w<h;++w)t[w].mark.bounds.clear();for(w=0;w<h;++w)D=t[w],D.x+=y[w]+=I,D.y+=x[w]+=N,o.union(D.mark.bounds.union(D.bounds.translate(y[w],x[w]))),i&&e.dirty(D);return o}function Xhe(e,t,r){var i=Vhe(t),n=i.marks,o=r.bounds===y9?Khe:Zhe,s=r.offset,a=r.columns||n.length,l=a<=0?1:Math.ceil(n.length/a),u=l*a,c,f,h,p,d,m,g;let v=nH(e,n,r);v.empty()&&v.set(0,0,0,0),i.rowheaders&&(m=_r(r.headerBand,Cf,null),c=K4(e,i.rowheaders,n,a,l,-_r(s,"rowHeader"),zz,0,o,"x1",0,a,1,m)),i.colheaders&&(m=_r(r.headerBand,Sf,null),f=K4(e,i.colheaders,n,a,a,-_r(s,"columnHeader"),zz,1,o,"y1",0,1,a,m)),i.rowfooters&&(m=_r(r.footerBand,Cf,null),h=K4(e,i.rowfooters,n,a,l,_r(s,"rowFooter"),Hz,0,o,"x2",a-1,a,1,m)),i.colfooters&&(m=_r(r.footerBand,Sf,null),p=K4(e,i.colfooters,n,a,a,_r(s,"columnFooter"),Hz,1,o,"y2",u-a,1,a,m)),i.rowtitle&&(d=_r(r.titleAnchor,Cf),g=_r(s,"rowTitle"),g=d===eo?h+g:c-g,m=_r(r.titleBand,Cf,.5),qz(e,i.rowtitle,g,0,v,m)),i.coltitle&&(d=_r(r.titleAnchor,Sf),g=_r(s,"columnTitle"),g=d===eo?p+g:f-g,m=_r(r.titleBand,Sf,.5),qz(e,i.coltitle,g,1,v,m))}function Khe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Zhe(e,t){return e.bounds[t]}function K4(e,t,r,i,n,o,s,a,l,u,c,f,h,p){var d=r.length,m=0,g=0,v,b,y,x,S,_,w,k,A;if(!d)return m;for(v=c;v<d;v+=f)r[v]&&(m=s(m,l(r[v],u)));if(!t.length)return m;for(t.length>n&&(e.warn("Grid headers exceed limit: "+n),t=t.slice(0,n)),m+=o,b=0,x=t.length;b<x;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(v=c,b=0,x=t.length;b<x;++b,v+=f){for(_=t[b],S=_.mark.bounds,y=v;y>=0&&(w=r[y])==null;y-=h);a?(k=p==null?w.x:Math.round(w.bounds.x1+p*w.bounds.width()),A=m):(k=m,A=p==null?w.y:Math.round(w.bounds.y1+p*w.bounds.height())),S.union(_.bounds.translate(k-(_.x||0),A-(_.y||0))),_.x=k,_.y=A,e.dirty(_),g=s(g,S[u])}return g}function qz(e,t,r,i,n,o){if(t){e.dirty(t);var s=r,a=r;i?s=Math.round(n.x1+o*n.width()):a=Math.round(n.y1+o*n.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function Jhe(e,t){let r=e[t]||{};return(i,n)=>r[i]!=null?r[i]:e[i]!=null?e[i]:n}function Qhe(e,t){let r=-1/0;return e.forEach(i=>{i.offset!=null&&(r=Math.max(r,i.offset))}),r>-1/0?r:t}function ede(e,t,r,i,n,o,s){let a=Jhe(r,t),l=Qhe(e,a("offset",0)),u=a("anchor",p9),c=u===eo?1:u===h9?.5:0,f={align:d9,bounds:a("bounds",y9),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case ya:f.anchor={x:Math.floor(i.x1)-l,column:eo,y:c*(s||i.height()+2*i.y1),row:u};break;case xa:f.anchor={x:Math.ceil(i.x2)+l,y:c*(s||i.height()+2*i.y1),row:u};break;case Cp:f.anchor={y:Math.floor(n.y1)-l,row:eo,x:c*(o||n.width()+2*n.x1),column:u};break;case kf:f.anchor={y:Math.ceil(n.y2)+l,x:c*(o||n.width()+2*n.x1),column:u};break;case The:f.anchor={x:l,y:l};break;case Dhe:f.anchor={x:o-l,y:l,column:eo};break;case Rhe:f.anchor={x:l,y:s-l,row:eo};break;case Mhe:f.anchor={x:o-l,y:s-l,column:eo,row:eo};break}return f}function tde(e,t){var r=t.items[0],i=r.datum,n=r.orient,o=r.bounds,s=r.x,a=r.y,l,u;return r._bounds?r._bounds.clear().union(o):r._bounds=o.clone(),o.clear(),ide(e,r,r.items[0].items[0]),o=rde(r,o),l=2*r.padding,u=2*r.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),i.type===Ihe&&nde(r.items[0].items[0].items[0].items),n!==b9&&(r.x=s=0,r.y=a=0),r.width=l,r.height=u,kl(o.set(s,a,s+l,a+u),r),r.mark.bounds.clear().union(o),r}function rde(e,t){return e.items.forEach(r=>t.union(r.bounds)),t.x1=e.padding,t.y1=e.padding,t}function ide(e,t,r){var i=t.padding,n=i-r.x,o=i-r.y;if(!t.datum.title)(n||o)&&rb(e,r,n,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=i-s.x,c=i-s.y;switch(s.orient){case ya:n+=Math.ceil(s.bounds.width())+l;break;case xa:case kf:break;default:o+=s.bounds.height()+l}switch((n||o)&&rb(e,r,n,o),s.orient){case ya:c+=wp(t,r,s,a,1,1);break;case xa:u+=wp(t,r,s,eo,0,0)+l,c+=wp(t,r,s,a,1,1);break;case kf:u+=wp(t,r,s,a,0,0),c+=wp(t,r,s,eo,-1,0,1)+l;break;default:u+=wp(t,r,s,a,0,0)}(u||c)&&rb(e,s,u,c),(u=Math.round(s.bounds.x1-i))<0&&(rb(e,r,-u,0),rb(e,s,-u,0))}}function wp(e,t,r,i,n,o,s){let a=e.datum.type!=="symbol",l=r.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,c=u.bounds[n?"y2":"x2"]-e.padding,f=l&&o?c:0,h=l&&o?0:c,p=n<=0?0:j4(r);return Math.round(i===p9?f:i===eo?h-p:.5*(c-p))}function rb(e,t,r,i){t.x+=r,t.y+=i,t.bounds.translate(r,i),t.mark.bounds.translate(r,i),e.dirty(t)}function nde(e){let t=e.reduce((r,i)=>(r[i.column]=Math.max(i.bounds.x2-i.x,r[i.column]||0),r),{});e.forEach(r=>{r.width=t[r.column],r.height=r.bounds.y2-r.y})}function ode(e,t,r,i,n){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,c=o.padding,f=o.items[0].items[0],h=o.items[1]&&o.items[1].items[0],p=a===ya||a===xa?i:r,d=0,m=0,g=0,v=0,b=0,y;if(s!==Z4?a===ya?(d=n.y2,p=n.y1):a===xa?(d=n.y1,p=n.y2):(d=n.x1,p=n.x2):a===ya&&(d=i,p=0),y=l===p9?d:l===eo?p:(d+p)/2,h&&h.text){switch(a){case Cp:case kf:b=f.bounds.height()+c;break;case ya:v=f.bounds.width()+c;break;case xa:v=-f.bounds.width()-c;break}wn.clear().union(h.bounds),wn.translate(v-(h.x||0),b-(h.y||0)),Sp(h,"x",v)|Sp(h,"y",b)&&(e.dirty(h),h.bounds.clear().union(wn),h.mark.bounds.clear().union(wn),e.dirty(h)),wn.clear().union(h.bounds)}else wn.clear();switch(wn.union(f.bounds),a){case Cp:m=y,g=n.y1-wn.height()-u;break;case ya:m=n.x1-wn.width()-u,g=y;break;case xa:m=n.x2+wn.width()+u,g=y;break;case kf:m=y,g=n.y2+u;break;default:m=o.x,g=o.y}return Sp(o,"x",m)|Sp(o,"y",g)&&(wn.translate(m,g),e.dirty(o),o.bounds.clear().union(wn),t.bounds.clear().union(wn),e.dirty(o)),o.bounds}function oH(e){ee.call(this,null,e)}xe(oH,ee,{transform(e,t){let r=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&Xhe(r,i,e.layout),ade(r,i,e)}),sde(e.mark.group)?t.reflow():t}});function sde(e){return e&&e.mark.role!=="legend-entry"}function ade(e,t,r){var i=t.items,n=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new Nr().set(0,0,n,o),a=s.clone(),l=s.clone(),u=[],c,f,h,p,d,m;for(d=0,m=i.length;d<m;++d)switch(f=i[d],f.role){case m9:p=qhe(f)?a:l,p.union(Whe(e,f,n,o));break;case g9:c=f;break;case v9:u.push(tde(e,f));break;case $he:case Lhe:case jz:case Wz:case Vz:case Gz:case Yz:case Xz:a.union(f.bounds),l.union(f.bounds);break;default:s.union(f.bounds)}if(u.length){let g={};u.forEach(v=>{h=v.orient||xa,h!==b9&&(g[h]||(g[h]=[])).push(v)});for(let v in g){let b=g[v];nH(e,b,ede(b,v,r.legends,a,l,n,o))}u.forEach(v=>{let b=v.bounds;if(b.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=b,e.dirty(v)),r.autosize&&(r.autosize.type===Kz||r.autosize.type===Zz||r.autosize.type===Jz))switch(v.orient){case ya:case xa:s.add(b.x1,0).add(b.x2,0);break;case Cp:case kf:s.add(0,b.y1).add(0,b.y2)}else s.union(b)})}s.union(a).union(l),c&&s.union(ode(e,c,n,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),lde(e,t,s,r)}function lde(e,t,r,i){let n=i.autosize||{},o=n.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-r.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-r.y1)),h=Math.max(0,Math.ceil(r.x2-l)),p=Math.max(0,Math.ceil(r.y2-c));if(n.contains===Phe){let d=e.padding();s-=d.left+d.right,a-=d.top+d.bottom}o===b9?(u=0,f=0,l=s,c=a):o===Kz?(l=Math.max(0,s-u-h),c=Math.max(0,a-f-p)):o===Zz?(l=Math.max(0,s-u-h),a=c+f+p):o===Jz?(s=l+u+h,c=Math.max(0,a-f-p)):o===Nhe&&(s=l+u+h,a=c+f+p),e._resizeView(s,a,l,c,[u,f],n.resize)}var E9={};pi(E9,{axisticks:()=>uH,datajoin:()=>cH,encode:()=>fH,legendentries:()=>hH,linkpath:()=>S9,pie:()=>C9,scale:()=>vH,sortitems:()=>yH,stack:()=>k9});function uH(e){ee.call(this,null,e)}xe(uH,ee,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var r=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),n=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=h4(o,s,e.minstep),l=e.format||bE(r,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?vE(o,e.values,a):d4(o,a);return n&&(i.rem=n),n=u.map((c,f)=>xt({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&n.length&&n.push(xt({index:-1,extra:{value:n[0].value},label:""})),i.source=n,i.add=n,this.value=n,i}});function cH(e){ee.call(this,null,e)}function ude(){return xt({})}function cde(e){let t=qc().test(r=>r.exit);return t.lookup=r=>t.get(e(r)),t}xe(cH,ee,{transform(e,t){var r=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),n=e.item||ude,o=e.key||qe,s=this.value;return K(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(o))&&te("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=cde(o)),t.visit(t.ADD,a=>{let l=o(a),u=s.get(l);u?u.exit?(s.empty--,i.add.push(u)):i.mod.push(u):(u=n(a),s.set(l,u),i.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{let l=o(a),u=s.get(l);u&&(u.datum=a,i.mod.push(u))}),t.visit(t.REM,a=>{let l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>r.cleanThreshold)&&r.runAfter(s.clean),i}});function fH(e){ee.call(this,null,e)}xe(fH,ee,{transform(e,t){var r=t.fork(t.ADD_REM),i=e.mod||!1,n=e.encoders,o=t.encode;if(K(o))if(r.changed()||o.every(f=>n[f]))o=o[0],r.encode=null;else return t.StopPropagation;var s=o==="enter",a=n.update||vu,l=n.enter||vu,u=n.exit||vu,c=(o&&!s?n[o]:a)||vu;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),a(f,e)}),r.modifies(l.output),r.modifies(a.output),c!==vu&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),r.modifies(c.output))),t.changed(t.REM)&&u!==vu&&(t.visit(t.REM,f=>{u(f,e)}),r.modifies(u.output)),s||c!==vu){let f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,h=>{let p=l(h,e)||i;(c(h,e)||p)&&r.mod.push(h)}),r.mod.length&&r.modifies(l.output)):t.visit(f,h=>{(c(h,e)||i)&&r.mod.push(h)}),r.mod.length&&r.modifies(c.output)}return r.changed()?r:t.StopPropagation}});function hH(e){ee.call(this,[],e)}xe(hH,ee,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var r=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),n=this.value,o=e.type||Fv,s=e.scale,a=+e.limit,l=h4(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===Fv,c=e.format||xE(r,s,l,o,e.formatSpecifier,e.formatType,u),f=e.values||yE(s,l),h,p,d,m,g;return n&&(i.rem=n),o===Fv?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),n=f.slice(0,a-1),g=!0):n=f,Ke(d=e.size)?(!e.values&&s(n[0])===0&&(n=n.slice(1)),m=n.reduce((v,b)=>Math.max(v,d(b,e)),0)):d=br(m=d||8),n=n.map((v,b)=>xt({index:b,label:c(v,b,n),value:v,offset:m,size:d(v,e)})),g&&(g=f[n.length],n.push(xt({index:n.length,label:`\u2026${f.length-n.length} entries`,value:g,offset:m,size:d(g,e)})))):o===cB?(h=s.domain(),p=f4(s,h[0],ct(h)),f.length<3&&!e.values&&h[0]!==ct(h)&&(f=[h[0],ct(h)]),n=f.map((v,b)=>xt({index:b,label:c(v,b,f),value:v,perc:p(v)}))):(d=f.length-1,p=dB(s),n=f.map((v,b)=>xt({index:b,label:c(v,b,f),value:v,perc:b?p(v):0,perc2:b===d?1:p(f[b+1])}))),i.source=n,i.add=n,this.value=n,i}});var fde=e=>e.source.x,hde=e=>e.source.y,dde=e=>e.target.x,pde=e=>e.target.y;function S9(e){ee.call(this,{},e)}S9.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};xe(S9,ee,{transform(e,t){var r=e.sourceX||fde,i=e.sourceY||hde,n=e.targetX||dde,o=e.targetY||pde,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=sH.get(l+"-"+a)||sH.get(l);return u||te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(r(c),i(c),n(c),o(c))}),t.reflow(e.modified()).modifies(s)}});var dH=(e,t,r,i)=>"M"+e+","+t+"L"+r+","+i,mde=(e,t,r,i)=>dH(t*Math.cos(e),t*Math.sin(e),i*Math.cos(r),i*Math.sin(r)),pH=(e,t,r,i)=>{var n=r-e,o=i-t,s=Math.hypot(n,o)/2,a=180*Math.atan2(o,n)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+r+","+i},gde=(e,t,r,i)=>pH(t*Math.cos(e),t*Math.sin(e),i*Math.cos(r),i*Math.sin(r)),mH=(e,t,r,i)=>{let n=r-e,o=i-t,s=.2*(n+o),a=.2*(o-n);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(r+a)+","+(i-s)+" "+r+","+i},vde=(e,t,r,i)=>mH(t*Math.cos(e),t*Math.sin(e),i*Math.cos(r),i*Math.sin(r)),bde=(e,t,r,i)=>"M"+e+","+t+"V"+i+"H"+r,yde=(e,t,r,i)=>"M"+e+","+t+"H"+r+"V"+i,xde=(e,t,r,i)=>{let n=Math.cos(e),o=Math.sin(e),s=Math.cos(r),a=Math.sin(r),l=Math.abs(r-e)>Math.PI?r<=e:r>e;return"M"+t*n+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+i*s+","+i*a},_de=(e,t,r,i)=>{let n=(e+r)/2;return"M"+e+","+t+"C"+n+","+t+" "+n+","+i+" "+r+","+i},wde=(e,t,r,i)=>{let n=(t+i)/2;return"M"+e+","+t+"C"+e+","+n+" "+r+","+n+" "+r+","+i},Sde=(e,t,r,i)=>{let n=Math.cos(e),o=Math.sin(e),s=Math.cos(r),a=Math.sin(r),l=(t+i)/2;return"M"+t*n+","+t*o+"C"+l*n+","+l*o+" "+l*s+","+l*a+" "+i*s+","+i*a},sH=qc({line:dH,"line-radial":mde,arc:pH,"arc-radial":gde,curve:mH,"curve-radial":vde,"orthogonal-horizontal":bde,"orthogonal-vertical":yde,"orthogonal-radial":xde,"diagonal-horizontal":_de,"diagonal-vertical":wde,"diagonal-radial":Sde});function C9(e){ee.call(this,null,e)}C9.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};xe(C9,ee,{transform(e,t){var r=e.as||["startAngle","endAngle"],i=r[0],n=r[1],o=e.field||ul,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,f=s,h=(a-s)/z0(u),p=Yr(c),d,m,g;for(e.sort&&p.sort((v,b)=>u[v]-u[b]),d=0;d<c;++d)g=u[p[d]],m=l[p[d]],m[i]=f,m[n]=f+=g*h;return this.value=u,t.reflow(e.modified()).modifies(r)}});var Cde=5;function kde(e){let t=e.type;return!e.bins&&(t===td||t===hp||t===dp)}function gH(e){return Dv(e)&&e!==ma}var Ede=ii(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function vH(e){ee.call(this,null,e),this.modified(!0)}xe(vH,ee,{transform(e,t){var r=t.dataflow,i=this.value,n=Ade(e);(!i||n!==i.type)&&(this.value=i=_t(n)());for(n in e)if(!Ede[n]){if(n==="padding"&&gH(i.type))continue;Ke(i[n])?i[n](e[n]):r.warn("Unsupported scale property: "+n)}return Ode(i,e,Fde(i,e,Dde(i,e,r))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Ade(e){var t=e.type,r="",i;return t===ma?ma+"-"+td:(Tde(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,r=i===2?ma+"-":i===3?rd+"-":""),(r+t||td).toLowerCase())}function Tde(e){let t=e.type;return Dv(t)&&t!==ff&&t!==hf&&(e.scheme||e.range&&e.range.length&&e.range.every(he))}function Dde(e,t,r){let i=Rde(e,t.domainRaw,r);if(i>-1)return i;var n=t.domain,o=e.type,s=t.zero||t.zero===void 0&&kde(e),a,l;if(!n)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(n=n.slice()).length-1||1,s&&(n[0]>0&&(n[0]=0),n[a]<0&&(n[a]=0)),t.domainMin!=null&&(n[0]=t.domainMin),t.domainMax!=null&&(n[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;let u=l>n[a]?a+1:l<n[0]?0:a;u!==a&&r.warn("Scale domainMid exceeds domain min or max.",l),n.splice(u,0,l)}return gH(o)&&t.padding&&n[0]!==ct(n)&&(n=Mde(o,n,t.range,t.padding,t.exponent,t.constant)),e.domain(bH(o,n,r)),o===o4&&e.unknown(t.domainImplicit?rp:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&h4(e,t.nice)||null),n.length}function Rde(e,t,r){return t?(e.domain(bH(e.type,t,r)),t.length):-1}function Mde(e,t,r,i,n,o){var s=Math.abs(ct(r)-r[0]),a=s/(s-2*i),l=e===wl?c1(t,null,a):e===dp?P0(t,null,a,.5):e===hp?P0(t,null,a,n||1):e===Cv?f1(t,null,a,o||1):u1(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function bH(e,t,r){if(pE(e)){var i=Math.abs(t.reduce((n,o)=>n+(o<0?-1:o>0?1:0),0));i!==t.length&&r.warn("Log scale domain includes zero: "+de(t))}return t}function Fde(e,t,r){let i=t.bins;if(i&&!K(i)){let n=e.domain(),o=n[0],s=ct(n),a=i.step,l=i.start==null?o:i.start,u=i.stop==null?s:i.stop;a||te("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),i=Yr(l,u+a/2,a)}return i?e.bins=i:e.bins&&delete e.bins,e.type===a4&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),r=i.length):e.bins=e.domain()),r}function Ode(e,t,r){var i=e.type,n=t.round||!1,o=t.range;if(t.rangeStep!=null)o=$de(i,t,r);else if(t.scheme&&(o=Lde(i,t,r),Ke(o))){if(e.interpolator)return e.interpolator(o);te(`Scale type ${i} does not support interpolating color schemes.`)}if(o&&mE(i))return e.interpolator(pp(w9(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(Rv(t.interpolate,t.interpolateGamma)):Ke(e.round)?e.round(n):Ke(e.rangeRound)&&e.interpolate(n?xl:yn),o&&e.range(w9(o,t.reverse))}function $de(e,t,r){e!==lE&&e!==s4&&te("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,n=e===s4?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Sv(r,n,i)]}function Lde(e,t,r){var i=t.schemeExtent,n,o;return K(t.scheme)?o=pp(t.scheme,t.interpolate,t.interpolateGamma):(n=t.scheme.toLowerCase(),o=Mv(n),o||te(`Unrecognized scheme name: ${t.scheme}`)),r=e===Ev?r+1:e===a4?r-1:e===ed||e===kv?+t.schemeCount||Cde:r,mE(e)?aH(o,i,t.reverse):Ke(o)?c4(aH(o,i),r):e===o4?o:o.slice(0,r)}function aH(e,t,r){return Ke(e)&&(t||r)?u4(e,w9(t||[0,1],r)):e}function w9(e,t){return t?e.slice().reverse():e}function yH(e){ee.call(this,null,e)}xe(yH,ee,{transform(e,t){let r=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return r&&t.source.sort(ml(e.sort)),this.modified(r),t}});var lH="zero",xH="center",_H="normalize",wH=["y0","y1"];function k9(e){ee.call(this,null,e)}k9.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:lH,values:[lH,xH,_H]},{name:"as",type:"string",array:!0,length:2,default:wH}]};xe(k9,ee,{transform(e,t){var r=e.as||wH,i=r[0],n=r[1],o=ml(e.sort),s=e.field||ul,a=e.offset===xH?Pde:e.offset===_H?Ide:Nde,l,u,c,f;for(l=Bde(t.source,e.groupby,o,s),u=0,c=l.length,f=l.max;u<c;++u)a(l[u],f,s,i,n);return t.reflow(e.modified()).modifies(r)}});function Pde(e,t,r,i,n){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[i]=o,l[n]=o+=Math.abs(r(l))}function Ide(e,t,r,i,n){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[i]=s,c[n]=s=o*(u+=Math.abs(r(c)))}function Nde(e,t,r,i,n){for(var o=0,s=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+r(c),u<0?(c[i]=s,c[n]=s+=u):(c[i]=o,c[n]=o+=u)}function Bde(e,t,r,i){var n=[],o=m=>m(c),s,a,l,u,c,f,h,p,d;if(t==null)n.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],f=t.map(o),h=s[f],h||(s[f]=h=[],n.push(h)),h.push(c);for(f=0,d=0,u=n.length;f<u;++f){for(h=n[f],a=0,p=0,l=h.length;a<l;++a)p+=Math.abs(i(h[a]));h.sum=p,p>d&&(d=p),r&&h.sort(r)}return n.max=d,n}var jA={};pi(jA,{contour:()=>PA,geojson:()=>NA,geopath:()=>BA,geopoint:()=>zA,geoshape:()=>HA,graticule:()=>UA,heatmap:()=>qA,isocontour:()=>$A,kde2d:()=>LA,projection:()=>FU});var $e=1e-6,hd=1e-12,lt=Math.PI,Qt=lt/2,kp=lt/4,Xr=lt*2,er=180/lt,nt=lt/180,it=Math.abs,Os=Math.atan,Br=Math.atan2,Fe=Math.cos,ib=Math.ceil,J4=Math.exp;var Q4=Math.hypot,dd=Math.log,ew=Math.pow,Me=Math.sin,Sn=Math.sign||function(e){return e>0?1:e<0?-1:0},tr=Math.sqrt,Ep=Math.tan;function tw(e){return e>1?0:e<-1?lt:Math.acos(e)}function pr(e){return e>1?Qt:e<-1?-Qt:Math.asin(e)}function mr(){}function rw(e,t){e&&CH.hasOwnProperty(e.type)&&CH[e.type](e,t)}var SH={Feature:function(e,t){rw(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,i=-1,n=r.length;++i<n;)rw(r[i].geometry,t)}},CH={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)e=r[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){A9(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)A9(r[i],t,0)},Polygon:function(e,t){kH(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)kH(r[i],t)},GeometryCollection:function(e,t){for(var r=e.geometries,i=-1,n=r.length;++i<n;)rw(r[i],t)}};function A9(e,t,r){var i=-1,n=e.length-r,o;for(t.lineStart();++i<n;)o=e[i],t.point(o[0],o[1],o[2]);t.lineEnd()}function kH(e,t){var r=-1,i=e.length;for(t.polygonStart();++r<i;)A9(e[r],t,1);t.polygonEnd()}function Eo(e,t){e&&SH.hasOwnProperty(e.type)?SH[e.type](e,t):rw(e,t)}var nb=new yr,iw=new yr,EH,AH,T9,D9,R9,_a={point:mr,lineStart:mr,lineEnd:mr,polygonStart:function(){nb=new yr,_a.lineStart=zde,_a.lineEnd=Hde},polygonEnd:function(){var e=+nb;iw.add(e<0?Xr+e:e),this.lineStart=this.lineEnd=this.point=mr},sphere:function(){iw.add(Xr)}};function zde(){_a.point=Ude}function Hde(){TH(EH,AH)}function Ude(e,t){_a.point=TH,EH=e,AH=t,e*=nt,t*=nt,T9=e,D9=Fe(t=t/2+kp),R9=Me(t)}function TH(e,t){e*=nt,t*=nt,t=t/2+kp;var r=e-T9,i=r>=0?1:-1,n=i*r,o=Fe(t),s=Me(t),a=R9*s,l=D9*o+a*Fe(n),u=a*i*Me(n);nb.add(Br(u,l)),T9=e,D9=o,R9=s}function M9(e){return iw=new yr,Eo(e,_a),iw*2}function pd(e){return[Br(e[1],e[0]),pr(e[2])]}function $s(e){var t=e[0],r=e[1],i=Fe(r);return[i*Fe(t),i*Me(t),Me(r)]}function ob(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Nu(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function nw(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function sb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function md(e){var t=tr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ar,Ao,zr,ts,gd,FH,OH,Ap,ab,Ef,zu,Bu={point:F9,lineStart:DH,lineEnd:RH,polygonStart:function(){Bu.point=LH,Bu.lineStart=qde,Bu.lineEnd=jde,ab=new yr,_a.polygonStart()},polygonEnd:function(){_a.polygonEnd(),Bu.point=F9,Bu.lineStart=DH,Bu.lineEnd=RH,nb<0?(Ar=-(zr=180),Ao=-(ts=90)):ab>$e?ts=90:ab<-$e&&(Ao=-90),zu[0]=Ar,zu[1]=zr},sphere:function(){Ar=-(zr=180),Ao=-(ts=90)}};function F9(e,t){Ef.push(zu=[Ar=e,zr=e]),t<Ao&&(Ao=t),t>ts&&(ts=t)}function $H(e,t){var r=$s([e*nt,t*nt]);if(Ap){var i=Nu(Ap,r),n=[i[1],-i[0],0],o=Nu(n,i);md(o),o=pd(o);var s=e-gd,a=s>0?1:-1,l=o[0]*er*a,u,c=it(s)>180;c^(a*gd<l&&l<a*e)?(u=o[1]*er,u>ts&&(ts=u)):(l=(l+360)%360-180,c^(a*gd<l&&l<a*e)?(u=-o[1]*er,u<Ao&&(Ao=u)):(t<Ao&&(Ao=t),t>ts&&(ts=t))),c?e<gd?es(Ar,e)>es(Ar,zr)&&(zr=e):es(e,zr)>es(Ar,zr)&&(Ar=e):zr>=Ar?(e<Ar&&(Ar=e),e>zr&&(zr=e)):e>gd?es(Ar,e)>es(Ar,zr)&&(zr=e):es(e,zr)>es(Ar,zr)&&(Ar=e)}else Ef.push(zu=[Ar=e,zr=e]);t<Ao&&(Ao=t),t>ts&&(ts=t),Ap=r,gd=e}function DH(){Bu.point=$H}function RH(){zu[0]=Ar,zu[1]=zr,Bu.point=F9,Ap=null}function LH(e,t){if(Ap){var r=e-gd;ab.add(it(r)>180?r+(r>0?360:-360):r)}else FH=e,OH=t;_a.point(e,t),$H(e,t)}function qde(){_a.lineStart()}function jde(){LH(FH,OH),_a.lineEnd(),it(ab)>$e&&(Ar=-(zr=180)),zu[0]=Ar,zu[1]=zr,Ap=null}function es(e,t){return(t-=e)<0?t+360:t}function Wde(e,t){return e[0]-t[0]}function MH(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function O9(e){var t,r,i,n,o,s,a;if(ts=zr=-(Ar=Ao=1/0),Ef=[],Eo(e,Bu),r=Ef.length){for(Ef.sort(Wde),t=1,i=Ef[0],o=[i];t<r;++t)n=Ef[t],MH(i,n[0])||MH(i,n[1])?(es(i[0],n[1])>es(i[0],i[1])&&(i[1]=n[1]),es(n[0],i[1])>es(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(s=-1/0,r=o.length-1,t=0,i=o[r];t<=r;i=n,++t)n=o[t],(a=es(i[1],n[0]))>s&&(s=a,Ar=n[0],zr=i[1])}return Ef=zu=null,Ar===1/0||Ao===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ar,Ao],[zr,ts]]}var lb,ow,sw,aw,lw,uw,cw,fw,$9,L9,P9,NH,BH,to,ro,io,wa={sphere:mr,point:I9,lineStart:PH,lineEnd:IH,polygonStart:function(){wa.lineStart=Yde,wa.lineEnd=Xde},polygonEnd:function(){wa.lineStart=PH,wa.lineEnd=IH}};function I9(e,t){e*=nt,t*=nt;var r=Fe(t);ub(r*Fe(e),r*Me(e),Me(t))}function ub(e,t,r){++lb,sw+=(e-sw)/lb,aw+=(t-aw)/lb,lw+=(r-lw)/lb}function PH(){wa.point=Vde}function Vde(e,t){e*=nt,t*=nt;var r=Fe(t);to=r*Fe(e),ro=r*Me(e),io=Me(t),wa.point=Gde,ub(to,ro,io)}function Gde(e,t){e*=nt,t*=nt;var r=Fe(t),i=r*Fe(e),n=r*Me(e),o=Me(t),s=Br(tr((s=ro*o-io*n)*s+(s=io*i-to*o)*s+(s=to*n-ro*i)*s),to*i+ro*n+io*o);ow+=s,uw+=s*(to+(to=i)),cw+=s*(ro+(ro=n)),fw+=s*(io+(io=o)),ub(to,ro,io)}function IH(){wa.point=I9}function Yde(){wa.point=Kde}function Xde(){zH(NH,BH),wa.point=I9}function Kde(e,t){NH=e,BH=t,e*=nt,t*=nt,wa.point=zH;var r=Fe(t);to=r*Fe(e),ro=r*Me(e),io=Me(t),ub(to,ro,io)}function zH(e,t){e*=nt,t*=nt;var r=Fe(t),i=r*Fe(e),n=r*Me(e),o=Me(t),s=ro*o-io*n,a=io*i-to*o,l=to*n-ro*i,u=Q4(s,a,l),c=pr(u),f=u&&-c/u;$9.add(f*s),L9.add(f*a),P9.add(f*l),ow+=c,uw+=c*(to+(to=i)),cw+=c*(ro+(ro=n)),fw+=c*(io+(io=o)),ub(to,ro,io)}function N9(e){lb=ow=sw=aw=lw=uw=cw=fw=0,$9=new yr,L9=new yr,P9=new yr,Eo(e,wa);var t=+$9,r=+L9,i=+P9,n=Q4(t,r,i);return n<hd&&(t=uw,r=cw,i=fw,ow<$e&&(t=sw,r=aw,i=lw),n=Q4(t,r,i),n<hd)?[NaN,NaN]:[Br(r,t)*er,pr(i/n)*er]}function cb(e,t){function r(i,n){return i=e(i,n),t(i[0],i[1])}return e.invert&&t.invert&&(r.invert=function(i,n){return i=t.invert(i,n),i&&e.invert(i[0],i[1])}),r}function B9(e,t){return it(e)>lt&&(e-=Math.round(e/Xr)*Xr),[e,t]}B9.invert=B9;function z9(e,t,r){return(e%=Xr)?t||r?cb(UH(e),qH(t,r)):UH(e):t||r?qH(t,r):B9}function HH(e){return function(t,r){return t+=e,it(t)>lt&&(t-=Math.round(t/Xr)*Xr),[t,r]}}function UH(e){var t=HH(e);return t.invert=HH(-e),t}function qH(e,t){var r=Fe(e),i=Me(e),n=Fe(t),o=Me(t);function s(a,l){var u=Fe(l),c=Fe(a)*u,f=Me(a)*u,h=Me(l),p=h*r+c*i;return[Br(f*n-p*o,c*r-h*i),pr(p*n+f*o)]}return s.invert=function(a,l){var u=Fe(l),c=Fe(a)*u,f=Me(a)*u,h=Me(l),p=h*n-f*o;return[Br(f*n+h*o,c*r+p*i),pr(p*r-c*i)]},s}function jH(e){e=z9(e[0]*nt,e[1]*nt,e.length>2?e[2]*nt:0);function t(r){return r=e(r[0]*nt,r[1]*nt),r[0]*=er,r[1]*=er,r}return t.invert=function(r){return r=e.invert(r[0]*nt,r[1]*nt),r[0]*=er,r[1]*=er,r},t}function VH(e,t,r,i,n,o){if(r){var s=Fe(t),a=Me(t),l=i*r;n==null?(n=t+i*Xr,o=t-l/2):(n=WH(s,n),o=WH(s,o),(i>0?n<o:n>o)&&(n+=i*Xr));for(var u,c=n;i>0?c>o:c<o;c-=l)u=pd([s,-a*Fe(c),-a*Me(c)]),e.point(u[0],u[1])}}function WH(e,t){t=$s(t),t[0]-=e,md(t);var r=tw(-t[1]);return((-t[2]<0?-r:r)+Xr-$e)%Xr}function hw(){var e=[],t;return{point:function(r,i,n){t.push([r,i,n])},lineStart:function(){e.push(t=[])},lineEnd:mr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Tp(e,t){return it(e[0]-t[0])<$e&&it(e[1]-t[1])<$e}function dw(e,t,r,i){this.x=e,this.z=t,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}function pw(e,t,r,i,n){var o=[],s=[],a,l;if(e.forEach(function(d){if(!((m=d.length-1)<=0)){var m,g=d[0],v=d[m],b;if(Tp(g,v)){if(!g[2]&&!v[2]){for(n.lineStart(),a=0;a<m;++a)n.point((g=d[a])[0],g[1]);n.lineEnd();return}v[0]+=2*$e}o.push(b=new dw(g,d,null,!0)),s.push(b.o=new dw(g,null,b,!1)),o.push(b=new dw(v,d,null,!1)),s.push(b.o=new dw(v,null,b,!0))}}),!!o.length){for(s.sort(t),GH(o),GH(s),a=0,l=s.length;a<l;++a)s[a].e=r=!r;for(var u=o[0],c,f;;){for(var h=u,p=!0;h.v;)if((h=h.n)===u)return;c=h.z,n.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,l=c.length;a<l;++a)n.point((f=c[a])[0],f[1]);else i(h.x,h.n.x,1,n);h=h.n}else{if(p)for(c=h.p.z,a=c.length-1;a>=0;--a)n.point((f=c[a])[0],f[1]);else i(h.x,h.p.x,-1,n);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);n.lineEnd()}}}function GH(e){if(t=e.length){for(var t,r=0,i=e[0],n;++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function H9(e){return it(e[0])<=lt?e[0]:Sn(e[0])*((it(e[0])+lt)%Xr-lt)}function YH(e,t){var r=H9(t),i=t[1],n=Me(i),o=[Me(r),-Fe(r),0],s=0,a=0,l=new yr;n===1?i=Qt+$e:n===-1&&(i=-Qt-$e);for(var u=0,c=e.length;u<c;++u)if(h=(f=e[u]).length)for(var f,h,p=f[h-1],d=H9(p),m=p[1]/2+kp,g=Me(m),v=Fe(m),b=0;b<h;++b,d=x,g=_,v=w,p=y){var y=f[b],x=H9(y),S=y[1]/2+kp,_=Me(S),w=Fe(S),k=x-d,A=k>=0?1:-1,M=A*k,D=M>lt,z=g*_;if(l.add(Br(z*A*Me(M),v*w+z*Fe(M))),s+=D?k+A*Xr:k,D^d>=r^x>=r){var P=Nu($s(p),$s(y));md(P);var I=Nu(o,P);md(I);var N=(D^k>=0?-1:1)*pr(I[2]);(i>N||i===N&&(P[0]||P[1]))&&(a+=D^k>=0?1:-1)}}return(s<-$e||s<$e&&l<-hd)^a&1}function mw(e,t,r,i){return function(n){var o=t(n),s=hw(),a=t(s),l=!1,u,c,f,h={point:p,lineStart:m,lineEnd:g,polygonStart:function(){h.point=v,h.lineStart=b,h.lineEnd=y,c=[],u=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=g,c=B0(c);var x=YH(u,i);c.length?(l||(n.polygonStart(),l=!0),pw(c,Jde,x,r,n)):x&&(l||(n.polygonStart(),l=!0),n.lineStart(),r(null,null,1,n),n.lineEnd()),l&&(n.polygonEnd(),l=!1),c=u=null},sphere:function(){n.polygonStart(),n.lineStart(),r(null,null,1,n),n.lineEnd(),n.polygonEnd()}};function p(x,S){e(x,S)&&n.point(x,S)}function d(x,S){o.point(x,S)}function m(){h.point=d,o.lineStart()}function g(){h.point=p,o.lineEnd()}function v(x,S){f.push([x,S]),a.point(x,S)}function b(){a.lineStart(),f=[]}function y(){v(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),S=s.result(),_,w=S.length,k,A,M;if(f.pop(),u.push(f),f=null,!!w){if(x&1){if(A=S[0],(k=A.length-1)>0){for(l||(n.polygonStart(),l=!0),n.lineStart(),_=0;_<k;++_)n.point((M=A[_])[0],M[1]);n.lineEnd()}return}w>1&&x&2&&S.push(S.pop().concat(S.shift())),c.push(S.filter(Zde))}}return h}}function Zde(e){return e.length>1}function Jde(e,t){return((e=e.x)[0]<0?e[1]-Qt-$e:Qt-e[1])-((t=t.x)[0]<0?t[1]-Qt-$e:Qt-t[1])}var U9=mw(function(){return!0},Qde,t0e,[-lt,-Qt]);function Qde(e){var t=NaN,r=NaN,i=NaN,n;return{lineStart:function(){e.lineStart(),n=1},point:function(o,s){var a=o>0?lt:-lt,l=it(o-t);it(l-lt)<$e?(e.point(t,r=(r+s)/2>0?Qt:-Qt),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(a,r),e.point(o,r),n=0):i!==a&&l>=lt&&(it(t-i)<$e&&(t-=i*$e),it(o-a)<$e&&(o-=a*$e),r=e0e(t,r,o,s),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(a,r),n=0),e.point(t=o,r=s),i=a},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-n}}}function e0e(e,t,r,i){var n,o,s=Me(e-r);return it(s)>$e?Os((Me(t)*(o=Fe(i))*Me(r)-Me(i)*(n=Fe(t))*Me(e))/(n*o*s)):(t+i)/2}function t0e(e,t,r,i){var n;if(e==null)n=r*Qt,i.point(-lt,n),i.point(0,n),i.point(lt,n),i.point(lt,0),i.point(lt,-n),i.point(0,-n),i.point(-lt,-n),i.point(-lt,0),i.point(-lt,n);else if(it(e[0]-t[0])>$e){var o=e[0]<t[0]?lt:-lt;n=r*o/2,i.point(-o,n),i.point(0,n),i.point(o,n)}else i.point(t[0],t[1])}function XH(e){var t=Fe(e),r=2*nt,i=t>0,n=it(t)>$e;function o(c,f,h,p){VH(p,e,r,h,c,f)}function s(c,f){return Fe(c)*Fe(f)>t}function a(c){var f,h,p,d,m;return{lineStart:function(){d=p=!1,m=1},point:function(g,v){var b=[g,v],y,x=s(g,v),S=i?x?0:u(g,v):x?u(g+(g<0?lt:-lt),v):0;if(!f&&(d=p=x)&&c.lineStart(),x!==p&&(y=l(f,b),(!y||Tp(f,y)||Tp(b,y))&&(b[2]=1)),x!==p)m=0,x?(c.lineStart(),y=l(b,f),c.point(y[0],y[1])):(y=l(f,b),c.point(y[0],y[1],2),c.lineEnd()),f=y;else if(n&&f&&i^x){var _;!(S&h)&&(_=l(b,f,!0))&&(m=0,i?(c.lineStart(),c.point(_[0][0],_[0][1]),c.point(_[1][0],_[1][1]),c.lineEnd()):(c.point(_[1][0],_[1][1]),c.lineEnd(),c.lineStart(),c.point(_[0][0],_[0][1],3)))}x&&(!f||!Tp(f,b))&&c.point(b[0],b[1]),f=b,p=x,h=S},lineEnd:function(){p&&c.lineEnd(),f=null},clean:function(){return m|(d&&p)<<1}}}function l(c,f,h){var p=$s(c),d=$s(f),m=[1,0,0],g=Nu(p,d),v=ob(g,g),b=g[0],y=v-b*b;if(!y)return!h&&c;var x=t*v/y,S=-t*b/y,_=Nu(m,g),w=sb(m,x),k=sb(g,S);nw(w,k);var A=_,M=ob(w,A),D=ob(A,A),z=M*M-D*(ob(w,w)-1);if(!(z<0)){var P=tr(z),I=sb(A,(-M-P)/D);if(nw(I,w),I=pd(I),!h)return I;var N=c[0],H=f[0],T=c[1],O=f[1],L;H<N&&(L=N,N=H,H=L);var q=H-N,X=it(q-lt)<$e,ne=X||q<$e;if(!X&&O<T&&(L=T,T=O,O=L),ne?X?T+O>0^I[1]<(it(I[0]-N)<$e?T:O):T<=I[1]&&I[1]<=O:q>lt^(N<=I[0]&&I[0]<=H)){var ke=sb(A,(-M+P)/D);return nw(ke,w),[I,pd(ke)]}}}function u(c,f){var h=i?e:lt-e,p=0;return c<-h?p|=1:c>h&&(p|=2),f<-h?p|=4:f>h&&(p|=8),p}return mw(s,a,o,i?[0,-e]:[-lt,e-lt])}function KH(e,t,r,i,n,o){var s=e[0],a=e[1],l=t[0],u=t[1],c=0,f=1,h=l-s,p=u-a,d;if(d=r-s,!(!h&&d>0)){if(d/=h,h<0){if(d<c)return;d<f&&(f=d)}else if(h>0){if(d>f)return;d>c&&(c=d)}if(d=n-s,!(!h&&d<0)){if(d/=h,h<0){if(d>f)return;d>c&&(c=d)}else if(h>0){if(d<c)return;d<f&&(f=d)}if(d=i-a,!(!p&&d>0)){if(d/=p,p<0){if(d<c)return;d<f&&(f=d)}else if(p>0){if(d>f)return;d>c&&(c=d)}if(d=o-a,!(!p&&d<0)){if(d/=p,p<0){if(d>f)return;d>c&&(c=d)}else if(p>0){if(d<c)return;d<f&&(f=d)}return c>0&&(e[0]=s+c*h,e[1]=a+c*p),f<1&&(t[0]=s+f*h,t[1]=a+f*p),!0}}}}}var fb=1e9,gw=-fb;function hb(e,t,r,i){function n(u,c){return e<=u&&u<=r&&t<=c&&c<=i}function o(u,c,f,h){var p=0,d=0;if(u==null||(p=s(u,f))!==(d=s(c,f))||l(u,c)<0^f>0)do h.point(p===0||p===3?e:r,p>1?i:t);while((p=(p+f+4)%4)!==d);else h.point(c[0],c[1])}function s(u,c){return it(u[0]-e)<$e?c>0?0:3:it(u[0]-r)<$e?c>0?2:1:it(u[1]-t)<$e?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=s(u,1),h=s(c,1);return f!==h?f-h:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=hw(),h,p,d,m,g,v,b,y,x,S,_,w={point:k,lineStart:z,lineEnd:P,polygonStart:M,polygonEnd:D};function k(N,H){n(N,H)&&c.point(N,H)}function A(){for(var N=0,H=0,T=p.length;H<T;++H)for(var O=p[H],L=1,q=O.length,X=O[0],ne,ke,Ee=X[0],G=X[1];L<q;++L)ne=Ee,ke=G,X=O[L],Ee=X[0],G=X[1],ke<=i?G>i&&(Ee-ne)*(i-ke)>(G-ke)*(e-ne)&&++N:G<=i&&(Ee-ne)*(i-ke)<(G-ke)*(e-ne)&&--N;return N}function M(){c=f,h=[],p=[],_=!0}function D(){var N=A(),H=_&&N,T=(h=B0(h)).length;(H||T)&&(u.polygonStart(),H&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),T&&pw(h,a,N,o,u),u.polygonEnd()),c=u,h=p=d=null}function z(){w.point=I,p&&p.push(d=[]),S=!0,x=!1,b=y=NaN}function P(){h&&(I(m,g),v&&x&&f.rejoin(),h.push(f.result())),w.point=k,x&&c.lineEnd()}function I(N,H){var T=n(N,H);if(p&&d.push([N,H]),S)m=N,g=H,v=T,S=!1,T&&(c.lineStart(),c.point(N,H));else if(T&&x)c.point(N,H);else{var O=[b=Math.max(gw,Math.min(fb,b)),y=Math.max(gw,Math.min(fb,y))],L=[N=Math.max(gw,Math.min(fb,N)),H=Math.max(gw,Math.min(fb,H))];KH(O,L,e,t,r,i)?(x||(c.lineStart(),c.point(O[0],O[1])),c.point(L[0],L[1]),T||c.lineEnd(),_=!1):T&&(c.lineStart(),c.point(N,H),_=!1)}b=N,y=H,x=T}return w}}function ZH(e,t,r){var i=Yr(e,t-$e,r).concat(t);return function(n){return i.map(function(o){return[n,o]})}}function JH(e,t,r){var i=Yr(e,t-$e,r).concat(t);return function(n){return i.map(function(o){return[o,n]})}}function vw(){var e,t,r,i,n,o,s,a,l=10,u=l,c=90,f=360,h,p,d,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return Yr(ib(i/c)*c,r,c).map(d).concat(Yr(ib(a/f)*f,s,f).map(m)).concat(Yr(ib(t/l)*l,e,l).filter(function(y){return it(y%c)>$e}).map(h)).concat(Yr(ib(o/u)*u,n,u).filter(function(y){return it(y%f)>$e}).map(p))}return v.lines=function(){return b().map(function(y){return{type:"LineString",coordinates:y}})},v.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(m(s).slice(1),d(r).reverse().slice(1),m(a).reverse().slice(1))]}},v.extent=function(y){return arguments.length?v.extentMajor(y).extentMinor(y):v.extentMinor()},v.extentMajor=function(y){return arguments.length?(i=+y[0][0],r=+y[1][0],a=+y[0][1],s=+y[1][1],i>r&&(y=i,i=r,r=y),a>s&&(y=a,a=s,s=y),v.precision(g)):[[i,a],[r,s]]},v.extentMinor=function(y){return arguments.length?(t=+y[0][0],e=+y[1][0],o=+y[0][1],n=+y[1][1],t>e&&(y=t,t=e,e=y),o>n&&(y=o,o=n,n=y),v.precision(g)):[[t,o],[e,n]]},v.step=function(y){return arguments.length?v.stepMajor(y).stepMinor(y):v.stepMinor()},v.stepMajor=function(y){return arguments.length?(c=+y[0],f=+y[1],v):[c,f]},v.stepMinor=function(y){return arguments.length?(l=+y[0],u=+y[1],v):[l,u]},v.precision=function(y){return arguments.length?(g=+y,h=ZH(o,n,90),p=JH(t,e,g),d=ZH(a,s,90),m=JH(i,r,g),v):g},v.extentMajor([[-180,-90+$e],[180,90-$e]]).extentMinor([[-180,-80-$e],[180,80+$e]])}var Af=e=>e;var q9=new yr,j9=new yr,QH,eU,W9,V9,Tf={point:mr,lineStart:mr,lineEnd:mr,polygonStart:function(){Tf.lineStart=r0e,Tf.lineEnd=n0e},polygonEnd:function(){Tf.lineStart=Tf.lineEnd=Tf.point=mr,q9.add(it(j9)),j9=new yr},result:function(){var e=q9/2;return q9=new yr,e}};function r0e(){Tf.point=i0e}function i0e(e,t){Tf.point=tU,QH=W9=e,eU=V9=t}function tU(e,t){j9.add(V9*e-W9*t),W9=e,V9=t}function n0e(){tU(QH,eU)}var G9=Tf;var Dp=1/0,bw=Dp,db=-Dp,yw=db,o0e={point:s0e,lineStart:mr,lineEnd:mr,polygonStart:mr,polygonEnd:mr,result:function(){var e=[[Dp,bw],[db,yw]];return db=yw=-(bw=Dp=1/0),e}};function s0e(e,t){e<Dp&&(Dp=e),e>db&&(db=e),t<bw&&(bw=t),t>yw&&(yw=t)}var Rp=o0e;var Y9=0,X9=0,pb=0,xw=0,_w=0,Mp=0,K9=0,Z9=0,mb=0,nU,oU,Al,Tl,Sa={point:vd,lineStart:rU,lineEnd:iU,polygonStart:function(){Sa.lineStart=u0e,Sa.lineEnd=c0e},polygonEnd:function(){Sa.point=vd,Sa.lineStart=rU,Sa.lineEnd=iU},result:function(){var e=mb?[K9/mb,Z9/mb]:Mp?[xw/Mp,_w/Mp]:pb?[Y9/pb,X9/pb]:[NaN,NaN];return Y9=X9=pb=xw=_w=Mp=K9=Z9=mb=0,e}};function vd(e,t){Y9+=e,X9+=t,++pb}function rU(){Sa.point=a0e}function a0e(e,t){Sa.point=l0e,vd(Al=e,Tl=t)}function l0e(e,t){var r=e-Al,i=t-Tl,n=tr(r*r+i*i);xw+=n*(Al+e)/2,_w+=n*(Tl+t)/2,Mp+=n,vd(Al=e,Tl=t)}function iU(){Sa.point=vd}function u0e(){Sa.point=f0e}function c0e(){sU(nU,oU)}function f0e(e,t){Sa.point=sU,vd(nU=Al=e,oU=Tl=t)}function sU(e,t){var r=e-Al,i=t-Tl,n=tr(r*r+i*i);xw+=n*(Al+e)/2,_w+=n*(Tl+t)/2,Mp+=n,n=Tl*e-Al*t,K9+=n*(Al+e),Z9+=n*(Tl+t),mb+=n*3,vd(Al=e,Tl=t)}var J9=Sa;function ww(e){this._context=e}ww.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Xr);break}}},result:mr};var eA=new yr,Q9,aU,lU,gb,vb,Sw={point:mr,lineStart:function(){Sw.point=h0e},lineEnd:function(){Q9&&uU(aU,lU),Sw.point=mr},polygonStart:function(){Q9=!0},polygonEnd:function(){Q9=null},result:function(){var e=+eA;return eA=new yr,e}};function h0e(e,t){Sw.point=uU,aU=gb=e,lU=vb=t}function uU(e,t){gb-=e,vb-=t,eA.add(tr(gb*gb+vb*vb)),gb=e,vb=t}var tA=Sw;var cU,Cw,fU,hU,Fp=class{constructor(t){this._append=t==null?dU:d0e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==fU||this._append!==Cw){let i=this._radius,n=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,fU=i,Cw=this._append,hU=this._,this._=n}this._+=hU;break}}}result(){let t=this._;return this._="",t.length?t:null}};function dU(e){let t=1;this._+=e[0];for(let r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function d0e(e){let t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return dU;if(t!==cU){let r=10**t;cU=t,Cw=function(n){let o=1;this._+=n[0];for(let s=n.length;o<s;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}return Cw}function kw(e,t){let r=3,i=4.5,n,o;function s(a){return a&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),Eo(a,n(o))),o.result()}return s.area=function(a){return Eo(a,n(G9)),G9.result()},s.measure=function(a){return Eo(a,n(tA)),tA.result()},s.bounds=function(a){return Eo(a,n(Rp)),Rp.result()},s.centroid=function(a){return Eo(a,n(J9)),J9.result()},s.projection=function(a){return arguments.length?(n=a==null?(e=null,Af):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new Fp(r)):new ww(t=a),typeof i!="function"&&o.pointRadius(i),s):t},s.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(o.pointRadius(+a),+a),s):i},s.digits=function(a){if(!arguments.length)return r;if(a==null)r=null;else{let l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);r=l}return t===null&&(o=new Fp(r)),s},s.projection(e).digits(r).context(t)}function bd(e){return function(t){var r=new rA;for(var i in e)r[i]=e[i];return r.stream=t,r}}function rA(){}rA.prototype={constructor:rA,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function iA(e,t,r){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Eo(r,e.stream(Rp)),t(Rp.result()),i!=null&&e.clipExtent(i),e}function yd(e,t,r){return iA(e,function(i){var n=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(n/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),a=+t[0][0]+(n-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(o-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,l])},r)}function Op(e,t,r){return yd(e,[[0,0],t],r)}function $p(e,t,r){return iA(e,function(i){var n=+t,o=n/(i[1][0]-i[0][0]),s=(n-o*(i[1][0]+i[0][0]))/2,a=-o*i[0][1];e.scale(150*o).translate([s,a])},r)}function Lp(e,t,r){return iA(e,function(i){var n=+t,o=n/(i[1][1]-i[0][1]),s=-o*i[0][0],a=(n-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([s,a])},r)}var pU=16,p0e=Fe(30*nt);function nA(e,t){return+t?g0e(e,t):m0e(e)}function m0e(e){return bd({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function g0e(e,t){function r(i,n,o,s,a,l,u,c,f,h,p,d,m,g){var v=u-i,b=c-n,y=v*v+b*b;if(y>4*t&&m--){var x=s+h,S=a+p,_=l+d,w=tr(x*x+S*S+_*_),k=pr(_/=w),A=it(it(_)-1)<$e||it(o-f)<$e?(o+f)/2:Br(S,x),M=e(A,k),D=M[0],z=M[1],P=D-i,I=z-n,N=b*P-v*I;(N*N/y>t||it((v*P+b*I)/y-.5)>.3||s*h+a*p+l*d<p0e)&&(r(i,n,o,s,a,l,D,z,A,x/=w,S/=w,_,m,g),g.point(D,z),r(D,z,A,x,S,_,u,c,f,h,p,d,m,g))}}return function(i){var n,o,s,a,l,u,c,f,h,p,d,m,g={point:v,lineStart:b,lineEnd:x,polygonStart:function(){i.polygonStart(),g.lineStart=S},polygonEnd:function(){i.polygonEnd(),g.lineStart=b}};function v(k,A){k=e(k,A),i.point(k[0],k[1])}function b(){f=NaN,g.point=y,i.lineStart()}function y(k,A){var M=$s([k,A]),D=e(k,A);r(f,h,c,p,d,m,f=D[0],h=D[1],c=k,p=M[0],d=M[1],m=M[2],pU,i),i.point(f,h)}function x(){g.point=v,i.lineEnd()}function S(){b(),g.point=_,g.lineEnd=w}function _(k,A){y(n=k,A),o=f,s=h,a=p,l=d,u=m,g.point=y}function w(){r(f,h,c,p,d,m,o,s,n,a,l,u,pU,i),g.lineEnd=x,x()}return g}}var v0e=bd({point:function(e,t){this.stream.point(e*nt,t*nt)}});function b0e(e){return bd({point:function(t,r){var i=e(t,r);return this.stream.point(i[0],i[1])}})}function y0e(e,t,r,i,n){function o(s,a){return s*=i,a*=n,[t+e*s,r-e*a]}return o.invert=function(s,a){return[(s-t)/e*i,(r-a)/e*n]},o}function mU(e,t,r,i,n,o){if(!o)return y0e(e,t,r,i,n);var s=Fe(o),a=Me(o),l=s*e,u=a*e,c=s/e,f=a/e,h=(a*r-s*t)/e,p=(a*t+s*r)/e;function d(m,g){return m*=i,g*=n,[l*m-u*g+t,r-u*m-l*g]}return d.invert=function(m,g){return[i*(c*m-f*g+h),n*(p-f*m-c*g)]},d}function Hr(e){return Ew(function(){return e})()}function Ew(e){var t,r=150,i=480,n=250,o=0,s=0,a=0,l=0,u=0,c,f=0,h=1,p=1,d=null,m=U9,g=null,v,b,y,x=Af,S=.5,_,w,k,A,M;function D(N){return k(N[0]*nt,N[1]*nt)}function z(N){return N=k.invert(N[0],N[1]),N&&[N[0]*er,N[1]*er]}D.stream=function(N){return A&&M===N?A:A=v0e(b0e(c)(m(_(x(M=N)))))},D.preclip=function(N){return arguments.length?(m=N,d=void 0,I()):m},D.postclip=function(N){return arguments.length?(x=N,g=v=b=y=null,I()):x},D.clipAngle=function(N){return arguments.length?(m=+N?XH(d=N*nt):(d=null,U9),I()):d*er},D.clipExtent=function(N){return arguments.length?(x=N==null?(g=v=b=y=null,Af):hb(g=+N[0][0],v=+N[0][1],b=+N[1][0],y=+N[1][1]),I()):g==null?null:[[g,v],[b,y]]},D.scale=function(N){return arguments.length?(r=+N,P()):r},D.translate=function(N){return arguments.length?(i=+N[0],n=+N[1],P()):[i,n]},D.center=function(N){return arguments.length?(o=N[0]%360*nt,s=N[1]%360*nt,P()):[o*er,s*er]},D.rotate=function(N){return arguments.length?(a=N[0]%360*nt,l=N[1]%360*nt,u=N.length>2?N[2]%360*nt:0,P()):[a*er,l*er,u*er]},D.angle=function(N){return arguments.length?(f=N%360*nt,P()):f*er},D.reflectX=function(N){return arguments.length?(h=N?-1:1,P()):h<0},D.reflectY=function(N){return arguments.length?(p=N?-1:1,P()):p<0},D.precision=function(N){return arguments.length?(_=nA(w,S=N*N),I()):tr(S)},D.fitExtent=function(N,H){return yd(D,N,H)},D.fitSize=function(N,H){return Op(D,N,H)},D.fitWidth=function(N,H){return $p(D,N,H)},D.fitHeight=function(N,H){return Lp(D,N,H)};function P(){var N=mU(r,0,0,h,p,f).apply(null,t(o,s)),H=mU(r,i-N[0],n-N[1],h,p,f);return c=z9(a,l,u),w=cb(t,H),k=cb(c,w),_=nA(w,S),I()}function I(){return A=M=null,D}return function(){return t=e.apply(this,arguments),D.invert=t.invert&&z,P()}}function Pp(e){var t=0,r=lt/3,i=Ew(e),n=i(t,r);return n.parallels=function(o){return arguments.length?i(t=o[0]*nt,r=o[1]*nt):[t*er,r*er]},n}function gU(e){var t=Fe(e);function r(i,n){return[i*t,Me(n)/t]}return r.invert=function(i,n){return[i/t,pr(n*t)]},r}function vU(e,t){var r=Me(e),i=(r+Me(t))/2;if(it(i)<$e)return gU(e);var n=1+r*(2*i-r),o=tr(n)/i;function s(a,l){var u=tr(n-2*i*Me(l))/i;return[u*Me(a*=i),o-u*Fe(a)]}return s.invert=function(a,l){var u=o-l,c=Br(a,it(u))*Sn(u);return u*i<0&&(c-=lt*Sn(a)*Sn(u)),[c/i,pr((n-(a*a+u*u)*i*i)/(2*i))]},s}function Df(){return Pp(vU).scale(155.424).center([0,33.6442])}function bb(){return Df().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function x0e(e){var t=e.length;return{point:function(r,i){for(var n=-1;++n<t;)e[n].point(r,i)},sphere:function(){for(var r=-1;++r<t;)e[r].sphere()},lineStart:function(){for(var r=-1;++r<t;)e[r].lineStart()},lineEnd:function(){for(var r=-1;++r<t;)e[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<t;)e[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<t;)e[r].polygonEnd()}}}function oA(){var e,t,r=bb(),i,n=Df().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=Df().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(h,p){l=[h,p]}};function c(h){var p=h[0],d=h[1];return l=null,i.point(p,d),l||(o.point(p,d),l)||(a.point(p,d),l)}c.invert=function(h){var p=r.scale(),d=r.translate(),m=(h[0]-d[0])/p,g=(h[1]-d[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?n:g>=.166&&g<.234&&m>=-.214&&m<-.115?s:r).invert(h)},c.stream=function(h){return e&&t===h?e:e=x0e([r.stream(t=h),n.stream(h),s.stream(h)])},c.precision=function(h){return arguments.length?(r.precision(h),n.precision(h),s.precision(h),f()):r.precision()},c.scale=function(h){return arguments.length?(r.scale(h),n.scale(h*.35),s.scale(h),c.translate(r.translate())):r.scale()},c.translate=function(h){if(!arguments.length)return r.translate();var p=r.scale(),d=+h[0],m=+h[1];return i=r.translate(h).clipExtent([[d-.455*p,m-.238*p],[d+.455*p,m+.238*p]]).stream(u),o=n.translate([d-.307*p,m+.201*p]).clipExtent([[d-.425*p+$e,m+.12*p+$e],[d-.214*p-$e,m+.234*p-$e]]).stream(u),a=s.translate([d-.205*p,m+.212*p]).clipExtent([[d-.214*p+$e,m+.166*p+$e],[d-.115*p-$e,m+.234*p-$e]]).stream(u),f()},c.fitExtent=function(h,p){return yd(c,h,p)},c.fitSize=function(h,p){return Op(c,h,p)},c.fitWidth=function(h,p){return $p(c,h,p)},c.fitHeight=function(h,p){return Lp(c,h,p)};function f(){return e=t=null,c}return c.scale(1070)}function Aw(e){return function(t,r){var i=Fe(t),n=Fe(r),o=e(i*n);return o===1/0?[2,0]:[o*n*Me(t),o*Me(r)]}}function Dl(e){return function(t,r){var i=tr(t*t+r*r),n=e(i),o=Me(n),s=Fe(n);return[Br(t*o,i*s),pr(i&&r*o/i)]}}var sA=Aw(function(e){return tr(2/(1+e))});sA.invert=Dl(function(e){return 2*pr(e/2)});function aA(){return Hr(sA).scale(124.75).clipAngle(180-.001)}var lA=Aw(function(e){return(e=tw(e))&&e/Me(e)});lA.invert=Dl(function(e){return e});function uA(){return Hr(lA).scale(79.4188).clipAngle(180-.001)}function Ip(e,t){return[e,dd(Ep((Qt+t)/2))]}Ip.invert=function(e,t){return[e,2*Os(J4(t))-Qt]};function cA(){return fA(Ip).scale(961/Xr)}function fA(e){var t=Hr(e),r=t.center,i=t.scale,n=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(f){return arguments.length?(i(f),c()):i()},t.translate=function(f){return arguments.length?(n(f),c()):n()},t.center=function(f){return arguments.length?(r(f),c()):r()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=l=u=null:(s=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):s==null?null:[[s,a],[l,u]]};function c(){var f=lt*i(),h=t(jH(t.rotate()).invert([0,0]));return o(s==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===Ip?[[Math.max(h[0]-f,s),a],[Math.min(h[0]+f,l),u]]:[[s,Math.max(h[1]-f,a)],[l,Math.min(h[1]+f,u)]])}return c()}function Tw(e){return Ep((Qt+e)/2)}function bU(e,t){var r=Fe(e),i=e===t?Me(e):dd(r/Fe(t))/dd(Tw(t)/Tw(e)),n=r*ew(Tw(e),i)/i;if(!i)return Ip;function o(s,a){n>0?a<-Qt+$e&&(a=-Qt+$e):a>Qt-$e&&(a=Qt-$e);var l=n/ew(Tw(a),i);return[l*Me(i*s),n-l*Fe(i*s)]}return o.invert=function(s,a){var l=n-a,u=Sn(i)*tr(s*s+l*l),c=Br(s,it(l))*Sn(l);return l*i<0&&(c-=lt*Sn(s)*Sn(l)),[c/i,2*Os(ew(n/u,1/i))-Qt]},o}function hA(){return Pp(bU).scale(109.5).parallels([30,30])}function Np(e,t){return[e,t]}Np.invert=Np;function dA(){return Hr(Np).scale(152.63)}function yU(e,t){var r=Fe(e),i=e===t?Me(e):(r-Fe(t))/(t-e),n=r/i+e;if(it(i)<$e)return Np;function o(s,a){var l=n-a,u=i*s;return[l*Me(u),n-l*Fe(u)]}return o.invert=function(s,a){var l=n-a,u=Br(s,it(l))*Sn(l);return l*i<0&&(u-=lt*Sn(s)*Sn(l)),[u/i,n-Sn(i)*tr(s*s+l*l)]},o}function pA(){return Pp(yU).scale(131.154).center([0,13.9389])}var yb=1.340264,xb=-.081106,_b=893e-6,wb=.003796,Dw=tr(3)/2,_0e=12;function mA(e,t){var r=pr(Dw*Me(t)),i=r*r,n=i*i*i;return[e*Fe(r)/(Dw*(yb+3*xb*i+n*(7*_b+9*wb*i))),r*(yb+xb*i+n*(_b+wb*i))]}mA.invert=function(e,t){for(var r=t,i=r*r,n=i*i*i,o=0,s,a,l;o<_0e&&(a=r*(yb+xb*i+n*(_b+wb*i))-t,l=yb+3*xb*i+n*(7*_b+9*wb*i),r-=s=a/l,i=r*r,n=i*i*i,!(it(s)<hd));++o);return[Dw*e*(yb+3*xb*i+n*(7*_b+9*wb*i))/Fe(r),pr(Me(r)/Dw)]};function gA(){return Hr(mA).scale(177.158)}function vA(e,t){var r=Fe(t),i=Fe(e)*r;return[r*Me(e)/i,Me(t)/i]}vA.invert=Dl(Os);function bA(){return Hr(vA).scale(144.049).clipAngle(60)}function yA(){var e=1,t=0,r=0,i=1,n=1,o=0,s,a,l=null,u,c,f,h=1,p=1,d=bd({point:function(x,S){var _=y([x,S]);this.stream.point(_[0],_[1])}}),m=Af,g,v;function b(){return h=e*i,p=e*n,g=v=null,y}function y(x){var S=x[0]*h,_=x[1]*p;if(o){var w=_*s-S*a;S=S*s+_*a,_=w}return[S+t,_+r]}return y.invert=function(x){var S=x[0]-t,_=x[1]-r;if(o){var w=_*s+S*a;S=S*s-_*a,_=w}return[S/h,_/p]},y.stream=function(x){return g&&v===x?g:g=d(m(v=x))},y.postclip=function(x){return arguments.length?(m=x,l=u=c=f=null,b()):m},y.clipExtent=function(x){return arguments.length?(m=x==null?(l=u=c=f=null,Af):hb(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),b()):l==null?null:[[l,u],[c,f]]},y.scale=function(x){return arguments.length?(e=+x,b()):e},y.translate=function(x){return arguments.length?(t=+x[0],r=+x[1],b()):[t,r]},y.angle=function(x){return arguments.length?(o=x%360*nt,a=Me(o),s=Fe(o),b()):o*er},y.reflectX=function(x){return arguments.length?(i=x?-1:1,b()):i<0},y.reflectY=function(x){return arguments.length?(n=x?-1:1,b()):n<0},y.fitExtent=function(x,S){return yd(y,x,S)},y.fitSize=function(x,S){return Op(y,x,S)},y.fitWidth=function(x,S){return $p(y,x,S)},y.fitHeight=function(x,S){return Lp(y,x,S)},y}function xA(e,t){var r=t*t,i=r*r;return[e*(.8707-.131979*r+i*(-.013791+i*(.003971*r-.001529*i))),t*(1.007226+r*(.015085+i*(-.044475+.028874*r-.005916*i)))]}xA.invert=function(e,t){var r=t,i=25,n;do{var o=r*r,s=o*o;r-=n=(r*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(it(n)>$e&&--i>0);return[e/(.8707+(o=r*r)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),r]};function _A(){return Hr(xA).scale(175.295)}function wA(e,t){return[Fe(t)*Me(e),Me(t)]}wA.invert=Dl(pr);function SA(){return Hr(wA).scale(249.5).clipAngle(90+$e)}function CA(e,t){var r=Fe(t),i=1+Fe(e)*r;return[r*Me(e)/i,Me(t)/i]}CA.invert=Dl(function(e){return 2*Os(e)});function kA(){return Hr(CA).scale(250).clipAngle(142)}function EA(e,t){return[dd(Ep((Qt+t)/2)),-e]}EA.invert=function(e,t){return[-t,2*Os(J4(e))-Qt]};function AA(){var e=fA(EA),t=e.center,r=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?r([i[0],i[1],i.length>2?i[2]+90:90]):(i=r(),[i[0],i[1],i[2]-90])},r([0,0,90]).scale(159.155)}var xU=Math.abs;var Mw=Math.cos;var Sb=Math.sin;var _U=1e-6;var Rf=Math.PI,Rw=Rf/2,mGe=Rf/4;var TA=wU(2),gGe=wU(Rf),vGe=Rf*2,bGe=180/Rf,yGe=Rf/180;function DA(e){return e>1?Rw:e<-1?-Rw:Math.asin(e)}function wU(e){return e>0?Math.sqrt(e):0}function w0e(e,t){var r=e*Sb(t),i=30,n;do t-=n=(t+Sb(t)-r)/(1+Mw(t));while(xU(n)>_U&&--i>0);return t/2}function S0e(e,t,r){function i(n,o){return[e*n*Mw(o=w0e(r,o)),t*Sb(o)]}return i.invert=function(n,o){return o=DA(o/t),[n/(e*Mw(o)),DA((2*o+Sb(2*o))/r)]},i}var SU=S0e(TA/Rw,TA,Rf);function RA(){return Hr(SU).scale(169.529)}var C0e=kw(),Ow=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function k0e(e,t){return function r(){let i=t();return i.type=e,i.path=kw().projection(i),i.copy=i.copy||function(){let n=r();return Ow.forEach(o=>{i[o]&&n[o](i[o]())}),n.path.pointRadius(i.path.pointRadius()),n},fE(i)}}function Cb(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Fw[e]=k0e(e,t),this):Fw[e]||null}function MA(e){return e&&e.path||C0e}var Fw={albers:bb,albersusa:oA,azimuthalequalarea:aA,azimuthalequidistant:uA,conicconformal:hA,conicequalarea:Df,conicequidistant:pA,equalEarth:gA,equirectangular:dA,gnomonic:bA,identity:yA,mercator:cA,mollweide:RA,naturalEarth1:_A,orthographic:SA,stereographic:kA,transversemercator:AA};for(let e in Fw)Cb(e,Fw[e]);function E0e(){}var Hu=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function EU(){var e=1,t=1,r=a;function i(l,u){return u.map(c=>n(l,c))}function n(l,u){var c=[],f=[];return o(l,u,h=>{r(h,l,u),A0e(h)>0?c.push([h]):f.push(h)}),f.forEach(h=>{for(var p=0,d=c.length,m;p<d;++p)if(T0e((m=c[p])[0],h)!==-1){m.push(h);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var f=[],h=[],p,d,m,g,v,b;for(p=d=-1,g=l[0]>=u,Hu[g<<1].forEach(y);++p<e-1;)m=g,g=l[p+1]>=u,Hu[m|g<<1].forEach(y);for(Hu[g<<0].forEach(y);++d<t-1;){for(p=-1,g=l[d*e+e]>=u,v=l[d*e]>=u,Hu[g<<1|v<<2].forEach(y);++p<e-1;)m=g,g=l[d*e+e+p+1]>=u,b=v,v=l[d*e+p+1]>=u,Hu[m|g<<1|v<<2|b<<3].forEach(y);Hu[g|v<<3].forEach(y)}for(p=-1,v=l[d*e]>=u,Hu[v<<2].forEach(y);++p<e-1;)b=v,v=l[d*e+p+1]>=u,Hu[v<<2|b<<3].forEach(y);Hu[v<<3].forEach(y);function y(x){var S=[x[0][0]+p,x[0][1]+d],_=[x[1][0]+p,x[1][1]+d],w=s(S),k=s(_),A,M;(A=h[w])?(M=f[k])?(delete h[A.end],delete f[M.start],A===M?(A.ring.push(_),c(A.ring)):f[A.start]=h[M.end]={start:A.start,end:M.end,ring:A.ring.concat(M.ring)}):(delete h[A.end],A.ring.push(_),h[A.end=k]=A):(A=f[k])?(M=h[w])?(delete f[A.start],delete h[M.end],A===M?(A.ring.push(_),c(A.ring)):f[M.start]=h[A.end]={start:M.start,end:A.end,ring:M.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(S),f[A.start=w]=A):f[w]=h[k]={start:w,end:k,ring:[S,_]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(f=>{var h=f[0],p=f[1],d=h|0,m=p|0,g,v=u[m*e+d];h>0&&h<e&&d===h&&(g=u[m*e+d-1],f[0]=h+(c-g)/(v-g)-.5),p>0&&p<t&&m===p&&(g=u[(m-1)*e+d],f[1]=p+(c-g)/(v-g)-.5)})}return i.contour=n,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||te("invalid size"),e=u,t=c,i},i.smooth=function(l){return arguments.length?(r=l?a:E0e,i):r===a},i}function A0e(e){for(var t=0,r=e.length,i=e[r-1][1]*e[0][0]-e[r-1][0]*e[0][1];++t<r;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function T0e(e,t){for(var r=-1,i=t.length,n;++r<i;)if(n=D0e(e,t[r]))return n;return 0}function D0e(e,t){for(var r=t[0],i=t[1],n=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],f=e[a],h=f[0],p=f[1];if(R0e(l,f,t))return 0;c>i!=p>i&&r<(h-u)*(i-c)/(p-c)+u&&(n=-n)}return n}function R0e(e,t,r){var i;return M0e(e,t,r)&&F0e(e[i=+(e[0]===t[0])],r[i],t[i])}function M0e(e,t,r){return(t[0]-e[0])*(r[1]-e[1])===(r[0]-e[0])*(t[1]-e[1])}function F0e(e,t,r){return e<=t&&t<=r||r<=t&&t<=e}function AU(e,t,r){return function(i){var n=Wn(i),o=r?Math.min(n[0],0):n[0],s=n[1],a=s-o,l=t?Vn(o,s,e):a/(e+1);return Yr(o+l,s,l)}}function $A(e){ee.call(this,null,e)}$A.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};xe($A,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,n=e.field||Ir,o=EU().smooth(e.smooth!==!1),s=e.thresholds||O0e(i,n,e),a=e.as===null?null:e.as||"contour",l=[];return i.forEach(u=>{let c=n(u),f=o.size([c.width,c.height])(c.values,K(s)?s:s(c.values));$0e(f,c,u,e),f.forEach(h=>{l.push(zh(u,xt(a!=null?{[a]:h}:h)))})}),this.value&&(r.rem=this.value),this.value=r.source=r.add=l,r}});function O0e(e,t,r){let i=AU(r.levels||10,r.nice,r.zero!==!1);return r.resolve!=="shared"?i:i(e.map(n=>ws(t(n).values)))}function $0e(e,t,r,i){let n=i.scale||t.scale,o=i.translate||t.translate;if(Ke(n)&&(n=n(r,i)),Ke(o)&&(o=o(r,i)),(n===1||n==null)&&!o)return;let s=(ut(n)?n:n[0])||1,a=(ut(n)?n:n[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(TU(t,s,a,l,u))}function TU(e,t,r,i,n){let o=e.x1||0,s=e.y1||0,a=t*r<0;function l(f){f.forEach(u)}function u(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+i,f[1]=(f[1]-s)*r+n}return function(f){return f.coordinates.forEach(l),f}}function CU(e,t,r){let i=e>=0?e:i_(t,r);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function FA(e){return Ke(e)?e:br(+e)}function DU(){var e=l=>l[0],t=l=>l[1],r=ul,i=[-1,-1],n=960,o=500,s=2;function a(l,u){let c=CU(i[0],l,e)>>s,f=CU(i[1],l,t)>>s,h=c?c+2:0,p=f?f+2:0,d=2*h+(n>>s),m=2*p+(o>>s),g=new Float32Array(d*m),v=new Float32Array(d*m),b=g;l.forEach(x=>{let S=h+(+e(x)>>s),_=p+(+t(x)>>s);S>=0&&S<d&&_>=0&&_<m&&(g[S+_*d]+=+r(x))}),c>0&&f>0?(Bp(d,m,g,v,c),zp(d,m,v,g,f),Bp(d,m,g,v,c),zp(d,m,v,g,f),Bp(d,m,g,v,c),zp(d,m,v,g,f)):c>0?(Bp(d,m,g,v,c),Bp(d,m,v,g,c),Bp(d,m,g,v,c),b=v):f>0&&(zp(d,m,g,v,f),zp(d,m,v,g,f),zp(d,m,g,v,f),b=v);let y=u?Math.pow(2,-2*s):1/z0(b);for(let x=0,S=d*m;x<S;++x)b[x]*=y;return{values:b,scale:1<<s,width:d,height:m,x1:h,y1:p,x2:h+(n>>s),y2:p+(o>>s)}}return a.x=function(l){return arguments.length?(e=FA(l),a):e},a.y=function(l){return arguments.length?(t=FA(l),a):t},a.weight=function(l){return arguments.length?(r=FA(l),a):r},a.size=function(l){if(!arguments.length)return[n,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||te("invalid size"),n=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||te("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=ve(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&te("invalid bandwidth"),i=l,a):i},a}function Bp(e,t,r,i,n){let o=(n<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+n;++a)a<e&&(l+=r[a+s*e]),a>=n&&(a>=o&&(l-=r[a-o+s*e]),i[a-n+s*e]=l/Math.min(a+1,e-1+o-a,o))}function zp(e,t,r,i,n){let o=(n<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+n;++a)a<t&&(l+=r[s+a*e]),a>=n&&(a>=o&&(l-=r[s+(a-o)*e]),i[s+(a-n)*e]=l/Math.min(a+1,t-1+o-a,o))}function LA(e){ee.call(this,null,e)}LA.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var L0e=["x","y","weight","size","cellSize","bandwidth"];function RU(e,t){return L0e.forEach(r=>t[r]!=null?e[r](t[r]):0),e}xe(LA,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,n=P0e(i,e.groupby),o=(e.groupby||[]).map(dr),s=RU(DU(),e),a=e.as||"grid",l=[];function u(c,f){for(let h=0;h<o.length;++h)c[o[h]]=f[h];return c}return l=n.map(c=>xt(u({[a]:s(c,e.counts)},c.dims))),this.value&&(r.rem=this.value),this.value=r.source=r.add=l,r}});function P0e(e,t){var r=[],i=c=>c(a),n,o,s,a,l,u;if(t==null)r.push(e);else for(n={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(i),u=n[l],u||(n[l]=u=[],u.dims=l,r.push(u)),u.push(a);return r}function PA(e){ee.call(this,null,e)}PA.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};xe(PA,ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=EU().smooth(e.smooth!==!1),n=e.values,o=e.thresholds||AU(e.count||10,e.nice,!!n),s=e.size,a,l;return n||(n=t.materialize(t.SOURCE).source,a=RU(DU(),e)(n,!0),l=TU(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],n=a.values),o=K(o)?o:o(n),n=i.size(s)(n,o),l&&n.forEach(l),this.value&&(r.rem=this.value),this.value=r.source=r.add=(n||[]).map(xt),r}});var OA="Feature",IA="FeatureCollection",I0e="MultiPoint";function NA(e){ee.call(this,null,e)}NA.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};xe(NA,ee,{transform(e,t){var r=this._features,i=this._points,n=e.fields,o=n&&n[0],s=n&&n[1],a=e.geojson||!n&&Ir,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(mi(a))||o&&t.modified(mi(o))||s&&t.modified(mi(s)),(!this.value||u)&&(l=t.SOURCE,this._features=r=[],this._points=i=[]),a&&t.visit(l,c=>r.push(a(c))),o&&s&&(t.visit(l,c=>{var f=o(c),h=s(c);f!=null&&h!=null&&(f=+f)===f&&(h=+h)===h&&i.push([f,h])}),r=r.concat({type:OA,geometry:{type:I0e,coordinates:i}})),this.value={type:IA,features:r}}});function BA(e){ee.call(this,null,e)}BA.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};xe(BA,ee,{transform(e,t){var r=t.fork(t.ALL),i=this.value,n=e.field||Ir,o=e.as||"path",s=r.SOURCE;!i||e.modified()?(this.value=i=MA(e.projection),r.materialize().reflow()):s=n===Ir||t.modified(n.fields)?r.ADD_MOD:r.ADD;let a=N0e(i,e.pointRadius);return r.visit(s,l=>l[o]=i(n(l))),i.pointRadius(a),r.modifies(o)}});function N0e(e,t){let r=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),r}function zA(e){ee.call(this,null,e)}zA.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};xe(zA,ee,{transform(e,t){var r=e.projection,i=e.fields[0],n=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(c){let f=r([i(c),n(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(i.fields)||t.modified(n.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function HA(e){ee.call(this,null,e)}HA.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};xe(HA,ee,{transform(e,t){var r=t.fork(t.ALL),i=this.value,n=e.as||"shape",o=r.ADD;return(!i||e.modified())&&(this.value=i=B0e(MA(e.projection),e.field||Ai("datum"),e.pointRadius),r.materialize().reflow(),o=r.SOURCE),r.visit(o,s=>s[n]=i),r.modifies(n)}});function B0e(e,t,r){let i=r==null?n=>e(t(n)):n=>{var o=e.pointRadius(),s=e.pointRadius(r)(t(n));return e.pointRadius(o),s};return i.context=n=>(e.context(n),i),i}function UA(e){ee.call(this,[],e),this.generator=vw()}UA.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};xe(UA,ee,{transform(e,t){var r=this.value,i=this.generator,n;if(!r.length||e.modified())for(let o in e)Ke(i[o])&&i[o](e[o]);return n=i(),r.length?t.mod.push(Jx(r[0],n)):t.add.push(xt(n)),r[0]=n,t}});function qA(e){ee.call(this,null,e)}qA.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};xe(qA,ee,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var r=t.materialize(t.SOURCE).source,i=e.resolve==="shared",n=e.field||Ir,o=H0e(e.opacity,e),s=z0e(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?ws(r.map(u=>ws(n(u).values))):0};return r.forEach(u=>{let c=n(u),f=Ze({},u,l);i||(f.$max=ws(c.values||[])),u[a]=U0e(c,f,s.dep?s:br(s(f)),o.dep?o:br(o(f)))}),t.reflow(!0).modifies(a)}});function z0e(e,t){let r;return Ke(e)?(r=i=>Ds(e(i,t)),r.dep=MU(e)):r=br(Ds(e||"#888")),r}function H0e(e,t){let r;return Ke(e)?(r=i=>e(i,t),r.dep=MU(e)):e?r=br(e):(r=i=>i.$value/i.$max||0,r.dep=!0),r}function MU(e){if(!Ke(e))return!1;let t=ii(mi(e));return t.$x||t.$y||t.$value||t.$max}function U0e(e,t,r,i){let n=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||n,u=e.y2||o,c=e.values,f=c?g=>c[g]:ua,h=Ts(l-s,u-a),p=h.getContext("2d"),d=p.getImageData(0,0,l-s,u-a),m=d.data;for(let g=a,v=0;g<u;++g){t.$y=g-a;for(let b=s,y=g*n;b<l;++b,v+=4){t.$x=b-s,t.$value=f(b+y);let x=r(t);m[v+0]=x.r,m[v+1]=x.g,m[v+2]=x.b,m[v+3]=~~(255*i(t))}}return p.putImageData(d,0,0),h}function FU(e){ee.call(this,null,e),this.modified(!0)}xe(FU,ee,{transform(e,t){let r=this.value;return!r||e.modified("type")?(this.value=r=j0e(e.type),Ow.forEach(i=>{e[i]!=null&&kU(r,i,e[i])})):Ow.forEach(i=>{e.modified(i)&&kU(r,i,e[i])}),e.pointRadius!=null&&r.path.pointRadius(e.pointRadius),e.fit&&q0e(r,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function q0e(e,t){let r=W0e(t.fit);t.extent?e.fitExtent(t.extent,r):t.size&&e.fitSize(t.size,r)}function j0e(e){let t=Cb((e||"mercator").toLowerCase());return t||te("Unrecognized projection type: "+e),t()}function kU(e,t,r){Ke(e[t])&&e[t](r)}function W0e(e){return e=ve(e),e.length===1?e[0]:{type:IA,features:e.reduce((t,r)=>t.concat(V0e(r)),[])}}function V0e(e){return e.type===IA?e.features:ve(e).filter(t=>t!=null).map(t=>t.type===OA?t:{type:OA,geometry:t})}var nT={};pi(nT,{force:()=>iT});function WA(e,t){var r,i=1;e==null&&(e=0),t==null&&(t=0);function n(){var o,s=r.length,a,l=0,u=0;for(o=0;o<s;++o)a=r[o],l+=a.x,u+=a.y;for(l=(l/s-e)*i,u=(u/s-t)*i,o=0;o<s;++o)a=r[o],a.x-=l,a.y-=u}return n.initialize=function(o){r=o},n.x=function(o){return arguments.length?(e=+o,n):e},n.y=function(o){return arguments.length?(t=+o,n):t},n.strength=function(o){return arguments.length?(i=+o,n):i},n}function OU(e){let t=+this._x.call(null,e),r=+this._y.call(null,e);return $U(this.cover(t,r),t,r,e)}function $U(e,t,r,i){if(isNaN(t)||isNaN(r))return e;var n,o=e._root,s={data:i},a=e._x0,l=e._y0,u=e._x1,c=e._y1,f,h,p,d,m,g,v,b;if(!o)return e._root=s,e;for(;o.length;)if((m=t>=(f=(a+u)/2))?a=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h,n=o,!(o=o[v=g<<1|m]))return n[v]=s,e;if(p=+e._x.call(null,o.data),d=+e._y.call(null,o.data),t===p&&r===d)return s.next=o,n?n[v]=s:e._root=s,e;do n=n?n[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+u)/2))?a=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h;while((v=g<<1|m)===(b=(d>=h)<<1|p>=f));return n[b]=o,n[v]=s,e}function LU(e){var t,r,i=e.length,n,o,s=new Array(i),a=new Array(i),l=1/0,u=1/0,c=-1/0,f=-1/0;for(r=0;r<i;++r)isNaN(n=+this._x.call(null,t=e[r]))||isNaN(o=+this._y.call(null,t))||(s[r]=n,a[r]=o,n<l&&(l=n),n>c&&(c=n),o<u&&(u=o),o>f&&(f=o));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),r=0;r<i;++r)$U(this,s[r],a[r],e[r]);return this}function PU(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,i=this._y0,n=this._x1,o=this._y1;if(isNaN(r))n=(r=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{for(var s=n-r||1,a=this._root,l,u;r>e||e>=n||i>t||t>=o;)switch(u=(t<i)<<1|e<r,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:n=r+s,o=i+s;break;case 1:r=n-s,o=i+s;break;case 2:n=r+s,i=o-s;break;case 3:r=n-s,i=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=r,this._y0=i,this._x1=n,this._y1=o,this}function IU(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function NU(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Mi(e,t,r,i,n){this.node=e,this.x0=t,this.y0=r,this.x1=i,this.y1=n}function BU(e,t,r){var i,n=this._x0,o=this._y0,s,a,l,u,c=this._x1,f=this._y1,h=[],p=this._root,d,m;for(p&&h.push(new Mi(p,n,o,c,f)),r==null?r=1/0:(n=e-r,o=t-r,c=e+r,f=t+r,r*=r);d=h.pop();)if(!(!(p=d.node)||(s=d.x0)>c||(a=d.y0)>f||(l=d.x1)<n||(u=d.y1)<o))if(p.length){var g=(s+l)/2,v=(a+u)/2;h.push(new Mi(p[3],g,v,l,u),new Mi(p[2],s,v,g,u),new Mi(p[1],g,a,l,v),new Mi(p[0],s,a,g,v)),(m=(t>=v)<<1|e>=g)&&(d=h[h.length-1],h[h.length-1]=h[h.length-1-m],h[h.length-1-m]=d)}else{var b=e-+this._x.call(null,p.data),y=t-+this._y.call(null,p.data),x=b*b+y*y;if(x<r){var S=Math.sqrt(r=x);n=e-S,o=t-S,c=e+S,f=t+S,i=p.data}}return i}function zU(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,r=this._root,i,n,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,h,p,d,m,g,v;if(!r)return this;if(r.length)for(;;){if((d=c>=(h=(s+l)/2))?s=h:l=h,(m=f>=(p=(a+u)/2))?a=p:u=p,t=r,!(r=r[g=m<<1|d]))return this;if(!r.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(i=t,v=g)}for(;r.data!==e;)if(n=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,n?(o?n.next=o:delete n.next,this):t?(o?t[g]=o:delete t[g],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(i?i[v]=r:this._root=r),this):(this._root=o,this)}function HU(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function UU(){return this._root}function qU(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function jU(e){var t=[],r,i=this._root,n,o,s,a,l;for(i&&t.push(new Mi(i,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(i=r.node,o=r.x0,s=r.y0,a=r.x1,l=r.y1)&&i.length){var u=(o+a)/2,c=(s+l)/2;(n=i[3])&&t.push(new Mi(n,u,c,a,l)),(n=i[2])&&t.push(new Mi(n,o,c,u,l)),(n=i[1])&&t.push(new Mi(n,u,s,a,c)),(n=i[0])&&t.push(new Mi(n,o,s,u,c))}return this}function WU(e){var t=[],r=[],i;for(this._root&&t.push(new Mi(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var n=i.node;if(n.length){var o,s=i.x0,a=i.y0,l=i.x1,u=i.y1,c=(s+l)/2,f=(a+u)/2;(o=n[0])&&t.push(new Mi(o,s,a,c,f)),(o=n[1])&&t.push(new Mi(o,c,a,l,f)),(o=n[2])&&t.push(new Mi(o,s,f,c,u)),(o=n[3])&&t.push(new Mi(o,c,f,l,u))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function VU(e){return e[0]}function GU(e){return arguments.length?(this._x=e,this):this._x}function YU(e){return e[1]}function XU(e){return arguments.length?(this._y=e,this):this._y}function xd(e,t,r){var i=new VA(t??VU,r??YU,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function VA(e,t,r,i,n,o){this._x=e,this._y=t,this._x0=r,this._y0=i,this._x1=n,this._y1=o,this._root=void 0}function KU(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var no=xd.prototype=VA.prototype;no.copy=function(){var e=new VA(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,i;if(!t)return e;if(!t.length)return e._root=KU(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var n=0;n<4;++n)(i=t.source[n])&&(i.length?r.push({source:i,target:t.target[n]=new Array(4)}):t.target[n]=KU(i));return e};no.add=OU;no.addAll=LU;no.cover=PU;no.data=IU;no.extent=NU;no.find=BU;no.remove=zU;no.removeAll=HU;no.root=UU;no.size=qU;no.visit=jU;no.visitAfter=WU;no.x=GU;no.y=XU;function li(e){return function(){return e}}function Ca(e){return(e()-.5)*1e-6}function G0e(e){return e.x+e.vx}function Y0e(e){return e.y+e.vy}function GA(e){var t,r,i,n=1,o=1;typeof e!="function"&&(e=li(e==null?1:+e));function s(){for(var u,c=t.length,f,h,p,d,m,g,v=0;v<o;++v)for(f=xd(t,G0e,Y0e).visitAfter(a),u=0;u<c;++u)h=t[u],m=r[h.index],g=m*m,p=h.x+h.vx,d=h.y+h.vy,f.visit(b);function b(y,x,S,_,w){var k=y.data,A=y.r,M=m+A;if(k){if(k.index>h.index){var D=p-k.x-k.vx,z=d-k.y-k.vy,P=D*D+z*z;P<M*M&&(D===0&&(D=Ca(i),P+=D*D),z===0&&(z=Ca(i),P+=z*z),P=(M-(P=Math.sqrt(P)))/P*n,h.vx+=(D*=P)*(M=(A*=A)/(g+A)),h.vy+=(z*=P)*M,k.vx-=D*(M=1-M),k.vy-=z*M)}return}return x>p+M||_<p-M||S>d+M||w<d-M}}function a(u){if(u.data)return u.r=r[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,f;for(r=new Array(c),u=0;u<c;++u)f=t[u],r[f.index]=+e(f,u,t)}}return s.initialize=function(u,c){t=u,i=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(n=+u,s):n},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:li(+u),l(),s):e},s}function X0e(e){return e.index}function ZU(e,t){var r=e.get(t);if(!r)throw new Error("node not found: "+t);return r}function YA(e){var t=X0e,r=f,i,n=li(30),o,s,a,l,u,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function h(g){for(var v=0,b=e.length;v<c;++v)for(var y=0,x,S,_,w,k,A,M;y<b;++y)x=e[y],S=x.source,_=x.target,w=_.x+_.vx-S.x-S.vx||Ca(u),k=_.y+_.vy-S.y-S.vy||Ca(u),A=Math.sqrt(w*w+k*k),A=(A-o[y])/A*g*i[y],w*=A,k*=A,_.vx-=w*(M=l[y]),_.vy-=k*M,S.vx+=w*(M=1-M),S.vy+=k*M}function p(){if(s){var g,v=s.length,b=e.length,y=new Map(s.map((S,_)=>[t(S,_,s),S])),x;for(g=0,a=new Array(v);g<b;++g)x=e[g],x.index=g,typeof x.source!="object"&&(x.source=ZU(y,x.source)),typeof x.target!="object"&&(x.target=ZU(y,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(g=0,l=new Array(b);g<b;++g)x=e[g],l[g]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);i=new Array(b),d(),o=new Array(b),m()}}function d(){if(s)for(var g=0,v=e.length;g<v;++g)i[g]=+r(e[g],g,e)}function m(){if(s)for(var g=0,v=e.length;g<v;++g)o[g]=+n(e[g],g,e)}return h.initialize=function(g,v){s=g,u=v,p()},h.links=function(g){return arguments.length?(e=g,p(),h):e},h.id=function(g){return arguments.length?(t=g,h):t},h.iterations=function(g){return arguments.length?(c=+g,h):c},h.strength=function(g){return arguments.length?(r=typeof g=="function"?g:li(+g),d(),h):r},h.distance=function(g){return arguments.length?(n=typeof g=="function"?g:li(+g),m(),h):n},h}var K0e={value:()=>{}};function QU(){for(var e=0,t=arguments.length,r={},i;e<t;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new $w(r)}function $w(e){this._=e}function Z0e(e,t){return e.trim().split(/^|\s+/).map(function(r){var i="",n=r.indexOf(".");if(n>=0&&(i=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}$w.prototype=QU.prototype={constructor:$w,on:function(e,t){var r=this._,i=Z0e(e+"",r),n,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((n=(e=i[o]).type)&&(n=J0e(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=i[o]).type)r[n]=JU(r[n],e.name,t);else if(t==null)for(n in r)r[n]=JU(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new $w(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,o;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,n=o.length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],n=0,o=i.length;n<o;++n)i[n].value.apply(t,r)}};function J0e(e,t){for(var r=0,i=e.length,n;r<i;++r)if((n=e[r]).name===t)return n.value}function JU(e,t,r){for(var i=0,n=e.length;i<n;++i)if(e[i].name===t){e[i]=K0e,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:t,value:r}),e}var XA=QU;var Hp=0,Eb=0,kb=0,tq=1e3,Lw,Ab,Pw=0,_d=0,Iw=0,Tb=typeof performance=="object"&&performance.now?performance:Date,rq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rb(){return _d||(rq(Q0e),_d=Tb.now()+Iw)}function Q0e(){_d=0}function Db(){this._call=this._time=this._next=null}Db.prototype=Nw.prototype={constructor:Db,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Rb():+r)+(t==null?0:+t),!this._next&&Ab!==this&&(Ab?Ab._next=this:Lw=this,Ab=this),this._call=e,this._time=r,KA()},stop:function(){this._call&&(this._call=null,this._time=1/0,KA())}};function Nw(e,t,r){var i=new Db;return i.restart(e,t,r),i}function iq(){Rb(),++Hp;for(var e=Lw,t;e;)(t=_d-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Hp}function eq(){_d=(Pw=Tb.now())+Iw,Hp=Eb=0;try{iq()}finally{Hp=0,tpe(),_d=0}}function epe(){var e=Tb.now(),t=e-Pw;t>tq&&(Iw-=t,Pw=e)}function tpe(){for(var e,t=Lw,r,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Lw=r);Ab=e,KA(i)}function KA(e){if(!Hp){Eb&&(Eb=clearTimeout(Eb));var t=e-_d;t>24?(e<1/0&&(Eb=setTimeout(eq,e-Tb.now()-Iw)),kb&&(kb=clearInterval(kb))):(kb||(Pw=Tb.now(),kb=setInterval(epe,tq)),Hp=1,rq(eq))}}function ZA(e,t,r){var i=new Db,n=t;return t==null?(i.restart(e,t,r),i):(i._restart=i.restart,i.restart=function(o,s,a){s=+s,a=a==null?Rb():+a,i._restart(function l(u){u+=n,i._restart(l,n+=s,a),o(u)},s,a)},i.restart(e,t,r),i)}function nq(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function oq(e){return e.x}function sq(e){return e.y}var rpe=10,ipe=Math.PI*(3-Math.sqrt(5));function JA(e){var t,r=1,i=.001,n=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,l=Nw(f),u=XA("tick","end"),c=nq();e==null&&(e=[]);function f(){h(),u.call("tick",t),r<i&&(l.stop(),u.call("end",t))}function h(m){var g,v=e.length,b;m===void 0&&(m=1);for(var y=0;y<m;++y)for(r+=(o-r)*n,a.forEach(function(x){x(r)}),g=0;g<v;++g)b=e[g],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return t}function p(){for(var m=0,g=e.length,v;m<g;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var b=rpe*Math.sqrt(.5+m),y=m*ipe;v.x=b*Math.cos(y),v.y=b*Math.sin(y)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function d(m){return m.initialize&&m.initialize(e,c),m}return p(),t={tick:h,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(m){return arguments.length?(e=m,p(),a.forEach(d),t):e},alpha:function(m){return arguments.length?(r=+m,t):r},alphaMin:function(m){return arguments.length?(i=+m,t):i},alphaDecay:function(m){return arguments.length?(n=+m,t):+n},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(s=1-m,t):1-s},randomSource:function(m){return arguments.length?(c=m,a.forEach(d),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,d(g)),t):a.get(m)},find:function(m,g,v){var b=0,y=e.length,x,S,_,w,k;for(v==null?v=1/0:v*=v,b=0;b<y;++b)w=e[b],x=m-w.x,S=g-w.y,_=x*x+S*S,_<v&&(k=w,v=_);return k},on:function(m,g){return arguments.length>1?(u.on(m,g),t):u.on(m)}}}function QA(){var e,t,r,i,n=li(-30),o,s=1,a=1/0,l=.81;function u(p){var d,m=e.length,g=xd(e,oq,sq).visitAfter(f);for(i=p,d=0;d<m;++d)t=e[d],g.visit(h)}function c(){if(e){var p,d=e.length,m;for(o=new Array(d),p=0;p<d;++p)m=e[p],o[m.index]=+n(m,p,e)}}function f(p){var d=0,m,g,v=0,b,y,x;if(p.length){for(b=y=x=0;x<4;++x)(m=p[x])&&(g=Math.abs(m.value))&&(d+=m.value,v+=g,b+=g*m.x,y+=g*m.y);p.x=b/v,p.y=y/v}else{m=p,m.x=m.data.x,m.y=m.data.y;do d+=o[m.data.index];while(m=m.next)}p.value=d}function h(p,d,m,g){if(!p.value)return!0;var v=p.x-t.x,b=p.y-t.y,y=g-d,x=v*v+b*b;if(y*y/l<x)return x<a&&(v===0&&(v=Ca(r),x+=v*v),b===0&&(b=Ca(r),x+=b*b),x<s&&(x=Math.sqrt(s*x)),t.vx+=v*p.value*i/x,t.vy+=b*p.value*i/x),!0;if(p.length||x>=a)return;(p.data!==t||p.next)&&(v===0&&(v=Ca(r),x+=v*v),b===0&&(b=Ca(r),x+=b*b),x<s&&(x=Math.sqrt(s*x)));do p.data!==t&&(y=o[p.data.index]*i/x,t.vx+=v*y,t.vy+=b*y);while(p=p.next)}return u.initialize=function(p,d){e=p,r=d,c()},u.strength=function(p){return arguments.length?(n=typeof p=="function"?p:li(+p),c(),u):n},u.distanceMin=function(p){return arguments.length?(s=p*p,u):Math.sqrt(s)},u.distanceMax=function(p){return arguments.length?(a=p*p,u):Math.sqrt(a)},u.theta=function(p){return arguments.length?(l=p*p,u):Math.sqrt(l)},u}function eT(e){var t=li(.1),r,i,n;typeof e!="function"&&(e=li(e==null?0:+e));function o(a){for(var l=0,u=r.length,c;l<u;++l)c=r[l],c.vx+=(n[l]-c.x)*i[l]*a}function s(){if(r){var a,l=r.length;for(i=new Array(l),n=new Array(l),a=0;a<l;++a)i[a]=isNaN(n[a]=+e(r[a],a,r))?0:+t(r[a],a,r)}}return o.initialize=function(a){r=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:li(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:li(+a),s(),o):e},o}function tT(e){var t=li(.1),r,i,n;typeof e!="function"&&(e=li(e==null?0:+e));function o(a){for(var l=0,u=r.length,c;l<u;++l)c=r[l],c.vy+=(n[l]-c.y)*i[l]*a}function s(){if(r){var a,l=r.length;for(i=new Array(l),n=new Array(l),a=0;a<l;++a)i[a]=isNaN(n[a]=+e(r[a],a,r))?0:+t(r[a],a,r)}}return o.initialize=function(a){r=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:li(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:li(+a),s(),o):e},o}var aq={center:WA,collide:GA,nbody:QA,link:YA,x:eT,y:tT},Mb="forces",rT=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],npe=["static","iterations"],lq=["x","y","vx","vy"];function iT(e){ee.call(this,null,e)}iT.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:lq}]};xe(iT,ee,{transform(e,t){var r=this.value,i=t.changed(t.ADD_REM),n=e.modified(rT),o=e.iterations||300;if(r?(i&&(t.modifies("index"),r.nodes(t.source)),(n||t.changed(t.MOD))&&uq(r,e,0,t)):(this.value=r=spe(t.source,e),r.on("tick",ope(t.dataflow,this)),e.static||(i=!0,r.tick()),t.modifies("index")),n||i||e.modified(npe)||t.changed()&&e.restart){if(r.alpha(Math.max(r.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(r.alphaMin(),1/o)),e.static)for(r.stop();--o>=0;)r.tick();else if(r.stopped()&&r.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){let r=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==Mb||c.op._argval.force!=="link")){for(var i=c.op._argops,n=0,o=i.length,s;n<o;++n)if(i[n].name==="links"&&(s=i[n].op.source)){r.pulse(s,r.changeset().reflow());break}}return t.reflow(e.modified()).modifies(lq)}});function ope(e,t){return()=>e.touch(t).run()}function spe(e,t){let r=JA(e),i=r.stop,n=r.restart,o=!1;return r.stopped=()=>o,r.restart=()=>(o=!1,n()),r.stop=()=>(o=!0,i()),uq(r,t,!0).on("end",()=>o=!0)}function uq(e,t,r,i){var n=ve(t.forces),o,s,a,l;for(o=0,s=rT.length;o<s;++o)a=rT[o],a!==Mb&&t.modified(a)&&e[a](t[a]);for(o=0,s=n.length;o<s;++o)l=Mb+o,a=r||t.modified(Mb,o)?lpe(n[o]):i&&ape(n[o],i)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(Mb+o,null);return e.numForces=n.length,e}function ape(e,t){var r,i;for(r in e)if(Ke(i=e[r])&&t.modified(mi(i)))return 1;return 0}function lpe(e){var t,r;_e(aq,e.force)||te("Unrecognized force: "+e.force),t=aq[e.force]();for(r in e)Ke(t[r])&&upe(t[r],e[r],e);return t}function upe(e,t,r){e(Ke(t)?i=>t(i,r):t)}var LT={};pi(LT,{nest:()=>TT,pack:()=>DT,partition:()=>RT,stratify:()=>MT,tree:()=>FT,treelinks:()=>OT,treemap:()=>$T});function cpe(e,t){return e.parent===t.parent?1:2}function fpe(e){return e.reduce(hpe,0)/e.length}function hpe(e,t){return e+t.x}function dpe(e){return 1+e.reduce(ppe,0)}function ppe(e,t){return Math.max(e,t.y)}function mpe(e){for(var t;t=e.children;)e=t[0];return e}function gpe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function oT(){var e=cpe,t=1,r=1,i=!1;function n(o){var s,a=0;o.eachAfter(function(h){var p=h.children;p?(h.x=fpe(p),h.y=dpe(p)):(h.x=s?a+=e(h,s):0,h.y=0,s=h)});var l=mpe(o),u=gpe(o),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return o.eachAfter(i?function(h){h.x=(h.x-o.x)*t,h.y=(o.y-h.y)*r}:function(h){h.x=(h.x-c)/(f-c)*t,h.y=(1-(o.y?h.y/o.y:1))*r})}return n.separation=function(o){return arguments.length?(e=o,n):e},n.size=function(o){return arguments.length?(i=!1,t=+o[0],r=+o[1],n):i?null:[t,r]},n.nodeSize=function(o){return arguments.length?(i=!0,t=+o[0],r=+o[1],n):i?[t,r]:null},n}function vpe(e){var t=0,r=e.children,i=r&&r.length;if(!i)t=1;else for(;--i>=0;)t+=r[i].value;e.value=t}function cq(){return this.eachAfter(vpe)}function fq(e,t){let r=-1;for(let i of this)e.call(t,i,++r,this);return this}function hq(e,t){for(var r=this,i=[r],n,o,s=-1;r=i.pop();)if(e.call(t,r,++s,this),n=r.children)for(o=n.length-1;o>=0;--o)i.push(n[o]);return this}function dq(e,t){for(var r=this,i=[r],n=[],o,s,a,l=-1;r=i.pop();)if(n.push(r),o=r.children)for(s=0,a=o.length;s<a;++s)i.push(o[s]);for(;r=n.pop();)e.call(t,r,++l,this);return this}function pq(e,t){let r=-1;for(let i of this)if(e.call(t,i,++r,this))return i}function mq(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,i=t.children,n=i&&i.length;--n>=0;)r+=i[n].value;t.value=r})}function gq(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function vq(e){for(var t=this,r=bpe(t,e),i=[t];t!==r;)t=t.parent,i.push(t);for(var n=i.length;e!==r;)i.splice(n,0,e),e=e.parent;return i}function bpe(e,t){if(e===t)return e;var r=e.ancestors(),i=t.ancestors(),n=null;for(e=r.pop(),t=i.pop();e===t;)n=e,e=r.pop(),t=i.pop();return n}function bq(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function yq(){return Array.from(this)}function xq(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function _q(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}function*wq(){var e=this,t,r=[e],i,n,o;do for(t=r.reverse(),r=[];e=t.pop();)if(yield e,i=e.children)for(n=0,o=i.length;n<o;++n)r.push(i[n]);while(r.length)}function Up(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=_pe)):t===void 0&&(t=xpe);for(var r=new Uu(e),i,n=[r],o,s,a,l;i=n.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,a=l-1;a>=0;--a)n.push(o=s[a]=new Uu(s[a])),o.parent=i,o.depth=i.depth+1;return r.eachBefore(sT)}function ype(){return Up(this).eachBefore(wpe)}function xpe(e){return e.children}function _pe(e){return Array.isArray(e)?e[1]:null}function wpe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function sT(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Uu(e){this.data=e,this.depth=this.height=0,this.parent=null}Uu.prototype=Up.prototype={constructor:Uu,count:cq,each:fq,eachAfter:dq,eachBefore:hq,find:pq,sum:mq,sort:gq,path:vq,ancestors:bq,descendants:yq,leaves:xq,links:_q,copy:ype,[Symbol.iterator]:wq};function qp(e){return e==null?null:aT(e)}function aT(e){if(typeof e!="function")throw new Error;return e}function qu(){return 0}function Mf(e){return function(){return e}}function Sq(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function Cq(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kq(e,t){let r=e.length,i,n;for(;r;)n=t()*r--|0,i=e[r],e[r]=e[n],e[n]=i;return e}function Eq(e,t){for(var r=0,i=(e=kq(Array.from(e),t)).length,n=[],o,s;r<i;)o=e[r],s&&Aq(s,o)?++r:(s=Cpe(n=Spe(n,o)),r=0);return s}function Spe(e,t){var r,i;if(lT(t,e))return[t];for(r=0;r<e.length;++r)if(Bw(t,e[r])&&lT(Fb(e[r],t),e))return[e[r],t];for(r=0;r<e.length-1;++r)for(i=r+1;i<e.length;++i)if(Bw(Fb(e[r],e[i]),t)&&Bw(Fb(e[r],t),e[i])&&Bw(Fb(e[i],t),e[r])&&lT(Tq(e[r],e[i],t),e))return[e[r],e[i],t];throw new Error}function Bw(e,t){var r=e.r-t.r,i=t.x-e.x,n=t.y-e.y;return r<0||r*r<i*i+n*n}function Aq(e,t){var r=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,n=t.y-e.y;return r>0&&r*r>i*i+n*n}function lT(e,t){for(var r=0;r<t.length;++r)if(!Aq(e,t[r]))return!1;return!0}function Cpe(e){switch(e.length){case 1:return kpe(e[0]);case 2:return Fb(e[0],e[1]);case 3:return Tq(e[0],e[1],e[2])}}function kpe(e){return{x:e.x,y:e.y,r:e.r}}function Fb(e,t){var r=e.x,i=e.y,n=e.r,o=t.x,s=t.y,a=t.r,l=o-r,u=s-i,c=a-n,f=Math.sqrt(l*l+u*u);return{x:(r+o+l/f*c)/2,y:(i+s+u/f*c)/2,r:(f+n+a)/2}}function Tq(e,t,r){var i=e.x,n=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=r.x,c=r.y,f=r.r,h=i-s,p=i-u,d=n-a,m=n-c,g=l-o,v=f-o,b=i*i+n*n-o*o,y=b-s*s-a*a+l*l,x=b-u*u-c*c+f*f,S=p*d-h*m,_=(d*x-m*y)/(S*2)-i,w=(m*g-d*v)/S,k=(p*y-h*x)/(S*2)-n,A=(h*v-p*g)/S,M=w*w+A*A-1,D=2*(o+_*w+k*A),z=_*_+k*k-o*o,P=-(Math.abs(M)>1e-6?(D+Math.sqrt(D*D-4*M*z))/(2*M):z/D);return{x:i+_+w*P,y:n+k+A*P,r:P}}function Dq(e,t,r){var i=e.x-t.x,n,o,s=e.y-t.y,a,l,u=i*i+s*s;u?(o=t.r+r.r,o*=o,l=e.r+r.r,l*=l,o>l?(n=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-n*n)),r.x=e.x-n*i-a*s,r.y=e.y-n*s+a*i):(n=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-n*n)),r.x=t.x+n*i-a*s,r.y=t.y+n*s+a*i)):(r.x=t.x+r.r,r.y=t.y)}function Rq(e,t){var r=e.r+t.r-1e-6,i=t.x-e.x,n=t.y-e.y;return r>0&&r*r>i*i+n*n}function Mq(e){var t=e._,r=e.next._,i=t.r+r.r,n=(t.x*r.r+r.x*t.r)/i,o=(t.y*r.r+r.y*t.r)/i;return n*n+o*o}function zw(e){this._=e,this.next=null,this.previous=null}function Fq(e,t){if(!(o=(e=Cq(e)).length))return 0;var r,i,n,o,s,a,l,u,c,f,h;if(r=e[0],r.x=0,r.y=0,!(o>1))return r.r;if(i=e[1],r.x=-i.r,i.x=r.r,i.y=0,!(o>2))return r.r+i.r;Dq(i,r,n=e[2]),r=new zw(r),i=new zw(i),n=new zw(n),r.next=n.previous=i,i.next=r.previous=n,n.next=i.previous=r;e:for(l=3;l<o;++l){Dq(r._,i._,n=e[l]),n=new zw(n),u=i.next,c=r.previous,f=i._.r,h=r._.r;do if(f<=h){if(Rq(u._,n._)){i=u,r.next=i,i.previous=r,--l;continue e}f+=u._.r,u=u.next}else{if(Rq(c._,n._)){r=c,r.next=i,i.previous=r,--l;continue e}h+=c._.r,c=c.previous}while(u!==c.next);for(n.previous=r,n.next=i,r.next=i.previous=i=n,s=Mq(r);(n=n.next)!==i;)(a=Mq(n))<s&&(r=n,s=a);i=r.next}for(r=[i._],n=i;(n=n.next)!==i;)r.push(n._);for(n=Eq(r,t),l=0;l<o;++l)r=e[l],r.x-=n.x,r.y-=n.y;return n.r}function Epe(e){return Math.sqrt(e.value)}function cT(){var e=null,t=1,r=1,i=qu;function n(o){let s=Sq();return o.x=t/2,o.y=r/2,e?o.eachBefore(Oq(e)).eachAfter(uT(i,.5,s)).eachBefore($q(1)):o.eachBefore(Oq(Epe)).eachAfter(uT(qu,1,s)).eachAfter(uT(i,o.r/Math.min(t,r),s)).eachBefore($q(Math.min(t,r)/(2*o.r))),o}return n.radius=function(o){return arguments.length?(e=qp(o),n):e},n.size=function(o){return arguments.length?(t=+o[0],r=+o[1],n):[t,r]},n.padding=function(o){return arguments.length?(i=typeof o=="function"?o:Mf(+o),n):i},n}function Oq(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function uT(e,t,r){return function(i){if(n=i.children){var n,o,s=n.length,a=e(i)*t||0,l;if(a)for(o=0;o<s;++o)n[o].r+=a;if(l=Fq(n,r),a)for(o=0;o<s;++o)n[o].r-=a;i.r=l+a}}}function $q(e){return function(t){var r=t.parent;t.r*=e,r&&(t.x=r.x+e*t.x,t.y=r.y+e*t.y)}}function Hw(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function ka(e,t,r,i,n){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-t)/e.value;++a<l;)s=o[a],s.y0=r,s.y1=n,s.x0=t,s.x1=t+=s.value*u}function fT(){var e=1,t=1,r=0,i=!1;function n(s){var a=s.height+1;return s.x0=s.y0=r,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),i&&s.eachBefore(Hw),s}function o(s,a){return function(l){l.children&&ka(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,f=l.x1-r,h=l.y1-r;f<u&&(u=f=(u+f)/2),h<c&&(c=h=(c+h)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=h}}return n.round=function(s){return arguments.length?(i=!!s,n):i},n.size=function(s){return arguments.length?(e=+s[0],t=+s[1],n):[e,t]},n.padding=function(s){return arguments.length?(r=+s,n):r},n}var Ape={depth:-1},Lq={},hT={};function Tpe(e){return e.id}function Dpe(e){return e.parentId}function Uw(){var e=Tpe,t=Dpe,r;function i(n){var o=Array.from(n),s=e,a=t,l,u,c,f,h,p,d,m,g=new Map;if(r!=null){let v=o.map((x,S)=>Rpe(r(x,S,n))),b=v.map(Pq),y=new Set(v).add("");for(let x of b)y.has(x)||(y.add(x),v.push(x),b.push(Pq(x)),o.push(hT));s=(x,S)=>v[S],a=(x,S)=>b[S]}for(c=0,l=o.length;c<l;++c)u=o[c],p=o[c]=new Uu(u),(d=s(u,c,n))!=null&&(d+="")&&(m=p.id=d,g.set(m,g.has(m)?Lq:p)),(d=a(u,c,n))!=null&&(d+="")&&(p.parent=d);for(c=0;c<l;++c)if(p=o[c],d=p.parent){if(h=g.get(d),!h)throw new Error("missing: "+d);if(h===Lq)throw new Error("ambiguous: "+d);h.children?h.children.push(p):h.children=[p],p.parent=h}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(r!=null){for(;f.data===hT&&f.children.length===1;)f=f.children[0],--l;for(let v=o.length-1;v>=0&&(p=o[v],p.data===hT);--v)p.data=null}if(f.parent=Ape,f.eachBefore(function(v){v.depth=v.parent.depth+1,--l}).eachBefore(sT),f.parent=null,l>0)throw new Error("cycle");return f}return i.id=function(n){return arguments.length?(e=qp(n),i):e},i.parentId=function(n){return arguments.length?(t=qp(n),i):t},i.path=function(n){return arguments.length?(r=qp(n),i):r},i}function Rpe(e){e=`${e}`;let t=e.length;return dT(e,t-1)&&!dT(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Pq(e){let t=e.length;if(t<2)return"";for(;--t>1&&!dT(e,t););return e.slice(0,t)}function dT(e,t){if(e[t]==="/"){let r=0;for(;t>0&&e[--t]==="\\";)++r;if((r&1)===0)return!0}return!1}function Mpe(e,t){return e.parent===t.parent?1:2}function pT(e){var t=e.children;return t?t[0]:e.t}function mT(e){var t=e.children;return t?t[t.length-1]:e.t}function Fpe(e,t,r){var i=r/(t.i-e.i);t.c-=i,t.s+=r,e.c+=i,t.z+=r,t.m+=r}function Ope(e){for(var t=0,r=0,i=e.children,n=i.length,o;--n>=0;)o=i[n],o.z+=t,o.m+=t,t+=o.s+(r+=o.c)}function $pe(e,t,r){return e.a.parent===t.parent?e.a:r}function qw(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}qw.prototype=Object.create(Uu.prototype);function Lpe(e){for(var t=new qw(e,0),r,i=[t],n,o,s,a;r=i.pop();)if(o=r._.children)for(r.children=new Array(a=o.length),s=a-1;s>=0;--s)i.push(n=r.children[s]=new qw(o[s],s)),n.parent=r;return(t.parent=new qw(null,0)).children=[t],t}function gT(){var e=Mpe,t=1,r=1,i=null;function n(u){var c=Lpe(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),i)u.eachBefore(l);else{var f=u,h=u,p=u;u.eachBefore(function(b){b.x<f.x&&(f=b),b.x>h.x&&(h=b),b.depth>p.depth&&(p=b)});var d=f===h?1:e(f,h)/2,m=d-f.x,g=t/(h.x+d+m),v=r/(p.depth||1);u.eachBefore(function(b){b.x=(b.x+m)*g,b.y=b.depth*v})}return u}function o(u){var c=u.children,f=u.parent.children,h=u.i?f[u.i-1]:null;if(c){Ope(u);var p=(c[0].z+c[c.length-1].z)/2;h?(u.z=h.z+e(u._,h._),u.m=u.z-p):u.z=p}else h&&(u.z=h.z+e(u._,h._));u.parent.A=a(u,h,u.parent.A||f[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var h=u,p=u,d=c,m=h.parent.children[0],g=h.m,v=p.m,b=d.m,y=m.m,x;d=mT(d),h=pT(h),d&&h;)m=pT(m),p=mT(p),p.a=u,x=d.z+b-h.z-g+e(d._,h._),x>0&&(Fpe($pe(d,u,f),u,x),g+=x,v+=x),b+=d.m,g+=h.m,y+=m.m,v+=p.m;d&&!mT(p)&&(p.t=d,p.m+=b-v),h&&!pT(m)&&(m.t=h,m.m+=g-y,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*r}return n.separation=function(u){return arguments.length?(e=u,n):e},n.size=function(u){return arguments.length?(i=!1,t=+u[0],r=+u[1],n):i?null:[t,r]},n.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],r=+u[1],n):i?[t,r]:null},n}function ju(e,t,r,i,n){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(n-r)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=i,s.y0=r,s.y1=r+=s.value*u}var vT=(1+Math.sqrt(5))/2;function bT(e,t,r,i,n,o){for(var s=[],a=t.children,l,u,c=0,f=0,h=a.length,p,d,m=t.value,g,v,b,y,x,S,_;c<h;){p=n-r,d=o-i;do g=a[f++].value;while(!g&&f<h);for(v=b=g,S=Math.max(d/p,p/d)/(m*e),_=g*g*S,x=Math.max(b/_,_/v);f<h;++f){if(g+=u=a[f].value,u<v&&(v=u),u>b&&(b=u),_=g*g*S,y=Math.max(b/_,_/v),y>x){g-=u;break}x=y}s.push(l={value:g,dice:p<d,children:a.slice(c,f)}),l.dice?ka(l,r,i,n,m?i+=d*g/m:o):ju(l,r,i,m?r+=p*g/m:n,o),m-=g,c=f}return s}var Ob=(function e(t){function r(i,n,o,s,a){bT(t,i,n,o,s,a)}return r.ratio=function(i){return e((i=+i)>1?i:1)},r})(vT);function yT(){var e=Ob,t=!1,r=1,i=1,n=[0],o=qu,s=qu,a=qu,l=qu,u=qu;function c(h){return h.x0=h.y0=0,h.x1=r,h.y1=i,h.eachBefore(f),n=[0],t&&h.eachBefore(Hw),h}function f(h){var p=n[h.depth],d=h.x0+p,m=h.y0+p,g=h.x1-p,v=h.y1-p;g<d&&(d=g=(d+g)/2),v<m&&(m=v=(m+v)/2),h.x0=d,h.y0=m,h.x1=g,h.y1=v,h.children&&(p=n[h.depth+1]=o(h)/2,d+=u(h)-p,m+=s(h)-p,g-=a(h)-p,v-=l(h)-p,g<d&&(d=g=(d+g)/2),v<m&&(m=v=(m+v)/2),e(h,d,m,g,v))}return c.round=function(h){return arguments.length?(t=!!h,c):t},c.size=function(h){return arguments.length?(r=+h[0],i=+h[1],c):[r,i]},c.tile=function(h){return arguments.length?(e=aT(h),c):e},c.padding=function(h){return arguments.length?c.paddingInner(h).paddingOuter(h):c.paddingInner()},c.paddingInner=function(h){return arguments.length?(o=typeof h=="function"?h:Mf(+h),c):o},c.paddingOuter=function(h){return arguments.length?c.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):c.paddingTop()},c.paddingTop=function(h){return arguments.length?(s=typeof h=="function"?h:Mf(+h),c):s},c.paddingRight=function(h){return arguments.length?(a=typeof h=="function"?h:Mf(+h),c):a},c.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Mf(+h),c):l},c.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:Mf(+h),c):u},c}function xT(e,t,r,i,n){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;c(0,a,e.value,t,r,i,n);function c(f,h,p,d,m,g,v){if(f>=h-1){var b=o[f];b.x0=d,b.y0=m,b.x1=g,b.y1=v;return}for(var y=u[f],x=p/2+y,S=f+1,_=h-1;S<_;){var w=S+_>>>1;u[w]<x?S=w+1:_=w}x-u[S-1]<u[S]-x&&f+1<S&&--S;var k=u[S]-y,A=p-k;if(g-d>v-m){var M=p?(d*A+g*k)/p:g;c(f,S,k,d,m,M,v),c(S,h,A,M,m,g,v)}else{var D=p?(m*A+v*k)/p:v;c(f,S,k,d,m,g,D),c(S,h,A,d,D,g,v)}}}function _T(e,t,r,i,n){(e.depth&1?ju:ka)(e,t,r,i,n)}var wT=(function e(t){function r(i,n,o,s,a){if((l=i._squarify)&&l.ratio===t)for(var l,u,c,f,h=-1,p,d=l.length,m=i.value;++h<d;){for(u=l[h],c=u.children,f=u.value=0,p=c.length;f<p;++f)u.value+=c[f].value;u.dice?ka(u,n,o,s,m?o+=(a-o)*u.value/m:a):ju(u,n,o,m?n+=(s-n)*u.value/m:s,a),m-=u.value}else i._squarify=l=bT(t,i,n,o,s,a),l.ratio=t}return r.ratio=function(i){return e((i=+i)>1?i:1)},r})(vT);function ST(e,t,r){let i={};return e.each(n=>{let o=n.data;r(o)&&(i[t(o)]=n)}),e.lookup=i,e}function TT(e){ee.call(this,null,e)}TT.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var Ppe=e=>e.values;xe(TT,ee,{transform(e,t){t.source||te("Nest transform requires an upstream data source.");var r=e.generate,i=e.modified(),n=t.clone(),o=this.value;return(!o||i||t.changed())&&(o&&o.each(s=>{s.children&&Bh(s.data)&&n.rem.push(s.data)}),this.value=o=Up({values:ve(e.keys).reduce((s,a)=>(s.key(a),s),Ipe()).entries(n.source)},Ppe),r&&o.each(s=>{s.children&&(s=xt(s.data),n.add.push(s),n.source.push(s))}),ST(o,qe,qe)),n.source.root=o,n}});function Ipe(){let e=[],t={entries:n=>i(r(n,0),0),key:n=>(e.push(n),t)};function r(n,o){if(o>=e.length)return n;let s=n.length,a=e[o++],l={},u={},c=-1,f,h,p;for(;++c<s;)f=a(h=n[c])+"",(p=l[f])?p.push(h):l[f]=[h];for(f in l)u[f]=r(l[f],o);return u}function i(n,o){if(++o>e.length)return n;let s=[];for(let a in n)s.push({key:a,values:i(n[a],o)});return s}return t}function Wu(e){ee.call(this,null,e)}var Npe=(e,t)=>e.parent===t.parent?1:2;xe(Wu,ee,{transform(e,t){(!t.source||!t.source.root)&&te(this.constructor.name+" transform requires a backing tree data source.");let r=this.layout(e.method),i=this.fields,n=t.source.root,o=e.as||i;e.field?n.sum(e.field):n.count(),e.sort&&n.sort(ml(e.sort,s=>s.data)),Bpe(r,this.params,e),r.separation&&r.separation(e.separation!==!1?Npe:ul);try{this.value=r(n)}catch(s){te(s)}return n.each(s=>zpe(s,i,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function Bpe(e,t,r){for(let i,n=0,o=t.length;n<o;++n)i=t[n],i in r&&e[i](r[i])}function zpe(e,t,r){let i=e.data,n=t.length-1;for(let o=0;o<n;++o)i[r[o]]=e[t[o]];i[r[n]]=e.children?e.children.length:0}var CT=["x","y","r","depth","children"];function DT(e){Wu.call(this,e)}DT.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:CT.length,default:CT}]};xe(DT,Wu,{layout:cT,params:["radius","size","padding"],fields:CT});var kT=["x0","y0","x1","y1","depth","children"];function RT(e){Wu.call(this,e)}RT.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kT.length,default:kT}]};xe(RT,Wu,{layout:fT,params:["size","round","padding"],fields:kT});function MT(e){ee.call(this,null,e)}MT.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};xe(MT,ee,{transform(e,t){t.source||te("Stratify transform requires an upstream data source.");let r=this.value,i=e.modified(),n=t.fork(t.ALL).materialize(t.SOURCE),o=!r||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return n.source=n.source.slice(),o&&(r=n.source.length?ST(Uw().id(e.key).parentId(e.parentKey)(n.source),e.key,gi):ST(Uw()([{}]),e.key,e.key)),n.source.root=this.value=r,n}});var Iq={tidy:gT,cluster:oT},ET=["x","y","depth","children"];function FT(e){Wu.call(this,e)}FT.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:ET.length,default:ET}]};xe(FT,Wu,{layout(e){let t=e||"tidy";if(_e(Iq,t))return Iq[t]();te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:ET});function OT(e){ee.call(this,[],e)}OT.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};xe(OT,ee,{transform(e,t){let r=this.value,i=t.source&&t.source.root,n=t.fork(t.NO_SOURCE),o={};return i||te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(n.rem=r,t.visit(t.SOURCE,s=>o[qe(s)]=1),i.each(s=>{let a=s.data,l=s.parent&&s.parent.data;l&&o[qe(a)]&&o[qe(l)]&&n.add.push(xt({source:l,target:a}))}),this.value=n.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[qe(s)]=1),r.forEach(s=>{(o[qe(s.source)]||o[qe(s.target)])&&n.mod.push(s)})),n}});var Nq={binary:xT,dice:ka,slice:ju,slicedice:_T,squarify:Ob,resquarify:wT},AT=["x0","y0","x1","y1","depth","children"];function $T(e){Wu.call(this,e)}$T.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:AT.length,default:AT}]};xe($T,Wu,{layout(){let e=yT();return e.ratio=t=>{let r=e.tile();r.ratio&&e.tile(r.ratio(t))},e.method=t=>{_e(Nq,t)?e.tile(Nq[t]):te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:AT});var VT={};pi(VT,{label:()=>WT});var PT=4278190080;function Hpe(e,t){let r=e.bitmap();return(t||[]).forEach(i=>r.set(e(i.boundary[0]),e(i.boundary[3]))),[r,void 0]}function Upe(e,t,r,i,n){let o=e.width,s=e.height,a=i||n,l=Ts(o,s).getContext("2d"),u=Ts(o,s).getContext("2d"),c=a&&Ts(o,s).getContext("2d");r.forEach(k=>jw(l,k,!1)),jw(u,t,!1),a&&jw(c,t,!0);let f=IT(l,o,s),h=IT(u,o,s),p=a&&IT(c,o,s),d=e.bitmap(),m=a&&e.bitmap(),g,v,b,y,x,S,_,w;for(v=0;v<s;++v)for(g=0;g<o;++g)x=v*o+g,S=f[x]&PT,w=h[x]&PT,_=a&&p[x]&PT,(S||_||w)&&(b=e(g),y=e(v),!n&&(S||w)&&d.set(b,y),a&&(S||_)&&m.set(b,y));return[d,m]}function IT(e,t,r){return new Uint32Array(e.getImageData(0,0,t,r).data.buffer)}function jw(e,t,r){if(!t.length)return;let i=t[0].mark.marktype;i==="group"?t.forEach(n=>{n.items.forEach(o=>jw(e,o.items,r))}):Qn[i].draw(e,{items:r?t.map(qpe):t})}function qpe(e){let t=zh(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}var Vu=5,oo=31,$b=32,Ff=new Uint32Array($b+1),Ea=new Uint32Array($b+1);Ea[0]=0;Ff[0]=~Ea[0];for(let e=1;e<=$b;++e)Ea[e]=Ea[e-1]<<1|1,Ff[e]=~Ea[e];function jpe(e,t){let r=new Uint32Array(~~((e*t+$b)/$b));function i(o,s){r[o]|=s}function n(o,s){r[o]&=s}return{array:r,get:(o,s)=>{let a=s*e+o;return r[a>>>Vu]&1<<(a&oo)},set:(o,s)=>{let a=s*e+o;i(a>>>Vu,1<<(a&oo))},clear:(o,s)=>{let a=s*e+o;n(a>>>Vu,~(1<<(a&oo)))},getRange:(o,s,a,l)=>{let u=l,c,f,h,p;for(;u>=s;--u)if(c=u*e+o,f=u*e+a,h=c>>>Vu,p=f>>>Vu,h===p){if(r[h]&Ff[c&oo]&Ea[(f&oo)+1])return!0}else{if(r[h]&Ff[c&oo]||r[p]&Ea[(f&oo)+1])return!0;for(let d=h+1;d<p;++d)if(r[d])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,f,h,p;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Vu,h=c>>>Vu,f===h)i(f,Ff[u&oo]&Ea[(c&oo)+1]);else for(i(f,Ff[u&oo]),i(h,Ea[(c&oo)+1]),p=f+1;p<h;++p)i(p,4294967295)},clearRange:(o,s,a,l)=>{let u,c,f,h,p;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Vu,h=c>>>Vu,f===h)n(f,Ea[u&oo]|Ff[(c&oo)+1]);else for(n(f,Ea[u&oo]),n(h,Ff[(c&oo)+1]),p=f+1;p<h;++p)n(p,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function Wpe(e,t,r){let i=Math.max(1,Math.sqrt(e*t/1e6)),n=~~((e+2*r+i)/i),o=~~((t+2*r+i)/i),s=a=>~~((a+r)/i);return s.invert=a=>a*i-r,s.bitmap=()=>jpe(n,o),s.ratio=i,s.padding=r,s.width=e,s.height=t,s}function Vpe(e,t,r,i){let n=e.width,o=e.height;return function(s){let a=s.datum.datum.items[i].items,l=a.length,u=s.datum.fontSize,c=ko.width(s.datum,s.datum.text),f=0,h,p,d,m,g,v,b;for(let y=0;y<l;++y)h=a[y].x,d=a[y].y,p=a[y].x2===void 0?h:a[y].x2,m=a[y].y2===void 0?d:a[y].y2,g=(h+p)/2,v=(d+m)/2,b=Math.abs(p-h+m-d),b>=f&&(f=b,s.x=g,s.y=v);return g=c/2,v=u/2,h=s.x-g,p=s.x+g,d=s.y-v,m=s.y+v,s.align="center",h<0&&p<=n?s.align="left":0<=h&&n<p&&(s.align="right"),s.baseline="middle",d<0&&m<=o?s.baseline="top":0<=d&&o<m&&(s.baseline="bottom"),!0}}function Ww(e,t,r,i,n,o){let s=r/2;return e-s<0||e+s>n||t-(s=i/2)<0||t+s>o}function Of(e,t,r,i,n,o,s,a){let l=n*o/(i*2),u=e(t-l),c=e(t+l),f=e(r-(o=o/2)),h=e(r+o);return s.outOfBounds(u,f,c,h)||s.getRange(u,f,c,h)||a&&a.getRange(u,f,c,h)}function Gpe(e,t,r,i){let n=e.width,o=e.height,s=t[0],a=t[1];function l(u,c,f,h,p){let d=e.invert(u),m=e.invert(c),g=f,v=o,b;if(!Ww(d,m,h,p,n,o)&&!Of(e,d,m,p,h,g,s,a)&&!Of(e,d,m,p,h,p,s,null)){for(;v-g>=1;)b=(g+v)/2,Of(e,d,m,p,h,b,s,a)?v=b:g=b;if(g>f)return[d,m,g,!0]}}return function(u){let c=u.datum.datum.items[i].items,f=c.length,h=u.datum.fontSize,p=ko.width(u.datum,u.datum.text),d=r?h:0,m=!1,g=!1,v=0,b,y,x,S,_,w,k,A,M,D,z,P,I,N,H,T,O;for(let L=0;L<f;++L){for(b=c[L].x,x=c[L].y,y=c[L].x2===void 0?b:c[L].x2,S=c[L].y2===void 0?x:c[L].y2,b>y&&(O=b,b=y,y=O),x>S&&(O=x,x=S,S=O),M=e(b),z=e(y),D=~~((M+z)/2),P=e(x),N=e(S),I=~~((P+N)/2),k=D;k>=M;--k)for(A=I;A>=P;--A)T=l(k,A,d,p,h),T&&([u.x,u.y,d,m]=T);for(k=D;k<=z;++k)for(A=I;A<=N;++A)T=l(k,A,d,p,h),T&&([u.x,u.y,d,m]=T);!m&&!r&&(H=Math.abs(y-b+S-x),_=(b+y)/2,w=(x+S)/2,H>=v&&!Ww(_,w,p,h,n,o)&&!Of(e,_,w,h,p,h,s,null)&&(v=H,u.x=_,u.y=w,g=!0))}return m||g?(_=p/2,w=h/2,s.setRange(e(u.x-_),e(u.y-w),e(u.x+_),e(u.y+w)),u.align="center",u.baseline="middle",!0):!1}}var Ype=[-1,-1,1,1],Xpe=[-1,1,-1,1];function Kpe(e,t,r,i){let n=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){let c=u.datum.datum.items[i].items,f=c.length,h=u.datum.fontSize,p=ko.width(u.datum,u.datum.text),d=[],m=r?h:0,g=!1,v=!1,b=0,y,x,S,_,w,k,A,M,D,z,P,I;for(let N=0;N<f;++N){for(y=c[N].x,S=c[N].y,x=c[N].x2===void 0?y:c[N].x2,_=c[N].y2===void 0?S:c[N].y2,d.push([e((y+x)/2),e((S+_)/2)]);d.length;)if([A,M]=d.pop(),!(s.get(A,M)||a.get(A,M)||l.get(A,M))){l.set(A,M);for(let H=0;H<4;++H)w=A+Ype[H],k=M+Xpe[H],l.outOfBounds(w,k,w,k)||d.push([w,k]);if(w=e.invert(A),k=e.invert(M),D=m,z=o,!Ww(w,k,p,h,n,o)&&!Of(e,w,k,h,p,D,s,a)&&!Of(e,w,k,h,p,h,s,null)){for(;z-D>=1;)P=(D+z)/2,Of(e,w,k,h,p,P,s,a)?z=P:D=P;D>m&&(u.x=w,u.y=k,m=D,g=!0)}}!g&&!r&&(I=Math.abs(x-y+_-S),w=(y+x)/2,k=(S+_)/2,I>=b&&!Ww(w,k,p,h,n,o)&&!Of(e,w,k,h,p,h,s,null)&&(b=I,u.x=w,u.y=k,v=!0))}return g||v?(w=p/2,k=h/2,s.setRange(e(u.x-w),e(u.y-k),e(u.x+w),e(u.y+k)),u.align="center",u.baseline="middle",!0):!1}}var Zpe=["right","center","left"],Jpe=["bottom","middle","top"];function Qpe(e,t,r,i){let n=e.width,o=e.height,s=t[0],a=t[1],l=i.length;return function(u){let c=u.boundary,f=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>n||c[3]>o)return!1;let h=u.textWidth??0,p,d,m,g,v,b,y,x,S,_,w,k,A,M,D;for(let z=0;z<l;++z){if(p=(r[z]&3)-1,d=(r[z]>>>2&3)-1,m=p===0&&d===0||i[z]<0,g=p&&d?Math.SQRT1_2:1,v=i[z]<0?-1:1,b=c[1+p]+i[z]*p*g,w=c[4+d]+v*f*d/2+i[z]*d*g,x=w-f/2,S=w+f/2,k=e(b),M=e(x),D=e(S),!h)if(Bq(k,k,M,D,s,a,b,b,x,S,c,m))h=ko.width(u.datum,u.datum.text);else continue;if(_=b+v*h*p/2,b=_-h/2,y=_+h/2,k=e(b),A=e(y),Bq(k,A,M,D,s,a,b,y,x,S,c,m))return u.x=p?p*v<0?y:b:_,u.y=d?d*v<0?S:x:w,u.align=Zpe[p*v+1],u.baseline=Jpe[d*v+1],s.setRange(k,M,A,D),!0}return!1}}function Bq(e,t,r,i,n,o,s,a,l,u,c,f){return!(n.outOfBounds(e,r,t,i)||(f&&o||n).getRange(e,r,t,i))}var NT=0,BT=4,zT=8,HT=0,UT=1,qT=2,eme={"top-left":NT+HT,top:NT+UT,"top-right":NT+qT,left:BT+HT,middle:BT+UT,right:BT+qT,"bottom-left":zT+HT,bottom:zT+UT,"bottom-right":zT+qT},tme={naive:Vpe,"reduced-search":Gpe,floodfill:Kpe};function rme(e,t,r,i,n,o,s,a,l,u,c){if(!e.length)return e;let f=Math.max(i.length,n.length),h=ime(i,f),p=nme(n,f),d=ome(e[0].datum),m=d==="group"&&e[0].datum.items[l].marktype,g=m==="area",v=sme(d,m,a,l),b=u===null||u===1/0,y=g&&c==="naive",x=-1,S=-1,_=e.map(M=>{let D=b?ko.width(M,M.text):void 0;return x=Math.max(x,D),S=Math.max(S,M.fontSize),{datum:M,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(M),textWidth:D}});u=u===null||u===1/0?Math.max(x,S)+Math.max(...i):u;let w=Wpe(t[0],t[1],u),k;if(!y){r&&_.sort((z,P)=>r(z.datum,P.datum));let M=!1;for(let z=0;z<p.length&&!M;++z)M=p[z]===5||h[z]<0;let D=(d&&s||g)&&e.map(z=>z.datum);k=o.length||D?Upe(w,D||[],o,M,g):Hpe(w,s&&_)}let A=g?tme[c](w,k,s,l):Qpe(w,k,p,h);return _.forEach(M=>M.opacity=+A(M)),_}function ime(e,t){let r=new Float64Array(t),i=e.length;for(let n=0;n<i;++n)r[n]=e[n]||0;for(let n=i;n<t;++n)r[n]=r[i-1];return r}function nme(e,t){let r=new Int8Array(t),i=e.length;for(let n=0;n<i;++n)r[n]|=eme[e[n]];for(let n=i;n<t;++n)r[n]=r[i-1];return r}function ome(e){return e&&e.mark&&e.mark.marktype}function sme(e,t,r,i){let n=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>n(o.datum):t==="line"?o=>{let s=o.datum.items[i].items;return n(s.length?s[r==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{let s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:n}var jT=["x","y","opacity","align","baseline"],zq=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function WT(e){ee.call(this,null,e)}WT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:zq},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:jT.length,default:jT}]};xe(WT,ee,{transform(e,t){function r(o){let s=e[o];return Ke(s)&&t.modified(s.fields)}let i=e.modified();if(!(i||t.changed(t.ADD_REM)||r("sort")))return;(!e.size||e.size.length!==2)&&te("Size parameter should be specified as a [width, height] array.");let n=e.as||jT;return rme(t.materialize(t.SOURCE).source||[],e.size,e.sort,ve(e.offset==null?1:e.offset),ve(e.anchor||zq),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{let s=o.datum;s[n[0]]=o.x,s[n[1]]=o.y,s[n[2]]=o.opacity,s[n[3]]=o.align,s[n[4]]=o.baseline}),t.reflow(i).modifies(n)}});var KT={};pi(KT,{loess:()=>YT,regression:()=>XT});function Hq(e,t){var r=[],i=function(c){return c(a)},n,o,s,a,l,u;if(t==null)r.push(e);else for(n={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(i),u=n[l],u||(n[l]=u=[],u.dims=l,r.push(u)),u.push(a);return r}function YT(e){ee.call(this,null,e)}YT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};xe(YT,ee,{transform(e,t){let r=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let i=t.materialize(t.SOURCE).source,n=Hq(i,e.groupby),o=(e.groupby||[]).map(dr),s=o.length,a=e.as||[dr(e.x),dr(e.y)],l=[];n.forEach(u=>{OC(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{let f={};for(let h=0;h<s;++h)f[o[h]]=u.dims[h];f[a[0]]=c[0],f[a[1]]=c[1],l.push(xt(f))})}),this.value&&(r.rem=this.value),this.value=r.add=r.source=l}return r}});var GT={constant:m_,linear:v_,log:DC,exp:RC,pow:MC,quad:b_,poly:FC},ame=(e,t)=>e==="poly"?t:e==="quad"?2:1;function XT(e){ee.call(this,null,e)}XT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(GT)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};xe(XT,ee,{transform(e,t){let r=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){let i=t.materialize(t.SOURCE).source,n=Hq(i,e.groupby),o=(e.groupby||[]).map(dr),s=e.method||"linear",a=e.order==null?3:e.order,l=ame(s,a),u=e.as||[dr(e.x),dr(e.y)],c=GT[s],f=[],h=e.extent;_e(GT,s)||te("Invalid regression method: "+s),h!=null&&s==="log"&&h[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),n.forEach(p=>{if(p.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}let m=c(p,e.x,e.y,a);if(e.params){f.push(xt({keys:p.dims,coef:m.coef,rSquared:m.rSquared}));return}let g=h||Wn(p,e.x),v=b=>{let y={};for(let x=0;x<o.length;++x)y[o[x]]=p.dims[x];y[u[0]]=b[0],y[u[1]]=b[1],f.push(xt(y))};s==="linear"||s==="constant"?g.forEach(b=>v([b,m.predict(b)])):Q0(m.predict,g,25,200).forEach(v)}),this.value&&(r.rem=this.value),this.value=r.add=r.source=f}return r}});var QT={};pi(QT,{voronoi:()=>JT});var Tt=11102230246251565e-32,ui=134217729,Lb=(3+8*Tt)*Tt;function wd(e,t,r,i,n){let o,s,a,l,u=t[0],c=i[0],f=0,h=0;c>u==c>-u?(o=u,u=t[++f]):(o=c,c=i[++h]);let p=0;if(f<e&&h<r)for(c>u==c>-u?(s=u+o,a=o-(s-u),u=t[++f]):(s=c+o,a=o-(s-c),c=i[++h]),o=s,a!==0&&(n[p++]=a);f<e&&h<r;)c>u==c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=i[++h]),o=s,a!==0&&(n[p++]=a);for(;f<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f],o=s,a!==0&&(n[p++]=a);for(;h<r;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=i[++h],o=s,a!==0&&(n[p++]=a);return(o!==0||p===0)&&(n[p++]=o),p}function Pb(e,t){let r=t[0];for(let i=1;i<e;i++)r+=t[i];return r}function be(e){return new Float64Array(e)}var lme=(3+16*Tt)*Tt,ume=(2+12*Tt)*Tt,cme=(9+64*Tt)*Tt*Tt,jp=be(4),Uq=be(8),qq=be(12),jq=be(16),so=be(4);function fme(e,t,r,i,n,o,s){let a,l,u,c,f,h,p,d,m,g,v,b,y,x,S,_,w,k,A=e-n,M=r-n,D=t-o,z=i-o;x=A*z,h=ui*A,p=h-(h-A),d=A-p,h=ui*z,m=h-(h-z),g=z-m,S=d*g-(x-p*m-d*m-p*g),_=D*M,h=ui*D,p=h-(h-D),d=D-p,h=ui*M,m=h-(h-M),g=M-m,w=d*g-(_-p*m-d*m-p*g),v=S-w,f=S-v,jp[0]=S-(v+f)+(f-w),b=x+v,f=b-x,y=x-(b-f)+(v-f),v=y-_,f=y-v,jp[1]=y-(v+f)+(f-_),k=b+v,f=k-b,jp[2]=b-(k-f)+(v-f),jp[3]=k;let P=Pb(4,jp),I=ume*s;if(P>=I||-P>=I||(f=e-A,a=e-(A+f)+(f-n),f=r-M,u=r-(M+f)+(f-n),f=t-D,l=t-(D+f)+(f-o),f=i-z,c=i-(z+f)+(f-o),a===0&&l===0&&u===0&&c===0)||(I=cme*s+Lb*Math.abs(P),P+=A*c+z*a-(D*u+M*l),P>=I||-P>=I))return P;x=a*z,h=ui*a,p=h-(h-a),d=a-p,h=ui*z,m=h-(h-z),g=z-m,S=d*g-(x-p*m-d*m-p*g),_=l*M,h=ui*l,p=h-(h-l),d=l-p,h=ui*M,m=h-(h-M),g=M-m,w=d*g-(_-p*m-d*m-p*g),v=S-w,f=S-v,so[0]=S-(v+f)+(f-w),b=x+v,f=b-x,y=x-(b-f)+(v-f),v=y-_,f=y-v,so[1]=y-(v+f)+(f-_),k=b+v,f=k-b,so[2]=b-(k-f)+(v-f),so[3]=k;let N=wd(4,jp,4,so,Uq);x=A*c,h=ui*A,p=h-(h-A),d=A-p,h=ui*c,m=h-(h-c),g=c-m,S=d*g-(x-p*m-d*m-p*g),_=D*u,h=ui*D,p=h-(h-D),d=D-p,h=ui*u,m=h-(h-u),g=u-m,w=d*g-(_-p*m-d*m-p*g),v=S-w,f=S-v,so[0]=S-(v+f)+(f-w),b=x+v,f=b-x,y=x-(b-f)+(v-f),v=y-_,f=y-v,so[1]=y-(v+f)+(f-_),k=b+v,f=k-b,so[2]=b-(k-f)+(v-f),so[3]=k;let H=wd(N,Uq,4,so,qq);x=a*c,h=ui*a,p=h-(h-a),d=a-p,h=ui*c,m=h-(h-c),g=c-m,S=d*g-(x-p*m-d*m-p*g),_=l*u,h=ui*l,p=h-(h-l),d=l-p,h=ui*u,m=h-(h-u),g=u-m,w=d*g-(_-p*m-d*m-p*g),v=S-w,f=S-v,so[0]=S-(v+f)+(f-w),b=x+v,f=b-x,y=x-(b-f)+(v-f),v=y-_,f=y-v,so[1]=y-(v+f)+(f-_),k=b+v,f=k-b,so[2]=b-(k-f)+(v-f),so[3]=k;let T=wd(H,qq,4,so,jq);return jq[T-1]}function Wp(e,t,r,i,n,o){let s=(t-o)*(r-n),a=(e-n)*(i-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=lme*u?l:-fme(e,t,r,i,n,o,u)}var YKe=(7+56*Tt)*Tt,XKe=(3+28*Tt)*Tt,KKe=(26+288*Tt)*Tt*Tt,ZKe=be(4),JKe=be(4),QKe=be(4),eZe=be(4),tZe=be(4),rZe=be(4),iZe=be(4),nZe=be(4),oZe=be(4),sZe=be(8),aZe=be(8),lZe=be(8),uZe=be(4),cZe=be(8),fZe=be(8),hZe=be(8),dZe=be(12),pZe=be(192),mZe=be(192);var bZe=(10+96*Tt)*Tt,yZe=(4+48*Tt)*Tt,xZe=(44+576*Tt)*Tt*Tt,_Ze=be(4),wZe=be(4),SZe=be(4),CZe=be(4),kZe=be(4),EZe=be(4),AZe=be(4),TZe=be(4),DZe=be(8),RZe=be(8),MZe=be(8),FZe=be(8),OZe=be(8),$Ze=be(8),LZe=be(8),PZe=be(8),IZe=be(8),NZe=be(4),BZe=be(4),zZe=be(4),HZe=be(8),UZe=be(16),qZe=be(16),jZe=be(16),WZe=be(32),VZe=be(32),GZe=be(48),YZe=be(64),XZe=be(1152),KZe=be(1152);var eJe=(16+224*Tt)*Tt,tJe=(5+72*Tt)*Tt,rJe=(71+1408*Tt)*Tt*Tt,iJe=be(4),nJe=be(4),oJe=be(4),sJe=be(4),aJe=be(4),lJe=be(4),uJe=be(4),cJe=be(4),fJe=be(4),hJe=be(4),dJe=be(24),pJe=be(24),mJe=be(24),gJe=be(24),vJe=be(24),bJe=be(24),yJe=be(24),xJe=be(24),_Je=be(24),wJe=be(24),SJe=be(1152),CJe=be(1152),kJe=be(1152),EJe=be(1152),AJe=be(1152),TJe=be(2304),DJe=be(2304),RJe=be(3456),MJe=be(5760),FJe=be(8),OJe=be(8),$Je=be(8),LJe=be(16),PJe=be(24),IJe=be(48),NJe=be(48),BJe=be(96),zJe=be(192),HJe=be(384),UJe=be(384),qJe=be(384),jJe=be(768);var WJe=be(96),VJe=be(96),GJe=be(96),YJe=be(1152);var Vq=Math.pow(2,-52),Vw=new Uint32Array(512),Gp=class e{static from(t,r=vme,i=bme){let n=t.length,o=new Float64Array(n*2);for(let s=0;s<n;s++){let a=t[s];o[2*s]=r(a),o[2*s+1]=i(a)}return new e(o)}constructor(t){let r=t.length>>1;if(r>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;let i=Math.max(2*r-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(r)),this._hullPrev=new Uint32Array(r),this._hullNext=new Uint32Array(r),this._hullTri=new Uint32Array(r),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(r),this._dists=new Float64Array(r),this.update()}update(){let{coords:t,_hullPrev:r,_hullNext:i,_hullTri:n,_hullHash:o}=this,s=t.length>>1,a=1/0,l=1/0,u=-1/0,c=-1/0;for(let A=0;A<s;A++){let M=t[2*A],D=t[2*A+1];M<a&&(a=M),D<l&&(l=D),M>u&&(u=M),D>c&&(c=D),this._ids[A]=A}let f=(a+u)/2,h=(l+c)/2,p,d,m;for(let A=0,M=1/0;A<s;A++){let D=ZT(f,h,t[2*A],t[2*A+1]);D<M&&(p=A,M=D)}let g=t[2*p],v=t[2*p+1];for(let A=0,M=1/0;A<s;A++){if(A===p)continue;let D=ZT(g,v,t[2*A],t[2*A+1]);D<M&&D>0&&(d=A,M=D)}let b=t[2*d],y=t[2*d+1],x=1/0;for(let A=0;A<s;A++){if(A===p||A===d)continue;let M=mme(g,v,b,y,t[2*A],t[2*A+1]);M<x&&(m=A,x=M)}let S=t[2*m],_=t[2*m+1];if(x===1/0){for(let D=0;D<s;D++)this._dists[D]=t[2*D]-t[0]||t[2*D+1]-t[1];Vp(this._ids,this._dists,0,s-1);let A=new Uint32Array(s),M=0;for(let D=0,z=-1/0;D<s;D++){let P=this._ids[D],I=this._dists[P];I>z&&(A[M++]=P,z=I)}this.hull=A.subarray(0,M),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Wp(g,v,b,y,S,_)<0){let A=d,M=b,D=y;d=m,b=S,y=_,m=A,S=M,_=D}let w=gme(g,v,b,y,S,_);this._cx=w.x,this._cy=w.y;for(let A=0;A<s;A++)this._dists[A]=ZT(t[2*A],t[2*A+1],w.x,w.y);Vp(this._ids,this._dists,0,s-1),this._hullStart=p;let k=3;i[p]=r[m]=d,i[d]=r[p]=m,i[m]=r[d]=p,n[p]=0,n[d]=1,n[m]=2,o.fill(-1),o[this._hashKey(g,v)]=p,o[this._hashKey(b,y)]=d,o[this._hashKey(S,_)]=m,this.trianglesLen=0,this._addTriangle(p,d,m,-1,-1,-1);for(let A=0,M,D;A<this._ids.length;A++){let z=this._ids[A],P=t[2*z],I=t[2*z+1];if(A>0&&Math.abs(P-M)<=Vq&&Math.abs(I-D)<=Vq||(M=P,D=I,z===p||z===d||z===m))continue;let N=0;for(let q=0,X=this._hashKey(P,I);q<this._hashSize&&(N=o[(X+q)%this._hashSize],!(N!==-1&&N!==i[N]));q++);N=r[N];let H=N,T;for(;T=i[H],Wp(P,I,t[2*H],t[2*H+1],t[2*T],t[2*T+1])>=0;)if(H=T,H===N){H=-1;break}if(H===-1)continue;let O=this._addTriangle(H,z,i[H],-1,-1,n[H]);n[z]=this._legalize(O+2),n[H]=O,k++;let L=i[H];for(;T=i[L],Wp(P,I,t[2*L],t[2*L+1],t[2*T],t[2*T+1])<0;)O=this._addTriangle(L,z,T,n[z],-1,n[L]),n[z]=this._legalize(O+2),i[L]=L,k--,L=T;if(H===N)for(;T=r[H],Wp(P,I,t[2*T],t[2*T+1],t[2*H],t[2*H+1])<0;)O=this._addTriangle(T,z,H,-1,n[H],n[T]),this._legalize(O+2),n[T]=O,i[H]=H,k--,H=T;this._hullStart=r[z]=H,i[H]=r[L]=z,i[z]=L,o[this._hashKey(P,I)]=z,o[this._hashKey(t[2*H],t[2*H+1])]=H}this.hull=new Uint32Array(k);for(let A=0,M=this._hullStart;A<k;A++)this.hull[A]=M,M=i[M];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,r){return Math.floor(dme(t-this._cx,r-this._cy)*this._hashSize)%this._hashSize}_legalize(t){let{_triangles:r,_halfedges:i,coords:n}=this,o=0,s=0;for(;;){let a=i[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=Vw[--o];continue}let u=a-a%3,c=l+(t+1)%3,f=u+(a+2)%3,h=r[s],p=r[t],d=r[c],m=r[f];if(pme(n[2*h],n[2*h+1],n[2*p],n[2*p+1],n[2*d],n[2*d+1],n[2*m],n[2*m+1])){r[t]=m,r[a]=h;let v=i[f];if(v===-1){let y=this._hullStart;do{if(this._hullTri[y]===f){this._hullTri[y]=t;break}y=this._hullPrev[y]}while(y!==this._hullStart)}this._link(t,v),this._link(a,i[s]),this._link(s,f);let b=u+(a+1)%3;o<Vw.length&&(Vw[o++]=b)}else{if(o===0)break;t=Vw[--o]}}return s}_link(t,r){this._halfedges[t]=r,r!==-1&&(this._halfedges[r]=t)}_addTriangle(t,r,i,n,o,s){let a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=r,this._triangles[a+2]=i,this._link(a,n),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}};function dme(e,t){let r=e/(Math.abs(e)+Math.abs(t));return(t>0?3-r:1+r)/4}function ZT(e,t,r,i){let n=e-r,o=t-i;return n*n+o*o}function pme(e,t,r,i,n,o,s,a){let l=e-s,u=t-a,c=r-s,f=i-a,h=n-s,p=o-a,d=l*l+u*u,m=c*c+f*f,g=h*h+p*p;return l*(f*g-m*p)-u*(c*g-m*h)+d*(c*p-f*h)<0}function mme(e,t,r,i,n,o){let s=r-e,a=i-t,l=n-e,u=o-t,c=s*s+a*a,f=l*l+u*u,h=.5/(s*u-a*l),p=(u*c-a*f)*h,d=(s*f-l*c)*h;return p*p+d*d}function gme(e,t,r,i,n,o){let s=r-e,a=i-t,l=n-e,u=o-t,c=s*s+a*a,f=l*l+u*u,h=.5/(s*u-a*l),p=e+(u*c-a*f)*h,d=t+(s*f-l*c)*h;return{x:p,y:d}}function Vp(e,t,r,i){if(i-r<=20)for(let n=r+1;n<=i;n++){let o=e[n],s=t[o],a=n-1;for(;a>=r&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{let n=r+i>>1,o=r+1,s=i;Ib(e,n,o),t[e[r]]>t[e[i]]&&Ib(e,r,i),t[e[o]]>t[e[i]]&&Ib(e,o,i),t[e[r]]>t[e[o]]&&Ib(e,r,o);let a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;Ib(e,o,s)}e[r+1]=e[s],e[s]=a,i-o+1>=s-r?(Vp(e,t,o,i),Vp(e,t,r,s-1)):(Vp(e,t,r,s-1),Vp(e,t,o,i))}}function Ib(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}function vme(e){return e[0]}function bme(e){return e[1]}var Ls=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,r){this._+=`L${this._x1=+t},${this._y1=+r}`}arc(t,r,i){t=+t,r=+r,i=+i;let n=t+i,o=r;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${n},${o}`:(Math.abs(this._x1-n)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+n+","+o),i&&(this._+=`A${i},${i},0,1,1,${t-i},${r}A${i},${i},0,1,1,${this._x1=n},${this._y1=o}`)}rect(t,r,i,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${+i}v${+n}h${-i}Z`}value(){return this._||null}};var $f=class{constructor(){this._=[]}moveTo(t,r){this._.push([t,r])}closePath(){this._.push(this._[0].slice())}lineTo(t,r){this._.push([t,r])}value(){return this._.length?this._:null}};var Nb=class{constructor(t,[r,i,n,o]=[0,0,960,500]){if(!((n=+n)>=(r=+r))||!((o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=n,this.xmin=r,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:t,hull:r,triangles:i},vectors:n}=this,o,s,a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let m=0,g=0,v=i.length,b,y;m<v;m+=3,g+=2){let x=i[m]*2,S=i[m+1]*2,_=i[m+2]*2,w=t[x],k=t[x+1],A=t[S],M=t[S+1],D=t[_],z=t[_+1],P=A-w,I=M-k,N=D-w,H=z-k,T=(P*H-I*N)*2;if(Math.abs(T)<1e-9){if(o===void 0){o=s=0;for(let L of r)o+=t[L*2],s+=t[L*2+1];o/=r.length,s/=r.length}let O=1e9*Math.sign((o-w)*H-(s-k)*N);b=(w+D)/2-O*H,y=(k+z)/2+O*N}else{let O=1/T,L=P*P+I*I,q=N*N+H*H;b=w+(H*L-I*q)*O,y=k+(P*q-N*L)*O}a[g]=b,a[g+1]=y}let l=r[r.length-1],u,c=l*4,f,h=t[2*l],p,d=t[2*l+1];n.fill(0);for(let m=0;m<r.length;++m)l=r[m],u=c,f=h,p=d,c=l*4,h=t[2*l],d=t[2*l+1],n[u+2]=n[c]=p-d,n[u+3]=n[c+1]=h-f}render(t){let r=t==null?t=new Ls:void 0,{delaunay:{halfedges:i,inedges:n,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=i.length;c<f;++c){let h=i[c];if(h<c)continue;let p=Math.floor(c/3)*2,d=Math.floor(h/3)*2,m=s[p],g=s[p+1],v=s[d],b=s[d+1];this._renderSegment(m,g,v,b,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];let f=Math.floor(n[u]/3)*2,h=s[f],p=s[f+1],d=l*4,m=this._project(h,p,a[d+2],a[d+3]);m&&this._renderSegment(h,p,m[0],m[1],t)}return r&&r.value()}renderBounds(t){let r=t==null?t=new Ls:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),r&&r.value()}renderCell(t,r){let i=r==null?r=new Ls:void 0,n=this._clip(t);if(n===null||!n.length)return;r.moveTo(n[0],n[1]);let o=n.length;for(;n[0]===n[o-2]&&n[1]===n[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(n[s]!==n[s-2]||n[s+1]!==n[s-1])&&r.lineTo(n[s],n[s+1]);return r.closePath(),i&&i.value()}*cellPolygons(){let{delaunay:{points:t}}=this;for(let r=0,i=t.length/2;r<i;++r){let n=this.cellPolygon(r);n&&(n.index=r,yield n)}}cellPolygon(t){let r=new $f;return this.renderCell(t,r),r.value()}_renderSegment(t,r,i,n,o){let s,a=this._regioncode(t,r),l=this._regioncode(i,n);a===0&&l===0?(o.moveTo(t,r),o.lineTo(i,n)):(s=this._clipSegment(t,r,i,n,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,r,i){return r=+r,r!==r||(i=+i,i!==i)?!1:this.delaunay._step(t,r,i)===t}*neighbors(t){let r=this._clip(t);if(r)for(let i of this.delaunay.neighbors(t)){let n=this._clip(i);if(n){e:for(let o=0,s=r.length;o<s;o+=2)for(let a=0,l=n.length;a<l;a+=2)if(r[o]===n[a]&&r[o+1]===n[a+1]&&r[(o+2)%s]===n[(a+l-2)%l]&&r[(o+3)%s]===n[(a+l-1)%l]){yield i;break e}}}}_cell(t){let{circumcenters:r,delaunay:{inedges:i,halfedges:n,triangles:o}}=this,s=i[t];if(s===-1)return null;let a=[],l=s;do{let u=Math.floor(l/3);if(a.push(r[u*2],r[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=n[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let r=this._cell(t);if(r===null)return null;let{vectors:i}=this,n=t*4;return this._simplify(i[n]||i[n+1]?this._clipInfinite(t,r,i[n],i[n+1],i[n+2],i[n+3]):this._clipFinite(t,r))}_clipFinite(t,r){let i=r.length,n=null,o,s,a=r[i-2],l=r[i-1],u,c=this._regioncode(a,l),f,h=0;for(let p=0;p<i;p+=2)if(o=a,s=l,a=r[p],l=r[p+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=h,h=0,n?n.push(a,l):n=[a,l];else{let d,m,g,v,b;if(u===0){if((d=this._clipSegment(o,s,a,l,u,c))===null)continue;[m,g,v,b]=d}else{if((d=this._clipSegment(a,l,o,s,c,u))===null)continue;[v,b,m,g]=d,f=h,h=this._edgecode(m,g),f&&h&&this._edge(t,f,h,n,n.length),n?n.push(m,g):n=[m,g]}f=h,h=this._edgecode(v,b),f&&h&&this._edge(t,f,h,n,n.length),n?n.push(v,b):n=[v,b]}if(n)f=h,h=this._edgecode(n[0],n[1]),f&&h&&this._edge(t,f,h,n,n.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return n}_clipSegment(t,r,i,n,o,s){let a=o<s;for(a&&([t,r,i,n,o,s]=[i,n,t,r,s,o]);;){if(o===0&&s===0)return a?[i,n,t,r]:[t,r,i,n];if(o&s)return null;let l,u,c=o||s;c&8?(l=t+(i-t)*(this.ymax-r)/(n-r),u=this.ymax):c&4?(l=t+(i-t)*(this.ymin-r)/(n-r),u=this.ymin):c&2?(u=r+(n-r)*(this.xmax-t)/(i-t),l=this.xmax):(u=r+(n-r)*(this.xmin-t)/(i-t),l=this.xmin),o?(t=l,r=u,o=this._regioncode(t,r)):(i=l,n=u,s=this._regioncode(i,n))}}_clipInfinite(t,r,i,n,o,s){let a=Array.from(r),l;if((l=this._project(a[0],a[1],i,n))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,f,h=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=h,h=this._edgecode(a[u],a[u+1]),f&&h&&(u=this._edge(t,f,h,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,r,i,n,o){for(;r!==i;){let s,a;switch(r){case 5:r=4;continue;case 4:r=6,s=this.xmax,a=this.ymin;break;case 6:r=2;continue;case 2:r=10,s=this.xmax,a=this.ymax;break;case 10:r=8;continue;case 8:r=9,s=this.xmin,a=this.ymax;break;case 9:r=1;continue;case 1:r=5,s=this.xmin,a=this.ymin;break}(n[o]!==s||n[o+1]!==a)&&this.contains(t,s,a)&&(n.splice(o,0,s,a),o+=2)}return o}_project(t,r,i,n){let o=1/0,s,a,l;if(n<0){if(r<=this.ymin)return null;(s=(this.ymin-r)/n)<o&&(l=this.ymin,a=t+(o=s)*i)}else if(n>0){if(r>=this.ymax)return null;(s=(this.ymax-r)/n)<o&&(l=this.ymax,a=t+(o=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<o&&(a=this.xmax,l=r+(o=s)*n)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<o&&(a=this.xmin,l=r+(o=s)*n)}return[a,l]}_edgecode(t,r){return(t===this.xmin?1:t===this.xmax?2:0)|(r===this.ymin?4:r===this.ymax?8:0)}_regioncode(t,r){return(t<this.xmin?1:t>this.xmax?2:0)|(r<this.ymin?4:r>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let r=0;r<t.length;r+=2){let i=(r+2)%t.length,n=(r+4)%t.length;(t[r]===t[i]&&t[i]===t[n]||t[r+1]===t[i+1]&&t[i+1]===t[n+1])&&(t.splice(i,2),r-=2)}t.length||(t=null)}return t}};var yme=2*Math.PI,Yp=Math.pow;function xme(e){return e[0]}function _me(e){return e[1]}function wme(e){let{triangles:t,coords:r}=e;for(let i=0;i<t.length;i+=3){let n=2*t[i],o=2*t[i+1],s=2*t[i+2];if((r[s]-r[n])*(r[o+1]-r[n+1])-(r[o]-r[n])*(r[s+1]-r[n+1])>1e-10)return!1}return!0}function Sme(e,t,r){return[e+Math.sin(e+t)*r,t+Math.cos(e-t)*r]}var Xp=class e{static from(t,r=xme,i=_me,n){return new e("length"in t?Cme(t,r,i,n):Float64Array.from(kme(t,r,i,n)))}constructor(t){this._delaunator=new Gp(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let t=this._delaunator,r=this.points;if(t.hull&&t.hull.length>2&&wme(t)){this.collinear=Int32Array.from({length:r.length/2},(h,p)=>p).sort((h,p)=>r[2*h]-r[2*p]||r[2*h+1]-r[2*p+1]);let l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[r[2*l],r[2*l+1],r[2*u],r[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let h=0,p=r.length/2;h<p;++h){let d=Sme(r[2*h],r[2*h+1],f);r[2*h]=d[0],r[2*h+1]=d[1]}this._delaunator=new Gp(r)}else delete this.collinear;let i=this.halfedges=this._delaunator.halfedges,n=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){let c=o[l%3===2?l-2:l+1];(i[l]===-1||s[c]===-1)&&(s[c]=l)}for(let l=0,u=n.length;l<u;++l)a[n[l]]=l;n.length<=2&&n.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=n[0],s[n[0]]=1,n.length===2&&(s[n[1]]=0,this.triangles[1]=n[1],this.triangles[2]=n[1]))}voronoi(t){return new Nb(this,t)}*neighbors(t){let{inedges:r,hull:i,_hullIndex:n,halfedges:o,triangles:s,collinear:a}=this;if(a){let f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}let l=r[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){let f=i[(n[t]+1)%i.length];f!==c&&(yield f);return}}while(u!==l)}find(t,r,i=0){if(t=+t,t!==t||(r=+r,r!==r))return-1;let n=i,o;for(;(o=this._step(i,t,r))>=0&&o!==i&&o!==n;)i=o;return o}_step(t,r,i){let{inedges:n,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(n[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=Yp(r-u[t*2],2)+Yp(i-u[t*2+1],2),h=n[t],p=h;do{let d=l[p],m=Yp(r-u[d*2],2)+Yp(i-u[d*2+1],2);if(m<f&&(f=m,c=d),p=p%3===2?p-2:p+1,l[p]!==t)break;if(p=a[p],p===-1){if(p=o[(s[t]+1)%o.length],p!==d&&Yp(r-u[p*2],2)+Yp(i-u[p*2+1],2)<f)return p;break}}while(p!==h);return c}render(t){let r=t==null?t=new Ls:void 0,{points:i,halfedges:n,triangles:o}=this;for(let s=0,a=n.length;s<a;++s){let l=n[s];if(l<s)continue;let u=o[s]*2,c=o[l]*2;t.moveTo(i[u],i[u+1]),t.lineTo(i[c],i[c+1])}return this.renderHull(t),r&&r.value()}renderPoints(t,r){r===void 0&&(!t||typeof t.moveTo!="function")&&(r=t,t=null),r=r==null?2:+r;let i=t==null?t=new Ls:void 0,{points:n}=this;for(let o=0,s=n.length;o<s;o+=2){let a=n[o],l=n[o+1];t.moveTo(a+r,l),t.arc(a,l,r,0,yme)}return i&&i.value()}renderHull(t){let r=t==null?t=new Ls:void 0,{hull:i,points:n}=this,o=i[0]*2,s=i.length;t.moveTo(n[o],n[o+1]);for(let a=1;a<s;++a){let l=2*i[a];t.lineTo(n[l],n[l+1])}return t.closePath(),r&&r.value()}hullPolygon(){let t=new $f;return this.renderHull(t),t.value()}renderTriangle(t,r){let i=r==null?r=new Ls:void 0,{points:n,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return r.moveTo(n[s],n[s+1]),r.lineTo(n[a],n[a+1]),r.lineTo(n[l],n[l+1]),r.closePath(),i&&i.value()}*trianglePolygons(){let{triangles:t}=this;for(let r=0,i=t.length/3;r<i;++r)yield this.trianglePolygon(r)}trianglePolygon(t){let r=new $f;return this.renderTriangle(t,r),r.value()}};function Cme(e,t,r,i){let n=e.length,o=new Float64Array(n*2);for(let s=0;s<n;++s){let a=e[s];o[s*2]=t.call(i,a,s,e),o[s*2+1]=r.call(i,a,s,e)}return o}function*kme(e,t,r,i){let n=0;for(let o of e)yield t.call(i,o,n,e),yield r.call(i,o,n,e),++n}function JT(e){ee.call(this,null,e)}JT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var Eme=[-1e5,-1e5,1e5,1e5];xe(JT,ee,{transform(e,t){let r=e.as||"path",i=t.source;if(!i||!i.length)return t;let n=e.size;n=n?[0,0,n[0],n[1]]:(n=e.extent)?[n[0][0],n[0][1],n[1][0],n[1][1]]:Eme;let o=this.value=Xp.from(i,e.x,e.y).voronoi(n);for(let s=0,a=i.length;s<a;++s){let l=o.cellPolygon(s);i[s][r]=l&&!Tme(l)?Ame(l):null}return t.reflow(e.modified()).modifies(r)}});function Ame(e){let t=e[0][0],r=e[0][1],i=e.length-1;for(;e[i][0]===t&&e[i][1]===r;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Tme(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}var rD={};pi(rD,{wordcloud:()=>tD});var eD=Math.PI/180,Bb=64,Gw=2048;function Dme(){var e=[256,256],t,r,i,n,o,s,a,l=Gq,u=[],c=Math.random,f={};f.layout=function(){for(var d=h(Ts()),m=Lme((e[0]>>5)*e[1]),g=null,v=u.length,b=-1,y=[],x=u.map(_=>({text:t(_),font:r(_),style:n(_),weight:o(_),rotate:s(_),size:~~(i(_)+1e-14),padding:a(_),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:_})).sort((_,w)=>w.size-_.size);++b<v;){var S=x[b];S.x=e[0]*(c()+.5)>>1,S.y=e[1]*(c()+.5)>>1,Rme(d,S,x,b),S.hasText&&p(m,S,g)&&(y.push(S),g?Fme(g,S):g=[{x:S.x+S.x0,y:S.y+S.y0},{x:S.x+S.x1,y:S.y+S.y1}],S.x-=e[0]>>1,S.y-=e[1]>>1)}return y};function h(d){d.width=d.height=1;var m=Math.sqrt(d.getContext("2d").getImageData(0,0,1,1).data.length>>2);d.width=(Bb<<5)/m,d.height=Gw/m;var g=d.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function p(d,m,g){for(var v=m.x,b=m.y,y=Math.hypot(e[0],e[1]),x=l(e),S=c()<.5?1:-1,_=-S,w,k,A;(w=x(_+=S))&&(k=~~w[0],A=~~w[1],!(Math.min(Math.abs(k),Math.abs(A))>=y));)if(m.x=v+k,m.y=b+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Mme(m,d,e[0]))&&(!g||Ome(m,g))){for(var M=m.sprite,D=m.width>>5,z=e[0]>>5,P=m.x-(D<<4),I=P&127,N=32-I,H=m.y1-m.y0,T=(m.y+m.y0)*z+(P>>5),O,L=0;L<H;L++){O=0;for(var q=0;q<=D;q++)d[T+q]|=O<<N|(q<D?(O=M[L*D+q])>>>I:0);T+=z}return m.sprite=null,!0}return!1}return f.words=function(d){return arguments.length?(u=d,f):u},f.size=function(d){return arguments.length?(e=[+d[0],+d[1]],f):e},f.font=function(d){return arguments.length?(r=Sd(d),f):r},f.fontStyle=function(d){return arguments.length?(n=Sd(d),f):n},f.fontWeight=function(d){return arguments.length?(o=Sd(d),f):o},f.rotate=function(d){return arguments.length?(s=Sd(d),f):s},f.text=function(d){return arguments.length?(t=Sd(d),f):t},f.spiral=function(d){return arguments.length?(l=Pme[d]||d,f):l},f.fontSize=function(d){return arguments.length?(i=Sd(d),f):i},f.padding=function(d){return arguments.length?(a=Sd(d),f):a},f.random=function(d){return arguments.length?(c=d,f):c},f}function Rme(e,t,r,i){if(!t.sprite){var n=e.context,o=e.ratio;n.clearRect(0,0,(Bb<<5)/o,Gw/o);var s=0,a=0,l=0,u=r.length,c,f,h,p,d;for(--i;++i<u;){if(t=r[i],n.save(),n.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=n.measureText(t.text+"m").width*o,h=t.size<<1,t.rotate){var m=Math.sin(t.rotate*eD),g=Math.cos(t.rotate*eD),v=c*g,b=c*m,y=h*g,x=h*m;c=Math.max(Math.abs(v+x),Math.abs(v-x))+31>>5<<5,h=~~Math.max(Math.abs(b+y),Math.abs(b-y))}else c=c+31>>5<<5;if(h>l&&(l=h),s+c>=Bb<<5&&(s=0,a+=l,l=0),a+h>=Gw)break;n.translate((s+(c>>1))/o,(a+(h>>1))/o),t.rotate&&n.rotate(t.rotate*eD),n.fillText(t.text,0,0),t.padding&&(n.lineWidth=2*t.padding,n.strokeText(t.text,0,0)),n.restore(),t.width=c,t.height=h,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var S=n.getImageData(0,0,(Bb<<5)/o,Gw/o).data,_=[];--i>=0;)if(t=r[i],!!t.hasText){for(c=t.width,f=c>>5,h=t.y1-t.y0,p=0;p<h*f;p++)_[p]=0;if(s=t.xoff,s==null)return;a=t.yoff;var w=0,k=-1;for(d=0;d<h;d++){for(p=0;p<c;p++){var A=f*d+(p>>5),M=S[(a+d)*(Bb<<5)+(s+p)<<2]?1<<31-p%32:0;_[A]|=M,w|=M}w?k=d:(t.y0++,h--,d--,a++)}t.y1=t.y0+k,t.sprite=_.slice(0,(t.y1-t.y0)*f)}}}function Mme(e,t,r){r>>=5;for(var i=e.sprite,n=e.width>>5,o=e.x-(n<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*r+(o>>5),c,f=0;f<l;f++){c=0;for(var h=0;h<=n;h++)if((c<<a|(h<n?(c=i[f*n+h])>>>s:0))&t[u+h])return!0;u+=r}return!1}function Fme(e,t){var r=e[0],i=e[1];t.x+t.x0<r.x&&(r.x=t.x+t.x0),t.y+t.y0<r.y&&(r.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function Ome(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Gq(e){var t=e[0]/e[1];return function(r){return[t*(r*=.1)*Math.cos(r),r*Math.sin(r)]}}function $me(e){var t=4,r=t*e[0]/e[1],i=0,n=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:i+=r;break;case 1:n+=t;break;case 2:i-=r;break;default:n-=t;break}return[i,n]}}function Lme(e){for(var t=[],r=-1;++r<e;)t[r]=0;return t}function Sd(e){return typeof e=="function"?e:function(){return e}}var Pme={archimedean:Gq,rectangular:$me},Yq=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Ime=["text","font","rotate","fontSize","fontStyle","fontWeight"];function tD(e){ee.call(this,Dme(),e)}tD.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Yq}]};xe(tD,ee,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&te("Wordcloud size dimensions must be non-zero.");function r(d){let m=e[d];return Ke(m)&&t.modified(m.fields)}let i=e.modified();if(!(i||t.changed(t.ADD_REM)||Ime.some(r)))return;let n=t.materialize(t.SOURCE).source,o=this.value,s=e.as||Yq,a=e.fontSize||14,l;if(Ke(a)?l=e.fontSizeRange:a=br(a),l){let d=a,m=_t("sqrt")().domain(Wn(n,d)).range(l);a=g=>m(d(g))}n.forEach(d=>{d[s[0]]=NaN,d[s[1]]=NaN,d[s[3]]=0});let u=o.words(n).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Zn).layout(),c=o.size(),f=c[0]>>1,h=c[1]>>1,p=u.length;for(let d=0,m,g;d<p;++d)m=u[d],g=m.datum,g[s[0]]=m.x+f,g[s[1]]=m.y+h,g[s[2]]=m.font,g[s[3]]=m.size,g[s[4]]=m.style,g[s[5]]=m.weight,g[s[6]]=m.rotate;return t.reflow(i).modifies(s)}});var oD={};pi(oD,{crossfilter:()=>iD,resolvefilter:()=>nD});var Nme=e=>new Uint8Array(e),Bme=e=>new Uint16Array(e),zb=e=>new Uint32Array(e);function zme(){let e=8,t=[],r=zb(0),i=Yw(0,e),n=Yw(0,e);return{data:()=>t,seen:()=>r=Hme(r,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){let a=t.length,l=Array(a-o),u=t,c,f,h;for(f=0;!s[f]&&f<a;++f)l[f]=t[f],u[f]=f;for(h=f;f<a;++f)c=t[f],s[f]?u[f]=-1:(u[f]=h,i[h]=i[f],n[h]=n[f],l[h]=c,c._index=h++),i[f]=0;return t=l,u},size:()=>t.length,curr:()=>i,prev:()=>n,reset:o=>n[o]=i[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){i[o]|=s},clear(o,s){i[o]&=~s},resize(o,s){let a=i.length;(o>a||s>e)&&(e=Math.max(s,e),i=Yw(o,e,i),n=Yw(o,e))}}}function Hme(e,t,r){return e.length>=t?e:(r=r||new e.constructor(t),r.set(e),r)}function Yw(e,t,r){let i=(t<257?Nme:t<65537?Bme:zb)(e);return r&&i.set(r),i}function Xq(e,t,r){let i=1<<t;return{one:i,zero:~i,range:r.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(n,o){let s=this,a=s.bisect(s.range,n.value),l=n.index,u=a[0],c=a[1],f=l.length,h;for(h=0;h<u;++h)o[l[h]]|=i;for(h=c;h<f;++h)o[l[h]]|=i;return s}}}function Kq(){let e=zb(0),t=[],r=0;function i(a,l,u){if(!l.length)return[];let c=r,f=l.length,h=zb(f),p=Array(f),d,m,g;for(g=0;g<f;++g)p[g]=a(l[g]),h[g]=g;if(p=Ume(p,h),c)d=t,m=e,t=Array(c+f),e=zb(c+f),qme(u,d,m,c,p,h,f,t,e);else{if(u>0)for(g=0;g<f;++g)h[g]+=u;t=p,e=h}return r=c+f,{index:h,value:p}}function n(a,l){let u=r,c,f,h;for(f=0;!l[e[f]]&&f<u;++f);for(h=f;f<u;++f)l[c=e[f]]||(e[h]=c,t[h]=t[f],++h);r=u-a}function o(a){for(let l=0,u=r;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=r),[A8(l,a[0],0,u),Th(l,a[1],0,u)]}return{insert:i,remove:n,bisect:s,reindex:o,index:()=>e,size:()=>r}}function Ume(e,t){return e.sort.call(t,(r,i)=>{let n=e[r],o=e[i];return n<o?-1:n>o?1:0}),Rx(e,t)}function qme(e,t,r,i,n,o,s,a,l){let u=0,c=0,f;for(f=0;u<i&&c<s;++f)t[u]<n[c]?(a[f]=t[u],l[f]=r[u++]):(a[f]=n[c],l[f]=o[c++]+e);for(;u<i;++u,++f)a[f]=t[u],l[f]=r[u];for(;c<s;++c,++f)a[f]=n[c],l[f]=o[c]+e}function iD(e){ee.call(this,zme(),e),this._indices=null,this._dims=null}iD.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};xe(iD,ee,{transform(e,t){if(this._dims){var r=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return r?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){let r=e.fields,i=e.query,n=this._indices={},o=this._dims=[],s=i.length,a=0,l,u;for(;a<s;++a)l=r[a].fname,u=n[l]||(n[l]=Kq()),o.push(Xq(u,a,i[a]));return this.eval(e,t)},reinit(e,t){let r=t.materialize().fork(),i=e.fields,n=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),f=r.rem=r.add,h=r.mod,p=n.length,d={},m,g,v,b,y,x,S,_,w;if(u.set(l),t.rem.length&&(y=this.remove(e,t,r)),t.add.length&&a.add(t.add),t.mod.length)for(x={},b=t.mod,S=0,_=b.length;S<_;++S)x[b[S]._index]=1;for(S=0;S<p;++S)w=i[S],(!s[S]||e.modified("fields",S)||t.modified(w.fields))&&(v=w.fname,(m=d[v])||(o[v]=g=Kq(),d[v]=m=g.insert(w,t.source,0)),s[S]=Xq(g,S,n[S]).onAdd(m,l));for(S=0,_=a.data().length;S<_;++S)y[S]||(u[S]!==l[S]?f.push(S):x[S]&&l[S]!==c&&h.push(S));return a.mask=(1<<p)-1,r},eval(e,t){let r=t.materialize().fork(),i=this._dims.length,n=0;return t.rem.length&&(this.remove(e,t,r),n|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(n|=this.update(e,t,r)),t.add.length&&(this.insert(e,t,r),n|=(1<<i)-1),t.mod.length&&(this.modify(t,r),n|=(1<<i)-1),this.value.mask=n,r},insert(e,t,r){let i=t.add,n=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=r.add,c=n.size()+i.length,f=o.length,h=n.size(),p,d,m;n.resize(c,f),n.add(i);let g=n.curr(),v=n.prev(),b=n.all();for(p=0;p<f;++p)d=a[p].fname,m=l[d]||(l[d]=s[d].insert(a[p],i,h)),o[p].onAdd(m,g);for(;h<c;++h)v[h]=b,g[h]!==b&&u.push(h)},modify(e,t){let r=t.mod,i=this.value,n=i.curr(),o=i.all(),s=e.mod,a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,n[u]!==o&&r.push(u)},remove(e,t,r){let i=this._indices,n=this.value,o=n.curr(),s=n.prev(),a=n.all(),l={},u=r.rem,c=t.rem,f,h,p,d;for(f=0,h=c.length;f<h;++f)p=c[f]._index,l[p]=1,s[p]=d=o[p],o[p]=a,d!==a&&u.push(p);for(p in i)i[p].remove(h,l);return this.reindex(t,h,l),l},reindex(e,t,r){let i=this._indices,n=this.value;e.runAfter(()=>{let o=n.remove(t,r);for(let s in i)i[s].reindex(o)})},update(e,t,r){let i=this._dims,n=e.query,o=t.stamp,s=i.length,a=0,l,u;for(r.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=i[l].one,this.incrementOne(i[l],n[l],r.add,r.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=i[u].one,this.incrementAll(i[u],n[u],o,r.add),r.rem=r.add);return a},incrementAll(e,t,r,i){let n=this.value,o=n.seen(),s=n.curr(),a=n.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],h=c[1],p=u[0],d=u[1],m=e.one,g,v,b;if(f<p)for(g=f,v=Math.min(p,h);g<v;++g)b=l[g],o[b]!==r&&(a[b]=s[b],o[b]=r,i.push(b)),s[b]^=m;else if(f>p)for(g=p,v=Math.min(f,d);g<v;++g)b=l[g],o[b]!==r&&(a[b]=s[b],o[b]=r,i.push(b)),s[b]^=m;if(h>d)for(g=Math.max(f,d),v=h;g<v;++g)b=l[g],o[b]!==r&&(a[b]=s[b],o[b]=r,i.push(b)),s[b]^=m;else if(h<d)for(g=Math.max(p,h),v=d;g<v;++g)b=l[g],o[b]!==r&&(a[b]=s[b],o[b]=r,i.push(b)),s[b]^=m;e.range=t.slice()},incrementOne(e,t,r,i){let n=this.value,o=n.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=a[0],h=a[1],p=e.one,d,m,g;if(u<f)for(d=u,m=Math.min(f,c);d<m;++d)g=s[d],o[g]^=p,r.push(g);else if(u>f)for(d=f,m=Math.min(u,h);d<m;++d)g=s[d],o[g]^=p,i.push(g);if(c>h)for(d=Math.max(u,h),m=c;d<m;++d)g=s[d],o[g]^=p,r.push(g);else if(c<h)for(d=Math.max(f,c),m=h;d<m;++d)g=s[d],o[g]^=p,i.push(g);e.range=t.slice()}});function nD(e){ee.call(this,null,e)}nD.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};xe(nD,ee,{transform(e,t){let r=~(e.ignore||0),i=e.filter,n=i.mask;if((n&r)===0)return t.StopPropagation;let o=t.fork(t.ALL),s=i.data(),a=i.curr(),l=i.prev(),u=c=>a[c]&r?null:s[c];return o.filter(o.MOD,u),n&n-1?(o.filter(o.ADD,c=>{let f=a[c]&r;return!f&&f^l[c]&r?s[c]:null}),o.filter(o.REM,c=>{let f=a[c]&r;return f&&!(f^(f^l[c]&r))?s[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&r)===n?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});var jme="RawCode",Yu="Literal",Wme="Property",Vme="Identifier",Gme="ArrayExpression",Yme="BinaryExpression",fD="CallExpression",Xme="ConditionalExpression",Kme="LogicalExpression",Zme="MemberExpression",Jme="ObjectExpression",Qme="UnaryExpression";function Aa(e){this.type=e}Aa.prototype.visit=function(e){let t,r,i;if(e(this))return 1;for(t=ege(this),r=0,i=t.length;r<i;++r)if(t[r].visit(e))return 1};function ege(e){switch(e.type){case Gme:return e.elements;case Yme:case Kme:return[e.left,e.right];case fD:return[e.callee].concat(e.arguments);case Xme:return[e.test,e.consequent,e.alternate];case Zme:return[e.object,e.property];case Jme:return e.properties;case Wme:return[e.key,e.value];case Qme:return[e.argument];case Vme:case Yu:case jme:default:return[]}}var Rl,He,oe,Cn,Gt,Zw=1,Wb=2,Cd=3,Lf=4,Jw=5,Ed=6,To=7,Vb=8,tge=9;Rl={};Rl[Zw]="Boolean";Rl[Wb]="<end>";Rl[Cd]="Identifier";Rl[Lf]="Keyword";Rl[Jw]="Null";Rl[Ed]="Numeric";Rl[To]="Punctuator";Rl[Vb]="String";Rl[tge]="RegularExpression";var rge="ArrayExpression",ige="BinaryExpression",nge="CallExpression",oge="ConditionalExpression",nj="Identifier",sge="Literal",age="LogicalExpression",lge="MemberExpression",uge="ObjectExpression",cge="Property",fge="UnaryExpression",Fi="Unexpected token %0",hge="Unexpected number",dge="Unexpected string",pge="Unexpected identifier",mge="Unexpected reserved word",gge="Unexpected end of input",uD="Invalid regular expression",sD="Invalid regular expression: missing /",oj="Octal literals are not allowed in strict mode.",vge="Duplicate data property in object literal not allowed in strict mode",en="ILLEGAL",qb="Disabled.",bge=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),yge=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Qw(e,t){if(!e)throw new Error("ASSERT: "+t)}function Gu(e){return e>=48&&e<=57}function hD(e){return"0123456789abcdefABCDEF".includes(e)}function Ub(e){return"01234567".includes(e)}function xge(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function jb(e){return e===10||e===13||e===8232||e===8233}function Gb(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&bge.test(String.fromCharCode(e))}function Kw(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&yge.test(String.fromCharCode(e))}var _ge={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function sj(){for(;oe<Cn;){let e=He.charCodeAt(oe);if(xge(e)||jb(e))++oe;else break}}function cD(e){var t,r,i,n=0;for(r=e==="u"?4:2,t=0;t<r;++t)oe<Cn&&hD(He[oe])?(i=He[oe++],n=n*16+"0123456789abcdef".indexOf(i.toLowerCase())):Nt({},Fi,en);return String.fromCharCode(n)}function wge(){var e,t,r,i;for(e=He[oe],t=0,e==="}"&&Nt({},Fi,en);oe<Cn&&(e=He[oe++],!!hD(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Nt({},Fi,en),t<=65535?String.fromCharCode(t):(r=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(r,i))}function aj(){var e,t;for(e=He.charCodeAt(oe++),t=String.fromCharCode(e),e===92&&(He.charCodeAt(oe)!==117&&Nt({},Fi,en),++oe,e=cD("u"),(!e||e==="\\"||!Gb(e.charCodeAt(0)))&&Nt({},Fi,en),t=e);oe<Cn&&(e=He.charCodeAt(oe),!!Kw(e));)++oe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),He.charCodeAt(oe)!==117&&Nt({},Fi,en),++oe,e=cD("u"),(!e||e==="\\"||!Kw(e.charCodeAt(0)))&&Nt({},Fi,en),t+=e);return t}function Sge(){var e,t;for(e=oe++;oe<Cn;){if(t=He.charCodeAt(oe),t===92)return oe=e,aj();if(Kw(t))++oe;else break}return He.slice(e,oe)}function Cge(){var e,t,r;return e=oe,t=He.charCodeAt(oe)===92?aj():Sge(),t.length===1?r=Cd:_ge.hasOwnProperty(t)?r=Lf:t==="null"?r=Jw:t==="true"||t==="false"?r=Zw:r=Cd,{type:r,value:t,start:e,end:oe}}function aD(){var e=oe,t=He.charCodeAt(oe),r,i=He[oe],n,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++oe,{type:To,value:String.fromCharCode(t),start:e,end:oe};default:if(r=He.charCodeAt(oe+1),r===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return oe+=2,{type:To,value:String.fromCharCode(t)+String.fromCharCode(r),start:e,end:oe};case 33:case 61:return oe+=2,He.charCodeAt(oe)===61&&++oe,{type:To,value:He.slice(e,oe),start:e,end:oe}}}if(s=He.substr(oe,4),s===">>>=")return oe+=4,{type:To,value:s,start:e,end:oe};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return oe+=3,{type:To,value:o,start:e,end:oe};if(n=o.substr(0,2),i===n[1]&&"+-<>&|".includes(i)||n==="=>")return oe+=2,{type:To,value:n,start:e,end:oe};if(n==="//"&&Nt({},Fi,en),"<>=!+-*%&|^/".includes(i))return++oe,{type:To,value:i,start:e,end:oe};Nt({},Fi,en)}function kge(e){let t="";for(;oe<Cn&&hD(He[oe]);)t+=He[oe++];return t.length===0&&Nt({},Fi,en),Gb(He.charCodeAt(oe))&&Nt({},Fi,en),{type:Ed,value:parseInt("0x"+t,16),start:e,end:oe}}function Ege(e){let t="0"+He[oe++];for(;oe<Cn&&Ub(He[oe]);)t+=He[oe++];return(Gb(He.charCodeAt(oe))||Gu(He.charCodeAt(oe)))&&Nt({},Fi,en),{type:Ed,value:parseInt(t,8),octal:!0,start:e,end:oe}}function Zq(){var e,t,r;if(r=He[oe],Qw(Gu(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),t=oe,e="",r!=="."){if(e=He[oe++],r=He[oe],e==="0"){if(r==="x"||r==="X")return++oe,kge(t);if(Ub(r))return Ege(t);r&&Gu(r.charCodeAt(0))&&Nt({},Fi,en)}for(;Gu(He.charCodeAt(oe));)e+=He[oe++];r=He[oe]}if(r==="."){for(e+=He[oe++];Gu(He.charCodeAt(oe));)e+=He[oe++];r=He[oe]}if(r==="e"||r==="E")if(e+=He[oe++],r=He[oe],(r==="+"||r==="-")&&(e+=He[oe++]),Gu(He.charCodeAt(oe)))for(;Gu(He.charCodeAt(oe));)e+=He[oe++];else Nt({},Fi,en);return Gb(He.charCodeAt(oe))&&Nt({},Fi,en),{type:Ed,value:parseFloat(e),start:t,end:oe}}function Age(){var e="",t,r,i,n,o=!1;for(t=He[oe],Qw(t==="'"||t==='"',"String literal must starts with a quote"),r=oe,++oe;oe<Cn;)if(i=He[oe++],i===t){t="";break}else if(i==="\\")if(i=He[oe++],!i||!jb(i.charCodeAt(0)))switch(i){case"u":case"x":He[oe]==="{"?(++oe,e+=wge()):e+=cD(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Ub(i)?(n="01234567".indexOf(i),n!==0&&(o=!0),oe<Cn&&Ub(He[oe])&&(o=!0,n=n*8+"01234567".indexOf(He[oe++]),"0123".includes(i)&&oe<Cn&&Ub(He[oe])&&(n=n*8+"01234567".indexOf(He[oe++]))),e+=String.fromCharCode(n)):e+=i;break}else i==="\r"&&He[oe]===`
`&&++oe;else{if(jb(i.charCodeAt(0)))break;e+=i}return t!==""&&Nt({},Fi,en),{type:Vb,value:e,octal:o,start:r,end:oe}}function Tge(e,t){let r=e;t.includes("u")&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,n)=>{if(parseInt(n,16)<=1114111)return"x";Nt({},uD)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(r)}catch{Nt({},uD)}try{return new RegExp(e,t)}catch{return null}}function Dge(){var e,t,r,i,n;for(e=He[oe],Qw(e==="/","Regular expression literal must start with a slash"),t=He[oe++],r=!1,i=!1;oe<Cn;)if(e=He[oe++],t+=e,e==="\\")e=He[oe++],jb(e.charCodeAt(0))&&Nt({},sD),t+=e;else if(jb(e.charCodeAt(0)))Nt({},sD);else if(r)e==="]"&&(r=!1);else if(e==="/"){i=!0;break}else e==="["&&(r=!0);return i||Nt({},sD),n=t.substr(1,t.length-2),{value:n,literal:t}}function Rge(){var e,t,r;for(t="",r="";oe<Cn&&(e=He[oe],!!Kw(e.charCodeAt(0)));)++oe,e==="\\"&&oe<Cn?Nt({},Fi,en):(r+=e,t+=e);return r.search(/[^gimuy]/g)>=0&&Nt({},uD,r),{value:r,literal:t}}function Mge(){var e,t,r,i;return Gt=null,sj(),e=oe,t=Dge(),r=Rge(),i=Tge(t.value,r.value),{literal:t.literal+r.literal,value:i,regex:{pattern:t.value,flags:r.value},start:e,end:oe}}function Fge(e){return e.type===Cd||e.type===Lf||e.type===Zw||e.type===Jw}function lj(){if(sj(),oe>=Cn)return{type:Wb,start:oe,end:oe};let e=He.charCodeAt(oe);return Gb(e)?Cge():e===40||e===41||e===59?aD():e===39||e===34?Age():e===46?Gu(He.charCodeAt(oe+1))?Zq():aD():Gu(e)?Zq():aD()}function Do(){let e=Gt;return oe=e.end,Gt=lj(),oe=e.end,e}function uj(){let e=oe;Gt=lj(),oe=e}function Oge(e){let t=new Aa(rge);return t.elements=e,t}function Jq(e,t,r){let i=new Aa(e==="||"||e==="&&"?age:ige);return i.operator=e,i.left=t,i.right=r,i}function $ge(e,t){let r=new Aa(nge);return r.callee=e,r.arguments=t,r}function Lge(e,t,r){let i=new Aa(oge);return i.test=e,i.consequent=t,i.alternate=r,i}function dD(e){let t=new Aa(nj);return t.name=e,t}function Hb(e){let t=new Aa(sge);return t.value=e.value,t.raw=He.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Qq(e,t,r){let i=new Aa(lge);return i.computed=e==="[",i.object=t,i.property=r,i.computed||(r.member=!0),i}function Pge(e){let t=new Aa(uge);return t.properties=e,t}function ej(e,t,r){let i=new Aa(cge);return i.key=t,i.value=r,i.kind=e,i}function Ige(e,t){let r=new Aa(fge);return r.operator=e,r.argument=t,r.prefix=!0,r}function Nt(e,t){var r,i=Array.prototype.slice.call(arguments,2),n=t.replace(/%(\d)/g,(o,s)=>(Qw(s<i.length,"Message reference must be in range"),i[s]));throw r=new Error(n),r.index=oe,r.description=n,r}function e5(e){e.type===Wb&&Nt(e,gge),e.type===Ed&&Nt(e,hge),e.type===Vb&&Nt(e,dge),e.type===Cd&&Nt(e,pge),e.type===Lf&&Nt(e,mge),Nt(e,Fi,e.value)}function kn(e){let t=Do();(t.type!==To||t.value!==e)&&e5(t)}function gr(e){return Gt.type===To&&Gt.value===e}function lD(e){return Gt.type===Lf&&Gt.value===e}function Nge(){let e=[];for(oe=Gt.start,kn("[");!gr("]");)gr(",")?(Do(),e.push(null)):(e.push(kd()),gr("]")||kn(","));return Do(),Oge(e)}function tj(){oe=Gt.start;let e=Do();return e.type===Vb||e.type===Ed?(e.octal&&Nt(e,oj),Hb(e)):dD(e.value)}function Bge(){var e,t,r,i;if(oe=Gt.start,e=Gt,e.type===Cd)return r=tj(),kn(":"),i=kd(),ej("init",r,i);if(e.type===Wb||e.type===To)e5(e);else return t=tj(),kn(":"),i=kd(),ej("init",t,i)}function zge(){var e=[],t,r,i,n={},o=String;for(oe=Gt.start,kn("{");!gr("}");)t=Bge(),t.key.type===nj?r=t.key.name:r=o(t.key.value),i="$"+r,Object.prototype.hasOwnProperty.call(n,i)?Nt({},vge):n[i]=!0,e.push(t),gr("}")||kn(",");return kn("}"),Pge(e)}function Hge(){kn("(");let e=pD();return kn(")"),e}var Uge={if:1};function qge(){var e,t,r;if(gr("("))return Hge();if(gr("["))return Nge();if(gr("{"))return zge();if(e=Gt.type,oe=Gt.start,e===Cd||Uge[Gt.value])r=dD(Do().value);else if(e===Vb||e===Ed)Gt.octal&&Nt(Gt,oj),r=Hb(Do());else{if(e===Lf)throw new Error(qb);e===Zw?(t=Do(),t.value=t.value==="true",r=Hb(t)):e===Jw?(t=Do(),t.value=null,r=Hb(t)):gr("/")||gr("/=")?(r=Hb(Mge()),uj()):e5(Do())}return r}function jge(){let e=[];if(kn("("),!gr(")"))for(;oe<Cn&&(e.push(kd()),!gr(")"));)kn(",");return kn(")"),e}function Wge(){oe=Gt.start;let e=Do();return Fge(e)||e5(e),dD(e.value)}function Vge(){return kn("."),Wge()}function Gge(){kn("[");let e=pD();return kn("]"),e}function Yge(){var e,t,r;for(e=qge();;)if(gr("."))r=Vge(),e=Qq(".",e,r);else if(gr("("))t=jge(),e=$ge(e,t);else if(gr("["))r=Gge(),e=Qq("[",e,r);else break;return e}function rj(){let e=Yge();if(Gt.type===To&&(gr("++")||gr("--")))throw new Error(qb);return e}function Xw(){var e,t;if(Gt.type!==To&&Gt.type!==Lf)t=rj();else{if(gr("++")||gr("--"))throw new Error(qb);if(gr("+")||gr("-")||gr("~")||gr("!"))e=Do(),t=Xw(),t=Ige(e.value,t);else{if(lD("delete")||lD("void")||lD("typeof"))throw new Error(qb);t=rj()}}return t}function ij(e){let t=0;if(e.type!==To&&e.type!==Lf)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Xge(){var e,t,r,i,n,o,s,a,l,u;if(e=Gt,l=Xw(),i=Gt,n=ij(i),n===0)return l;for(i.prec=n,Do(),t=[e,Gt],s=Xw(),o=[l,i,s];(n=ij(Gt))>0;){for(;o.length>2&&n<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),r=Jq(a,l,s),o.push(r);i=Do(),i.prec=n,o.push(i),t.push(Gt),r=Xw(),o.push(r)}for(u=o.length-1,r=o[u],t.pop();u>1;)t.pop(),r=Jq(o[u-1].value,o[u-2],r),u-=2;return r}function kd(){var e,t,r;return e=Xge(),gr("?")&&(Do(),t=kd(),kn(":"),r=kd(),e=Lge(e,t,r)),e}function pD(){let e=kd();if(gr(","))throw new Error(qb);return e}function t5(e){He=e,oe=0,Cn=He.length,Gt=null,uj();let t=pD();if(Gt.type!==Wb)throw new Error("Unexpect token after expression.");return t}var mD={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function gD(e){function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function r(s,a,l){return u=>t(s,u,a,l)}let i="new Date",n="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&te("Missing arguments to clamp function."),s.length>3&&te("Too many arguments to clamp function.");let a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:r("getDate",i,0),day:r("getDay",i,0),year:r("getFullYear",i,0),month:r("getMonth",i,0),hours:r("getHours",i,0),minutes:r("getMinutes",i,0),seconds:r("getSeconds",i,0),milliseconds:r("getMilliseconds",i,0),time:r("getTime",i,0),timezoneoffset:r("getTimezoneOffset",i,0),utcdate:r("getUTCDate",i,0),utcday:r("getUTCDay",i,0),utcyear:r("getUTCFullYear",i,0),utcmonth:r("getUTCMonth",i,0),utchours:r("getUTCHours",i,0),utcminutes:r("getUTCMinutes",i,0),utcseconds:r("getUTCSeconds",i,0),utcmilliseconds:r("getUTCMilliseconds",i,0),length:r("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:r("toUpperCase",n,0),lower:r("toLowerCase",n,0),substring:r("substring",n),split:r("split",n),trim:r("trim",n,0),btoa:"btoa",atob:"atob",regexp:o,test:r("test",o),if:function(s){s.length<3&&te("Missing arguments to if function."),s.length>3&&te("Too many arguments to if function.");let a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Kge(e){let t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function r5(e){e=e||{};let t=e.allowed?ii(e.allowed):{},r=e.forbidden?ii(e.forbidden):{},i=e.constants||mD,n=(e.functions||gD)(f),o=e.globalvar,s=e.fieldvar,a=Ke(o)?o:d=>`${o}["${d}"]`,l={},u={},c=0;function f(d){if(he(d))return d;let m=h[d.type];return m==null&&te("Unsupported type: "+d.type),m(d)}let h={Literal:d=>d.raw,Identifier:d=>{let m=d.name;return c>0?m:_e(r,m)?te("Illegal identifier: "+m):_e(i,m)?i[m]:_e(t,m)?m:(l[m]=1,a(m))},MemberExpression:d=>{let m=!d.computed,g=f(d.object);m&&(c+=1);let v=f(d.property);return g===s&&(u[Kge(v)]=1),m&&(c-=1),g+(m?"."+v:"["+v+"]")},CallExpression:d=>{d.callee.type!=="Identifier"&&te("Illegal callee type: "+d.callee.type);let m=d.callee.name,g=d.arguments,v=_e(n,m)&&n[m];return v||te("Unrecognized function: "+m),Ke(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:d=>"["+d.elements.map(f).join(",")+"]",BinaryExpression:d=>"("+f(d.left)+" "+d.operator+" "+f(d.right)+")",UnaryExpression:d=>"("+d.operator+f(d.argument)+")",ConditionalExpression:d=>"("+f(d.test)+"?"+f(d.consequent)+":"+f(d.alternate)+")",LogicalExpression:d=>"("+f(d.left)+d.operator+f(d.right)+")",ObjectExpression:d=>"{"+d.properties.map(f).join(",")+"}",Property:d=>{c+=1;let m=f(d.key);return c-=1,m+":"+f(d.value)}};function p(d){let m={code:f(d),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},m}return p.functions=n,p.constants=i,p}var cj=Symbol("vega_selection_getter");function pj(e){return(!e.getter||!e.getter[cj])&&(e.getter=Ai(e.field),e.getter[cj]=!0),e.getter}var bD="intersect",fj="union",Zge="vlMulti",Jge="vlPoint",hj="or",Qge="and",Ml="_vgsid_",Yb=Ai(Ml),e1e="E",t1e="R",r1e="R-E",i1e="R-LE",n1e="R-RE",o1e="E-LT",s1e="E-LTE",a1e="E-GT",l1e="E-GTE",u1e="E-VALID",c1e="E-ONE",i5="index:unit";function dj(e,t){for(var r=t.fields,i=t.values,n=r.length,o=0,s,a;o<n;++o)if(a=r[o],s=pj(a)(e),ca(s)&&(s=Gr(s)),ca(i[o])&&(i[o]=Gr(i[o])),K(i[o])&&ca(i[o][0])&&(i[o]=i[o].map(Gr)),a.type===e1e){if(K(i[o])?!i[o].includes(s):s!==i[o])return!1}else if(a.type===t1e){if(!jc(s,i[o]))return!1}else if(a.type===n1e){if(!jc(s,i[o],!0,!1))return!1}else if(a.type===r1e){if(!jc(s,i[o],!1,!1))return!1}else if(a.type===i1e){if(!jc(s,i[o],!1,!0))return!1}else if(a.type===o1e){if(s>=i[o])return!1}else if(a.type===s1e){if(s>i[o])return!1}else if(a.type===a1e){if(s<=i[o])return!1}else if(a.type===l1e){if(s<i[o])return!1}else if(a.type===u1e){if(s===null||isNaN(s))return!1}else if(a.type===c1e&&i[o].indexOf(s)===-1)return!1;return!0}function mj(e,t,r){for(var i=this.context.data[e],n=i?i.values.value:[],o=i?i[i5]&&i[i5].value:void 0,s=r===bD,a=n.length,l=0,u,c,f,h,p;l<a;++l)if(u=n[l],o&&s){if(c=c||{},f=c[h=u.unit]||0,f===-1)continue;if(p=dj(t,u),c[h]=p?-1:++f,p&&o.size===1)return!0;if(!p&&f===o.get(h).count)return!1}else if(p=dj(t,u),s^p)return p;return a&&s}var gj=Ko(Yb),f1e=gj.left,h1e=gj.right;function vj(e,t,r){let i=this.context.data[e],n=i?i.values.value:[],o=i?i[i5]&&i[i5].value:void 0,s=r===bD,a=Yb(t),l=f1e(n,a);if(l===n.length||Yb(n[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(h1e(n,a)-l<o.size)return!1}return!0}function bj(e,t){return e.map(r=>Ze(t.fields?{values:t.fields.map(i=>pj(i)(r.datum))}:{[Ml]:Yb(r.datum)},t))}function yj(e,t,r,i){for(var n=this.context.data[e],o=n?n.values.value:[],s={},a={},l={},u,c,f,h,p,d,m,g,v,b,y=o.length,x=0,S,_;x<y;++x)if(u=o[x],h=u.unit,c=u.fields,f=u.values,c&&f){for(S=0,_=c.length;S<_;++S)p=c[S],m=s[p.field]||(s[p.field]={}),g=m[h]||(m[h]=[]),l[p.field]=v=p.type.charAt(0),b=vD[`${v}_union`],m[h]=b(g,ve(f[S]));r&&(g=a[h]||(a[h]=[]),g.push(ve(f).reduce((w,k,A)=>(w[c[A].field]=k,w),{})))}else p=Ml,d=Yb(u),m=s[p]||(s[p]={}),g=m[h]||(m[h]=[]),g.push(d),r&&(g=a[h]||(a[h]=[]),g.push({[Ml]:d}));if(t=t||fj,s[Ml]?s[Ml]=vD[`${Ml}_${t}`](...Object.values(s[Ml])):Object.keys(s).forEach(w=>{s[w]=Object.keys(s[w]).map(k=>s[w][k]).reduce((k,A)=>k===void 0?A:vD[`${l[w]}_${t}`](k,A))}),o=Object.keys(a),r&&o.length){let w=i?Jge:Zge;s[w]=t===fj?{[hj]:o.reduce((k,A)=>(k.push(...a[A]),k),[])}:{[Qge]:o.map(k=>({[hj]:a[k]}))}}return s}var vD={[`${Ml}_union`]:Lx,[`${Ml}_intersect`]:$x,E_union:function(e,t){if(!e.length)return t;for(var r=0,i=t.length;r<i;++r)e.includes(t[r])||e.push(t[r]);return e},E_intersect:function(e,t){return e.length?e.filter(r=>t.includes(r)):t},R_union:function(e,t){var r=Gr(t[0]),i=Gr(t[1]);return r>i&&(r=t[1],i=t[0]),e.length?(e[0]>r&&(e[0]=r),e[1]<i&&(e[1]=i),e):[r,i]},R_intersect:function(e,t){var r=Gr(t[0]),i=Gr(t[1]);return r>i&&(r=t[1],i=t[0]),e.length?i<e[0]||e[1]<r?[]:(e[0]<r&&(e[0]=r),e[1]>i&&(e[1]=i),e):[r,i]}},d1e=":",p1e="@";function n5(e,t,r,i){t[0].type!==Yu&&te("First argument to selection functions must be a string literal.");let n=t[0].value,o=t.length>=2&&ct(t).value,s="unit",a=p1e+s,l=d1e+n;o===bD&&!_e(i,a)&&(i[a]=r.getData(n).indataRef(r,s)),_e(i,l)||(i[l]=r.getData(n).tuplesRef())}function Sj(e){let t=this.context.data[e];return t?t.values.value:[]}function m1e(e,t,r){let i=this.context.data[e]["index:"+t],n=i?i.value.get(r):void 0;return n&&n.count}function g1e(e,t){let r=this.context.dataflow,i=this.context.data[e],n=i.input;return r.pulse(n,r.changeset().remove(gi).insert(t)),1}function v1e(e,t,r){if(e){let i=this.context.dataflow,n=e.mark.source;i.pulse(n,i.changeset().encode(e,t))}return r!==void 0?r:e}var Xb=e=>function(t,r){let i=this.context.dataflow.locale();return t===null?"null":i[e](r)(t)},b1e=Xb("format"),Cj=Xb("timeFormat"),y1e=Xb("utcFormat"),x1e=Xb("timeParse"),_1e=Xb("utcParse"),o5=new Date(2e3,0,1);function s5(e,t,r){return!Number.isInteger(e)||!Number.isInteger(t)?"":(o5.setYear(2e3),o5.setMonth(e),o5.setDate(t),Cj.call(this,o5,r))}function w1e(e){return s5.call(this,e,1,"%B")}function S1e(e){return s5.call(this,e,1,"%b")}function C1e(e){return s5.call(this,0,2+e,"%A")}function k1e(e){return s5.call(this,0,2+e,"%a")}var E1e=":",A1e="@",xD="%",kj="$";function SD(e,t,r,i){t[0].type!==Yu&&te("First argument to data functions must be a string literal.");let n=t[0].value,o=E1e+n;if(!_e(o,i))try{i[o]=r.getData(n).tuplesRef()}catch{}}function T1e(e,t,r,i){t[0].type!==Yu&&te("First argument to indata must be a string literal."),t[1].type!==Yu&&te("Second argument to indata must be a string literal.");let n=t[0].value,o=t[1].value,s=A1e+o;_e(s,i)||(i[s]=r.getData(n).indataRef(r,o))}function ao(e,t,r,i){if(t[0].type===Yu)xj(r,i,t[0].value);else for(e in r.scales)xj(r,i,e)}function xj(e,t,r){let i=xD+r;if(!_e(t,i))try{t[i]=e.scaleRef(r)}catch{}}function Fl(e,t){if(he(e)){let r=t.scales[e];return r&&hE(r.value)?r.value:void 0}else if(Ke(e))return hE(e)?e:void 0}function D1e(e,t,r){t.__bandwidth=n=>n&&n.bandwidth?n.bandwidth():0,r._bandwidth=ao,r._range=ao,r._scale=ao;let i=n=>"_["+(n.type===Yu?de(xD+n.value):de(xD)+"+"+e(n))+"]";return{_bandwidth:n=>`this.__bandwidth(${i(n[0])})`,_range:n=>`${i(n[0])}.range()`,_scale:n=>`${i(n[0])}(${e(n[1])})`}}function CD(e,t){return function(r,i,n){if(r){let o=Fl(r,(n||this).context);return o&&o.path[e](i)}else return t(i)}}var R1e=CD("area",M9),M1e=CD("bounds",O9),F1e=CD("centroid",N9);function O1e(e,t){let r=Fl(e,(t||this).context);return r&&r.scale()}function $1e(e){let t=this.context.group,r=!1;if(t)for(;e;){if(e===t){r=!0;break}e=e.mark.group}return r}function kD(e,t,r){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(r)))}catch(i){e.warn(i)}return r[r.length-1]}function L1e(){return kD(this.context.dataflow,"warn",arguments)}function P1e(){return kD(this.context.dataflow,"info",arguments)}function I1e(){return kD(this.context.dataflow,"debug",arguments)}function yD(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _D(e){let t=Ds(e),r=yD(t.r),i=yD(t.g),n=yD(t.b);return .2126*r+.7152*i+.0722*n}function N1e(e,t){let r=_D(e),i=_D(t),n=Math.max(r,i),o=Math.min(r,i);return(n+.05)/(o+.05)}function B1e(){let e=[].slice.call(arguments);return e.unshift({}),Ze(...e)}function Ej(e,t){return e===t||e!==e&&t!==t?!0:K(e)?K(t)&&e.length===t.length?z1e(e,t):!1:me(e)&&me(t)?Aj(e,t):!1}function z1e(e,t){for(let r=0,i=e.length;r<i;++r)if(!Ej(e[r],t[r]))return!1;return!0}function Aj(e,t){for(let r in e)if(!Ej(e[r],t[r]))return!1;return!0}function _j(e){return t=>Aj(e,t)}function H1e(e,t,r,i,n,o){let s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp(),c=a.changes,f,h;if(s._trigger===!1||!(l.value.length||t||i))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),r&&(f=r===!0?gi:K(r)||Bh(r)?r:_j(r),c.remove(f)),t&&c.insert(t),i&&(f=_j(i),l.value.some(f)?c.remove(f):c.insert(i)),n)for(h in o)c.modify(n,h,o[h]);return 1}function U1e(e){let t=e.touches,r=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(r,i)}function q1e(e){let t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}var wj={};function j1e(e,t){let r=wj[t]||(wj[t]=Ai(t));return K(e)?e.map(r):r(e)}function a5(e){return K(e)||ArrayBuffer.isView(e)?e:null}function ED(e){return a5(e)||(he(e)?e:null)}function W1e(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return a5(e).join(...r)}function V1e(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return ED(e).indexOf(...r)}function G1e(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return ED(e).lastIndexOf(...r)}function Y1e(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return ED(e).slice(...r)}function X1e(e,t,r){return Ke(r)&&te("Function argument passed to replace."),!he(t)&&!Ex(t)&&te("Please pass a string or RegExp argument to replace."),String(e).replace(t,r)}function K1e(e){return a5(e).slice().reverse()}function Z1e(e){return a5(e).slice().sort(yu)}function J1e(e,t,r){return Sv(e||0,t||0,r||0)}function Q1e(e,t){let r=Fl(e,(t||this).context);return r&&r.bandwidth?r.bandwidth():0}function eve(e,t){let r=Fl(e,(t||this).context);return r?r.copy():void 0}function tve(e,t){let r=Fl(e,(t||this).context);return r?r.domain():[]}function rve(e,t,r){let i=Fl(e,(r||this).context);return i?K(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function ive(e,t){let r=Fl(e,(t||this).context);return r&&r.range?r.range():[]}function nve(e,t,r){let i=Fl(e,(r||this).context);return i?i(t):void 0}function ove(e,t,r,i,n){e=Fl(e,(n||this).context);let o=BE(t,r),s=e.domain(),a=s[0],l=ct(s),u=Ir;return l-a?u=f4(e,a,l):e=(e.interpolator?_t("sequential")().interpolator(e.interpolator()):_t("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+i||15),a!==s[0]&&s.unshift(a),l!==ct(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o}function sve(e,t,r){let i=Fl(e,(r||this).context);return function(n){return i?i.path.context(n)(t):""}}function ave(e){let t=null;return function(r){return r?vp(r,t=t||ud(e)):e}}var Tj=e=>e.data;function Dj(e,t){let r=Sj.call(t,e);return r.root&&r.root.lookup||{}}function lve(e,t,r){let i=Dj(e,this),n=i[t],o=i[r];return n&&o?n.path(o).map(Tj):void 0}function uve(e,t){let r=Dj(e,this)[t];return r?r.ancestors().map(Tj):void 0}var Rj=()=>typeof window<"u"&&window||null;function cve(){let e=Rj();return e?e.screen:{}}function fve(){let e=Rj();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function hve(){let e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Mj(e,t,r){if(!e)return[];let[i,n]=e,o=new Nr().set(i[0],i[1],n[0],n[1]),s=r||this.context.dataflow.scenegraph().root;return u9(s,o,dve(t))}function dve(e){let t=null;if(e){let r=ve(e.marktype),i=ve(e.markname);t=n=>(!r.length||r.some(o=>n.marktype===o))&&(!i.length||i.some(o=>n.name===o))}return t}function pve(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ve(e);let n=e[e.length-1];return n===void 0||Math.hypot(n[0]-t,n[1]-r)>i?[...e,[t,r]]:e}function mve(e){return ve(e).reduce((t,r,i)=>{let[n,o]=r;return t+=i==0?`M ${n},${o} `:i===e.length-1?" Z":`L ${n},${o} `},"")}function gve(e,t,r){let{x:i,y:n,mark:o}=r,s=new Nr().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(i,n),Mj([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>vve(l.x,l.y,t))}function vve(e,t,r){let i=0;for(let n=0,o=r.length-1;n<r.length;o=n++){let[s,a]=r[o],[l,u]=r[n];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&i++}return i&1}var Kp={random(){return Zn()},cumulativeNormal:G1,cumulativeLogNormal:u_,cumulativeUniform:d_,densityNormal:n_,densityLogNormal:l_,densityUniform:h_,quantileNormal:Y1,quantileLogNormal:c_,quantileUniform:p_,sampleNormal:V1,sampleLogNormal:a_,sampleUniform:f_,isArray:K,isBoolean:xo,isDate:ca,isDefined(e){return e!==void 0},isNumber:ut,isObject:me,isRegExp:Ex,isString:he,isTuple:Bh,isValid(e){return e!=null&&e===e},toBoolean:m1,toDate(e){return g1(e)},toNumber:Gr,toString:v1,indexof:V1e,join:W1e,lastindexof:G1e,replace:X1e,reverse:K1e,sort:Z1e,slice:Y1e,flush:f8,lerp:d8,merge:B1e,pad:g8,peek:ct,pluck:j1e,span:xu,inrange:jc,truncate:v8,rgb:Ds,lab:uf,hcl:Kh,hsl:Xh,luminance:_D,contrast:N1e,sequence:Yr,format:b1e,utcFormat:y1e,utcParse:_1e,utcOffset:iC,utcSequence:oC,timeFormat:Cj,timeParse:x1e,timeOffset:rC,timeSequence:nC,timeUnitSpecifier:Y8,monthFormat:w1e,monthAbbrevFormat:S1e,dayFormat:C1e,dayAbbrevFormat:k1e,quarter:a8,utcquarter:l8,week:Z8,utcweek:Q8,dayofyear:K8,utcdayofyear:J8,warn:L1e,info:P1e,debug:I1e,extent(e){return Wn(e)},inScope:$1e,intersect:Mj,clampRange:u8,pinchDistance:U1e,pinchAngle:q1e,screen:cve,containerSize:hve,windowSize:fve,bandspace:J1e,setdata:g1e,pathShape:ave,panLinear:i8,panLog:n8,panPow:o8,panSymlog:s8,zoomLinear:u1,zoomLog:c1,zoomPow:P0,zoomSymlog:f1,encode:v1e,modify:H1e,lassoAppend:pve,lassoPath:mve,intersectLasso:gve},bve=["view","item","group","xy","x","y"],yve="event.vega.",Fj="this.",AD={},Oj={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${de(kj+e)}]`,functions:xve,constants:mD,visitors:AD},wD=r5(Oj);function xve(e){let t=gD(e);bve.forEach(r=>t[r]=yve+r);for(let r in Kp)t[r]=Fj+r;return Ze(t,D1e(e,Kp,AD)),t}function Ur(e,t,r){return arguments.length===1?Kp[e]:(Kp[e]=t,r&&(AD[e]=r),wD&&(wD.functions[e]=Fj+e),this)}Ur("bandwidth",Q1e,ao);Ur("copy",eve,ao);Ur("domain",tve,ao);Ur("range",ive,ao);Ur("invert",rve,ao);Ur("scale",nve,ao);Ur("gradient",ove,ao);Ur("geoArea",R1e,ao);Ur("geoBounds",M1e,ao);Ur("geoCentroid",F1e,ao);Ur("geoShape",sve,ao);Ur("geoScale",O1e,ao);Ur("indata",m1e,T1e);Ur("data",Sj,SD);Ur("treePath",lve,SD);Ur("treeAncestors",uve,SD);Ur("vlSelectionTest",mj,n5);Ur("vlSelectionIdTest",vj,n5);Ur("vlSelectionResolve",yj,n5);Ur("vlSelectionTuples",bj);function Ta(e,t){let r={},i;try{e=he(e)?e:de(e)+"",i=t5(e)}catch{te("Expression parse error: "+e)}i.visit(o=>{if(o.type!==fD)return;let s=o.callee.name,a=Oj.visitors[s];a&&a(s,o.arguments,t,r)});let n=wD(i);return n.globals.forEach(o=>{let s=kj+o;!_e(r,s)&&t.getSignal(o)&&(r[s]=t.signalRef(o))}),{$expr:Ze({code:n.code},t.options.ast?{ast:i}:null),$fields:n.fields,$params:r}}function _ve(e){let t=this,r=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),r.forEach(i=>t.parseOperator(i)),r.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}var wve=ii(["rule"]),$j=ii(["group","image","rect"]);function Sve(e,t){let r="";return wve[t]||(e.x2&&(e.x?($j[t]&&(r+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),r+="o.width=o.x2-o.x;"):r+="o.x=o.x2-(o.width||0);"),e.xc&&(r+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?($j[t]&&(r+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),r+="o.height=o.y2-o.y;"):r+="o.y=o.y2-(o.height||0);"),e.yc&&(r+="o.y=o.yc-(o.height||0)/2;")),r}function TD(e){return(e+"").toLowerCase()}function Cve(e){return TD(e)==="operator"}function kve(e){return TD(e)==="collect"}function Kb(e,t,r){r.endsWith(";")||(r="return("+r+");");let i=Function(...t.concat(r));return e&&e.functions?i.bind(e.functions):i}function Eve(e,t,r,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${r}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${r}
  : v !== v && u === u ? ${i} : `}var Ave={operator:(e,t)=>Kb(e,["_"],t.code),parameter:(e,t)=>Kb(e,["datum","_"],t.code),event:(e,t)=>Kb(e,["event"],t.code),handler:(e,t)=>{let r=`var datum=event.item&&event.item.datum;return ${t.code};`;return Kb(e,["_","event"],r)},encode:(e,t)=>{let{marktype:r,channels:i}=t,n="var o=item,datum=o.datum,m=0,$;";for(let o in i){let s="o["+de(o)+"]";n+=`$=${i[o].code};if(${s}!==$)${s}=$,m=1;`}return n+=Sve(i,r),n+="return m;",Kb(e,["item","_"],n)},codegen:{get(e){let t=`[${e.map(de).join("][")}]`,r=Function("_",`return _${t};`);return r.path=t,r},comparator(e,t){let r,i=(o,s)=>{let a=t[s],l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((r=r||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),Eve(l,u,-a,a)},n=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return r?n.bind(r):n}}};function Tve(e){let t=this;Cve(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Dve(e){let t=this;if(e.params){let r=t.get(e.id);r||te("Invalid operator id: "+e.id),t.dataflow.connect(r,r.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Rve(e,t){t=t||{};let r=this;for(let i in e){let n=e[i];t[i]=K(n)?n.map(o=>Lj(o,r,t)):Lj(n,r,t)}return t}function Lj(e,t,r){if(!e||!me(e))return e;for(let i=0,n=Pj.length,o;i<n;++i)if(o=Pj[i],_e(e,o.key))return o.parse(e,t,r);return e}var Pj=[{key:"$ref",parse:Mve},{key:"$key",parse:Ove},{key:"$expr",parse:Fve},{key:"$field",parse:$ve},{key:"$encode",parse:Pve},{key:"$compare",parse:Lve},{key:"$context",parse:Ive},{key:"$subflow",parse:Nve},{key:"$tupleid",parse:Bve}];function Mve(e,t){return t.get(e.$ref)||te("Operator not defined: "+e.$ref)}function Fve(e,t,r){e.$params&&t.parseParameters(e.$params,r);let i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=gn(t.parameterExpression(e.$expr),e.$fields))}function Ove(e,t){let r="k:"+e.$key+"_"+!!e.$flat;return t.fn[r]||(t.fn[r]=p1(e.$key,e.$flat,t.expr.codegen))}function $ve(e,t){if(!e.$field)return null;let r="f:"+e.$field+"_"+e.$name;return t.fn[r]||(t.fn[r]=Ai(e.$field,e.$name,t.expr.codegen))}function Lve(e,t){let r="c:"+e.$compare+"_"+e.$order,i=ve(e.$compare).map(n=>n&&n.$tupleid?qe:n);return t.fn[r]||(t.fn[r]=h1(i,e.$order,t.expr.codegen))}function Pve(e,t){let r=e.$encode,i={};for(let n in r){let o=r[n];i[n]=gn(t.encodeExpression(o.$expr),o.$fields),i[n].output=o.$output}return i}function Ive(e,t){return t}function Nve(e,t){let r=e.$subflow;return function(i,n,o){let s=t.fork().parse(r),a=s.get(r.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function Bve(){return qe}function zve(e){var t=this,r=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,n;e.source?i=t.events(e.source,e.type,r):e.merge&&(n=e.merge.map(o=>t.get(o)),i=n[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(o=>t.get(o)),i=i.between(n[0],n[1])),e.filter&&(i=i.filter(r)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Hve(e){var t=this,r=me(r=e.source)?r.$ref:r,i=t.get(r),n=null,o=e.update,s=void 0;i||te("Source not defined: "+e.source),n=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,i,n,o,s)}var Uve={skip:!0};function qve(e){var t=this,r={};if(e.signals){var i=r.signals={};Object.keys(t.signals).forEach(o=>{let s=t.signals[o];e.signals(o,s)&&(i[o]=s.value)})}if(e.data){var n=r.data={};Object.keys(t.data).forEach(o=>{let s=t.data[o];e.data(o,s)&&(n[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(r.subcontext=t.subcontext.map(o=>o.getState(e))),r}function jve(e){var t=this,r=t.dataflow,i=e.data,n=e.signals;Object.keys(n||{}).forEach(o=>{r.update(t.signals[o],n[o],Uve)}),Object.keys(i||{}).forEach(o=>{r.pulse(t.data[o].input,r.changeset().remove(gi).insert(i[o]))}),(e.subcontext||[]).forEach((o,s)=>{let a=t.subcontext[s];a&&a.setState(o)})}function l5(e,t,r,i){return new Nj(e,t,r,i)}function Nj(e,t,r,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||Ave,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},r&&(this.functions=Object.create(r),this.functions.context=this)}function Ij(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Nj.prototype=Ij.prototype={fork(){let e=new Ij(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(r=>r!==e);let t=Object.keys(e.nodes);for(let r of t)e.nodes[r]._targets=null;for(let r of t)e.nodes[r].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){let r=this,i=r.dataflow,n=e.value;if(r.set(e.id,t),kve(e.type)&&n&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.preload(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){let o=r.get(e.parent.$ref);o?(i.connect(o,[t]),t.targets().add(o)):(r.unresolved=r.unresolved||[]).push(()=>{o=r.get(e.parent.$ref),i.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(let o in e.data){let s=r.data[o]||(r.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[TD(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,r,i,n){this.dataflow.on(t,r,i,n,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:_ve,parseOperator:Tve,parseOperatorParameters:Dve,parseParameters:Rve,parseStream:zve,parseUpdate:Hve,getState:qve,setState:jve};function Wve(e){let t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Gj(t,e.description()))}function Gj(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Vve(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}var DD="default";function Gve(e){let t=e._signals.cursor||(e._signals.cursor=e.add({user:DD,item:null}));e.on(e.events("view","pointermove"),t,(r,i)=>{let n=t.value,o=n?he(n)?n:n.user:DD,s=i.item&&i.item.cursor||null;return n&&o===n.user&&s==n.item?n:{user:o,item:s}}),e.add(null,function(r){let i=r.cursor,n=this.value;return he(i)||(n=i.item,i=i.user),MD(e,i&&i!==DD?i:n||i),n},{cursor:t})}function MD(e,t){let r=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(r)return t==null?r.style.removeProperty("cursor"):r.style.cursor=t}function f5(e,t){var r=e._runtime.data;return _e(r,t)||te("Unrecognized data set: "+t),r[t]}function Yve(e,t){return arguments.length<2?f5(this,e).values.value:d5.call(this,e,Ru().remove(gi).insert(t))}function d5(e,t){xC(t)||te("Second argument to changes must be a changeset.");let r=f5(this,e);return r.modified=!0,this.pulse(r.input,t)}function Xve(e,t){return d5.call(this,e,Ru().insert(t))}function Kve(e,t){return d5.call(this,e,Ru().remove(t))}function Yj(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Xj(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function p5(e){var t=e.padding(),r=e._origin;return[t.left+r[0],t.top+r[1]]}function Zve(e){var t=p5(e),r=Yj(e),i=Xj(e);e._renderer.background(e.background()),e._renderer.resize(r,i,t),e._handler.origin(t),e._resizeListeners.forEach(n=>{try{n(r,i)}catch(o){e.error(o)}})}function Jve(e,t,r){var i=e._renderer,n=i&&i.canvas(),o,s,a;return n&&(a=p5(e),s=t.changedTouches?t.changedTouches[0]:t,o=eb(s,n),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=r,t.vega=Qve(e,r,o),t}function Qve(e,t,r){let i=t?t.mark.marktype==="group"?t:t.mark.group:null;function n(s){var a=i,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return r;he(s)&&(s=n(s));let a=r.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:br(e),item:br(t||{}),group:n,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}var Bj="view",ebe="timer",tbe="window",rbe={trap:!1};function ibe(e){let t=Ze({defaults:{}},e),r=(i,n)=>{n.forEach(o=>{K(i[o])&&(i[o]=ii(i[o]))})};return r(t.defaults,["prevent","allow"]),r(t,["view","window","selector"]),t}function Kj(e,t,r,i){e._eventListeners.push({type:r,sources:ve(t),handler:i})}function nbe(e,t){var r=e._eventConfig.defaults,i=r.prevent,n=r.allow;return i===!1||n===!0?!1:i===!0||n===!1?!0:i?i[t]:n?!n[t]:e.preventDefault()}function u5(e,t,r){let i=e._eventConfig&&e._eventConfig[t];return i===!1||me(i)&&!i[r]?(e.warn(`Blocked ${t} ${r} event listener.`),!1):!0}function obe(e,t,r){var i=this,n=new Z0(r),o=function(u,c){i.runAsync(null,()=>{e===Bj&&nbe(i,t)&&u.preventDefault(),n.receive(Jve(i,u,c))})},s;if(e===ebe)u5(i,"timer",t)&&i.timer(o,t);else if(e===Bj)u5(i,"view",t)&&i.addEventListener(t,o,rbe);else if(e===tbe?u5(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&u5(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);Kj(i,s,t,o)}return n}function zj(e){return e.item}function Hj(e){return e.item.mark.source}function Uj(e){return function(t,r){return r.vega.view().changeset().encode(r.item,e)}}function sbe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",zj),Hj,Uj(e)),this.on(this.events("view","pointerout",zj),Hj,Uj(t)),this}function abe(){var e=this._tooltip,t=this._timers,r=this._handler.handlers(),i=this._eventListeners,n,o,s,a,l;for(n=t.length;--n>=0;)t[n].stop();for(n=i.length;--n>=0;)for(s=i[n],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),n=r.length;--n>=0;)l=r[n].type,a=r[n].handler,this._handler.off(l,a);return this}function rs(e,t,r){let i=document.createElement(e);for(let n in t)i.setAttribute(n,t[n]);return r!=null&&(i.textContent=r),i}var lbe="vega-bind",ube="vega-bind-name",cbe="vega-bind-radio";function fbe(e,t,r){if(!t)return;let i=r.param,n=r.state;return n||(n=r.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{n.source=!0,e.signal(i.signal,s)})}},i.debounce&&(n.update=d1(i.debounce,n.update))),(i.input==null&&i.element?hbe:pbe)(n,t,i,e),n.active||(e.on(e._signals[i.signal],null,()=>{n.source?n.source=!1:n.set(e.signal(i.signal))}),n.active=!0),n}function hbe(e,t,r,i){let n=r.event||"input",o=()=>e.update(t.value);i.signal(r.signal,t.value),t.addEventListener(n,o),Kj(i,t,n,o),e.set=s=>{t.value=s,t.dispatchEvent(dbe(n))}}function dbe(e){return typeof Event<"u"?new Event(e):{type:e}}function pbe(e,t,r,i){let n=i.signal(r.signal),o=rs("div",{class:lbe}),s=r.input==="radio"?o:o.appendChild(rs("label"));s.appendChild(rs("span",{class:ube},r.name||r.signal)),t.appendChild(o);let a=mbe;switch(r.input){case"checkbox":a=gbe;break;case"select":a=vbe;break;case"radio":a=bbe;break;case"range":a=ybe;break}a(e,s,r,n)}function mbe(e,t,r,i){let n=rs("input");for(let o in r)o!=="signal"&&o!=="element"&&n.setAttribute(o==="input"?"type":o,r[o]);n.setAttribute("name",r.signal),n.value=i,t.appendChild(n),n.addEventListener("input",()=>e.update(n.value)),e.elements=[n],e.set=o=>n.value=o}function gbe(e,t,r,i){let n={type:"checkbox",name:r.signal};i&&(n.checked=!0);let o=rs("input",n);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function vbe(e,t,r,i){let n=rs("select",{name:r.signal}),o=r.labels||[];r.options.forEach((s,a)=>{let l={value:s};h5(s,i)&&(l.selected=!0),n.appendChild(rs("option",l,(o[a]||s)+""))}),t.appendChild(n),n.addEventListener("change",()=>{e.update(r.options[n.selectedIndex])}),e.elements=[n],e.set=s=>{for(let a=0,l=r.options.length;a<l;++a)if(h5(r.options[a],s)){n.selectedIndex=a;return}}}function bbe(e,t,r,i){let n=rs("span",{class:cbe}),o=r.labels||[];t.appendChild(n),e.elements=r.options.map((s,a)=>{let l={type:"radio",name:r.signal,value:s};h5(s,i)&&(l.checked=!0);let u=rs("input",l);u.addEventListener("change",()=>e.update(s));let c=rs("label",{},(o[a]||s)+"");return c.prepend(u),n.appendChild(c),u}),e.set=s=>{let a=e.elements,l=a.length;for(let u=0;u<l;++u)h5(a[u].value,s)&&(a[u].checked=!0)}}function ybe(e,t,r,i){i=i!==void 0?i:(+r.max+ +r.min)/2;let n=r.max!=null?r.max:Math.max(100,+i)||100,o=r.min||Math.min(0,n,+i)||0,s=r.step||Vn(o,n,100),a=rs("input",{type:"range",name:r.signal,min:o,max:n,step:s});a.value=i;let l=rs("span",{},+i);t.appendChild(a),t.appendChild(l);let u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function h5(e,t){return e===t||e+""==t+""}function Zj(e,t,r,i,n,o){return t=t||new i(e.loader()),t.initialize(r,Yj(e),Xj(e),p5(e),n,o).background(e.background())}function FD(e,t){return t?function(){try{t.apply(this,arguments)}catch(r){e.error(r)}}:null}function xbe(e,t,r,i){let n=new i(e.loader(),FD(e,e.tooltip())).scene(e.scenegraph().root).initialize(r,p5(e),e);return t&&t.handlers().forEach(o=>{n.on(o.type,o.handler)}),n}function _be(e,t){let r=this,i=r._renderType,n=r._eventConfig.bind,o=tb(i);e=r._el=e?RD(r,e,!0):null,Wve(r),o||r.error("Unrecognized renderer type: "+i);let s=o.handler||wf,a=e?o.renderer:o.headless;return r._renderer=a?Zj(r,r._renderer,e,a):null,r._handler=xbe(r,r._handler,e,s),r._redraw=!0,e&&n!=="none"&&(t=t?r._elBind=RD(r,t,!0):e.appendChild(rs("form",{class:"vega-bindings"})),r._bind.forEach(l=>{l.param.element&&n!=="container"&&(l.element=RD(r,l.param.element,!!l.param.input))}),r._bind.forEach(l=>{fbe(r,l.element||t,l)})),r}function RD(e,t,r){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&r)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}var Zb=e=>+e||0,wbe=e=>({top:e,bottom:e,left:e,right:e});function qj(e){return me(e)?{top:Zb(e.top),bottom:Zb(e.bottom),left:Zb(e.left),right:Zb(e.right)}:wbe(Zb(e))}async function OD(e,t,r,i){let n=tb(t),o=n&&n.headless;return o||te("Unrecognized renderer type: "+t),await e.runAsync(),Zj(e,null,null,o,r,i).renderAsync(e._scenegraph.root)}async function Sbe(e,t){e!==Iu.Canvas&&e!==Iu.SVG&&e!==Iu.PNG&&te("Unrecognized image type: "+e);let r=await OD(this,e,t);return e===Iu.SVG?Cbe(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png")}function Cbe(e,t){let r=new Blob([e],{type:t});return window.URL.createObjectURL(r)}async function kbe(e,t){return(await OD(this,Iu.Canvas,e,t)).canvas()}async function Ebe(e){return(await OD(this,Iu.SVG,e)).svg()}function Abe(e,t,r){return l5(e,Du,Kp,r).parse(t)}function Tbe(e){var t=this._runtime.scales;return _e(t,e)||te("Unrecognized scale or projection: "+e),t[e].value}var Jj="width",Qj="height",$D="padding",jj={skip:!0};function eW(e,t){var r=e.autosize(),i=e.padding();return t-(r&&r.contains===$D?i.left+i.right:0)}function tW(e,t){var r=e.autosize(),i=e.padding();return t-(r&&r.contains===$D?i.top+i.bottom:0)}function Dbe(e){var t=e._signals,r=t[Jj],i=t[Qj],n=t[$D];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=eW(e,a.size),o()},{size:r}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=tW(e,a.size),o()},{size:i});let s=e.add(null,o,{pad:n});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=n.rank+1}function Rbe(e,t,r,i,n,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==r&&(a=1,s.signal(Jj,r,jj),s._resizeWidth.skip(!0)),s.height()!==i&&(a=1,s.signal(Qj,i,jj),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==n[0]||s._origin[1]!==n[1])&&(s._resize=1,s._origin=n),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function Mbe(e){return this._runtime.getState(e||{data:Fbe,signals:Obe,recurse:!0})}function Fbe(e,t){return t.modified&&K(t.input.value)&&!e.startsWith("_:vega:_")}function Obe(e,t){return!(e==="parent"||t instanceof Du.proxy)}function $be(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Lbe(e,t){function r(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(ZA(r,t))}function Pbe(e,t,r,i){let n=e.element();n&&n.setAttribute("title",Ibe(i))}function Ibe(e){return e==null?"":K(e)?rW(e):me(e)&&!ca(e)?Nbe(e):e+""}function Nbe(e){return Object.keys(e).map(t=>{let r=e[t];return t+": "+(K(r)?rW(r):iW(r))}).join(`
`)}function rW(e){return"["+e.map(iW).join(", ")+"]"}function iW(e){return K(e)?"[\u2026]":me(e)&&!ca(e)?"{\u2026}":e}function Bbe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null,t=()=>{e?.();let r=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);r.addEventListener("change",t),e=()=>{r.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function LD(e,t){let r=this;if(t=t||{},ef.call(r),t.loader&&r.loader(t.loader),t.logger&&r.logger(t.logger),t.logLevel!=null&&r.logLevel(t.logLevel),t.locale||e.locale){let o=Ze({},e.locale,t.locale);r.locale(jx(o.number,o.time))}r._el=null,r._elBind=null,r._renderType=t.renderer||Iu.Canvas,r._scenegraph=new Hv;let i=r._scenegraph.root;r._renderer=null,r._tooltip=t.tooltip||Pbe,r._redraw=!0,r._handler=new wf().scene(i),r._globalCursor=!1,r._preventDefault=!1,r._timers=[],r._eventListeners=[],r._resizeListeners=[],r._eventConfig=ibe(e.eventConfig),r.globalCursor(r._eventConfig.globalCursor);let n=Abe(r,e,t.expr);r._runtime=n,r._signals=n.signals,r._bind=(e.bindings||[]).map(o=>({state:null,param:Ze({},o)})),n.root&&n.root.set(i),i.source=n.data.root.input,r.pulse(n.data.root.input,r.changeset().insert(i.items)),r._width=r.width(),r._height=r.height(),r._viewWidth=eW(r,r._width),r._viewHeight=tW(r,r._height),r._origin=[0,0],r._resize=0,r._autosize=1,Dbe(r),Vve(r),Gve(r),r.description(e.description),t.hover&&r.hover(),t.container&&r.initialize(t.container,t.bind),t.watchPixelRatio&&r._watchPixelRatio()}function c5(e,t){return _e(e._signals,t)?e._signals[t]:te("Unrecognized signal name: "+de(t))}function nW(e,t){let r=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return r.length?r[0]:null}function Wj(e,t,r,i){let n=nW(r,i);return n||(n=FD(e,()=>i(t,r.value)),n.handler=i,e.on(r,null,n)),e}function Vj(e,t,r){let i=nW(t,r);return i&&t._targets.remove(i),e}xe(LD,ef,{async evaluate(e,t,r){if(await ef.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Zve(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return r&&q1(this,r),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){let t=e!=null?e+"":null;return t!==this._desc&&Gj(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,r){let i=c5(this,e);return arguments.length===1?i.value:this.update(i,t,r)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",qj(e)):qj(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(tb(e)||te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(ef.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(c5(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Rbe,addEventListener(e,t,r){let i=t;return r&&r.trap===!1||(i=FD(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var r=this._handler.handlers(e),i=r.length,n,o;--i>=0;)if(o=r[i].type,n=r[i].handler,e===o&&(t===n||t===n.raw)){this._handler.off(o,n);break}return this},addResizeListener(e){let t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,r=t.indexOf(e);return r>=0&&t.splice(r,1),this},addSignalListener(e,t){return Wj(this,e,c5(this,e),t)},removeSignalListener(e,t){return Vj(this,c5(this,e),t)},addDataListener(e,t){return Wj(this,e,f5(this,e).values,t)},removeDataListener(e,t){return Vj(this,f5(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){let t=MD(this,null);this._globalCursor=!!e,t&&MD(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Lbe,events:obe,finalize:abe,hover:sbe,data:Yve,change:d5,insert:Xve,remove:Kve,scale:Tbe,initialize:_be,toImageURL:Sbe,toCanvas:kbe,toSVG:Ebe,getState:Mbe,setState:$be,_watchPixelRatio:Bbe});var zbe="view";var Hbe=/[[\]{}]/,Ube={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},oW,sW;function En(e,t,r){return oW=t||zbe,sW=r||Ube,aW(e.trim()).map(PD)}function qbe(e){return sW[e]}function Jb(e,t,r,i,n){let o=e.length,s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===r)return t;n&&n.indexOf(a)>=0?--s:i&&i.indexOf(a)>=0&&++s}return t}function aW(e){let t=[],r=e.length,i=0,n=0;for(;n<r;)n=Jb(e,n,",","[{","]}"),t.push(e.substring(i,n).trim()),i=++n;if(t.length===0)throw"Empty event selector: "+e;return t}function PD(e){return e[0]==="["?jbe(e):Wbe(e)}function jbe(e){let t=e.length,r=1,i;if(r=Jb(e,r,"]","[","]"),r===t)throw"Empty between selector: "+e;if(i=aW(e.substring(1,r)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(r+1).trim(),e[0]!==">")throw"Expected '>' after between selector: "+e;i=i.map(PD);let n=PD(e.slice(1).trim());return n.between?{between:i,stream:n}:(n.between=i,n)}function Wbe(e){let t={source:oW},r=[],i=[0,0],n=0,o=0,s=e.length,a=0,l,u;if(e[s-1]==="}"){if(a=e.lastIndexOf("{"),a>=0){try{i=Vbe(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]==="@"&&(n=++a),l=Jb(e,a,":"),l<s&&(r.push(e.substring(o,l).trim()),o=a=++l),a=Jb(e,a,"["),a===s)r.push(e.substring(o,s).trim());else if(r.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=Jb(e,a,"]"),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!=="[")throw"Expected left bracket: "+e;o=++a}if(!(s=r.length)||Hbe.test(r[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=r[1],n?t.markname=r[0].slice(1):qbe(r[0])?t.marktype=r[0]:t.source=r[0]):t.type=r[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function Vbe(e){let t=e.split(",");if(!e.length||t.length>2)throw e;return t.map(r=>{let i=+r;if(i!==i)throw e;return i})}function Gbe(e){return me(e)?e:{type:e||"pad"}}var Qb=e=>+e||0,Ybe=e=>({top:e,bottom:e,left:e,right:e});function Xbe(e){return me(e)?e.signal?e:{top:Qb(e.top),bottom:Qb(e.bottom),left:Qb(e.left),right:Qb(e.right)}:Ybe(Qb(e))}var Oi=e=>me(e)&&!K(e)?Ze({},e):{value:e};function lW(e,t,r,i){return r!=null?(me(r)&&!K(r)||K(r)&&r.length&&me(r[0])?e.update[t]=r:e[i||"enter"][t]={value:r},1):0}function tn(e,t,r){for(let i in t)lW(e,i,t[i]);for(let i in r)lW(e,i,r[i],"update")}function rm(e,t,r){for(let i in t)r&&_e(r,i)||(e[i]=Ze(e[i]||{},t[i]));return e}function Jp(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var GD="mark",YD="frame",XD="scope",Kbe="axis",Zbe="axis-domain",Jbe="axis-grid",Qbe="axis-label",eye="axis-tick",tye="axis-title",rye="legend",iye="legend-band",nye="legend-entry",oye="legend-gradient",AW="legend-label",sye="legend-symbol",aye="legend-title",lye="title",uye="title-text",cye="title-subtitle";function fye(e,t,r,i,n){let o={},s={},a,l,u,c;l="lineBreak",t==="text"&&n[l]!=null&&!Jp(l,e)&&ID(o,l,n[l]),(r=="legend"||String(r).startsWith("axis"))&&(r=null),c=r===YD?n.group:r===GD?Ze({},n.mark,n[t]):null;for(l in c)u=Jp(l,e)||(l==="fill"||l==="stroke")&&(Jp("fill",e)||Jp("stroke",e)),u||ID(o,l,c[l]);ve(i).forEach(f=>{let h=n.style&&n.style[f];for(let p in h)Jp(p,e)||ID(o,p,h[p])}),e=Ze({},e);for(l in o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=Ze(s,e.enter),a&&(e.update=Ze(a,e.update)),e}function ID(e,t,r){e[t]=r&&r.signal?{signal:r.signal}:{value:r}}var TW=e=>he(e)?de(e):e.signal?`(${e.signal})`:DW(e);function w5(e){if(e.gradient!=null)return dye(e);let t=e.signal?`(${e.signal})`:e.color?hye(e.color):e.field!=null?DW(e.field):e.value!==void 0?de(e.value):void 0;return e.scale!=null&&(t=pye(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${g5(e.exponent)})`),e.mult!=null&&(t+=`*${g5(e.mult)}`),e.offset!=null&&(t+=`+${g5(e.offset)}`),e.round&&(t=`round(${t})`),t}var m5=(e,t,r,i)=>`(${e}(${[t,r,i].map(w5).join(",")})+'')`;function hye(e){return e.c?m5("hcl",e.h,e.c,e.l):e.h||e.s?m5("hsl",e.h,e.s,e.l):e.l||e.a?m5("lab",e.l,e.a,e.b):e.r||e.g||e.b?m5("rgb",e.r,e.g,e.b):null}function dye(e){let t=[e.start,e.stop,e.count].map(r=>r==null?null:de(r));for(;t.length&&ct(t)==null;)t.pop();return t.unshift(TW(e.gradient)),`gradient(${t.join(",")})`}function g5(e){return me(e)?"("+w5(e)+")":e}function DW(e){return RW(me(e)?e:{datum:e})}function RW(e){let t,r,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(r=Math.max(1,e.level||1),t="item";r-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):te("Invalid field reference: "+de(e));return e.signal||(i=he(i)?_s(i).map(de).join("]["):RW(i)),t+"["+i+"]"}function pye(e,t){let r=TW(e.scale);return e.range!=null?t=`lerp(_range(${r}), ${+e.range})`:(t!==void 0&&(t=`_scale(${r}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${r})`+(+e.band==1?"":"*"+g5(e.band)),e.extra&&(t=`(datum.extra ? _scale(${r}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function mye(e){let t="";return e.forEach(r=>{let i=w5(r);t+=r.test?`(${r.test})?${i}:`:i}),ct(t)===":"&&(t+="null"),t}function MW(e,t,r,i,n,o){let s={};o=o||{},o.encoders={$encode:s},e=fye(e,t,r,i,n.config);for(let a in e)s[a]=gye(e[a],t,o,n);return o}function gye(e,t,r,i){let n={},o={};for(let s in e)e[s]!=null&&(n[s]=bye(vye(e[s]),i,r,o));return{$expr:{marktype:t,channels:n},$fields:Object.keys(o),$output:Object.keys(e)}}function vye(e){return K(e)?mye(e):w5(e)}function bye(e,t,r,i){let n=Ta(e,t);return n.$fields.forEach(o=>i[o]=1),Ze(r,n.$params),n.$expr}var yye="outer",xye=["value","update","init","react","bind"];function uW(e,t){te(e+' for "outer" push: '+de(t))}function FW(e,t){let r=e.name;if(e.push===yye)t.signals[r]||uW("No prior signal definition",r),xye.forEach(i=>{e[i]!==void 0&&uW("Invalid property ",i)});else{let i=t.addSignal(r,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(r,e.bind)}}function zD(e,t,r,i){this.id=-1,this.type=e,this.value=t,this.params=r,i&&(this.parent=i)}function S5(e,t,r,i){return new zD(e,t,r,i)}function _5(e,t){return S5("operator",e,t)}function Ye(e){let t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function ry(e,t){return t?{$field:e,$name:t}:{$field:e}}var HD=ry("key");function cW(e,t){return{$compare:e,$order:t}}function _ye(e,t){let r={$key:e};return t&&(r.$flat=!0),r}var wye="ascending",Sye="descending";function Cye(e){return me(e)?(e.order===Sye?"-":"+")+C5(e.op,e.field):""}function C5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var KD="scope",UD="view";function xi(e){return e&&e.signal}function kye(e){return e&&e.expr}function v5(e){if(xi(e))return!0;if(me(e)){for(let t in e)if(v5(e[t]))return!0}return!1}function Da(e,t){return e??t}function Td(e){return e&&e.signal||e}var fW="timer";function iy(e,t){return(e.merge?Aye:e.stream?Tye:e.type?Dye:te("Invalid stream specification: "+de(e)))(e,t)}function Eye(e){return e===KD?UD:e||UD}function Aye(e,t){let r=e.merge.map(n=>iy(n,t)),i=ZD({merge:r},e,t);return t.addStream(i).id}function Tye(e,t){let r=iy(e.stream,t),i=ZD({stream:r},e,t);return t.addStream(i).id}function Dye(e,t){let r;e.type===fW?(r=t.event(fW,e.throttle),e={between:e.between,filter:e.filter}):r=t.event(Eye(e.source),e.type);let i=ZD({stream:r},e,t);return Object.keys(i).length===1?r:t.addStream(i).id}function ZD(e,t,r){let i=t.between;return i&&(i.length!==2&&te('Stream "between" parameter must have 2 entries: '+de(t)),e.between=[iy(i[0],r),iy(i[1],r)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(Rye(t.marktype,t.markname,t.markrole)),t.source===KD&&i.push("inScope(event.item)"),i.length&&(e.filter=Ta("("+i.join(")&&(")+")",r).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function Rye(e,t,r){let i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(r?"&&"+i+".mark.role==='"+r+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}var Mye={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Fye(e,t,r){let i=e.encode,n={target:r},o=e.events,s=e.update,a=[];o||te("Signal update missing events specification."),he(o)&&(o=En(o,t.isSubscope()?KD:UD)),o=ve(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[$ye(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),i!=null&&(s&&te("Signal encode and update are mutually exclusive."),s="encode(item(),"+de(i)+")"),n.update=he(s)?Ta(s,t):s.expr!=null?Ta(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:Mye,$params:{$value:t.signalRef(s.signal)}}:te("Invalid signal update specification."),e.force&&(n.options={force:!0}),a.forEach(l=>t.addUpdate(Ze(Oye(l,t),n)))}function Oye(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):iy(e,t)}}function $ye(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Lye(e,t){let r=t.getSignal(e.name),i=e.update;e.init&&(i?te("Signals can not include both init and update expressions."):(i=e.init,r.initonly=!0)),i&&(i=Ta(i,t),r.update=i.$expr,r.params=i.$params),e.on&&e.on.forEach(n=>Fye(n,t,r.id))}var rr=e=>(t,r,i)=>S5(e,r,t||void 0,i),OW=rr("aggregate"),Pye=rr("axisticks"),$W=rr("bound"),Ma=rr("collect"),hW=rr("compare"),Iye=rr("datajoin"),LW=rr("encode"),Nye=rr("expression"),Bye=rr("facet"),zye=rr("field"),Hye=rr("key"),Uye=rr("legendentries"),qye=rr("load"),jye=rr("mark"),Wye=rr("multiextent"),Vye=rr("multivalues"),Gye=rr("overlap"),Yye=rr("params"),PW=rr("prefacet"),Xye=rr("projection"),Kye=rr("proxy"),Zye=rr("relay"),IW=rr("render"),Jye=rr("scale"),Rd=rr("sieve"),Qye=rr("sortitems"),NW=rr("viewlayout"),e2e=rr("values"),t2e=0,BW={min:"min",max:"max",count:"sum"};function r2e(e,t){let r=e.type||"linear";dE(r)||te("Unrecognized scale type: "+de(r)),t.addScale(e.name,{type:r,domain:void 0})}function i2e(e,t){let r=t.getScale(e.name).params,i;r.domain=zW(e.domain,e,t),e.range!=null&&(r.range=UW(e,t,r)),e.interpolate!=null&&d2e(e.interpolate,r),e.nice!=null&&(r.nice=h2e(e.nice,t)),e.bins!=null&&(r.bins=f2e(e.bins,t));for(i in e)_e(r,i)||i==="name"||(r[i]=Ps(e[i],t))}function Ps(e,t){return me(e)?e.signal?t.signalRef(e.signal):te("Unsupported object: "+de(e)):e}function b5(e,t){return e.signal?t.signalRef(e.signal):e.map(r=>Ps(r,t))}function k5(e){te("Can not find data set: "+de(e))}function zW(e,t,r){if(!e){(t.domainMin!=null||t.domainMax!=null)&&te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?r.signalRef(e.signal):(K(e)?n2e:e.fields?s2e:o2e)(e,t,r)}function n2e(e,t,r){return e.map(i=>Ps(i,r))}function o2e(e,t,r){let i=r.getData(e.data);return i||k5(e.data),df(t.type)?i.valuesRef(r,e.field,HW(e.sort,!1)):gE(t.type)?i.domainRef(r,e.field):i.extentRef(r,e.field)}function s2e(e,t,r){let i=e.data,n=e.fields.reduce((o,s)=>(s=he(s)?{data:i,field:s}:K(s)||s.signal?a2e(s,r):s,o.push(s),o),[]);return(df(t.type)?l2e:gE(t.type)?u2e:c2e)(e,r,n)}function a2e(e,t){let r="_:vega:_"+t2e++,i=Ma({});if(K(e))i.value={$ingest:e};else if(e.signal){let n="setdata("+de(r)+","+e.signal+")";i.params.input=t.signalRef(n)}return t.addDataPipeline(r,[i,Rd({})]),{data:r,field:"data"}}function l2e(e,t,r){let i=HW(e.sort,!0),n,o,s=r.map(u=>{let c=t.getData(u.data);return c||k5(u.data),c.countsRef(t,u.field,i)}),a={groupby:HD,pulse:s};i&&(n=i.op||"count",o=i.field?C5(n,i.field):"count",a.ops=[BW[n]],a.fields=[t.fieldRef(o)],a.as=[o]),n=t.add(OW(a));let l=t.add(Ma({pulse:Ye(n)}));return o=t.add(e2e({field:HD,sort:t.sortRef(i),pulse:Ye(l)})),Ye(o)}function HW(e,t){return e&&(!e.field&&!e.op?me(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!BW[e.op]&&te("Multiple domain scales can not be sorted using "+e.op)),e}function u2e(e,t,r){let i=r.map(n=>{let o=t.getData(n.data);return o||k5(n.data),o.domainRef(t,n.field)});return Ye(t.add(Vye({values:i})))}function c2e(e,t,r){let i=r.map(n=>{let o=t.getData(n.data);return o||k5(n.data),o.extentRef(t,n.field)});return Ye(t.add(Wye({extents:i})))}function f2e(e,t){return e.signal||K(e)?b5(e,t):t.objectProperty(e)}function h2e(e,t){return e.signal?t.signalRef(e.signal):me(e)?{interval:Ps(e.interval),step:Ps(e.step)}:Ps(e)}function d2e(e,t){t.interpolate=Ps(e.type||e),e.gamma!=null&&(t.interpolateGamma=Ps(e.gamma))}function UW(e,t,r){let i=t.config.range,n=e.range;if(n.signal)return t.signalRef(n.signal);if(he(n)){if(i&&_e(i,n))return e=Ze({},e,{range:i[n]}),UW(e,t,r);n==="width"?n=[0,{signal:"width"}]:n==="height"?n=df(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:te("Unrecognized scale range value: "+de(n))}else if(n.scheme){r.scheme=K(n.scheme)?b5(n.scheme,t):Ps(n.scheme,t),n.extent&&(r.schemeExtent=b5(n.extent,t)),n.count&&(r.schemeCount=Ps(n.count,t));return}else if(n.step){r.rangeStep=Ps(n.step,t);return}else{if(df(e.type)&&!K(n))return zW(n,e,t);K(n)||te("Unsupported range type: "+de(n))}return n.map(o=>(K(o)?b5:Ps)(o,t))}function p2e(e,t){let r=t.config.projection||{},i={};for(let n in e)n!=="name"&&(i[n]=qD(e[n],n,t));for(let n in r)i[n]==null&&(i[n]=qD(r[n],n,t));t.addProjection(e.name,i)}function qD(e,t,r){return K(e)?e.map(i=>qD(i,t,r)):me(e)?e.signal?r.signalRef(e.signal):t==="fit"?e:te("Unsupported parameter object: "+de(e)):e}var Fa="top",im="left",nm="right",Pf="bottom",qW="center",m2e="vertical",g2e="start",v2e="middle",b2e="end",jD="index",JD="label",y2e="offset",tm="perc",x2e="perc2",Is="value",oy="guide-label",QD="guide-title",_2e="group-title",w2e="group-subtitle",dW="symbol",y5="gradient",WD="discrete",VD="size",S2e="shape",C2e="fill",k2e="stroke",E2e="strokeWidth",A2e="strokeDash",T2e="opacity",eR=[VD,S2e,C2e,k2e,E2e,A2e,T2e],sy={name:1,style:1,interactive:1},Dt={value:0},Ns={value:1},E5="group",jW="rect",tR="rule",D2e="symbol",Md="text";function ny(e){return e.type=E5,e.interactive=e.interactive||!1,e}function Ro(e,t){let r=(i,n)=>Da(e[i],Da(t[i],n));return r.isVertical=i=>m2e===Da(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),r.gradientLength=()=>Da(e.gradientLength,t.gradientLength||t.gradientWidth),r.gradientThickness=()=>Da(e.gradientThickness,t.gradientThickness||t.gradientHeight),r.entryColumns=()=>Da(e.columns,Da(t.columns,+r.isVertical(!0))),r}function WW(e,t){let r=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return r&&r.signal?r:r?r.value:null}function R2e(e,t,r){let i=t.config.style[r];return i&&i[e]}function A5(e,t,r){return`item.anchor === '${g2e}' ? ${e} : item.anchor === '${b2e}' ? ${t} : ${r}`}var rR=A5(de(im),de(nm),de(qW));function M2e(e){let t=e("tickBand"),r=e("tickOffset"),i,n;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},n={signal:`(${t.signal}) === 'extent'`},me(r)||(r={signal:`(${t.signal}) === 'extent' ? 0 : ${r}`})):t==="extent"?(i=1,n=!0,r=0):(i=.5,n=!1):(i=e("bandPosition"),n=e("tickExtra")),{extra:n,band:i,offset:r}}function VW(e,t){return t?e?me(e)?Object.assign({},e,{offset:VW(e.offset,t)}):{value:e,offset:t}:t:e}function is(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=rm(e.encode,t,sy)):e.interactive=!1,e}function F2e(e,t,r,i){let n=Ro(e,r),o=n.isVertical(),s=n.gradientThickness(),a=n.gradientLength(),l,u,c,f,h;o?(u=[0,1],c=[0,0],f=s,h=a):(u=[0,0],c=[1,0],f=a,h=s);let p={enter:l={opacity:Dt,x:Dt,y:Dt,width:Oi(f),height:Oi(h)},update:Ze({},l,{opacity:Ns,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Dt}};return tn(p,{stroke:n("gradientStrokeColor"),strokeWidth:n("gradientStrokeWidth")},{opacity:n("gradientOpacity")}),is({type:jW,role:oye,encode:p},i)}function O2e(e,t,r,i,n){let o=Ro(e,r),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength(),u,c,f,h,p="";s?(u="y",f="y2",c="x",h="width",p="1-"):(u="x",f="x2",c="y",h="height");let d={opacity:Dt,fill:{scale:t,field:Is}};d[u]={signal:p+"datum."+tm,mult:l},d[c]=Dt,d[f]={signal:p+"datum."+x2e,mult:l},d[h]=Oi(a);let m={enter:d,update:Ze({},d,{opacity:Ns}),exit:{opacity:Dt}};return tn(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),is({type:jW,role:iye,key:Is,from:n,encode:m},i)}var $2e=`datum.${tm}<=0?"${im}":datum.${tm}>=1?"${nm}":"${qW}"`,L2e=`datum.${tm}<=0?"${Pf}":datum.${tm}>=1?"${Fa}":"${v2e}"`;function pW(e,t,r,i){let n=Ro(e,t),o=n.isVertical(),s=Oi(n.gradientThickness()),a=n.gradientLength(),l=n("labelOverlap"),u,c,f,h,p="",d={enter:u={opacity:Dt},update:c={opacity:Ns,text:{field:JD}},exit:{opacity:Dt}};return tn(d,{fill:n("labelColor"),fillOpacity:n("labelOpacity"),font:n("labelFont"),fontSize:n("labelFontSize"),fontStyle:n("labelFontStyle"),fontWeight:n("labelFontWeight"),limit:Da(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:L2e},f="y",h="x",p="1-"):(u.align=c.align={signal:$2e},u.baseline={value:"top"},f="x",h="y"),u[f]=c[f]={signal:p+"datum."+tm,mult:a},u[h]=c[h]=s,s.offset=Da(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:n("labelSeparation"),method:l,order:"datum."+jD}:void 0,is({type:Md,role:AW,style:oy,key:Is,from:i,encode:d,overlap:l},r)}function P2e(e,t,r,i,n){let o=Ro(e,t),s=r.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},h=`(${n}) ? datum.${y2e} : datum.${VD}`,p=u?Oi(u):{field:VD},d=`datum.${jD}`,m=`max(1, ${n})`,g,v,b,y,x;p.mult=.5,g={enter:v={opacity:Dt,x:{signal:h,mult:.5,offset:c},y:p},update:b={opacity:Ns,x:v.x,y:v.y},exit:{opacity:Dt}};let S=null,_=null;e.fill||(S=t.symbolBaseFillColor,_=t.symbolBaseStrokeColor),tn(g,{fill:o("symbolFillColor",S),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",_),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),eR.forEach(M=>{e[M]&&(b[M]=v[M]={scale:e[M],field:Is})});let w=is({type:D2e,role:sye,key:Is,from:f,clip:u?!0:void 0,encode:g},r.symbols),k=Oi(c);k.offset=o("labelOffset"),g={enter:v={opacity:Dt,x:{signal:h,offset:k},y:p},update:b={opacity:Ns,text:{field:JD},x:v.x,y:v.y},exit:{opacity:Dt}},tn(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});let A=is({type:Md,role:AW,style:oy,key:Is,from:f,encode:g},r.labels);return g={enter:{noBound:{value:!u},width:Dt,height:u?Oi(u):Dt,opacity:Dt},exit:{opacity:Dt},update:b={opacity:Ns,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(y=`ceil(item.mark.items.length / ${m})`,b.row.signal=`${d}%${y}`,b.column.signal=`floor(${d} / ${y})`,x={field:["row",d]}):(b.row.signal=`floor(${d} / ${m})`,b.column.signal=`${d} % ${m}`,x={field:d}),b.column.signal=`(${n})?${b.column.signal}:${d}`,i={facet:{data:i,name:"value",groupby:jD}},ny({role:XD,from:i,encode:rm(g,s,sy),marks:[w,A],name:l,interactive:a,sort:x})}function I2e(e,t){let r=Ro(e,t);return{align:r("gridAlign"),columns:r.entryColumns(),center:{row:!0,column:!1},padding:{row:r("rowPadding"),column:r("columnPadding")}}}var iR='item.orient === "left"',nR='item.orient === "right"',T5=`(${iR} || ${nR})`,N2e=`datum.vgrad && ${T5}`,B2e=A5('"top"','"bottom"','"middle"'),z2e=A5('"right"','"left"','"center"'),H2e=`datum.vgrad && ${nR} ? (${z2e}) : (${T5} && !(datum.vgrad && ${iR})) ? "left" : ${rR}`,U2e=`item._anchor || (${T5} ? "middle" : "start")`,q2e=`${N2e} ? (${iR} ? -90 : 90) : 0`,j2e=`${T5} ? (datum.vgrad ? (${nR} ? "bottom" : "top") : ${B2e}) : "top"`;function W2e(e,t,r,i){let n=Ro(e,t),o={enter:{opacity:Dt},update:{opacity:Ns,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Dt}};return tn(o,{orient:n("titleOrient"),_anchor:n("titleAnchor"),anchor:{signal:U2e},angle:{signal:q2e},align:{signal:H2e},baseline:{signal:j2e},text:e.title,fill:n("titleColor"),fillOpacity:n("titleOpacity"),font:n("titleFont"),fontSize:n("titleFontSize"),fontStyle:n("titleFontStyle"),fontWeight:n("titleFontWeight"),limit:n("titleLimit"),lineHeight:n("titleLineHeight")},{align:n("titleAlign"),baseline:n("titleBaseline")}),is({type:Md,role:aye,style:QD,from:i,encode:o},r)}function V2e(e,t){let r;return me(e)&&(e.signal?r=e.signal:e.path?r="pathShape("+mW(e.path)+")":e.sphere&&(r="geoShape("+mW(e.sphere)+', {type: "Sphere"})')),r?t.signalRef(r):!!e}function mW(e){return me(e)&&e.signal?e.signal:de(e)}function GW(e){let t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===E5?XD:t||GD}function G2e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||GW(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Y2e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function oR(e,t){let r=e_(e.type);r||te("Unrecognized transform type: "+de(e.type));let i=S5(r.type.toLowerCase(),null,YW(r,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=r.metadata||{},i}function YW(e,t,r){let i={},n=e.params.length;for(let o=0;o<n;++o){let s=e.params[o];i[s.name]=X2e(s,t,r)}return i}function X2e(e,t,r){let i=e.type,n=t[e.name];if(i==="index")return K2e(e,t,r);if(n===void 0){e.required&&te("Missing required "+de(t.type)+" parameter: "+de(e.name));return}else{if(i==="param")return Z2e(e,t,r);if(i==="projection")return r.projectionRef(t[e.name])}return e.array&&!xi(n)?n.map(o=>gW(e,o,r)):gW(e,n,r)}function gW(e,t,r){let i=e.type;if(xi(t))return bW(i)?te("Expression references can not be signals."):ND(i)?r.fieldRef(t):yW(i)?r.compareRef(t):r.signalRef(t.signal);{let n=e.expr||ND(i);return n&&J2e(t)?r.exprRef(t.expr,t.as):n&&Q2e(t)?ry(t.field,t.as):bW(i)?Ta(t,r):exe(i)?Ye(r.getData(t).values):ND(i)?ry(t):yW(i)?r.compareRef(t):t}}function K2e(e,t,r){return he(t.from)||te('Lookup "from" parameter must be a string literal.'),r.getData(t.from).lookupRef(r,t.key)}function Z2e(e,t,r){let i=t[e.name];return e.array?(K(i)||te("Expected an array of sub-parameters. Instead: "+de(i)),i.map(n=>vW(e,n,r))):vW(e,i,r)}function vW(e,t,r){let i=e.params.length,n;for(let s=0;s<i;++s){n=e.params[s];for(let a in n.key)if(n.key[a]!==t[a]){n=null;break}if(n)break}n||te("Unsupported parameter: "+de(t));let o=Ze(YW(n,t,r),n.key);return Ye(r.add(Yye(o)))}var J2e=e=>e&&e.expr,Q2e=e=>e&&e.field,exe=e=>e==="data",bW=e=>e==="expr",ND=e=>e==="field",yW=e=>e==="compare";function txe(e,t,r){let i,n,o,s,a;return e?(i=e.facet)&&(t||te("Only group marks can be faceted."),i.field!=null?s=a=x5(i,r):(e.data?a=Ye(r.getData(e.data).aggregate):(o=oR(Ze({type:"aggregate",groupby:ve(i.groupby)},i.aggregate),r),o.params.key=r.keyRef(i.groupby),o.params.pulse=x5(i,r),s=a=Ye(r.add(o))),n=r.keyRef(i.groupby,!0))):s=Ye(r.add(Ma(null,[{}]))),s||(s=x5(e,r)),{key:n,pulse:s,parent:a}}function x5(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ye(t.getData(e.data).output)}function Dd(e,t,r,i,n){this.scope=e,this.input=t,this.output=r,this.values=i,this.aggregate=n,this.index={}}Dd.fromEntries=function(e,t){let r=t.length,i=t[r-1],n=t[r-2],o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<r;++a)t[a].params.pulse=Ye(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new Dd(e,o,n,i,s)};function XW(e){return he(e)?e:null}function xW(e,t,r){let i=C5(r.op,r.field),n;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];r.op&&(t.ops.push((n=r.op.signal)?e.signalRef(n):r.op),t.fields.push(e.fieldRef(r.field)),t.as.push(i))}function ey(e,t,r,i,n,o,s){let a=t[r]||(t[r]={}),l=Cye(o),u=XW(n),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){let h=o?{field:HD,pulse:t.countsRef(e,n,o)}:{field:e.fieldRef(n),pulse:Ye(t.output)};l&&(h.sort=e.sortRef(o)),f=e.add(S5(i,void 0,h)),s&&(t.index[n]=f),c=Ye(f),u!=null&&(a[u]=c)}return c}Dd.prototype={countsRef(e,t,r){let i=this,n=i.counts||(i.counts={}),o=XW(t),s,a,l;return o!=null&&(e=i.scope,s=n[o]),s?r&&r.field&&xW(e,s.agg.params,r):(l={groupby:e.fieldRef(t,"key"),pulse:Ye(i.output)},r&&r.field&&xW(e,l,r),a=e.add(OW(l)),s=e.add(Ma({pulse:Ye(a)})),s={agg:a,ref:Ye(s)},o!=null&&(n[o]=s)),s.ref},tuplesRef(){return Ye(this.values)},extentRef(e,t){return ey(e,this,"extent","extent",t,!1)},domainRef(e,t){return ey(e,this,"domain","values",t,!1)},valuesRef(e,t,r){return ey(e,this,"vals","values",t,r||!0)},lookupRef(e,t){return ey(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return ey(e,this,"indata","tupleindex",t,!0,!0)}};function rxe(e,t,r){let i=e.from.facet,n=i.name,o=x5(i,t),s;i.name||te("Facet must have a name: "+de(i)),i.data||te("Facet must reference a data set: "+de(i)),i.field?s=t.add(PW({field:t.fieldRef(i.field),pulse:o})):i.groupby?s=t.add(Bye({key:t.keyRef(i.groupby),group:Ye(t.proxy(r.parent)),pulse:o})):te("Facet must specify groupby or field: "+de(i));let a=t.fork(),l=a.add(Ma()),u=a.add(Rd({pulse:Ye(l)}));a.addData(n,new Dd(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function ixe(e,t,r){let i=t.add(PW({pulse:r.pulse})),n=t.fork();n.add(Rd()),n.addSignal("parent",null),i.params.subflow={$subflow:n.parse(e).toRuntime()}}function KW(e,t,r){let i=e.remove,n=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(_5()),u="if("+e.trigger+',modify("'+r+'",'+[n,i,o,s,a].map(f=>f??"null").join(",")+"),0)",c=Ta(u,t);l.update=c.$expr,l.params=c.$params}function D5(e,t){let r=GW(e),i=e.type===E5,n=e.from&&e.from.facet,o=e.overlap,s=e.layout||r===XD||r===YD,a,l,u,c,f,h,p,d=r===GD||s||n,m=txe(e.from,i,t);l=t.add(Iye({key:m.key||(e.key?ry(e.key):void 0),pulse:m.pulse,clean:!i}));let g=Ye(l);l=u=t.add(Ma({pulse:g})),l=t.add(jye({markdef:G2e(e),interactive:Y2e(e.interactive,t),clip:V2e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ye(l)}));let v=Ye(l);l=c=t.add(LW(MW(e.encode,e.type,r,e.style,t,{mod:!1,pulse:v}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(_=>{let w=oR(_,t),k=w.metadata;(k.generates||k.changes)&&te("Mark transforms should not generate new data."),k.nomod||(c.params.mod=!0),w.params.pulse=Ye(l),t.add(l=w)}),e.sort&&(l=t.add(Qye({sort:t.compareRef(e.sort),pulse:Ye(l)})));let b=Ye(l);(n||s)&&(s=t.add(NW({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:b})),h=Ye(s));let y=t.add($W({mark:v,pulse:h||b}));p=Ye(y),i&&(d&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(b,h||p,g),n?rxe(e,t,m):d?ixe(e,t,m):t.parse(e),t.popState(),d&&(s&&a.push(s),a.push(y))),o&&(p=nxe(o,p,t));let x=t.add(IW({pulse:p})),S=t.add(Rd({pulse:Ye(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Dd(t,u,x,S)),e.on&&e.on.forEach(_=>{(_.insert||_.remove||_.toggle)&&te("Marks only support modify triggers."),KW(_,t,f)}))}function nxe(e,t,r){let i=e.method,n=e.bound,o=e.separation,s={separation:xi(o)?r.signalRef(o.signal):o,method:xi(i)?r.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=r.compareRef({field:e.order})),n){let a=n.tolerance;s.boundTolerance=xi(a)?r.signalRef(a.signal):+a,s.boundScale=r.scaleRef(n.scale),s.boundOrient=n.orient}return Ye(r.add(Gye(s)))}function oxe(e,t){let r=t.config.legend,i=e.encode||{},n=Ro(e,r),o=i.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={},c=0,f,h,p;eR.forEach(y=>e[y]?(u[y]=e[y],c=c||e[y]):0),c||te("Missing valid scale for legend.");let d=sxe(e,t.scaleType(c)),m={title:e.title!=null,scales:u,type:d,vgrad:d!=="symbol"&&n.isVertical()},g=Ye(t.add(Ma(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},b=Ye(t.add(Uye(h={type:d,scale:t.scaleRef(c),count:t.objectProperty(n("tickCount")),limit:t.property(n("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return d===y5?(p=[F2e(e,c,r,i.gradient),pW(e,r,i.labels,b)],h.count=h.count||t.signalRef(`max(2,2*floor((${Td(n.gradientLength())})/100))`)):d===WD?p=[O2e(e,c,r,i.gradient,b),pW(e,r,i.labels,b)]:(f=I2e(e,r),p=[P2e(e,r,i,b,Td(f.columns))],h.size=uxe(e,t,p[0].marks)),p=[ny({role:nye,from:g,encode:v,marks:p,layout:f,interactive:a})],m.title&&p.push(W2e(e,r,i.title,g)),D5(ny({role:rye,from:g,encode:rm(lxe(n,e,r),o,sy),marks:p,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:a,style:l}),t)}function sxe(e,t){let r=e.type||dW;return!e.type&&axe(e)===1&&(e.fill||e.stroke)&&(r=Dv(t)?y5:l4(t)?WD:dW),r!==y5?r:l4(t)?WD:y5}function axe(e){return eR.reduce((t,r)=>t+(e[r]?1:0),0)}function lxe(e,t,r){let i={enter:{},update:{}};return tn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:r.strokeWidth,strokeDash:r.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function uxe(e,t,r){let i=Td(_W("size",e,r)),n=Td(_W("strokeWidth",e,r)),o=Td(cxe(r[1].encode,t,oy));return Ta(`max(ceil(sqrt(${i})+${n}),${o})`,t)}function _W(e,t,r){return t[e]?`scale("${t[e]}",datum)`:WW(e,r[0].encode)}function cxe(e,t,r){return WW("fontSize",e)||R2e("fontSize",t,r)}var fxe=`item.orient==="${im}"?-90:item.orient==="${nm}"?90:0`;function hxe(e,t){e=he(e)?{text:e}:e;let r=Ro(e,t.config.title),i=e.encode||{},n=i.group||{},o=n.name||void 0,s=n.interactive,a=n.style,l=[],u={},c=Ye(t.add(Ma(null,[u])));return l.push(mxe(e,r,dxe(e),c)),e.subtitle&&l.push(gxe(e,r,i.subtitle,c)),D5(ny({role:lye,from:c,encode:pxe(r,n),marks:l,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:o,interactive:s,style:a}),t)}function dxe(e){let t=e.encode;return t&&t.title||Ze({name:e.name,interactive:e.interactive,style:e.style},t)}function pxe(e,t){let r={enter:{},update:{}};return tn(r,{orient:e("orient"),anchor:e("anchor"),align:{signal:rR},angle:{signal:fxe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),rm(r,t,sy)}function mxe(e,t,r,i){let n={value:0},o=e.text,s={enter:{opacity:n},update:{opacity:{value:1}},exit:{opacity:n}};return tn(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),is({type:Md,role:uye,style:_2e,from:i,encode:s},r)}function gxe(e,t,r,i){let n={value:0},o=e.subtitle,s={enter:{opacity:n},update:{opacity:{value:1}},exit:{opacity:n}};return tn(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),is({type:Md,role:cye,style:w2e,from:i,encode:s},r)}function vxe(e,t){let r=[];e.transform&&e.transform.forEach(i=>{r.push(oR(i,t))}),e.on&&e.on.forEach(i=>{KW(i,t,e.name)}),t.addDataPipeline(e.name,bxe(e,t,r))}function bxe(e,t,r){let i=[],n=null,o=!1,s=!1,a,l,u,c,f;for(e.values?xi(e.values)||v5(e.format)?(i.push(wW(t,e)),i.push(n=Ad())):i.push(n=Ad({$ingest:e.values,$format:e.format})):e.url?v5(e.url)||v5(e.format)?(i.push(wW(t,e)),i.push(n=Ad())):i.push(n=Ad({$request:e.url,$format:e.format})):e.source&&(n=a=ve(e.source).map(h=>Ye(t.getData(h).output)),i.push(null)),l=0,u=r.length;l<u;++l)c=r[l],f=c.metadata,!n&&!f.source&&i.push(n=Ad()),i.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?n=c:f.changes&&(n=null);return a&&(u=a.length-1,i[0]=Zye({derive:o,pulse:u?a:a[0]}),(o||u)&&i.splice(1,0,Ad())),n||i.push(Ad()),i.push(Rd({})),i}function Ad(e){let t=Ma({},e);return t.metadata={source:!0},t}function wW(e,t){return qye({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}var ZW=e=>e===Pf||e===Fa,R5=(e,t,r)=>xi(e)?wxe(e.signal,t,r):e===im||e===Fa?t:r,$i=(e,t,r)=>xi(e)?xxe(e.signal,t,r):ZW(e)?t:r,Ra=(e,t,r)=>xi(e)?_xe(e.signal,t,r):ZW(e)?r:t,JW=(e,t,r)=>xi(e)?Sxe(e.signal,t,r):e===Fa?{value:t}:{value:r},yxe=(e,t,r)=>xi(e)?Cxe(e.signal,t,r):e===nm?{value:t}:{value:r},xxe=(e,t,r)=>QW(`${e} === '${Fa}' || ${e} === '${Pf}'`,t,r),_xe=(e,t,r)=>QW(`${e} !== '${Fa}' && ${e} !== '${Pf}'`,t,r),wxe=(e,t,r)=>sR(`${e} === '${im}' || ${e} === '${Fa}'`,t,r),Sxe=(e,t,r)=>sR(`${e} === '${Fa}'`,t,r),Cxe=(e,t,r)=>sR(`${e} === '${nm}'`,t,r),QW=(e,t,r)=>(t=t!=null?Oi(t):t,r=r!=null?Oi(r):r,SW(t)&&SW(r)?(t=t?t.signal||de(t.value):null,r=r?r.signal||de(r.value):null,{signal:`${e} ? (${t}) : (${r})`}):[Ze({test:e},t)].concat(r||[])),SW=e=>e==null||Object.keys(e).length===1,sR=(e,t,r)=>({signal:`${e} ? (${Qp(t)}) : (${Qp(r)})`}),kxe=(e,t,r,i,n)=>({signal:(i!=null?`${e} === '${im}' ? (${Qp(i)}) : `:"")+(r!=null?`${e} === '${Pf}' ? (${Qp(r)}) : `:"")+(n!=null?`${e} === '${nm}' ? (${Qp(n)}) : `:"")+(t!=null?`${e} === '${Fa}' ? (${Qp(t)}) : `:"")+"(null)"}),Qp=e=>xi(e)?e.signal:e==null?null:de(e),Exe=(e,t)=>t===0?0:xi(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},em=(e,t)=>{let r=e.signal;return r&&r.endsWith("(null)")?{signal:r.slice(0,-6)+t.signal}:e};function Zp(e,t,r,i){let n;if(t&&_e(t,e))return t[e];if(_e(r,e))return r[e];if(e.startsWith("title")){switch(e){case"titleColor":n="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":n=e[5].toLowerCase()+e.slice(6)}return i[QD][n]}else if(e.startsWith("label")){switch(e){case"labelColor":n="fill";break;case"labelFont":case"labelFontSize":n=e[5].toLowerCase()+e.slice(6)}return i[oy][n]}return null}function CW(e){let t={};for(let r of e)if(r)for(let i in r)t[i]=1;return Object.keys(t)}function Axe(e,t){var r=t.config,i=r.style,n=r.axis,o=t.scaleType(e.scale)==="band"&&r.axisBand,s=e.orient,a,l,u;if(xi(s)){let f=CW([r.axisX,r.axisY]),h=CW([r.axisTop,r.axisBottom,r.axisLeft,r.axisRight]);a={};for(u of f)a[u]=$i(s,Zp(u,r.axisX,n,i),Zp(u,r.axisY,n,i));l={};for(u of h)l[u]=kxe(s.signal,Zp(u,r.axisTop,n,i),Zp(u,r.axisBottom,n,i),Zp(u,r.axisLeft,n,i),Zp(u,r.axisRight,n,i))}else a=s===Fa||s===Pf?r.axisX:r.axisY,l=r["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?Ze({},n,a,l,o):n}function Txe(e,t,r,i){let n=Ro(e,t),o=e.orient,s,a,l={enter:s={opacity:Dt},update:a={opacity:Ns},exit:{opacity:Dt}};tn(l,{stroke:n("domainColor"),strokeCap:n("domainCap"),strokeDash:n("domainDash"),strokeDashOffset:n("domainDashOffset"),strokeWidth:n("domainWidth"),strokeOpacity:n("domainOpacity")});let u=kW(e,0),c=kW(e,1);return s.x=a.x=$i(o,u,Dt),s.x2=a.x2=$i(o,c),s.y=a.y=Ra(o,u,Dt),s.y2=a.y2=Ra(o,c),is({type:tR,role:Zbe,from:i,encode:l},r)}function kW(e,t){return{scale:e.scale,range:t}}function Dxe(e,t,r,i,n){let o=Ro(e,t),s=e.orient,a=e.gridScale,l=R5(s,1,-1),u=Rxe(e.offset,l),c,f,h,p={enter:c={opacity:Dt},update:h={opacity:Ns},exit:f={opacity:Dt}};tn(p,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});let d={scale:e.scale,field:Is,band:n.band,extra:n.extra,offset:n.offset,round:o("tickRound")},m=$i(s,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},v=a?{scale:a,range:1,mult:l,offset:u}:Ze(m,{mult:l,offset:u});return c.x=h.x=$i(s,d,g),c.y=h.y=Ra(s,d,g),c.x2=h.x2=Ra(s,v),c.y2=h.y2=$i(s,v),f.x=$i(s,d),f.y=Ra(s,d),is({type:tR,role:Jbe,key:Is,from:i,encode:p},r)}function Rxe(e,t){if(t!==1)if(!me(e))e=xi(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let r=e=Ze({},e);for(;r.mult!=null;)if(me(r.mult))r=r.mult=Ze({},r.mult);else return r.mult=xi(t)?{signal:`(${r.mult}) * (${t.signal})`}:r.mult*t,e;r.mult=t}return e}function Mxe(e,t,r,i,n,o){let s=Ro(e,t),a=e.orient,l=R5(a,-1,1),u,c,f,h={enter:u={opacity:Dt},update:f={opacity:Ns},exit:c={opacity:Dt}};tn(h,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});let p=Oi(n);p.mult=l;let d={scale:e.scale,field:Is,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=u.y=$i(a,Dt,d),f.y2=u.y2=$i(a,p),c.x=$i(a,d),f.x=u.x=Ra(a,Dt,d),f.x2=u.x2=Ra(a,p),c.y=Ra(a,d),is({type:tR,role:eye,key:Is,from:i,encode:h},r)}function BD(e,t,r,i,n){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+r+","+i+","+n+")"}}function Fxe(e,t,r,i,n,o){let s=Ro(e,t),a=e.orient,l=e.scale,u=R5(a,-1,1),c=Td(s("labelFlush")),f=Td(s("labelFlushOffset")),h=s("labelAlign"),p=s("labelBaseline"),d=c===0||!!c,m,g=Oi(n);g.mult=u,g.offset=Oi(s("labelPadding")||0),g.offset.mult=u;let v={scale:l,field:Is,band:.5,offset:VW(o.offset,s("labelOffset"))},b=$i(a,d?BD(l,c,'"left"','"right"','"center"'):{value:"center"},yxe(a,"left","right")),y=$i(a,JW(a,"bottom","top"),d?BD(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=BD(l,c,`-(${f})`,f,0);d=d&&f;let S={opacity:Dt,x:$i(a,v,g),y:Ra(a,v,g)},_={enter:S,update:m={opacity:Ns,text:{field:JD},x:S.x,y:S.y,align:b,baseline:y},exit:{opacity:Dt,x:S.x,y:S.y}};tn(_,{dx:!h&&d?$i(a,x):null,dy:!p&&d?Ra(a,x):null}),tn(_,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:h,baseline:p});let w=s("labelBound"),k=s("labelOverlap");return k=k||w?{separation:s("labelSeparation"),method:k,order:"datum.index",bound:w?{scale:l,orient:a,tolerance:w}:null}:void 0,m.align!==b&&(m.align=em(m.align,b)),m.baseline!==y&&(m.baseline=em(m.baseline,y)),is({type:Md,role:Qbe,style:oy,key:Is,from:i,encode:_,overlap:k},r)}function Oxe(e,t,r,i){let n=Ro(e,t),o=e.orient,s=R5(o,-1,1),a,l,u={enter:a={opacity:Dt,anchor:Oi(n("titleAnchor",null)),align:{signal:rR}},update:l=Ze({},a,{opacity:Ns,text:Oi(e.title)}),exit:{opacity:Dt}},c={signal:`lerp(range("${e.scale}"), ${A5(0,1,.5)})`};return l.x=$i(o,c),l.y=Ra(o,c),a.angle=$i(o,Dt,Exe(s,90)),a.baseline=$i(o,JW(o,Pf,Fa),{value:Pf}),l.angle=a.angle,l.baseline=a.baseline,tn(u,{fill:n("titleColor"),fillOpacity:n("titleOpacity"),font:n("titleFont"),fontSize:n("titleFontSize"),fontStyle:n("titleFontStyle"),fontWeight:n("titleFontWeight"),limit:n("titleLimit"),lineHeight:n("titleLineHeight")},{align:n("titleAlign"),angle:n("titleAngle"),baseline:n("titleBaseline")}),$xe(n,o,u,r),u.update.align=em(u.update.align,a.align),u.update.angle=em(u.update.angle,a.angle),u.update.baseline=em(u.update.baseline,a.baseline),is({type:Md,role:tye,style:QD,from:i,encode:u},r)}function $xe(e,t,r,i){let n=(a,l)=>a!=null?(r.update[l]=em(Oi(a),r.update[l]),!1):!Jp(l,i),o=n(e("titleX"),"x"),s=n(e("titleY"),"y");r.enter.auto=s===o?Oi(s):$i(t,Oi(s),Oi(o))}function Lxe(e,t){let r=Axe(e,t),i=e.encode||{},n=i.axis||{},o=n.name||void 0,s=n.interactive,a=n.style,l=Ro(e,r),u=M2e(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=Ye(t.add(Ma({},[c]))),h=Ye(t.add(Pye({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[],d;return c.grid&&p.push(Dxe(e,r,i.grid,h,u)),c.ticks&&(d=l("tickSize"),p.push(Mxe(e,r,i.ticks,h,d,u))),c.labels&&(d=c.ticks?d:0,p.push(Fxe(e,r,i.labels,h,d,u))),c.domain&&p.push(Txe(e,r,i.domain,f)),c.title&&p.push(Oxe(e,r,i.title,f)),D5(ny({role:Kbe,from:f,encode:rm(Pxe(l,e),n,sy),marks:p,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function Pxe(e,t){let r={enter:{},update:{}};return tn(r,{orient:e("orient"),offset:e("offset")||0,position:Da(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),r}function eV(e,t,r){let i=ve(e.signals),n=ve(e.scales);return r||i.forEach(o=>FW(o,t)),ve(e.projections).forEach(o=>p2e(o,t)),n.forEach(o=>r2e(o,t)),ve(e.data).forEach(o=>vxe(o,t)),n.forEach(o=>i2e(o,t)),(r||i).forEach(o=>Lye(o,t)),ve(e.axes).forEach(o=>Lxe(o,t)),ve(e.marks).forEach(o=>D5(o,t)),ve(e.legends).forEach(o=>oxe(o,t)),e.title&&hxe(e.title,t),t.parseLambdas(),t}var Ixe=e=>rm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Nxe(e,t){let r=t.config,i=Ye(t.root=t.add(_5())),n=Bxe(e,r);n.forEach(u=>FW(u,t)),t.description=e.description||r.description,t.eventConfig=r.events,t.legends=t.objectProperty(r.legend&&r.legend.layout),t.locale=r.locale;let o=t.add(Ma()),s=t.add(LW(MW(Ixe(e.encode),E5,YD,e.style,t,{pulse:Ye(o)}))),a=t.add(NW({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ye(s)}));t.operators.pop(),t.pushState(Ye(s),Ye(a),null),eV(e,t,n),t.operators.push(a);let l=t.add($W({mark:i,pulse:Ye(a)}));return l=t.add(IW({pulse:Ye(l)})),l=t.add(Rd({pulse:Ye(l)})),t.addData("root",new Dd(t,o,o,l)),t}function ty(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Bxe(e,t){let r=s=>Da(e[s],t[s]),i=[ty("background",r("background")),ty("autosize",Gbe(r("autosize"))),ty("padding",Xbe(r("padding"))),ty("width",r("width")||0),ty("height",r("height")||0)],n=i.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return ve(e.signals).forEach(s=>{_e(n,s.name)?s=Ze(n[s.name],s):i.push(s),o[s.name]=s}),ve(t.signals).forEach(s=>{!_e(o,s.name)&&!_e(n,s.name)&&i.push(s)}),i}function tV(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function EW(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}tV.prototype=EW.prototype={parse(e){return eV(e,this)},fork(){return new EW(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){let t=e instanceof zD?Ye(e):e;return this.add(Kye({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function r(i,n,o){let s,a;i&&(s=i.data||(i.data={}),a=s[n]||(s[n]=[]),a.push(o))}for(e in this.data){t=this.data[e],r(t.input,e,"input"),r(t.output,e,"output"),r(t.values,e,"values");for(let i in t.index)r(t.index[i],e,"index:"+i)}return this},pushState(e,t,r){this._encode.push(Ye(this.add(Rd({pulse:e})))),this._parent.push(t),this._lookup.push(r?Ye(this.proxy(r)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return ct(this._parent)},encode(){return ct(this._encode)},lookup(){return ct(this._lookup)},markpath(){let e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(he(e))return ry(e,t);e.signal||te("Unsupported field reference: "+de(e));let r=e.signal,i=this.field[r];if(!i){let n={name:this.signalRef(r)};t&&(n.as=t),this.field[r]=i=Ye(this.add(zye(n)))}return i},compareRef(e){let t=!1,r=o=>xi(o)?(t=!0,this.signalRef(o.signal)):kye(o)?(t=!0,this.exprRef(o.expr)):o,i=ve(e.field).map(r),n=ve(e.order).map(r);return t?Ye(this.add(hW({fields:i,orders:n}))):cW(i,n)},keyRef(e,t){let r=!1,i=o=>xi(o)?(r=!0,Ye(n[o.signal])):o,n=this.signals;return e=ve(e).map(i),r?Ye(this.add(Hye({fields:e,flat:t}))):_ye(e,t)},sortRef(e){if(!e)return e;let t=C5(e.op,e.field),r=e.order||wye;return r.signal?Ye(this.add(hW({fields:t,orders:this.signalRef(r.signal)}))):cW(t,r)},event(e,t){let r=e+":"+t;if(!this.events[r]){let i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[r]=i}return this.events[r]},hasOwnSignal(e){return _e(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&te("Duplicate signal name: "+de(e));let r=t instanceof zD?t:this.add(_5(t));return this.signals[e]=r},getSignal(e){return this.signals[e]||te("Unrecognized signal name: "+de(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ye(this.signals[e]):(_e(this.lambdas,e)||(this.lambdas[e]=this.add(_5(null))),Ye(this.lambdas[e]))},parseLambdas(){let e=Object.keys(this.lambdas);for(let t=0,r=e.length;t<r;++t){let i=e[t],n=Ta(i,this),o=this.lambdas[i];o.params=n.$params,o.update=n.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!me(e)?e:this.signalRef(e.signal||aR(e))},exprRef(e,t){let r={expr:Ta(e,this)};return t&&(r.expr.$name=t),Ye(this.add(Nye(r)))},addBinding(e,t){this.bindings||te("Nested signals do not support binding: "+de(e)),this.bindings.push(Ze({signal:e},t))},addScaleProj(e,t){_e(this.scales,e)&&te("Duplicate scale or projection name: "+de(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Jye(t))},addProjection(e,t){this.addScaleProj(e,Xye(t))},getScale(e){return this.scales[e]||te("Unrecognized scale name: "+de(e)),this.scales[e]},scaleRef(e){return Ye(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return _e(this.data,e)&&te("Duplicate data set name: "+de(e)),this.data[e]=t},getData(e){return this.data[e]||te("Undefined data set name: "+de(e)),this.data[e]},addDataPipeline(e,t){return _e(this.data,e)&&te("Duplicate data set name: "+de(e)),this.addData(e,Dd.fromEntries(this,t))}};function aR(e){return(K(e)?zxe:Hxe)(e)}function zxe(e){let t=e.length,r="[";for(let i=0;i<t;++i){let n=e[i];r+=(i>0?",":"")+(me(n)?n.signal||aR(n):de(n))}return r+"]"}function Hxe(e){let t="{",r=0,i,n;for(i in e)n=e[i],t+=(++r>1?",":"")+de(i)+":"+(me(n)?n.signal||aR(n):de(n));return t+"}"}function Uxe(){let e="sans-serif",i="#4c78a8",n="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:n},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function rV(e,t,r){return me(e)||te("Input Vega specification must be an object."),t=cl(Uxe(),t,e.config),Nxe(e,new tV(t,r)).toRuntime()}var qxe="5.33.0";Ze(Du,lk,_9,E9,jA,nT,VT,LT,KT,QT,rD,oD);function jxe(e,t,r){let i;t.x2&&(t.x?(r&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(r&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Wxe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Vxe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Gxe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e},Yxe=Array.prototype.slice,Fd=(e,t,r)=>{let i=r?r(t[0]):t[0];return i[e].apply(i,Yxe.call(t,1))},Xxe=(e,t,r,i,n,o,s)=>new Date(e,t||0,r??1,i||0,n||0,o||0,s||0),Kxe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,r)=>Math.max(t,Math.min(r,e)),now:Date.now,utc:Date.UTC,datetime:Xxe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Fd("join",arguments)},indexof:function(){return Fd("indexOf",arguments)},lastindexof:function(){return Fd("lastIndexOf",arguments)},slice:function(){return Fd("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(yu),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Fd("substring",arguments,String)},split:function(){return Fd("split",arguments,String)},replace:function(){return Fd("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)},Zxe=["view","item","group","xy","x","y"],uR=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&uR.add(setImmediate);var Jxe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{let r=t.name;return e.memberDepth>0?r:r==="datum"?e.datum:r==="event"?e.event:r==="item"?e.item:Wxe[r]||e.params["$"+r]},MemberExpression:(e,t)=>{let r=!t.computed,i=e(t.object);r&&(e.memberDepth+=1);let n=e(t.property);if(r&&(e.memberDepth-=1),uR.has(i[n])){console.error(`Prevented interpretation of member "${n}" which could lead to insecure code execution`);return}return i[n]},CallExpression:(e,t)=>{let r=t.arguments,i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(r[0])?e(r[1]):e(r[2]):(e.fn[i]||Kxe[i]).apply(e.fn,r.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Vxe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Gxe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((r,i)=>{e.memberDepth+=1;let n=e(i.key);return e.memberDepth-=1,uR.has(e(i.value))?console.error(`Prevented interpretation of property "${n}" which could lead to insecure code execution`):r[n]=e(i.value),r},{})};function ay(e,t,r,i,n,o){let s=a=>Jxe[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=r,s.datum=i,s.event=n,s.item=o,Zxe.forEach(a=>s.fn[a]=function(){return n.vega[a](...arguments)}),s(e)}var iV={operator(e,t){let r=t.ast,i=e.functions;return n=>ay(r,i,n)},parameter(e,t){let r=t.ast,i=e.functions;return(n,o)=>ay(r,i,o,n)},event(e,t){let r=t.ast,i=e.functions;return n=>ay(r,i,void 0,void 0,n)},handler(e,t){let r=t.ast,i=e.functions;return(n,o)=>{let s=o.item&&o.item.datum;return ay(r,i,n,s,o)}},encode(e,t){let{marktype:r,channels:i}=t,n=e.functions,o=r==="group"||r==="image"||r==="rect";return(s,a)=>{let l=s.datum,u=0,c;for(let f in i)c=ay(i[f].ast,n,a,l,void 0,s),s[f]!==c&&(s[f]=c,u=1);return r!=="rule"&&jxe(s,i,o),u}}};var yF={};pi(yF,{accessPathDepth:()=>Od,accessPathWithDatum:()=>cy,accessWithDatumToUnescapedPath:()=>Bt,compile:()=>CZ,contains:()=>We,deepEqual:()=>Li,deleteNestedProperty:()=>uy,duplicate:()=>De,entries:()=>Mo,every:()=>L5,fieldIntersection:()=>I5,flatAccessWithDatum:()=>pR,getFirstDefined:()=>yt,hasIntersection:()=>P5,hasProperty:()=>ae,hash:()=>Be,internalField:()=>gR,isBoolean:()=>sm,isEmpty:()=>ht,isEqual:()=>t_e,isInternalField:()=>aV,isNullOrFalse:()=>$5,isNumeric:()=>fy,keys:()=>J,logicalExpr:()=>om,mergeDeep:()=>hR,never:()=>fR,normalize:()=>Q3,normalizeAngle:()=>zf,omit:()=>qr,pick:()=>Xu,prefixGenerator:()=>cR,removePathFromField:()=>Ku,replaceAll:()=>Oa,replacePathInField:()=>ci,resetIdCounter:()=>i_e,setEqual:()=>dR,some:()=>Nf,stringify:()=>St,titleCase:()=>Bf,unique:()=>An,uniqueId:()=>mR,vals:()=>ar,varName:()=>wt,version:()=>qSe});var nV={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"5.23.0",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",keywords:["vega","chart","visualization"],main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},files:["bin","build","src","vega-lite*","tsconfig.json"],scripts:{changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},dependencies:{"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},peerDependencies:{vega:"^5.24.0"},engines:{node:">=18"},packageManager:"yarn@1.22.22"};function M5(e){return ae(e,"or")}function F5(e){return ae(e,"and")}function O5(e){return ae(e,"not")}function ly(e,t){if(O5(e))ly(e.not,t);else if(F5(e))for(let r of e.and)ly(r,t);else if(M5(e))for(let r of e.or)ly(r,t);else t(e)}function If(e,t){return O5(e)?{not:If(e.not,t)}:F5(e)?{and:e.and.map(r=>If(r,t))}:M5(e)?{or:e.or.map(r=>If(r,t))}:t(e)}var De=structuredClone;function fR(e){throw new Error(e)}function Xu(e,t){let r={};for(let i of t)_e(e,i)&&(r[i]=e[i]);return r}function qr(e,t){let r={...e};for(let i of t)delete r[i];return r}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>St(e)).join(",")})`};function Be(e){if(ut(e))return e;let t=he(e)?e:St(e);if(t.length<250)return t;let r=0;for(let i=0;i<t.length;i++){let n=t.charCodeAt(i);r=(r<<5)-r+n,r=r&r}return r}function $5(e){return e===!1||e===null}function We(e,t){return e.includes(t)}function Nf(e,t){let r=0;for(let[i,n]of e.entries())if(t(n,i,r++))return!0;return!1}function L5(e,t){let r=0;for(let[i,n]of e.entries())if(!t(n,i,r++))return!1;return!0}function hR(e,...t){for(let r of t)e_e(e,r??{});return e}function e_e(e,t){for(let r of J(t))bu(e,r,t[r],!0)}function An(e,t){let r=[],i={},n;for(let o of e)n=t(o),!(n in i)&&(i[n]=1,r.push(o));return r}function t_e(e,t){let r=J(e),i=J(t);if(r.length!==i.length)return!1;for(let n of r)if(e[n]!==t[n])return!1;return!0}function dR(e,t){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}function P5(e,t){for(let r of e)if(t.has(r))return!0;return!1}function cR(e){let t=new Set;for(let r of e){let n=_s(r).map((s,a)=>a===0?s:`[${s}]`),o=n.map((s,a)=>n.slice(0,a+1).join(""));for(let s of o)t.add(s)}return t}function I5(e,t){return e===void 0||t===void 0?!0:P5(cR(e),cR(t))}function ht(e){return J(e).length===0}var J=Object.keys,ar=Object.values,Mo=Object.entries;function sm(e){return e===!0||e===!1}function wt(e){let t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function om(e,t){return O5(e)?`!(${om(e.not,t)})`:F5(e)?`(${e.and.map(r=>om(r,t)).join(") && (")})`:M5(e)?`(${e.or.map(r=>om(r,t)).join(") || (")})`:t(e)}function uy(e,t){if(t.length===0)return!0;let r=t.shift();return r in e&&uy(e[r],t)&&delete e[r],ht(e)}function Bf(e){return e.charAt(0).toUpperCase()+e.substr(1)}function cy(e,t="datum"){let r=_s(e),i=[];for(let n=1;n<=r.length;n++){let o=`[${r.slice(0,n).map(de).join("][")}]`;i.push(`${t}${o}`)}return i.join(" && ")}function pR(e,t="datum"){return`${t}[${de(_s(e).join("."))}]`}function Bt(e){return`datum['${e.replaceAll("'","\\'")}']`}function r_e(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ci(e){return`${_s(e).map(r_e).join("\\.")}`}function Oa(e,t,r){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),r)}function Ku(e){return`${_s(e).join(".")}`}function Od(e){return e?_s(e).length:0}function yt(...e){return e.find(t=>t!==void 0)}var sV=42;function mR(e){let t=++sV;return e?String(e)+t:t}function i_e(){sV=42}function gR(e){return aV(e)?e:`__${e}`}function aV(e){return e.startsWith("__")}function zf(e){if(e!==void 0)return(e%360+360)%360}function fy(e){return ut(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var oV=Object.getPrototypeOf(structuredClone({}));function Li(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let r,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!Li(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let o of e.entries())if(!t.has(o[0]))return!1;for(let o of e.entries())if(!Li(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==oV.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==oV.toString)return e.toString()===t.toString();let n=Object.keys(e);if(r=n.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[i]))return!1;for(i=r;i--!==0;){let o=n[i];if(!Li(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function St(e){let t=[];return(function r(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let n,o;if(Array.isArray(i)){for(o="[",n=0;n<i.length;n++)n&&(o+=","),o+=r(i[n])||"null";return o+"]"}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");let s=t.push(i)-1,a=Object.keys(i).sort();for(o="",n=0;n<a.length;n++){let l=a[n],u=r(i[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(s,1),`{${o}}`})(e)}function ae(e,t){return me(e)&&_e(e,t)&&e[t]!==void 0}var Fo="row",Oo="column",am="facet",Rt="x",lr="y",$o="x2",ns="y2",Bs="xOffset",Ol="yOffset",Tn="radius",$a="radius2",rn="theta",La="theta2",nn="latitude",on="longitude",Dn="latitude2",sn="longitude2",os="time",jr="color",Rn="fill",Mn="stroke",Tr="shape",Lo="size",Pa="angle",lo="opacity",ss="fillOpacity",as="strokeOpacity",ls="strokeWidth",us="strokeDash",$d="text",Hf="order",Ld="detail",lm="key",Zu="tooltip",um="href",cm="url",fm="description",n_e={x:1,y:1,x2:1,y2:1},lV={theta:1,theta2:1,radius:1,radius2:1};function vR(e){return _e(lV,e)}var bR={longitude:1,longitude2:1,latitude:1,latitude2:1};function B5(e){switch(e){case nn:return"y";case Dn:return"y2";case on:return"x";case sn:return"x2"}}function z5(e){return _e(bR,e)}var uV=J(bR),yR={...n_e,...lV,...bR,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Ju(e){return e===jr||e===Rn||e===Mn}var cV={row:1,column:1,facet:1},Pi=J(cV),xR={...yR,...cV},fV=J(xR),{order:jet,detail:Wet,tooltip:Vet,...hV}=xR,{row:Get,column:Yet,facet:Xet,...dV}=hV,Ket=J(hV),Zet=J(dV);function pV(e){return _e(dV,e)}function H5(e){return _e(xR,e)}var mV=[$o,ns,Dn,sn,La,$a];function U5(e){return cs(e)!==e}function cs(e){switch(e){case $o:return Rt;case ns:return lr;case Dn:return nn;case sn:return on;case La:return rn;case $a:return Tn}return e}function zs(e){if(vR(e))switch(e){case rn:return"startAngle";case La:return"endAngle";case Tn:return"outerRadius";case $a:return"innerRadius"}return e}function Ii(e){switch(e){case Rt:return $o;case lr:return ns;case nn:return Dn;case on:return sn;case rn:return La;case Tn:return $a}}function Dr(e){switch(e){case Rt:case $o:return"width";case lr:case ns:return"height"}}function _R(e){switch(e){case Rt:return"xOffset";case lr:return"yOffset";case $o:return"x2Offset";case ns:return"y2Offset";case rn:return"thetaOffset";case Tn:return"radiusOffset";case La:return"theta2Offset";case $a:return"radius2Offset"}}function hm(e){switch(e){case Rt:return"xOffset";case lr:return"yOffset"}}function gV(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}var vV=J(yR),{x:Jet,y:Qet,x2:ett,y2:ttt,xOffset:rtt,yOffset:itt,latitude:ntt,longitude:ott,latitude2:stt,longitude2:att,theta:ltt,theta2:utt,radius:ctt,radius2:ftt,...wR}=yR,bV=J(wR),SR={x:1,y:1},an=J(SR);function Mt(e){return _e(SR,e)}var q5={theta:1,radius:1},yV=J(q5);function Uf(e){return e==="width"?Rt:lr}var CR={xOffset:1,yOffset:1},htt=J(CR);function Qu(e){return _e(CR,e)}var xV={time:1},dtt=J(xV);function j5(e){return e in xV}var{text:ptt,tooltip:mtt,href:gtt,url:vtt,description:btt,detail:ytt,key:xtt,order:_tt,..._V}=wR,wV=J(_V);function SV(e){return _e(wR,e)}function CV(e){switch(e){case jr:case Rn:case Mn:case Lo:case Tr:case lo:case ls:case us:return!0;case ss:case as:case Pa:case os:return!1}}var kV={...SR,...q5,...CR,..._V},dm=J(kV);function fi(e){return _e(kV,e)}function EV(e,t){return s_e(e)[t]}var AV={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:wtt,...o_e}=AV;function s_e(e){switch(e){case jr:case Rn:case Mn:case fm:case Ld:case lm:case Zu:case um:case Hf:case lo:case ss:case as:case ls:case am:case Fo:case Oo:return AV;case Rt:case lr:case Bs:case Ol:case nn:case on:case os:return o_e;case $o:case ns:case Dn:case sn:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Lo:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case us:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Tr:return{point:"always",geoshape:"always"};case $d:return{text:"always"};case Pa:return{point:"always",square:"always",text:"always"};case cm:return{image:"always"};case rn:return{text:"always",arc:"always"};case Tn:return{text:"always",arc:"always"};case La:case $a:return{arc:"always"}}}function W5(e){switch(e){case Rt:case lr:case rn:case Tn:case Bs:case Ol:case Lo:case Pa:case ls:case lo:case ss:case as:case os:case $o:case ns:case La:case $a:return;case am:case Fo:case Oo:case Tr:case us:case $d:case Zu:case um:case cm:case fm:return"discrete";case jr:case Rn:case Mn:return"flexible";case nn:case on:case Dn:case sn:case Ld:case lm:case Hf:return}}var l_e={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},TV={count:1,min:1,max:1};function fs(e){return ae(e,"argmin")}function Hs(e){return ae(e,"argmax")}function pm(e){return he(e)&&_e(l_e,e)}var u_e=new Set(["count","valid","missing","distinct"]);function qf(e){return he(e)&&u_e.has(e)}function DV(e){return he(e)&&We(["min","max"],e)}var RV=new Set(["count","sum","distinct","valid","missing"]),MV=new Set(["mean","average","median","q1","q3","min","max"]);function V5(e){return xo(e)&&(e=gm(e,void 0)),"bin"+J(e).map(t=>mm(e[t])?wt(`_${t}_${Mo(e[t])}`):wt(`_${t}_${e[t]}`)).join("")}function vt(e){return e===!0||Ia(e)&&!e.binned}function ur(e){return e==="binned"||Ia(e)&&e.binned===!0}function Ia(e){return me(e)}function mm(e){return ae(e,"param")}function kR(e){switch(e){case Fo:case Oo:case Lo:case jr:case Rn:case Mn:case ls:case lo:case ss:case as:case Tr:return 6;case us:return 4;default:return 10}}function jf(e){return ae(e,"expr")}function wr(e,{level:t}={level:0}){let r=J(e||{}),i={};for(let n of r)i[n]=t===0?Ni(e[n]):wr(e[n],{level:t-1});return i}function G5(e){let{anchor:t,frame:r,offset:i,orient:n,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:h,subtitleLineHeight:p,subtitlePadding:d,...m}=e,g={...m,...a?{fill:a}:{}},v={...t?{anchor:t}:{},...r?{frame:r}:{},...i?{offset:i}:{},...n?{orient:n}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},b={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...h?{subtitleFontWeight:h}:{},...p?{subtitleLineHeight:p}:{},...d?{subtitlePadding:d}:{}},y=Xu(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:y,nonMarkTitleProperties:v,subtitle:b}}function Na(e){return he(e)||K(e)&&he(e[0])}function Ae(e){return ae(e,"signal")}function Po(e){return ae(e,"step")}function FV(e){return K(e)?!1:ae(e,"fields")&&!ae(e,"data")}function OV(e){return K(e)?!1:ae(e,"fields")&&ae(e,"data")}function Ba(e){return K(e)?!1:ae(e,"field")&&ae(e,"data")}var c_e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},$V=J(c_e),LV={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Y5=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function X5(e){let t=K(e.condition)?e.condition.map(PV):PV(e.condition);return{...Ni(e),condition:t}}function Ni(e){if(jf(e)){let{expr:t,...r}=e;return{signal:t,...r}}return e}function PV(e){if(jf(e)){let{expr:t,...r}=e;return{signal:t,...r}}return e}function bt(e){if(jf(e)){let{expr:t,...r}=e;return{signal:t,...r}}return Ae(e)?e:e!==void 0?{value:e}:void 0}function IV(e){return Ae(e)?e.signal:de(e)}function ER(e){return Ae(e)?e.signal:de(e.value)}function uo(e){return Ae(e)?e.signal:e==null?null:de(e)}function NV(e,t,r){for(let i of r){let n=co(i,t.markDef,t.config);n!==void 0&&(e[i]=bt(n))}return e}function AR(e){return[].concat(e.type,e.style??[])}function dt(e,t,r,i={}){let{vgChannel:n,ignoreVgConfig:o}=i;return n&&ae(t,n)?t[n]:t[e]!==void 0?t[e]:o&&(!n||n===e)?void 0:co(e,t,r,i)}function co(e,t,r,{vgChannel:i}={}){let n=K5(e,t,r.style);return yt(i?n:void 0,n,i?r[t.type][i]:void 0,r[t.type][e],i?r.mark[i]:r.mark[e])}function K5(e,t,r){return TR(e,AR(t),r)}function TR(e,t,r){t=ve(t);let i;for(let n of t){let o=r[n];ae(o,e)&&(i=o[e])}return i}function Z5(e,t){return ve(e).reduce((r,i)=>(r.field.push(ge(i,t)),r.order.push(i.sort??"ascending"),r),{field:[],order:[]})}function DR(e,t){let r=[...e];return t.forEach(i=>{for(let n of r)if(Li(n,i))return;r.push(i)}),r}function RR(e,t){return Li(e,t)||!t?e:e?[...ve(e),...ve(t)].join(", "):t}function J5(e,t){let r=e.value,i=t.value;if(r==null||i===null)return{explicit:e.explicit,value:null};if((Na(r)||Ae(r))&&(Na(i)||Ae(i)))return{explicit:e.explicit,value:RR(r,i)};if(Na(r)||Ae(r))return{explicit:e.explicit,value:r};if(Na(i)||Ae(i))return{explicit:e.explicit,value:i};if(!Na(r)&&!Ae(r)&&!Na(i)&&!Ae(i))return{explicit:e.explicit,value:DR(r,i)};throw new Error("It should never reach here")}var Q={};pi(Q,{ADD_SAME_CHILD_TWICE:()=>$_e,CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>s4e,CONCAT_CANNOT_SHARE_AXIS:()=>M_e,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>S4e,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>C4e,FACETED_INDEPENDENT_SAME_SOURCE:()=>k4e,FIT_NON_SINGLE:()=>h_e,INTERVAL_INITIALIZED_WITH_POS:()=>T_e,INVALID_CHANNEL_FOR_AXIS:()=>E4e,LEGEND_BINDINGS_MUST_HAVE_PROJECTION:()=>C_e,LINE_WITH_VARYING_SIZE:()=>X_e,MORE_THAN_ONE_SORT:()=>w4e,MULTIPLE_TIMER_ANIMATION_SELECTION:()=>MR,MULTI_VIEW_ANIMATION_UNSUPPORTED:()=>Pd,NEEDS_SAME_SELECTION:()=>A_e,NO_FIELDS_NEEDS_AS:()=>P_e,REPLACE_ANGLE_WITH_THETA:()=>B_e,SCALE_BINDINGS_CONTINUOUS:()=>w_e,SEQUENTIAL_SCALE_DEPRECATED:()=>S_e,cannotApplySizeToNonOrientedMark:()=>h4e,cannotLookupVariableParameter:()=>k_e,cannotProjectAggregate:()=>b_e,cannotProjectOnChannelWithoutField:()=>v_e,cannotStackRangedMark:()=>A4e,cannotUseRelativeBandSizeWithNonBandScale:()=>l4e,cannotUseScalePropertyWithNonColor:()=>a4e,channelRequiredForBinned:()=>P4e,channelShouldBeDiscrete:()=>Q_e,channelShouldBeDiscreteOrDiscretizing:()=>e4e,channelShouldNotBeUsedForBinned:()=>I4e,columnsNotSupportByRowCol:()=>R_e,containerSizeNonSingle:()=>d_e,containerSizeNotCompatibleWithAutosize:()=>p_e,customFormatTypeNotAllowed:()=>I_e,differentParse:()=>O_e,discreteChannelCannotEncode:()=>r4e,domainRequiredForThresholdScale:()=>N4e,domainSortDropped:()=>_4e,droppedDay:()=>M4e,droppingColor:()=>V_e,droppingFit:()=>m_e,emptyFieldDef:()=>Y_e,errorBand1DNotSupport:()=>L4e,errorBarCenterAndExtentAreNotNeeded:()=>F4e,errorBarCenterIsUsedWithWrongExtent:()=>O4e,errorBarContinuousAxisHasCustomizedAggregate:()=>$4e,facetChannelDropped:()=>t4e,incompatibleChannel:()=>K_e,independentScaleMeansIndependentGuide:()=>x4e,invalidAggregate:()=>j_e,invalidEncodingChannel:()=>J_e,invalidFieldType:()=>U_e,invalidFieldTypeForCountAggregate:()=>q_e,invalidSpec:()=>f_e,invalidTimeUnit:()=>R4e,invalidTransformIgnored:()=>L_e,lineWithRange:()=>n4e,mergeConflictingDomainProperty:()=>y4e,mergeConflictingProperty:()=>b4e,missingFieldType:()=>W_e,nearestNotSupportForContinuous:()=>y_e,noSameUnitLookup:()=>E_e,noSuchRepeatedValue:()=>D_e,offsetEncodingScaleIgnored:()=>Z_e,offsetNestedInsideContinuousPositionScaleDropped:()=>z_e,orientOverridden:()=>o4e,primitiveChannelDef:()=>H_e,projectionOverridden:()=>N_e,rangeMarkAlignmentCannotBeExpression:()=>i4e,relativeBandSizeNotSupported:()=>G_e,scalePropertyNotWorkWithScaleType:()=>m4e,scaleTypeNotWorkWithChannel:()=>d4e,scaleTypeNotWorkWithFieldDef:()=>p4e,scaleTypeNotWorkWithMark:()=>g4e,selectionAsScaleDomainWithoutField:()=>FR,selectionAsScaleDomainWrongEncodings:()=>OR,selectionNotFound:()=>__e,selectionNotSupported:()=>x_e,stackNonLinearScale:()=>T4e,stackNonSummativeAggregate:()=>D4e,stepDropped:()=>v4e,unaggregateDomainHasNoEffectForRawField:()=>u4e,unaggregateDomainWithNonSharedDomainOp:()=>c4e,unaggregatedDomainWithLogScale:()=>f4e,unknownField:()=>g_e,unrecognizedParse:()=>F_e});function f_e(e){return`Invalid specification ${St(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}var h_e='Autosize "fit" only works for single views and layered views.';function d_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function p_e(e){let t=e=="width"?"Width":"Height",r=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${r}".`}function m_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${Dr(e)}.`:'Dropping "fit" because spec has discrete size.'}function g_e(e){return`Unknown field for ${e}. Cannot calculate view size.`}function v_e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function b_e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function y_e(e){return`The "nearest" transform is not supported for ${e} marks.`}function x_e(e){return`Selection not supported for ${e} yet.`}function __e(e){return`Cannot find a selection named "${e}".`}var w_e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",S_e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",C_e="Legend bindings are only supported for selections over an individual field or encoding channel.";function k_e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function E_e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}var A_e="The same selection must be used to override scale domains in a layered view.",T_e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function D_e(e){return`Unknown repeated value "${e}".`}function R_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}var MR="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",Pd="Animation involving facet, layer, or concat is currently unsupported.";function FR(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${de(e)}.`}function OR(e,t,r,i){return(e.length?"Multiple ":"No ")+`matching ${de(t)} encoding found for selection ${de(r.param)}. Using "field": ${de(i)}.`}var M_e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function F_e(e){return`Unrecognized parse "${e}".`}function O_e(e,t,r){return`An ancestor parsed field "${e}" as ${r} but a child wants to parse the field as ${t}.`}var $_e="Attempt to add the same child twice.";function L_e(e){return`Ignoring an invalid transform: ${St(e)}.`}var P_e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function I_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function N_e(e){let{parentProjection:t,projection:r}=e;return`Layer's shared projection ${St(t)} is overridden by a child projection ${St(r)}.`}var B_e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function z_e(e){return`${e}Offset dropped because ${e} is continuous`}function H_e(e,t,r){return`Channel ${e} is a ${t}. Converted to {value: ${St(r)}}.`}function U_e(e){return`Invalid field type "${e}".`}function q_e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function j_e(e){return`Invalid aggregation operator "${e}".`}function W_e(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function V_e(e,t){let{fill:r,stroke:i}=t;return`Dropping color ${e} as the plot also has ${r&&i?"fill and stroke":r?"fill":"stroke"}.`}function G_e(e){return`Position range does not support relative band size for ${e}.`}function Y_e(e,t){return`Dropping ${St(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}var X_e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function K_e(e,t,r){return`${e} dropped as it is incompatible with "${t}"${r?` when ${r}`:""}.`}function Z_e(e){return`${e} encoding has no scale, so specified scale is ignored.`}function J_e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Q_e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function e4e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function t4e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function r4e(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function i4e(e){return`The ${e} for range marks cannot be an expression`}function n4e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function o4e(e,t){return`Specified orient "${e}" overridden with "${t}".`}var s4e="Custom domain scale cannot be unioned with default field-based domain.";function a4e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function l4e(e){return`Cannot use the relative band size with ${e} scale.`}function u4e(e){return`Using unaggregated domain with raw field has no effect (${St(e)}).`}function c4e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function f4e(e){return`Unaggregated domain is currently unsupported for log scale (${St(e)}).`}function h4e(e){return`Cannot apply size to non-oriented mark "${e}".`}function d4e(e,t,r){return`Channel "${e}" does not work with "${t}" scale. We are using "${r}" scale instead.`}function p4e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function m4e(e,t,r){return`${r}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function g4e(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function v4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function b4e(e,t,r,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${St(r)} and ${St(i)}). Using ${St(r)}.`}function y4e(e,t,r,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${St(r)} and ${St(i)}). Using the union of the two domains.`}function x4e(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function _4e(e){return`Dropping sort property ${St(e)} as unioned domains only support boolean or op "count", "min", and "max".`}var w4e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",S4e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",C4e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",k4e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",E4e="Invalid channel for axis.";function A4e(e){return`Cannot stack "${e}" if there is already "${e}2".`}function T4e(e){return`Stack is applied to a non-linear scale (${e}).`}function D4e(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function R4e(e,t){return`Invalid ${e}: ${St(t)}.`}function M4e(e){return`Dropping day from datetime ${St(e)} as day cannot be combined with other units.`}function F4e(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function O4e(e,t,r){return`${e} is not usually used with ${t} for ${r}.`}function $4e(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function L4e(e){return`1D error band does not support ${e}.`}function P4e(e){return`Channel ${e} is required for "binned" bin.`}function I4e(e){return`Channel ${e} should not be used with "binned" bin.`}function N4e(e){return`Domain for ${e} is required for threshold scale.`}var B4e,BV=l1(Sx),Id=BV;B4e=new WeakMap;function zV(e){return Id=e,Id}function HV(){return Id=BV,Id}function vm(...e){Id.error(...e)}function ie(...e){Id.warn(...e)}function UV(...e){Id.debug(...e)}function Us(e){if(e&&me(e)){for(let t of Q5)if(ae(e,t))return!0}return!1}var qV=["january","february","march","april","may","june","july","august","september","october","november","december"],z4e=qV.map(e=>e.substr(0,3)),jV=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],H4e=jV.map(e=>e.substr(0,3));function U4e(e){if(fy(e)&&(e=+e),ut(e))return e>4&&ie(Q.invalidTimeUnit("quarter",e)),e-1;throw new Error(Q.invalidTimeUnit("quarter",e))}function q4e(e){if(fy(e)&&(e=+e),ut(e))return e-1;{let t=e.toLowerCase(),r=qV.indexOf(t);if(r!==-1)return r;let i=t.substr(0,3),n=z4e.indexOf(i);if(n!==-1)return n;throw new Error(Q.invalidTimeUnit("month",e))}}function j4e(e){if(fy(e)&&(e=+e),ut(e))return e%7;{let t=e.toLowerCase(),r=jV.indexOf(t);if(r!==-1)return r;let i=t.substr(0,3),n=H4e.indexOf(i);if(n!==-1)return n;throw new Error(Q.invalidTimeUnit("day",e))}}function $R(e,t){let r=[];if(t&&e.day!==void 0&&J(e).length>1&&(ie(Q.droppedDay(e)),e=De(e),delete e.day),e.year!==void 0?r.push(e.year):r.push(2012),e.month!==void 0){let i=t?q4e(e.month):e.month;r.push(i)}else if(e.quarter!==void 0){let i=t?U4e(e.quarter):e.quarter;r.push(ut(i)?i*3:`${i}*3`)}else r.push(0);if(e.date!==void 0)r.push(e.date);else if(e.day!==void 0){let i=t?j4e(e.day):e.day;r.push(ut(i)?i+1:`${i}+1`)}else r.push(1);for(let i of["hours","minutes","seconds","milliseconds"]){let n=e[i];r.push(typeof n>"u"?0:n)}return r}function za(e){let r=$R(e,!0).join(", ");return e.utc?`utc(${r})`:`datetime(${r})`}function WV(e){let r=$R(e,!1).join(", ");return e.utc?`utc(${r})`:`datetime(${r})`}function VV(e){let t=$R(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var GV={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Q5=J(GV);function YV(e){return _e(GV,e)}var W4e={binnedyear:1,binnedyearquarter:1,binnedyearquartermonth:1,binnedyearmonth:1,binnedyearmonthdate:1,binnedyearmonthdatehours:1,binnedyearmonthdatehoursminutes:1,binnedyearmonthdatehoursminutesseconds:1,binnedyearweek:1,binnedyearweekday:1,binnedyearweekdayhours:1,binnedyearweekdayhoursminutes:1,binnedyearweekdayhoursminutesseconds:1,binnedyeardayofyear:1},V4e={binnedutcyear:1,binnedutcyearquarter:1,binnedutcyearquartermonth:1,binnedutcyearmonth:1,binnedutcyearmonthdate:1,binnedutcyearmonthdatehours:1,binnedutcyearmonthdatehoursminutes:1,binnedutcyearmonthdatehoursminutesseconds:1,binnedutcyearweek:1,binnedutcyearweekday:1,binnedutcyearweekdayhours:1,binnedutcyearweekdayhoursminutes:1,binnedutcyearweekdayhoursminutesseconds:1,binnedutcyeardayofyear:1},ort={...W4e,...V4e};function Ha(e){return me(e)?e.binned:XV(e)}function XV(e){return e&&e.startsWith("binned")}function LR(e){return e.startsWith("utc")}function G4e(e){return e.substring(3)}var Y4e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function bm(e){return Q5.filter(t=>KV(e,t))}function PR(e){let t=bm(e);return t[t.length-1]}function KV(e,t){let r=e.indexOf(t);return!(r<0||r>0&&t==="seconds"&&e.charAt(r-1)==="i"||e.length>r+3&&t==="day"&&e.charAt(r+3)==="o"||r>0&&t==="year"&&e.charAt(r-1)==="f")}function ZV(e,t,{end:r}={end:!1}){let i=cy(t),n=LR(e)?"utc":"";function o(l){return l==="quarter"?`(${n}quarter(${i})-1)`:`${n}${l}(${i})`}let s,a={};for(let l of Q5)KV(e,l)&&(a[l]=o(l),s=l);return r&&(a[s]+="+1"),WV(a)}function IR(e){if(!e)return;let t=bm(e);return`timeUnitSpecifier(${St(t)}, ${St(Y4e)})`}function JV(e,t,r){if(!e)return;let i=IR(e);return`${r||LR(e)?"utc":"time"}Format(${t}, ${i})`}function cr(e){if(!e)return;let t;return he(e)?XV(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:me(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),LR(t.unit)&&(t.utc=!0,t.unit=G4e(t.unit)),t}function QV(e){let{utc:t,...r}=cr(e);return r.unit?(t?"utc":"")+J(r).map(i=>wt(`${i==="unit"?"":`_${i}_`}${r[i]}`)).join(""):(t?"utc":"")+"timeunit"+J(r).map(i=>wt(`_${i}_${r[i]}`)).join("")}function e3(e,t=r=>r){let r=cr(e),i=PR(r.unit);if(i&&i!=="day"){let n={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=NR(i,r.step),a={...n,[s]:+n[s]+o};return`${t(za(a))} - ${t(za(n))}`}}var X4e={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function K4e(e){return _e(X4e,e)}function NR(e,t=1){if(K4e(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function eG(e){return ae(e,"param")}function t3(e){return!!e?.field&&e.equal!==void 0}function r3(e){return!!e?.field&&e.lt!==void 0}function i3(e){return!!e?.field&&e.lte!==void 0}function n3(e){return!!e?.field&&e.gt!==void 0}function o3(e){return!!e?.field&&e.gte!==void 0}function s3(e){if(e?.field){if(K(e.range)&&e.range.length===2)return!0;if(Ae(e.range))return!0}return!1}function a3(e){return!!e?.field&&(K(e.oneOf)||K(e.in))}function Z4e(e){return!!e?.field&&e.valid!==void 0}function BR(e){return a3(e)||t3(e)||s3(e)||r3(e)||n3(e)||i3(e)||o3(e)}function $l(e,t){return Bd(e,{timeUnit:t,wrapTime:!0})}function J4e(e,t){return e.map(r=>$l(r,t))}function l3(e,t=!0){let{field:r}=e,i=cr(e.timeUnit),{unit:n,binned:o}=i||{},s=ge(e,{expr:"datum"}),a=n?`time(${o?s:ZV(n,r)})`:s;if(t3(e))return`${a}===${$l(e.equal,n)}`;if(r3(e)){let l=e.lt;return`${a}<${$l(l,n)}`}else if(n3(e)){let l=e.gt;return`${a}>${$l(l,n)}`}else if(i3(e)){let l=e.lte;return`${a}<=${$l(l,n)}`}else if(o3(e)){let l=e.gte;return`${a}>=${$l(l,n)}`}else{if(a3(e))return`indexof([${J4e(e.oneOf,n).join(",")}], ${a}) !== -1`;if(Z4e(e))return Nd(a,e.valid);if(s3(e)){let{range:l}=wr(e),u=Ae(l)?{signal:`${l.signal}[0]`}:l[0],c=Ae(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+$l(u,n)+", "+$l(c,n)+"])";let f=[];return u!==null&&f.push(`${a} >= ${$l(u,n)}`),c!==null&&f.push(`${a} <= ${$l(c,n)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${St(e)}`)}function Nd(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function tG(e){return BR(e)&&e.timeUnit?{...e,timeUnit:cr(e.timeUnit)}:e}var ym={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function rG(e){return e==="quantitative"||e==="temporal"}function u3(e){return e==="ordinal"||e==="nominal"}var qs=ym.quantitative,hy=ym.ordinal,Ll=ym.temporal,dy=ym.nominal,Ua=ym.geojson,grt=J(ym);function iG(e){if(e)switch(e=e.toLowerCase(),e){case"q":case qs:return"quantitative";case"t":case Ll:return"temporal";case"o":case hy:return"ordinal";case"n":case dy:return"nominal";case Ua:return"geojson"}}var Kr={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},py={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},wrt=J(py);function nG(e,t){let r=py[e],i=py[t];return r===i||r==="ordinal-position"&&i==="time"||i==="ordinal-position"&&r==="time"}var Q4e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function zR(e){return Q4e[e]}var oG=new Set(["linear","log","pow","sqrt","symlog"]),sG=new Set([...oG,"time","utc"]);function HR(e){return oG.has(e)}var aG=new Set(["quantile","quantize","threshold"]),ewe=new Set([...sG,...aG,"sequential","identity"]),twe=new Set(["ordinal","bin-ordinal","point","band"]);function Yt(e){return twe.has(e)}function Bi(e){return ewe.has(e)}function js(e){return sG.has(e)}function ec(e){return aG.has(e)}var lG={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function uG(e){return!he(e)&&ae(e,"name")}function UR(e){return ae(e,"param")}function cG(e){return ae(e,"unionWith")}function fG(e){return me(e)&&"field"in e}var hG={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Srt=J(hG),{type:Crt,domain:krt,range:Ert,rangeMax:Art,rangeMin:Trt,scheme:Drt,...rwe}=hG,dG=J(rwe);function my(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return js(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return js(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return js(e);case"nice":return js(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Bi(e)&&!We(["log","time","utc","threshold","quantile"],e)}}function c3(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Ju(e)?void 0:Q.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function pG(e,t){return We([hy,dy],t)?e===void 0||Yt(e):t===Ll?We([Kr.TIME,Kr.UTC,void 0],e):t===qs?HR(e)||ec(e)||e===void 0:!0}function mG(e,t,r=!1){if(!fi(e))return!1;switch(e){case Rt:case lr:case Bs:case Ol:case rn:case Tn:return js(t)||t==="band"?!0:t==="point"?!r:!1;case os:return We(["linear","band"],t);case Lo:case ls:case lo:case ss:case as:case Pa:return js(t)||ec(t)||We(["band","point","ordinal"],t);case jr:case Rn:case Mn:return t!=="band";case us:case Tr:return t==="ordinal"||ec(t)}}function gG(e){return me(e)&&"value"in e}var fo={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},jR=fo.arc,zd=fo.area,Hd=fo.bar,vG=fo.image,Ud=fo.line,xm=fo.point,bG=fo.rect,_m=fo.rule,f3=fo.text,gy=fo.tick,yG=fo.trail,vy=fo.circle,by=fo.square,h3=fo.geoshape;function Fn(e){return["line","area","trail"].includes(e)}function tc(e){return["rect","bar","image","arc","tick"].includes(e)}var xG=new Set(J(fo));function ln(e){return ae(e,"type")}var iwe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],nwe=["fill","fillOpacity"],_G=[...iwe,...nwe],owe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},WR=J(owe),qR=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],wG={area:["line","point"],bar:qR,rect:qR,line:["point"],tick:["bandSize","thickness",...qR]},SG={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},swe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},d3=J(swe);function Pl(e){return ae(e,"band")}var CG={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},awe=5,p3={binSpacing:0,continuousBandSize:awe,minBandSize:.25,timeUnitBandPosition:.5},kG={...p3,binSpacing:1},EG={...p3,thickness:1};function AG(e){return ln(e)?e.type:e}function m3(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function wm({markDef:e,config:t,scaleChannel:r,scaleType:i,isCountAggregate:n}){if(!i||!Bi(i)||n)return"always-valid";let o=m3(dt("invalid",e,t),{isPath:Fn(e.type)});return t.scale?.invalid?.[r]!==void 0?"show":o}function TG(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function g3({scaleName:e,scale:t,mode:r}){let i=`domain('${e}')`;if(!t||!e)return;let n=`${i}[0]`,o=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${r==="zeroOrMin"?n:o})`}:{signal:`scale('${e}', ${r==="zeroOrMin"?n:o})`}}function v3({scaleChannel:e,channelDef:t,scale:r,scaleName:i,markDef:n,config:o}){let s=r?.get("type"),a=_i(t),l=qf(a?.aggregate),u=wm({scaleChannel:e,markDef:n,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){let c=o.scale.invalid?.[e]??"zero-or-min";return{test:Nd(ge(a,{expr:"datum"}),!1),...uwe(c,r,i)}}}function uwe(e,t,r){if(gG(e)){let{value:i}=e;return Ae(i)?{signal:i.signal}:{value:i}}return g3({scale:t,scaleName:r,mode:"zeroOrMin"})}function Cm(e){let{channel:t,channelDef:r,markDef:i,scale:n,scaleName:o,config:s}=e,a=cs(t),l=yy(e),u=v3({scaleChannel:a,channelDef:r,scale:n,scaleName:o,markDef:i,config:s});return u!==void 0?[u,l]:l}function DG(e){let{datum:t}=e;return Us(t)?za(t):`${St(t)}`}function Il(e,t,r,i){let n={};if(t&&(n.scale=t),On(e)){let{datum:o}=e;Us(o)?n.signal=za(o):Ae(o)?n.signal=o.signal:jf(o)?n.signal=o.expr:n.value=o}else n.field=ge(e,r);if(i){let{offset:o,band:s}=i;o&&(n.offset=o),s&&(n.band=s)}return n}function Sm({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:r,offset:i,startSuffix:n,endSuffix:o="end",bandPosition:s=.5}){let a=!Ae(s)&&0<s&&s<1?"datum":void 0,l=ge(t,{expr:a,suffix:n}),u=r!==void 0?ge(r,{expr:a}):ge(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;let f=s===0?l:u;c.field=f}else{let f=Ae(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;c.signal=`scale("${e}", ${f})`}return i&&(c.offset=i),c}function RG({scaleName:e,fieldDef:t}){let r=ge(t,{expr:"datum"}),i=ge(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${r}))`}function yy({channel:e,channelDef:t,channel2Def:r,markDef:i,config:n,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(Xe(t)){let f=s?.get("type");if(Rr(t)){c??(c=Io({fieldDef:t,fieldDef2:r,markDef:i,config:n}));let{bin:h,timeUnit:p,type:d}=t;if(vt(h)||c&&p&&d===Ll)return a?.impute?Il(t,o,{binSuffix:"mid"},{offset:l}):c&&!Yt(f)?Sm({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Il(t,o,Nl(t,e)?{binSuffix:"range"}:{},{offset:l});if(ur(h)){if(ce(r))return Sm({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:r,bandPosition:c,offset:l});{let m=e===Rt?$o:ns;ie(Q.channelRequiredForBinned(m))}}}return Il(t,o,Yt(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(hi(t)){let f=t.value,h=l?{offset:l}:{};return{...qd(e,f),...h}}}return Ke(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function qd(e,t){return We(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:We(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:bt(t)}function Bl(e){return e&&e!=="number"&&e!=="time"}function FG(e,t,r){return`${e}(${t}${r?`, ${St(r)}`:""})`}var cwe=" \u2013 ";function km({fieldOrDatumDef:e,format:t,formatType:r,expr:i,normalizeStack:n,config:o}){if(Bl(r))return hs({fieldOrDatumDef:e,format:t,formatType:r,expr:i,config:o});let s=OG(e,i,n),a=rc(e);if(t===void 0&&r===void 0&&o.customFormatTypes){if(a==="quantitative"){if(n&&o.normalizedNumberFormatType)return hs({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:i,config:o});if(o.numberFormatType)return hs({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:i,config:o})}if(a==="temporal"&&o.timeFormatType&&ce(e)&&e.timeUnit===void 0)return hs({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:i,config:o})}if(nc(e)){let l=hwe({field:s,timeUnit:ce(e)?cr(e.timeUnit)?.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Ws(e)&&e.scale?.type===Kr.UTC});return l?{signal:l}:void 0}if(t=VR({type:a,specifiedFormat:t,config:o,normalizeStack:n}),ce(e)&&vt(e.bin)){let l=ge(e,{expr:i,binSuffix:"end"});return{signal:jd(s,l,t,r,o)}}else return t||rc(e)==="quantitative"?{signal:`${$G(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function OG(e,t,r){return ce(e)?r?`${ge(e,{expr:t,suffix:"end"})}-${ge(e,{expr:t,suffix:"start"})}`:ge(e,{expr:t}):DG(e)}function hs({fieldOrDatumDef:e,format:t,formatType:r,expr:i,normalizeStack:n,config:o,field:s}){if(s??(s=OG(e,i,n)),s!=="datum.value"&&ce(e)&&vt(e.bin)){let a=ge(e,{expr:i,binSuffix:"end"});return{signal:jd(s,a,t,r,o)}}return{signal:FG(r,s,t)}}function y3(e,t,r,i,n,o){if(!(he(i)&&Bl(i))&&!(r===void 0&&i===void 0&&n.customFormatTypes&&rc(e)==="quantitative"&&(n.normalizedNumberFormatType&&ic(e)&&e.stack==="normalize"||n.numberFormatType))){if(ic(e)&&e.stack==="normalize"&&n.normalizedNumberFormat)return VR({type:"quantitative",config:n,normalizeStack:!0});if(nc(e)){let s=ce(e)?cr(e.timeUnit)?.unit:void 0;return s===void 0&&n.customFormatTypes&&n.timeFormatType?void 0:fwe({specifiedFormat:r,timeUnit:s,config:n,omitTimeFormatConfig:o})}return VR({type:t,specifiedFormat:r,config:n})}}function x3(e,t,r){if(e&&(Ae(e)||e==="number"||e==="time"))return e;if(nc(t)&&r!=="time"&&r!=="utc")return ce(t)&&cr(t?.timeUnit)?.utc?"utc":"time"}function VR({type:e,specifiedFormat:t,config:r,normalizeStack:i}){if(he(t))return t;if(e===qs)return i?r.normalizedNumberFormat:r.numberFormat}function fwe({specifiedFormat:e,timeUnit:t,config:r,omitTimeFormatConfig:i}){return e||(t?{signal:IR(t)}:i?void 0:r.timeFormat)}function $G(e,t){return`format(${e}, "${t||""}")`}function MG(e,t,r,i){return Bl(r)?FG(r,e,t):$G(e,(he(t)?t:void 0)??i.numberFormat)}function jd(e,t,r,i,n){if(r===void 0&&i===void 0&&n.customFormatTypes&&n.numberFormatType)return jd(e,t,n.numberFormat,n.numberFormatType,n);let o=MG(e,r,i,n),s=MG(t,r,i,n);return`${Nd(e,!1)} ? "null" : ${o} + "${cwe}" + ${s}`}function hwe({field:e,timeUnit:t,format:r,formatType:i,rawTimeFormat:n,isUTCScale:o}){return!t||r?!t&&i?`${i}(${e}, '${r}')`:(r=he(r)?r:n,`${o?"utc":"time"}Format(${e}, '${r}')`):JV(t,e,o)}var Wf="min",dwe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function GR(e){return _e(dwe,e)}function LG(e){return ae(e,"encoding")}function $n(e){return e&&(e.op==="count"||ae(e,"field"))}function _3(e){return e&&K(e)}function zl(e){return ae(e,"row")||ae(e,"column")}function w3(e){return ae(e,"header")}function oc(e){return ae(e,"facet")}function PG(e){return ae(e,"param")}function IG(e){return!he(e)&&ae(e,"repeat")}function YR(e){let{field:t,timeUnit:r,bin:i,aggregate:n}=e;return{...r?{timeUnit:r}:{},...i?{bin:i}:{},...n?{aggregate:n}:{},field:t}}function C3(e){return ae(e,"sort")}function Io({fieldDef:e,fieldDef2:t,markDef:r,config:i}){if(Xe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ce(e)){let{timeUnit:n,bin:o}=e;if(n&&!t)return co("timeUnitBandPosition",r,i);if(vt(o))return .5}}function XR({channel:e,fieldDef:t,fieldDef2:r,markDef:i,config:n,scaleType:o,useVlSizeChannel:s}){let a=Dr(e),l=dt(s?"size":a,i,n,{vgChannel:a});if(l!==void 0)return l;if(ce(t)){let{timeUnit:u,bin:c}=t;if(u&&!r)return{band:co("timeUnitBandSize",i,n)};if(vt(c)&&!Yt(o))return{band:1}}if(tc(i.type))return o?Yt(o)?n[i.type]?.discreteBandSize||{band:1}:n[i.type]?.continuousBandSize:n[i.type]?.discreteBandSize}function k3(e,t,r,i){return vt(e.bin)||e.timeUnit&&Rr(e)&&e.type==="temporal"?Io({fieldDef:e,fieldDef2:t,markDef:r,config:i})!==void 0:!1}function E3(e){return ae(e,"sort")&&!ae(e,"field")}function Hl(e){return ae(e,"condition")}function Am(e){let t=e?.condition;return!!t&&!K(t)&&ce(t)}function Vf(e){let t=e?.condition;return!!t&&!K(t)&&Xe(t)}function NG(e){let t=e?.condition;return!!t&&(K(t)||hi(t))}function ce(e){return ae(e,"field")||e?.aggregate==="count"}function rc(e){return e?.type}function On(e){return ae(e,"datum")}function qa(e){return Rr(e)&&!xy(e)||_y(e)}function KR(e){return Rr(e)&&e.type==="quantitative"&&!e.bin||_y(e)}function _y(e){return On(e)&&ut(e.datum)}function Xe(e){return ce(e)||On(e)}function Rr(e){return e&&(ae(e,"field")||e.aggregate==="count")&&ae(e,"type")}function hi(e){return ae(e,"value")}function Ws(e){return ae(e,"scale")||ae(e,"sort")}function ic(e){return ae(e,"axis")||ae(e,"stack")||ae(e,"impute")}function BG(e){return ae(e,"legend")}function zG(e){return ae(e,"format")||ae(e,"formatType")}function HG(e){return qr(e,["legend","axis","header","scale"])}function pwe(e){return ae(e,"op")}function ge(e,t={}){let r=e.field,i=t.prefix,n=t.suffix,o="";if(gwe(e))r=gR("count");else{let s;if(!t.nofn)if(pwe(e))s=e.op;else{let{bin:a,aggregate:l,timeUnit:u}=e;vt(a)?(s=V5(a),n=(t.binSuffix??"")+(t.suffix??"")):l?Hs(l)?(o=`["${r}"]`,r=`argmax_${l.argmax}`):fs(l)?(o=`["${r}"]`,r=`argmin_${l.argmin}`):s=String(l):u&&!Ha(u)&&(s=QV(u),n=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(r=r?`${s}_${r}`:s)}return n&&(r=`${r}_${n}`),i&&(r=`${i}_${r}`),t.forAs?Ku(r):t.expr?pR(r,t.expr)+o:ci(r)+o}function xy(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ce(e)&&!!e.bin;case"temporal":return!1}throw new Error(Q.invalidFieldType(e.type))}function mwe(e){return Ws(e)&&ec(e.scale?.type)}function gwe(e){return e.aggregate==="count"}function vwe(e,t){let{field:r,bin:i,timeUnit:n,aggregate:o}=e;if(o==="count")return t.countTitle;if(vt(i))return`${r} (binned)`;if(n&&!Ha(n)){let s=cr(n)?.unit;if(s)return`${r} (${bm(s).join("-")})`}else if(o)return Hs(o)?`${r} for max ${o.argmax}`:fs(o)?`${r} for min ${o.argmin}`:`${Bf(o)} of ${r}`;return r}function bwe(e){let{aggregate:t,bin:r,timeUnit:i,field:n}=e;if(Hs(t))return`${n} for argmax(${t.argmax})`;if(fs(t))return`${n} for argmin(${t.argmin})`;let o=i&&!Ha(i)?cr(i):void 0,s=t||o?.unit||o?.maxbins&&"timeunit"||vt(r)&&"bin";return s?`${s.toUpperCase()}(${n})`:n}var UG=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return bwe(e);default:return vwe(e,t)}},qG=UG;function ZR(e){qG=e}function jG(){ZR(UG)}function Ul(e,t,{allowDisabling:r,includeDefault:i=!0}){let n=A3(e)?.title;if(!ce(e))return n??e.title;let o=e,s=i?wy(o,t):void 0;return r?yt(n,o.title,s):n??o.title??s}function A3(e){if(ic(e)&&e.axis)return e.axis;if(BG(e)&&e.legend)return e.legend;if(w3(e)&&e.header)return e.header}function wy(e,t){return qG(e,t)}function Tm(e){if(zG(e)){let{format:t,formatType:r}=e;return{format:t,formatType:r}}else{let t=A3(e)??{},{format:r,formatType:i}=t;return{format:r,formatType:i}}}function ywe(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(C3(e)&&K(e.sort))return"ordinal";let{aggregate:r,bin:i,timeUnit:n}=e;if(n)return"temporal";if(i||r&&!Hs(r)&&!fs(r))return"quantitative";if(Ws(e)&&e.scale?.type)switch(py[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function _i(e){if(ce(e))return e;if(Am(e))return e.condition}function jt(e){if(Xe(e))return e;if(Vf(e))return e.condition}function JR(e,t,r,i={}){if(he(e)||ut(e)||xo(e)){let n=he(e)?"string":ut(e)?"number":"boolean";return ie(Q.primitiveChannelDef(t,n,e)),{value:e}}return Xe(e)?S3(e,t,r,i):Vf(e)?{...e,condition:S3(e.condition,t,r,i)}:e}function S3(e,t,r,i){if(zG(e)){let{format:n,formatType:o,...s}=e;if(Bl(o)&&!r.customFormatTypes)return ie(Q.customFormatTypeNotAllowed(t)),S3(s,t,r,i)}else{let n=ic(e)?"axis":BG(e)?"legend":w3(e)?"header":null;if(n&&e[n]){let{format:o,formatType:s,...a}=e[n];if(Bl(s)&&!r.customFormatTypes)return ie(Q.customFormatTypeNotAllowed(t)),S3({...e,[n]:a},t,r,i)}}return ce(e)?Sy(e,t,i):xwe(e)}function xwe(e){let t=e.type;if(t)return e;let{datum:r}=e;return t=ut(r)?"quantitative":he(r)?"nominal":Us(r)?"temporal":void 0,{...e,type:t}}function Sy(e,t,{compositeMark:r=!1}={}){let{aggregate:i,timeUnit:n,bin:o,field:s}=e,a={...e};if(!r&&i&&!pm(i)&&!Hs(i)&&!fs(i)&&(ie(Q.invalidAggregate(i)),delete a.aggregate),n&&(a.timeUnit=cr(n)),s&&(a.field=`${s}`),vt(o)&&(a.bin=gm(o,t)),ur(o)&&!Mt(t)&&ie(Q.channelShouldNotBeUsedForBinned(t)),Rr(a)){let{type:l}=a,u=iG(l);l!==u&&(a.type=u),l!=="quantitative"&&qf(i)&&(ie(Q.invalidFieldTypeForCountAggregate(l,i)),a.type="quantitative")}else if(!U5(t)){let l=ywe(a,t);a.type=l}if(Rr(a)){let{compatible:l,warning:u}=_we(a,t)||{};l===!1&&ie(u)}if(C3(a)&&he(a.sort)){let{sort:l}=a;if(GR(l))return{...a,sort:{encoding:l}};let u=l.substring(1);if(l.charAt(0)==="-"&&GR(u))return{...a,sort:{encoding:u,order:"descending"}}}if(w3(a)){let{header:l}=a;if(l){let{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function gm(e,t){return xo(e)?{maxbins:kR(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:kR(t)}:e}var Em={compatible:!0};function _we(e,t){let r=e.type;if(r==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Fo:case Oo:case am:return xy(e)?Em:{compatible:!1,warning:Q.channelShouldBeDiscrete(t)};case Rt:case lr:case Bs:case Ol:case jr:case Rn:case Mn:case $d:case Ld:case lm:case Zu:case um:case cm:case Pa:case rn:case Tn:case fm:return Em;case on:case sn:case nn:case Dn:return r!==qs?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Em;case lo:case ss:case as:case ls:case Lo:case La:case $a:case $o:case ns:case os:return r==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Em;case Tr:case us:return!xy(e)&&!mwe(e)?{compatible:!1,warning:Q.channelShouldBeDiscreteOrDiscretizing(t)}:Em;case Hf:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Em}}function nc(e){let{formatType:t}=Tm(e);return t==="time"||!t&&wwe(e)}function wwe(e){return e&&(e.type==="temporal"||ce(e)&&!!e.timeUnit)}function Bd(e,{timeUnit:t,type:r,wrapTime:i,undefinedIfExprNotRequired:n}){let o=t&&cr(t)?.unit,s=o||r==="temporal",a;return jf(e)?a=e.expr:Ae(e)?a=e.signal:Us(e)?(s=!0,a=za(e)):(he(e)||ut(e))&&s&&(a=`datetime(${St(e)})`,YV(o)&&(ut(e)&&e<1e4||he(e)&&isNaN(Date.parse(e)))&&(a=za({[o]:e}))),a?i&&s?`time(${a})`:a:n?void 0:St(e)}function T3(e,t){let{type:r}=e;return t.map(i=>{let n=ce(e)&&!Ha(e.timeUnit)?e.timeUnit:void 0,o=Bd(i,{timeUnit:n,type:r,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:i})}function Nl(e,t){return vt(e.bin)?fi(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}var QR={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function sc(e){return e?.condition}var D3=["domain","grid","labels","ticks","title"],WG={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},eM={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},VG={...eM,style:1,labelExpr:1,encoding:1};function tM(e){return _e(VG,e)}var Uit=J(VG),Cwe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},rM=J(Cwe);function wi(e){return ae(e,"mark")}var ql=class{constructor(t,r){this.name=t,this.run=r}hasMatchingType(t){return wi(t)?AG(t.mark)===this.name:!1}};function jl(e,t){let r=e&&e[t];return r?K(r)?Nf(r,i=>!!i.field):ce(r)||Am(r):!1}function iM(e,t){let r=e&&e[t];return r?K(r)?Nf(r,i=>!!i.field):ce(r)||On(r)||Vf(r):!1}function R3(e,t){if(Mt(t)){let r=e[t];if((ce(r)||On(r))&&(u3(r.type)||ce(r)&&r.timeUnit)){let i=hm(t);return iM(e,i)}}return!1}function M3(e){return Nf(fV,t=>{if(jl(e,t)){let r=e[t];if(K(r))return Nf(r,i=>!!i.aggregate);{let i=_i(r);return i&&!!i.aggregate}}return!1})}function F3(e,t){let r=[],i=[],n=[],o=[],s={};return Cy(e,(a,l)=>{if(ce(a)){let{field:u,aggregate:c,bin:f,timeUnit:h,...p}=a;if(c||h||f){let m=A3(a)?.title,g=ge(a,{forAs:!0}),v={...m?[]:{title:Ul(a,t,{allowDisabling:!0})},...p,field:g};if(c){let b;if(Hs(c)?(b="argmax",g=ge({op:"argmax",field:c.argmax},{forAs:!0}),v.field=`${g}.${u}`):fs(c)?(b="argmin",g=ge({op:"argmin",field:c.argmin},{forAs:!0}),v.field=`${g}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){let y={op:b,as:g};u&&(y.field=u),o.push(y)}}else if(r.push(g),Rr(a)&&vt(f)){if(i.push({bin:f,field:u,as:g}),r.push(ge(a,{binSuffix:"end"})),Nl(a,l)&&r.push(ge(a,{binSuffix:"range"})),Mt(l)){let b={field:`${g}_end`};s[`${l}2`]=b}v.bin="binned",U5(l)||(v.type=qs)}else if(h&&!Ha(h)){n.push({timeUnit:h,field:u,as:g});let b=Rr(a)&&a.type!==Ll&&"time";b&&(l===$d||l===Zu?v.formatType=b:SV(l)?v.legend={formatType:b,...v.legend}:Mt(l)&&(v.axis={formatType:b,...v.axis}))}s[l]=v}else r.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:n,aggregate:o,groupby:r,encoding:s}}function kwe(e,t,r){let i=EV(t,r);if(i){if(i==="binned"){let n=e[t===$o?Rt:lr];return!!(ce(n)&&ce(e[t])&&ur(n.bin))}}else return!1;return!0}function GG(e,t,r,i){let n={};for(let o of J(e))H5(o)||ie(Q.invalidEncodingChannel(o));for(let o of vV){if(!e[o])continue;let s=e[o];if(Qu(o)){let a=gV(o),l=n[a];if(ce(l)&&rG(l.type)&&ce(s)&&!l.timeUnit){ie(Q.offsetNestedInsideContinuousPositionScaleDropped(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(ie(Q.REPLACE_ANGLE_WITH_THETA),o=rn),!kwe(e,o,t)){ie(Q.incompatibleChannel(o,t));continue}if(o===Lo&&t==="line"&&_i(e[o])?.aggregate){ie(Q.LINE_WITH_VARYING_SIZE);continue}if(o===jr&&(r?"fill"in e:"stroke"in e)){ie(Q.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===Ld||o===Hf&&!K(s)&&!hi(s)||o===Zu&&K(s)){if(s){if(o===Hf){let a=e[o];if(E3(a)){n[o]=a;continue}}n[o]=ve(s).reduce((a,l)=>(ce(l)?a.push(Sy(l,o)):ie(Q.emptyFieldDef(l,o)),a),[])}}else{if(o===Zu&&s===null)n[o]=null;else if(!ce(s)&&!On(s)&&!hi(s)&&!Hl(s)&&!Ae(s)){ie(Q.emptyFieldDef(s,o));continue}n[o]=JR(s,o,i)}}return n}function Gf(e,t){let r={};for(let i of J(e)){let n=JR(e[i],i,t,{compositeMark:!0});r[i]=n}return r}function YG(e){let t=[];for(let r of J(e))if(jl(e,r)){let i=e[r],n=ve(i);for(let o of n)ce(o)?t.push(o):Am(o)&&t.push(o.condition)}return t}function Cy(e,t,r){if(e)for(let i of J(e)){let n=e[i];if(K(n))for(let o of n)t.call(r,o,i);else t.call(r,n,i)}}function XG(e,t,r,i){return e?J(e).reduce((n,o)=>{let s=e[o];return K(s)?s.reduce((a,l)=>t.call(i,a,l,o),n):t.call(i,n,s,o)},r):r}function O3(e,t){return J(t).reduce((r,i)=>{switch(i){case Rt:case lr:case um:case fm:case cm:case $o:case ns:case Bs:case Ol:case rn:case La:case Tn:case $a:case os:case nn:case on:case Dn:case sn:case $d:case Tr:case Pa:case Zu:return r;case Hf:if(e==="line"||e==="trail")return r;case Ld:case lm:{let n=t[i];if(K(n)||ce(n))for(let o of ve(n))o.aggregate||r.push(ge(o,{}));return r}case Lo:if(e==="trail")return r;case jr:case Rn:case Mn:case lo:case ss:case as:case us:case ls:{let n=_i(t[i]);return n&&!n.aggregate&&r.push(ge(n,{})),r}}},[])}function KG(e){let{tooltip:t,...r}=e;if(!t)return{filteredEncoding:r};let i,n;if(K(t)){for(let o of t)o.aggregate?(i||(i=[]),i.push(o)):(n||(n=[]),n.push(o));i&&(r.tooltip=i)}else t.aggregate?r.tooltip=t:n=t;return K(n)&&n.length===1&&(n=n[0]),{customTooltipWithoutAggregatedField:n,filteredEncoding:r}}function ky(e,t,r,i=!0){if("tooltip"in r)return{tooltip:r.tooltip};let n=e.map(({fieldPrefix:s,titlePrefix:a})=>{let l=i?` of ${L3(t)}`:"";return{field:s+t.field,type:t.type,title:Ae(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=YG(r).map(HG);return{tooltip:[...n,...An(o,Be)]}}function L3(e){let{title:t,field:r}=e;return yt(t,r)}function Dm(e,t,r,i,n){let{scale:o,axis:s}=r;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{let h=L3(r);return nM(e,a,n,{mark:l,encoding:{[t]:{field:`${u}_${r.field}`,type:r.type,...h!==void 0?{title:h}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...he(c)?{[`${t}2`]:{field:`${c}_${r.field}`}}:{},...i,...f}})}}function nM(e,t,r,i){let{clip:n,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&r[t]?[{...i,mark:{...r[t],...n?{clip:n}:{},...o?{color:o}:{},...s?{opacity:s}:{},...ln(i.mark)?i.mark:{type:i.mark},style:`${a}-${String(t)}`,...xo(e[t])?{}:e[t]}}]:[]}function P3(e,t,r){let{encoding:i}=e,n=t==="vertical"?"y":"x",o=i[n],s=i[`${n}2`],a=i[`${n}Error`],l=i[`${n}Error2`];return{continuousAxisChannelDef:$3(o,r),continuousAxisChannelDef2:$3(s,r),continuousAxisChannelDefError:$3(a,r),continuousAxisChannelDefError2:$3(l,r),continuousAxis:n}}function $3(e,t){if(e?.aggregate){let{aggregate:r,...i}=e;return r!==t&&ie(Q.errorBarContinuousAxisHasCustomizedAggregate(r,t)),i}else return e}function I3(e,t){let{mark:r,encoding:i}=e,{x:n,y:o}=i;if(ln(r)&&r.orient)return r.orient;if(qa(n)){if(qa(o)){let s=ce(n)&&n.aggregate,a=ce(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return nc(o)&&!nc(n)?"horizontal":"vertical"}return"horizontal"}else{if(qa(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var Ey="boxplot",ZG=["box","median","outliers","rule","ticks"],JG=new ql(Ey,oM);function QG(e){return ut(e)?"tukey":e}function oM(e,{config:t}){e={...e,encoding:Gf(e.encoding,t)};let{mark:r,encoding:i,params:n,projection:o,...s}=e,a=ln(r)?r:{type:r};n&&ie(Q.selectionNotSupported("boxplot"));let l=a.extent??t.boxplot.extent,u=dt("size",a,t),c=a.invalid,f=QG(l),{bins:h,timeUnits:p,transform:d,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:b,encodingWithoutContinuousAxis:y,ticksOrient:x,boxOrient:S,customTooltipWithoutAggregatedField:_}=Awe(e,l,t),w=Ku(m.field),{color:k,size:A,...M}=y,D=Xo=>Dm(a,g,m,Xo,t.boxplot),z=D(M),P=D(y),I=(me(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",N=D({...M,...A?{size:A}:{},color:{condition:{test:`${Bt(`lower_box_${m.field}`)} >= ${Bt(`upper_box_${m.field}`)}`,...k||{value:I}}}}),H=ky([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,y),T={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},O=f==="min-max"?H:ky([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,y),L=[...z({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:O}),...z({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:O}),...z({partName:"ticks",mark:T,positionPrefix:"lower_whisker",extraEncoding:O}),...z({partName:"ticks",mark:T,positionPrefix:"upper_whisker",extraEncoding:O})],q=[...f!=="tukey"?L:[],...P({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:S,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:H}),...N({partName:"median",mark:{type:"tick",invalid:c,...me(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:H})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(d),layer:q};let X=Bt(`lower_box_${m.field}`),ne=Bt(`upper_box_${m.field}`),ke=`(${ne} - ${X})`,Ee=`${X} - ${l} * ${ke}`,G=`${ne} + ${l} * ${ke}`,B=Bt(m.field),le={joinaggregate:eY(m.field),groupby:v},pe={transform:[{filter:`(${Ee} <= ${B}) && (${B} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${w}`},{op:"max",field:m.field,as:`upper_whisker_${w}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${w}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${w}`},...b],groupby:v}],layer:L},{tooltip:re,...ue}=M,{scale:Re,axis:fe}=m,mt=L3(m),ot=qr(fe,["title"]),ze=nM(a,"outliers",t.boxplot,{transform:[{filter:`(${B} < ${Ee}) || (${B} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...mt!==void 0?{title:mt}:{},...Re!==void 0?{scale:Re}:{},...ht(ot)?{}:{axis:ot}},...ue,...k?{color:k}:{},..._?{tooltip:_}:{}}})[0],ir,ki=[...h,...p,le];return ze?ir={transform:ki,layer:[ze,pe]}:(ir=pe,ir.transform.unshift(...ki)),{...s,layer:[ir,{transform:d,layer:q}]}}function eY(e){let t=Ku(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Awe(e,t,r){let i=I3(e,Ey),{continuousAxisChannelDef:n,continuousAxis:o}=P3(e,i,Ey),s=n.field,a=Ku(s),l=QG(t),u=[...eY(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`${Bt(`upper_box_${a}`)} - ${Bt(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${Bt(`upper_box_${a}`)} + ${Bt(`iqr_${a}`)} * ${t}, ${Bt(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${Bt(`lower_box_${a}`)} - ${Bt(`iqr_${a}`)} * ${t}, ${Bt(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[o]:f,...h}=e.encoding,{customTooltipWithoutAggregatedField:p,filteredEncoding:d}=KG(h),{bins:m,timeUnits:g,aggregate:v,groupby:b,encoding:y}=F3(d,r),x=i==="vertical"?"horizontal":"vertical",S=i,_=[...m,...g,{aggregate:[...v,...u],groupby:b},...c];return{bins:m,timeUnits:g,transform:_,groupby:b,aggregate:v,continuousAxisChannelDef:n,continuousAxis:o,encodingWithoutContinuousAxis:y,ticksOrient:x,boxOrient:S,customTooltipWithoutAggregatedField:p}}var N3="errorbar",rY=["ticks","rule"],iY=new ql(N3,sM);function sM(e,{config:t}){e={...e,encoding:Gf(e.encoding,t)};let{transform:r,continuousAxisChannelDef:i,continuousAxis:n,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=aM(e,N3,t);delete o.size;let c=Dm(a,n,i,o,t.errorbar),f=a.thickness,h=a.size,p={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...h!==void 0?{size:h}:{}},d=[...c({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:r,...d.length>1?{layer:d}:{...d[0]}}}function Twe(e,t){let{encoding:r}=e;if(Dwe(r))return{orient:I3(e,t),inputType:"raw"};let i=Rwe(r),n=Mwe(r),o=r.x,s=r.y;if(i){if(n)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);let a=r.x2,l=r.y2;if(Xe(a)&&Xe(l))throw new Error(`${t} cannot have both x2 and y2`);if(Xe(a)){if(qa(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Xe(l)){if(qa(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{let a=r.xError,l=r.xError2,u=r.yError,c=r.yError2;if(Xe(l)&&!Xe(a))throw new Error(`${t} cannot have xError2 without xError`);if(Xe(c)&&!Xe(u))throw new Error(`${t} cannot have yError2 without yError`);if(Xe(a)&&Xe(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Xe(a)){if(qa(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Xe(u)){if(qa(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Dwe(e){return(Xe(e.x)||Xe(e.y))&&!Xe(e.x2)&&!Xe(e.y2)&&!Xe(e.xError)&&!Xe(e.xError2)&&!Xe(e.yError)&&!Xe(e.yError2)}function Rwe(e){return Xe(e.x2)||Xe(e.y2)}function Mwe(e){return Xe(e.xError)||Xe(e.xError2)||Xe(e.yError)||Xe(e.yError2)}function aM(e,t,r){let{mark:i,encoding:n,params:o,projection:s,...a}=e,l=ln(i)?i:{type:i};o&&ie(Q.selectionNotSupported(t));let{orient:u,inputType:c}=Twe(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:h,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:d,continuousAxis:m}=P3(e,u,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:b,tooltipTitleWithFieldName:y}=Fwe(l,f,h,p,d,c,t,r),{[m]:x,[m==="x"?"x2":"y2"]:S,[m==="x"?"xError":"yError"]:_,[m==="x"?"xError2":"yError2"]:w,...k}=n,{bins:A,timeUnits:M,aggregate:D,groupby:z,encoding:P}=F3(k,r),I=[...D,...g],N=c!=="raw"?[]:z,H=ky(b,f,P,y);return{transform:[...a.transform??[],...A,...M,...I.length===0?[]:[{aggregate:I,groupby:N}],...v],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:H}}function Fwe(e,t,r,i,n,o,s,a){let l=[],u=[],c=t.field,f,h=!1;if(o==="raw"){let p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,d=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!=(d==="iqr")&&ie(Q.errorBarCenterIsUsedWithWrongExtent(p,d,s)),d==="stderr"||d==="stdev")l=[{op:d,field:c,as:`extent_${c}`},{op:p,field:c,as:`center_${c}`}],u=[{calculate:`${Bt(`center_${c}`)} + ${Bt(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${Bt(`center_${c}`)} - ${Bt(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Bf(p)},{fieldPrefix:"upper_",titlePrefix:tY(p,d,"+")},{fieldPrefix:"lower_",titlePrefix:tY(p,d,"-")}],h=!0;else{let m,g,v;d==="ci"?(m="mean",g="ci0",v="ci1"):(m="median",g="q1",v="q3"),l=[{op:g,field:c,as:`lower_${c}`},{op:v,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Ul({field:c,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Ul({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Ul({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ie(Q.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],u=[{calculate:Bt(r.field),as:`upper_${c}`},{calculate:Bt(c),as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`${Bt(c)} + ${Bt(i.field)}`,as:`upper_${c}`}],n?u.push({calculate:`${Bt(c)} + ${Bt(n.field)}`,as:`lower_${c}`}):u.push({calculate:`${Bt(c)} - ${Bt(i.field)}`,as:`lower_${c}`}));for(let p of u)f.push({fieldPrefix:p.as.substring(0,6),titlePrefix:Oa(Oa(p.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:h}}function tY(e,t,r){return`${Bf(e)} ${r} ${t}`}var B3="errorband",nY=["band","borders"],oY=new ql(B3,lM);function lM(e,{config:t}){e={...e,encoding:Gf(e.encoding,t)};let{transform:r,continuousAxisChannelDef:i,continuousAxis:n,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=aM(e,B3,t),u=s,c=Dm(u,n,i,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0,h={type:f?"area":"rect"},p={type:f?"line":"rule"},d={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return f?(h={...h,...d,ariaRoleDescription:"errorband"},p={...p,...d,aria:!1}):u.interpolate?ie(Q.errorBand1DNotSupport("interpolate")):u.tension&&ie(Q.errorBand1DNotSupport("tension")),{...a,transform:r,layer:[...c({partName:"band",mark:h,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:l})]}}var sY={};function uM(e,t,r){let i=new ql(e,t);sY[e]={normalizer:i,parts:r}}function aY(){return J(sY)}uM(Ey,oM,ZG);uM(N3,sM,rY);uM(B3,lM,nY);var lY=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"];var cM={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},fM={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},uY=J(cM),cY=J(fM),Owe={header:1,headerRow:1,headerColumn:1,headerFacet:1},hM=J(Owe);var z3=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],fY={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},dM={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Unt=J(dM);var un="_vgsid_",hY={point:{on:"click",fields:[un],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ay(e){return e==="legend"||!!e?.legend}function H3(e){return Ay(e)&&me(e)}function Rm(e){return!!e?.select}function U3(e){let t=[];for(let r of e||[]){if(Rm(r))continue;let{expr:i,bind:n,...o}=r;if(n&&i){let s={...o,bind:n,init:i};t.push(s)}else{let s={...o,...i?{update:i}:{},...n?{bind:n}:{}};t.push(s)}}return t}function pM(e){return Yf(e)||Mm(e)||Ty(e)}function Ty(e){return ae(e,"concat")}function Yf(e){return ae(e,"vconcat")}function Mm(e){return ae(e,"hconcat")}function mM({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function No(e){return ae(e,"step")}function gM(e){return ae(e,"view")||ae(e,"width")||ae(e,"height")}var vM=20,$we={align:1,bounds:1,center:1,columns:1,spacing:1},Lwe=J($we);function dY(e,t,r){let i=r[t],n={},{spacing:o,columns:s}=i;o!==void 0&&(n.spacing=o),s!==void 0&&(oc(e)&&!zl(e.facet)||Ty(e))&&(n.columns=s),Yf(e)&&(n.columns=1);for(let a of Lwe)if(e[a]!==void 0)if(a==="spacing"){let l=e[a];n[a]=ut(l)?l:{row:l.row??o,column:l.column??o}}else n[a]=e[a];return n}function Dy(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function Ry(e,t){let r=Fm(e,t);return No(r)?r.step:gY}function Fm(e,t){let r=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return yt(r,{step:e.step})}var gY=20,Pwe={continuousWidth:200,continuousHeight:200,step:gY};var Iwe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Pwe,mark:SG,arc:{},area:{},bar:kG,circle:{},geoshape:{},image:{},line:{},point:{},rect:p3,rule:{color:"black"},square:{},text:{color:"black"},tick:EG,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:lG,projection:{},legend:fY,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:hY,style:{},title:{},facet:{spacing:vM},concat:{spacing:vM},normalizedNumberFormat:".0%"},ac=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],pY={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},mY={blue:ac[0],orange:ac[1],red:ac[2],teal:ac[3],green:ac[4],yellow:ac[5],purple:ac[6],pink:ac[7],brown:ac[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Nwe(e={}){return{signals:[{name:"color",value:me(e)?{...mY,...e}:mY}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Bwe(e){return{signals:[{name:"fontSize",value:me(e)?{...pY,...e}:pY}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function zwe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function vY(e){let t=J(e||{}),r={};for(let i of t){let n=e[i];r[i]=sc(n)?X5(n):Ni(n)}return r}function Hwe(e){let t=J(e),r={};for(let i of t)r[i]=vY(e[i]);return r}var Uwe=[...d3,...rM,...hM,"background","padding","legend","lineBreak","scale","style","title","view"];function q3(e={}){let{color:t,font:r,fontSize:i,selection:n,...o}=e,s=cl({},De(Iwe),r?zwe(r):{},t?Nwe(t):{},i?Bwe(i):{},o||{});n&&bu(s,"selection",n,!0);let a=qr(s,Uwe);for(let l of["background","lineBreak","padding"])s[l]&&(a[l]=Ni(s[l]));for(let l of d3)s[l]&&(a[l]=wr(s[l]));for(let l of rM)s[l]&&(a[l]=vY(s[l]));for(let l of hM)s[l]&&(a[l]=wr(s[l]));if(s.legend&&(a.legend=wr(s.legend)),s.scale){let{invalid:l,...u}=s.scale,c=wr(l,{level:1});a.scale={...wr(u),...J(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=Hwe(s.style)),s.title&&(a.title=wr(s.title)),s.view&&(a.view=wr(s.view)),a}var qwe=new Set(["view",...xG]),jwe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Wwe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...wG};function bY(e){e=De(e);for(let t of jwe)delete e[t];if(e.axis)for(let t in e.axis)sc(e.axis[t])&&delete e.axis[t];if(e.legend)for(let t of lY)delete e.legend[t];if(e.mark){for(let t of WR)delete e.mark[t];e.mark.tooltip&&me(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(U3(e.params)),delete e.params);for(let t of qwe){for(let i of WR)delete e[t][i];let r=Wwe[t];if(r)for(let i of r)delete e[t][i];Gwe(e,t)}for(let t of aY())delete e[t];Vwe(e);for(let t in e)me(e[t])&&ht(e[t])&&delete e[t];return ht(e)?void 0:e}function Vwe(e){let{titleMarkConfig:t,subtitleMarkConfig:r,subtitle:i}=G5(e.title);ht(t)||(e.style["group-title"]={...e.style["group-title"],...t}),ht(r)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...r}),ht(i)?delete e.title:e.title=i}function Gwe(e,t,r,i){let n=i?e[t][i]:e[t];t==="view"&&(r="cell");let o={...n,...e.style[r??t]};ht(o)||(e.style[r??t]=o),i||delete e[t]}function lc(e){return ae(e,"layer")}function bM(e){return ae(e,"repeat")}function yY(e){return!K(e.repeat)&&ae(e.repeat,"layer")}var Xf=class{map(t,r){return oc(t)?this.mapFacet(t,r):bM(t)?this.mapRepeat(t,r):Mm(t)?this.mapHConcat(t,r):Yf(t)?this.mapVConcat(t,r):Ty(t)?this.mapConcat(t,r):this.mapLayerOrUnit(t,r)}mapLayerOrUnit(t,r){if(lc(t))return this.mapLayer(t,r);if(wi(t))return this.mapUnit(t,r);throw new Error(Q.invalidSpec(t))}mapLayer(t,r){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,r))}}mapHConcat(t,r){return{...t,hconcat:t.hconcat.map(i=>this.map(i,r))}}mapVConcat(t,r){return{...t,vconcat:t.vconcat.map(i=>this.map(i,r))}}mapConcat(t,r){let{concat:i,...n}=t;return{...n,concat:i.map(o=>this.map(o,r))}}mapFacet(t,r){return{...t,spec:this.map(t.spec,r)}}mapRepeat(t,r){return{...t,spec:this.map(t.spec,r)}}};var Ywe={zero:1,center:1,normalize:1};function Xwe(e){return _e(Ywe,e)}var Kwe=new Set([jR,Hd,zd,_m,xm,vy,by,Ud,f3,gy]),Zwe=new Set([Hd,zd,jR]);function Om(e){return ce(e)&&rc(e)==="quantitative"&&!e.bin}function xY(e,t,{orient:r,type:i}){let n=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(i),s=e[t],a=e[n];if(ce(s)&&ce(a))if(Om(s)&&Om(a)){if(s.stack)return t;if(a.stack)return n;let l=ce(s)&&!!s.aggregate,u=ce(a)&&!!a.aggregate;if(l!==u)return l?t:n;if(o){if(r==="vertical")return n;if(r==="horizontal")return t}}else{if(Om(s))return t;if(Om(a))return n}else{if(Om(s))return o&&r==="vertical"?void 0:t;if(Om(a))return o&&r==="horizontal"?void 0:n}}function Jwe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function j3(e,t){let r=ln(e)?e:{type:e},i=r.type;if(!Kwe.has(i))return null;let n=xY(t,"x",r)||xY(t,"theta",r);if(!n)return null;let o=t[n],s=ce(o)?ge(o,{}):void 0,a=Jwe(n),l=[],u=new Set;if(t[a]){let m=t[a],g=ce(m)?ge(m,{}):void 0;g&&g!==s&&(l.push(a),u.add(g))}let c=a==="x"?"xOffset":"yOffset",f=t[c],h=ce(f)?ge(f,{}):void 0;h&&h!==s&&(l.push(c),u.add(h));let p=bV.reduce((m,g)=>{if(g!=="tooltip"&&jl(t,g)){let v=t[g];for(let b of ve(v)){let y=_i(b);if(y.aggregate)continue;let x=ge(y,{});(!x||!u.has(x))&&m.push({channel:g,fieldDef:y})}}return m},[]),d;return o.stack!==void 0?xo(o.stack)?d=o.stack?"zero":null:d=o.stack:Zwe.has(i)&&(d="zero"),!d||!Xwe(d)||M3(t)&&p.length===0?null:(o?.scale?.type&&o?.scale?.type!==Kr.LINEAR&&o?.stack&&ie(Q.stackNonLinearScale(o.scale.type)),Xe(t[Ii(n)])?(o.stack!==void 0&&ie(Q.cannotStackRangedMark(n)),null):(ce(o)&&o.aggregate&&!RV.has(o.aggregate)&&ie(Q.stackNonSummativeAggregate(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:n,impute:o.impute===null?!1:Fn(i),stackBy:p,offset:d}))}function W3(e,t,r){let i=wr(e),n=dt("orient",i,r);if(i.orient=t5e(i.type,t,n),n!==void 0&&n!==i.orient&&ie(Q.orientOverridden(i.orient,n)),i.type==="bar"&&i.orient){let l=dt("cornerRadiusEnd",i,r);if(l!==void 0){let u=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:CG[i.orient];for(let c of u)i[c]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}let o=dt("opacity",i,r),s=dt("fillOpacity",i,r);return o===void 0&&s===void 0&&(i.opacity=e5e(i.type,t)),dt("cursor",i,r)===void 0&&(i.cursor=Qwe(i,t,r)),i}function Qwe(e,t,r){return t.href||e.href||dt("href",e,r)?"pointer":e.cursor}function e5e(e,t){if(We([xm,gy,vy,by],e)&&!M3(t))return .7}function _Y(e,t,{graticule:r}){if(r)return!1;let i=co("filled",e,t),n=e.type;return yt(i,n!==xm&&n!==Ud&&n!==_m)}function t5e(e,t,r){switch(e){case xm:case vy:case by:case f3:case bG:case vG:return}let{x:i,y:n,x2:o,y2:s}=t;switch(e){case Hd:if(ce(i)&&(ur(i.bin)||ce(n)&&n.aggregate&&!i.aggregate))return"vertical";if(ce(n)&&(ur(n.bin)||ce(i)&&i.aggregate&&!n.aggregate))return"horizontal";if(s||o){if(r)return r;if(!o)return(ce(i)&&i.type===qs&&!vt(i.bin)||_y(i))&&ce(n)&&ur(n.bin)?"horizontal":"vertical";if(!s)return(ce(n)&&n.type===qs&&!vt(n.bin)||_y(n))&&ce(i)&&ur(i.bin)?"vertical":"horizontal"}case _m:if(o&&!(ce(i)&&ur(i.bin))&&s&&!(ce(n)&&ur(n.bin)))return;case zd:if(s)return ce(n)&&ur(n.bin)?"horizontal":"vertical";if(o)return ce(i)&&ur(i.bin)?"vertical":"horizontal";if(e===_m){if(i&&!n)return"vertical";if(n&&!i)return"horizontal"}case Ud:case gy:{let a=KR(i),l=KR(n);if(r)return r;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{let u=Rr(i)&&i.type===Ll,c=Rr(n)&&n.type===Ll;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function r5e(e){let{point:t,line:r,...i}=e;return J(i).length>1?i:i.type}function i5e(e){for(let t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:qr(e[t],["point","line"])});return e}function yM(e,t={},r){return e.point==="transparent"?{opacity:0}:e.point?me(e.point)?e.point:{}:e.point!==void 0?null:t.point||r.shape?me(t.point)?t.point:{}:void 0}function wY(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}var V3=class{constructor(){this.name="path-overlay"}hasMatchingType(t,r){if(wi(t)){let{mark:i,encoding:n}=t,o=ln(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!yM(o,r[o.type],n);case"area":return!!yM(o,r[o.type],n)||!!wY(o,r[o.type])}}return!1}run(t,r,i){let{config:n}=r,{params:o,projection:s,mark:a,name:l,encoding:u,...c}=t,f=Gf(u,n),h=ln(a)?a:{type:a},p=yM(h,n[h.type],f),d=h.type==="area"&&wY(h,n[h.type]),m=[{name:l,...o?{params:o}:{},mark:r5e({...h.type==="area"&&h.opacity===void 0&&h.fillOpacity===void 0?{opacity:.7}:{},...h}),encoding:qr(f,["shape"])}],g=j3(W3(h,f,n),f),v=f;if(g){let{fieldChannel:b,offset:y}=g;v={...f,[b]:{...f[b],...y?{stack:y}:{}}}}return v=qr(v,["y2","x2"]),d&&m.push({...s?{projection:s}:{},mark:{type:"line",...Xu(h,["clip","interpolate","tension","tooltip"]),...d},encoding:v}),p&&m.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Xu(h,["clip","tooltip"]),...p},encoding:v}),i({...c,layer:m},{...r,config:i5e(n)})}};function kY(e,t){return t?zl(e)?AY(e,t):EY(e,t):e}function G3(e,t){return t?AY(e,t):e}function xM(e,t,r){let i=t[e];if(IG(i)){if(i.repeat in r)return{...t,[e]:r[i.repeat]};ie(Q.noSuchRepeatedValue(i.repeat));return}return t}function EY(e,t){if(e=xM("field",e,t),e!==void 0){if(e===null)return null;if(C3(e)&&$n(e.sort)){let r=xM("field",e.sort,t);e={...e,...r?{sort:r}:{}}}return e}}function SY(e,t){if(ce(e))return EY(e,t);{let r=xM("datum",e,t);return r!==e&&!r.type&&(r.type="nominal"),r}}function CY(e,t){if(Xe(e)){let r=SY(e,t);if(r)return r;if(Hl(e))return{condition:e.condition}}else{if(Vf(e)){let r=SY(e.condition,t);if(r)return{...e,condition:r};{let{condition:i,...n}=e;return n}}return e}}function AY(e,t){let r={};for(let i in e)if(ae(e,i)){let n=e[i];if(K(n))r[i]=n.map(o=>CY(o,t)).filter(o=>o);else{let o=CY(n,t);o!==void 0&&(r[i]=o)}}return r}var Y3=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(wi(t)){let{encoding:r,mark:i}=t;if(i==="line"||ln(i)&&i.type==="line")for(let n of mV){let o=cs(n),s=r[o];if(r[n]&&(ce(s)&&!ur(s.bin)||On(s)))return!0}}return!1}run(t,r,i){let{encoding:n,mark:o}=t;return ie(Q.lineWithRange(!!n.x2,!!n.y2)),i({...t,mark:me(o)?{...o,type:"rule"}:"rule"},r)}};var X3=class extends Xf{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[JG,iY,oY,new V3,new Y3]}map(t,r){if(wi(t)){let i=jl(t.encoding,Fo),n=jl(t.encoding,Oo),o=jl(t.encoding,am);if(i||n||o)return this.mapFacetedUnit(t,r)}return super.map(t,r)}mapUnit(t,r){let{parentEncoding:i,parentProjection:n}=r,o=G3(t.encoding,r.repeater),s={...t,...t.name?{name:[r.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(i||n)return this.mapUnitWithParentEncodingOrProjection(s,r);let a=this.mapLayerOrUnit.bind(this);for(let l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,r.config))return l.run(s,r,a);return s}mapRepeat(t,r){return yY(t)?this.mapLayerRepeat(t,r):this.mapNonLayerRepeat(t,r)}mapLayerRepeat(t,r){let{repeat:i,spec:n,...o}=t,{row:s,column:a,layer:l}=i,{repeater:u={},repeaterPrefix:c=""}=r;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:n}},r):{...o,layer:l.map(f=>{let h={...u,layer:f},p=`${(n.name?`${n.name}_`:"")+c}child__layer_${wt(f)}`,d=this.mapLayerOrUnit(n,{...r,repeater:h,repeaterPrefix:p});return d.name=p,d})}}mapNonLayerRepeat(t,r){let{repeat:i,spec:n,data:o,...s}=t;!K(i)&&t.columns&&(t=qr(t,["columns"]),ie(Q.columnsNotSupportByRowCol("repeat")));let a=[],{repeater:l={},repeaterPrefix:u=""}=r,c=!K(i)&&i.row||[l?l.row:null],f=!K(i)&&i.column||[l?l.column:null],h=K(i)&&i||[l?l.repeat:null];for(let d of h)for(let m of c)for(let g of f){let v={repeat:d,row:m,column:g,layer:l.layer},b=(n.name?`${n.name}_`:"")+u+"child__"+(K(i)?`${wt(d)}`:(i.row?`row_${wt(m)}`:"")+(i.column?`column_${wt(g)}`:"")),y=this.map(n,{...r,repeater:v,repeaterPrefix:b});y.name=b,a.push(qr(y,["data"]))}let p=K(i)?t.columns:i.column?i.column.length:1;return{data:n.data??o,align:"all",...s,columns:p,concat:a}}mapFacet(t,r){let{facet:i}=t;return zl(i)&&t.columns&&(t=qr(t,["columns"]),ie(Q.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,r)}mapUnitWithParentEncodingOrProjection(t,r){let{encoding:i,projection:n}=t,{parentEncoding:o,parentProjection:s,config:a}=r,l=DY({parentProjection:s,projection:n}),u=TY({parentEncoding:o,encoding:G3(i,r.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,r){let{row:i,column:n,facet:o,...s}=t.encoding,{mark:a,width:l,projection:u,height:c,view:f,params:h,encoding:p,...d}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:i,column:n,facet:o},r),v=G3(s,r.repeater);return this.mapFacet({...d,...g,facet:m,spec:{...l?{width:l}:{},...c?{height:c}:{},...f?{view:f}:{},...u?{projection:u}:{},mark:a,encoding:v,...h?{params:h}:{}}},r)}getFacetMappingAndLayout(t,r){let{row:i,column:n,facet:o}=t;if(i||n){o&&ie(Q.facetChannelDropped([...i?[Fo]:[],...n?[Oo]:[]]));let s={},a={};for(let l of[Fo,Oo]){let u=t[l];if(u){let{align:c,center:f,spacing:h,columns:p,...d}=u;s[l]=d;for(let m of["align","center","spacing"])u[m]!==void 0&&(a[m]??(a[m]={}),a[m][l]=u[m])}}return{facetMapping:s,layout:a}}else{let{align:s,center:a,spacing:l,columns:u,...c}=o;return{facetMapping:kY(c,r.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:r,parentProjection:i,...n}){let{encoding:o,projection:s,...a}=t,l={...n,parentEncoding:TY({parentEncoding:r,encoding:o,layer:!0}),parentProjection:DY({parentProjection:i,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}};function TY({parentEncoding:e,encoding:t={},layer:r}){let i={};if(e){let n=new Set([...J(e),...J(t)]);for(let o of n){let s=t[o],a=e[o];if(Xe(s)){let l={...a,...s};i[o]=l}else Vf(s)?i[o]={...s,condition:{...a,...s.condition}}:s||s===null?i[o]=s:(r||hi(a)||Ae(a)||Xe(a)||K(a))&&(i[o]=a)}}else i=t;return!i||ht(i)?void 0:i}function DY(e){let{parentProjection:t,projection:r}=e;return t&&r&&ie(Q.projectionOverridden({parentProjection:t,projection:r})),r??t}function My(e){return ae(e,"filter")}function RY(e){return ae(e,"stop")}function K3(e){return ae(e,"lookup")}function MY(e){return ae(e,"data")}function FY(e){return ae(e,"param")}function OY(e){return ae(e,"pivot")}function $Y(e){return ae(e,"density")}function LY(e){return ae(e,"quantile")}function PY(e){return ae(e,"regression")}function IY(e){return ae(e,"loess")}function NY(e){return ae(e,"sample")}function BY(e){return ae(e,"window")}function zY(e){return ae(e,"joinaggregate")}function HY(e){return ae(e,"flatten")}function UY(e){return ae(e,"calculate")}function Z3(e){return ae(e,"bin")}function qY(e){return ae(e,"impute")}function jY(e){return ae(e,"timeUnit")}function WY(e){return ae(e,"aggregate")}function VY(e){return ae(e,"stack")}function GY(e){return ae(e,"fold")}function YY(e){return ae(e,"extent")&&!ae(e,"density")&&!ae(e,"regression")}function XY(e){return e.map(t=>My(t)?{filter:If(t.filter,tG)}:t)}var J3=class extends Xf{map(t,r){return r.emptySelections??(r.emptySelections={}),r.selectionPredicates??(r.selectionPredicates={}),t=KY(t,r),super.map(t,r)}mapLayerOrUnit(t,r){if(t=KY(t,r),t.encoding){let i={};for(let[n,o]of Mo(t.encoding))i[n]=ZY(o,r);t={...t,encoding:i}}return super.mapLayerOrUnit(t,r)}mapUnit(t,r){let{selection:i,...n}=t;return i?{...n,params:Mo(i).map(([o,s])=>{let{init:a,bind:l,empty:u,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),r.emptySelections[o]=u!=="none";for(let f of ar(r.selectionPredicates[o]??{}))f.empty=u!=="none";return{name:o,value:a,select:c,bind:l}})}:t}};function KY(e,t){let{transform:r,...i}=e;if(r){let n=r.map(o=>{if(My(o))return{filter:_M(o,t)};if(Z3(o)&&Ia(o.bin))return{...o,bin:JY(o.bin)};if(K3(o)){let{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...i,transform:n}}return e}function ZY(e,t){let r=De(e);if(ce(r)&&Ia(r.bin)&&(r.bin=JY(r.bin)),Ws(r)&&r.scale?.domain?.selection){let{selection:i,...n}=r.scale.domain;r.scale.domain={...n,...i?{param:i}:{}}}if(Hl(r))if(K(r.condition))r.condition=r.condition.map(i=>{let{selection:n,param:o,test:s,...a}=i;return o?i:{...a,test:_M(i,t)}});else{let{selection:i,param:n,test:o,...s}=ZY(r.condition,t);r.condition=n?r.condition:{...s,test:_M(r.condition,t)}}return r}function JY(e){let t=e.extent;if(t?.selection){let{selection:r,...i}=t;return{...e,extent:{...i,param:r}}}return e}function _M(e,t){let r=i=>If(i,n=>{var o;let s=t.emptySelections[n]??!0,a={param:n,empty:s};return(o=t.selectionPredicates)[n]??(o[n]=[]),t.selectionPredicates[n].push(a),a});return e.selection?r(e.selection):If(e.test||e.filter,i=>i.selection?r(i.selection):i)}var $m=class extends Xf{map(t,r){let i=r.selections??[];if(t.params&&!wi(t)){let n=[];for(let o of t.params)Rm(o)?i.push(o):n.push(o);t.params=n}return r.selections=i,super.map(t,r)}mapUnit(t,r){let i=r.selections;if(!i||!i.length)return t;let n=(r.path??[]).concat(t.name),o=[];for(let s of i)if(!s.views||!s.views.length)o.push(s);else for(let a of s.views)(he(a)&&(a===t.name||n.includes(a))||K(a)&&a.map(l=>n.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&o.push(s);return o.length&&(t.params=o),t}};for(let e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){let t=$m.prototype[e];$m.prototype[e]=function(r,i){return t.call(this,r,n5e(r,i))}}function n5e(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Q3(e,t){t===void 0&&(t=q3(e.config));let r=l5e(e,t),{width:i,height:n}=e,o=u5e(r,{width:i,height:n,autosize:e.autosize},t);return{...r,...o?{autosize:o}:{}}}var o5e=new X3,s5e=new J3,a5e=new $m;function l5e(e,t={}){let r={config:t};return a5e.map(o5e.map(s5e.map(e,r),r),r)}function QY(e){return he(e)?{type:e}:e??{}}function u5e(e,t,r){let{width:i,height:n}=t,o=wi(e)||lc(e),s={};o?i=="container"&&n=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):n=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(ie(Q.containerSizeNonSingle("width")),i=void 0),n=="container"&&(ie(Q.containerSizeNonSingle("height")),n=void 0));let a={type:"pad",...s,...r?QY(r.autosize):{},...QY(e.autosize)};if(a.type==="fit"&&!o&&(ie(Q.FIT_NON_SINGLE),a.type="pad"),i=="container"&&!(a.type=="fit"||a.type=="fit-x")&&ie(Q.containerSizeNotCompatibleWithAutosize("width")),n=="container"&&!(a.type=="fit"||a.type=="fit-y")&&ie(Q.containerSizeNotCompatibleWithAutosize("height")),!Li(a,{type:"pad"}))return a}function eX(e){return["fit","fit-x","fit-y"].includes(e)}function tX(e){return e?`fit-${Uf(e)}`:"fit"}var c5e=["background","padding"];function wM(e,t){let r={};for(let i of c5e)e&&e[i]!==void 0&&(r[i]=Ni(e[i]));return t&&(r.params=e.params),r}var Ln=class e{constructor(t={},r={}){this.explicit=t,this.implicit=r}clone(){return new e(De(this.explicit),De(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return yt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:r,explicit:i}){r!==void 0&&this.set(t,r,i)}set(t,r,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=r,this}copyKeyFromSplit(t,{explicit:r,implicit:i}){r[t]!==void 0?this.set(t,r[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,r){r[t]!==void 0&&this.set(t,r[t],!0)}copyAll(t){for(let r of J(t.combine())){let i=t.getWithExplicit(r);this.setWithExplicit(r,i)}}};function Vs(e){return{explicit:!0,value:e}}function Pn(e){return{explicit:!1,value:e}}function e6(e){return(t,r,i,n)=>{let o=e(t.value,r.value);return o>0?t:o<0?r:Lm(t,r,i,n)}}function Lm(e,t,r,i){return e.explicit&&t.explicit&&ie(Q.mergeConflictingProperty(r,i,e.value,t.value)),e}function Bo(e,t,r,i,n=Lm){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Li(e.value,t.value)?e:n(e,t,r,i)}var t6=class extends Ln{constructor(t={},r={},i=!1){super(t,r),this.explicit=t,this.implicit=r,this.parseNothing=i}clone(){let t=super.clone();return t.parseNothing=this.parseNothing,t}};function uc(e){return ae(e,"url")}function Wd(e){return ae(e,"values")}function r6(e){return ae(e,"name")&&!uc(e)&&!Wd(e)&&!ja(e)}function ja(e){return e&&(SM(e)||CM(e)||Fy(e))}function SM(e){return ae(e,"sequence")}function CM(e){return ae(e,"sphere")}function Fy(e){return ae(e,"graticule")}var Ft;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Ft||(Ft={}));function kM({invalid:e,isPath:t}){switch(m3(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function rX(e){let{marks:t,scales:r}=kM(e);return t===r?Ft.Main:r==="include-invalid-values"?Ft.PreFilterInvalid:Ft.PostFilterInvalid}var Ve=class{constructor(t,r){this.debugName=r,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,r){if(this._children.includes(t)){ie(Q.ADD_SAME_CHILD_TWICE);return}r!==void 0?this._children.splice(r,0,t):this._children.push(t)}removeChild(t){let r=this._children.indexOf(t);return this._children.splice(r,1),r}remove(){let t=this._parent.removeChild(this);for(let r of this._children)r._parent=this._parent,this._parent.addChild(r,t++)}insertAsParentOf(t){let r=t.parent;r.removeChild(this),this.parent=r,t.parent=this}swapWithParent(){let t=this._parent,r=t.parent;for(let n of this._children)n.parent=t;this._children=[],t.removeChild(this);let i=t.parent.removeChild(t);this._parent=r,r.addChild(this,i),t.parent=this}},Wr=class extends Ve{clone(){let t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,r,i,n){super(t,r),this.type=i,this.refCounts=n,this._source=this._name=r,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${mR()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}};function EM(e){return e.as!==void 0}function iX(e){return`${e}_end`}var Gs=class e extends Ve{clone(){return new e(null,De(this.timeUnits))}constructor(t,r){super(t),this.timeUnits=r}static makeFromEncoding(t,r){let i=r.reduceFieldDef((n,o,s)=>{let{field:a,timeUnit:l}=o;if(l){let u;if(Ha(l)){if(Et(r)){let{mark:c,markDef:f,config:h}=r,p=Io({fieldDef:o,markDef:f,config:h});(tc(c)||p)&&(u={timeUnit:cr(l),field:a})}}else u={as:ge(o,{forAs:!0}),field:a,timeUnit:l};if(Et(r)){let{mark:c,markDef:f,config:h}=r,p=Io({fieldDef:o,markDef:f,config:h});tc(c)&&Mt(s)&&p!==.5&&(u.rectBandPosition=p)}u&&(n[Be(u)]=u)}return n},{});return ht(i)?null:new e(t,i)}static makeFromTransform(t,r){let{timeUnit:i,...n}={...r},o=cr(i),s={...n,timeUnit:o};return new e(t,{[Be(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(let r in t.timeUnits)this.timeUnits[r]||(this.timeUnits[r]=t.timeUnits[r]);for(let r of t.children)t.removeChild(r),r.parent=this;t.remove()}removeFormulas(t){let r={};for(let[i,n]of Mo(this.timeUnits)){let o=EM(n)?n.as:`${n.field}_end`;t.has(o)||(r[i]=n)}this.timeUnits=r}producedFields(){return new Set(ar(this.timeUnits).map(t=>EM(t)?t.as:iX(t.field)))}dependentFields(){return new Set(ar(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Be(this.timeUnits)}`}assemble(){let t=[];for(let r of ar(this.timeUnits)){let{rectBandPosition:i}=r,n=cr(r.timeUnit);if(EM(r)){let{field:o,as:s}=r,{unit:a,utc:l,...u}=n,c=[s,`${s}_end`];t.push({field:ci(o),type:"timeunit",...a?{units:bm(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...nX(c,i,n))}else if(r){let{field:o}=r,s=o.replaceAll("\\.","."),a=sX({timeUnit:n,field:s}),l=iX(s);t.push({type:"formula",expr:a,as:l}),t.push(...nX([s,l],i,n))}}return t}},Vd="offsetted_rect_start",Gd="offsetted_rect_end";function sX({timeUnit:e,field:t,reverse:r}){let{unit:i,utc:n}=e,o=PR(i),{part:s,step:a}=NR(o,e.step);return`${n?"utcOffset":"timeOffset"}('${s}', ${Bt(t)}, ${r?-a:a})`}function nX([e,t],r,i){if(r!==void 0&&r!==.5){let n=Bt(e),o=Bt(t);return[{type:"formula",expr:oX([sX({timeUnit:i,field:e,reverse:!0}),n],r+.5),as:`${e}_${Vd}`},{type:"formula",expr:oX([n,o],r+.5),as:`${e}_${Gd}`}]}return[]}function oX([e,t],r){return`${1-r} * ${e} + ${r} * ${t}`}var cc="_tuple_fields",AM=class{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}},f5e={defined:()=>!0,parse:(e,t,r)=>{let i=t.name,n=t.project??(t.project=new AM),o={},s={},a=new Set,l=(d,m)=>{let g=m==="visual"?d.channel:d.field,v=wt(`${i}_${g}`);for(let b=1;a.has(v);b++)v=wt(`${i}_${g}_${b}`);return a.add(v),{[m]:v}},u=t.type,c=e.config.selection[u],f=r.value!==void 0?ve(r.value):null,{fields:h,encodings:p}=me(r.select)?r.select:{};if(!h&&!p&&f){for(let d of f)if(me(d))for(let m of J(d))pV(m)?(p||(p=[])).push(m):u==="interval"?(ie(Q.INTERVAL_INITIALIZED_WITH_POS),p=c.encodings):(h??(h=[])).push(m)}!h&&!p&&(p=c.encodings,"fields"in c&&(h=c.fields));for(let d of p??[]){let m=e.fieldDef(d);if(m){let g=m.field;if(m.aggregate){ie(Q.cannotProjectAggregate(d,m.aggregate));continue}else if(!g){ie(Q.cannotProjectOnChannelWithoutField(d));continue}if(m.timeUnit&&!Ha(m.timeUnit)){g=e.vgField(d);let v={timeUnit:m.timeUnit,as:g,field:m.field};s[Be(v)]=v}if(!o[g]){let v=u==="interval"&&fi(d)&&Bi(e.getScaleComponent(d).get("type"))?"R":m.bin?"R-RE":"E",b={field:g,channel:d,type:v,index:n.items.length};b.signals={...l(b,"data"),...l(b,"visual")},n.items.push(o[g]=b),n.hasField[g]=o[g],n.hasSelectionId=n.hasSelectionId||g===un,z5(d)?(b.geoChannel=d,b.channel=B5(d),n.hasChannel[b.channel]=o[g]):n.hasChannel[d]=o[g]}}else ie(Q.cannotProjectOnChannelWithoutField(d))}for(let d of h??[]){if(n.hasField[d])continue;let m={type:"E",field:d,index:n.items.length};m.signals={...l(m,"data")},n.items.push(m),n.hasField[d]=m,n.hasSelectionId=n.hasSelectionId||d===un}f&&(t.init=f.map(d=>n.items.map(m=>me(d)?d[m.geoChannel||m.channel]!==void 0?d[m.geoChannel||m.channel]:d[m.field]:d))),ht(s)||(n.timeUnit=new Gs(null,s))},signals:(e,t,r)=>{let i=t.name+cc;return r.filter(o=>o.name===i).length>0||t.project.hasSelectionId?r:r.concat({name:i,value:t.project.items.map(TM)})}},aX=f5e;var n6="_curr",i6="anim_value",Pm="anim_clock",MM="eased_anim_clock",lX="min_extent",uX="max_range_extent",DM="last_tick_at",RM="is_playing",h5e=1/60*1e3,d5e=(e,t)=>[{name:MM,update:Pm},{name:`${e}_domain`,init:`domain('${t}')`},{name:lX,init:`extent(${e}_domain)[0]`},{name:uX,init:`extent(range('${t}'))[1]`},{name:i6,update:`invert('${t}', ${MM})`}],p5e={defined:e=>e.type==="point",topLevelSignals:(e,t,r)=>(zi(t)&&(r=r.concat([{name:Pm,init:"0",on:[{events:{type:"timer",throttle:h5e},update:`${RM} ? (${Pm} + (now() - ${DM}) > ${uX} ? 0 : ${Pm} + (now() - ${DM})) : ${Pm}`}]},{name:DM,init:"now()",on:[{events:[{signal:Pm},{signal:RM}],update:"now()"}]},{name:RM,init:"true"}])),r),signals:(e,t,r)=>{let i=t.name,n=i+cc,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=ar(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+fc):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`,u=`unit: ${Wa(e)}, `;if(t.project.hasSelectionId)u+=`${un}: ${s}[${de(un)}]`;else if(zi(t))u+=`fields: ${n}, values: [${i6} ? ${i6} : ${lX}]`;else{let c=o.items.map(f=>e.fieldDef(f.channel)?.bin?`[${s}[${de(e.vgField(f.channel,{}))}], ${s}[${de(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${s}[${de(f.field)}]`).join(", ");u+=`fields: ${n}, values: [${c}]`}if(zi(t))return r.concat(d5e(t.name,e.scaleName(os)),[{name:i+In,on:[{events:[{signal:MM},{signal:i6}],update:`{${u}}`,force:!0}]}]);{let c=t.events;return r.concat([{name:i+In,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}},cX=p5e;function TM(e){let{signals:t,hasLegend:r,index:i,...n}=e;return n.field=ci(n.field),n}function hc(e,t=!0,r=Ir){if(K(e)){let i=e.map(n=>hc(n,t,r));return t?`[${i.join(", ")}]`:i}else if(Us(e))return r(t?za(e):VV(e));return t?r(St(e)):e}function fX(e,t){for(let r of ar(e.component.selection??{})){let i=r.name,n=`${i}${In}, ${r.resolve==="global"?"true":`{unit: ${Wa(e)}}`}`;for(let o of Im)o.defined(r)&&(o.signals&&(t=o.signals(e,r,t)),o.modifyExpr&&(n=o.modifyExpr(e,r,n)));t.push({name:i+vX,on:[{events:{signal:r.name+In},update:`modify(${de(r.name+Va)}, ${n})`}]})}return OM(t)}function hX(e,t){if(e.component.selection&&J(e.component.selection).length){let r=de(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:En("pointermove","scope"),update:`isTuple(facet) ? facet : group(${r}).datum`}]})}return OM(t)}function dX(e,t){let r=!1;for(let i of ar(e.component.selection??{})){let n=i.name,o=de(n+Va);if(t.filter(a=>a.name===n).length===0){let a=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${o6}(${o}, ${de(a)}${l}`})}r=!0;for(let a of Im)a.defined(i)&&a.topLevelSignals&&(t=a.topLevelSignals(e,i,t))}return r&&t.filter(n=>n.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),OM(t)}function pX(e,t){let r=[],i=[],n=Wa(e,{escape:!1});for(let o of ar(e.component.selection??{})){let s={name:o.name+Va};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:un}}]),o.init){let l=o.project.items.map(TM);s.values=o.project.hasSelectionId?o.init.map(u=>({unit:n,[un]:hc(u,!1)[0]})):o.init.map(u=>({unit:n,fields:l,values:hc(u,!1)}))}if([...r,...t].filter(l=>l.name===o.name+Va).length||r.push(s),zi(o)&&t.length){let l=e.lookupDataSource(e.getDataName(Ft.Main)),u=t.find(f=>f.name===l),c=u.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){u.transform=u.transform.filter(h=>h!==c);let f={name:u.name+n6,source:u.name,transform:[c]};i.push(f)}}}return r.concat(t,i)}function FM(e,t){for(let r of ar(e.component.selection??{}))for(let i of Im)i.defined(r)&&i.marks&&(t=i.marks(e,r,t));return t}function mX(e,t){for(let r of e.children)Et(r)&&(t=FM(r,t));return t}function gX(e,t,r,i){let n=s6(e,t.param,t);return{signal:Bi(r.get("type"))&&K(i)&&i[0]>i[1]?`isValid(${n}) && reverse(${n})`:n}}function OM(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}var m5e={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{let r=t.scales=[];for(let i of t.project.items){let n=i.channel;if(!fi(n))continue;let o=e.getScaleComponent(n),s=o?o.get("type"):void 0;if(s=="sequential"&&ie(Q.SEQUENTIAL_SCALE_DEPRECATED),!o||!Bi(s)){ie(Q.SCALE_BINDINGS_CONTINUOUS);continue}o.set("selectionExtent",{param:t.name,field:i.field},!0),r.push(i)}},topLevelSignals:(e,t,r)=>{let i=t.scales.filter(s=>r.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||$M(e)||i.length===0)return r;let n=r.find(s=>s.name===t.name),o=n.update;if(o.includes(o6))n.update=`{${i.map(s=>`${de(ci(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(let s of i){let a=`${de(ci(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}n.update=o}return r.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,r)=>{if(e.parent&&!$M(e))for(let i of t.scales){let n=r.find(o=>o.name===i.signals.data);n.push="outer",delete n.value,delete n.update}return r}},ds=m5e;function Oy(e,t){return`domain(${de(e.scaleName(t))})`}function $M(e){return e.parent&&Ys(e.parent)&&(!e.parent.parent||$M(e.parent.parent))}var fc="_brush",bX="_scale_trigger",$y="geo_interval_init_tick",yX="_init",g5e="_center",v5e={defined:e=>e.type==="interval",parse:(e,t,r)=>{var i;if(e.hasProjection){let n={...me(r.select)?r.select:{}};n.fields=[un],n.encodings||(n.encodings=r.value?J(r.value):[on,nn]),r.select={type:"interval",...n}}if(t.translate&&!ds.defined(t)){let n=`!event.item || event.item.mark.name !== ${de(t.name+fc)}`;for(let o of t.events){if(!o.between){ie(`${o} is not an ordered event stream for interval selections.`);continue}let s=ve((i=o.between[0]).filter??(i.filter=[]));s.includes(n)||s.push(n)}}},signals:(e,t,r)=>{let i=t.name,n=i+In,o=ar(t.project.hasChannel).filter(a=>a.channel===Rt||a.channel===lr),s=t.init?t.init[0]:null;if(r.push(...o.reduce((a,l)=>a.concat(b5e(e,t,l,s&&s[l.index])),[])),e.hasProjection){let a=de(e.projectionName()),l=e.projectionName()+g5e,{x:u,y:c}=t.project.hasChannel,f=u&&u.signals.visual,h=c&&c.signals.visual,p=u?s&&s[u.index]:`${l}[0]`,d=c?s&&s[c.index]:`${l}[1]`,m=S=>e.getSizeSignalRef(S).signal,g=`[[${f?f+"[0]":"0"}, ${h?h+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${h?h+"[1]":m("height")}]]`;s&&(r.unshift({name:i+yX,init:`[scale(${a}, [${u?p[0]:p}, ${c?d[0]:d}]), scale(${a}, [${u?p[1]:p}, ${c?d[1]:d}])]`}),(!u||!c)&&(r.find(_=>_.name===l)||r.unshift({name:l,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));let v=`intersect(${g}, {markname: ${de(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${Wa(e)}}`,y=`vlSelectionTuples(${v}, ${b})`,x=o.map(S=>S.signals.visual);return r.concat({name:n,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...s?[{signal:$y}]:[]],update:y}]})}else{if(!ds.defined(t)){let u=i+bX,c=o.map(f=>{let h=f.channel,{data:p,visual:d}=f.signals,m=de(e.scaleName(h)),g=e.getScaleComponent(h).get("type"),v=Bi(g)?"+":"";return`(!isArray(${p}) || (${v}invert(${m}, ${d})[0] === ${v}${p}[0] && ${v}invert(${m}, ${d})[1] === ${v}${p}[1]))`});c.length&&r.push({name:u,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}let a=o.map(u=>u.signals.data),l=`unit: ${Wa(e)}, fields: ${i+cc}, values`;return r.concat({name:n,...s?{init:`{${l}: ${hc(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,r)=>(Et(e)&&e.hasProjection&&t.init&&(r.filter(n=>n.name===$y).length||r.unshift({name:$y,value:null,on:[{events:"timer{1}",update:`${$y} === null ? {} : ${$y}`}]})),r),marks:(e,t,r)=>{let i=t.name,{x:n,y:o}=t.project.hasChannel,s=n?.signals.visual,a=o?.signals.visual,l=`data(${de(t.name+Va)})`;if(ds.defined(t)||!n&&!o)return r;let u={x:n!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:n!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(let g of J(u))u[g]=[{test:`${l}.length && ${l}[0].unit === ${Wa(e)}`,...u[g]},{value:0}];let{fill:c,fillOpacity:f,cursor:h,...p}=t.mark,d=J(p).reduce((g,v)=>(g[v]=[{test:[n!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:p[v]},{value:null}],g),{}),m=h??(t.translate?"move":null);return[{name:`${i+fc}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:u}},...r,{name:i+fc,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...u,...d}}}]}},xX=v5e;function b5e(e,t,r,i){let n=!e.hasProjection,o=r.channel,s=r.signals.visual,a=de(n?e.scaleName(o):e.projectionName()),l=h=>`scale(${a}, ${h})`,u=e.getSizeSignalRef(o===Rt?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((h,p)=>[...h,{events:p.between[0],update:`[${c}, ${c}]`},{events:p,update:`[${s}[0], clamp(${c}, 0, ${u})]`}],[]);if(n){let h=r.signals.data,p=ds.defined(t),d=e.getScaleComponent(o),m=d?d.get("type"):void 0,g=i?{init:hc(i,!0,l)}:{value:[]};return f.push({events:{signal:t.name+bX},update:Bi(m)?`[${l(`${h}[0]`)}, ${l(`${h}[1]`)}]`:"[0, 0]"}),p?[{name:h,on:[]}]:[{name:s,...g,on:f},{name:h,...i?{init:hc(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{let h=o===Rt?0:1,p=t.name+yX,d=i?{init:`[${p}[0][${h}], ${p}[1][${h}]]`}:{value:[]};return[{name:s,...d,on:f}]}}function Xs({model:e,channelDef:t,vgChannel:r,invalidValueRef:i,mainRefFn:n}){let o=Hl(t)&&t.condition,s=[];o&&(s=ve(o).map(u=>{let c=n(u);if(PG(u)){let{param:f,empty:h}=u;return{test:a6(e,{param:f,empty:h}),...c}}else return{test:Yd(e,u.test),...c}})),i!==void 0&&s.push(i);let a=n(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[r]:s}:s.length===1?{[r]:s[0]}:{}}function Kf(e,t="text"){let r=e.encoding[t];return Xs({model:e,channelDef:r,vgChannel:t,mainRefFn:i=>Nm(i,e.config),invalidValueRef:void 0})}function Nm(e,t,r="datum"){if(e){if(hi(e))return bt(e.value);if(Xe(e)){let{format:i,formatType:n}=Tm(e);return km({fieldOrDatumDef:e,format:i,formatType:n,expr:r,config:t})}}}function Bm(e,t={}){let{encoding:r,markDef:i,config:n,stack:o}=e,s=r.tooltip;if(K(s))return{tooltip:LM({tooltip:s},o,n,t)};{let a=t.reactiveGeom?"datum.datum":"datum";return Xs({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{let c=Nm(u,n,a);if(c)return c;if(u===null)return;let f=dt("tooltip",i,n);if(f===!0&&(f={content:"encoding"}),he(f))return{value:f};if(me(f))return Ae(f)?f:f.content==="encoding"?LM(r,o,n,t):{signal:a}},invalidValueRef:void 0})}}function PM(e,t,r,{reactiveGeom:i}={}){let n={...r,...r.tooltipFormat},o=new Set,s=i?"datum.datum":"datum",a=[];function l(c,f){let h=cs(f),p=Rr(c)?c:{...c,type:e[h].type},d=p.title||wy(p,n),m=ve(d).join(", ").replaceAll(/"/g,'\\"'),g;if(Mt(f)){let v=f==="x"?"x2":"y2",b=_i(e[v]);if(ur(p.bin)&&b){let y=ge(p,{expr:s}),x=ge(b,{expr:s}),{format:S,formatType:_}=Tm(p);g=jd(y,x,S,_,n),o.add(v)}}if((Mt(f)||f===rn||f===Tn)&&t&&t.fieldChannel===f&&t.offset==="normalize"){let{format:v,formatType:b}=Tm(p);g=km({fieldOrDatumDef:p,format:v,formatType:b,expr:s,config:n,normalizeStack:!0}).signal}g??(g=Nm(p,n,s).signal),a.push({channel:f,key:m,value:g})}Cy(e,(c,f)=>{ce(c)?l(c,f):Am(c)&&l(c.condition,f)});let u={};for(let{channel:c,key:f,value:h}of a)!o.has(c)&&!u[f]&&(u[f]=h);return u}function LM(e,t,r,{reactiveGeom:i}={}){let n=PM(e,t,r,{reactiveGeom:i}),o=Mo(n).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function IM(e){let{markDef:t,config:r}=e,i=dt("aria",t,r);return i===!1?{}:{...i?{aria:i}:{},...y5e(e),...x5e(e)}}function y5e(e){let{mark:t,markDef:r,config:i}=e;if(i.aria===!1)return{};let n=dt("ariaRoleDescription",r,i);return n!=null?{ariaRoleDescription:{value:n}}:_e(LV,t)?{}:{ariaRoleDescription:{value:t}}}function x5e(e){let{encoding:t,markDef:r,config:i,stack:n}=e,o=t.description;if(o)return Xs({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>Nm(l,e.config),invalidValueRef:void 0});let s=dt("description",r,i);if(s!=null)return{description:bt(s)};if(i.aria===!1)return{};let a=PM(t,n,i);if(!ht(a))return{description:{signal:Mo(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function fr(e,t,r={}){let{markDef:i,encoding:n,config:o}=t,{vgChannel:s}=r,{defaultRef:a,defaultValue:l}=r,u=n[e];a===void 0&&(l??(l=dt(e,i,o,{vgChannel:s,ignoreVgConfig:!Hl(u)})),l!==void 0&&(a=bt(l)));let c={markDef:i,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=v3({...c,scaleChannel:e,channelDef:u});return Xs({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:f,mainRefFn:p=>yy({...c,channel:e,channelDef:p,stack:null,defaultRef:a})})}function zm(e,t={filled:void 0}){let{markDef:r,encoding:i,config:n}=e,{type:o}=r,s=t.filled??dt("filled",r,n),a=We(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=dt(s===!0?"color":void 0,r,n,{vgChannel:"fill"})??n.mark[s===!0&&"color"]??a,u=dt(s===!1?"color":void 0,r,n,{vgChannel:"stroke"})??n.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...l?{fill:bt(l)}:{},...u?{stroke:bt(u)}:{}};return r.color&&(s?r.fill:r.stroke)&&ie(Q.droppingColor("property",{fill:"fill"in r,stroke:"stroke"in r})),{...f,...fr("color",e,{vgChannel:c,defaultValue:s?l:u}),...fr("fill",e,{defaultValue:i.fill?l:void 0}),...fr("stroke",e,{defaultValue:i.stroke?u:void 0})}}function _X(e){let{encoding:t,mark:r}=e,i=t.order;return!Fn(r)&&hi(i)?Xs({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:n=>bt(n.value),invalidValueRef:void 0}):{}}function dc({channel:e,markDef:t,encoding:r={},model:i,bandPosition:n}){let o=`${e}Offset`,s=t[o],a=r[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:yy({channel:o,channelDef:a,markDef:t,config:i?.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:bt(s),bandPosition:n})};let l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Mr(e,t,{defaultPos:r,vgChannel:i}){let{encoding:n,markDef:o,config:s,stack:a}=t,l=n[e],u=n[Ii(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:h,offsetType:p}=dc({channel:e,markDef:o,encoding:n,model:t,bandPosition:.5}),d=Ly({model:t,defaultPos:r,channel:e,scaleName:c,scale:f}),m=!l&&Mt(e)&&(n.latitude||n.longitude)?{field:t.getName(e)}:_5e({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:h,defaultRef:d,bandPosition:p==="encoding"?0:void 0});return m?{[i||e]:m}:void 0}function _5e(e){let{channel:t,channelDef:r,scaleName:i,stack:n,offset:o,markDef:s}=e;if(Xe(r)&&n&&t===n.fieldChannel){if(ce(r)){let a=r.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return Sm({scaleName:i,fieldOrDatumDef:r,startSuffix:"start",bandPosition:a,offset:o})}return Il(r,i,{suffix:"end"},{offset:o})}return Cm(e)}function Ly({model:e,defaultPos:t,channel:r,scaleName:i,scale:n}){let{markDef:o,config:s}=e;return()=>{let a=cs(r),l=zs(r),u=dt(r,o,s,{vgChannel:l});if(u!==void 0)return qd(r,u);switch(t){case"zeroOrMin":return wX({scaleName:i,scale:n,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return wX({scaleName:i,scale:n,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[Dr(r)],mult:.5}}}}function wX({mainChannel:e,config:t,...r}){let i=g3(r),{mode:n}=r;if(i)return i;switch(e){case"radius":{if(n==="zeroOrMin")return{value:0};let{widthSignal:o,heightSignal:s}=n.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return n==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return n==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return n==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}var w5e={left:"x",center:"xc",right:"x2"},S5e={top:"y",middle:"yc",bottom:"y2"};function l6(e,t,r,i="middle"){if(e==="radius"||e==="theta")return zs(e);let n=e==="x"?"align":"baseline",o=dt(n,t,r),s;return Ae(o)?(ie(Q.rangeMarkAlignmentCannotBeExpression(n)),s=void 0):s=o,e==="x"?w5e[s||(i==="top"?"left":"center")]:S5e[s||i]}function Zf(e,t,{defaultPos:r,defaultPos2:i,range:n}){return n?Py(e,t,{defaultPos:r,defaultPos2:i}):Mr(e,t,{defaultPos:r})}function Py(e,t,{defaultPos:r,defaultPos2:i}){let{markDef:n,config:o}=t,s=Ii(e),a=Dr(e),l=C5e(t,i,s),u=l[a]?l6(e,n,o):zs(e);return{...Mr(e,t,{defaultPos:r,vgChannel:u}),...l}}function C5e(e,t,r){let{encoding:i,mark:n,markDef:o,stack:s,config:a}=e,l=cs(r),u=Dr(r),c=zs(r),f=i[l],h=e.scaleName(l),p=e.getScaleComponent(l),{offset:d}=r in i||r in o?dc({channel:r,markDef:o,encoding:i,model:e}):dc({channel:l,markDef:o,encoding:i,model:e});if(!f&&(r==="x2"||r==="y2")&&(i.latitude||i.longitude)){let g=Dr(r),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[c]:{field:e.getName(r)}}}let m=k5e({channel:r,channelDef:f,channel2Def:i[r],markDef:o,config:a,scaleName:h,scale:p,stack:s,offset:d,defaultRef:void 0});return m!==void 0?{[c]:m}:u6(r,o)||u6(r,{[r]:K5(r,o,a.style),[u]:K5(u,o,a.style)})||u6(r,a[n])||u6(r,a.mark)||{[c]:Ly({model:e,defaultPos:t,channel:r,scaleName:h,scale:p})()}}function k5e({channel:e,channelDef:t,channel2Def:r,markDef:i,config:n,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Xe(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Il(t,o,{suffix:"start"},{offset:l}):Cm({channel:e,channelDef:r,scaleName:o,scale:s,stack:a,markDef:i,config:n,offset:l,defaultRef:u})}function u6(e,t){let r=Dr(e),i=zs(e);if(t[i]!==void 0)return{[i]:qd(e,t[i])};if(t[e]!==void 0)return{[i]:qd(e,t[e])};if(t[r]){let n=t[r];if(Pl(n))ie(Q.relativeBandSizeNotSupported(r));else return{[r]:qd(e,n)}}}function Nn(e,t){let{config:r,encoding:i,markDef:n}=e,o=n.type,s=Ii(t),a=Dr(t),l=i[t],u=i[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,h=n.orient,p=i[a]??i.size??dt("size",n,r,{vgChannel:a}),d=_R(t),m=o==="bar"&&(t==="x"?h==="vertical":h==="horizontal")||o==="tick"&&(t==="y"?h==="vertical":h==="horizontal");return ce(l)&&(vt(l.bin)||ur(l.bin)||l.timeUnit&&!u)&&!(p&&!Pl(p))&&!i[d]&&!Yt(f)?T5e({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Xe(l)&&Yt(f)||m)&&!u?A5e(l,t,e):Py(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function E5e(e,t,r,i,n,o,s){if(Pl(n))if(r){let l=r.get("type");if(l==="band"){let u=`bandwidth('${t}')`;n.band!==1&&(u=`${n.band} * ${u}`);let c=co("minBandSize",{type:s},i);return{signal:c?`max(${uo(c)}, ${u})`:u}}else n.band!==1&&(ie(Q.cannotUseRelativeBandSizeWithNonBandScale(l)),n=void 0)}else return{mult:n.band,field:{group:e}};else{if(Ae(n))return n;if(n)return{value:n}}if(r){let l=r.get("range");if(Po(l)&&ut(l.step))return{value:l.step-2}}if(!o){let{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:f}=i.scale,h=yt(l,s==="tick"?f:s==="bar"?u:c);if(Ae(h))return{signal:`(1 - (${h.signal})) * ${e}`};if(ut(h))return{signal:`${1-h} * ${e}`}}return{value:Ry(i.view,e)-2}}function A5e(e,t,r){let{markDef:i,encoding:n,config:o,stack:s}=r,a=i.orient,l=r.scaleName(t),u=r.getScaleComponent(t),c=Dr(t),f=Ii(t),h=_R(t),p=r.scaleName(h),d=r.getScaleComponent(hm(t)),m=i.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x",g;(n.size||i.size)&&(m?g=fr("size",r,{vgChannel:c,defaultRef:bt(i.size)}):ie(Q.cannotApplySizeToNonOrientedMark(i.type)));let v=!!g,b=XR({channel:t,fieldDef:e,markDef:i,config:o,scaleType:(u||d)?.get("type"),useVlSizeChannel:m});g=g||{[c]:E5e(c,p||l,d||u,o,b,!!e,i.type)};let y=(u||d)?.get("type")==="band"&&Pl(b)&&!v?"top":"middle",x=l6(t,i,o,y),S=x==="xc"||x==="yc",{offset:_,offsetType:w}=dc({channel:t,markDef:i,encoding:n,model:r,bandPosition:S?.5:0}),k=Cm({channel:t,channelDef:e,markDef:i,config:o,scaleName:l,scale:u,stack:s,offset:_,defaultRef:Ly({model:r,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:S?w==="encoding"?0:.5:Ae(b)?{signal:`(1-${b})/2`}:Pl(b)?(1-b.band)/2:0});if(c)return{[x]:k,...g};{let A=zs(f),M=g[c],D=_?{...M,offset:_}:M;return{[x]:k,[A]:K(k)?[k[0],{...k[1],offset:D}]:{...k,offset:D}}}}function SX(e,t,r,i,n,o,s){if(vR(e))return 0;let a=e==="x"||e==="y2",l=a?-t/2:t/2;if(Ae(r)||Ae(n)||Ae(i)||o){let u=uo(r),c=uo(n),f=uo(i),h=uo(o),d=o?`(${s} < ${h} ? ${a?"":"-"}0.5 * (${h} - (${s})) : ${l})`:l,m=f?`${f} + `:"",g=u?`(${u} ? -1 : 1) * `:"",v=c?`(${c} + ${d})`:d;return{signal:m+g+v}}else return n=n||0,i+(r?-n-l:+n+l)}function T5e({fieldDef:e,fieldDef2:t,channel:r,model:i}){let{config:n,markDef:o,encoding:s}=i,a=i.getScaleComponent(r),l=i.scaleName(r),u=a?a.get("type"):void 0,c=a.get("reverse"),f=XR({channel:r,fieldDef:e,markDef:o,config:n,scaleType:u}),p=i.component.axes[r]?.[0]?.get("translate")??.5,d=Mt(r)?dt("binSpacing",o,n)??0:0,m=Ii(r),g=zs(r),v=zs(m),b=co("minBandSize",o,n),{offset:y}=dc({channel:r,markDef:o,encoding:s,model:i,bandPosition:0}),{offset:x}=dc({channel:m,markDef:o,encoding:s,model:i,bandPosition:0}),S=RG({fieldDef:e,scaleName:l}),_=SX(r,d,c,p,y,b,S),w=SX(m,d,c,p,x??y,b,S),k=Ae(f)?{signal:`(1-${f.signal})/2`}:Pl(f)?(1-f.band)/2:.5,A=Io({fieldDef:e,fieldDef2:t,markDef:o,config:n});if(vt(e.bin)||e.timeUnit){let M=e.timeUnit&&A!==.5;return{[v]:CX({fieldDef:e,scaleName:l,bandPosition:k,offset:w,useRectOffsetField:M}),[g]:CX({fieldDef:e,scaleName:l,bandPosition:Ae(k)?{signal:`1-${k.signal}`}:1-k,offset:_,useRectOffsetField:M})}}else if(ur(e.bin)){let M=Il(e,l,{},{offset:w});if(ce(t))return{[v]:M,[g]:Il(t,l,{},{offset:_})};if(Ia(e.bin)&&e.bin.step)return{[v]:M,[g]:{signal:`scale("${l}", ${ge(e,{expr:"datum"})} + ${e.bin.step})`,offset:_}}}ie(Q.channelRequiredForBinned(m))}function CX({fieldDef:e,scaleName:t,bandPosition:r,offset:i,useRectOffsetField:n}){return Sm({scaleName:t,fieldOrDatumDef:e,bandPosition:r,offset:i,...n?{startSuffix:Vd,endSuffix:Gd}:{}})}var D5e=new Set(["aria","width","height"]);function Sr(e,t){let{fill:r=void 0,stroke:i=void 0}=t.color==="include"?zm(e):{};return{...R5e(e.markDef,t),...kX("fill",r),...kX("stroke",i),...fr("opacity",e),...fr("fillOpacity",e),...fr("strokeOpacity",e),...fr("strokeWidth",e),...fr("strokeDash",e),..._X(e),...Bm(e),...Kf(e,"href"),...IM(e)}}function kX(e,t){return t?{[e]:t}:{}}function R5e(e,t){return $V.reduce((r,i)=>(!D5e.has(i)&&ae(e,i)&&t[i]!=="ignore"&&(r[i]=bt(e[i])),r),{})}function Hm(e){let{config:t,markDef:r}=e,i=new Set;if(e.forEachFieldDef((n,o)=>{let s;if(!fi(o)||!(s=e.getScaleType(o)))return;let a=qf(n.aggregate),l=wm({scaleChannel:o,markDef:r,config:t,scaleType:s,isCountAggregate:a});if(TG(l)){let u=e.vgField(o,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});u&&i.add(u)}}),i.size>0)return{defined:{signal:[...i].map(o=>Nd(o,!0)).join(" && ")}}}function c6(e,t){if(t!==void 0)return{[e]:bt(t)}}var NM="voronoi",M5e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(let r of t.events)r.markname=e.getName(NM)},marks:(e,t,r)=>{let{x:i,y:n}=t.project.hasChannel,o=e.mark;if(Fn(o))return ie(Q.nearestNotSupportForContinuous(o)),r;let s={name:e.getName(NM),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Bm(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!n?"datum.datum.x || 0":"0"},y:{expr:n||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},a=0,l=!1;return r.forEach((u,c)=>{let f=u.name??"";f===e.component.mark[0].name?a=c:f.includes(NM)&&(l=!0)}),l||r.splice(a+1,0,s),r}},f6=M5e;var F5e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Ay(e.bind),parse:(e,t,r)=>d6(t,r),topLevelSignals:(e,t,r)=>{let i=t.name,n=t.project,o=t.bind,s=t.init&&t.init[0],a=f6.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return n.items.forEach((l,u)=>{let c=wt(`${i}_${l.field}`);r.filter(h=>h.name===c).length||r.unshift({name:c,...s?{init:hc(s[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${de(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),r},signals:(e,t,r)=>{let i=t.name,n=t.project,o=r.find(u=>u.name===i+In),s=i+cc,a=n.items.map(u=>wt(`${i}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,r}},h6=F5e;var Um="_toggle",O5e={defined:e=>e.type==="point"&&!zi(e)&&!!e.toggle,signals:(e,t,r)=>r.concat({name:t.name+Um,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{let r=t.name+In,i=t.name+Um;return`${i} ? null : ${r}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Wa(e)}}, `)+`${i} ? ${r} : null`}},p6=O5e;var $5e={defined:e=>e.clear!==void 0&&e.clear!==!1&&!zi(e),parse:(e,t)=>{t.clear&&(t.clear=he(t.clear)?En(t.clear,"view"):t.clear)},topLevelSignals:(e,t,r)=>{if(h6.defined(t))for(let i of t.project.items){let n=r.findIndex(o=>o.name===wt(`${t.name}_${i.field}`));n!==-1&&r[n].on.push({events:t.clear,update:"null"})}return r},signals:(e,t,r)=>{function i(n,o){n!==-1&&r[n].on&&r[n].on.push({events:t.clear,update:o})}if(t.type==="interval")for(let n of t.project.items){let o=r.findIndex(s=>s.name===n.signals.visual);if(i(o,"[0, 0]"),o===-1){let s=r.findIndex(a=>a.name===n.signals.data);i(s,"null")}}else{let n=r.findIndex(o=>o.name===t.name+In);i(n,"null"),p6.defined(t)&&(n=r.findIndex(o=>o.name===t.name+Um),i(n,"false"))}return r}},EX=$5e;var AX={defined:e=>{let t=e.resolve==="global"&&e.bind&&Ay(e.bind),r=e.project.items.length===1&&e.project.items[0].field!==un;return t&&!r&&ie(Q.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&r},parse:(e,t,r)=>{let i=De(r);if(i.select=he(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},d6(t,i),me(r.select)&&(r.select.on||r.select.clear)){let s='event.item && indexof(event.item.mark.role, "legend") < 0';for(let a of t.events)a.filter=ve(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}let n=H3(t.bind)?t.bind.legend:"click",o=he(n)?En(n,"view"):ve(n);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,r)=>{let i=t.name,n=H3(t.bind)&&t.bind.legend,o=s=>a=>{let l=De(a);return l.markname=s,l};for(let s of t.project.items){if(!s.hasLegend)continue;let a=`${wt(s.field)}_legend`,l=`${i}_${a}`;if(r.filter(c=>c.name===l).length===0){let c=n.merge.map(o(`${a}_symbols`)).concat(n.merge.map(o(`${a}_labels`))).concat(n.merge.map(o(`${a}_entries`)));r.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:n.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return r},signals:(e,t,r)=>{let i=t.name,n=t.project,o=r.find(h=>h.name===i+In),s=i+cc,a=n.items.filter(h=>h.hasLegend).map(h=>wt(`${i}_${wt(h.field)}_legend`)),u=`${a.map(h=>`${h} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(h=>({signal:h})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);let c=r.find(h=>h.name===i+Um),f=H3(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),r}},TX=AX;function DX(e,t,r){let i=e.fieldDef(t)?.field;for(let n of ar(e.component.selection??{})){let o=n.project.hasField[i]??n.project.hasChannel[t];if(o&&AX.defined(n)){let s=r.get("selections")??[];s.push(n.name),r.set("selections",s,!1),o.hasLegend=!0}}}var MX="_translate_anchor",FX="_translate_delta",L5e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,r)=>{let i=t.name,n=ds.defined(t),o=i+MX,{x:s,y:a}=t.project.hasChannel,l=En(t.translate,"scope");return n||(l=l.map(u=>(u.between[0].markname=i+fc,u))),r.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${n?Oy(e,Rt):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${n?Oy(e,lr):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+FX,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&RX(e,t,s,"width",r),a!==void 0&&RX(e,t,a,"height",r),r}},OX=L5e;function RX(e,t,r,i,n){let o=t.name,s=o+MX,a=o+FX,l=r.channel,u=ds.defined(t),c=n.find(S=>S.name===r.signals[u?"data":"visual"]),f=e.getSizeSignalRef(i).signal,h=e.getScaleComponent(l),p=h&&h.get("type"),d=h&&h.get("reverse"),m=u?l===Rt?d?"":"-":d?"-":"":"",g=`${s}.extent_${l}`,v=`${m}${a}.${l} / ${u?`${f}`:`span(${g})`}`,b=!u||!h?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",y=u?p==="pow"?`, ${h.get("exponent")??1}`:p==="symlog"?`, ${h.get("constant")??1}`:"":"",x=`${b}(${g}, ${v}${y})`;c.on.push({events:{signal:a},update:u?x:`clampRange(${x}, 0, ${f})`})}var LX="_zoom_anchor",PX="_zoom_delta",P5e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,r)=>{let i=t.name,n=ds.defined(t),o=i+PX,{x:s,y:a}=t.project.hasChannel,l=de(e.scaleName(Rt)),u=de(e.scaleName(lr)),c=En(t.zoom,"scope");return n||(c=c.map(f=>(f.markname=i+fc,f))),r.push({name:i+LX,on:[{events:c,update:n?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&$X(e,t,s,"width",r),a!==void 0&&$X(e,t,a,"height",r),r}},IX=P5e;function $X(e,t,r,i,n){let o=t.name,s=r.channel,a=ds.defined(t),l=n.find(b=>b.name===r.signals[a?"data":"visual"]),u=e.getSizeSignalRef(i).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),h=a?Oy(e,s):l.name,p=o+PX,d=`${o}${LX}.${s}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",v=`${m}(${h}, ${d}, ${p}${g})`;l.on.push({events:{signal:p},update:a?v:`clampRange(${v}, 0, ${u})`})}var Va="_store",In="_tuple",vX="_modify";var o6="vlSelectionResolve",Im=[cX,xX,aX,p6,h6,ds,TX,EX,OX,IX,f6];function I5e(e){let t=e.parent;for(;t&&!Zr(t);)t=t.parent;return t}function Wa(e,{escape:t}={escape:!0}){let r=t?de(e.name):e.name,i=I5e(e);if(i){let{facet:n}=i;for(let o of Pi)n[o]&&(r+=` + '__facet_${o}_' + (facet[${de(i.vgField(o))}])`)}return r}function Iy(e){return ar(e.component.selection??{}).reduce((t,r)=>t||r.project.hasSelectionId,!1)}function d6(e,t){(he(t.select)||!t.select.on)&&delete e.events,(he(t.select)||!t.select.clear)&&delete e.clear,(he(t.select)||!t.select.toggle)&&delete e.toggle}function zi(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}var N5e="RawCode",B5e="Literal",z5e="Property",H5e="Identifier",U5e="ArrayExpression",q5e="BinaryExpression",j5e="CallExpression",W5e="ConditionalExpression",V5e="LogicalExpression",G5e="MemberExpression",Y5e="ObjectExpression",X5e="UnaryExpression";function Ga(e){this.type=e}Ga.prototype.visit=function(e){let t,r,i;if(e(this))return 1;for(t=K5e(this),r=0,i=t.length;r<i;++r)if(t[r].visit(e))return 1};function K5e(e){switch(e.type){case U5e:return e.elements;case q5e:case V5e:return[e.left,e.right];case j5e:return[e.callee].concat(e.arguments);case W5e:return[e.test,e.consequent,e.alternate];case G5e:return[e.object,e.property];case Y5e:return e.properties;case z5e:return[e.key,e.value];case X5e:return[e.argument];case H5e:case B5e:case N5e:default:return[]}}var Wl,Ue,se,Bn,Xt,v6=1,Uy=2,Xd=3,Jf=4,b6=5,Zd=6,zo=7,qy=8,Z5e=9;Wl={};Wl[v6]="Boolean";Wl[Uy]="<end>";Wl[Xd]="Identifier";Wl[Jf]="Keyword";Wl[b6]="Null";Wl[Zd]="Numeric";Wl[zo]="Punctuator";Wl[qy]="String";Wl[Z5e]="RegularExpression";var J5e="ArrayExpression",Q5e="BinaryExpression",e3e="CallExpression",t3e="ConditionalExpression",WX="Identifier",r3e="Literal",i3e="LogicalExpression",n3e="MemberExpression",o3e="ObjectExpression",s3e="Property",a3e="UnaryExpression",Hi="Unexpected token %0",l3e="Unexpected number",u3e="Unexpected string",c3e="Unexpected identifier",f3e="Unexpected reserved word",h3e="Unexpected end of input",UM="Invalid regular expression",BM="Invalid regular expression: missing /",VX="Octal literals are not allowed in strict mode.",d3e="Duplicate data property in object literal not allowed in strict mode",cn="ILLEGAL",zy="Disabled.",p3e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),m3e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function y6(e,t){if(!e)throw new Error("ASSERT: "+t)}function pc(e){return e>=48&&e<=57}function jM(e){return"0123456789abcdefABCDEF".includes(e)}function By(e){return"01234567".includes(e)}function g3e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Hy(e){return e===10||e===13||e===8232||e===8233}function jy(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&p3e.test(String.fromCharCode(e))}function g6(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&m3e.test(String.fromCharCode(e))}var v3e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function GX(){for(;se<Bn;){let e=Ue.charCodeAt(se);if(g3e(e)||Hy(e))++se;else break}}function qM(e){var t,r,i,n=0;for(r=e==="u"?4:2,t=0;t<r;++t)se<Bn&&jM(Ue[se])?(i=Ue[se++],n=n*16+"0123456789abcdef".indexOf(i.toLowerCase())):zt({},Hi,cn);return String.fromCharCode(n)}function b3e(){var e,t,r,i;for(e=Ue[se],t=0,e==="}"&&zt({},Hi,cn);se<Bn&&(e=Ue[se++],!!jM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&zt({},Hi,cn),t<=65535?String.fromCharCode(t):(r=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(r,i))}function YX(){var e,t;for(e=Ue.charCodeAt(se++),t=String.fromCharCode(e),e===92&&(Ue.charCodeAt(se)!==117&&zt({},Hi,cn),++se,e=qM("u"),(!e||e==="\\"||!jy(e.charCodeAt(0)))&&zt({},Hi,cn),t=e);se<Bn&&(e=Ue.charCodeAt(se),!!g6(e));)++se,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ue.charCodeAt(se)!==117&&zt({},Hi,cn),++se,e=qM("u"),(!e||e==="\\"||!g6(e.charCodeAt(0)))&&zt({},Hi,cn),t+=e);return t}function y3e(){var e,t;for(e=se++;se<Bn;){if(t=Ue.charCodeAt(se),t===92)return se=e,YX();if(g6(t))++se;else break}return Ue.slice(e,se)}function x3e(){var e,t,r;return e=se,t=Ue.charCodeAt(se)===92?YX():y3e(),t.length===1?r=Xd:v3e.hasOwnProperty(t)?r=Jf:t==="null"?r=b6:t==="true"||t==="false"?r=v6:r=Xd,{type:r,value:t,start:e,end:se}}function zM(){var e=se,t=Ue.charCodeAt(se),r,i=Ue[se],n,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++se,{type:zo,value:String.fromCharCode(t),start:e,end:se};default:if(r=Ue.charCodeAt(se+1),r===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return se+=2,{type:zo,value:String.fromCharCode(t)+String.fromCharCode(r),start:e,end:se};case 33:case 61:return se+=2,Ue.charCodeAt(se)===61&&++se,{type:zo,value:Ue.slice(e,se),start:e,end:se}}}if(s=Ue.substr(se,4),s===">>>=")return se+=4,{type:zo,value:s,start:e,end:se};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return se+=3,{type:zo,value:o,start:e,end:se};if(n=o.substr(0,2),i===n[1]&&"+-<>&|".includes(i)||n==="=>")return se+=2,{type:zo,value:n,start:e,end:se};if(n==="//"&&zt({},Hi,cn),"<>=!+-*%&|^/".includes(i))return++se,{type:zo,value:i,start:e,end:se};zt({},Hi,cn)}function _3e(e){let t="";for(;se<Bn&&jM(Ue[se]);)t+=Ue[se++];return t.length===0&&zt({},Hi,cn),jy(Ue.charCodeAt(se))&&zt({},Hi,cn),{type:Zd,value:parseInt("0x"+t,16),start:e,end:se}}function w3e(e){let t="0"+Ue[se++];for(;se<Bn&&By(Ue[se]);)t+=Ue[se++];return(jy(Ue.charCodeAt(se))||pc(Ue.charCodeAt(se)))&&zt({},Hi,cn),{type:Zd,value:parseInt(t,8),octal:!0,start:e,end:se}}function NX(){var e,t,r;if(r=Ue[se],y6(pc(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),t=se,e="",r!=="."){if(e=Ue[se++],r=Ue[se],e==="0"){if(r==="x"||r==="X")return++se,_3e(t);if(By(r))return w3e(t);r&&pc(r.charCodeAt(0))&&zt({},Hi,cn)}for(;pc(Ue.charCodeAt(se));)e+=Ue[se++];r=Ue[se]}if(r==="."){for(e+=Ue[se++];pc(Ue.charCodeAt(se));)e+=Ue[se++];r=Ue[se]}if(r==="e"||r==="E")if(e+=Ue[se++],r=Ue[se],(r==="+"||r==="-")&&(e+=Ue[se++]),pc(Ue.charCodeAt(se)))for(;pc(Ue.charCodeAt(se));)e+=Ue[se++];else zt({},Hi,cn);return jy(Ue.charCodeAt(se))&&zt({},Hi,cn),{type:Zd,value:parseFloat(e),start:t,end:se}}function S3e(){var e="",t,r,i,n,o=!1;for(t=Ue[se],y6(t==="'"||t==='"',"String literal must starts with a quote"),r=se,++se;se<Bn;)if(i=Ue[se++],i===t){t="";break}else if(i==="\\")if(i=Ue[se++],!i||!Hy(i.charCodeAt(0)))switch(i){case"u":case"x":Ue[se]==="{"?(++se,e+=b3e()):e+=qM(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:By(i)?(n="01234567".indexOf(i),n!==0&&(o=!0),se<Bn&&By(Ue[se])&&(o=!0,n=n*8+"01234567".indexOf(Ue[se++]),"0123".includes(i)&&se<Bn&&By(Ue[se])&&(n=n*8+"01234567".indexOf(Ue[se++]))),e+=String.fromCharCode(n)):e+=i;break}else i==="\r"&&Ue[se]===`
`&&++se;else{if(Hy(i.charCodeAt(0)))break;e+=i}return t!==""&&zt({},Hi,cn),{type:qy,value:e,octal:o,start:r,end:se}}function C3e(e,t){let r=e;t.includes("u")&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,n)=>{if(parseInt(n,16)<=1114111)return"x";zt({},UM)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(r)}catch{zt({},UM)}try{return new RegExp(e,t)}catch{return null}}function k3e(){var e,t,r,i,n;for(e=Ue[se],y6(e==="/","Regular expression literal must start with a slash"),t=Ue[se++],r=!1,i=!1;se<Bn;)if(e=Ue[se++],t+=e,e==="\\")e=Ue[se++],Hy(e.charCodeAt(0))&&zt({},BM),t+=e;else if(Hy(e.charCodeAt(0)))zt({},BM);else if(r)e==="]"&&(r=!1);else if(e==="/"){i=!0;break}else e==="["&&(r=!0);return i||zt({},BM),n=t.substr(1,t.length-2),{value:n,literal:t}}function E3e(){var e,t,r;for(t="",r="";se<Bn&&(e=Ue[se],!!g6(e.charCodeAt(0)));)++se,e==="\\"&&se<Bn?zt({},Hi,cn):(r+=e,t+=e);return r.search(/[^gimuy]/g)>=0&&zt({},UM,r),{value:r,literal:t}}function A3e(){var e,t,r,i;return Xt=null,GX(),e=se,t=k3e(),r=E3e(),i=C3e(t.value,r.value),{literal:t.literal+r.literal,value:i,regex:{pattern:t.value,flags:r.value},start:e,end:se}}function T3e(e){return e.type===Xd||e.type===Jf||e.type===v6||e.type===b6}function XX(){if(GX(),se>=Bn)return{type:Uy,start:se,end:se};let e=Ue.charCodeAt(se);return jy(e)?x3e():e===40||e===41||e===59?zM():e===39||e===34?S3e():e===46?pc(Ue.charCodeAt(se+1))?NX():zM():pc(e)?NX():zM()}function Ho(){let e=Xt;return se=e.end,Xt=XX(),se=e.end,e}function KX(){let e=se;Xt=XX(),se=e}function D3e(e){let t=new Ga(J5e);return t.elements=e,t}function BX(e,t,r){let i=new Ga(e==="||"||e==="&&"?i3e:Q5e);return i.operator=e,i.left=t,i.right=r,i}function R3e(e,t){let r=new Ga(e3e);return r.callee=e,r.arguments=t,r}function M3e(e,t,r){let i=new Ga(t3e);return i.test=e,i.consequent=t,i.alternate=r,i}function WM(e){let t=new Ga(WX);return t.name=e,t}function Ny(e){let t=new Ga(r3e);return t.value=e.value,t.raw=Ue.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function zX(e,t,r){let i=new Ga(n3e);return i.computed=e==="[",i.object=t,i.property=r,i.computed||(r.member=!0),i}function F3e(e){let t=new Ga(o3e);return t.properties=e,t}function HX(e,t,r){let i=new Ga(s3e);return i.key=t,i.value=r,i.kind=e,i}function O3e(e,t){let r=new Ga(a3e);return r.operator=e,r.argument=t,r.prefix=!0,r}function zt(e,t){var r,i=Array.prototype.slice.call(arguments,2),n=t.replace(/%(\d)/g,(o,s)=>(y6(s<i.length,"Message reference must be in range"),i[s]));throw r=new Error(n),r.index=se,r.description=n,r}function x6(e){e.type===Uy&&zt(e,h3e),e.type===Zd&&zt(e,l3e),e.type===qy&&zt(e,u3e),e.type===Xd&&zt(e,c3e),e.type===Jf&&zt(e,f3e),zt(e,Hi,e.value)}function zn(e){let t=Ho();(t.type!==zo||t.value!==e)&&x6(t)}function vr(e){return Xt.type===zo&&Xt.value===e}function HM(e){return Xt.type===Jf&&Xt.value===e}function $3e(){let e=[];for(se=Xt.start,zn("[");!vr("]");)vr(",")?(Ho(),e.push(null)):(e.push(Kd()),vr("]")||zn(","));return Ho(),D3e(e)}function UX(){se=Xt.start;let e=Ho();return e.type===qy||e.type===Zd?(e.octal&&zt(e,VX),Ny(e)):WM(e.value)}function L3e(){var e,t,r,i;if(se=Xt.start,e=Xt,e.type===Xd)return r=UX(),zn(":"),i=Kd(),HX("init",r,i);if(e.type===Uy||e.type===zo)x6(e);else return t=UX(),zn(":"),i=Kd(),HX("init",t,i)}function P3e(){var e=[],t,r,i,n={},o=String;for(se=Xt.start,zn("{");!vr("}");)t=L3e(),t.key.type===WX?r=t.key.name:r=o(t.key.value),i="$"+r,Object.prototype.hasOwnProperty.call(n,i)?zt({},d3e):n[i]=!0,e.push(t),vr("}")||zn(",");return zn("}"),F3e(e)}function I3e(){zn("(");let e=VM();return zn(")"),e}var N3e={if:1};function B3e(){var e,t,r;if(vr("("))return I3e();if(vr("["))return $3e();if(vr("{"))return P3e();if(e=Xt.type,se=Xt.start,e===Xd||N3e[Xt.value])r=WM(Ho().value);else if(e===qy||e===Zd)Xt.octal&&zt(Xt,VX),r=Ny(Ho());else{if(e===Jf)throw new Error(zy);e===v6?(t=Ho(),t.value=t.value==="true",r=Ny(t)):e===b6?(t=Ho(),t.value=null,r=Ny(t)):vr("/")||vr("/=")?(r=Ny(A3e()),KX()):x6(Ho())}return r}function z3e(){let e=[];if(zn("("),!vr(")"))for(;se<Bn&&(e.push(Kd()),!vr(")"));)zn(",");return zn(")"),e}function H3e(){se=Xt.start;let e=Ho();return T3e(e)||x6(e),WM(e.value)}function U3e(){return zn("."),H3e()}function q3e(){zn("[");let e=VM();return zn("]"),e}function j3e(){var e,t,r;for(e=B3e();;)if(vr("."))r=U3e(),e=zX(".",e,r);else if(vr("("))t=z3e(),e=R3e(e,t);else if(vr("["))r=q3e(),e=zX("[",e,r);else break;return e}function qX(){let e=j3e();if(Xt.type===zo&&(vr("++")||vr("--")))throw new Error(zy);return e}function m6(){var e,t;if(Xt.type!==zo&&Xt.type!==Jf)t=qX();else{if(vr("++")||vr("--"))throw new Error(zy);if(vr("+")||vr("-")||vr("~")||vr("!"))e=Ho(),t=m6(),t=O3e(e.value,t);else{if(HM("delete")||HM("void")||HM("typeof"))throw new Error(zy);t=qX()}}return t}function jX(e){let t=0;if(e.type!==zo&&e.type!==Jf)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function W3e(){var e,t,r,i,n,o,s,a,l,u;if(e=Xt,l=m6(),i=Xt,n=jX(i),n===0)return l;for(i.prec=n,Ho(),t=[e,Xt],s=m6(),o=[l,i,s];(n=jX(Xt))>0;){for(;o.length>2&&n<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),r=BX(a,l,s),o.push(r);i=Ho(),i.prec=n,o.push(i),t.push(Xt),r=m6(),o.push(r)}for(u=o.length-1,r=o[u],t.pop();u>1;)t.pop(),r=BX(o[u-1].value,o[u-2],r),u-=2;return r}function Kd(){var e,t,r;return e=W3e(),vr("?")&&(Ho(),t=Kd(),zn(":"),r=Kd(),e=M3e(e,t,r)),e}function VM(){let e=Kd();if(vr(","))throw new Error(zy);return e}function ZX(e){Ue=e,se=0,Bn=Ue.length,Xt=null,KX();let t=VM();if(Xt.type!==Uy)throw new Error("Unexpect token after expression.");return t}function GM(e){let t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...GM(e.object)),t.push(...GM(e.property))),t)}function JX(e){return e.object.type==="MemberExpression"?JX(e.object):e.object.name==="datum"}function _6(e){let t=ZX(e),r=new Set;return t.visit(i=>{i.type==="MemberExpression"&&JX(i)&&r.add(GM(i).slice(1).join("."))}),r}var Vl=class e extends Ve{clone(){return new e(null,this.model,De(this.filter))}constructor(t,r,i){super(t),this.model=r,this.filter=i,this.expr=Yd(this.model,this.filter,this),this._dependentFields=_6(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}};function QX(e,t){let r={},i=e.config.selection;if(!t||!t.length)return r;let n=0;for(let o of t){let s=wt(o.name),a=o.select,l=he(a)?a:a.type,u=me(a)?De(a):{type:l},c=i[l];for(let p in c)p==="fields"||p==="encodings"||(p==="mark"&&(u.mark={...c.mark,...u.mark}),(u[p]===void 0||u[p]===!0)&&(u[p]=De(c[p]??u[p])));let f=r[s]={...u,name:s,type:l,init:o.value,bind:o.bind,events:he(u.on)?En(u.on,"scope"):ve(De(u.on))};if(zi(f)&&(n++,n>1)){delete r[s];continue}let h=De(o);for(let p of Im)p.defined(f)&&p.parse&&p.parse(e,f,h)}return n>1&&ie(MR),r}function a6(e,t,r,i="datum"){let n=he(t)?t:t.param,o=wt(n),s=de(o+Va),a;try{a=e.getSelectionComponent(o,n)}catch{return`!!${o}`}if(a.project.timeUnit){let h=r??e.component.data.raw,p=a.project.timeUnit.clone();h.parent?p.insertAsParentOf(h):h.parent=p}let l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${de(a.resolve)})`,c=`${l}${s}, ${i}${u}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function s6(e,t,r){let i=wt(t),n=r.encoding,o=r.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!n&&!o)o=s.project.items[0].field,s.project.items.length>1&&ie(FR(o));else if(n&&!o){let a=s.project.items.filter(l=>l.channel===n);!a.length||a.length>1?(o=s.project.items[0].field,ie(OR(a,n,r,o))):o=a[0].field}return`${s.name}[${de(ci(o))}]`}function eK(e,t){for(let[r,i]of Mo(e.component.selection??{})){let n=e.getName(`lookup_${r}`);e.component.data.outputNodes[n]=i.materialized=new Wr(new Vl(t,e,{param:r}),n,Ft.Lookup,e.component.data.outputNodeRefCounts)}}function Yd(e,t,r){return om(t,i=>he(i)?i:eG(i)?a6(e,i,r):l3(i))}function V3e(e,t){if(e)return K(e)&&!Na(e)?e.map(r=>wy(r,t)).join(", "):e}function YM(e,t,r,i){var n,o;e.encode??(e.encode={}),(n=e.encode)[t]??(n[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[r]=i}function qm(e,t,r,i={header:!1}){let{disable:n,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!n){for(let f in c){let h=f,p=WG[h],d=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(sc(d)){let{condition:m,...g}=d,v=ve(m),b=QR[h];if(b){let{vgProp:y,part:x}=b,S=[...v.map(_=>{let{test:w,...k}=_;return{test:Yd(null,w),...k}}),g];YM(c,x,y,S),delete c[h]}else if(b===null){let y={signal:v.map(x=>{let{test:S,..._}=x;return`${Yd(null,S)} ? ${ER(_)} : `}).join("")+ER(g)};c[h]=y}}else if(Ae(d)){let m=QR[h];if(m){let{vgProp:g,part:v}=m;YM(c,v,g,d),delete c[h]}}We(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){let{grid:f}=c.encode;c.encode={...f?{grid:f}:{}},ht(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:yt(u,0)}}else{if(!i.header&&e.mainExtracted)return;if(a!==void 0){let h=a;c.encode?.labels?.update&&Ae(c.encode.labels.update.text)&&(h=Oa(a,"datum.label",c.encode.labels.update.text.signal)),YM(c,"labels","text",{signal:h})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(let h of D3)e.hasAxisPart(h)||delete c.encode[h];ht(c.encode)&&delete c.encode}let f=V3e(l,r);return{scale:s,orient:o,grid:!1,...f?{title:f}:{},...c,...r.aria===!1?{aria:!1}:{},zindex:yt(u,0)}}}}function w6(e){let{axes:t}=e.component,r=[];for(let i of an)if(t[i]){for(let n of t[i])if(!n.get("disable")&&!n.get("gridScale")){let o=i==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&r.push({name:o,update:s})}}return r}function tK(e,t){let{x:r=[],y:i=[]}=e;return[...r.map(n=>qm(n,"grid",t)),...i.map(n=>qm(n,"grid",t)),...r.map(n=>qm(n,"main",t)),...i.map(n=>qm(n,"main",t))].filter(n=>n)}function rK(e,t,r,i){return Object.assign.apply(null,[{},...e.map(n=>{if(n==="axisOrient"){let o=r==="x"?"bottom":"left",s=t[r==="x"?"axisBottom":"axisLeft"]||{},a=t[r==="x"?"axisTop":"axisRight"]||{},l=new Set([...J(s),...J(a)]),u={};for(let c of l.values())u[c]={signal:`${i.signal} === "${o}" ? ${uo(s[c])} : ${uo(a[c])}`};return u}return t[n]})])}function iK(e,t,r,i){let n=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:HR(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=Ae(r)?"axisOrient":`axis${Bf(r)}`,a=[...n,...n.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:rK(a,i,e,r),vgAxisConfig:rK(l,i,e,r),axisConfigStyle:G3e([...l,...a],i)}}function G3e(e,t){let r=[{}];for(let i of e){let n=t[i]?.style;if(n){n=ve(n);for(let o of n)r.push(t.style[o])}}return Object.assign.apply(null,r)}function Wy(e,t,r,i={}){let n=TR(e,r,t);if(n!==void 0)return{configFrom:"style",configValue:n};for(let o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[o]?.[e]!==void 0)return{configFrom:o,configValue:i[o][e]};return{}}var KM={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:r})=>t.grid??Y3e(r,e),gridScale:({model:e,channel:t})=>X3e(e,t),labelAlign:({axis:e,labelAngle:t,orient:r,channel:i})=>e.labelAlign||JM(t,r,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:r,channel:i})=>e.labelBaseline||ZM(t,r,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:r})=>e.labelFlush??K3e(t.type,r),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:r})=>e.labelOverlap??Z3e(t.type,r,ce(t)&&!!t.timeUnit,ce(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:r,fieldOrDatumDef:i,scaleType:n})=>{let o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return r.tickCount??J3e({fieldOrDatumDef:i,scaleType:n,size:s,values:r.values})},tickMinStep:Q3e,title:({axis:e,model:t,channel:r})=>{if(e.title!==void 0)return e.title;let i=QM(t,r);if(i!==void 0)return i;let n=t.typedFieldDef(r),o=r==="x"?"x2":"y2",s=t.fieldDef(o);return DR(n?[YR(n)]:[],ce(s)?[YR(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>e6e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:r})=>e.zindex??t6e(r,t)};function Y3e(e,t){return!Yt(e)&&ce(t)&&!vt(t?.bin)&&!ur(t?.bin)}function X3e(e,t){let r=t==="x"?"y":"x";if(e.getScaleComponent(r))return e.scaleName(r)}function nK(e,t,r,i,n){let o=t?.labelAngle;if(o!==void 0)return Ae(o)?o:zf(o);{let{configValue:s}=Wy("labelAngle",i,t?.style,n);return s!==void 0?zf(s):r===Rt&&We([dy,hy],e.type)&&!(ce(e)&&e.timeUnit)?270:void 0}}function XM(e){return`(((${e.signal} % 360) + 360) % 360)`}function ZM(e,t,r,i){if(e!==void 0)if(r==="x"){if(Ae(e)){let n=XM(e),o=Ae(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ae(t)){let n=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${n} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ae(e)){let n=XM(e),o=Ae(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Ae(t)){let n=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function JM(e,t,r){if(e===void 0)return;let i=r==="x",n=i?0:90,o=i?"bottom":"left";if(Ae(e)){let s=XM(e),a=Ae(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${n?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${n} < ${s} && ${s} < ${180+n}) === ${a} ? "left" : "right"`}}if((e+n)%180===0)return i?null:"center";if(Ae(t)){let s=n<e&&e<180+n?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(n<e&&e<180+n)==(t===o)?"left":"right"}function K3e(e,t){if(t==="x"&&We(["quantitative","temporal"],e))return!0}function Z3e(e,t,r,i){if(r&&!me(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function oK(e){return e==="x"?"bottom":"left"}function J3e({fieldOrDatumDef:e,scaleType:t,size:r,values:i}){if(!i&&!Yt(t)&&t!=="log"){if(ce(e)){if(vt(e.bin))return{signal:`ceil(${r.signal}/10)`};if(e.timeUnit&&We(["month","hours","day","quarter"],cr(e.timeUnit)?.unit))return}return{signal:`ceil(${r.signal}/40)`}}}function Q3e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ce(t)){let{timeUnit:r}=t;if(r){let i=e3(r);if(i)return{signal:i}}}}function QM(e,t){let r=t==="x"?"x2":"y2",i=e.fieldDef(t),n=e.fieldDef(r),o=i?i.title:void 0,s=n?n.title:void 0;if(o&&s)return RR(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function e6e(e,t){let r=e.values;if(K(r))return T3(t,r);if(Ae(r))return r}function t6e(e,t){return e==="rect"&&xy(t)?1:0}var Jd=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r,this._dependentFields=_6(this.transform.calculate)}static parseAllForSortIndex(t,r){return r.forEachFieldDef((i,n)=>{if(Ws(i)&&_3(i.sort)){let{field:o,timeUnit:s}=i,a=i.sort,l=a.map((u,c)=>`${l3({field:o,timeUnit:s,equal:u})} ? ${c} : `).join("")+a.length;t=new e(t,{calculate:l,as:Gl(i,n,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Be(this.transform)}`}};function Gl(e,t,r){return ge(e,{prefix:t,suffix:"sort_index",...r})}function jm(e,t){return We(["top","bottom"],t)?"column":We(["left","right"],t)||e==="row"?"row":"column"}function mc(e,t,r,i){let n=i==="row"?r.headerRow:i==="column"?r.headerColumn:r.headerFacet;return yt((t||{})[e],n[e],r.header[e])}function Vy(e,t,r,i){let n={};for(let o of e){let s=mc(o,t||{},r,i);s!==void 0&&(n[o]=s)}return n}var Wm=["row","column"],Vm=["header","footer"];function sK(e,t){let r=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,n=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=Vy(["titleAnchor","titleAngle","titleOrient"],n.header,i,t),l=jm(t,a),u=zf(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:r,...t==="row"?{orient:"left"}:{},style:"guide-title",...lK(u,l),...aK(l,u,o),...fK(i,n,t,uY,cM)}}}function aK(e,t,r="middle"){switch(r){case"start":return{align:"left"};case"end":return{align:"right"}}let i=JM(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function lK(e,t){let r=ZM(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return r?{baseline:r}:{}}function uK(e,t){let r=e.component.layoutHeaders[t],i=[];for(let n of Vm)if(r[n])for(let o of r[n]){let s=i6e(e,t,n,r,o);s!=null&&i.push(s)}return i}function r6e(e,t){let{sort:r}=e;return $n(r)?{field:ge(r,{expr:"datum"}),order:r.order??"ascending"}:K(r)?{field:Gl(e,t,{expr:"datum"}),order:"ascending"}:{field:ge(e,{expr:"datum"}),order:r??"ascending"}}function S6(e,t,r){let{format:i,formatType:n,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=Vy(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,r,t),u=km({fieldOrDatumDef:e,format:i,formatType:n,expr:"parent",config:r}).signal,c=jm(t,a);return{text:{signal:l?Oa(Oa(l,"datum.label",u),"datum.value",ge(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...lK(o,c),...aK(c,o,s),...fK(r,e,t,cY,fM)}}function i6e(e,t,r,i,n){if(n){let o=null,{facetFieldDef:s}=i,a=e.config?e.config:void 0;if(s&&n.labels){let{labelOrient:f}=Vy(["labelOrient"],s.header,a,t);(t==="row"&&!We(["top","bottom"],f)||t==="column"&&!We(["left","right"],f))&&(o=S6(s,t,a))}let l=Zr(e)&&!zl(e.facet),u=n.axes,c=u?.length>0;if(o||c){let f=t==="row"?"height":"width";return{name:e.getName(`${t}_${r}`),type:"group",role:`${t}-${r}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:r6e(s,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...n.sizeSignal?{encode:{update:{[f]:n.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}var n6e={column:{start:0,end:1},row:{start:1,end:0}};function o6e(e,t){return n6e[t][e]}function cK(e,t){let r={};for(let i of Pi){let n=e[i];if(n?.facetFieldDef){let{titleAnchor:o,titleOrient:s}=Vy(["titleAnchor","titleOrient"],n.facetFieldDef.header,t,i),a=jm(i,s),l=o6e(o,a);l!==void 0&&(r[a]=l)}}return ht(r)?void 0:r}function fK(e,t,r,i,n){let o={};for(let s of i){if(!n[s])continue;let a=mc(s,t?.header,e,r);a!==void 0&&(o[n[s]]=a)}return o}function Gm(e){return[...C6(e,"width"),...C6(e,"height"),...C6(e,"childWidth"),...C6(e,"childHeight")]}function C6(e,t){let r=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];let n=e.getSizeSignalRef(t).signal;if(i==="step"){let o=e.getScaleComponent(r);if(o){let s=o.get("type"),a=o.get("range");if(Yt(s)&&Po(a)){let l=e.scaleName(r);return Zr(e.parent)&&e.parent.component.resolve.scale[r]==="independent"?[hK(l,a)]:[hK(l,a),{name:n,update:eF(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){let o=n.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=Dy(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:n,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:n,value:i}]}function hK(e,t){let r=`${e}_step`;return Ae(t.step)?{name:r,update:t.step.signal}:{name:r,value:t.step}}function eF(e,t,r){let i=t.get("type"),n=t.get("padding"),o=yt(t.get("paddingOuter"),n),s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:n:1,`bandspace(${r}, ${uo(s)}, ${uo(o)}) * ${e}_step`}function k6(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function E6(e,t){return J(e).reduce((r,i)=>({...r,...Xs({model:t,channelDef:e[i],vgChannel:i,mainRefFn:n=>bt(n.value),invalidValueRef:void 0})}),{})}function A6(e,t){if(Zr(t))return e==="theta"?"independent":"shared";if(Ys(t))return"shared";if(Xm(t))return Mt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Ym(e,t){let r=e.scale[t],i=Mt(t)?"axis":"legend";return r==="independent"?(e[i][t]==="shared"&&ie(Q.independentScaleMeansIndependentGuide(t)),"independent"):e[i][t]||"shared"}var s6e={...dM,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},tF=J(s6e),T6=class extends Ln{};var rF={symbols:a6e,gradient:l6e,labels:u6e,entries:c6e};function a6e(e,{fieldOrDatumDef:t,model:r,channel:i,legendCmpt:n,legendType:o}){if(o!=="symbol")return;let{markDef:s,encoding:a,config:l,mark:u}=r,c=s.filled&&u!=="trail",f={...NV({},r,_G),...zm(r,{filled:c})},h=n.get("symbolOpacity")??l.legend.symbolOpacity,p=n.get("symbolFillColor")??l.legend.symbolFillColor,d=n.get("symbolStrokeColor")??l.legend.symbolStrokeColor,m=h===void 0?dK(a.opacity)??s.opacity:void 0;if(f.fill){if(i==="fill"||c&&i===jr)delete f.fill;else if(ae(f.fill,"field"))p?delete f.fill:(f.fill=bt(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=bt(m??1));else if(K(f.fill)){let g=D6(a.fill??a.color)??s.fill??(c&&s.color);g&&(f.fill=bt(g))}}if(f.stroke){if(i==="stroke"||!c&&i===jr)delete f.stroke;else if(ae(f.stroke,"field")||d)delete f.stroke;else if(K(f.stroke)){let g=yt(D6(a.stroke||a.color),s.stroke,c?s.color:void 0);g&&(f.stroke={value:g})}}if(i!==lo){let g=ce(t)&&mK(r,n,t);g?f.opacity=[{test:g,...bt(m??1)},bt(l.legend.unselectedOpacity)]:m&&(f.opacity=bt(m))}return f={...f,...e},ht(f)?void 0:f}function l6e(e,{model:t,legendType:r,legendCmpt:i}){if(r!=="gradient")return;let{config:n,markDef:o,encoding:s}=t,a={},u=(i.get("gradientOpacity")??n.legend.gradientOpacity)===void 0?dK(s.opacity)||o.opacity:void 0;return u&&(a.opacity=bt(u)),a={...a,...e},ht(a)?void 0:a}function u6e(e,{fieldOrDatumDef:t,model:r,channel:i,legendCmpt:n}){let o=r.legend(i)||{},s=r.config,a=ce(t)?mK(r,n,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o,f;Bl(c)?f=hs({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):u===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=hs({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&ce(t)&&t.timeUnit===void 0&&(f=hs({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));let h={...l?{opacity:l}:{},...f?{text:f}:{},...e};return ht(h)?void 0:h}function c6e(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function dK(e){return pK(e,(t,r)=>Math.max(t,r.value))}function D6(e){return pK(e,(t,r)=>yt(t,r.value))}function pK(e,t){if(NG(e))return ve(e.condition).reduce(t,e.value);if(hi(e))return e.value}function mK(e,t,r){let i=t.get("selections");if(!i?.length)return;let n=de(r.field);return i.map(o=>`(!length(data(${de(wt(o)+Va)})) || (${o}[${n}] && indexof(${o}[${n}], datum.value) >= 0))`).join(" || ")}var iF={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:r})=>{let{format:i,formatType:n}=t;return y3(e,e.type,i,n,r,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:r})=>{let{formatType:i}=e;return x3(i,t,r)},gradientLength:e=>{let{legend:t,legendConfig:r}=e;return t.gradientLength??r.gradientLength??m6e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:r})=>e.labelOverlap??t.labelOverlap??g6e(r),symbolType:({legend:e,markDef:t,channel:r,encoding:i})=>e.symbolType??h6e(t.type,r,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Ul(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:r})=>{if(Ju(r)&&js(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>f6e(t,e)};function f6e(e,t){let r=e.values;if(K(r))return T3(t,r);if(Ae(r))return r}function h6e(e,t,r,i){if(t!=="shape"){let n=D6(r)??i;if(n)return n}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function vK(e){let{legend:t}=e;return yt(t.type,d6e(e))}function d6e({channel:e,timeUnit:t,scaleType:r}){if(Ju(e)){if(We(["quarter","month","day"],t))return"symbol";if(js(r))return"gradient"}return"symbol"}function bK({legendConfig:e,legendType:t,orient:r,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??p6e(r,t)}function p6e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function m6e({legendConfig:e,model:t,direction:r,orient:i,scaleType:n}){let{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(js(n))return r==="horizontal"?i==="top"||i==="bottom"?gK(t,"width",s,o):s:gK(t,"height",l,a)}function gK(e,t,r,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${r}, ${i})`}}function g6e(e){if(We(["quantile","threshold","log","symlog"],e))return"greedy"}function nF(e){let t=Et(e)?v6e(e):_6e(e);return e.component.legends=t,t}function v6e(e){let{encoding:t}=e,r={};for(let i of[jr,...z3]){let n=jt(t[i]);!n||!e.getScaleComponent(i)||i===Tr&&ce(n)&&n.type===Ua||(r[i]=x6e(e,i))}return r}function b6e(e,t){let r=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:r};if(t==="size")return{strokeWidth:r}}return t==="color"?e.markDef.filled?{fill:r}:{stroke:r}:{[t]:r}}function y6e(e,t,r,i){switch(t){case"disable":return r!==void 0;case"values":return!!r?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(r||{})[t]}function x6e(e,t){let r=e.legend(t),{markDef:i,encoding:n,config:o}=e,s=o.legend,a=new T6({},b6e(e,t));DX(e,t,a);let l=r!==void 0?!r:s.disable;if(a.set("disable",l,r!==void 0),l)return a;r=r||{};let u=e.getScaleComponent(t).get("type"),c=jt(n[t]),f=ce(c)?cr(c.timeUnit)?.unit:void 0,h=r.orient||o.legend.orient||"right",p=vK({legend:r,channel:t,timeUnit:f,scaleType:u}),d=bK({legend:r,legendType:p,orient:h,legendConfig:s}),m={legend:r,channel:t,model:e,markDef:i,encoding:n,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:u,orient:h,legendType:p,direction:d};for(let x of tF){if(p==="gradient"&&x.startsWith("symbol")||p==="symbol"&&x.startsWith("gradient"))continue;let S=x in iF?iF[x](m):r[x];if(S!==void 0){let _=y6e(S,x,r,e.fieldDef(t));(_||o.legend[x]===void 0)&&a.set(x,S,_)}}let g=r?.encoding??{},v=a.get("selections"),b={},y={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:p};for(let x of["labels","legend","title","symbols","gradient","entries"]){let S=E6(g[x]??{},e),_=x in rF?rF[x](S,y):S;_!==void 0&&!ht(_)&&(b[x]={...v?.length&&ce(c)?{name:`${wt(c.field)}_legend_${x}`}:{},...v?.length?{interactive:!!v}:{},update:_})}return ht(b)||a.set("encode",b,!!r?.encoding),a}function _6e(e){let{legends:t,resolve:r}=e.component;for(let i of e.children){nF(i);for(let n of J(i.component.legends))r.legend[n]=Ym(e.component.resolve,n),r.legend[n]==="shared"&&(t[n]=oF(t[n],i.component.legends[n]),t[n]||(r.legend[n]="independent",delete t[n]))}for(let i of J(t))for(let n of e.children)n.component.legends[i]&&r.legend[i]==="shared"&&delete n.component.legends[i];return t}function oF(e,t){if(!e)return t.clone();let r=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(r.explicit&&i.explicit&&r.value!==i.value)return;let n=!1;for(let o of tF){let s=Bo(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(a,l)=>{switch(o){case"symbolType":return w6e(a,l);case"title":return J5(a,l);case"type":return n=!0,Pn("symbol")}return Lm(a,l,o,"legend")});e.setWithExplicit(o,s)}return n&&(e.implicit?.encode?.gradient&&uy(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&uy(e.explicit,["encode","gradient"])),e}function w6e(e,t){return t.value==="circle"?t:e}function S6e(e,t,r,i){var n,o;e.encode??(e.encode={}),(n=e.encode)[t]??(n[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[r]=i}function R6(e){let t=e.component.legends,r={};for(let n of J(t)){let o=e.getScaleComponent(n),s=St(o.get("domains"));if(r[s])for(let a of r[s])oF(a,t[n])||r[s].push(t[n]);else r[s]=[t[n].clone()]}return ar(r).flat().map(n=>C6e(n,e.config)).filter(n=>n!==void 0)}function C6e(e,t){let{disable:r,labelExpr:i,selections:n,...o}=e.combine();if(!r){if(t.aria===!1&&o.aria==null&&(o.aria=!1),o.encode?.symbols){let s=o.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(let a of z3)o[a]&&delete s[a]}if(o.title||delete o.title,i!==void 0){let s=i;o.encode?.labels?.update&&Ae(o.encode.labels.update.text)&&(s=Oa(i,"datum.label",o.encode.labels.update.text.signal)),S6e(o,"labels","text",{signal:s})}return o}}function yK(e){return Ys(e)||Xm(e)?k6e(e):xK(e)}function k6e(e){return e.children.reduce((t,r)=>t.concat(r.assembleProjections()),xK(e))}function xK(e){let t=e.component.projection;if(!t||t.merged)return[];let r=t.combine(),{name:i}=r;if(t.data){let n={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{let l=Ae(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return We(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:n,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...r}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...r}]}var _K=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];var Gy=class extends Ln{constructor(t,r,i,n){super({...r},{name:t}),this.specifiedProjection=r,this.size=i,this.data=n,this.merged=!1}get isFit(){return!!this.data}};function sF(e){e.component.projection=Et(e)?E6e(e):D6e(e)}function E6e(e){if(e.hasProjection){let t=wr(e.specifiedProjection),r=!(t&&(t.scale!=null||t.translate!=null)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,n=r?A6e(e):void 0,o=new Gy(e.projectionName(!0),{...wr(e.config.projection),...t},i,n);return o.get("type")||o.set("type","equalEarth",!1),o}}function A6e(e){let t=[],{encoding:r}=e;for(let i of[[on,nn],[sn,Dn]])(jt(r[i[0]])||jt(r[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Tr)&&e.typedFieldDef(Tr).type===Ua&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ft.Main)),t}function T6e(e,t){let r=L5(_K,n=>!!(!_e(e.explicit,n)&&!_e(t.explicit,n)||_e(e.explicit,n)&&_e(t.explicit,n)&&Li(e.get(n),t.get(n))));if(Li(e.size,t.size)){if(r)return e;if(Li(e.explicit,{}))return t;if(Li(t.explicit,{}))return e}return null}function D6e(e){if(e.children.length===0)return;let t;for(let i of e.children)sF(i);let r=L5(e.children,i=>{let n=i.component.projection;if(n)if(t){let o=T6e(t,n);return o&&(t=o),!!o}else return t=n,!0;else return!0});if(t&&r){let i=e.projectionName(!0),n=new Gy(i,t.specifiedProjection,t.size,De(t.data));for(let o of e.children){let s=o.component.projection;s&&(s.isFit&&n.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),i),s.merged=!0)}return n}}function R6e(e,t,r,i){if(Nl(t,r)){let n=Et(e)?e.axis(r)??e.legend(r)??{}:{},o=ge(t,{expr:"datum"}),s=ge(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ge(t,{binSuffix:"range",forAs:!0}),formula:jd(o,s,n.format,n.formatType,i)}}return{}}function SK(e,t){return`${V5(e)}_${t}`}function M6e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Km(e,t,r){let i=gm(r,void 0)??{},n=SK(i,t);return e.getName(`${n}_bins`)}function F6e(e){return"as"in e}function wK(e,t,r){let i,n;F6e(e)?i=he(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[ge(e,{forAs:!0}),ge(e,{binSuffix:"end",forAs:!0})];let o={...gm(t,void 0)},s=SK(o,e.field),{signal:a,extentSignal:l}=M6e(r,s);if(mm(o.extent)){let c=o.extent;n=s6(r,c.param,c),delete o.extent}let u={bin:o,field:e.field,as:[i],...a?{signal:a}:{},...l?{extentSignal:l}:{},...n?{span:n}:{}};return{key:s,binComponent:u}}var Ya=class e extends Ve{clone(){return new e(null,De(this.bins))}constructor(t,r){super(t),this.bins=r}static makeFromEncoding(t,r){let i=r.reduceFieldDef((n,o,s)=>{if(Rr(o)&&vt(o.bin)){let{key:a,binComponent:l}=wK(o,o.bin,r);n[a]={...l,...n[a],...R6e(r,o,s,r.config)}}return n},{});return ht(i)?null:new e(t,i)}static makeFromTransform(t,r,i){let{key:n,binComponent:o}=wK(r,r.bin,i);return new e(t,{[n]:o})}merge(t,r){for(let i of J(t.bins))i in this.bins?(r(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=An([...this.bins[i].as,...t.bins[i].as],Be)):this.bins[i]=t.bins[i];for(let i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(ar(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ar(this.bins).map(t=>t.field))}hash(){return`Bin ${Be(this.bins)}`}assemble(){return ar(this.bins).flatMap(t=>{let r=[],[i,...n]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:ci(t.field),as:i,signal:t.signal,...mm(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(r.push({type:"extent",field:ci(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),r.push(a);for(let l of n)for(let u=0;u<2;u++)r.push({type:"formula",expr:ge({field:i[u]},{expr:"datum"}),as:l[u]});return t.formula&&r.push({type:"formula",expr:t.formula,as:t.formulaAs}),r})}};function O6e(e,t,r,i){let n=Et(i)?i.encoding[Ii(t)]:void 0;if(Rr(r)&&Et(i)&&k3(r,n,i.markDef,i.config)){e.add(ge(r,{})),e.add(ge(r,{suffix:"end"}));let{mark:o,markDef:s,config:a}=i,l=Io({fieldDef:r,markDef:s,config:a});tc(o)&&l!==.5&&Mt(t)&&(e.add(ge(r,{suffix:Vd})),e.add(ge(r,{suffix:Gd}))),r.bin&&Nl(r,t)&&e.add(ge(r,{binSuffix:"range"}))}else if(z5(t)){let o=B5(t);e.add(i.getName(o))}else e.add(ge(r));return Ws(r)&&fG(r.scale?.range)&&e.add(r.scale.range.field),e}function $6e(e,t){for(let r of J(t)){let i=t[r];for(let n of J(i))r in e?e[r][n]=new Set([...e[r][n]??[],...i[n]]):e[r]={[n]:i[n]}}}var ps=class e extends Ve{clone(){return new e(null,new Set(this.dimensions),De(this.measures))}constructor(t,r,i){super(t),this.dimensions=r,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,r){let i=!1;r.forEachFieldDef(s=>{s.aggregate&&(i=!0)});let n={},o=new Set;return!i||(r.forEachFieldDef((s,a)=>{let{aggregate:l,field:u}=s;if(l)if(l==="count")n["*"]??(n["*"]={}),n["*"].count=new Set([ge(s,{forAs:!0})]);else{if(fs(l)||Hs(l)){let c=fs(l)?"argmin":"argmax",f=l[c];n[f]??(n[f]={}),n[f][c]=new Set([ge({op:c,field:f},{forAs:!0})])}else n[u]??(n[u]={}),n[u][l]=new Set([ge(s,{forAs:!0})]);fi(a)&&r.scaleDomain(a)==="unaggregated"&&(n[u]??(n[u]={}),n[u].min=new Set([ge({field:u,aggregate:"min"},{forAs:!0})]),n[u].max=new Set([ge({field:u,aggregate:"max"},{forAs:!0})]))}else O6e(o,a,s,r)}),o.size+J(n).length===0)?null:new e(t,o,n)}static makeFromTransform(t,r){var i;let n=new Set,o={};for(let s of r.aggregate){let{op:a,field:l,as:u}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([u||ge(s,{forAs:!0})])):(o[l]??(o[l]={}),(i=o[l])[a]??(i[a]=new Set),o[l][a].add(u||ge(s,{forAs:!0}))))}for(let s of r.groupby??[])n.add(s);return n.size+J(o).length===0?null:new e(t,n,o)}merge(t){return dR(this.dimensions,t.dimensions)?($6e(this.measures,t.measures),!0):(UV("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...J(this.measures)])}producedFields(){let t=new Set;for(let r of J(this.measures))for(let i of J(this.measures[r])){let n=this.measures[r][i];n.size===0?t.add(`${i}_${r}`):n.forEach(t.add,t)}return t}hash(){return`Aggregate ${Be({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let t=[],r=[],i=[];for(let o of J(this.measures))for(let s of J(this.measures[o]))for(let a of this.measures[o][s])i.push(a),t.push(s),r.push(o==="*"?null:ci(o));return{type:"aggregate",groupby:[...this.dimensions].map(ci),ops:t,fields:r,as:i}}};var Zs=class extends Ve{constructor(t,r,i,n){super(t),this.model=r,this.name=i,this.data=n;for(let o of Pi){let s=r.facet[o];if(s){let{bin:a,sort:l}=s;this[o]={name:r.getName(`${o}_domain`),fields:[ge(s),...vt(a)?[ge(s,{binSuffix:"end"})]:[]],...$n(l)?{sortField:l}:K(l)?{sortIndexField:Gl(s,o)}:{}}}}this.childModel=r.child}hash(){let t="Facet";for(let r of Pi)this[r]&&(t+=` ${r.charAt(0)}:${Be(this[r])}`);return t}get fields(){let t=[];for(let r of Pi)this[r]?.fields&&t.push(...this[r].fields);return t}dependentFields(){let t=new Set(this.fields);for(let r of Pi)this[r]&&(this[r].sortField&&t.add(this[r].sortField.field),this[r].sortIndexField&&t.add(this[r].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let t={};for(let r of an){let i=this.childModel.component.scales[r];if(i&&!i.merged){let n=i.get("type"),o=i.get("range");if(Yt(n)&&Po(o)){let s=Qf(this.childModel,r),a=Zm(s);a?t[r]=a:ie(Q.unknownField(r))}}}return t}assembleRowColumnHeaderData(t,r,i){let n={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];n&&i&&i[n]&&(r?(o.push(`distinct_${i[n]}`),s.push("max")):(o.push(i[n]),s.push("distinct")),a.push(`distinct_${i[n]}`));let{sortField:l,sortIndexField:u}=this[t];if(l){let{op:c=Wf,field:f}=l;o.push(f),s.push(c),a.push(ge(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:r??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){let{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,n=[],o={};for(let l of Wm){for(let u of Vm){let c=(i[l]&&i[l][u])??[];for(let f of c)if(f.axes?.length>0){o[l]=!0;break}}if(o[l]){let u=`length(data("${this.facet.name}"))`,c=l==="row"?r?{signal:`ceil(${u} / ${r})`}:1:r?{signal:`min(${u}, ${r})`}:{signal:u};n.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:c}]})}}let{row:s,column:a}=o;return(s||a)&&n.unshift(this.assembleRowColumnHeaderData("facet",null,t)),n}assemble(){let t=[],r=null,i=this.getChildIndependentFieldsWithStep(),{column:n,row:o,facet:s}=this;if(n&&o&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;let a=[].concat(i.x??[],i.y??[]),l=a.map(()=>"distinct");t.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(let a of[Oo,Fo])this[a]&&t.push(this.assembleRowColumnHeaderData(a,r,i));if(s){let a=this.assembleFacetHeaderData(i);a&&t.push(...a)}return t}};function CK(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function L6e(e,t){let r=cy(e);if(t==="number")return`toNumber(${r})`;if(t==="boolean")return`toBoolean(${r})`;if(t==="string")return`toString(${r})`;if(t==="date")return`toDate(${r})`;if(t==="flatten")return r;if(t.startsWith("date:")){let i=CK(t.slice(5,t.length));return`timeParse(${r},'${i}')`}else if(t.startsWith("utc:")){let i=CK(t.slice(4,t.length));return`utcParse(${r},'${i}')`}else return ie(Q.unrecognizedParse(t)),null}function kK(e){let t={};return ly(e.filter,r=>{if(BR(r)){let i=null;t3(r)?i=Ni(r.equal):i3(r)?i=Ni(r.lte):r3(r)?i=Ni(r.lt):n3(r)?i=Ni(r.gt):o3(r)?i=Ni(r.gte):s3(r)?i=r.range[0]:a3(r)&&(i=(r.oneOf??r.in)[0]),i&&(Us(i)?t[r.field]="date":ut(i)?t[r.field]="number":he(i)&&(t[r.field]="string")),r.timeUnit&&(t[r.field]="date")}}),t}function EK(e){let t={};function r(i){nc(i)?t[i.field]="date":i.type==="quantitative"&&DV(i.aggregate)?t[i.field]="number":Od(i.field)>1?i.field in t||(t[i.field]="flatten"):Ws(i)&&$n(i.sort)&&Od(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Et(e)||Zr(e))&&e.forEachFieldDef((i,n)=>{if(Rr(i))r(i);else{let o=cs(n),s=e.fieldDef(o);r({...i,type:s.type})}}),Et(e)){let{mark:i,markDef:n,encoding:o}=e;if(Fn(i)&&!e.encoding.order){let s=n.orient==="horizontal"?"y":"x",a=o[s];ce(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function AK(e){let t={};if(Et(e)&&e.component.selection)for(let r of J(e.component.selection)){let i=e.component.selection[r];for(let n of i.project.items)!n.channel&&Od(n.field)>1&&(t[n.field]="flatten")}return t}var Ui=class e extends Ve{clone(){return new e(null,De(this._parse))}constructor(t,r){super(t),this._parse=r}hash(){return`Parse ${Be(this._parse)}`}static makeExplicit(t,r,i){let n={},o=r.data;return!ja(o)&&o?.format?.parse&&(n=o.format.parse),this.makeWithAncestors(t,n,{},i)}static makeWithAncestors(t,r,i,n){for(let a of J(i)){let l=n.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===i[a]||l.value==="derived"||i[a]==="flatten"?delete i[a]:ie(Q.differentParse(a,i[a],l.value)))}for(let a of J(r)){let l=n.get(a);l!==void 0&&(l===r[a]?delete r[a]:ie(Q.differentParse(a,r[a],l)))}let o=new Ln(r,i);n.copyAll(o);let s={};for(let a of J(o.combine())){let l=o.get(a);l!==null&&(s[a]=l)}return J(s).length===0||n.parseNothing?null:new e(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){let t={};for(let r of J(this._parse)){let i=this._parse[r];Od(r)===1&&(t[r]=i)}return t}producedFields(){return new Set(J(this._parse))}dependentFields(){return new Set(J(this._parse))}assembleTransforms(t=!1){return J(this._parse).filter(r=>t?Od(r)>1:!0).map(r=>{let i=L6e(r,this._parse[r]);return i?{type:"formula",expr:i,as:Ku(r)}:null}).filter(r=>r!==null)}};var Xa=class e extends Ve{clone(){return new e(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([un])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:un}}};var eh=class e extends Ve{clone(){return new e(null,this.params)}constructor(t,r){super(t),this.params=r}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Be(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}};var th=class e extends Ve{clone(){return new e(null,this.params)}constructor(t,r){super(t),this.params=r}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Be(this.params)}`}assemble(){return{type:"sequence",...this.params}}};var Uo=class extends Ve{constructor(t){super(null),t??(t={name:"source"});let r;if(ja(t)||(r=t.format?{...qr(t.format,["parse"])}:{}),Wd(t))this._data={values:t.values};else if(uc(t)){if(this._data={url:t.url},!r.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];We(["json","csv","tsv","dsv","topojson"],i)||(i="json"),r.type=i}}else CM(t)?this._data={values:[{type:"Sphere"}]}:(r6(t)||ja(t))&&(this._data={});this._generator=ja(t),t.name&&(this._name=t.name),r&&!ht(r)&&(this._data.format=r)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}};var TK=function(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},P6e=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},Yy;function M6(e){return e instanceof Uo||e instanceof eh||e instanceof th}var Jm=class{constructor(){Yy.set(this,void 0),TK(this,Yy,!1,"f")}setModified(){TK(this,Yy,!0,"f")}get modifiedFlag(){return P6e(this,Yy,"f")}};Yy=new WeakMap;var Yl=class extends Jm{getNodeDepths(t,r,i){i.set(t,r);for(let n of t.children)this.getNodeDepths(n,r+1,i);return i}optimize(t){let i=[...this.getNodeDepths(t,0,new Map).entries()].sort((n,o)=>o[1]-n[1]);for(let n of i)this.run(n[0]);return this.modifiedFlag}},Qm=class extends Jm{optimize(t){this.run(t);for(let r of t.children)this.optimize(r);return this.modifiedFlag}};var F6=class extends Qm{mergeNodes(t,r){let i=r.shift();for(let n of r)t.removeChild(n),n.parent=i,n.remove()}run(t){let r=t.children.map(n=>n.hash()),i={};for(let n=0;n<r.length;n++)i[r[n]]===void 0?i[r[n]]=[t.children[n]]:i[r[n]].push(t.children[n]);for(let n of J(i))i[n].length>1&&(this.setModified(),this.mergeNodes(t,i[n]))}},O6=class extends Qm{constructor(t){super(),this.requiresSelectionId=t&&Iy(t)}run(t){t instanceof Xa&&(this.requiresSelectionId&&(M6(t.parent)||t.parent instanceof ps||t.parent instanceof Ui)||(this.setModified(),t.remove()))}},$6=class extends Jm{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,r){let i=new Set;t instanceof Gs&&(i=t.producedFields(),P5(i,r)&&(this.setModified(),t.removeFormulas(r),t.producedFields.length===0&&t.remove()));for(let n of t.children)this.run(n,new Set([...r,...i]))}},L6=class extends Qm{constructor(){super()}run(t){t instanceof Wr&&!t.isRequired()&&(this.setModified(),t.remove())}},P6=class extends Yl{run(t){if(!M6(t)&&!(t.numChildren()>1)){for(let r of t.children)if(r instanceof Ui)if(t instanceof Ui)this.setModified(),t.merge(r);else{if(I5(t.producedFields(),r.dependentFields()))continue;this.setModified(),r.swapWithParent()}}}},I6=class extends Yl{run(t){let r=[...t.children],i=t.children.filter(n=>n instanceof Ui);if(t.numChildren()>1&&i.length>=1){let n={},o=new Set;for(let s of i){let a=s.parse;for(let l of J(a))l in n?n[l]!==a[l]&&o.add(l):n[l]=a[l]}for(let s of o)delete n[s];if(!ht(n)){this.setModified();let s=new Ui(t,n);for(let a of r){if(a instanceof Ui)for(let l of J(n))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof Ui&&J(a.parse).length===0&&a.remove()}}}}},N6=class extends Yl{run(t){t instanceof Wr||t.numChildren()>0||t instanceof Zs||t instanceof Uo||(this.setModified(),t.remove())}},B6=class extends Yl{run(t){let r=t.children.filter(n=>n instanceof Gs),i=r.pop();for(let n of r)this.setModified(),i.merge(n)}},z6=class extends Yl{run(t){let r=t.children.filter(n=>n instanceof ps),i={};for(let n of r){let o=Be(n.groupBy);o in i||(i[o]=[]),i[o].push(n)}for(let n of J(i)){let o=i[n];if(o.length>1){let s=o.pop();for(let a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}},H6=class extends Yl{constructor(t){super(),this.model=t}run(t){let r=!(M6(t)||t instanceof Vl||t instanceof Ui||t instanceof Xa),i=[],n=[];for(let o of t.children)o instanceof Ya&&(r&&!I5(t.producedFields(),o.dependentFields())?i.push(o):n.push(o));if(i.length>0){let o=i.pop();for(let s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ya?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(n.length>1){let o=n.pop();for(let s of n)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}},U6=class extends Yl{run(t){let r=[...t.children];if(!Nf(r,s=>s instanceof Wr)||t.numChildren()<=1)return;let n=[],o;for(let s of r)if(s instanceof Wr){let a=s;for(;a.numChildren()===1;){let[l]=a.children;if(l instanceof Wr)a=l;else break}n.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else n.push(s);if(n.length){this.setModified();for(let s of n)s.parent.removeChild(s),s.parent=o}}};var Ka=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r}addDimensions(t){this.transform.groupby=An(this.transform.groupby.concat(t),r=>r)}dependentFields(){let t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(r=>r.field).filter(r=>r!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ge(t)}hash(){return`JoinAggregateTransform ${Be(this.transform)}`}assemble(){let t=[],r=[],i=[];for(let o of this.transform.joinaggregate)r.push(o.op),i.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);let n=this.transform.groupby;return{type:"joinaggregate",as:i,ops:r,fields:t,...n!==void 0?{groupby:n}:{}}}};var Qd=class e extends Ve{clone(){return new e(null,{...this.filter})}constructor(t,r){super(t),this.filter=r}static make(t,r,i){let{config:n,markDef:o}=r,{marks:s,scales:a}=i;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;let l=r.reduceFieldDef((u,c,f)=>{let h=fi(f)&&r.getScaleComponent(f);if(h){let p=h.get("type"),{aggregate:d}=c,m=wm({scaleChannel:f,markDef:o,config:n,scaleType:p,isCountAggregate:qf(d)});m!=="show"&&m!=="always-valid"&&(u[c.field]=c)}return u},{});return J(l).length?new e(t,l):null}dependentFields(){return new Set(J(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Be(this.filter)}`}assemble(){let t=J(this.filter).reduce((r,i)=>{let n=this.filter[i],o=ge(n,{expr:"datum"});return n!==null&&(n.type==="temporal"?r.push(`(isDate(${o}) || (${q6(o)}))`):n.type==="quantitative"&&r.push(q6(o))),r},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}};function q6(e){return`isValid(${e}) && isFinite(+${e})`}function N6e(e){return e.stack.stackBy.reduce((t,r)=>{let i=r.fieldDef,n=ge(i);return n&&t.push(n),t},[])}function B6e(e){return K(e)&&e.every(t=>he(t))&&e.length>1}var Xl=class e extends Ve{clone(){return new e(null,De(this._stack))}constructor(t,r){super(t),this._stack=r}static makeFromTransform(t,r){let{stack:i,groupby:n,as:o,offset:s="zero"}=r,a=[],l=[];if(r.sort!==void 0)for(let f of r.sort)a.push(f.field),l.push(yt(f.order,"ascending"));let u={field:a,order:l},c;return B6e(o)?c=o:he(o)?c=[o,`${o}_end`]:c=[`${r.stack}_start`,`${r.stack}_end`],new e(t,{dimensionFieldDefs:[],stackField:i,groupby:n,offset:s,sort:u,facetby:[],as:c})}static makeFromEncoding(t,r){let i=r.stack,{encoding:n}=r;if(!i)return null;let{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=i,u=o.map(p=>{let d=n[p];return _i(d)}).filter(p=>!!p),c=N6e(r),f=r.encoding.order,h;if(K(f)||ce(f))h=Z5(f);else{let p=E3(f)?f.sort:s==="y"?"descending":"ascending";h=c.reduce((d,m)=>(d.field.includes(m)||(d.field.push(m),d.order.push(p)),d),{field:[],order:[]})}return new e(t,{dimensionFieldDefs:u,stackField:r.vgField(s),facetby:[],stackby:c,sort:h,offset:a,impute:l,as:[r.vgField(s,{suffix:"start",forAs:!0}),r.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){let t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Be(this._stack)}`}getGroupbyFields(){let{dimensionFieldDefs:t,impute:r,groupby:i}=this._stack;return t.length>0?t.map(n=>n.bin?r?[ge(n,{binSuffix:"mid"})]:[ge(n,{}),ge(n,{binSuffix:"end"})]:[ge(n)]).flat():i??[]}assemble(){let t=[],{facetby:r,dimensionFieldDefs:i,stackField:n,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(let c of i){let{bandPosition:f=.5,bin:h}=c;if(h){let p=ge(c,{expr:"datum"}),d=ge(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${q6(p)} ? ${f}*${p}+${1-f}*${d} : ${p}`,as:ge(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:n,groupby:[...o,...r],key:ge(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...r],field:n,sort:s,as:u,offset:a}),t}};var gc=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r}addDimensions(t){this.transform.groupby=An(this.transform.groupby.concat(t),r=>r)}dependentFields(){let t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(r=>t.add(r.field)),this.transform.window.map(r=>r.field).filter(r=>r!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ge(t)}hash(){return`WindowTransform ${Be(this.transform)}`}assemble(){let t=[],r=[],i=[],n=[];for(let f of this.transform.window)r.push(f.op),i.push(this.getDefaultName(f)),n.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);let o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&r.every(f=>pm(f)))return{type:"joinaggregate",as:i,ops:r,fields:t,...s!==void 0?{groupby:s}:{}};let a=[],l=[];if(this.transform.sort!==void 0)for(let f of this.transform.sort)a.push(f.field),l.push(f.order??"ascending");let u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:n,as:i,ops:r,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}};function z6e(e){function t(r){if(!(r instanceof Zs)){let i=r.clone();if(i instanceof Wr){let n=Xy+i.getSource();i.setSource(n),e.model.component.data.outputNodes[n]=i}else(i instanceof ps||i instanceof Xl||i instanceof gc||i instanceof Ka)&&i.addDimensions(e.fields);for(let n of r.children.flatMap(t))n.parent=i;return[i]}return r.children.flatMap(t)}return t}function j6(e){if(e instanceof Zs)if(e.numChildren()===1&&!(e.children[0]instanceof Wr)){let t=e.children[0];(t instanceof ps||t instanceof Xl||t instanceof gc||t instanceof Ka)&&t.addDimensions(e.fields),t.swapWithParent(),j6(e)}else{let t=e.model.component.data.main;DK(t);let r=z6e(e),i=e.children.map(r).flat();for(let n of i)n.parent=t}else e.children.map(j6)}function DK(e){if(e instanceof Wr&&e.type===Ft.Main&&e.numChildren()===1){let t=e.children[0];t instanceof Zs||(t.swapWithParent(),DK(e))}}var Xy="scale_",W6=5;function aF(e){for(let t of e){for(let r of t.children)if(r.parent!==t)return!1;if(!aF(t.children))return!1}return!0}function Za(e,t){let r=!1;for(let i of t)r=e.optimize(i)||r;return r}function RK(e,t,r){let i=e.sources,n=!1;return n=Za(new L6,i)||n,n=Za(new O6(t),i)||n,i=i.filter(o=>o.numChildren()>0),n=Za(new N6,i)||n,i=i.filter(o=>o.numChildren()>0),r||(n=Za(new P6,i)||n,n=Za(new H6(t),i)||n,n=Za(new $6,i)||n,n=Za(new I6,i)||n,n=Za(new z6,i)||n,n=Za(new B6,i)||n,n=Za(new F6,i)||n,n=Za(new U6,i)||n),e.sources=i,n}function MK(e,t){aF(e.sources);let r=0,i=0;for(let n=0;n<W6&&RK(e,t,!0);n++)r++;e.sources.map(j6);for(let n=0;n<W6&&RK(e,t,!1);n++)i++;aF(e.sources),Math.max(r,i)===W6&&ie(`Maximum optimization runs(${W6}) reached.`)}var Jr=class e{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,r){return new e(()=>t(r))}};function fF(e){Et(e)?H6e(e):U6e(e)}function H6e(e){let t=e.component.scales;for(let r of J(t)){let i=j6e(e,r);if(t[r].setWithExplicit("domains",i),V6e(e,r),e.component.data.isFaceted){let o=e;for(;!Zr(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[r]==="shared")for(let a of i.value)Ba(a)&&(a.data=Xy+a.data.replace(Xy,""))}}}function U6e(e){for(let r of e.children)fF(r);let t=e.component.scales;for(let r of J(t)){let i,n=null;for(let o of e.children){let s=o.component.scales[r];if(s){i===void 0?i=s.getWithExplicit("domains"):i=Bo(i,s.getWithExplicit("domains"),"domains","scale",cF);let a=s.get("selectionExtent");n&&a&&n.param!==a.param&&ie(Q.NEEDS_SAME_SELECTION),n=a}}t[r].setWithExplicit("domains",i),n&&t[r].set("selectionExtent",n,!0)}}function q6e(e,t,r,i){if(e==="unaggregated"){let{valid:n,reason:o}=FK(t,r);if(!n){ie(o);return}}else if(e===void 0&&i.useUnaggregatedDomain){let{valid:n}=FK(t,r);if(n)return"unaggregated"}return e}function j6e(e,t){let r=e.getScaleComponent(t).get("type"),{encoding:i}=e,n=q6e(e.scaleDomain(t),e.typedFieldDef(t),r,e.config.scale);return n!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:n}),t==="x"&&jt(i.x2)?jt(i.x)?Bo(rh(r,n,e,"x"),rh(r,n,e,"x2"),"domain","scale",cF):rh(r,n,e,"x2"):t==="y"&&jt(i.y2)?jt(i.y)?Bo(rh(r,n,e,"y"),rh(r,n,e,"y2"),"domain","scale",cF):rh(r,n,e,"y2"):rh(r,n,e,t)}function W6e(e,t,r){return e.map(i=>({signal:`{data: ${Bd(i,{timeUnit:r,type:t})}}`}))}function lF(e,t,r){let i=cr(r)?.unit;return t==="temporal"||i?W6e(e,t,i):[e]}function rh(e,t,r,i){let{encoding:n,markDef:o,mark:s,config:a,stack:l}=r,u=jt(n[i]),{type:c}=u,f=u.timeUnit,h=rX({invalid:co("invalid",o,a),isPath:Fn(s)});if(cG(t)){let m=rh(e,void 0,r,i),g=lF(t.unionWith,c,f);return Vs([...g,...m.value])}else{if(Ae(t))return Vs([t]);if(t&&t!=="unaggregated"&&!UR(t))return Vs(lF(t,c,f))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return Pn([[0,1]]);let m=r.requestDataName(h);return Pn([{data:m,field:r.vgField(i,{suffix:"start"})},{data:m,field:r.vgField(i,{suffix:"end"})}])}let p=fi(i)&&ce(u)?G6e(r,i,e):void 0;if(On(u)){let m=lF([u.datum],c,f);return Pn(m)}let d=u;if(t==="unaggregated"){let{field:m}=u;return Pn([{data:r.requestDataName(h),field:ge({field:m,aggregate:"min"})},{data:r.requestDataName(h),field:ge({field:m,aggregate:"max"})}])}else if(vt(d.bin)){if(Yt(e))return e==="bin-ordinal"?Pn([]):Pn([{data:sm(p)?r.requestDataName(h):r.requestDataName(Ft.Raw),field:r.vgField(i,Nl(d,i)?{binSuffix:"range"}:{}),sort:p===!0||!me(p)?{field:r.vgField(i,{}),op:"min"}:p}]);{let{bin:m}=d;if(vt(m)){let g=Km(r,d.field,m);return Pn([new Jr(()=>{let v=r.getSignalName(g);return`[${v}.start, ${v}.stop]`})])}else return Pn([{data:r.requestDataName(h),field:r.vgField(i,{})}])}}else if(d.timeUnit&&We(["time","utc"],e)){let m=n[Ii(i)];if(k3(d,m,o,a)){let g=r.requestDataName(h),v=Io({fieldDef:d,fieldDef2:m,markDef:o,config:a}),b=tc(s)&&v!==.5&&Mt(i);return Pn([{data:g,field:r.vgField(i,b?{suffix:Vd}:{})},{data:g,field:r.vgField(i,{suffix:b?Gd:"end"})}])}}return p?Pn([{data:sm(p)?r.requestDataName(h):r.requestDataName(Ft.Raw),field:r.vgField(i),sort:p}]):Pn([{data:r.requestDataName(h),field:r.vgField(i)}])}function uF(e,t){let{op:r,field:i,order:n}=e;return{op:r??(t?"sum":Wf),...i?{field:ci(i)}:{},...n?{order:n}:{}}}function V6e(e,t){let r=e.component.scales[t],i=e.specifiedScales[t].domain,n=e.fieldDef(t)?.bin,o=UR(i)?i:void 0,s=Ia(n)&&mm(n.extent)?n.extent:void 0;(o||s)&&r.set("selectionExtent",o??s,!0)}function G6e(e,t,r){if(!Yt(r))return;let i=e.fieldDef(t),n=i.sort;if(_3(n))return{op:"min",field:Gl(i,t),order:"ascending"};let{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if($n(n)){let a=o&&!s.has(n.field);return uF(n,a)}else if(LG(n)){let{encoding:a,order:l}=n,u=e.fieldDef(a),{aggregate:c,field:f}=u,h=o&&!s.has(f);if(fs(c)||Hs(c))return uF({field:ge(u),order:l},h);if(pm(c)||!c)return uF({op:c,field:f,order:l},h)}else{if(n==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(We(["ascending",void 0],n))return!0}}function FK(e,t){let{aggregate:r,type:i}=e;return r?he(r)&&!MV.has(r)?{valid:!1,reason:Q.unaggregateDomainWithNonSharedDomainOp(r)}:i==="quantitative"&&t==="log"?{valid:!1,reason:Q.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:Q.unaggregateDomainHasNoEffectForRawField(e)}}function cF(e,t,r,i){return e.explicit&&t.explicit&&ie(Q.mergeConflictingDomainProperty(r,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Y6e(e){let t=An(e.map(s=>{if(Ba(s)){let{sort:a,...l}=s;return l}return s}),Be),r=An(e.map(s=>{if(Ba(s)){let a=s.sort;return a!==void 0&&!sm(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Be);if(t.length===0)return;if(t.length===1){let s=e[0];if(Ba(s)&&r.length>0){let a=r[0];if(r.length>1){ie(Q.MORE_THAN_ONE_SORT);let l=r.filter(u=>me(u)&&"op"in u&&u.op!=="min");r.every(u=>me(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(me(a)&&"field"in a){let l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}let i=An(r.map(s=>sm(s)||!("op"in s)||he(s.op)&&_e(TV,s.op)?s:(ie(Q.domainSortDropped(s)),!0)),Be),n;i.length===1?n=i[0]:i.length>1&&(ie(Q.MORE_THAN_ONE_SORT),n=!0);let o=An(e.map(s=>Ba(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...n?{sort:n}:{}}:{fields:t,...n?{sort:n}:{}}}function Zm(e){if(Ba(e)&&he(e.field))return e.field;if(FV(e)){let t;for(let r of e.fields)if(Ba(r)&&he(r.field)){if(!t)t=r.field;else if(t!==r.field)return ie(Q.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}return ie(Q.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}else if(OV(e)){ie(Q.FACETED_INDEPENDENT_SAME_SOURCE);let t=e.fields[0];return he(t)?t:void 0}}function Qf(e,t){let i=e.component.scales[t].get("domains").map(n=>(Ba(n)&&(n.data=e.lookupDataSource(n.data)),n));return Y6e(i)}function hF(e){return Ys(e)||Xm(e)?e.children.reduce((t,r)=>t.concat(hF(r)),OK(e)):OK(e)}function OK(e){return J(e.component.scales).reduce((t,r)=>{let i=e.component.scales[r];if(i.merged)return t;let n=i.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:c,...f}=n,h=X6e(n.range,o,r,e),p=Qf(e,r),d=a?gX(e,a,i,p):null;return t.push({name:o,type:s,...p?{domain:p}:{},...d?{domainRaw:d}:{},range:h,...c!==void 0?{reverse:c}:{},...f}),t},[])}function X6e(e,t,r,i){if(Mt(r)){if(Po(e))return{step:{signal:`${t}_step`}}}else if(me(e)&&Ba(e))return{...e,data:i.lookupDataSource(e.data)};return e}var Ky=class extends Ln{constructor(t,r){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",r)}domainHasZero(){let t=this.get("type");if(We([Kr.LOG,Kr.TIME,Kr.UTC],t))return"definitely-not";let r=this.get("zero");if(r===!0||r===void 0&&We([Kr.LINEAR,Kr.SQRT,Kr.POW],t))return"definitely";let i=this.get("domains");if(i.length>0){let n=!1,o=!1,s=!1;for(let a of i){if(K(a)){let l=a[0],u=a[a.length-1];if(ut(l)&&ut(u))if(l<=0&&u>=0){n=!0;continue}else{o=!0;continue}}s=!0}if(n)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}};var K6e=["range","scheme"];function IK(e){let t=e.component.scales;for(let r of dm){let i=t[r];if(!i)continue;let n=Z6e(r,e);i.setWithExplicit("range",n)}}function $K(e,t){let r=e.fieldDef(t);if(r?.bin){let{bin:i,field:n}=r,o=Dr(t),s=e.getName(o);if(me(i)&&i.binned&&i.step!==void 0)return new Jr(()=>{let a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(vt(i)){let a=Km(e,n,i);return new Jr(()=>{let l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function Z6e(e,t){let r=t.specifiedScales[e],{size:i}=t,o=t.getScaleComponent(e).get("type");for(let f of K6e)if(r[f]!==void 0){let h=my(o,f),p=c3(e,f);if(!h)ie(Q.scalePropertyNotWorkWithScaleType(o,f,e));else if(p)ie(p);else switch(f){case"range":{let d=r.range;if(K(d)){if(Mt(e))return Vs(d.map(m=>{if(m==="width"||m==="height"){let g=t.getName(m),v=t.getSignalName.bind(t);return Jr.fromName(v,g)}return m}))}else if(me(d))return Vs({data:t.requestDataName(Ft.Main),field:d.field,sort:{op:"min",field:t.vgField(e)}});return Vs(d)}case"scheme":return Vs(J6e(r[f]))}}let s=e===Rt||e==="xOffset"?"width":"height",a=i[s];if(No(a)){if(Mt(e))if(Yt(o)){let f=BK(a,t,e);if(f)return Vs({step:f})}else ie(Q.stepDropped(s));else if(Qu(e)){let f=e===Bs?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){let d=zK(a,o);if(d)return Vs(d)}}}let{rangeMin:l,rangeMax:u}=r,c=Q6e(e,t);return(l!==void 0||u!==void 0)&&my(o,"rangeMin")&&K(c)&&c.length===2?Vs([l??c[0],u??c[1]]):Pn(c)}function J6e(e){return uG(e)?{scheme:e.name,...qr(e,["name"])}:{scheme:e}}function NK(e,t,r,{center:i}={}){let n=Dr(e),o=t.getName(n),s=t.getSignalName.bind(t);return e===lr&&Bi(r)?i?[Jr.fromName(a=>`${s(a)}/2`,o),Jr.fromName(a=>`-${s(a)}/2`,o)]:[Jr.fromName(s,o),0]:i?[Jr.fromName(a=>`-${s(a)}/2`,o),Jr.fromName(a=>`${s(a)}/2`,o)]:[0,Jr.fromName(s,o)]}function Q6e(e,t){let{size:r,config:i,mark:n,encoding:o}=t,{type:s}=jt(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case Rt:case lr:{if(We(["point","band"],l)){let f=HK(e,r,i.view);if(No(f))return{step:BK(f,t,e)}}return NK(e,t,l)}case Bs:case Ol:return eSe(e,t,l);case Lo:{let f=iSe(n,i),h=nSe(n,r,t,i);return ec(l)?rSe(f,h,tSe(l,i,u,e)):[f,h]}case rn:return[0,Math.PI*2];case Pa:return[0,360];case Tn:return[0,new Jr(()=>{let f=t.getSignalName(Zr(t.parent)?"child_width":"width"),h=t.getSignalName(Zr(t.parent)?"child_height":"height");return`min(${f},${h})/2`})];case os:return{step:1e3/i.scale.framesPerSecond};case ls:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case us:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Tr:return"symbol";case jr:case Rn:case Mn:return l==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":n==="rect"||n==="geoshape"?"heatmap":"ramp";case lo:case ss:case as:return[i.scale.minOpacity,i.scale.maxOpacity]}}function BK(e,t,r){let{encoding:i}=t,n=t.getScaleComponent(r),o=hm(r),s=i[o];if(mM({step:e,offsetIsDiscrete:Xe(s)&&u3(s.type)})==="offset"&&iM(i,o)){let l=t.getScaleComponent(o),c=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){let h=l.get("paddingInner")??l.get("padding")??0,p=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${h}, ${p})`}let f=n.get("paddingInner")??n.get("padding");return{signal:`${e.step} * ${c} / (1-${IV(f)})`}}else return e.step}function zK(e,t){if(mM({step:e,offsetIsDiscrete:Yt(t)})==="offset")return{step:e.step}}function eSe(e,t,r){let i=e===Bs?"x":"y",n=t.getScaleComponent(i);if(!n)return NK(i,t,r,{center:!0});let o=n.get("type"),s=t.scaleName(i),{markDef:a,config:l}=t;if(o==="band"){let u=HK(i,t.size,t.config.view);if(No(u)){let c=zK(u,r);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{let u=t.encoding[i];if(ce(u)&&u.timeUnit){let c=e3(u.timeUnit,d=>`scale('${s}', ${d})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,h=Io({fieldDef:u,markDef:a,config:l})-.5,p=h!==0?` + ${h}`:"";if(f){let d=Ae(f)?`${f.signal}/2`+p:`${f/2+h}`,m=Ae(f)?`(1 - ${f.signal}/2)`+p:`${1-f/2+h}`;return[{signal:`${d} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return fR(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function HK(e,t,r){let i=e===Rt?"width":"height",n=t[i];return n||Fm(r,i)}function tSe(e,t,r,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return r!==void 0&&K(r)?r.length+1:(ie(Q.domainRequiredForThresholdScale(i)),3)}}function rSe(e,t,r){let i=()=>{let n=uo(t),o=uo(e),s=`(${n} - ${o}) / (${r} - 1)`;return`sequence(${o}, ${n} + ${s}, ${s})`};return Ae(t)?new Jr(i):{signal:i()}}function iSe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Q.incompatibleChannel("size",e))}var LK=.95;function nSe(e,t,r,i){let n={x:$K(r,"x"),y:$K(r,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;let o=PK(t,n,i.view);return ut(o)?o-1:new Jr(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;let o=PK(t,n,i.view);return ut(o)?Math.pow(LK*o,2):new Jr(()=>`pow(${LK} * ${o.signal}, 2)`)}}throw new Error(Q.incompatibleChannel("size",e))}function PK(e,t,r){let i=No(e.width)?e.width.step:Ry(r,"width"),n=No(e.height)?e.height.step:Ry(r,"height");return t.x||t.y?new Jr(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:n].join(", ")})`):Math.min(i,n)}function dF(e,t){Et(e)?oSe(e,t):qK(e,t)}function oSe(e,t){let r=e.component.scales,{config:i,encoding:n,markDef:o,specifiedScales:s}=e;for(let a of J(r)){let l=s[a],u=r[a],c=e.getScaleComponent(a),f=jt(n[a]),h=l[t],p=c.get("type"),d=c.get("padding"),m=c.get("paddingInner"),g=my(p,t),v=c3(a,t);if(h!==void 0&&(g?v&&ie(v):ie(Q.scalePropertyNotWorkWithScaleType(p,t,a))),g&&v===void 0)if(h!==void 0){let b=f.timeUnit,y=f.type;switch(t){case"domainMax":case"domainMin":Us(l[t])||y==="temporal"||b?u.set(t,{signal:Bd(l[t],{type:y,timeUnit:b})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{let b=ae(UK,t)?UK[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:p,scalePadding:d,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:i,hasNestedOffsetScale:R3(n,a),hasSecondaryRangeChannel:!!n[Ii(a)]}):i.scale[t];b!==void 0&&u.set(t,b,!1)}}}var UK={bins:({model:e,fieldOrDatumDef:t})=>ce(t)?sSe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>aSe(e,t.type),nice:({scaleType:e,channel:t,domain:r,domainMin:i,domainMax:n,fieldOrDatumDef:o})=>lSe(e,t,r,i,n,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:r,markDef:i,config:n})=>uSe(e,t,n.scale,r,i,n.bar),paddingInner:({scalePadding:e,channel:t,markDef:r,scaleType:i,config:n,hasNestedOffsetScale:o})=>cSe(e,t,r.type,i,n.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:r,scalePaddingInner:i,config:n,hasNestedOffsetScale:o})=>fSe(e,t,r,i,n.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:r,config:i})=>{let n=ce(e)?e.sort:void 0;return hSe(t,n,r,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:r,markDef:i,scaleType:n,config:o,hasSecondaryRangeChannel:s})=>dSe(e,t,r,i,n,o.scale,s)};function pF(e){Et(e)?IK(e):qK(e,"range")}function qK(e,t){let r=e.component.scales;for(let i of e.children)t==="range"?pF(i):dF(i,t);for(let i of J(r)){let n;for(let o of e.children){let s=o.component.scales[i];if(s){let a=s.getWithExplicit(t);n=Bo(n,a,t,"scale",e6((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}r[i].setWithExplicit(t,n)}}function sSe(e,t){let r=t.bin;if(vt(r)){let i=Km(e,t.field,r);return new Jr(()=>e.getSignalName(i))}else if(ur(r)&&Ia(r)&&r.step!==void 0)return{step:r.step}}function aSe(e,t){if(We([jr,Rn,Mn],e)&&t!=="nominal")return"hcl"}function lSe(e,t,r,i,n,o){if(!(_i(o)?.bin||K(r)||n!=null||i!=null||We([Kr.TIME,Kr.UTC],e)))return Mt(t)?!0:void 0}function uSe(e,t,r,i,n,o){if(Mt(e)){if(js(t)){if(r.continuousPadding!==void 0)return r.continuousPadding;let{type:s,orient:a}=n;if(s==="bar"&&!(ce(i)&&(i.bin||i.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Kr.POINT)return r.pointPadding}}function cSe(e,t,r,i,n,o=!1){if(e===void 0){if(Mt(t)){let{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=n;return o?c:yt(s,r==="bar"?a:r==="tick"?u:l)}else if(Qu(t)&&i===Kr.BAND)return n.offsetBandPaddingInner}}function fSe(e,t,r,i,n,o=!1){if(e===void 0){if(Mt(t)){let{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=n;if(o)return a;if(r===Kr.BAND)return yt(s,Ae(i)?{signal:`${i.signal}/2`}:i/2)}else if(Qu(t)){if(r===Kr.POINT)return .5;if(r===Kr.BAND)return n.offsetBandPaddingOuter}}}function hSe(e,t,r,i){if(r==="x"&&i.xReverse!==void 0)return Bi(e)&&t==="descending"?Ae(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(Bi(e)&&t==="descending")return!0}function dSe(e,t,r,i,n,o,s){if(!!r&&r!=="unaggregated"&&Bi(n)){if(K(r)){let l=r[0],u=r[r.length-1];if(ut(l)&&l<=0&&ut(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!ec(n))return!0;if(!(ce(t)&&t.bin)&&We([...an,...yV],e)){let{orient:l,type:u}=i;return We(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:We(["bar","area"],u)&&!s?!0:o?.zero}return!1}function jK(e,t,r,i,n=!1){let o=pSe(t,r,i,n),{type:s}=e;return fi(t)?s!==void 0?mG(t,s)?ce(r)&&!pG(s,r.type)?(ie(Q.scaleTypeNotWorkWithFieldDef(s,o)),o):s:(ie(Q.scaleTypeNotWorkWithChannel(t,s,o)),o):o:null}function pSe(e,t,r,i){switch(t.type){case"nominal":case"ordinal":{if(Ju(e)||W5(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ie(Q.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(j5(e))return"band";if(Mt(e)||Qu(e)){if(We(["rect","bar","image","rule","tick"],r.type)||i)return"band"}else if(r.type==="arc"&&e in q5)return"band";let n=r[Dr(e)];return Pl(n)||ic(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return Ju(e)?"time":W5(e)==="discrete"?(ie(Q.discreteChannelCannotEncode(e,"temporal")),"ordinal"):ce(t)&&t.timeUnit&&cr(t.timeUnit).utc?"utc":j5(e)?"band":"time";case"quantitative":return Ju(e)?ce(t)&&vt(t.bin)?"bin-ordinal":"linear":W5(e)==="discrete"?(ie(Q.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):j5(e)?"band":"linear";case"geojson":return}throw new Error(Q.invalidFieldType(t.type))}function WK(e,{ignoreRange:t}={}){VK(e),fF(e);for(let r of dG)dF(e,r);t||pF(e)}function VK(e){Et(e)?e.component.scales=mSe(e):e.component.scales=vSe(e)}function mSe(e){let{encoding:t,mark:r,markDef:i}=e,n={};for(let o of dm){let s=jt(t[o]);if(s&&r===h3&&o===Tr&&s.type===Ua)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});let l=R3(t,o),u=jK(a,o,s,i,l);n[o]=new Ky(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return n}var gSe=e6((e,t)=>zR(e)-zR(t));function vSe(e){var t;let r=e.component.scales={},i={},n=e.component.resolve;for(let o of e.children){VK(o);for(let s of J(o.component.scales))if((t=n.scale)[s]??(t[s]=A6(s,e)),n.scale[s]==="shared"){let a=i[s],l=o.component.scales[s].getWithExplicit("type");a?nG(a.value,l.value)?i[s]=Bo(a,l,"type","scale",gSe):(n.scale[s]="independent",delete i[s]):i[s]=l}}for(let o of J(i)){let s=e.scaleName(o,!0),a=i[o];r[o]=new Ky(s,a);for(let l of e.children){let u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return r}var Zy=class{constructor(){this.nameMap={}}rename(t,r){this.nameMap[t]=r}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}};function Et(e){return e?.type==="unit"}function Zr(e){return e?.type==="facet"}function Xm(e){return e?.type==="concat"}function Ys(e){return e?.type==="layer"}var e0=class{constructor(t,r,i,n,o,s,a){this.type=r,this.parent=i,this.config=o,this.parent=i,this.config=o,this.view=wr(a),this.name=t.name??n,this.title=Na(t.title)?{text:t.title}:t.title?wr(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new Zy,this.projectionNameMap=i?i.projectionNameMap:new Zy,this.signalNameMap=i?i.signalNameMap:new Zy,this.data=t.data,this.description=t.description,this.transforms=XY(t.transform??[]),this.layout=r==="layer"||r==="unit"?{}:dY(t,r,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:oc(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new Ln,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?De(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){WK(this)}parseProjection(){sF(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){nF(this)}assembleEncodeFromView(t){let{style:r,...i}=t,n={};for(let o of J(i)){let s=i[o];s!==void 0&&(n[o]=bt(s))}return n}assembleGroupEncodeEntry(t){let r={};return this.view&&(r=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(r.description=bt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...r}:ht(r)?void 0:r}assembleLayout(){if(!this.layout)return;let{spacing:t,...r}=this.layout,{component:i,config:n}=this,o=cK(i.layoutHeaders,n);return{padding:t,...this.assembleDefaultLayout(),...r,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:t}=this.component,r=[];for(let i of Pi)t[i].title&&r.push(sK(this,i));for(let i of Wm)r=r.concat(uK(this,i));return r}assembleAxes(){return tK(this.component.axes,this.config)}assembleLegends(){return R6(this)}assembleProjections(){return yK(this)}assembleTitle(){let{encoding:t,...r}=this.title??{},i={...G5(this.config.title).nonMarkTitleProperties,...r,...t?{encode:{update:t}}:{}};if(i.text)return We(["unit","layer"],this.type)?We(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),ht(i)?void 0:i}assembleGroup(t=[]){let r={};t=t.concat(this.assembleSignals()),t.length>0&&(r.signals=t);let i=this.assembleLayout();i&&(r.layout=i),r.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let n=!this.parent||Zr(this.parent)?hF(this):[];n.length>0&&(r.scales=n);let o=this.assembleAxes();o.length>0&&(r.axes=o);let s=this.assembleLegends();return s.length>0&&(r.legends=s),r}getName(t){return wt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ft[t].toLowerCase())}requestDataName(t){let r=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[r]=(i[r]||0)+1,r}getSizeSignalRef(t){if(Zr(this.parent)){let r=k6(t),i=Uf(r),n=this.component.scales[i];if(n&&!n.merged){let o=n.get("type"),s=n.get("range");if(Yt(o)&&Po(s)){let a=n.get("name"),l=Qf(this,i),u=Zm(l);if(u){let c=ge({aggregate:"distinct",field:u},{expr:"datum"});return{signal:eF(a,n,c)}}else return ie(Q.unknownField(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){let r=this.component.data.outputNodes[t];return r?r.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,r){this.signalNameMap.rename(t,r)}renameScale(t,r){this.scaleNameMap.rename(t,r)}renameProjection(t,r){this.projectionNameMap.rename(t,r)}scaleName(t,r){if(r)return this.getName(t);if(H5(t)&&fi(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let r=this.component.scales[t];return r&&!r.merged?r:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){let r=this.getScaleComponent(t);return r?r.get("type"):void 0}getSelectionComponent(t,r){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,r)),!i)throw new Error(Q.selectionNotFound(r));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}},eg=class extends e0{vgField(t,r={}){let i=this.fieldDef(t);if(i)return ge(i,r)}reduceFieldDef(t,r){return XG(this.getMapping(),(i,n,o)=>{let s=_i(n);return s?t(i,s,o):i},r)}forEachFieldDef(t,r){Cy(this.getMapping(),(i,n)=>{let o=_i(i);o&&t(o,n)},r)}};var tg=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r,this.transform=De(r);let i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];let n=this.transform.resolve??"shared";this.transform.resolve=n}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Be(this.transform)}`}assemble(){let{density:t,...r}=this.transform,i={type:"kde",field:t,...r};return i.resolve=this.transform.resolve,i}};var rg=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r,this.transform=De(r)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Be(this.transform)}`}assemble(){let{extent:t,param:r}=this.transform;return{type:"extent",field:t,signal:r}}};var ig=class e extends Ve{clone(){return new e(this.parent,De(this.transform))}constructor(t,r){super(t),this.transform=r,this.transform=De(r);let{flatten:i,as:n=[]}=this.transform;this.transform.as=i.map((o,s)=>n[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Be(this.transform)}`}assemble(){let{flatten:t,as:r}=this.transform;return{type:"flatten",fields:t,as:r}}};var ng=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r,this.transform=De(r);let i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Be(this.transform)}`}assemble(){let{fold:t,as:r}=this.transform;return{type:"fold",fields:t,as:r}}};var og=class e extends Ve{clone(){return new e(null,De(this.fields),this.geojson,this.signal)}static parseAll(t,r){if(r.component.projection&&!r.component.projection.isFit)return t;let i=0;for(let n of[[on,nn],[sn,Dn]]){let o=n.map(s=>{let a=jt(r.encoding[s]);return ce(a)?a.field:On(a)?{expr:`${a.datum}`}:hi(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new e(t,o,null,r.getName(`geojson_${i++}`)))}if(r.channelHasField(Tr)){let n=r.typedFieldDef(Tr);n.type===Ua&&(t=new e(t,null,n.field,r.getName(`geojson_${i++}`)))}return t}constructor(t,r,i,n){super(t),this.fields=r,this.geojson=i,this.signal=n}dependentFields(){let t=(this.fields??[]).filter(he);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Be(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}};var sg=class e extends Ve{clone(){return new e(null,this.projection,De(this.fields),De(this.as))}constructor(t,r,i,n){super(t),this.projection=r,this.fields=i,this.as=n}static parseAll(t,r){if(!r.projectionName())return t;for(let i of[[on,nn],[sn,Dn]]){let n=i.map(s=>{let a=jt(r.encoding[s]);return ce(a)?a.field:On(a)?{expr:`${a.datum}`}:hi(a)?{expr:`${a.value}`}:void 0}),o=i[0]===sn?"2":"";(n[0]||n[1])&&(t=new e(t,r.projectionName(),n,[r.getName(`x${o}`),r.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(he))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Be(this.fields)} ${Be(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}};var t0=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){let{start:r=0,stop:i,step:n}=t;return{signal:`sequence(${[r,i,...n?[n]:[]].join(",")})`}}static makeFromTransform(t,r){return new e(t,r)}static makeFromEncoding(t,r){let i=r.encoding,n=i.x,o=i.y;if(ce(n)&&ce(o)){let s=n.impute?n:o.impute?o:void 0;if(s===void 0)return;let a=n.impute?o:o.impute?n:void 0,{method:l,value:u,frame:c,keyvals:f}=s.impute,h=O3(r.mark,i);return new e(t,{impute:s.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...h.length?{groupby:h}:{}})}return null}hash(){return`Impute ${Be(this.transform)}`}assemble(){let{impute:t,key:r,keyvals:i,method:n,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:r,...i?{keyvals:RY(i)?this.processSequence(i):i}:{},method:"value",...o?{groupby:o}:{},value:!n||n==="value"?s:null};if(n&&n!=="value"){let u={type:"window",as:[`imputed_${t}_value`],ops:[n],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}};var ag=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r,this.transform=De(r);let i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??r.on,i[1]??r.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Be(this.transform)}`}assemble(){let{loess:t,on:r,...i}=this.transform;return{type:"loess",x:r,y:t,...i}}};var lg=class e extends Ve{clone(){return new e(null,De(this.transform),this.secondary)}constructor(t,r,i){super(t),this.transform=r,this.secondary=i}static make(t,r,i,n){let o=r.component.data.sources,{from:s}=i,a=null;if(MY(s)){let l=mF(s.data,o);l||(l=new Uo(s.data),o.push(l));let u=r.getName(`lookup_${n}`);a=new Wr(l,u,Ft.Lookup,r.component.data.outputNodeRefCounts),r.component.data.outputNodes[u]=a}else if(FY(s)){let l=s.param;i={as:l,...i};let u;try{u=r.getSelectionComponent(wt(l),l)}catch{throw new Error(Q.cannotLookupVariableParameter(l))}if(a=u.materialized,!a)throw new Error(Q.noSameUnitLookup(l))}return new e(t,i,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ve(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Be({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ve(this.transform.as)}:{}};else{let r=this.transform.as;he(r)||(ie(Q.NO_FIELDS_NEEDS_AS),r="_lookup"),t={as:[r]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}};var ug=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r,this.transform=De(r);let i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Be(this.transform)}`}assemble(){let{quantile:t,...r}=this.transform;return{type:"quantile",field:t,...r}}};var cg=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r,this.transform=De(r);let i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??r.on,i[1]??r.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Be(this.transform)}`}assemble(){let{regression:t,on:r,...i}=this.transform;return{type:"regression",x:r,y:t,...i}}};var fg=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r}addDimensions(t){this.transform.groupby=An((this.transform.groupby??[]).concat(t),r=>r)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Be(this.transform)}`}assemble(){let{pivot:t,value:r,groupby:i,limit:n,op:o}=this.transform;return{type:"pivot",field:t,value:r,...n!==void 0?{limit:n}:{},...o!==void 0?{op:o}:{},...i!==void 0?{groupby:i}:{}}}};var hg=class e extends Ve{clone(){return new e(null,De(this.transform))}constructor(t,r){super(t),this.transform=r}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Be(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}};function GK(e){let t=0;function r(i,n){if(i instanceof Uo&&!i.isGenerator&&!uc(i.data)&&(e.push(n),n={name:null,source:n.name,transform:[]}),i instanceof Ui&&(i.parent instanceof Uo&&!n.source?(n.format={...n.format,parse:i.assembleFormatParse()},n.transform.push(...i.assembleTransforms(!0))):n.transform.push(...i.assembleTransforms())),i instanceof Zs){n.name||(n.name=`data_${t++}`),!n.source||n.transform.length>0?(e.push(n),i.data=n.name):i.data=n.source,e.push(...i.assemble());return}switch((i instanceof eh||i instanceof th||i instanceof Qd||i instanceof Vl||i instanceof Jd||i instanceof sg||i instanceof ps||i instanceof lg||i instanceof gc||i instanceof Ka||i instanceof ng||i instanceof ig||i instanceof tg||i instanceof ag||i instanceof ug||i instanceof cg||i instanceof Xa||i instanceof hg||i instanceof fg||i instanceof rg)&&n.transform.push(i.assemble()),(i instanceof Ya||i instanceof Gs||i instanceof t0||i instanceof Xl||i instanceof og)&&n.transform.push(...i.assemble()),i instanceof Wr&&(n.source&&n.transform.length===0?i.setSource(n.source):i.parent instanceof Wr?i.setSource(n.name):(n.name||(n.name=`data_${t++}`),i.setSource(n.name),i.numChildren()===1&&(e.push(n),n={name:null,source:n.name,transform:[]}))),i.numChildren()){case 0:i instanceof Wr&&(!n.source||n.transform.length>0)&&e.push(n);break;case 1:r(i.children[0],n);break;default:{n.name||(n.name=`data_${t++}`);let o=n.name;!n.source||n.transform.length>0?e.push(n):o=n.source;for(let s of i.children)r(s,{name:null,source:o,transform:[]});break}}}return r}function YK(e){let t=[],r=GK(t);for(let i of e.children)r(i,{source:e.name,name:null,transform:[]});return t}function XK(e,t){let r=[],i=GK(r),n=0;for(let s of e.sources){s.hasName()||(s.dataName=`source_${n++}`);let a=s.assemble();i(s,a)}for(let s of r)s.transform.length===0&&delete s.transform;let o=0;for(let[s,a]of r.entries())(a.transform??[]).length===0&&!a.source&&r.splice(o++,0,r.splice(s,1)[0]);for(let s of r)for(let a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(let s of r)s.name in t&&(s.values=t[s.name]);return r}function bSe(e){return e==="top"||e==="left"||Ae(e)?"header":"footer"}function ZK(e){for(let t of Pi)ySe(e,t);KK(e,"x"),KK(e,"y")}function ySe(e,t){let{facet:r,config:i,child:n,component:o}=e;if(e.channelHasField(t)){let s=r[t],a=mc("title",null,i,t),l=Ul(s,i,{allowDisabling:!0,includeDefault:a===void 0||!!a});n.component.layoutHeaders[t].title&&(l=K(l)?l.join(", "):l,l+=` / ${n.component.layoutHeaders[t].title}`,n.component.layoutHeaders[t].title=null);let u=mc("labelOrient",s.header,i,t),c=s.header!==null?yt(s.header?.labels,i.header.labels,!0):!1,f=We(["bottom","right"],u)?"footer":"header";o.layoutHeaders[t]={title:s.header!==null?l:null,facetFieldDef:s,[f]:t==="facet"?[]:[JK(e,t,c)]}}}function JK(e,t,r){let i=t==="row"?"height":"width";return{labels:r,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function KK(e,t){let{child:r}=e;if(r.component.axes[t]){let{layoutHeaders:i,resolve:n}=e.component;if(n.axis[t]=Ym(n,t),n.axis[t]==="shared"){let o=t==="x"?"column":"row",s=i[o];for(let a of r.component.axes[t]){let l=bSe(a.get("orient"));s[l]??(s[l]=[JK(e,o,!1)]);let u=qm(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function QK(e){G6(e),V6(e,"width"),V6(e,"height")}function eZ(e){G6(e);let t=e.layout.columns===1?"width":"childWidth",r=e.layout.columns===void 0?"height":"childHeight";V6(e,t),V6(e,r)}function G6(e){for(let t of e.children)t.parseLayoutSize()}function V6(e,t){let r=k6(t),i=Uf(r),n=e.component.resolve,o=e.component.layoutSize,s;for(let a of e.children){let l=a.component.layoutSize.getWithExplicit(r),u=n.scale[i]??A6(i,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=Bo(s,l,r,"")}else s=l}if(s){for(let a of e.children)e.renameSignal(a.getName(r),e.getName(t)),a.component.layoutSize.set(r,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function tZ(e){let{size:t,component:r}=e;for(let i of an){let n=Dr(i);if(t[n]){let o=t[n];r.layoutSize.set(n,No(o)?"step":o,!0)}else{let o=xSe(e,n);r.layoutSize.set(n,o,!1)}}}function xSe(e,t){let r=t==="width"?"x":"y",i=e.config,n=e.getScaleComponent(r);if(n){let o=n.get("type"),s=n.get("range");if(Yt(o)){let a=Fm(i.view,t);return Po(s)||No(a)?"step":a}else return Dy(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return Dy(i.view,t);{let o=Fm(i.view,t);return No(o)?o.step:o}}}function Y6(e,t,r){return ge(t,{suffix:`by_${ge(e)}`,...r})}var X6=class e extends eg{constructor(t,r,i,n){super(t,"facet",r,i,n,t.resolve),this.child=dg(t.spec,this,this.getName("child"),void 0,n),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!zl(t))return{facet:this.initFacetFieldDef(t,"facet")};let r=J(t),i={};for(let n of r){if(![Fo,Oo].includes(n)){ie(Q.incompatibleChannel(n,"facet"));break}let o=t[n];if(o.field===void 0){ie(Q.emptyFieldDef(o,n));break}i[n]=this.initFacetFieldDef(o,n)}return i}initFacetFieldDef(t,r){let i=Sy(t,r);return i.header?i.header=wr(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return ae(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=ih(this),this.child.parseData()}parseLayoutSize(){G6(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>zi(t))&&vm(Pd)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),ZK(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){let t={};for(let r of Pi)for(let i of Vm){let n=this.component.layoutHeaders[r],o=n[i],{facetFieldDef:s}=n;if(s){let a=mc("titleOrient",s.header,this.config,r);if(["right","bottom"].includes(a)){let l=jm(r,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o?.[0]){let a=r==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";r!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][r]=.5),n.title&&(t.offset??(t.offset={}),t.offset[r==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){let{column:t,row:r}=this.facet,i=t?this.columnDistinctSignal():r?1:void 0,n="all";return(!r&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(n="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:n}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof e))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof e?{...this.channelHasField("column")?{encode:{update:{columns:{field:ge(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){let t=[],r=[],i=[];if(this.child instanceof e){if(this.child.channelHasField("column")){let n=ge(this.child.facet.column);t.push(n),r.push("distinct"),i.push(`distinct_${n}`)}}else for(let n of an){let o=this.child.component.scales[n];if(o&&!o.merged){let s=o.get("type"),a=o.get("range");if(Yt(s)&&Po(a)){let l=Qf(this.child,n),u=Zm(l);u?(t.push(u),r.push("distinct"),i.push(`distinct_${u}`)):ie(Q.unknownField(n))}}}return{fields:t,ops:r,as:i}}assembleFacet(){let{name:t,data:r}=this.component.data.facetRoot,{row:i,column:n}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(let c of Pi){let f=this.facet[c];if(f){l.push(ge(f));let{bin:h,sort:p}=f;if(vt(h)&&l.push(ge(f,{binSuffix:"end"})),$n(p)){let{field:d,op:m=Wf}=p,g=Y6(f,p);i&&n?(o.push(g),s.push("max"),a.push(g)):(o.push(d),s.push(m),a.push(g))}else if(K(p)){let d=Gl(f,c);o.push(d),s.push("max"),a.push(d)}}}let u=!!i&&!!n;return{name:t,data:r,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){let{facet:r}=this,i=r[t];return i?$n(i.sort)?[Y6(i,i.sort,{expr:"datum"})]:K(i.sort)?[Gl(i,t,{expr:"datum"})]:[ge(i,{expr:"datum"})]:[]}facetSortOrder(t){let{facet:r}=this,i=r[t];if(i){let{sort:n}=i;return[($n(n)?n.order:!K(n)&&n)||"ascending"]}return[]}assembleLabelTitle(){let{facet:t,config:r}=this;if(t.facet)return S6(t.facet,"facet",r);let i={row:["top","bottom"],column:["left","right"]};for(let n of Wm)if(t[n]){let o=mc("labelOrient",t[n]?.header,r,n);if(i[n].includes(o))return S6(t[n],n,r)}}assembleMarks(){let{child:t}=this,r=this.component.data.facetRoot,i=YK(r),n=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Pi.map(l=>this.facetSortFields(l)).flat(),order:Pi.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...n?{encode:{update:n}}:{},...t.assembleGroup(hX(this,[]))}]}getMapping(){return this.facet}};function rZ(e,t){let{row:r,column:i}=t;if(r&&i){let n=null;for(let o of[r,i])if($n(o.sort)){let{field:s,op:a=Wf}=o.sort;e=n=new Ka(e,{joinaggregate:[{op:a,field:s,as:Y6(o,o.sort,{forAs:!0})}],groupby:[ge(o)]})}return n}return null}function mF(e,t){for(let r of t){let i=r.data;if(e.name&&r.hasName()&&e.name!==r.dataName)continue;let n=e.format?.mesh,o=i.format?.feature;if(n&&o)continue;let s=e.format?.feature;if((s||o)&&s!==o)continue;let a=i.format?.mesh;if(!((n||a)&&n!==a)){if(Wd(e)&&Wd(i)){if(Li(e.values,i.values))return r}else if(uc(e)&&uc(i)){if(e.url===i.url)return r}else if(r6(e)&&e.name===r.dataName)return r}}return null}function _Se(e,t){if(e.data||!e.parent){if(e.data===null){let i=new Uo({values:[]});return t.push(i),i}let r=mF(e.data,t);if(r)return ja(e.data)||(r.data.format=hR({},e.data.format,r.data.format)),!r.hasName()&&e.data.name&&(r.dataName=e.data.name),r;{let i=new Uo(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function wSe(e,t,r){let i=0;for(let n of t.transforms){let o,s;if(UY(n))s=e=new Jd(e,n),o="derived";else if(My(n)){let a=kK(n);s=e=Ui.makeWithAncestors(e,{},a,r)??e,e=new Vl(e,t,n.filter)}else if(Z3(n))s=e=Ya.makeFromTransform(e,n,t),o="number";else if(jY(n))o="date",r.getWithExplicit(n.field).value===void 0&&(e=new Ui(e,{[n.field]:o}),r.set(n.field,o,!1)),s=e=Gs.makeFromTransform(e,n);else if(WY(n))s=e=ps.makeFromTransform(e,n),o="number",Iy(t)&&(e=new Xa(e));else if(K3(n))s=e=lg.make(e,t,n,i++),o="derived";else if(BY(n))s=e=new gc(e,n),o="number";else if(zY(n))s=e=new Ka(e,n),o="number";else if(VY(n))s=e=Xl.makeFromTransform(e,n),o="derived";else if(GY(n))s=e=new ng(e,n),o="derived";else if(YY(n))s=e=new rg(e,n),o="derived";else if(HY(n))s=e=new ig(e,n),o="derived";else if(OY(n))s=e=new fg(e,n),o="derived";else if(NY(n))e=new hg(e,n);else if(qY(n))s=e=t0.makeFromTransform(e,n),o="derived";else if($Y(n))s=e=new tg(e,n),o="derived";else if(LY(n))s=e=new ug(e,n),o="derived";else if(PY(n))s=e=new cg(e,n),o="derived";else if(IY(n))s=e=new ag(e,n),o="derived";else{ie(Q.invalidTransformIgnored(n));continue}if(s&&o!==void 0)for(let a of s.producedFields()??[])r.set(a,o,!1)}return e}function ih(e){let t=_Se(e,e.component.data.sources),{outputNodes:r,outputNodeRefCounts:i}=e.component.data,n=e.data,s=!(n&&(ja(n)||uc(n)||Wd(n)))&&e.parent?e.parent.component.data.ancestorParse.clone():new t6;ja(n)?(SM(n)?t=new th(t,n.sequence):Fy(n)&&(t=new eh(t,n.graticule)),s.parseNothing=!0):n?.format?.parse===null&&(s.parseNothing=!0),t=Ui.makeExplicit(t,e,s)??t,t=new Xa(t);let a=e.parent&&Ys(e.parent);(Et(e)||Zr(e))&&a&&(t=Ya.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=wSe(t,e,s));let l=AK(e),u=EK(e);t=Ui.makeWithAncestors(t,{},{...l,...u},s)??t,Et(e)&&(t=og.parseAll(t,e),t=sg.parseAll(t,e)),(Et(e)||Zr(e))&&(a||(t=Ya.makeFromEncoding(t,e)??t),t=Gs.makeFromEncoding(t,e)??t,t=Jd.parseAllForSortIndex(t,e));let c=t=K6(Ft.Raw,e,t);if(Et(e)){let g=ps.makeFromEncoding(t,e);g&&(t=g,Iy(e)&&(t=new Xa(t))),t=t0.makeFromEncoding(t,e)??t,t=Xl.makeFromEncoding(t,e)??t}let f,h;if(Et(e)){let{markDef:g,mark:v,config:b}=e,y=dt("invalid",g,b),{marks:x,scales:S}=h=kM({invalid:y,isPath:Fn(v)});x!==S&&S==="include-invalid-values"&&(f=t=K6(Ft.PreFilterInvalid,e,t)),x==="exclude-invalid-values"&&(t=Qd.make(t,e,h)??t)}let p=t=K6(Ft.Main,e,t),d;if(Et(e)&&h){let{marks:g,scales:v}=h;g==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=Qd.make(t,e,h)??t,d=t=K6(Ft.PostFilterInvalid,e,t))}Et(e)&&eK(e,p);let m=null;if(Zr(e)){let g=e.getName("facet");t=rZ(t,e.facet)??t,m=new Zs(t,e,g,p.getSource()),r[g]=m}return{...e.component.data,outputNodes:r,outputNodeRefCounts:i,raw:c,main:p,facetRoot:m,ancestorParse:s,preFilterInvalid:f,postFilterInvalid:d}}function K6(e,t,r){let{outputNodes:i,outputNodeRefCounts:n}=t.component.data,o=t.getDataName(e),s=new Wr(r,o,e,n);return i[o]=s,s}var Z6=class extends e0{constructor(t,r,i,n){super(t,"concat",r,i,n,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&ie(Q.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((o,s)=>dg(o,this,this.getName(`concat_${s}`),void 0,n))}parseData(){this.component.data=ih(this);for(let t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let r of J(t.component.selection))this.component.selection[r]=t.component.selection[r]}Object.values(this.component.selection).some(t=>zi(t))&&vm(Pd)}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(let t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Yf(t)?t.vconcat:Mm(t)?t.hconcat:t.concat}parseLayoutSize(){eZ(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((r,i)=>i.assembleSelectionTopLevelSignals(r),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){let t=Gm(this);for(let r of this.children)t.push(...r.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((r,i)=>i.assembleSelectionData(r),t)}assembleMarks(){return this.children.map(t=>{let r=t.assembleTitle(),i=t.assembleGroupStyle(),n=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...r?{title:r}:{},...i?{style:i}:{},...n?{encode:{update:n}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){let t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}};function SSe(e){return e===!1||e===null}var CSe={disable:1,gridScale:1,scale:1,...eM,labelExpr:1,encode:1},gF=J(CSe),J6=class e extends Ln{constructor(t={},r={},i=!1){super(),this.explicit=t,this.implicit=r,this.mainExtracted=i}clone(){return new e(De(this.explicit),De(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!SSe(this.get(t))}hasOrientSignalRef(){return Ae(this.explicit.orient)}};function iZ(e,t,r){let{encoding:i,config:n}=e,o=jt(i[t])??jt(i[Ii(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(Bl(l))return{text:hs({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:n}),...r};if(a===void 0&&l===void 0&&n.customFormatTypes){if(rc(o)==="quantitative"){if(ic(o)&&o.stack==="normalize"&&n.normalizedNumberFormatType)return{text:hs({fieldOrDatumDef:o,field:"datum.value",format:n.normalizedNumberFormat,formatType:n.normalizedNumberFormatType,config:n}),...r};if(n.numberFormatType)return{text:hs({fieldOrDatumDef:o,field:"datum.value",format:n.numberFormat,formatType:n.numberFormatType,config:n}),...r}}if(rc(o)==="temporal"&&n.timeFormatType&&ce(o)&&!o.timeUnit)return{text:hs({fieldOrDatumDef:o,field:"datum.value",format:n.timeFormat,formatType:n.timeFormatType,config:n}),...r}}return r}function nZ(e){return an.reduce((t,r)=>(e.component.scales[r]&&(t[r]=[MSe(r,e)]),t),{})}var ESe={bottom:"top",top:"bottom",left:"right",right:"left"};function oZ(e){let{axes:t,resolve:r}=e.component,i={top:0,bottom:0,right:0,left:0};for(let n of e.children){n.parseAxesAndHeaders();for(let o of J(n.component.axes))r.axis[o]=Ym(e.component.resolve,o),r.axis[o]==="shared"&&(t[o]=ASe(t[o],n.component.axes[o]),t[o]||(r.axis[o]="independent",delete t[o]))}for(let n of an){for(let o of e.children)if(o.component.axes[n]){if(r.axis[n]==="independent"){t[n]=(t[n]??[]).concat(o.component.axes[n]);for(let s of o.component.axes[n]){let{value:a,explicit:l}=s.getWithExplicit("orient");if(!Ae(a)){if(i[a]>0&&!l){let u=ESe[a];i[a]>i[u]&&s.set("orient",u,!1)}i[a]++}}}delete o.component.axes[n]}if(r.axis[n]==="independent"&&t[n]&&t[n].length>1)for(let[o,s]of(t[n]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function ASe(e,t){if(e){if(e.length!==t.length)return;let r=e.length;for(let i=0;i<r;i++){let n=e[i],o=t[i];if(!!n!=!!o)return;if(n&&o){let s=n.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[i]=TSe(n,o)}}}else return t.map(r=>r.clone());return e}function TSe(e,t){for(let r of gF){let i=Bo(e.getWithExplicit(r),t.getWithExplicit(r),r,"axis",(n,o)=>{switch(r){case"title":return J5(n,o);case"gridScale":return{explicit:n.explicit,value:yt(n.value,o.value)}}return Lm(n,o,r,"axis")});e.setWithExplicit(r,i)}return e}function DSe(e,t,r,i,n){if(t==="disable")return r!==void 0;switch(r=r||{},t){case"titleAngle":case"labelAngle":return e===(Ae(r.labelAngle)?r.labelAngle:zf(r.labelAngle));case"values":return!!r.values;case"encode":return!!r.encoding||!!r.labelAngle;case"title":if(e===QM(i,n))return!0}return e===r[t]}var RSe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function MSe(e,t){let r=t.axis(e),i=new J6,n=jt(t.encoding[e]),{mark:o,config:s}=t,a=r?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||oK(e),l=t.getScaleComponent(e).get("type"),u=iK(e,l,a,t.config),c=r!==void 0?!r:Wy("disable",s.style,r?.style,u).configValue;if(i.set("disable",c,r!==void 0),c)return i;r=r||{};let f=nK(n,r,e,s.style,u),h=x3(r.formatType,n,l),p=y3(n,n.type,r.format,r.formatType,s,!0),d={fieldOrDatumDef:n,axis:r,channel:e,model:t,scaleType:l,orient:a,labelAngle:f,format:p,formatType:h,mark:o,config:s};for(let v of gF){let b=v in KM?KM[v](d):tM(v)?r[v]:void 0,y=b!==void 0,x=DSe(b,v,r,t,e);if(y&&x)i.set(v,b,x);else{let{configValue:S=void 0,configFrom:_=void 0}=tM(v)&&v!=="values"?Wy(v,s.style,r.style,u):{},w=S!==void 0;y&&!w?i.set(v,b,x):(_!=="vgAxisConfig"||RSe.has(v)&&w||sc(S)||Ae(S))&&i.set(v,S,!1)}}let m=r.encoding??{},g=D3.reduce((v,b)=>{if(!i.hasAxisPart(b))return v;let y=E6(m[b]??{},t),x=b==="labels"?iZ(t,e,y):y;return x!==void 0&&!ht(x)&&(v[b]={update:x}),v},{});return ht(g)||i.set("encode",g,!!r.encoding||r.labelAngle!==void 0),i}function sZ({encoding:e,size:t}){for(let r of an){let i=Dr(r);No(t[i])&&qa(e[r])&&(delete t[i],ie(Q.stepDropped(i)))}return t}var aZ={vgMark:"arc",encodeEntry:e=>({...Sr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Mr("x",e,{defaultPos:"mid"}),...Mr("y",e,{defaultPos:"mid"}),...Nn(e,"radius"),...Nn(e,"theta")})};var lZ={vgMark:"area",encodeEntry:e=>({...Sr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Zf("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Zf("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Hm(e)})};var uZ={vgMark:"rect",encodeEntry:e=>({...Sr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Nn(e,"x"),...Nn(e,"y")})};var cZ={vgMark:"shape",encodeEntry:e=>({...Sr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{let{encoding:t}=e,r=t.shape;return[{type:"geoshape",projection:e.projectionName(),...r&&ce(r)&&r.type===Ua?{field:ge(r,{expr:"datum"})}:{}}]}};var fZ={vgMark:"image",encodeEntry:e=>({...Sr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Nn(e,"x"),...Nn(e,"y"),...Kf(e,"url")})};var hZ={vgMark:"line",encodeEntry:e=>({...Sr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Mr("x",e,{defaultPos:"mid"}),...Mr("y",e,{defaultPos:"mid"}),...fr("size",e,{vgChannel:"strokeWidth"}),...Hm(e)})},dZ={vgMark:"trail",encodeEntry:e=>({...Sr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Mr("x",e,{defaultPos:"mid"}),...Mr("y",e,{defaultPos:"mid"}),...fr("size",e),...Hm(e)})};function vF(e,t){let{config:r}=e;return{...Sr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Mr("x",e,{defaultPos:"mid"}),...Mr("y",e,{defaultPos:"mid"}),...fr("size",e),...fr("angle",e),...FSe(e,r,t)}}function FSe(e,t,r){return r?{shape:{value:r}}:fr("shape",e)}var pZ={vgMark:"symbol",encodeEntry:e=>vF(e)},mZ={vgMark:"symbol",encodeEntry:e=>vF(e,"circle")},gZ={vgMark:"symbol",encodeEntry:e=>vF(e,"square")};var vZ={vgMark:"rect",encodeEntry:e=>({...Sr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Nn(e,"x"),...Nn(e,"y")})};var bZ={vgMark:"rule",encodeEntry:e=>{let{markDef:t}=e,r=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Sr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Zf("x",e,{defaultPos:r==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:r!=="vertical"}),...Zf("y",e,{defaultPos:r==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:r!=="horizontal"}),...fr("size",e,{vgChannel:"strokeWidth"})}}};var yZ={vgMark:"text",encodeEntry:e=>{let{config:t,encoding:r}=e;return{...Sr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Mr("x",e,{defaultPos:"mid"}),...Mr("y",e,{defaultPos:"mid"}),...Kf(e),...fr("size",e,{vgChannel:"fontSize"}),...fr("angle",e),...c6("align",OSe(e.markDef,r,t)),...c6("baseline",$Se(e.markDef,r,t)),...Mr("radius",e,{defaultPos:null}),...Mr("theta",e,{defaultPos:null})}}};function OSe(e,t,r){if(dt("align",e,r)===void 0)return"center"}function $Se(e,t,r){if(dt("baseline",e,r)===void 0)return"middle"}var xZ={vgMark:"rect",encodeEntry:e=>{let{config:t,markDef:r}=e,i=r.orient,n=i==="horizontal"?"x":"y",o=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...Sr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Nn(e,n),...Mr(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:bt(dt("thickness",r,t))}}};var Q6={arc:aZ,area:lZ,bar:uZ,circle:mZ,geoshape:cZ,image:fZ,line:hZ,point:pZ,rect:vZ,rule:bZ,square:gZ,text:yZ,tick:xZ,trail:dZ};function SZ(e){if(We([Ud,zd,yG],e.mark)){let t=O3(e.mark,e.encoding);if(t.length>0)return LSe(e,t)}else if(e.mark===Hd){let t=Y5.some(r=>dt(r,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return PSe(e)}return bF(e)}var _Z="faceted_path_";function LSe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:_Z+e.requestDataName(Ft.Main),data:e.requestDataName(Ft.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:bF(e,{fromPrefix:_Z})}]}var wZ="stack_group_";function PSe(e){let[t]=bF(e,{fromPrefix:wZ}),r=e.scaleName(e.stack.fieldChannel),i=(u={})=>e.vgField(e.stack.fieldChannel,u),n=(u,c)=>{let f=[i({prefix:"min",suffix:"start",expr:c}),i({prefix:"max",suffix:"start",expr:c}),i({prefix:"min",suffix:"end",expr:c}),i({prefix:"max",suffix:"end",expr:c})];return`${u}(${f.map(h=>`scale('${r}',${h})`).join(",")})`},o,s;e.stack.fieldChannel==="x"?(o={...Xu(t.encode.update,["y","yc","y2","height",...Y5]),x:{signal:n("min","datum")},x2:{signal:n("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...qr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...Xu(t.encode.update,["x","xc","x2","width"]),y:{signal:n("min","datum")},y2:{signal:n("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...qr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(let u of Y5){let c=co(u,e.markDef,e.config);t.encode.update[u]?(o[u]=t.encode.update[u],delete t.encode.update[u]):c&&(o[u]=bt(c)),c&&(t.encode.update[u]={value:0})}let a=[];if(e.stack.groupbyChannels?.length>0)for(let u of e.stack.groupbyChannels){let c=e.fieldDef(u),f=ge(c);f&&a.push(f),(c?.bin||c?.timeUnit)&&a.push(ge(c,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((u,c)=>{if(t.encode.update[c])return{...u,[c]:t.encode.update[c]};{let f=co(c,e.markDef,e.config);return f!==void 0?{...u,[c]:bt(f)}:u}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ft.Main),name:wZ+e.requestDataName(Ft.Main),groupby:a,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function ISe(e){let{encoding:t,stack:r,mark:i,markDef:n,config:o}=e,s=t.order;if(!(!K(s)&&hi(s)&&$5(s.value)||!s&&$5(dt("order",n,o)))){if((K(s)||ce(s))&&!r)return Z5(s,{expr:"datum"});if(Fn(i)){let a=n.orient==="horizontal"?"y":"x",l=t[a];if(ce(l))return{field:a}}}}function bF(e,t={fromPrefix:""}){let{mark:r,markDef:i,encoding:n,config:o}=e,s=yt(i.clip,NSe(e),BSe(e)),a=AR(i),l=n.key,u=ISe(e),c=zSe(e),f=dt("aria",i,o),h=Q6[r].postEncodingTransform?Q6[r].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Q6[r].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ft.Main)},encode:{update:Q6[r].encodeEntry(e)},...h?{transform:h}:{}}]}function NSe(e){let t=e.getScaleComponent("x"),r=e.getScaleComponent("y");return t?.get("selectionExtent")||r?.get("selectionExtent")?!0:void 0}function BSe(e){let t=e.component.projection;return t&&!t.isFit?!0:void 0}function zSe(e){if(!e.component.selection)return null;let t=J(e.component.selection).length,r=t,i=e.parent;for(;i&&r===0;)r=J(i.component.selection).length,i=i.parent;return r?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}var pg=class extends eg{constructor(t,r,i,n={},o){super(t,"unit",r,i,o,void 0,gM(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=u=>(u.from?.data&&(u.from.data=this.lookupDataSource(u.from.data),"time"in this.encoding&&(u.from.data=u.from.data+n6)),u.from?.facet?.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u);let s=ln(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=_Y(s,o,{graticule:t.data&&Fy(t.data)}));let l=this.encoding=GG(t.encoding||{},a,s.filled,o);this.markDef=W3(s,l,o),this.size=sZ({encoding:l,size:gM(t)?{...n,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:n}),this.stack=j3(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>Rm(u))}get hasProjection(){let{encoding:t}=this,r=this.mark===h3,i=t&&uV.some(n=>Xe(t[n]));return r||i}scaleDomain(t){let r=this.specifiedScales[t];return r?r.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,r){return dm.reduce((i,n)=>{let o=jt(r[n]);return o&&(i[n]=this.initScale(o.scale??{})),i},{})}initScale(t){let{domain:r,range:i}=t,n=wr(t);return K(r)&&(n.domain=r.map(Ni)),K(i)&&(n.range=i.map(Ni)),n}initAxes(t){return an.reduce((r,i)=>{let n=t[i];if(Xe(n)||i===Rt&&Xe(t.x2)||i===lr&&Xe(t.y2)){let o=Xe(n)?n.axis:void 0;r[i]=o&&this.initAxis({...o})}return r},{})}initAxis(t){let r=J(t),i={};for(let n of r){let o=t[n];i[n]=sc(o)?X5(o):Ni(o)}return i}initLegends(t){return wV.reduce((r,i)=>{let n=jt(t[i]);if(n&&CV(i)){let o=n.legend;r[i]=o&&wr(o)}return r},{})}parseData(){this.component.data=ih(this)}parseLayoutSize(){tZ(this)}parseSelections(){this.component.selection=QX(this,this.selection)}parseMarkGroup(){this.component.mark=SZ(this)}parseAxesAndHeaders(){this.component.axes=nZ(this)}assembleSelectionTopLevelSignals(t){return dX(this,t)}assembleSignals(){return[...w6(this),...fX(this,[])]}assembleSelectionData(t){return pX(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Gm(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Ys(this.parent))&&(t=FM(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){let{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return jl(this.encoding,t)}fieldDef(t){let r=this.encoding[t];return _i(r)}typedFieldDef(t){let r=this.fieldDef(t);return Rr(r)?r:null}};var eS=class e extends e0{constructor(t,r,i,n,o){super(t,"layer",r,i,o,t.resolve,t.view);let s={...n,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(lc(a))return new e(a,this,this.getName(`layer_${l}`),s,o);if(wi(a))return new pg(a,this,this.getName(`layer_${l}`),s,o);throw new Error(Q.invalidSpec(a))})}parseData(){this.component.data=ih(this);for(let t of this.children)t.parseData()}parseLayoutSize(){QK(this)}parseSelections(){this.component.selection={};for(let t of this.children){t.parseSelections();for(let r of J(t.component.selection))this.component.selection[r]=t.component.selection[r]}Object.values(this.component.selection).some(t=>zi(t))&&vm(Pd)}parseMarkGroup(){for(let t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){oZ(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((r,i)=>i.assembleSelectionTopLevelSignals(r),t)}assembleSignals(){return this.children.reduce((t,r)=>t.concat(r.assembleSignals()),w6(this))}assembleLayoutSignals(){return this.children.reduce((t,r)=>t.concat(r.assembleLayoutSignals()),Gm(this))}assembleSelectionData(t){return this.children.reduce((r,i)=>i.assembleSelectionData(r),t)}assembleGroupStyle(){let t=new Set;for(let i of this.children)for(let n of ve(i.assembleGroupStyle()))t.add(n);let r=Array.from(t);return r.length>1?r:r.length===1?r[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(let r of this.children)if(t=r.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return mX(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,r)=>t.concat(r.assembleLegends()),R6(this))}};function dg(e,t,r,i,n){if(oc(e))return new X6(e,t,r,n);if(lc(e))return new eS(e,t,r,i,n);if(wi(e))return new pg(e,t,r,i,n);if(pM(e))return new Z6(e,t,r,n);throw new Error(Q.invalidSpec(e))}function CZ(e,t={}){t.logger&&zV(t.logger),t.fieldTitle&&ZR(t.fieldTitle);try{let r=q3(cl(t.config,e.config)),i=Q3(e,r),n=dg(i,null,"",void 0,r);return n.parse(),MK(n.component.data,n),{spec:USe(n,HSe(e,i.autosize,r,n),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&HV(),t.fieldTitle&&jG()}}function HSe(e,t,r,i){let n=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):he(t)&&(t={type:t}),n&&o&&eX(t.type)){if(n==="step"&&o==="step")ie(Q.droppingFit()),t.type="pad";else if(n==="step"||o==="step"){let s=n==="step"?"width":"height";ie(Q.droppingFit(Uf(s)));let a=s==="width"?"height":"width";t.type=tX(a)}}return{...J(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...wM(r,!1),...wM(e,!0)}}function USe(e,t,r={},i){let n=e.config?bY(e.config):void 0,o=XK(e.component.data,r),s=e.assembleSelectionData(o),a=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0),f=e.assembleLayoutSignals();f=f.filter(d=>(d.name==="width"||d.name==="height")&&d.value!==void 0?(t[d.name]=+d.value,!1):!0);let{params:h,...p}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...p,...l?{title:l}:{},...u?{style:u}:{},...c?{encode:{update:c}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...U3(h)]),...n?{config:n}:{},...i?{usermeta:i}:{}}}var qSe=nV.version;function jSe(e){let[t,r]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:r}}var xF=jSe;var AF={};pi(AF,{carbong10:()=>U7e,carbong100:()=>j7e,carbong90:()=>q7e,carbonwhite:()=>H7e,dark:()=>c7e,excel:()=>f7e,fivethirtyeight:()=>p7e,ggplot2:()=>m7e,googlecharts:()=>A7e,latimes:()=>y7e,powerbi:()=>I7e,quartz:()=>x7e,urbaninstitute:()=>E7e,version:()=>W7e,vox:()=>_7e});var WSe="vega-themes",VSe="2.15.0",GSe="Themes for stylized Vega and Vega-Lite visualizations.",YSe=["vega","vega-lite","themes","style"],XSe="BSD-3-Clause",KSe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},ZSe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],JSe="build/vega-themes.js",QSe="build/vega-themes.module.js",e7e="build/vega-themes.min.js",t7e="build/vega-themes.min.js",r7e="build/vega-themes.module.d.ts",i7e={type:"git",url:"https://github.com/vega/vega-themes.git"},n7e=["src","build"],o7e={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},s7e={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},a7e={vega:"*","vega-lite":"*"},l7e={},u7e={name:WSe,version:VSe,description:GSe,keywords:YSe,license:XSe,author:KSe,contributors:ZSe,main:JSe,module:QSe,unpkg:e7e,jsdelivr:t7e,types:r7e,repository:i7e,files:n7e,scripts:o7e,devDependencies:s7e,peerDependencies:a7e,dependencies:l7e},mg="#fff",kZ="#888",c7e={background:"#333",view:{stroke:kZ},title:{color:mg,subtitleColor:mg},style:{"guide-label":{fill:mg},"guide-title":{fill:mg}},axis:{domainColor:mg,gridColor:kZ,tickColor:mg}},r0="#4572a7",f7e={background:"#fff",arc:{fill:r0},area:{fill:r0},line:{stroke:r0,strokeWidth:2},path:{stroke:r0},rect:{fill:r0},shape:{stroke:r0},symbol:{fill:r0,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},i0="#30a2da",_F="#cbcbcb",h7e="#999",d7e="#333",EZ="#f0f0f0",AZ="#333",p7e={arc:{fill:i0},area:{fill:i0},axis:{domainColor:_F,grid:!0,gridColor:_F,gridWidth:1,labelColor:h7e,labelFontSize:10,titleColor:d7e,tickColor:_F,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:EZ,group:{fill:EZ},legend:{labelColor:AZ,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:AZ,titleFontSize:14,titlePadding:10},line:{stroke:i0,strokeWidth:2},path:{stroke:i0,strokeWidth:.5},rect:{fill:i0},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:i0},bar:{binSpacing:2,fill:i0,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},n0="#000",m7e={group:{fill:"#e5e5e5"},arc:{fill:n0},area:{fill:n0},line:{stroke:n0},path:{stroke:n0},rect:{fill:n0},shape:{stroke:n0},symbol:{fill:n0,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},g7e=22,v7e="normal",TZ="Benton Gothic, sans-serif",DZ=11.5,b7e="normal",o0="#82c6df",wF="Benton Gothic Bold, sans-serif",RZ="normal",MZ=13,Jy={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},y7e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:wF,fontSize:g7e,fontWeight:v7e},arc:{fill:o0},area:{fill:o0},line:{stroke:o0,strokeWidth:2},path:{stroke:o0},rect:{fill:o0},shape:{stroke:o0},symbol:{fill:o0,size:30},axis:{labelFont:TZ,labelFontSize:DZ,labelFontWeight:b7e,titleFont:wF,titleFontSize:MZ,titleFontWeight:RZ},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:TZ,labelFontSize:DZ,symbolType:"square",titleFont:wF,titleFontSize:MZ,titleFontWeight:RZ},range:{category:Jy["category-6"],diverging:Jy["fireandice-6"],heatmap:Jy["fire-7"],ordinal:Jy["fire-7"],ramp:Jy["fire-7"]}},s0="#ab5787",tS="#979797",x7e={background:"#f9f9f9",arc:{fill:s0},area:{fill:s0},line:{stroke:s0},path:{stroke:s0},rect:{fill:s0},shape:{stroke:s0},symbol:{fill:s0,size:30},axis:{domainColor:tS,domainWidth:.5,gridWidth:.2,labelColor:tS,tickColor:tS,tickWidth:.2,titleColor:tS},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},a0="#3e5c69",_7e={background:"#fff",arc:{fill:a0},area:{fill:a0},line:{stroke:a0},path:{stroke:a0},rect:{fill:a0},shape:{stroke:a0},symbol:{fill:a0},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Js="#1696d2",FZ="#000000",w7e="#FFFFFF",rS="Lato",SF="Lato",S7e="Lato",C7e="#DEDDDD",k7e=18,Qy={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},E7e={background:w7e,title:{anchor:"start",fontSize:k7e,font:rS},axisX:{domain:!0,domainColor:FZ,domainWidth:1,grid:!1,labelFontSize:12,labelFont:SF,labelAngle:0,tickColor:FZ,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:rS},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:C7e,gridWidth:1,labelFontSize:12,labelFont:SF,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:rS,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:SF,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:rS,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Qy["six-groups-cat-1"],diverging:Qy["diverging-colors"],heatmap:Qy["diverging-colors"],ordinal:Qy["six-groups-seq"],ramp:Qy["shades-blue"]},area:{fill:Js},rect:{fill:Js},line:{color:Js,stroke:Js,strokeWidth:5},trail:{color:Js,stroke:Js,strokeWidth:0,size:1},path:{stroke:Js,strokeWidth:.5},point:{filled:!0},text:{font:S7e,color:Js,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Js,stroke:null}},arc:{fill:Js},shape:{stroke:Js},symbol:{fill:Js,size:30}},l0="#3366CC",OZ="#ccc",iS="Arial, sans-serif",A7e={arc:{fill:l0},area:{fill:l0},path:{stroke:l0},rect:{fill:l0},shape:{stroke:l0},symbol:{stroke:l0},circle:{fill:l0},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:iS,fontSize:12},"guide-title":{font:iS,fontSize:12},"group-title":{font:iS,fontSize:12}},title:{font:iS,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:OZ,tickColor:OZ,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},EF=e=>e*(1/3+1),$Z=EF(9),LZ=EF(10),PZ=EF(12),e2="Segoe UI",IZ="wf_standard-font, helvetica, arial, sans-serif",NZ="#252423",t2="#605E5C",BZ="transparent",T7e="#C8C6C4",Ja="#118DFF",D7e="#12239E",R7e="#E66C37",M7e="#6B007B",F7e="#E044A7",O7e="#744EC2",$7e="#D9B300",L7e="#D64550",HZ=Ja,UZ="#DEEFFF",zZ=[UZ,HZ],P7e=[UZ,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",HZ],I7e={view:{stroke:BZ},background:BZ,font:e2,header:{titleFont:IZ,titleFontSize:PZ,titleColor:NZ,labelFont:e2,labelFontSize:LZ,labelColor:t2},axis:{ticks:!1,grid:!1,domain:!1,labelColor:t2,labelFontSize:$Z,titleFont:IZ,titleColor:NZ,titleFontSize:PZ,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:T7e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ja},line:{stroke:Ja,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:e2,fontSize:$Z,fill:t2},arc:{fill:Ja},area:{fill:Ja,line:!0,opacity:.6},path:{stroke:Ja},rect:{fill:Ja},point:{fill:Ja,filled:!0,size:75},shape:{stroke:Ja},symbol:{fill:Ja,strokeWidth:1.5,size:50},legend:{titleFont:e2,titleFontWeight:"bold",titleColor:t2,labelFont:e2,labelFontSize:LZ,labelColor:t2,symbolType:"circle",symbolSize:75},range:{category:[Ja,D7e,R7e,M7e,F7e,O7e,$7e,L7e],diverging:zZ,heatmap:zZ,ordinal:P7e}},CF='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',N7e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',kF=400,nS={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},B7e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],z7e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function oS({theme:e,background:t}){let r=["white","g10"].includes(e)?"light":"dark",i=nS.gridBg[e],n=nS.textPrimary[e],o=nS.textSecondary[e],s=r==="dark"?B7e:z7e,a=r==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:i,stroke:i},group:{fill:i},title:{color:n,anchor:"start",dy:-15,fontSize:16,font:CF,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:N7e,labelFontWeight:kF,titleColor:n,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:nS.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:CF,fill:o,fontWeight:kF},"guide-title":{font:CF,fill:o,fontWeight:kF}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var H7e=oS({theme:"white",background:"#ffffff"}),U7e=oS({theme:"g10",background:"#f4f4f4"}),q7e=oS({theme:"g90",background:"#262626"}),j7e=oS({theme:"g100",background:"#161616"}),W7e=u7e.version;var V7e="vega-tooltip",G7e="0.34.0",Y7e="A tooltip plugin for Vega-Lite and Vega visualizations.",X7e=["vega-lite","vega","tooltip"],K7e={type:"git",url:"https://github.com/vega/vega-tooltip.git"},Z7e={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},J7e=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],Q7e="BSD-3-Clause",e8e={url:"https://github.com/vega/vega-tooltip/issues"},t8e="https://github.com/vega/vega-tooltip#readme",r8e="build/vega-tooltip.js",i8e="build/vega-tooltip.module.js",n8e="build/vega-tooltip.min.js",o8e="build/vega-tooltip.min.js",s8e="build/vega-tooltip.module.d.ts",a8e=["src","build","types"],l8e={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"yarn copy:data",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},u8e={"@babel/core":"^7.22.10","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.10","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@types/jest":"^29.5.3","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^6.3.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.46.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","gh-pages":"^6.1.0",jest:"^29.6.2","jest-environment-jsdom":"^29.6.2",path:"^0.12.7",prettier:"^3.0.1","release-it":"^16.1.3",rollup:"^4.6.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.3",sass:"^1.64.2",typescript:"~5.3.2","vega-datasets":"^2.7.0","vega-typings":"^0.24.2"},c8e={"vega-util":"^1.17.2"},f8e={name:V7e,version:G7e,description:Y7e,keywords:X7e,repository:K7e,author:Z7e,collaborators:J7e,license:Q7e,bugs:e8e,homepage:t8e,main:r8e,module:i8e,unpkg:n8e,jsdelivr:o8e,types:s8e,files:a8e,scripts:l8e,devDependencies:u8e,dependencies:c8e};function h8e(e,t,r,i){if(K(e))return`[${e.map(n=>t(he(n)?n:qZ(n,r))).join(", ")}]`;if(me(e)){let n="",{title:o,image:s,...a}=e;o&&(n+=`<h2>${t(o)}</h2>`),s&&(n+=`<img src="${new URL(t(s),i||location.href).href}">`);let l=Object.keys(a);if(l.length>0){n+="<table>";for(let u of l){let c=a[u];c!==void 0&&(me(c)&&(c=qZ(c,r)),n+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}n+="</table>"}return n||"{}"}return t(e)}function d8e(e){let t=[];return function(r,i){if(typeof i!="object"||i===null)return i;let n=t.indexOf(this)+1;return t.length=n,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function qZ(e,t){return JSON.stringify(e,d8e(t))}var p8e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`,jZ="vg-tooltip-element",m8e={offsetX:10,offsetY:10,id:jZ,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:g8e,maxDepth:2,formatTooltip:h8e,baseURL:""};function g8e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function v8e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return p8e.toString().replace(jZ,e)}function b8e(e,t,r,i){let n=e.clientX+r;n+t.width>window.innerWidth&&(n=+e.clientX-r-t.width);let o=e.clientY+i;return o+t.height>window.innerHeight&&(o=+e.clientY-i-t.height),{x:n,y:o}}var sS=class{constructor(t){this.options={...m8e,...t};let r=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=v8e(r);let n=document.head;n.childNodes.length>0?n.insertBefore(i,n.childNodes[0]):n.appendChild(i)}}tooltipHandler(t,r,i,n){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),n==null||n===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(n,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:o,y:s}=b8e(r,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}},C_t=f8e.version;function y8e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var TF,WZ;function x8e(){return WZ||(WZ=1,TF=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),TF}var _8e=Ht;Ht.Node=f0;Ht.create=Ht;function Ht(e){var t=this;if(t instanceof Ht||(t=new Ht),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(n){t.push(n)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}Ht.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Ht.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Ht.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Ht.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)S8e(this,arguments[e]);return this.length};Ht.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)C8e(this,arguments[e]);return this.length};Ht.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Ht.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Ht.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,i=0;r!==null;i++)e.call(t,r.value,i,this),r=r.next};Ht.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,i=this.length-1;r!==null;i--)e.call(t,r.value,i,this),r=r.prev};Ht.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};Ht.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};Ht.prototype.map=function(e,t){t=t||this;for(var r=new Ht,i=this.head;i!==null;)r.push(e.call(t,i.value,this)),i=i.next;return r};Ht.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Ht,i=this.tail;i!==null;)r.push(e.call(t,i.value,this)),i=i.prev;return r};Ht.prototype.reduce=function(e,t){var r,i=this.head;if(arguments.length>1)r=t;else if(this.head)i=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;i!==null;n++)r=e(r,i.value,n),i=i.next;return r};Ht.prototype.reduceReverse=function(e,t){var r,i=this.tail;if(arguments.length>1)r=t;else if(this.tail)i=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;i!==null;n--)r=e(r,i.value,n),i=i.prev;return r};Ht.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};Ht.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};Ht.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Ht;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,n=this.head;n!==null&&i<e;i++)n=n.next;for(;n!==null&&i<t;i++,n=n.next)r.push(n.value);return r};Ht.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Ht;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,n=this.tail;n!==null&&i>t;i--)n=n.prev;for(;n!==null&&i>e;i--,n=n.prev)r.push(n.value);return r};Ht.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,n=this.head;n!==null&&i<e;i++)n=n.next;for(var o=[],i=0;n&&i<t;i++)o.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var i=0;i<r.length;i++)n=w8e(this,n,r[i]);return o};Ht.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i}return this.head=t,this.tail=e,this};function w8e(e,t,r){var i=t===e.head?new f0(r,null,t,e):new f0(r,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function S8e(e,t){e.tail=new f0(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function C8e(e,t){e.head=new f0(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function f0(e,t,r,i){if(!(this instanceof f0))return new f0(e,t,r,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{x8e()(Ht)}catch{}var k8e=_8e,u0=Symbol("max"),bc=Symbol("length"),gg=Symbol("lengthCalculator"),n2=Symbol("allowStale"),c0=Symbol("maxAge"),vc=Symbol("dispose"),VZ=Symbol("noDisposeOnSet"),qi=Symbol("lruList"),Qa=Symbol("cache"),oJ=Symbol("updateAgeOnGet"),DF=()=>1,OF=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[u0]=t.max||1/0;let r=t.length||DF;if(this[gg]=typeof r!="function"?DF:r,this[n2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[c0]=t.maxAge||0,this[vc]=t.dispose,this[VZ]=t.noDisposeOnSet||!1,this[oJ]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[u0]=t||1/0,r2(this)}get max(){return this[u0]}set allowStale(t){this[n2]=!!t}get allowStale(){return this[n2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[c0]=t,r2(this)}get maxAge(){return this[c0]}set lengthCalculator(t){typeof t!="function"&&(t=DF),t!==this[gg]&&(this[gg]=t,this[bc]=0,this[qi].forEach(r=>{r.length=this[gg](r.value,r.key),this[bc]+=r.length})),r2(this)}get lengthCalculator(){return this[gg]}get length(){return this[bc]}get itemCount(){return this[qi].length}rforEach(t,r){r=r||this;for(let i=this[qi].tail;i!==null;){let n=i.prev;GZ(this,t,i,r),i=n}}forEach(t,r){r=r||this;for(let i=this[qi].head;i!==null;){let n=i.next;GZ(this,t,i,r),i=n}}keys(){return this[qi].toArray().map(t=>t.key)}values(){return this[qi].toArray().map(t=>t.value)}reset(){this[vc]&&this[qi]&&this[qi].length&&this[qi].forEach(t=>this[vc](t.key,t.value)),this[Qa]=new Map,this[qi]=new k8e,this[bc]=0}dump(){return this[qi].map(t=>cS(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[qi]}set(t,r,i){if(i=i||this[c0],i&&typeof i!="number")throw new TypeError("maxAge must be a number");let n=i?Date.now():0,o=this[gg](r,t);if(this[Qa].has(t)){if(o>this[u0])return bg(this,this[Qa].get(t)),!1;let l=this[Qa].get(t).value;return this[vc]&&(this[VZ]||this[vc](t,l.value)),l.now=n,l.maxAge=i,l.value=r,this[bc]+=o-l.length,l.length=o,this.get(t),r2(this),!0}let s=new $F(t,r,o,n,i);return s.length>this[u0]?(this[vc]&&this[vc](t,r),!1):(this[bc]+=s.length,this[qi].unshift(s),this[Qa].set(t,this[qi].head),r2(this),!0)}has(t){if(!this[Qa].has(t))return!1;let r=this[Qa].get(t).value;return!cS(this,r)}get(t){return RF(this,t,!0)}peek(t){return RF(this,t,!1)}pop(){let t=this[qi].tail;return t?(bg(this,t),t.value):null}del(t){bg(this,this[Qa].get(t))}load(t){this.reset();let r=Date.now();for(let i=t.length-1;i>=0;i--){let n=t[i],o=n.e||0;if(o===0)this.set(n.k,n.v);else{let s=o-r;s>0&&this.set(n.k,n.v,s)}}}prune(){this[Qa].forEach((t,r)=>RF(this,r,!1))}},RF=(e,t,r)=>{let i=e[Qa].get(t);if(i){let n=i.value;if(cS(e,n)){if(bg(e,i),!e[n2])return}else r&&(e[oJ]&&(i.value.now=Date.now()),e[qi].unshiftNode(i));return n.value}},cS=(e,t)=>{if(!t||!t.maxAge&&!e[c0])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c0]&&r>e[c0]},r2=e=>{if(e[bc]>e[u0])for(let t=e[qi].tail;e[bc]>e[u0]&&t!==null;){let r=t.prev;bg(e,t),t=r}},bg=(e,t)=>{if(t){let r=t.value;e[vc]&&e[vc](r.key,r.value),e[bc]-=r.length,e[Qa].delete(r.key),e[qi].removeNode(t)}},$F=class{constructor(t,r,i,n,o){this.key=t,this.value=r,this.length=i,this.now=n,this.maxAge=o||0}},GZ=(e,t,r,i)=>{let n=r.value;cS(e,n)&&(bg(e,r),e[n2]||(n=void 0)),n&&t.call(i,n.value,n.key,e)},E8e=OF,A8e=Object.freeze({loose:!0}),T8e=Object.freeze({}),D8e=e=>e?typeof e!="object"?A8e:e:T8e,PF=D8e,LF={exports:{}},R8e="2.0.0",sJ=256,M8e=Number.MAX_SAFE_INTEGER||9007199254740991,F8e=16,O8e=sJ-6,$8e=["major","premajor","minor","preminor","patch","prepatch","prerelease"],IF={MAX_LENGTH:sJ,MAX_SAFE_COMPONENT_LENGTH:F8e,MAX_SAFE_BUILD_LENGTH:O8e,MAX_SAFE_INTEGER:M8e,RELEASE_TYPES:$8e,SEMVER_SPEC_VERSION:R8e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},L8e=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},hS=L8e;(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:n}=IF,o=hS;t=e.exports={};let s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={},c=0,f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",n],[f,i]],p=m=>{for(let[g,v]of h)m=m.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return m},d=(m,g,v)=>{let b=p(g),y=c++;o(m,y,g),u[m]=y,l[y]=g,s[y]=new RegExp(g,v?"g":void 0),a[y]=new RegExp(b,v?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),d("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER",`${f}+`),d("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),d("FULL",`^${l[u.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),d("LOOSE",`^${l[u.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),d("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),d("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),d("COERCERTL",l[u.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(LF,LF.exports);var NF=LF.exports,YZ=/^[0-9]+$/,aJ=(e,t)=>{let r=YZ.test(e),i=YZ.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},P8e=(e,t)=>aJ(t,e),I8e={compareIdentifiers:aJ,rcompareIdentifiers:P8e},aS=hS,{MAX_LENGTH:XZ,MAX_SAFE_INTEGER:lS}=IF,{safeRe:KZ,t:ZZ}=NF,N8e=PF,{compareIdentifiers:vg}=I8e,B8e=class Kl{constructor(t,r){if(r=N8e(r),t instanceof Kl){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>XZ)throw new TypeError(`version is longer than ${XZ} characters`);aS("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let i=t.trim().match(r.loose?KZ[ZZ.LOOSE]:KZ[ZZ.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>lS||this.major<0)throw new TypeError("Invalid major version");if(this.minor>lS||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>lS||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let o=+n;if(o>=0&&o<lS)return o}return n}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(aS("SemVer.compare",this.version,this.options,t),!(t instanceof Kl)){if(typeof t=="string"&&t===this.version)return 0;t=new Kl(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Kl||(t=new Kl(t,this.options)),vg(this.major,t.major)||vg(this.minor,t.minor)||vg(this.patch,t.patch)}comparePre(t){if(t instanceof Kl||(t=new Kl(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let i=this.prerelease[r],n=t.prerelease[r];if(aS("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return vg(i,n)}while(++r)}compareBuild(t){t instanceof Kl||(t=new Kl(t,this.options));let r=0;do{let i=this.build[r],n=t.build[r];if(aS("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return vg(i,n)}while(++r)}inc(t,r,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,i),this.inc("pre",r,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,i),this.inc("pre",r,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(i)?1:0;if(!r&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[n];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let o=[r,n];i===!1&&(o=[r]),vg(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}},BF=B8e,JZ=BF,z8e=(e,t,r)=>new JZ(e,r).compare(new JZ(t,r)),yg=z8e,H8e=yg,U8e=(e,t,r)=>H8e(e,t,r)===0,q8e=U8e,j8e=yg,W8e=(e,t,r)=>j8e(e,t,r)!==0,V8e=W8e,G8e=yg,Y8e=(e,t,r)=>G8e(e,t,r)>0,X8e=Y8e,K8e=yg,Z8e=(e,t,r)=>K8e(e,t,r)>=0,J8e=Z8e,Q8e=yg,eCe=(e,t,r)=>Q8e(e,t,r)<0,tCe=eCe,rCe=yg,iCe=(e,t,r)=>rCe(e,t,r)<=0,nCe=iCe,oCe=q8e,sCe=V8e,aCe=X8e,lCe=J8e,uCe=tCe,cCe=nCe,fCe=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return oCe(e,r,i);case"!=":return sCe(e,r,i);case">":return aCe(e,r,i);case">=":return lCe(e,r,i);case"<":return uCe(e,r,i);case"<=":return cCe(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}},hCe=fCe,MF,QZ;function dCe(){if(QZ)return MF;QZ=1;let e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=r(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){let f=this.options.loose?i[n.COMPARATORLOOSE]:i[n.COMPARATOR],h=c.match(f);if(!h)throw new TypeError(`Invalid comparator: ${c}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new a(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}MF=t;let r=PF,{safeRe:i,t:n}=NF,o=hCe,s=hS,a=BF,l=lJ();return MF}var FF,eJ;function lJ(){if(eJ)return FF;eJ=1;class e{constructor(I,N){if(N=i(N),I instanceof e)return I.loose===!!N.loose&&I.includePrerelease===!!N.includePrerelease?I:new e(I.raw,N);if(I instanceof n)return this.raw=I.value,this.set=[[I]],this.format(),this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=I.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let H=this.set[0];if(this.set=this.set.filter(T=>!d(T[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(let T of this.set)if(T.length===1&&m(T[0])){this.set=[T];break}}}this.format()}format(){return this.range=this.set.map(I=>I.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(I){let H=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+I,T=r.get(H);if(T)return T;let O=this.options.loose,L=O?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];I=I.replace(L,D(this.options.includePrerelease)),o("hyphen replace",I),I=I.replace(a[l.COMPARATORTRIM],u),o("comparator trim",I),I=I.replace(a[l.TILDETRIM],c),o("tilde trim",I),I=I.replace(a[l.CARETTRIM],f),o("caret trim",I);let q=I.split(" ").map(Ee=>v(Ee,this.options)).join(" ").split(/\s+/).map(Ee=>M(Ee,this.options));O&&(q=q.filter(Ee=>(o("loose invalid filter",Ee,this.options),!!Ee.match(a[l.COMPARATORLOOSE])))),o("range list",q);let X=new Map,ne=q.map(Ee=>new n(Ee,this.options));for(let Ee of ne){if(d(Ee))return[Ee];X.set(Ee.value,Ee)}X.size>1&&X.has("")&&X.delete("");let ke=[...X.values()];return r.set(H,ke),ke}intersects(I,N){if(!(I instanceof e))throw new TypeError("a Range is required");return this.set.some(H=>g(H,N)&&I.set.some(T=>g(T,N)&&H.every(O=>T.every(L=>O.intersects(L,N)))))}test(I){if(!I)return!1;if(typeof I=="string")try{I=new s(I,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(z(this.set[N],I,this.options))return!0;return!1}}FF=e;let t=E8e,r=new t({max:1e3}),i=PF,n=dCe(),o=hS,s=BF,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:f}=NF,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=IF,d=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,I)=>{let N=!0,H=P.slice(),T=H.pop();for(;N&&H.length;)N=H.every(O=>T.intersects(O,I)),T=H.pop();return N},v=(P,I)=>(o("comp",P,I),P=S(P,I),o("caret",P),P=y(P,I),o("tildes",P),P=w(P,I),o("xrange",P),P=A(P,I),o("stars",P),P),b=P=>!P||P.toLowerCase()==="x"||P==="*",y=(P,I)=>P.trim().split(/\s+/).map(N=>x(N,I)).join(" "),x=(P,I)=>{let N=I.loose?a[l.TILDELOOSE]:a[l.TILDE];return P.replace(N,(H,T,O,L,q)=>{o("tilde",P,H,T,O,L,q);let X;return b(T)?X="":b(O)?X=`>=${T}.0.0 <${+T+1}.0.0-0`:b(L)?X=`>=${T}.${O}.0 <${T}.${+O+1}.0-0`:q?(o("replaceTilde pr",q),X=`>=${T}.${O}.${L}-${q} <${T}.${+O+1}.0-0`):X=`>=${T}.${O}.${L} <${T}.${+O+1}.0-0`,o("tilde return",X),X})},S=(P,I)=>P.trim().split(/\s+/).map(N=>_(N,I)).join(" "),_=(P,I)=>{o("caret",P,I);let N=I.loose?a[l.CARETLOOSE]:a[l.CARET],H=I.includePrerelease?"-0":"";return P.replace(N,(T,O,L,q,X)=>{o("caret",P,T,O,L,q,X);let ne;return b(O)?ne="":b(L)?ne=`>=${O}.0.0${H} <${+O+1}.0.0-0`:b(q)?O==="0"?ne=`>=${O}.${L}.0${H} <${O}.${+L+1}.0-0`:ne=`>=${O}.${L}.0${H} <${+O+1}.0.0-0`:X?(o("replaceCaret pr",X),O==="0"?L==="0"?ne=`>=${O}.${L}.${q}-${X} <${O}.${L}.${+q+1}-0`:ne=`>=${O}.${L}.${q}-${X} <${O}.${+L+1}.0-0`:ne=`>=${O}.${L}.${q}-${X} <${+O+1}.0.0-0`):(o("no pr"),O==="0"?L==="0"?ne=`>=${O}.${L}.${q}${H} <${O}.${L}.${+q+1}-0`:ne=`>=${O}.${L}.${q}${H} <${O}.${+L+1}.0-0`:ne=`>=${O}.${L}.${q} <${+O+1}.0.0-0`),o("caret return",ne),ne})},w=(P,I)=>(o("replaceXRanges",P,I),P.split(/\s+/).map(N=>k(N,I)).join(" ")),k=(P,I)=>{P=P.trim();let N=I.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return P.replace(N,(H,T,O,L,q,X)=>{o("xRange",P,H,T,O,L,q,X);let ne=b(O),ke=ne||b(L),Ee=ke||b(q),G=Ee;return T==="="&&G&&(T=""),X=I.includePrerelease?"-0":"",ne?T===">"||T==="<"?H="<0.0.0-0":H="*":T&&G?(ke&&(L=0),q=0,T===">"?(T=">=",ke?(O=+O+1,L=0,q=0):(L=+L+1,q=0)):T==="<="&&(T="<",ke?O=+O+1:L=+L+1),T==="<"&&(X="-0"),H=`${T+O}.${L}.${q}${X}`):ke?H=`>=${O}.0.0${X} <${+O+1}.0.0-0`:Ee&&(H=`>=${O}.${L}.0${X} <${O}.${+L+1}.0-0`),o("xRange return",H),H})},A=(P,I)=>(o("replaceStars",P,I),P.trim().replace(a[l.STAR],"")),M=(P,I)=>(o("replaceGTE0",P,I),P.trim().replace(a[I.includePrerelease?l.GTE0PRE:l.GTE0],"")),D=P=>(I,N,H,T,O,L,q,X,ne,ke,Ee,G,B)=>(b(H)?N="":b(T)?N=`>=${H}.0.0${P?"-0":""}`:b(O)?N=`>=${H}.${T}.0${P?"-0":""}`:L?N=`>=${N}`:N=`>=${N}${P?"-0":""}`,b(ne)?X="":b(ke)?X=`<${+ne+1}.0.0-0`:b(Ee)?X=`<${ne}.${+ke+1}.0-0`:G?X=`<=${ne}.${ke}.${Ee}-${G}`:P?X=`<${ne}.${ke}.${+Ee+1}-0`:X=`<=${X}`,`${N} ${X}`.trim()),z=(P,I,N)=>{for(let H=0;H<P.length;H++)if(!P[H].test(I))return!1;if(I.prerelease.length&&!N.includePrerelease){for(let H=0;H<P.length;H++)if(o(P[H].semver),P[H].semver!==n.ANY&&P[H].semver.prerelease.length>0){let T=P[H].semver;if(T.major===I.major&&T.minor===I.minor&&T.patch===I.patch)return!0}return!1}return!0};return FF}var pCe=lJ(),mCe=(e,t,r)=>{try{t=new pCe(t,r)}catch{return!1}return t.test(e)},gCe=mCe,uJ=y8e(gCe);function vCe(e,t,r){let i=e.open(t),n=1e4,o=250,{origin:s}=new URL(t),a=~~(n/o);function l(c){c.source===i&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(i.postMessage(r,s),setTimeout(u,o),a-=1)}setTimeout(u,o)}var bCe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function cJ(e,...t){for(let r of t)yCe(e,r);return e}function yCe(e,t){for(let r of Object.keys(t))bu(e,r,t[r],!0)}var xCe="vega-embed",_Ce="6.24.0",wCe="Publish Vega visualizations as embedded web components.",SCe=["vega","data","visualization","component","embed"],CCe={type:"git",url:"http://github.com/vega/vega-embed.git"},kCe={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},ECe=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],ACe={url:"https://github.com/vega/vega-embed/issues"},TCe="https://github.com/vega/vega-embed#readme",DCe="BSD-3-Clause",RCe="build/vega-embed.js",MCe="build/vega-embed.module.js",FCe="build/vega-embed.min.js",OCe="build/vega-embed.min.js",$Ce="build/vega-embed.module.d.ts",LCe=["src","build","patches"],PCe={"@babel/core":"^7.23.6","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.23.6","@babel/preset-env":"^7.23.6","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/jest":"^29.5.11","@types/semver":"^7.5.6","@typescript-eslint/eslint-plugin":"^6.14.0","@typescript-eslint/parser":"^6.14.0","browser-sync":"^2.29.3",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.0","eslint-plugin-prettier":"^5.0.1",jest:"^29.7.0","jest-canvas-mock":"^2.5.2","jest-environment-jsdom":"^29.7.0","patch-package":"^8.0.0","postinstall-postinstall":"^2.1.0",prettier:"^3.1.1","release-it":"^17.0.1",rollup:"4.9.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.69.5",typescript:"^5.3.3",vega:"^5.22.1","vega-lite":"^5.2.0"},ICe={vega:"^5.21.0","vega-lite":"*"},NCe={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.5.4",tslib:"^2.6.2","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.14.0","vega-tooltip":"^0.34.0"},BCe=["yallist"],zCe={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},HCe={name:xCe,version:_Ce,description:wCe,keywords:SCe,repository:CCe,author:kCe,contributors:ECe,bugs:ACe,homepage:TCe,license:DCe,main:RCe,module:MCe,unpkg:FCe,jsdelivr:OCe,types:$Ce,files:LCe,devDependencies:PCe,peerDependencies:ICe,dependencies:NCe,bundledDependencies:BCe,scripts:zCe},M_t=HCe.version,Zl=lR,o2=yF,tJ=typeof window<"u"?window:void 0;o2===void 0&&tJ?.vl?.compile&&(o2=tJ.vl);var UCe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},qCe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},i2={vega:"Vega","vega-lite":"Vega-Lite"},fS={vega:Zl.version,"vega-lite":o2?o2.version:"not available"},jCe={vega:e=>e,"vega-lite":(e,t)=>o2.compile(e,{config:t}).spec},WCe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,VCe="chart-wrapper";function GCe(e){return typeof e=="function"}function rJ(e,t,r,i){let n=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${r}</body></html>`,s=window.open("");s.document.write(n+e+o),s.document.title=`${i2[i]} JSON Source`}function YCe(e,t){if(e.$schema){let r=xF(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${i2[r.library]}, but mode argument sets ${i2[t]??t}.`);let i=r.library;return uJ(fS[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${i2[i]} ${r.version}, but the current version of ${i2[i]} is v${fS[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function fJ(e){return!!(e&&"load"in e)}function iJ(e){return fJ(e)?e:Zl.loader(e)}function XCe(e){let t=e.usermeta?.embedOptions??{};return he(t.defaultStyle)&&(t.defaultStyle=!1),t}async function hJ(e,t,r={}){let i,n;he(t)?(n=iJ(r.loader),i=JSON.parse(await n.load(t))):i=t;let o=XCe(i),s=o.loader;(!n||s)&&(n=iJ(r.loader??s));let a=await nJ(o,n),l=await nJ(r,n),u={...cJ(l,a),config:cl(l.config??{},a.config??{})};return await ZCe(e,i,u,n)}async function nJ(e,t){let r=he(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=he(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...r?{config:r}:{}}}function KCe(e){let t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function ZCe(e,t,r={},i){let n=r.theme?cl(AF[r.theme],r.config??{}):r.config,o=xo(r.actions)?r.actions:cJ({},UCe,r.actions??{}),s={...qCe,...r.i18n},a=r.renderer??"canvas",l=r.logLevel??Zl.Warn,u=r.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(r.defaultStyle!==!1){let S="vega-embed-style",{root:_,rootContainer:w}=KCe(c);if(!_.getElementById(S)){let k=document.createElement("style");k.id=S,k.innerHTML=r.defaultStyle===void 0||r.defaultStyle===!0?bCe.toString():r.defaultStyle,w.appendChild(k)}}let f=YCe(t,r.mode),h=jCe[f](t,n);if(f==="vega-lite"&&h.$schema){let S=xF(h.$schema);uJ(fS.vega,`^${S.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${S.version}, but current version is v${fS.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let p=c;if(o){let S=document.createElement("div");S.classList.add(VCe),c.appendChild(S),p=S}let d=r.patch;if(d&&(h=d instanceof Function?d(h):$0(h,d,!0,!1).newDocument),r.formatLocale&&Zl.formatLocale(r.formatLocale),r.timeFormatLocale&&Zl.timeFormatLocale(r.timeFormatLocale),r.expressionFunctions)for(let S in r.expressionFunctions){let _=r.expressionFunctions[S];"fn"in _?Zl.expressionFunction(S,_.fn,_.visitor):_ instanceof Function&&Zl.expressionFunction(S,_)}let{ast:m}=r,g=Zl.parse(h,f==="vega-lite"?{}:n,{ast:m}),v=new(r.viewClass||Zl.View)(g,{loader:i,logLevel:l,renderer:a,...m?{expr:Zl.expressionInterpreter??r.expr??iV}:{}});if(v.addSignalListener("autosize",(S,_)=>{let{type:w}=_;w=="fit-x"?(p.classList.add("fit-x"),p.classList.remove("fit-y")):w=="fit-y"?(p.classList.remove("fit-x"),p.classList.add("fit-y")):w=="fit"?p.classList.add("fit-x","fit-y"):p.classList.remove("fit-x","fit-y")}),r.tooltip!==!1){let{loader:S,tooltip:_}=r,w=S&&!fJ(S)?S?.baseURL:void 0,k=GCe(_)?_:new sS({baseURL:w,..._===!0?{}:_}).call;v.tooltip(k)}let{hover:b}=r;if(b===void 0&&(b=f==="vega"),b){let{hoverSet:S,updateSet:_}=typeof b=="boolean"?{}:b;v.hover(S,_)}r&&(r.width!=null&&v.width(r.width),r.height!=null&&v.height(r.height),r.padding!=null&&v.padding(r.padding)),await v.initialize(p,r.bind).runAsync();let y;if(o!==!1){let S=c;if(r.defaultStyle!==!1||r.forceActionsMenu){let w=document.createElement("details");w.title=s.CLICK_TO_VIEW_ACTIONS,c.append(w),S=w;let k=document.createElement("summary");k.innerHTML=WCe,w.append(k),y=A=>{w.contains(A.target)||w.removeAttribute("open")},document.addEventListener("click",y)}let _=document.createElement("div");if(S.append(_),_.classList.add("vega-actions"),o===!0||o.export!==!1){for(let w of["svg","png"])if(o===!0||o.export===!0||o.export[w]){let k=s[`${w.toUpperCase()}_ACTION`],A=document.createElement("a"),M=me(r.scaleFactor)?r.scaleFactor[w]:r.scaleFactor;A.text=k,A.href="#",A.target="_blank",A.download=`${u}.${w}`,A.addEventListener("mousedown",async function(D){D.preventDefault();let z=await v.toImageURL(w,M);this.href=z}),_.append(A)}}if(o===!0||o.source!==!1){let w=document.createElement("a");w.text=s.SOURCE_ACTION,w.href="#",w.addEventListener("click",function(k){rJ((0,uS.default)(t),r.sourceHeader??"",r.sourceFooter??"",f),k.preventDefault()}),_.append(w)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){let w=document.createElement("a");w.text=s.COMPILED_ACTION,w.href="#",w.addEventListener("click",function(k){rJ((0,uS.default)(h),r.sourceHeader??"",r.sourceFooter??"","vega"),k.preventDefault()}),_.append(w)}if(o===!0||o.editor!==!1){let w=r.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=s.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(A){vCe(window,w,{config:n,mode:f,renderer:a,spec:(0,uS.default)(t)}),A.preventDefault()}),_.append(k)}}function x(){y&&document.removeEventListener("click",y),v.finalize()}return{view:v,spec:t,vgSpec:h,finalize:x,embedOptions:r}}var dJ=Ie`
  :host {
    display: inline-block;
  }

  :host([size='small']) {
    --height: var(--sl-toggle-size-small);
    --thumb-size: calc(var(--sl-toggle-size-small) + 4px);
    --width: calc(var(--height) * 2);

    font-size: var(--sl-input-font-size-small);
  }

  :host([size='medium']) {
    --height: var(--sl-toggle-size-medium);
    --thumb-size: calc(var(--sl-toggle-size-medium) + 4px);
    --width: calc(var(--height) * 2);

    font-size: var(--sl-input-font-size-medium);
  }

  :host([size='large']) {
    --height: var(--sl-toggle-size-large);
    --thumb-size: calc(var(--sl-toggle-size-large) + 4px);
    --width: calc(var(--height) * 2);

    font-size: var(--sl-input-font-size-large);
  }

  .switch {
    position: relative;
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-input-font-family);
    font-size: inherit;
    font-weight: var(--sl-input-font-weight);
    color: var(--sl-input-label-color);
    vertical-align: middle;
    cursor: pointer;
  }

  .switch__control {
    flex: 0 0 auto;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--width);
    height: var(--height);
    background-color: var(--sl-color-neutral-400);
    border: solid var(--sl-input-border-width) var(--sl-color-neutral-400);
    border-radius: var(--height);
    transition:
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) background-color;
  }

  .switch__control .switch__thumb {
    width: var(--thumb-size);
    height: var(--thumb-size);
    background-color: var(--sl-color-neutral-0);
    border-radius: 50%;
    border: solid var(--sl-input-border-width) var(--sl-color-neutral-400);
    translate: calc((var(--width) - var(--height)) / -2);
    transition:
      var(--sl-transition-fast) translate ease,
      var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) box-shadow;
  }

  .switch__input {
    position: absolute;
    opacity: 0;
    padding: 0;
    margin: 0;
    pointer-events: none;
  }

  /* Hover */
  .switch:not(.switch--checked):not(.switch--disabled) .switch__control:hover {
    background-color: var(--sl-color-neutral-400);
    border-color: var(--sl-color-neutral-400);
  }

  .switch:not(.switch--checked):not(.switch--disabled) .switch__control:hover .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-neutral-400);
  }

  /* Focus */
  .switch:not(.switch--checked):not(.switch--disabled) .switch__input:focus-visible ~ .switch__control {
    background-color: var(--sl-color-neutral-400);
    border-color: var(--sl-color-neutral-400);
  }

  .switch:not(.switch--checked):not(.switch--disabled) .switch__input:focus-visible ~ .switch__control .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  /* Checked */
  .switch--checked .switch__control {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
  }

  .switch--checked .switch__control .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    translate: calc((var(--width) - var(--height)) / 2);
  }

  /* Checked + hover */
  .switch.switch--checked:not(.switch--disabled) .switch__control:hover {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
  }

  .switch.switch--checked:not(.switch--disabled) .switch__control:hover .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
  }

  /* Checked + focus */
  .switch.switch--checked:not(.switch--disabled) .switch__input:focus-visible ~ .switch__control {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
  }

  .switch.switch--checked:not(.switch--disabled) .switch__input:focus-visible ~ .switch__control .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  /* Disabled */
  .switch--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .switch__label {
    display: inline-block;
    line-height: var(--height);
    margin-inline-start: 0.5em;
    user-select: none;
    -webkit-user-select: none;
  }

  :host([required]) .switch__label::after {
    content: var(--sl-input-required-content);
    color: var(--sl-input-required-content-color);
    margin-inline-start: var(--sl-input-required-content-offset);
  }

  @media (forced-colors: active) {
    .switch.switch--checked:not(.switch--disabled) .switch__control:hover .switch__thumb,
    .switch--checked .switch__control .switch__thumb {
      background-color: ButtonText;
    }
  }
`;var Qs=(e="value")=>(t,r)=>{let i=t.constructor,n=i.prototype.attributeChangedCallback;i.prototype.attributeChangedCallback=function(o,s,a){var l;let u=i.getPropertyOptions(e),c=typeof u.attribute=="string"?u.attribute:e;if(o===c){let f=u.converter||Hc,p=(typeof f=="function"?f:(l=f?.fromAttribute)!=null?l:Hc.fromAttribute)(a,u.type);this[e]!==p&&(this[r]=p)}n.call(this,o,s,a)}};var qo=Ie`
  .form-control .form-control__label {
    display: none;
  }

  .form-control .form-control__help-text {
    display: none;
  }

  /* Label */
  .form-control--has-label .form-control__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    margin-bottom: var(--sl-spacing-3x-small);
  }

  .form-control--has-label.form-control--small .form-control__label {
    font-size: var(--sl-input-label-font-size-small);
  }

  .form-control--has-label.form-control--medium .form-control__label {
    font-size: var(--sl-input-label-font-size-medium);
  }

  .form-control--has-label.form-control--large .form-control__label {
    font-size: var(--sl-input-label-font-size-large);
  }

  :host([required]) .form-control--has-label .form-control__label::after {
    content: var(--sl-input-required-content);
    margin-inline-start: var(--sl-input-required-content-offset);
    color: var(--sl-input-required-content-color);
  }

  /* Help text */
  .form-control--has-help-text .form-control__help-text {
    display: block;
    color: var(--sl-input-help-text-color);
    margin-top: var(--sl-spacing-3x-small);
  }

  .form-control--has-help-text.form-control--small .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-small);
  }

  .form-control--has-help-text.form-control--medium .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-medium);
  }

  .form-control--has-help-text.form-control--large .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-large);
  }

  .form-control--has-help-text.form-control--radio-group .form-control__help-text {
    margin-top: var(--sl-spacing-2x-small);
  }
`;var s2=new WeakMap,a2=new WeakMap,l2=new WeakMap,zF=new WeakSet,dS=new WeakMap,ji=class{constructor(e,t){this.handleFormData=r=>{let i=this.options.disabled(this.host),n=this.options.name(this.host),o=this.options.value(this.host),s=this.host.tagName.toLowerCase()==="sl-button";this.host.isConnected&&!i&&!s&&typeof n=="string"&&n.length>0&&typeof o<"u"&&(Array.isArray(o)?o.forEach(a=>{r.formData.append(n,a.toString())}):r.formData.append(n,o.toString()))},this.handleFormSubmit=r=>{var i;let n=this.options.disabled(this.host),o=this.options.reportValidity;this.form&&!this.form.noValidate&&((i=s2.get(this.form))==null||i.forEach(s=>{this.setUserInteracted(s,!0)})),this.form&&!this.form.noValidate&&!n&&!o(this.host)&&(r.preventDefault(),r.stopImmediatePropagation())},this.handleFormReset=()=>{this.options.setValue(this.host,this.options.defaultValue(this.host)),this.setUserInteracted(this.host,!1),dS.set(this.host,[])},this.handleInteraction=r=>{let i=dS.get(this.host);i.includes(r.type)||i.push(r.type),i.length===this.options.assumeInteractionOn.length&&this.setUserInteracted(this.host,!0)},this.checkFormValidity=()=>{if(this.form&&!this.form.noValidate){let r=this.form.querySelectorAll("*");for(let i of r)if(typeof i.checkValidity=="function"&&!i.checkValidity())return!1}return!0},this.reportFormValidity=()=>{if(this.form&&!this.form.noValidate){let r=this.form.querySelectorAll("*");for(let i of r)if(typeof i.reportValidity=="function"&&!i.reportValidity())return!1}return!0},(this.host=e).addController(this),this.options=bo({form:r=>{let i=r.form;if(i){let o=r.getRootNode().querySelector(`#${i}`);if(o)return o}return r.closest("form")},name:r=>r.name,value:r=>r.value,defaultValue:r=>r.defaultValue,disabled:r=>{var i;return(i=r.disabled)!=null?i:!1},reportValidity:r=>typeof r.reportValidity=="function"?r.reportValidity():!0,checkValidity:r=>typeof r.checkValidity=="function"?r.checkValidity():!0,setValue:(r,i)=>r.value=i,assumeInteractionOn:["sl-input"]},t)}hostConnected(){let e=this.options.form(this.host);e&&this.attachForm(e),dS.set(this.host,[]),this.options.assumeInteractionOn.forEach(t=>{this.host.addEventListener(t,this.handleInteraction)})}hostDisconnected(){this.detachForm(),dS.delete(this.host),this.options.assumeInteractionOn.forEach(e=>{this.host.removeEventListener(e,this.handleInteraction)})}hostUpdated(){let e=this.options.form(this.host);e||this.detachForm(),e&&this.form!==e&&(this.detachForm(),this.attachForm(e)),this.host.hasUpdated&&this.setValidity(this.host.validity.valid)}attachForm(e){e?(this.form=e,s2.has(this.form)?s2.get(this.form).add(this.host):s2.set(this.form,new Set([this.host])),this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),a2.has(this.form)||(a2.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity()),l2.has(this.form)||(l2.set(this.form,this.form.checkValidity),this.form.checkValidity=()=>this.checkFormValidity())):this.form=void 0}detachForm(){if(!this.form)return;let e=s2.get(this.form);e&&(e.delete(this.host),e.size<=0&&(this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),a2.has(this.form)&&(this.form.reportValidity=a2.get(this.form),a2.delete(this.form)),l2.has(this.form)&&(this.form.checkValidity=l2.get(this.form),l2.delete(this.form)),this.form=void 0))}setUserInteracted(e,t){t?zF.add(e):zF.delete(e),e.requestUpdate()}doAction(e,t){if(this.form){let r=document.createElement("button");r.type=e,r.style.position="absolute",r.style.width="0",r.style.height="0",r.style.clipPath="inset(50%)",r.style.overflow="hidden",r.style.whiteSpace="nowrap",t&&(r.name=t.name,r.value=t.value,["formaction","formenctype","formmethod","formnovalidate","formtarget"].forEach(i=>{t.hasAttribute(i)&&r.setAttribute(i,t.getAttribute(i))})),this.form.append(r),r.click(),r.remove()}}getForm(){var e;return(e=this.form)!=null?e:null}reset(e){this.doAction("reset",e)}submit(e){this.doAction("submit",e)}setValidity(e){let t=this.host,r=!!zF.has(t),i=!!t.required;t.toggleAttribute("data-required",i),t.toggleAttribute("data-optional",!i),t.toggleAttribute("data-invalid",!e),t.toggleAttribute("data-valid",e),t.toggleAttribute("data-user-invalid",!e&&r),t.toggleAttribute("data-user-valid",e&&r)}updateValidity(){let e=this.host;this.setValidity(e.validity.valid)}emitInvalidEvent(e){let t=new CustomEvent("sl-invalid",{bubbles:!1,composed:!1,cancelable:!0,detail:{}});e||t.preventDefault(),this.host.dispatchEvent(t)||e?.preventDefault()}},xg=Object.freeze({badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1}),pJ=Object.freeze(pu(bo({},xg),{valid:!1,valueMissing:!0})),mJ=Object.freeze(pu(bo({},xg),{valid:!1,customError:!0}));var ms=jn(class extends yo{constructor(e){if(super(e),e.type!==Vi.PROPERTY&&e.type!==Vi.ATTRIBUTE&&e.type!==Vi.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!nx(e))throw Error("`live` bindings can only contain a single expression")}render(e){return e}update(e,[t]){if(t===ti||t===at)return t;let r=e.element,i=e.name;if(e.type===Vi.PROPERTY){if(t===r[i])return ti}else if(e.type===Vi.BOOLEAN_ATTRIBUTE){if(!!t===r.hasAttribute(i))return ti}else if(e.type===Vi.ATTRIBUTE&&r.getAttribute(i)===t+"")return ti;return ox(e),t}});var fn=class extends Ge{constructor(){super(...arguments),this.formControlController=new ji(this,{value:e=>e.checked?e.value||"on":void 0,defaultValue:e=>e.defaultChecked,setValue:(e,t)=>e.checked=t}),this.hasSlotController=new Lr(this,"help-text"),this.hasFocus=!1,this.title="",this.name="",this.size="medium",this.disabled=!1,this.checked=!1,this.defaultChecked=!1,this.form="",this.required=!1,this.helpText=""}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleInput(){this.emit("sl-input")}handleInvalid(e){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(e)}handleClick(){this.checked=!this.checked,this.emit("sl-change")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleKeyDown(e){e.key==="ArrowLeft"&&(e.preventDefault(),this.checked=!1,this.emit("sl-change"),this.emit("sl-input")),e.key==="ArrowRight"&&(e.preventDefault(),this.checked=!0,this.emit("sl-change"),this.emit("sl-input"))}handleCheckedChange(){this.input.checked=this.checked,this.formControlController.updateValidity()}handleDisabledChange(){this.formControlController.setValidity(!0)}click(){this.input.click()}focus(e){this.input.focus(e)}blur(){this.input.blur()}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.formControlController.updateValidity()}render(){let e=this.hasSlotController.test("help-text"),t=this.helpText?!0:!!e;return Y`
      <div
        class=${Qe({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-help-text":t})}
      >
        <label
          part="base"
          class=${Qe({switch:!0,"switch--checked":this.checked,"switch--disabled":this.disabled,"switch--focused":this.hasFocus,"switch--small":this.size==="small","switch--medium":this.size==="medium","switch--large":this.size==="large"})}
        >
          <input
            class="switch__input"
            type="checkbox"
            title=${this.title}
            name=${this.name}
            value=${Se(this.value)}
            .checked=${ms(this.checked)}
            .disabled=${this.disabled}
            .required=${this.required}
            role="switch"
            aria-checked=${this.checked?"true":"false"}
            aria-describedby="help-text"
            @click=${this.handleClick}
            @input=${this.handleInput}
            @invalid=${this.handleInvalid}
            @blur=${this.handleBlur}
            @focus=${this.handleFocus}
            @keydown=${this.handleKeyDown}
          />

          <span part="control" class="switch__control">
            <span part="thumb" class="switch__thumb"></span>
          </span>

          <div part="label" class="switch__label">
            <slot></slot>
          </div>
        </label>

        <div
          aria-hidden=${t?"false":"true"}
          class="form-control__help-text"
          id="help-text"
          part="form-control-help-text"
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};fn.styles=[et,qo,dJ];F([Ne('input[type="checkbox"]')],fn.prototype,"input",2);F([Le()],fn.prototype,"hasFocus",2);F([U()],fn.prototype,"title",2);F([U()],fn.prototype,"name",2);F([U()],fn.prototype,"value",2);F([U({reflect:!0})],fn.prototype,"size",2);F([U({type:Boolean,reflect:!0})],fn.prototype,"disabled",2);F([U({type:Boolean,reflect:!0})],fn.prototype,"checked",2);F([Qs("checked")],fn.prototype,"defaultChecked",2);F([U({reflect:!0})],fn.prototype,"form",2);F([U({type:Boolean,reflect:!0})],fn.prototype,"required",2);F([U({attribute:"help-text"})],fn.prototype,"helpText",2);F([je("checked",{waitUntilFirstUpdate:!0})],fn.prototype,"handleCheckedChange",1);F([je("disabled",{waitUntilFirstUpdate:!0})],fn.prototype,"handleDisabledChange",1);fn.define("sl-switch");Pt.define("sl-icon");var gJ="tbx-theme",JCe="sl-theme-dark",QCe="sl-theme-light",vJ="(prefers-color-scheme: dark)";function eke(e){return t=>{customElements.get(e)==null&&customElements.define(e,t)}}var HF=new Set,Jl="light",qF=!1;function u2(){return typeof window<"u"&&typeof document<"u"}function UF(e){if(!u2())return;let t=document.documentElement;t.classList.toggle(JCe,e==="dark"),t.classList.toggle(QCe,e==="light"),t.style.colorScheme=e}function bJ(e){HF.forEach(t=>t(e))}function tke(){if(!u2())return null;try{let e=window.localStorage.getItem(gJ);if(e==="light"||e==="dark")return e}catch{}return null}function rke(e){if(u2())try{window.localStorage.setItem(gJ,e)}catch{}}function ike(){let e=tke();return e!==null?(qF=!0,e):u2()&&window.matchMedia(vJ).matches?"dark":"light"}function jF(){return Jl}function nke(e,t=!0){let r=Jl!==e;Jl=e,UF(e),t&&(qF=!0,rke(e)),r&&bJ(e)}function WF(e){return HF.add(e),e(Jl),()=>HF.delete(e)}function oke(){if(!u2())return;Jl=ike(),UF(Jl);let e=window.matchMedia(vJ),t=r=>{if(qF)return;let i=r.matches?"dark":"light";i!==Jl&&(Jl=i,UF(Jl),bJ(Jl))};typeof e.addEventListener=="function"?e.addEventListener("change",t):typeof e.addListener=="function"&&e.addListener(t)}oke();var pS=class extends HTMLElement{constructor(){super(...arguments);this.switchEl=null;this.iconEl=null;this.unsubscribe=null;this.handleToggle=r=>{let n=r.currentTarget.checked?"dark":"light";nke(n)}}connectedCallback(){this.shadowRoot==null&&(this.attachShadow({mode:"open"}),this.render());let r=this.shadowRoot;r!=null&&(this.switchEl=r.querySelector("sl-switch"),this.iconEl=r.querySelector("sl-icon"),this.switchEl!=null&&this.switchEl.addEventListener("sl-change",this.handleToggle),this.unsubscribe=WF(i=>{this.updateUI(i)}))}disconnectedCallback(){this.switchEl!=null&&this.switchEl.removeEventListener("sl-change",this.handleToggle),this.unsubscribe!=null&&(this.unsubscribe(),this.unsubscribe=null)}updateUI(r){let i=r==="dark",n=this.switchEl,o=this.iconEl;n!=null&&n.checked!==i&&(n.checked=i),n?.setAttribute("aria-label",i?"Activate light mode":"Activate dark mode"),o?.setAttribute("name",i?"moon":"sun")}render(){let r=this.shadowRoot;r!=null&&(r.innerHTML=`
      <style>
        :host {
          display: inline-flex;
          align-items: center;
        }

        sl-icon {
          margin-inline-start: 0.5rem;
          font-size: 1.2rem;
        }
      </style>
      <sl-switch size="small"></sl-switch>
      <sl-icon name="sun"></sl-icon>
    `)}};pS=Lt([eke("tbx-theme-toggle")],pS);var yJ={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Default chart rendered by tbx-chart.",width:"container",height:240,autosize:{type:"fit",contains:"padding"},data:{values:[{category:"Alpha",value:28},{category:"Beta",value:55},{category:"Gamma",value:43},{category:"Delta",value:91},{category:"Epsilon",value:81}]},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"category",type:"ordinal",sort:"ascending",title:"Category"},y:{field:"value",type:"quantitative",title:"Value"}},config:{axis:{labelFont:"inherit",titleFont:"inherit"},font:"inherit"}},xJ={actions:!1},ske={light:{background:"transparent",axis:{labelColor:"#111827",titleColor:"#111827",gridColor:"#e5e7eb"},legend:{labelColor:"#111827",titleColor:"#111827"},title:{color:"#111827"},view:{stroke:"#e5e7eb"},mark:{color:"#2563eb"},range:{category:["#2563eb","#16a34a","#f59e0b","#dc2626","#7c3aed","#0ea5e9"]}},dark:{background:"transparent",axis:{labelColor:"#e5e7eb",titleColor:"#e5e7eb",gridColor:"#4b5563"},legend:{labelColor:"#e5e7eb",titleColor:"#e5e7eb"},title:{color:"#f3f4f6"},view:{stroke:"#4b5563"},mark:{color:"#60a5fa"},range:{category:["#60a5fa","#f97316","#34d399","#facc15","#f472b6","#a855f7"]}}};function mS(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function _g(e,t){if(!(!mS(e)&&!mS(t)))return{...mS(e)?e:{},...mS(t)?t:{}}}function ake(e,t){let r={...e,...t??{}},i=_g(e.axis,t?.axis);i!=null&&(r.axis=i);let n=_g(e.legend,t?.legend);n!=null&&(r.legend=n);let o=_g(e.title,t?.title);o!=null&&(r.title=o);let s=_g(e.view,t?.view);s!=null&&(r.view=s);let a=_g(e.mark,t?.mark);a!=null&&(r.mark=a);let l=_g(e.range,t?.range);return l!=null&&(r.range=l),r}var nh=class extends gu(sr){constructor(){super(...arguments);this.spec=yJ;this.options=xJ;this.currentTheme=jF()}connectedCallback(){super.connectedCallback();let r=jF(),i=this.applyTheme(r);this.chartContainer!=null&&(this.embedResult==null||i)&&this.renderChart(),this.unsubscribeTheme=WF(n=>{this.applyTheme(n)&&this.renderChart()})}disconnectedCallback(){this.destroyChart(),this.unsubscribeTheme!=null&&(this.unsubscribeTheme(),this.unsubscribeTheme=void 0),super.disconnectedCallback()}firstUpdated(r){super.firstUpdated(r),this.embedResult==null&&this.renderChart()}updated(r){super.updated(r),(r.has("spec")||r.has("options"))&&this.renderChart()}render(){return Y`<div id="chart" part="chart"></div>`}async renderChart(){let r=this.chartContainer;if(r==null)return;this.destroyChart();let i=this.spec??yJ,n=this.createEmbedOptions();try{this.embedResult=await hJ(r,i,n)}catch(o){console.error("Failed to render vega chart",o),r.textContent="Unable to render chart."}}createEmbedOptions(){let r=this.options??{},i=ske[this.currentTheme],n={...xJ,...r},o=typeof r.config=="object"&&r.config!=null?r.config:void 0;return typeof r.config=="string"?n.config=r.config:n.config=ake(i,o),n}applyTheme(r){let i=this.currentTheme!==r;return this.currentTheme=r,this.setAttribute("data-theme",r),i}destroyChart(){this.embedResult!=null&&(this.embedResult.view.finalize(),this.embedResult=void 0),this.chartContainer!=null&&this.chartContainer.replaceChildren()}};nh.styles=Ie`
    :host {
      display: block;
      color: inherit;
    }

    :host([data-theme='dark']) {
      color-scheme: dark;
    }

    :host([data-theme='light']) {
      color-scheme: light;
    }

    #chart {
      width: 100%;
    }
  `,Lt([U({attribute:!1})],nh.prototype,"spec",2),Lt([U({attribute:!1})],nh.prototype,"options",2),Lt([Ne("#chart")],nh.prototype,"chartContainer",2),nh=Lt([mn("tbx-chart")],nh);var SJ=C$(wJ());var vS=class extends gu(sr){render(){return Y`<slot></slot>`}firstUpdated(){this.term=new SJ.Terminal({cursorBlink:!1,cursorStyle:"bar",cursorInactiveStyle:"none",theme:{}}),this.term.open(this),this.term.blur(),this.term.write("Hello from \x1B[1;3;31mToolboxUI\x1B[0m! \x1B[?25l")}};vS=Lt([mn("tbx-console")],vS);var CJ=()=>new YF,YF=class{},GF=new WeakMap,kJ=jn(class extends F0{render(e){return at}update(e,[t]){let r=t!==this.G;return r&&this.G!==void 0&&this.rt(void 0),(r||this.lt!==this.ct)&&(this.G=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),at}rt(e){if(this.isConnected||(e=void 0),typeof this.G=="function"){let t=this.ht??globalThis,r=GF.get(t);r===void 0&&(r=new WeakMap,GF.set(t,r)),r.get(this.G)!==void 0&&this.G.call(this.ht,void 0),r.set(this.G,e),e!==void 0&&this.G.call(this.ht,e)}else this.G.value=e}get lt(){return typeof this.G=="function"?GF.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var lke=typeof global=="object"&&global&&global.Object===Object&&global,EJ=lke;var uke=typeof self=="object"&&self&&self.Object===Object&&self,cke=EJ||uke||Function("return this")(),wg=cke;var fke=wg.Symbol,yc=fke;var AJ=Object.prototype,hke=AJ.hasOwnProperty,dke=AJ.toString,c2=yc?yc.toStringTag:void 0;function pke(e){var t=hke.call(e,c2),r=e[c2];try{e[c2]=void 0;var i=!0}catch{}var n=dke.call(e);return i&&(t?e[c2]=r:delete e[c2]),n}var TJ=pke;var mke=Object.prototype,gke=mke.toString;function vke(e){return gke.call(e)}var DJ=vke;var bke="[object Null]",yke="[object Undefined]",RJ=yc?yc.toStringTag:void 0;function xke(e){return e==null?e===void 0?yke:bke:RJ&&RJ in Object(e)?TJ(e):DJ(e)}var bS=xke;function _ke(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var h0=_ke;var wke="[object AsyncFunction]",Ske="[object Function]",Cke="[object GeneratorFunction]",kke="[object Proxy]";function Eke(e){if(!h0(e))return!1;var t=bS(e);return t==Ske||t==Cke||t==wke||t==kke}var MJ=Eke;var Ake=wg["__core-js_shared__"],yS=Ake;var FJ=(function(){var e=/[^.]+$/.exec(yS&&yS.keys&&yS.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Tke(e){return!!FJ&&FJ in e}var OJ=Tke;var Dke=Function.prototype,Rke=Dke.toString;function Mke(e){if(e!=null){try{return Rke.call(e)}catch{}try{return e+""}catch{}}return""}var $J=Mke;var Fke=/[\\^$.*+?()[\]{}|]/g,Oke=/^\[object .+?Constructor\]$/,$ke=Function.prototype,Lke=Object.prototype,Pke=$ke.toString,Ike=Lke.hasOwnProperty,Nke=RegExp("^"+Pke.call(Ike).replace(Fke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Bke(e){if(!h0(e)||OJ(e))return!1;var t=MJ(e)?Nke:Oke;return t.test($J(e))}var LJ=Bke;function zke(e,t){return e?.[t]}var PJ=zke;function Hke(e,t){var r=PJ(e,t);return LJ(r)?r:void 0}var Sg=Hke;var Uke=(function(){try{var e=Sg(Object,"defineProperty");return e({},"",{}),e}catch{}})(),XF=Uke;function qke(e,t,r){t=="__proto__"&&XF?XF(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var IJ=qke;function jke(e,t){return e===t||e!==e&&t!==t}var xS=jke;var Wke=Object.prototype,Vke=Wke.hasOwnProperty;function Gke(e,t,r){var i=e[t];(!(Vke.call(e,t)&&xS(i,r))||r===void 0&&!(t in e))&&IJ(e,t,r)}var NJ=Gke;var Yke=Array.isArray,Cg=Yke;function Xke(e){return e!=null&&typeof e=="object"}var BJ=Xke;var Kke="[object Symbol]";function Zke(e){return typeof e=="symbol"||BJ(e)&&bS(e)==Kke}var kg=Zke;var Jke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qke=/^\w*$/;function eEe(e,t){if(Cg(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||kg(e)?!0:Qke.test(e)||!Jke.test(e)||t!=null&&e in Object(t)}var zJ=eEe;var tEe=Sg(Object,"create"),xc=tEe;function rEe(){this.__data__=xc?xc(null):{},this.size=0}var HJ=rEe;function iEe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var UJ=iEe;var nEe="__lodash_hash_undefined__",oEe=Object.prototype,sEe=oEe.hasOwnProperty;function aEe(e){var t=this.__data__;if(xc){var r=t[e];return r===nEe?void 0:r}return sEe.call(t,e)?t[e]:void 0}var qJ=aEe;var lEe=Object.prototype,uEe=lEe.hasOwnProperty;function cEe(e){var t=this.__data__;return xc?t[e]!==void 0:uEe.call(t,e)}var jJ=cEe;var fEe="__lodash_hash_undefined__";function hEe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=xc&&t===void 0?fEe:t,this}var WJ=hEe;function Eg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Eg.prototype.clear=HJ;Eg.prototype.delete=UJ;Eg.prototype.get=qJ;Eg.prototype.has=jJ;Eg.prototype.set=WJ;var KF=Eg;function dEe(){this.__data__=[],this.size=0}var VJ=dEe;function pEe(e,t){for(var r=e.length;r--;)if(xS(e[r][0],t))return r;return-1}var oh=pEe;var mEe=Array.prototype,gEe=mEe.splice;function vEe(e){var t=this.__data__,r=oh(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():gEe.call(t,r,1),--this.size,!0}var GJ=vEe;function bEe(e){var t=this.__data__,r=oh(t,e);return r<0?void 0:t[r][1]}var YJ=bEe;function yEe(e){return oh(this.__data__,e)>-1}var XJ=yEe;function xEe(e,t){var r=this.__data__,i=oh(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var KJ=xEe;function Ag(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ag.prototype.clear=VJ;Ag.prototype.delete=GJ;Ag.prototype.get=YJ;Ag.prototype.has=XJ;Ag.prototype.set=KJ;var ZJ=Ag;var _Ee=Sg(wg,"Map"),JJ=_Ee;function wEe(){this.size=0,this.__data__={hash:new KF,map:new(JJ||ZJ),string:new KF}}var QJ=wEe;function SEe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var eQ=SEe;function CEe(e,t){var r=e.__data__;return eQ(t)?r[typeof t=="string"?"string":"hash"]:r.map}var sh=CEe;function kEe(e){var t=sh(this,e).delete(e);return this.size-=t?1:0,t}var tQ=kEe;function EEe(e){return sh(this,e).get(e)}var rQ=EEe;function AEe(e){return sh(this,e).has(e)}var iQ=AEe;function TEe(e,t){var r=sh(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var nQ=TEe;function Tg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Tg.prototype.clear=QJ;Tg.prototype.delete=tQ;Tg.prototype.get=rQ;Tg.prototype.has=iQ;Tg.prototype.set=nQ;var ZF=Tg;var DEe="Expected a function";function JF(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(DEe);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],o=r.cache;if(o.has(n))return o.get(n);var s=e.apply(this,i);return r.cache=o.set(n,s)||o,s};return r.cache=new(JF.Cache||ZF),r}JF.Cache=ZF;var oQ=JF;var REe=500;function MEe(e){var t=oQ(e,function(i){return r.size===REe&&r.clear(),i}),r=t.cache;return t}var sQ=MEe;var FEe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,OEe=/\\(\\)?/g,$Ee=sQ(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(FEe,function(r,i,n,o){t.push(n?o.replace(OEe,"$1"):i||r)}),t}),aQ=$Ee;function LEe(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var lQ=LEe;var PEe=1/0,uQ=yc?yc.prototype:void 0,cQ=uQ?uQ.toString:void 0;function fQ(e){if(typeof e=="string")return e;if(Cg(e))return lQ(e,fQ)+"";if(kg(e))return cQ?cQ.call(e):"";var t=e+"";return t=="0"&&1/e==-PEe?"-0":t}var hQ=fQ;function IEe(e){return e==null?"":hQ(e)}var dQ=IEe;function NEe(e,t){return Cg(e)?e:zJ(e,t)?[e]:aQ(dQ(e))}var pQ=NEe;var BEe=9007199254740991,zEe=/^(?:0|[1-9]\d*)$/;function HEe(e,t){var r=typeof e;return t=t??BEe,!!t&&(r=="number"||r!="symbol"&&zEe.test(e))&&e>-1&&e%1==0&&e<t}var mQ=HEe;var UEe=1/0;function qEe(e){if(typeof e=="string"||kg(e))return e;var t=e+"";return t=="0"&&1/e==-UEe?"-0":t}var gQ=qEe;function jEe(e,t,r,i){if(!h0(e))return e;t=pQ(t,e);for(var n=-1,o=t.length,s=o-1,a=e;a!=null&&++n<o;){var l=gQ(t[n]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=s){var c=a[l];u=i?i(c,l,a):void 0,u===void 0&&(u=h0(c)?c:mQ(t[n+1])?[]:{})}NJ(a,l,u),a=a[l]}return e}var vQ=jEe;function WEe(e,t,r){return e==null?e:vQ(e,t,r)}var bQ=WEe;var yQ=(e,t,r,i,n,o,s,a,l,u=!1,c=0)=>{if(!Array.isArray(t))return Y``;let f=g=>{t||(t=[]),Array.isArray(t)&&(typeof e.items!="object"||Array.isArray(e.items)||(e.items?.type==="string"?t.push(e.items?.default||""):e.items.properties?t.push(e.items?.default||{}):e.items?.type==="array"&&t.push(e.items?.default||[]),o([...r,t.length-1],t[t.length-1],a)))},h=g=>t?.map?.((v,b)=>{if(typeof e.items!="object"||Array.isArray(e.items)||!Array.isArray(t))return"";let y=[...a];y.push("items");let x=s(e.items,t[b],[...r,b],i,n?.[b],y,u,c+1),S=w=>k=>{if(!Array.isArray(t))return;let A=t[b];t[b]=t[b+w],t[b+w]=A,o([...r],t,a)},_={wrapper:{dragover:w=>{w.preventDefault(),w.stopPropagation();let k=w.dataTransfer;k&&(k.dropEffect="move")},dragenter:w=>{w.stopPropagation(),w.target.closest("sl-card")?.setAttribute("data-dropzone","")},dragleave:w=>{w.stopPropagation(),w.target.closest("sl-card")?.removeAttribute("data-dropzone")},drop:w=>{w.stopPropagation();let k=w.dataTransfer?.getData("integer");if(!k)return;let A=Number.parseInt(k,10);if(!Array.isArray(t))return;let M=t[b];t[b]=t[A],t[A]=M,o([...r],t,y),console.log({originIndex:A,idx:k}),w.target.closest("sl-card")?.removeAttribute("data-dropzone")}},handle:{mousedown:w=>{},dragstart:w=>{console.log(w),w.dataTransfer&&w.dataTransfer.setData("integer",String(b))}},delete:{click:w=>{Array.isArray(t)&&(t=t.filter((k,A)=>A!==b),o([...r],t,a))}},up:{click:S(-1),disabled:typeof t?.[b-1]>"u"},down:{click:S(1),disabled:typeof t?.[b+1]>"u"}};return g(b,x,_)}),p;typeof e.items=="object"&&!Array.isArray(e.items)&&e.items.title&&(p=e.items.title);let m={label:e.title??n?.["ui:title"],items:h,itemLabel:p,controls:{add:{click:f}},level:c};return l?.array?.(m)};var QF=(e,t,r,i,n,o,s,a,l=0)=>{let u="Wrong object field";if(typeof e.properties!="object")return a.callout?.({id:"",message:u})??Y`${u}`;let c=Object.entries(e.properties).map(([d,m])=>{if(Array.isArray(m)||typeof m=="boolean")return Y``;let g=t?.[d],v=[...r,d],b=e.required?.includes(d),y=[...s];return y.push(d),o(m,g,v,i?.[d],n?.[d],y,b,l+1)}),f,h=r.at(-1);e.title?f=e.title:typeof h!="number"&&(f=h),typeof n?.["ui:title"]=="string"&&(f=n["ui:title"]);let p={id:r.join("."),label:f,helpText:e.description,children:c,level:l};return a?.object?.(p)??a?.callout?.({id:"",message:u})??Y`${u}`};var xQ=(e,t,r,i,n,o,s,a,l)=>{let u=r.join(".");function c(y){let x={id:u,message:`Missing ${y} widget.`};return l?.callout?.(x)??Y`<p>${x.message}</p>`}let f="";e.title?f=e.title:Number.isNaN(Number(r.at(-1)))&&(f=String(r.at(-1))),i?.["ui:title"]&&(f=i?.["ui:title"]);let h=i?.["ui:help"]??i?.["ui:description"]??e.description??"",p=i?.["ui:placeholder"]??"",d=i?.["ui:disabled"]||!1,m=i?.["ui:readonly"]||!1,g;t!==void 0?g=t:typeof e.default<"u"&&(typeof e.default=="string"||typeof e.default=="number"||e.default==null||typeof e.default=="boolean")&&(g=e.default,o([...r],e.default,a));let b={label:f,helpText:h,placeholder:p,valueChangedCallback:y=>{let x=y;x===""&&(x=void 0),e?.type?.includes("null")&&(typeof y>"u"||y==="")&&(x=null),o(r,x,a)},handleKeydown:s,id:u,required:n,disabled:d,readonly:m};if(e?.enum&&(e.type==="integer"||e.type==="number"||e.type==="string")){let y={...b,value:g?String(g):"",type:e.type,enum:e.enum};return i?.["ui:widget"]==="radio"?l?.radioGroup?.(y)||c("radio group"):i?.["ui:widget"]==="button"?l?.buttonGroup?.(y)||c("button group"):l?.select?.(y)||c("select")}if(e.type==="string"&&i?.["ui:widget"]==="color"){let y={...b,value:g?String(g):""};return l?.colorPicker?.(y)||c("color picker")}if(e.format==="date"||e.format==="date-time"||e.format==="time"){let y=e.format,x=g;x&&(e.format,e.format,e.format==="date-time"&&(x instanceof Date||(x=new Date(x)),x instanceof Date&&(x=x.toISOString().split(".")[0]))),e.format==="date-time"&&(y="datetime-local");let S={...b,value:x,type:y};return l?.date?.(S)||c("date")}if(e.type==="string"){let y="text";(e.format==="password"||e.format==="email")&&(y=e.format),i?.["ui:widget"]==="password"&&(y="password"),i?.["ui:options"]?.inputType==="tel"&&(y="tel");let x={...b,value:g?String(g):"",inputType:y,minLength:e.minLength,maxLength:e.maxLength,pattern:e.pattern};if(i?.["ui:widget"]==="textarea")return l?.textarea?.(x)||c("textarea");if(typeof i?.["ui:widget"]=="string"){let S=i?.["ui:widget"];if(S!=="password")return l?.[S]?.(x)||c("custom")}return l?.text?.(x)||c("text")}if(e.type==="number"||e.type==="integer"){let y=e.multipleOf;typeof y>"u"&&(e.type?.includes("integer")&&(y=1),e.type?.includes("number")&&(y="any"));let x={...b,value:typeof g<"u"?Number(g):void 0,min:e.minimum,max:e.maximum,step:y};return i?.["ui:widget"]==="range"?l?.range?.(x)||c("range"):i?.["ui:widget"]==="rating"?l?.rating?.(x)||c("rating"):l?.number?.(x)||c("number")}if(e.type?.includes("boolean")){let y={...b,value:typeof g<"u"?!!g:void 0};return i?.["ui:widget"]==="switch"?l?.switch?.(y)||c("switch"):i?.["ui:widget"]==="radio"?l?.radioGroupBoolean?.(y)||c("radio group boolean"):i?.["ui:widget"]==="button"?l?.buttonGroupBoolean?.(y)||c("button group boolean"):l?.checkbox?.(y)||c("boolean")}return c(`Wrong input for: ${r.join("/")}`)};var _Q=(e,t,r,i,n,o,s,a,l,u=0)=>{let c=r.join(".");function f(v){let b={id:c,message:`Missing ${v} widget.`};return l?.callout?.(b)??Y`<p>${b.message}</p>`}let h=e.description??n?.["ui:help"]??"",p=e.items;if(typeof p!="object"||Array.isArray(p))return;let d=v=>{let b=[...a,"items","enum"];s(r,v,b)},m=n?.["ui:disabled"]||!1,g={label:e.title,helpText:h,value:t??e?.default,enum:p.enum,disabled:m,level:u,id:c,valueChangedCallback:d};return n?.["ui:widget"]==="select"?l?.selectMultiple?.(g)||f("multi select"):l?.checkboxGroup?.(g)||f("array primitive")};var _c=function(e,t,r,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},f2,Dg,Hn=class extends sr{constructor(){super(...arguments);x7(this,f2);x7(this,Dg);this.schema={},this.data={},this.uiSchema={},this.submitCallback=()=>{},this.dataChangeCallback=()=>{},this.widgets={},this.styleSheets=[],this.experimental={},this.submitButton=!0,this.submitButtonText="Submit",this._uiState={},_7(this,f2,()=>{let r={id:"__submit_button",label:this.submitButtonLabel},i="Missing submit widget.";return this.widgets?.submit?.(r)??this.widgets?.callout?.({message:i})??i}),_7(this,Dg,CJ())}_dig(r,i,n,o,s,a,l=!1,u=0){let c,f=r;if(typeof f.$ref<"u"||typeof f?.items=="object"&&"$ref"in f.items){let p=f.$ref;if(typeof f.items=="object"&&!Array.isArray(f.items)&&f.items?.$ref&&(p=f.items.$ref),p?.startsWith?.("#/definitions/")){let d=p.split("/")?.[2];f?.properties||(f.items={...this.schema.definitions?.[d]})}}if(f.type?.includes("boolean")||f.type?.includes("string")||f.type?.includes("integer")||f.format==="date"||f.format==="date-time"||f.type?.includes("number")){let p=[...a];c=xQ(f,i,n,s,l,this._handleChange.bind(this),this._handleKeydown.bind(this),p,this.widgets)}if(f.properties||f.allOf){if(f.allOf&&this.experimental?.allOf!==!0)return Y`Unsupported feature.`;let p=r,d=[...a];d.push("properties"),c=QF(p,i,n,o,s,this._dig.bind(this),d,this.widgets,u)}if(f.type==="array"&&typeof f.items=="object"&&!Array.isArray(f.items)&&f.items.enum&&f.uniqueItems&&(f.items.type==="string"||f.items.type==="number"||f.items.type==="integer"||f.items.type==="boolean")){let p=[...a];c=_Q(f,i,n,o,s,l,this._handleChange.bind(this),p,this.widgets,u)}if(typeof f.items=="object"){if(Array.isArray(f.items)){let p={...r,properties:{}};f.items.forEach((m,g)=>{p.properties&&(p.properties[g]=m)});let d=[...a,"items"];c=QF(p,i,n,o,s,this._dig.bind(this),d,this.widgets,u)}else if(!((f.items.type==="string"||f.items.type==="number")&&f.items.enum)){let p=[...a];i||(i=[]),c=yQ(r,i,n,o,s,this._handleChange.bind(this),this._dig.bind(this),p,this.widgets,l,u)}}if(c)return c;let h=`Cannot dig this level: ${n.join("/")} - (${String(f.type)})`;return this.widgets?.callout?.({id:"",message:h})??Y`<p>${h}</p>`}_setToValue(r,i,n){r&&typeof r=="object"&&bQ(r,n,i)}_handleChange(r,i,n){if(!(this.data&&typeof this.data=="object"))return;let o={...this.data};r.length===0?o={}:this._setToValue(o,i,r),this.data=o,this.dataChangeCallback(o,r,i,n)}_handleKeydown(r){console.log("cccccccccccccc");let i=r.metaKey||r.ctrlKey||r.shiftKey||r.altKey;r.key==="Enter"&&!i&&setTimeout(()=>{if(!r.defaultPrevented&&!r.isComposing){console.log({event:r});let n=j2(this,Dg).value,o=!0,s;if(!n.noValidate){let a=n.querySelectorAll("*");for(let l of a)typeof l.reportValidity=="function"&&(l.reportValidity()||(o=!1,s||(s=l)));s&&s?.reportValidity()}this.submitCallback(this.data,o)}})}_updateUi(r,i){if(!(this._uiState&&typeof this._uiState=="object"))return;let n={...this._uiState};this._setToValue(n,i,r),this._uiState=n}render(){return Y`
			<style>
				${G2(this.styleSheets.join(`
`))}
			</style>

			<form
				${kJ(j2(this,Dg))}
				part="base"
				@submit=${r=>{console.log("hey"),r.preventDefault();let i=r.target.reportValidity();this.submitCallback(this.data,i)}}
				@invalid=${r=>{}}
			>
				${this._dig(this.schema,this.data,[],this._uiState,this.uiSchema,[],!1)}

				<!--  -->
				${this.submitButton?j2(this,f2).call(this):at}
			</form>
		`}};f2=new WeakMap,Dg=new WeakMap;_c([U({type:Object})],Hn.prototype,"schema",void 0);_c([U({type:Object})],Hn.prototype,"data",void 0);_c([U({type:Object})],Hn.prototype,"uiSchema",void 0);_c([U({type:Object})],Hn.prototype,"widgets",void 0);_c([U({type:Array})],Hn.prototype,"styleSheets",void 0);_c([U({type:Object})],Hn.prototype,"experimental",void 0);_c([U({type:Boolean})],Hn.prototype,"submitButton",void 0);_c([U({type:String})],Hn.prototype,"submitButtonText",void 0);_c([Le()],Hn.prototype,"_uiState",void 0);customElements.define("json-schema-form",Hn);var LS={};pi(LS,{array:()=>AQ,buttonGroup:()=>MQ,buttonGroupBoolean:()=>FQ,callout:()=>OQ,checkbox:()=>LQ,checkboxGroup:()=>IQ,colorPicker:()=>zee,date:()=>Hee,number:()=>Uee,object:()=>qee,radioGroup:()=>Wee,radioGroupBoolean:()=>Vee,range:()=>Yee,rating:()=>Kee,select:()=>ete,selectMultiple:()=>tte,submit:()=>rte,switch:()=>ite,text:()=>nte,textarea:()=>ste});var wQ=Ie`
  :host {
    --border-color: var(--sl-color-neutral-200);
    --border-radius: var(--sl-border-radius-medium);
    --border-width: 1px;
    --padding: var(--sl-spacing-large);

    display: inline-block;
  }

  .card {
    display: flex;
    flex-direction: column;
    background-color: var(--sl-panel-background-color);
    box-shadow: var(--sl-shadow-x-small);
    border: solid var(--border-width) var(--border-color);
    border-radius: var(--border-radius);
  }

  .card__image {
    display: flex;
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
    margin: calc(-1 * var(--border-width));
    overflow: hidden;
  }

  .card__image::slotted(img) {
    display: block;
    width: 100%;
  }

  .card:not(.card--has-image) .card__image {
    display: none;
  }

  .card__header {
    display: block;
    border-bottom: solid var(--border-width) var(--border-color);
    padding: calc(var(--padding) / 2) var(--padding);
  }

  .card:not(.card--has-header) .card__header {
    display: none;
  }

  .card:not(.card--has-image) .card__header {
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
  }

  .card__body {
    display: block;
    padding: var(--padding);
  }

  .card--has-footer .card__footer {
    display: block;
    border-top: solid var(--border-width) var(--border-color);
    padding: var(--padding);
  }

  .card:not(.card--has-footer) .card__footer {
    display: none;
  }
`;var eO=class extends Ge{constructor(){super(...arguments),this.hasSlotController=new Lr(this,"footer","header","image")}render(){return Y`
      <div
        part="base"
        class=${Qe({card:!0,"card--has-footer":this.hasSlotController.test("footer"),"card--has-image":this.hasSlotController.test("image"),"card--has-header":this.hasSlotController.test("header")})}
      >
        <slot name="image" part="image" class="card__image"></slot>
        <slot name="header" part="header" class="card__header"></slot>
        <slot part="body" class="card__body"></slot>
        <slot name="footer" part="footer" class="card__footer"></slot>
      </div>
    `}};eO.styles=[et,wQ];eO.define("sl-card");var SQ=Ie`
  :host {
    display: inline-block;
  }

  .tag {
    display: flex;
    align-items: center;
    border: solid 1px;
    line-height: 1;
    white-space: nowrap;
    user-select: none;
    -webkit-user-select: none;
  }

  .tag__remove::part(base) {
    color: inherit;
    padding: 0;
  }

  /*
   * Variant modifiers
   */

  .tag--primary {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-200);
    color: var(--sl-color-primary-800);
  }

  .tag--primary:active > sl-icon-button {
    color: var(--sl-color-primary-600);
  }

  .tag--success {
    background-color: var(--sl-color-success-50);
    border-color: var(--sl-color-success-200);
    color: var(--sl-color-success-800);
  }

  .tag--success:active > sl-icon-button {
    color: var(--sl-color-success-600);
  }

  .tag--neutral {
    background-color: var(--sl-color-neutral-50);
    border-color: var(--sl-color-neutral-200);
    color: var(--sl-color-neutral-800);
  }

  .tag--neutral:active > sl-icon-button {
    color: var(--sl-color-neutral-600);
  }

  .tag--warning {
    background-color: var(--sl-color-warning-50);
    border-color: var(--sl-color-warning-200);
    color: var(--sl-color-warning-800);
  }

  .tag--warning:active > sl-icon-button {
    color: var(--sl-color-warning-600);
  }

  .tag--danger {
    background-color: var(--sl-color-danger-50);
    border-color: var(--sl-color-danger-200);
    color: var(--sl-color-danger-800);
  }

  .tag--danger:active > sl-icon-button {
    color: var(--sl-color-danger-600);
  }

  /*
   * Size modifiers
   */

  .tag--small {
    font-size: var(--sl-button-font-size-small);
    height: calc(var(--sl-input-height-small) * 0.8);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
    padding: 0 var(--sl-spacing-x-small);
  }

  .tag--medium {
    font-size: var(--sl-button-font-size-medium);
    height: calc(var(--sl-input-height-medium) * 0.8);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
    padding: 0 var(--sl-spacing-small);
  }

  .tag--large {
    font-size: var(--sl-button-font-size-large);
    height: calc(var(--sl-input-height-large) * 0.8);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
    padding: 0 var(--sl-spacing-medium);
  }

  .tag__remove {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  /*
   * Pill modifier
   */

  .tag--pill {
    border-radius: var(--sl-border-radius-pill);
  }
`;var CQ=Ie`
  :host {
    display: inline-block;
    color: var(--sl-color-neutral-600);
  }

  .icon-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    font-size: inherit;
    color: inherit;
    padding: var(--sl-spacing-x-small);
    cursor: pointer;
    transition: var(--sl-transition-x-fast) color;
    -webkit-appearance: none;
  }

  .icon-button:hover:not(.icon-button--disabled),
  .icon-button:focus-visible:not(.icon-button--disabled) {
    color: var(--sl-color-primary-600);
  }

  .icon-button:active:not(.icon-button--disabled) {
    color: var(--sl-color-primary-700);
  }

  .icon-button:focus {
    outline: none;
  }

  .icon-button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .icon-button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .icon-button__icon {
    pointer-events: none;
  }
`;var EQ=Symbol.for(""),VEe=e=>{if(e?.r===EQ)return e?._$litStatic$};var Rg=(e,...t)=>({_$litStatic$:t.reduce(((r,i,n)=>r+(o=>{if(o._$litStatic$!==void 0)return o._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${o}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(i)+e[n+1]),e[0]),r:EQ}),kQ=new Map,tO=e=>(t,...r)=>{let i=r.length,n,o,s=[],a=[],l,u=0,c=!1;for(;u<i;){for(l=t[u];u<i&&(o=r[u],(n=VEe(o))!==void 0);)l+=n+t[++u],c=!0;u!==i&&a.push(o),s.push(l),u++}if(u===i&&s.push(t[i]),c){let f=s.join("$$lit$$");(t=kQ.get(f))===void 0&&(s.raw=s,kQ.set(f,t=s)),r=a}return e(t,...r)},ah=tO(Y),CSt=tO(tx),kSt=tO(N$);var Un=class extends Ge{constructor(){super(...arguments),this.hasFocus=!1,this.label="",this.disabled=!1}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}click(){this.button.click()}focus(e){this.button.focus(e)}blur(){this.button.blur()}render(){let e=!!this.href,t=e?Rg`a`:Rg`button`;return ah`
      <${t}
        part="base"
        class=${Qe({"icon-button":!0,"icon-button--disabled":!e&&this.disabled,"icon-button--focused":this.hasFocus})}
        ?disabled=${Se(e?void 0:this.disabled)}
        type=${Se(e?void 0:"button")}
        href=${Se(e?this.href:void 0)}
        target=${Se(e?this.target:void 0)}
        download=${Se(e?this.download:void 0)}
        rel=${Se(e&&this.target?"noreferrer noopener":void 0)}
        role=${Se(e?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        aria-label="${this.label}"
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <sl-icon
          class="icon-button__icon"
          name=${Se(this.name)}
          library=${Se(this.library)}
          src=${Se(this.src)}
          aria-hidden="true"
        ></sl-icon>
      </${t}>
    `}};Un.styles=[et,CQ];Un.dependencies={"sl-icon":Pt};F([Ne(".icon-button")],Un.prototype,"button",2);F([Le()],Un.prototype,"hasFocus",2);F([U()],Un.prototype,"name",2);F([U()],Un.prototype,"library",2);F([U()],Un.prototype,"src",2);F([U()],Un.prototype,"href",2);F([U()],Un.prototype,"target",2);F([U()],Un.prototype,"download",2);F([U()],Un.prototype,"label",2);F([U({type:Boolean,reflect:!0})],Un.prototype,"disabled",2);var Ql=class extends Ge{constructor(){super(...arguments),this.localize=new Jt(this),this.variant="neutral",this.size="medium",this.pill=!1,this.removable=!1}handleRemoveClick(){this.emit("sl-remove")}render(){return Y`
      <span
        part="base"
        class=${Qe({tag:!0,"tag--primary":this.variant==="primary","tag--success":this.variant==="success","tag--neutral":this.variant==="neutral","tag--warning":this.variant==="warning","tag--danger":this.variant==="danger","tag--text":this.variant==="text","tag--small":this.size==="small","tag--medium":this.size==="medium","tag--large":this.size==="large","tag--pill":this.pill,"tag--removable":this.removable})}
      >
        <slot part="content" class="tag__content"></slot>

        ${this.removable?Y`
              <sl-icon-button
                part="remove-button"
                exportparts="base:remove-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("remove")}
                class="tag__remove"
                @click=${this.handleRemoveClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </span>
    `}};Ql.styles=[et,SQ];Ql.dependencies={"sl-icon-button":Un};F([U({reflect:!0})],Ql.prototype,"variant",2);F([U({reflect:!0})],Ql.prototype,"size",2);F([U({type:Boolean,reflect:!0})],Ql.prototype,"pill",2);F([U({type:Boolean})],Ql.prototype,"removable",2);Ql.define("sl-tag");var AQ=e=>Y`
		<fieldset
			id=${e.id}
			class="theme-shoelace widget-array widget-fieldset level-${e.level}"
			part="widget-array"
		>
			${e.label?Y`<legend>${e.label}</legend>`:at}
			<!-- -->
			${e.helpText?Y`<p class="widget-fieldset__description">${e.helpText}</p>`:at}
			<!--  -->
			${e.items((t,r,i)=>Y`
					<sl-card
						class="widget-array__card"
						@dragover=${i.wrapper.dragover}
						@dragenter=${i.wrapper.dragenter}
						@dragleave=${i.wrapper.dragleave}
						@drop=${i.wrapper.drop}
					>
						<header slot="header" class="widget-array__header">
							<div
								class="widget-array__handle"
								.draggable=${!0}
								@mousedown=${i.handle.mousedown}
								@dragstart=${i.handle.dragstart}
							>
								<sl-tag size="small" pill>${t+1}</sl-tag>
								<div class="widget-array__handle-grip">
									<sl-icon name="grip-horizontal" label="Settings"></sl-icon>
								</div>
							</div>

							<nav>
								<sl-tooltip content="Delete">
									<sl-button size="small" @click=${i.delete.click}>
										<sl-icon name="x-lg" label="Settings"></sl-icon>
									</sl-button>
								</sl-tooltip>

								<sl-divider vertical></sl-divider>

								<sl-button-group>
									<sl-tooltip content="Move item up">
										<sl-button
											size="small"
											@click=${i.up.click}
											.disabled=${i.up.disabled}
										>
											<sl-icon name="arrow-up" label="Up"></sl-icon>
										</sl-button>
									</sl-tooltip>

									<sl-tooltip content="Move item down">
										<sl-button
											size="small"
											@click=${i.down.click}
											.disabled=${i.down.disabled}
										>
											<sl-icon name="arrow-down" label="Down"></sl-icon>
										</sl-button>
									</sl-tooltip>
								</sl-button-group>
							</nav>
						</header>

						${r}
					</sl-card>
				`)}

			<nav class="widget-array__add-zone">
				<sl-button @click=${e.controls.add.click} size="large">
					<sl-icon name="plus"></sl-icon> New
					${e.itemLabel?Y`"<strong>${e.itemLabel}</strong>"`:at}
				</sl-button>
			</nav>
		</fieldset>
	`;var TQ=Ie`
  :host {
    display: block;
  }

  .form-control {
    position: relative;
    border: none;
    padding: 0;
    margin: 0;
  }

  .form-control__label {
    padding: 0;
  }

  .radio-group--required .radio-group__label::after {
    content: var(--sl-input-required-content);
    margin-inline-start: var(--sl-input-required-content-offset);
  }

  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
`;var DQ=Ie`
  :host {
    display: inline-block;
  }

  .button-group {
    display: flex;
    flex-wrap: nowrap;
  }
`;var lh=class extends Ge{constructor(){super(...arguments),this.disableRole=!1,this.label=""}handleFocus(e){let t=h2(e.target);t?.toggleAttribute("data-sl-button-group__button--focus",!0)}handleBlur(e){let t=h2(e.target);t?.toggleAttribute("data-sl-button-group__button--focus",!1)}handleMouseOver(e){let t=h2(e.target);t?.toggleAttribute("data-sl-button-group__button--hover",!0)}handleMouseOut(e){let t=h2(e.target);t?.toggleAttribute("data-sl-button-group__button--hover",!1)}handleSlotChange(){let e=[...this.defaultSlot.assignedElements({flatten:!0})];e.forEach(t=>{let r=e.indexOf(t),i=h2(t);i&&(i.toggleAttribute("data-sl-button-group__button",!0),i.toggleAttribute("data-sl-button-group__button--first",r===0),i.toggleAttribute("data-sl-button-group__button--inner",r>0&&r<e.length-1),i.toggleAttribute("data-sl-button-group__button--last",r===e.length-1),i.toggleAttribute("data-sl-button-group__button--radio",i.tagName.toLowerCase()==="sl-radio-button"))})}render(){return Y`
      <div
        part="base"
        class="button-group"
        role="${this.disableRole?"presentation":"group"}"
        aria-label=${this.label}
        @focusout=${this.handleBlur}
        @focusin=${this.handleFocus}
        @mouseover=${this.handleMouseOver}
        @mouseout=${this.handleMouseOut}
      >
        <slot @slotchange=${this.handleSlotChange}></slot>
      </div>
    `}};lh.styles=[et,DQ];F([Ne("slot")],lh.prototype,"defaultSlot",2);F([Le()],lh.prototype,"disableRole",2);F([U()],lh.prototype,"label",2);function h2(e){var t;let r="sl-button, sl-radio-button";return(t=e.closest(r))!=null?t:e.querySelector(r)}var Wi=class extends Ge{constructor(){super(...arguments),this.formControlController=new ji(this),this.hasSlotController=new Lr(this,"help-text","label"),this.customValidityMessage="",this.hasButtonGroup=!1,this.errorMessage="",this.defaultValue="",this.label="",this.helpText="",this.name="option",this.value="",this.size="medium",this.form="",this.required=!1}get validity(){let e=this.required&&!this.value;return this.customValidityMessage!==""?mJ:e?pJ:xg}get validationMessage(){let e=this.required&&!this.value;return this.customValidityMessage!==""?this.customValidityMessage:e?this.validationInput.validationMessage:""}connectedCallback(){super.connectedCallback(),this.defaultValue=this.value}firstUpdated(){this.formControlController.updateValidity()}getAllRadios(){return[...this.querySelectorAll("sl-radio, sl-radio-button")]}handleRadioClick(e){let t=e.target.closest("sl-radio, sl-radio-button"),r=this.getAllRadios(),i=this.value;!t||t.disabled||(this.value=t.value,r.forEach(n=>n.checked=n===t),this.value!==i&&(this.emit("sl-change"),this.emit("sl-input")))}handleKeyDown(e){var t;if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(e.key))return;let r=this.getAllRadios().filter(a=>!a.disabled),i=(t=r.find(a=>a.checked))!=null?t:r[0],n=e.key===" "?0:["ArrowUp","ArrowLeft"].includes(e.key)?-1:1,o=this.value,s=r.indexOf(i)+n;s<0&&(s=r.length-1),s>r.length-1&&(s=0),this.getAllRadios().forEach(a=>{a.checked=!1,this.hasButtonGroup||a.setAttribute("tabindex","-1")}),this.value=r[s].value,r[s].checked=!0,this.hasButtonGroup?r[s].shadowRoot.querySelector("button").focus():(r[s].setAttribute("tabindex","0"),r[s].focus()),this.value!==o&&(this.emit("sl-change"),this.emit("sl-input")),e.preventDefault()}handleLabelClick(){this.focus()}handleInvalid(e){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(e)}async syncRadioElements(){var e,t;let r=this.getAllRadios();if(await Promise.all(r.map(async i=>{await i.updateComplete,i.checked=i.value===this.value,i.size=this.size})),this.hasButtonGroup=r.some(i=>i.tagName.toLowerCase()==="sl-radio-button"),r.length>0&&!r.some(i=>i.checked))if(this.hasButtonGroup){let i=(e=r[0].shadowRoot)==null?void 0:e.querySelector("button");i&&i.setAttribute("tabindex","0")}else r[0].setAttribute("tabindex","0");if(this.hasButtonGroup){let i=(t=this.shadowRoot)==null?void 0:t.querySelector("sl-button-group");i&&(i.disableRole=!0)}}syncRadios(){if(customElements.get("sl-radio")&&customElements.get("sl-radio-button")){this.syncRadioElements();return}customElements.get("sl-radio")?this.syncRadioElements():customElements.whenDefined("sl-radio").then(()=>this.syncRadios()),customElements.get("sl-radio-button")?this.syncRadioElements():customElements.whenDefined("sl-radio-button").then(()=>this.syncRadios())}updateCheckedRadio(){this.getAllRadios().forEach(t=>t.checked=t.value===this.value),this.formControlController.setValidity(this.validity.valid)}handleSizeChange(){this.syncRadios()}handleValueChange(){this.hasUpdated&&this.updateCheckedRadio()}checkValidity(){let e=this.required&&!this.value,t=this.customValidityMessage!=="";return e||t?(this.formControlController.emitInvalidEvent(),!1):!0}getForm(){return this.formControlController.getForm()}reportValidity(){let e=this.validity.valid;return this.errorMessage=this.customValidityMessage||e?"":this.validationInput.validationMessage,this.formControlController.setValidity(e),this.validationInput.hidden=!0,clearTimeout(this.validationTimeout),e||(this.validationInput.hidden=!1,this.validationInput.reportValidity(),this.validationTimeout=setTimeout(()=>this.validationInput.hidden=!0,1e4)),e}setCustomValidity(e=""){this.customValidityMessage=e,this.errorMessage=e,this.validationInput.setCustomValidity(e),this.formControlController.updateValidity()}focus(e){let t=this.getAllRadios(),r=t.find(o=>o.checked),i=t.find(o=>!o.disabled),n=r||i;n&&n.focus(e)}render(){let e=this.hasSlotController.test("label"),t=this.hasSlotController.test("help-text"),r=this.label?!0:!!e,i=this.helpText?!0:!!t,n=Y`
      <slot @slotchange=${this.syncRadios} @click=${this.handleRadioClick} @keydown=${this.handleKeyDown}></slot>
    `;return Y`
      <fieldset
        part="form-control"
        class=${Qe({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--radio-group":!0,"form-control--has-label":r,"form-control--has-help-text":i})}
        role="radiogroup"
        aria-labelledby="label"
        aria-describedby="help-text"
        aria-errormessage="error-message"
      >
        <label
          part="form-control-label"
          id="label"
          class="form-control__label"
          aria-hidden=${r?"false":"true"}
          @click=${this.handleLabelClick}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div class="visually-hidden">
            <div id="error-message" aria-live="assertive">${this.errorMessage}</div>
            <label class="radio-group__validation">
              <input
                type="text"
                class="radio-group__validation-input"
                ?required=${this.required}
                tabindex="-1"
                hidden
                @invalid=${this.handleInvalid}
              />
            </label>
          </div>

          ${this.hasButtonGroup?Y`
                <sl-button-group part="button-group" exportparts="base:button-group__base" role="presentation">
                  ${n}
                </sl-button-group>
              `:n}
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${i?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </fieldset>
    `}};Wi.styles=[et,qo,TQ];Wi.dependencies={"sl-button-group":lh};F([Ne("slot:not([name])")],Wi.prototype,"defaultSlot",2);F([Ne(".radio-group__validation-input")],Wi.prototype,"validationInput",2);F([Le()],Wi.prototype,"hasButtonGroup",2);F([Le()],Wi.prototype,"errorMessage",2);F([Le()],Wi.prototype,"defaultValue",2);F([U()],Wi.prototype,"label",2);F([U({attribute:"help-text"})],Wi.prototype,"helpText",2);F([U()],Wi.prototype,"name",2);F([U({reflect:!0})],Wi.prototype,"value",2);F([U({reflect:!0})],Wi.prototype,"size",2);F([U({reflect:!0})],Wi.prototype,"form",2);F([U({type:Boolean,reflect:!0})],Wi.prototype,"required",2);F([je("size",{waitUntilFirstUpdate:!0})],Wi.prototype,"handleSizeChange",1);F([je("value")],Wi.prototype,"handleValueChange",1);Wi.define("sl-radio-group");var _S=Ie`
  :host {
    display: inline-block;
    position: relative;
    width: auto;
    cursor: pointer;
  }

  .button {
    display: inline-flex;
    align-items: stretch;
    justify-content: center;
    width: 100%;
    border-style: solid;
    border-width: var(--sl-input-border-width);
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-font-weight-semibold);
    text-decoration: none;
    user-select: none;
    -webkit-user-select: none;
    white-space: nowrap;
    vertical-align: middle;
    padding: 0;
    transition:
      var(--sl-transition-x-fast) background-color,
      var(--sl-transition-x-fast) color,
      var(--sl-transition-x-fast) border,
      var(--sl-transition-x-fast) box-shadow;
    cursor: inherit;
  }

  .button::-moz-focus-inner {
    border: 0;
  }

  .button:focus {
    outline: none;
  }

  .button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When disabled, prevent mouse events from bubbling up from children */
  .button--disabled * {
    pointer-events: none;
  }

  .button__prefix,
  .button__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    pointer-events: none;
  }

  .button__label {
    display: inline-block;
  }

  .button__label::slotted(sl-icon) {
    vertical-align: -2px;
  }

  /*
   * Standard buttons
   */

  /* Default */
  .button--standard.button--default {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-input-border-color);
    color: var(--sl-color-neutral-700);
  }

  .button--standard.button--default:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-300);
    color: var(--sl-color-primary-700);
  }

  .button--standard.button--default:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-100);
    border-color: var(--sl-color-primary-400);
    color: var(--sl-color-primary-700);
  }

  /* Primary */
  .button--standard.button--primary {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--standard.button--success {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:hover:not(.button--disabled) {
    background-color: var(--sl-color-success-500);
    border-color: var(--sl-color-success-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:active:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--standard.button--neutral {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:hover:not(.button--disabled) {
    background-color: var(--sl-color-neutral-500);
    border-color: var(--sl-color-neutral-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:active:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--standard.button--warning {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }
  .button--standard.button--warning:hover:not(.button--disabled) {
    background-color: var(--sl-color-warning-500);
    border-color: var(--sl-color-warning-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--warning:active:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--standard.button--danger {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:hover:not(.button--disabled) {
    background-color: var(--sl-color-danger-500);
    border-color: var(--sl-color-danger-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:active:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /*
   * Outline buttons
   */

  .button--outline {
    background: none;
    border: solid 1px;
  }

  /* Default */
  .button--outline.button--default {
    border-color: var(--sl-input-border-color);
    color: var(--sl-color-neutral-700);
  }

  .button--outline.button--default:hover:not(.button--disabled),
  .button--outline.button--default.button--checked:not(.button--disabled) {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--default:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Primary */
  .button--outline.button--primary {
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-primary-600);
  }

  .button--outline.button--primary:hover:not(.button--disabled),
  .button--outline.button--primary.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--primary:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--outline.button--success {
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-success-600);
  }

  .button--outline.button--success:hover:not(.button--disabled),
  .button--outline.button--success.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--success:active:not(.button--disabled) {
    border-color: var(--sl-color-success-700);
    background-color: var(--sl-color-success-700);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--outline.button--neutral {
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-600);
  }

  .button--outline.button--neutral:hover:not(.button--disabled),
  .button--outline.button--neutral.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--neutral:active:not(.button--disabled) {
    border-color: var(--sl-color-neutral-700);
    background-color: var(--sl-color-neutral-700);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--outline.button--warning {
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-warning-600);
  }

  .button--outline.button--warning:hover:not(.button--disabled),
  .button--outline.button--warning.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--warning:active:not(.button--disabled) {
    border-color: var(--sl-color-warning-700);
    background-color: var(--sl-color-warning-700);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--outline.button--danger {
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-danger-600);
  }

  .button--outline.button--danger:hover:not(.button--disabled),
  .button--outline.button--danger.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--danger:active:not(.button--disabled) {
    border-color: var(--sl-color-danger-700);
    background-color: var(--sl-color-danger-700);
    color: var(--sl-color-neutral-0);
  }

  @media (forced-colors: active) {
    .button.button--outline.button--checked:not(.button--disabled) {
      outline: solid 2px transparent;
    }
  }

  /*
   * Text buttons
   */

  .button--text {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-600);
  }

  .button--text:hover:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:focus-visible:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:active:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-700);
  }

  /*
   * Size modifiers
   */

  .button--small {
    height: auto;
    min-height: var(--sl-input-height-small);
    font-size: var(--sl-button-font-size-small);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
  }

  .button--medium {
    height: auto;
    min-height: var(--sl-input-height-medium);
    font-size: var(--sl-button-font-size-medium);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
  }

  .button--large {
    height: auto;
    min-height: var(--sl-input-height-large);
    font-size: var(--sl-button-font-size-large);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
  }

  /*
   * Pill modifier
   */

  .button--pill.button--small {
    border-radius: var(--sl-input-height-small);
  }

  .button--pill.button--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .button--pill.button--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Circle modifier
   */

  .button--circle {
    padding-left: 0;
    padding-right: 0;
  }

  .button--circle.button--small {
    width: var(--sl-input-height-small);
    border-radius: 50%;
  }

  .button--circle.button--medium {
    width: var(--sl-input-height-medium);
    border-radius: 50%;
  }

  .button--circle.button--large {
    width: var(--sl-input-height-large);
    border-radius: 50%;
  }

  .button--circle .button__prefix,
  .button--circle .button__suffix,
  .button--circle .button__caret {
    display: none;
  }

  /*
   * Caret modifier
   */

  .button--caret .button__suffix {
    display: none;
  }

  .button--caret .button__caret {
    height: auto;
  }

  /*
   * Loading modifier
   */

  .button--loading {
    position: relative;
    cursor: wait;
  }

  .button--loading .button__prefix,
  .button--loading .button__label,
  .button--loading .button__suffix,
  .button--loading .button__caret {
    visibility: hidden;
  }

  .button--loading sl-spinner {
    --indicator-color: currentColor;
    position: absolute;
    font-size: 1em;
    height: 1em;
    width: 1em;
    top: calc(50% - 0.5em);
    left: calc(50% - 0.5em);
  }

  /*
   * Badges
   */

  .button ::slotted(sl-badge) {
    position: absolute;
    top: 0;
    right: 0;
    translate: 50% -50%;
    pointer-events: none;
  }

  .button--rtl ::slotted(sl-badge) {
    right: auto;
    left: 0;
    translate: -50% -50%;
  }

  /*
   * Button spacing
   */

  .button--has-label.button--small .button__label {
    padding: 0 var(--sl-spacing-small);
  }

  .button--has-label.button--medium .button__label {
    padding: 0 var(--sl-spacing-medium);
  }

  .button--has-label.button--large .button__label {
    padding: 0 var(--sl-spacing-large);
  }

  .button--has-prefix.button--small {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--small .button__label {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--medium {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--medium .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-suffix.button--small,
  .button--caret.button--small {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--small .button__label,
  .button--caret.button--small .button__label {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--medium,
  .button--caret.button--medium {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--medium .button__label,
  .button--caret.button--medium .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large,
  .button--caret.button--large {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large .button__label,
  .button--caret.button--large .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  /*
   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).
   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the
   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to
   * buttons and we style them here instead.
   */

  :host([data-sl-button-group__button--first]:not([data-sl-button-group__button--last])) .button {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
  }

  :host([data-sl-button-group__button--inner]) .button {
    border-radius: 0;
  }

  :host([data-sl-button-group__button--last]:not([data-sl-button-group__button--first])) .button {
    border-start-start-radius: 0;
    border-end-start-radius: 0;
  }

  /* All except the first */
  :host([data-sl-button-group__button]:not([data-sl-button-group__button--first])) {
    margin-inline-start: calc(-1 * var(--sl-input-border-width));
  }

  /* Add a visual separator between solid buttons */
  :host(
      [data-sl-button-group__button]:not(
          [data-sl-button-group__button--first],
          [data-sl-button-group__button--radio],
          [variant='default']
        ):not(:hover)
    )
    .button:after {
    content: '';
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    bottom: 0;
    border-left: solid 1px rgb(128 128 128 / 33%);
    mix-blend-mode: multiply;
  }

  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */
  :host([data-sl-button-group__button--hover]) {
    z-index: 1;
  }

  /* Focus and checked are always on top */
  :host([data-sl-button-group__button--focus]),
  :host([data-sl-button-group__button][checked]) {
    z-index: 2;
  }
`;var RQ=Ie`
  ${_S}

  .button__prefix,
  .button__suffix,
  .button__label {
    display: inline-flex;
    position: relative;
    align-items: center;
  }

  /* We use a hidden input so constraint validation errors work, since they don't appear to show when used with buttons.
    We can't actually hide it, though, otherwise the messages will be suppressed by the browser. */
  .hidden-input {
    all: unset;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    outline: dotted 1px red;
    opacity: 0;
    z-index: -1;
  }
`;var ea=class extends Ge{constructor(){super(...arguments),this.hasSlotController=new Lr(this,"[default]","prefix","suffix"),this.hasFocus=!1,this.checked=!1,this.disabled=!1,this.size="medium",this.pill=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","presentation")}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleClick(e){if(this.disabled){e.preventDefault(),e.stopPropagation();return}this.checked=!0}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}focus(e){this.input.focus(e)}blur(){this.input.blur()}render(){return ah`
      <div part="base" role="presentation">
        <button
          part="${`button${this.checked?" button--checked":""}`}"
          role="radio"
          aria-checked="${this.checked}"
          class=${Qe({button:!0,"button--default":!0,"button--small":this.size==="small","button--medium":this.size==="medium","button--large":this.size==="large","button--checked":this.checked,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--outline":!0,"button--pill":this.pill,"button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
          aria-disabled=${this.disabled}
          type="button"
          value=${Se(this.value)}
          @blur=${this.handleBlur}
          @focus=${this.handleFocus}
          @click=${this.handleClick}
        >
          <slot name="prefix" part="prefix" class="button__prefix"></slot>
          <slot part="label" class="button__label"></slot>
          <slot name="suffix" part="suffix" class="button__suffix"></slot>
        </button>
      </div>
    `}};ea.styles=[et,RQ];F([Ne(".button")],ea.prototype,"input",2);F([Ne(".hidden-input")],ea.prototype,"hiddenInput",2);F([Le()],ea.prototype,"hasFocus",2);F([U({type:Boolean,reflect:!0})],ea.prototype,"checked",2);F([U()],ea.prototype,"value",2);F([U({type:Boolean,reflect:!0})],ea.prototype,"disabled",2);F([U({reflect:!0})],ea.prototype,"size",2);F([U({type:Boolean,reflect:!0})],ea.prototype,"pill",2);F([je("disabled",{waitUntilFirstUpdate:!0})],ea.prototype,"handleDisabledChange",1);ea.define("sl-radio-button");var MQ=e=>Y`
	<sl-radio-group
		size="medium"
		.label=${e.label??""}
		.helpText=${e.helpText??""}
		value=${typeof e.value<"u"?String(e.value):""}
		.name=${e.id}
		.required=${e.required??!1}
		@sl-change=${t=>{let r=t.target.value;e.type==="number"&&(r=Number(r)),e.valueChangedCallback?.(r)}}
	>
		${e.enum?.map(t=>Y`<sl-radio-button
					.disabled=${String(t)===e.value?!1:e.disabled}
					value=${String(t)}
					>${t}</sl-radio-button
				>`)}
	</sl-radio-group>
`;var FQ=e=>Y`
	<sl-radio-group
		size="medium"
		.label=${e.label??""}
		.helpText=${e.helpText??""}
		value=${typeof e.value<"u"?String(e.value):""}
		.name=${e.id}
		.required?=${e.required}
		@sl-change=${t=>{let r=t.target.value;e.valueChangedCallback?.(r==="true")}}
	>
		<sl-radio-button
			value="true"
			.disabled=${e.value===!0?!1:e.disabled}
			>${e.trueLabel??"Yes"}</sl-radio-button
		>
		<sl-radio-button
			value="false"
			.disabled=${e.value===!1?!1:e.disabled}
			>${e.falseLabel??"No"}</sl-radio-button
		>
	</sl-radio-group>
`;var OQ=e=>(console.warn(e.message),Y`
		<div
			role="alert"
			class=${`callout--${e.type??"warning"} theme-shoelace widget-callout`}
			id=${e.id}
			part="widget-callout"
		>
			<p>${e.message}</p>
		</div>
	`);var $Q=Ie`
  :host {
    display: block;
  }

  .input {
    flex: 1 1 auto;
    display: inline-flex;
    align-items: stretch;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: text;
    transition:
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) border,
      var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  /* Standard inputs */
  .input--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .input--standard:hover:not(.input--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }

  .input--standard.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .input--standard.input--focused:not(.input--disabled) .input__control {
    color: var(--sl-input-color-focus);
  }

  .input--standard.input--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input--standard.input--disabled .input__control {
    color: var(--sl-input-color-disabled);
  }

  .input--standard.input--disabled .input__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled inputs */
  .input--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .input--filled:hover:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .input--filled.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .input--filled.input--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    min-width: 0;
    height: 100%;
    color: var(--sl-input-color);
    border: none;
    background: inherit;
    box-shadow: none;
    padding: 0;
    margin: 0;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .input__control::-webkit-search-decoration,
  .input__control::-webkit-search-cancel-button,
  .input__control::-webkit-search-results-button,
  .input__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .input__control:-webkit-autofill,
  .input__control:-webkit-autofill:hover,
  .input__control:-webkit-autofill:focus,
  .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;
    -webkit-text-fill-color: var(--sl-color-primary-500);
    caret-color: var(--sl-input-color);
  }

  .input--filled .input__control:-webkit-autofill,
  .input--filled .input__control:-webkit-autofill:hover,
  .input--filled .input__control:-webkit-autofill:focus,
  .input--filled .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;
  }

  .input__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
    -webkit-user-select: none;
  }

  .input:hover:not(.input--disabled) .input__control {
    color: var(--sl-input-color-hover);
  }

  .input__control:focus {
    outline: none;
  }

  .input__prefix,
  .input__suffix {
    display: inline-flex;
    flex: 0 0 auto;
    align-items: center;
    cursor: default;
  }

  .input__prefix ::slotted(sl-icon),
  .input__suffix ::slotted(sl-icon) {
    color: var(--sl-input-icon-color);
  }

  /*
   * Size modifiers
   */

  .input--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    height: var(--sl-input-height-small);
  }

  .input--small .input__control {
    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-small);
  }

  .input--small .input__clear,
  .input--small .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-small) * 2);
  }

  .input--small .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .input--small .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .input--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    height: var(--sl-input-height-medium);
  }

  .input--medium .input__control {
    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-medium);
  }

  .input--medium .input__clear,
  .input--medium .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-medium) * 2);
  }

  .input--medium .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .input--medium .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .input--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    height: var(--sl-input-height-large);
  }

  .input--large .input__control {
    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-large);
  }

  .input--large .input__clear,
  .input--large .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-large) * 2);
  }

  .input--large .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .input--large .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  /*
   * Pill modifier
   */

  .input--pill.input--small {
    border-radius: var(--sl-input-height-small);
  }

  .input--pill.input--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .input--pill.input--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Clearable + Password Toggle
   */

  .input__clear,
  .input__password-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .input__clear:hover,
  .input__password-toggle:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .input__clear:focus,
  .input__password-toggle:focus {
    outline: none;
  }

  /* Don't show the browser's password toggle in Edge */
  ::-ms-reveal {
    display: none;
  }

  /* Hide the built-in number spinner */
  .input--no-spin-buttons input[type='number']::-webkit-outer-spin-button,
  .input--no-spin-buttons input[type='number']::-webkit-inner-spin-button {
    -webkit-appearance: none;
    display: none;
  }

  .input--no-spin-buttons input[type='number'] {
    -moz-appearance: textfield;
  }
`;var pt=class extends Ge{constructor(){super(...arguments),this.formControlController=new ji(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new Lr(this,"help-text","label"),this.localize=new Jt(this),this.hasFocus=!1,this.title="",this.__numberInput=Object.assign(document.createElement("input"),{type:"number"}),this.__dateInput=Object.assign(document.createElement("input"),{type:"date"}),this.type="text",this.name="",this.value="",this.defaultValue="",this.size="medium",this.filled=!1,this.pill=!1,this.label="",this.helpText="",this.clearable=!1,this.disabled=!1,this.placeholder="",this.readonly=!1,this.passwordToggle=!1,this.passwordVisible=!1,this.noSpinButtons=!1,this.form="",this.required=!1,this.spellcheck=!0}get valueAsDate(){var e;return this.__dateInput.type=this.type,this.__dateInput.value=this.value,((e=this.input)==null?void 0:e.valueAsDate)||this.__dateInput.valueAsDate}set valueAsDate(e){this.__dateInput.type=this.type,this.__dateInput.valueAsDate=e,this.value=this.__dateInput.value}get valueAsNumber(){var e;return this.__numberInput.value=this.value,((e=this.input)==null?void 0:e.valueAsNumber)||this.__numberInput.valueAsNumber}set valueAsNumber(e){this.__numberInput.valueAsNumber=e,this.value=this.__numberInput.value}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.emit("sl-change")}handleClearClick(e){e.preventDefault(),this.value!==""&&(this.value="",this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change")),this.input.focus()}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.formControlController.updateValidity(),this.emit("sl-input")}handleInvalid(e){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(e)}handleKeyDown(e){let t=e.metaKey||e.ctrlKey||e.shiftKey||e.altKey;e.key==="Enter"&&!t&&setTimeout(()=>{!e.defaultPrevented&&!e.isComposing&&this.formControlController.submit()})}handlePasswordToggle(){this.passwordVisible=!this.passwordVisible}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleStepChange(){this.input.step=String(this.step),this.formControlController.updateValidity()}async handleValueChange(){await this.updateComplete,this.formControlController.updateValidity()}focus(e){this.input.focus(e)}blur(){this.input.blur()}select(){this.input.select()}setSelectionRange(e,t,r="none"){this.input.setSelectionRange(e,t,r)}setRangeText(e,t,r,i="preserve"){let n=t??this.input.selectionStart,o=r??this.input.selectionEnd;this.input.setRangeText(e,n,o,i),this.value!==this.input.value&&(this.value=this.input.value)}showPicker(){"showPicker"in HTMLInputElement.prototype&&this.input.showPicker()}stepUp(){this.input.stepUp(),this.value!==this.input.value&&(this.value=this.input.value)}stepDown(){this.input.stepDown(),this.value!==this.input.value&&(this.value=this.input.value)}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.formControlController.updateValidity()}render(){let e=this.hasSlotController.test("label"),t=this.hasSlotController.test("help-text"),r=this.label?!0:!!e,i=this.helpText?!0:!!t,o=this.clearable&&!this.disabled&&!this.readonly&&(typeof this.value=="number"||this.value.length>0);return Y`
      <div
        part="form-control"
        class=${Qe({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":r,"form-control--has-help-text":i})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${r?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${Qe({input:!0,"input--small":this.size==="small","input--medium":this.size==="medium","input--large":this.size==="large","input--pill":this.pill,"input--standard":!this.filled,"input--filled":this.filled,"input--disabled":this.disabled,"input--focused":this.hasFocus,"input--empty":!this.value,"input--no-spin-buttons":this.noSpinButtons})}
          >
            <span part="prefix" class="input__prefix">
              <slot name="prefix"></slot>
            </span>

            <input
              part="input"
              id="input"
              class="input__control"
              type=${this.type==="password"&&this.passwordVisible?"text":this.type}
              title=${this.title}
              name=${Se(this.name)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${Se(this.placeholder)}
              minlength=${Se(this.minlength)}
              maxlength=${Se(this.maxlength)}
              min=${Se(this.min)}
              max=${Se(this.max)}
              step=${Se(this.step)}
              .value=${ms(this.value)}
              autocapitalize=${Se(this.autocapitalize)}
              autocomplete=${Se(this.autocomplete)}
              autocorrect=${Se(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${this.spellcheck}
              pattern=${Se(this.pattern)}
              enterkeyhint=${Se(this.enterkeyhint)}
              inputmode=${Se(this.inputmode)}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @keydown=${this.handleKeyDown}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />

            ${o?Y`
                  <button
                    part="clear-button"
                    class="input__clear"
                    type="button"
                    aria-label=${this.localize.term("clearEntry")}
                    @click=${this.handleClearClick}
                    tabindex="-1"
                  >
                    <slot name="clear-icon">
                      <sl-icon name="x-circle-fill" library="system"></sl-icon>
                    </slot>
                  </button>
                `:""}
            ${this.passwordToggle&&!this.disabled?Y`
                  <button
                    part="password-toggle-button"
                    class="input__password-toggle"
                    type="button"
                    aria-label=${this.localize.term(this.passwordVisible?"hidePassword":"showPassword")}
                    @click=${this.handlePasswordToggle}
                    tabindex="-1"
                  >
                    ${this.passwordVisible?Y`
                          <slot name="show-password-icon">
                            <sl-icon name="eye-slash" library="system"></sl-icon>
                          </slot>
                        `:Y`
                          <slot name="hide-password-icon">
                            <sl-icon name="eye" library="system"></sl-icon>
                          </slot>
                        `}
                  </button>
                `:""}

            <span part="suffix" class="input__suffix">
              <slot name="suffix"></slot>
            </span>
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${i?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};pt.styles=[et,qo,$Q];pt.dependencies={"sl-icon":Pt};F([Ne(".input__control")],pt.prototype,"input",2);F([Le()],pt.prototype,"hasFocus",2);F([U()],pt.prototype,"title",2);F([U({reflect:!0})],pt.prototype,"type",2);F([U()],pt.prototype,"name",2);F([U()],pt.prototype,"value",2);F([Qs()],pt.prototype,"defaultValue",2);F([U({reflect:!0})],pt.prototype,"size",2);F([U({type:Boolean,reflect:!0})],pt.prototype,"filled",2);F([U({type:Boolean,reflect:!0})],pt.prototype,"pill",2);F([U()],pt.prototype,"label",2);F([U({attribute:"help-text"})],pt.prototype,"helpText",2);F([U({type:Boolean})],pt.prototype,"clearable",2);F([U({type:Boolean,reflect:!0})],pt.prototype,"disabled",2);F([U()],pt.prototype,"placeholder",2);F([U({type:Boolean,reflect:!0})],pt.prototype,"readonly",2);F([U({attribute:"password-toggle",type:Boolean})],pt.prototype,"passwordToggle",2);F([U({attribute:"password-visible",type:Boolean})],pt.prototype,"passwordVisible",2);F([U({attribute:"no-spin-buttons",type:Boolean})],pt.prototype,"noSpinButtons",2);F([U({reflect:!0})],pt.prototype,"form",2);F([U({type:Boolean,reflect:!0})],pt.prototype,"required",2);F([U()],pt.prototype,"pattern",2);F([U({type:Number})],pt.prototype,"minlength",2);F([U({type:Number})],pt.prototype,"maxlength",2);F([U()],pt.prototype,"min",2);F([U()],pt.prototype,"max",2);F([U()],pt.prototype,"step",2);F([U()],pt.prototype,"autocapitalize",2);F([U()],pt.prototype,"autocorrect",2);F([U()],pt.prototype,"autocomplete",2);F([U({type:Boolean})],pt.prototype,"autofocus",2);F([U()],pt.prototype,"enterkeyhint",2);F([U({type:Boolean,converter:{fromAttribute:e=>!(!e||e==="false"),toAttribute:e=>e?"true":"false"}})],pt.prototype,"spellcheck",2);F([U()],pt.prototype,"inputmode",2);F([je("disabled",{waitUntilFirstUpdate:!0})],pt.prototype,"handleDisabledChange",1);F([je("step",{waitUntilFirstUpdate:!0})],pt.prototype,"handleStepChange",1);F([je("value",{waitUntilFirstUpdate:!0})],pt.prototype,"handleValueChange",1);pt.define("sl-input");var LQ=e=>Y`
	<div class="theme-shoelace widget-checkbox">
		<sl-checkbox
			type="text"
			.checked="${e.value}"
			.name=${e.id}
			.id=${e.id}
			.required=${e.required??!0}
			@sl-input=${t=>{let{checked:r}=t.target;e.valueChangedCallback?.(r)}}
			.disabled=${e.disabled}
		>
			<label class="widget-checkbox__label">${e.label}</label>
		</sl-checkbox>

		${e.helpText?Y`<div class="widget-checkbox__description">
					${e.helpText}
			  </div>`:at}
	</div>
`;var PQ=Ie`
  :host {
    display: inline-block;
  }

  .checkbox {
    position: relative;
    display: inline-flex;
    align-items: flex-start;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    color: var(--sl-input-label-color);
    vertical-align: middle;
    cursor: pointer;
  }

  .checkbox--small {
    --toggle-size: var(--sl-toggle-size-small);
    font-size: var(--sl-input-font-size-small);
  }

  .checkbox--medium {
    --toggle-size: var(--sl-toggle-size-medium);
    font-size: var(--sl-input-font-size-medium);
  }

  .checkbox--large {
    --toggle-size: var(--sl-toggle-size-large);
    font-size: var(--sl-input-font-size-large);
  }

  .checkbox__control {
    flex: 0 0 auto;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--toggle-size);
    height: var(--toggle-size);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
    border-radius: 2px;
    background-color: var(--sl-input-background-color);
    color: var(--sl-color-neutral-0);
    transition:
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) box-shadow;
  }

  .checkbox__input {
    position: absolute;
    opacity: 0;
    padding: 0;
    margin: 0;
    pointer-events: none;
  }

  .checkbox__checked-icon,
  .checkbox__indeterminate-icon {
    display: inline-flex;
    width: var(--toggle-size);
    height: var(--toggle-size);
  }

  /* Hover */
  .checkbox:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__control:hover {
    border-color: var(--sl-input-border-color-hover);
    background-color: var(--sl-input-background-color-hover);
  }

  /* Focus */
  .checkbox:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__input:focus-visible ~ .checkbox__control {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  /* Checked/indeterminate */
  .checkbox--checked .checkbox__control,
  .checkbox--indeterminate .checkbox__control {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
  }

  /* Checked/indeterminate + hover */
  .checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__control:hover,
  .checkbox.checkbox--indeterminate:not(.checkbox--disabled) .checkbox__control:hover {
    border-color: var(--sl-color-primary-500);
    background-color: var(--sl-color-primary-500);
  }

  /* Checked/indeterminate + focus */
  .checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__input:focus-visible ~ .checkbox__control,
  .checkbox.checkbox--indeterminate:not(.checkbox--disabled) .checkbox__input:focus-visible ~ .checkbox__control {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  /* Disabled */
  .checkbox--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .checkbox__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    line-height: var(--toggle-size);
    margin-inline-start: 0.5em;
    user-select: none;
    -webkit-user-select: none;
  }

  :host([required]) .checkbox__label::after {
    content: var(--sl-input-required-content);
    color: var(--sl-input-required-content-color);
    margin-inline-start: var(--sl-input-required-content-offset);
  }
`;var Qr=class extends Ge{constructor(){super(...arguments),this.formControlController=new ji(this,{value:e=>e.checked?e.value||"on":void 0,defaultValue:e=>e.defaultChecked,setValue:(e,t)=>e.checked=t}),this.hasSlotController=new Lr(this,"help-text"),this.hasFocus=!1,this.title="",this.name="",this.size="medium",this.disabled=!1,this.checked=!1,this.indeterminate=!1,this.defaultChecked=!1,this.form="",this.required=!1,this.helpText=""}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.formControlController.updateValidity()}handleClick(){this.checked=!this.checked,this.indeterminate=!1,this.emit("sl-change")}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleInput(){this.emit("sl-input")}handleInvalid(e){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(e)}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleStateChange(){this.input.checked=this.checked,this.input.indeterminate=this.indeterminate,this.formControlController.updateValidity()}click(){this.input.click()}focus(e){this.input.focus(e)}blur(){this.input.blur()}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.formControlController.updateValidity()}render(){let e=this.hasSlotController.test("help-text"),t=this.helpText?!0:!!e;return Y`
      <div
        class=${Qe({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-help-text":t})}
      >
        <label
          part="base"
          class=${Qe({checkbox:!0,"checkbox--checked":this.checked,"checkbox--disabled":this.disabled,"checkbox--focused":this.hasFocus,"checkbox--indeterminate":this.indeterminate,"checkbox--small":this.size==="small","checkbox--medium":this.size==="medium","checkbox--large":this.size==="large"})}
        >
          <input
            class="checkbox__input"
            type="checkbox"
            title=${this.title}
            name=${this.name}
            value=${Se(this.value)}
            .indeterminate=${ms(this.indeterminate)}
            .checked=${ms(this.checked)}
            .disabled=${this.disabled}
            .required=${this.required}
            aria-checked=${this.checked?"true":"false"}
            aria-describedby="help-text"
            @click=${this.handleClick}
            @input=${this.handleInput}
            @invalid=${this.handleInvalid}
            @blur=${this.handleBlur}
            @focus=${this.handleFocus}
          />

          <span
            part="control${this.checked?" control--checked":""}${this.indeterminate?" control--indeterminate":""}"
            class="checkbox__control"
          >
            ${this.checked?Y`
                  <sl-icon part="checked-icon" class="checkbox__checked-icon" library="system" name="check"></sl-icon>
                `:""}
            ${!this.checked&&this.indeterminate?Y`
                  <sl-icon
                    part="indeterminate-icon"
                    class="checkbox__indeterminate-icon"
                    library="system"
                    name="indeterminate"
                  ></sl-icon>
                `:""}
          </span>

          <div part="label" class="checkbox__label">
            <slot></slot>
          </div>
        </label>

        <div
          aria-hidden=${t?"false":"true"}
          class="form-control__help-text"
          id="help-text"
          part="form-control-help-text"
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};Qr.styles=[et,qo,PQ];Qr.dependencies={"sl-icon":Pt};F([Ne('input[type="checkbox"]')],Qr.prototype,"input",2);F([Le()],Qr.prototype,"hasFocus",2);F([U()],Qr.prototype,"title",2);F([U()],Qr.prototype,"name",2);F([U()],Qr.prototype,"value",2);F([U({reflect:!0})],Qr.prototype,"size",2);F([U({type:Boolean,reflect:!0})],Qr.prototype,"disabled",2);F([U({type:Boolean,reflect:!0})],Qr.prototype,"checked",2);F([U({type:Boolean,reflect:!0})],Qr.prototype,"indeterminate",2);F([Qs("checked")],Qr.prototype,"defaultChecked",2);F([U({reflect:!0})],Qr.prototype,"form",2);F([U({type:Boolean,reflect:!0})],Qr.prototype,"required",2);F([U({attribute:"help-text"})],Qr.prototype,"helpText",2);F([je("disabled",{waitUntilFirstUpdate:!0})],Qr.prototype,"handleDisabledChange",1);F([je(["checked","indeterminate"],{waitUntilFirstUpdate:!0})],Qr.prototype,"handleStateChange",1);Qr.define("sl-checkbox");var IQ=e=>Y`
	<fieldset
		.id=${e.id}
		class="theme-shoelace widget-checkbox-group widget-fieldset level-${e.level}"
		part="widget-checkbox-group"
	>
		<legend>${e.label}</legend>
		${e.helpText?Y`<div class="help-text">${e.helpText}</div>`:at}

		<!-- NOTE: Unused for now. Too noisy? -->
		<!-- <div class="help-text">${e.itemsLabel}</div> -->

		<div class="widget-checkbox-group__list">
			${e?.enum?.map(t=>Y`<sl-checkbox
					.checked=${e.value?.some(r=>r===t)??!1}
					@sl-change=${r=>{let{checked:i}=r.target,n=[];e?.enum?.forEach(o=>{o===t&&i&&n.push(o)}),e.value?.forEach(o=>{o!==t&&n.push(o)}),e.valueChangedCallback?.(n)}}
					.disabled=${e.disabled}
					>${t}</sl-checkbox
				>`)}
		</div>
	</fieldset>
`;var NQ=Ie`
  :host(:not(:focus-within)) {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    clip: rect(0 0 0 0) !important;
    clip-path: inset(50%) !important;
    border: none !important;
    overflow: hidden !important;
    white-space: nowrap !important;
    padding: 0 !important;
  }
`;var rO=class extends Ge{render(){return Y` <slot></slot> `}};rO.styles=[et,NQ];function wS(e,t){function r(n){let o=e.getBoundingClientRect(),s=e.ownerDocument.defaultView,a=o.left+s.scrollX,l=o.top+s.scrollY,u=n.pageX-a,c=n.pageY-l;t?.onMove&&t.onMove(u,c)}function i(){document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",i),t?.onStop&&t.onStop()}document.addEventListener("pointermove",r,{passive:!0}),document.addEventListener("pointerup",i),t?.initialEvent instanceof PointerEvent&&r(t.initialEvent)}var BQ=Ie`
  :host {
    display: inline-block;
  }

  .dropdown::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .dropdown[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .dropdown[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .dropdown[data-current-placement^='left']::part(popup) {
    transform-origin: right;
  }

  .dropdown[data-current-placement^='right']::part(popup) {
    transform-origin: left;
  }

  .dropdown__trigger {
    display: block;
  }

  .dropdown__panel {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    box-shadow: var(--sl-shadow-large);
    border-radius: var(--sl-border-radius-medium);
    pointer-events: none;
  }

  .dropdown--open .dropdown__panel {
    display: block;
    pointer-events: all;
  }

  /* When users slot a menu, make sure it conforms to the popup's auto-size */
  ::slotted(sl-menu) {
    max-width: var(--auto-size-available-width) !important;
    max-height: var(--auto-size-available-height) !important;
  }
`;function*HQ(e=document.activeElement){e!=null&&(yield e,"shadowRoot"in e&&e.shadowRoot&&e.shadowRoot.mode!=="closed"&&(yield*aL(HQ(e.shadowRoot.activeElement))))}function UQ(){return[...HQ()].pop()}var zQ=new WeakMap;function qQ(e){let t=zQ.get(e);return t||(t=window.getComputedStyle(e,null),zQ.set(e,t)),t}function GEe(e){if(typeof e.checkVisibility=="function")return e.checkVisibility({checkOpacity:!1,checkVisibilityCSS:!0});let t=qQ(e);return t.visibility!=="hidden"&&t.display!=="none"}function YEe(e){let t=qQ(e),{overflowY:r,overflowX:i}=t;return r==="scroll"||i==="scroll"?!0:r!=="auto"||i!=="auto"?!1:e.scrollHeight>e.clientHeight&&r==="auto"||e.scrollWidth>e.clientWidth&&i==="auto"}function XEe(e){let t=e.tagName.toLowerCase(),r=Number(e.getAttribute("tabindex"));if(e.hasAttribute("tabindex")&&(isNaN(r)||r<=-1)||e.hasAttribute("disabled")||e.closest("[inert]"))return!1;if(t==="input"&&e.getAttribute("type")==="radio"){let o=e.getRootNode(),s=`input[type='radio'][name="${e.getAttribute("name")}"]`,a=o.querySelector(`${s}:checked`);return a?a===e:o.querySelector(s)===e}return GEe(e)?(t==="audio"||t==="video")&&e.hasAttribute("controls")||e.hasAttribute("tabindex")||e.hasAttribute("contenteditable")&&e.getAttribute("contenteditable")!=="false"||["button","input","select","textarea","a","audio","video","summary","iframe"].includes(t)?!0:YEe(e):!1}function jQ(e){var t,r;let i=ZEe(e),n=(t=i[0])!=null?t:null,o=(r=i[i.length-1])!=null?r:null;return{start:n,end:o}}function KEe(e,t){var r;return((r=e.getRootNode({composed:!0}))==null?void 0:r.host)!==t}function ZEe(e){let t=new WeakMap,r=[];function i(n){if(n instanceof Element){if(n.hasAttribute("inert")||n.closest("[inert]")||t.has(n))return;t.set(n,!0),!r.includes(n)&&XEe(n)&&r.push(n),n instanceof HTMLSlotElement&&KEe(n,e)&&n.assignedElements({flatten:!0}).forEach(o=>{i(o)}),n.shadowRoot!==null&&n.shadowRoot.mode==="open"&&i(n.shadowRoot)}for(let o of n.children)i(o)}return i(e),r.sort((n,o)=>{let s=Number(n.getAttribute("tabindex"))||0;return(Number(o.getAttribute("tabindex"))||0)-s})}var WQ=Ie`
  :host {
    --arrow-color: var(--sl-color-neutral-1000);
    --arrow-size: 6px;

    /*
     * These properties are computed to account for the arrow's dimensions after being rotated 45. The constant
     * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating.
     */
    --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071);
    --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size));

    display: contents;
  }

  .popup {
    position: absolute;
    isolation: isolate;
    max-width: var(--auto-size-available-width, none);
    max-height: var(--auto-size-available-height, none);
  }

  .popup--fixed {
    position: fixed;
  }

  .popup:not(.popup--active) {
    display: none;
  }

  .popup__arrow {
    position: absolute;
    width: calc(var(--arrow-size-diagonal) * 2);
    height: calc(var(--arrow-size-diagonal) * 2);
    rotate: 45deg;
    background: var(--arrow-color);
    z-index: -1;
  }

  /* Hover bridge */
  .popup-hover-bridge:not(.popup-hover-bridge--visible) {
    display: none;
  }

  .popup-hover-bridge {
    position: fixed;
    z-index: calc(var(--sl-z-index-dropdown) - 1);
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    clip-path: polygon(
      var(--hover-bridge-top-left-x, 0) var(--hover-bridge-top-left-y, 0),
      var(--hover-bridge-top-right-x, 0) var(--hover-bridge-top-right-y, 0),
      var(--hover-bridge-bottom-right-x, 0) var(--hover-bridge-bottom-right-y, 0),
      var(--hover-bridge-bottom-left-x, 0) var(--hover-bridge-bottom-left-y, 0)
    );
  }
`;var eu=Math.min,ho=Math.max,p2=Math.round,m2=Math.floor,el=e=>({x:e,y:e}),JEe={left:"right",right:"left",bottom:"top",top:"bottom"},QEe={start:"end",end:"start"};function CS(e,t,r){return ho(e,eu(t,r))}function d0(e,t){return typeof e=="function"?e(t):e}function wc(e){return e.split("-")[0]}function p0(e){return e.split("-")[1]}function iO(e){return e==="x"?"y":"x"}function kS(e){return e==="y"?"height":"width"}var e9e=new Set(["top","bottom"]);function tu(e){return e9e.has(wc(e))?"y":"x"}function ES(e){return iO(tu(e))}function YQ(e,t,r){r===void 0&&(r=!1);let i=p0(e),n=ES(e),o=kS(n),s=n==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=d2(s)),[s,d2(s)]}function XQ(e){let t=d2(e);return[SS(e),t,SS(t)]}function SS(e){return e.replace(/start|end/g,t=>QEe[t])}var VQ=["left","right"],GQ=["right","left"],t9e=["top","bottom"],r9e=["bottom","top"];function i9e(e,t,r){switch(e){case"top":case"bottom":return r?t?GQ:VQ:t?VQ:GQ;case"left":case"right":return t?t9e:r9e;default:return[]}}function KQ(e,t,r,i){let n=p0(e),o=i9e(wc(e),r==="start",i);return n&&(o=o.map(s=>s+"-"+n),t&&(o=o.concat(o.map(SS)))),o}function d2(e){return e.replace(/left|right|bottom|top/g,t=>JEe[t])}function n9e(e){return{top:0,right:0,bottom:0,left:0,...e}}function nO(e){return typeof e!="number"?n9e(e):{top:e,right:e,bottom:e,left:e}}function m0(e){let{x:t,y:r,width:i,height:n}=e;return{width:i,height:n,top:r,left:t,right:t+i,bottom:r+n,x:t,y:r}}function ZQ(e,t,r){let{reference:i,floating:n}=e,o=tu(t),s=ES(t),a=kS(s),l=wc(t),u=o==="y",c=i.x+i.width/2-n.width/2,f=i.y+i.height/2-n.height/2,h=i[a]/2-n[a]/2,p;switch(l){case"top":p={x:c,y:i.y-n.height};break;case"bottom":p={x:c,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:f};break;case"left":p={x:i.x-n.width,y:f};break;default:p={x:i.x,y:i.y}}switch(p0(t)){case"start":p[s]-=h*(r&&u?-1:1);break;case"end":p[s]+=h*(r&&u?-1:1);break}return p}var JQ=async(e,t,r)=>{let{placement:i="bottom",strategy:n="absolute",middleware:o=[],platform:s}=r,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t)),u=await s.getElementRects({reference:e,floating:t,strategy:n}),{x:c,y:f}=ZQ(u,i,l),h=i,p={},d=0;for(let m=0;m<a.length;m++){let{name:g,fn:v}=a[m],{x:b,y,data:x,reset:S}=await v({x:c,y:f,initialPlacement:i,placement:h,strategy:n,middlewareData:p,rects:u,platform:s,elements:{reference:e,floating:t}});c=b??c,f=y??f,p={...p,[g]:{...p[g],...x}},S&&d<=50&&(d++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:n}):S.rects),{x:c,y:f}=ZQ(u,h,l)),m=-1)}return{x:c,y:f,placement:h,strategy:n,middlewareData:p}};async function AS(e,t){var r;t===void 0&&(t={});let{x:i,y:n,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=d0(t,e),d=nO(p),g=a[h?f==="floating"?"reference":"floating":f],v=m0(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(g)))==null||r?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),b=f==="floating"?{x:i,y:n,width:s.floating.width,height:s.floating.height}:s.reference,y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),x=await(o.isElement==null?void 0:o.isElement(y))?await(o.getScale==null?void 0:o.getScale(y))||{x:1,y:1}:{x:1,y:1},S=m0(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:y,strategy:l}):b);return{top:(v.top-S.top+d.top)/x.y,bottom:(S.bottom-v.bottom+d.bottom)/x.y,left:(v.left-S.left+d.left)/x.x,right:(S.right-v.right+d.right)/x.x}}var QQ=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:i,placement:n,rects:o,platform:s,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=d0(e,t)||{};if(u==null)return{};let f=nO(c),h={x:r,y:i},p=ES(n),d=kS(p),m=await s.getDimensions(u),g=p==="y",v=g?"top":"left",b=g?"bottom":"right",y=g?"clientHeight":"clientWidth",x=o.reference[d]+o.reference[p]-h[p]-o.floating[d],S=h[p]-o.reference[p],_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u)),w=_?_[y]:0;(!w||!await(s.isElement==null?void 0:s.isElement(_)))&&(w=a.floating[y]||o.floating[d]);let k=x/2-S/2,A=w/2-m[d]/2-1,M=eu(f[v],A),D=eu(f[b],A),z=M,P=w-m[d]-D,I=w/2-m[d]/2+k,N=CS(z,I,P),H=!l.arrow&&p0(n)!=null&&I!==N&&o.reference[d]/2-(I<z?M:D)-m[d]/2<0,T=H?I<z?I-z:I-P:0;return{[p]:h[p]+T,data:{[p]:N,centerOffset:I-N-T,...H&&{alignmentOffset:T}},reset:H}}});var eee=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,i;let{placement:n,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:m=!0,...g}=d0(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};let v=wc(n),b=tu(a),y=wc(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=h||(y||!m?[d2(a)]:XQ(a)),_=d!=="none";!h&&_&&S.push(...KQ(a,m,d,x));let w=[a,...S],k=await AS(t,g),A=[],M=((i=o.flip)==null?void 0:i.overflows)||[];if(c&&A.push(k[v]),f){let I=YQ(n,s,x);A.push(k[I[0]],k[I[1]])}if(M=[...M,{placement:n,overflows:A}],!A.every(I=>I<=0)){var D,z;let I=(((D=o.flip)==null?void 0:D.index)||0)+1,N=w[I];if(N&&(!(f==="alignment"?b!==tu(N):!1)||M.every(O=>tu(O.placement)===b?O.overflows[0]>0:!0)))return{data:{index:I,overflows:M},reset:{placement:N}};let H=(z=M.filter(T=>T.overflows[0]<=0).sort((T,O)=>T.overflows[1]-O.overflows[1])[0])==null?void 0:z.placement;if(!H)switch(p){case"bestFit":{var P;let T=(P=M.filter(O=>{if(_){let L=tu(O.placement);return L===b||L==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(L=>L>0).reduce((L,q)=>L+q,0)]).sort((O,L)=>O[1]-L[1])[0])==null?void 0:P[0];T&&(H=T);break}case"initialPlacement":H=a;break}if(n!==H)return{reset:{placement:H}}}return{}}}};var o9e=new Set(["left","top"]);async function s9e(e,t){let{placement:r,platform:i,elements:n}=e,o=await(i.isRTL==null?void 0:i.isRTL(n.floating)),s=wc(r),a=p0(r),l=tu(r)==="y",u=o9e.has(s)?-1:1,c=o&&l?-1:1,f=d0(t,e),{mainAxis:h,crossAxis:p,alignmentAxis:d}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof d=="number"&&(p=a==="end"?d*-1:d),l?{x:p*c,y:h*u}:{x:h*u,y:p*c}}var tee=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,i;let{x:n,y:o,placement:s,middlewareData:a}=t,l=await s9e(t,e);return s===((r=a.offset)==null?void 0:r.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:n+l.x,y:o+l.y,data:{...l,placement:s}}}}},ree=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:i,placement:n}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x:v,y:b}=g;return{x:v,y:b}}},...l}=d0(e,t),u={x:r,y:i},c=await AS(t,l),f=tu(wc(n)),h=iO(f),p=u[h],d=u[f];if(o){let g=h==="y"?"top":"left",v=h==="y"?"bottom":"right",b=p+c[g],y=p-c[v];p=CS(b,p,y)}if(s){let g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=d+c[g],y=d-c[v];d=CS(b,d,y)}let m=a.fn({...t,[h]:p,[f]:d});return{...m,data:{x:m.x-r,y:m.y-i,enabled:{[h]:o,[f]:s}}}}}};var iee=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,i;let{placement:n,rects:o,platform:s,elements:a}=t,{apply:l=()=>{},...u}=d0(e,t),c=await AS(t,u),f=wc(n),h=p0(n),p=tu(n)==="y",{width:d,height:m}=o.floating,g,v;f==="top"||f==="bottom"?(g=f,v=h===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(v=f,g=h==="end"?"top":"bottom");let b=m-c.top-c.bottom,y=d-c.left-c.right,x=eu(m-c[g],b),S=eu(d-c[v],y),_=!t.middlewareData.shift,w=x,k=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=y),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(w=b),_&&!h){let M=ho(c.left,0),D=ho(c.right,0),z=ho(c.top,0),P=ho(c.bottom,0);p?k=d-2*(M!==0||D!==0?M+D:ho(c.left,c.right)):w=m-2*(z!==0||P!==0?z+P:ho(c.top,c.bottom))}await l({...t,availableWidth:k,availableHeight:w});let A=await s.getDimensions(a.floating);return d!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function TS(){return typeof window<"u"}function g0(e){return oee(e)?(e.nodeName||"").toLowerCase():"#document"}function jo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function tl(e){var t;return(t=(oee(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function oee(e){return TS()?e instanceof Node||e instanceof jo(e).Node:!1}function ta(e){return TS()?e instanceof Element||e instanceof jo(e).Element:!1}function rl(e){return TS()?e instanceof HTMLElement||e instanceof jo(e).HTMLElement:!1}function nee(e){return!TS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof jo(e).ShadowRoot}var a9e=new Set(["inline","contents"]);function Fg(e){let{overflow:t,overflowX:r,overflowY:i,display:n}=ra(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!a9e.has(n)}var l9e=new Set(["table","td","th"]);function see(e){return l9e.has(g0(e))}var u9e=[":popover-open",":modal"];function g2(e){return u9e.some(t=>{try{return e.matches(t)}catch{return!1}})}var c9e=["transform","translate","scale","rotate","perspective"],f9e=["transform","translate","scale","rotate","perspective","filter"],h9e=["paint","layout","strict","content"];function DS(e){let t=RS(),r=ta(e)?ra(e):e;return c9e.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||f9e.some(i=>(r.willChange||"").includes(i))||h9e.some(i=>(r.contain||"").includes(i))}function aee(e){let t=Sc(e);for(;rl(t)&&!v0(t);){if(DS(t))return t;if(g2(t))return null;t=Sc(t)}return null}function RS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}var d9e=new Set(["html","body","#document"]);function v0(e){return d9e.has(g0(e))}function ra(e){return jo(e).getComputedStyle(e)}function v2(e){return ta(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Sc(e){if(g0(e)==="html")return e;let t=e.assignedSlot||e.parentNode||nee(e)&&e.host||tl(e);return nee(t)?t.host:t}function lee(e){let t=Sc(e);return v0(t)?e.ownerDocument?e.ownerDocument.body:e.body:rl(t)&&Fg(t)?t:lee(t)}function Mg(e,t,r){var i;t===void 0&&(t=[]),r===void 0&&(r=!0);let n=lee(e),o=n===((i=e.ownerDocument)==null?void 0:i.body),s=jo(n);if(o){let a=MS(s);return t.concat(s,s.visualViewport||[],Fg(n)?n:[],a&&r?Mg(a):[])}return t.concat(n,Mg(n,[],r))}function MS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function hee(e){let t=ra(e),r=parseFloat(t.width)||0,i=parseFloat(t.height)||0,n=rl(e),o=n?e.offsetWidth:r,s=n?e.offsetHeight:i,a=p2(r)!==o||p2(i)!==s;return a&&(r=o,i=s),{width:r,height:i,$:a}}function sO(e){return ta(e)?e:e.contextElement}function Og(e){let t=sO(e);if(!rl(t))return el(1);let r=t.getBoundingClientRect(),{width:i,height:n,$:o}=hee(t),s=(o?p2(r.width):r.width)/i,a=(o?p2(r.height):r.height)/n;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}var p9e=el(0);function dee(e){let t=jo(e);return!RS()||!t.visualViewport?p9e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function m9e(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==jo(e)?!1:t}function b0(e,t,r,i){t===void 0&&(t=!1),r===void 0&&(r=!1);let n=e.getBoundingClientRect(),o=sO(e),s=el(1);t&&(i?ta(i)&&(s=Og(i)):s=Og(e));let a=m9e(o,r,i)?dee(o):el(0),l=(n.left+a.x)/s.x,u=(n.top+a.y)/s.y,c=n.width/s.x,f=n.height/s.y;if(o){let h=jo(o),p=i&&ta(i)?jo(i):i,d=h,m=MS(d);for(;m&&i&&p!==d;){let g=Og(m),v=m.getBoundingClientRect(),b=ra(m),y=v.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,x=v.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,f*=g.y,l+=y,u+=x,d=jo(m),m=MS(d)}}return m0({width:c,height:f,x:l,y:u})}function FS(e,t){let r=v2(e).scrollLeft;return t?t.left+r:b0(tl(e)).left+r}function pee(e,t){let r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-FS(e,r),n=r.top+t.scrollTop;return{x:i,y:n}}function g9e(e){let{elements:t,rect:r,offsetParent:i,strategy:n}=e,o=n==="fixed",s=tl(i),a=t?g2(t.floating):!1;if(i===s||a&&o)return r;let l={scrollLeft:0,scrollTop:0},u=el(1),c=el(0),f=rl(i);if((f||!f&&!o)&&((g0(i)!=="body"||Fg(s))&&(l=v2(i)),rl(i))){let p=b0(i);u=Og(i),c.x=p.x+i.clientLeft,c.y=p.y+i.clientTop}let h=s&&!f&&!o?pee(s,l):el(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:r.y*u.y-l.scrollTop*u.y+c.y+h.y}}function v9e(e){return Array.from(e.getClientRects())}function b9e(e){let t=tl(e),r=v2(e),i=e.ownerDocument.body,n=ho(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),o=ho(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight),s=-r.scrollLeft+FS(e),a=-r.scrollTop;return ra(i).direction==="rtl"&&(s+=ho(t.clientWidth,i.clientWidth)-n),{width:n,height:o,x:s,y:a}}var uee=25;function y9e(e,t){let r=jo(e),i=tl(e),n=r.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(n){o=n.width,s=n.height;let c=RS();(!c||c&&t==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}let u=FS(i);if(u<=0){let c=i.ownerDocument,f=c.body,h=getComputedStyle(f),p=c.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,d=Math.abs(i.clientWidth-f.clientWidth-p);d<=uee&&(o-=d)}else u<=uee&&(o+=u);return{width:o,height:s,x:a,y:l}}var x9e=new Set(["absolute","fixed"]);function _9e(e,t){let r=b0(e,!0,t==="fixed"),i=r.top+e.clientTop,n=r.left+e.clientLeft,o=rl(e)?Og(e):el(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,l=n*o.x,u=i*o.y;return{width:s,height:a,x:l,y:u}}function cee(e,t,r){let i;if(t==="viewport")i=y9e(e,r);else if(t==="document")i=b9e(tl(e));else if(ta(t))i=_9e(t,r);else{let n=dee(e);i={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return m0(i)}function mee(e,t){let r=Sc(e);return r===t||!ta(r)||v0(r)?!1:ra(r).position==="fixed"||mee(r,t)}function w9e(e,t){let r=t.get(e);if(r)return r;let i=Mg(e,[],!1).filter(a=>ta(a)&&g0(a)!=="body"),n=null,o=ra(e).position==="fixed",s=o?Sc(e):e;for(;ta(s)&&!v0(s);){let a=ra(s),l=DS(s);!l&&a.position==="fixed"&&(n=null),(o?!l&&!n:!l&&a.position==="static"&&!!n&&x9e.has(n.position)||Fg(s)&&!l&&mee(e,s))?i=i.filter(c=>c!==s):n=a,s=Sc(s)}return t.set(e,i),i}function S9e(e){let{element:t,boundary:r,rootBoundary:i,strategy:n}=e,s=[...r==="clippingAncestors"?g2(t)?[]:w9e(t,this._c):[].concat(r),i],a=s[0],l=s.reduce((u,c)=>{let f=cee(t,c,n);return u.top=ho(f.top,u.top),u.right=eu(f.right,u.right),u.bottom=eu(f.bottom,u.bottom),u.left=ho(f.left,u.left),u},cee(t,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function C9e(e){let{width:t,height:r}=hee(e);return{width:t,height:r}}function k9e(e,t,r){let i=rl(t),n=tl(t),o=r==="fixed",s=b0(e,!0,o,t),a={scrollLeft:0,scrollTop:0},l=el(0);function u(){l.x=FS(n)}if(i||!i&&!o)if((g0(t)!=="body"||Fg(n))&&(a=v2(t)),i){let p=b0(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else n&&u();o&&!i&&n&&u();let c=n&&!i&&!o?pee(n,a):el(0),f=s.left+a.scrollLeft-l.x-c.x,h=s.top+a.scrollTop-l.y-c.y;return{x:f,y:h,width:s.width,height:s.height}}function oO(e){return ra(e).position==="static"}function fee(e,t){if(!rl(e)||ra(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return tl(e)===r&&(r=r.ownerDocument.body),r}function gee(e,t){let r=jo(e);if(g2(e))return r;if(!rl(e)){let n=Sc(e);for(;n&&!v0(n);){if(ta(n)&&!oO(n))return n;n=Sc(n)}return r}let i=fee(e,t);for(;i&&see(i)&&oO(i);)i=fee(i,t);return i&&v0(i)&&oO(i)&&!DS(i)?r:i||aee(e)||r}var E9e=async function(e){let t=this.getOffsetParent||gee,r=this.getDimensions,i=await r(e.floating);return{reference:k9e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function A9e(e){return ra(e).direction==="rtl"}var b2={convertOffsetParentRelativeRectToViewportRelativeRect:g9e,getDocumentElement:tl,getClippingRect:S9e,getOffsetParent:gee,getElementRects:E9e,getClientRects:v9e,getDimensions:C9e,getScale:Og,isElement:ta,isRTL:A9e};function vee(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function T9e(e,t){let r=null,i,n=tl(e);function o(){var a;clearTimeout(i),(a=r)==null||a.disconnect(),r=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();let u=e.getBoundingClientRect(),{left:c,top:f,width:h,height:p}=u;if(a||t(),!h||!p)return;let d=m2(f),m=m2(n.clientWidth-(c+h)),g=m2(n.clientHeight-(f+p)),v=m2(c),y={rootMargin:-d+"px "+-m+"px "+-g+"px "+-v+"px",threshold:ho(0,eu(1,l))||1},x=!0;function S(_){let w=_[0].intersectionRatio;if(w!==l){if(!x)return s();w?s(!1,w):i=setTimeout(()=>{s(!1,1e-7)},1e3)}w===1&&!vee(u,e.getBoundingClientRect())&&s(),x=!1}try{r=new IntersectionObserver(S,{...y,root:n.ownerDocument})}catch{r=new IntersectionObserver(S,y)}r.observe(e)}return s(!0),o}function bee(e,t,r,i){i===void 0&&(i={});let{ancestorScroll:n=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=sO(e),c=n||o?[...u?Mg(u):[],...Mg(t)]:[];c.forEach(v=>{n&&v.addEventListener("scroll",r,{passive:!0}),o&&v.addEventListener("resize",r)});let f=u&&a?T9e(u,r):null,h=-1,p=null;s&&(p=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=p)==null||y.observe(t)})),r()}),u&&!l&&p.observe(u),p.observe(t));let d,m=l?b0(e):null;l&&g();function g(){let v=b0(e);m&&!vee(m,v)&&r(),m=v,d=requestAnimationFrame(g)}return r(),()=>{var v;c.forEach(b=>{n&&b.removeEventListener("scroll",r),o&&b.removeEventListener("resize",r)}),f?.(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(d)}}var yee=tee;var xee=ree,_ee=eee,aO=iee;var wee=QQ;var See=(e,t,r)=>{let i=new Map,n={platform:b2,...r},o={...n.platform,_c:i};return JQ(e,t,{...n,platform:o})};function D9e(){return typeof window<"u"}function Cee(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function R9e(e){return D9e()?e instanceof Element||e instanceof Cee(e).Element:!1}var M9e=["transform","translate","scale","rotate","perspective"],F9e=["transform","translate","scale","rotate","perspective","filter"],O9e=["paint","layout","strict","content"];function kee(e){let t=$9e(),r=R9e(e)?L9e(e):e;return M9e.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||F9e.some(i=>(r.willChange||"").includes(i))||O9e.some(i=>(r.contain||"").includes(i))}function $9e(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function L9e(e){return Cee(e).getComputedStyle(e)}function Eee(e){return P9e(e)}function lO(e){return e.assignedSlot?e.assignedSlot:e.parentNode instanceof ShadowRoot?e.parentNode.host:e.parentNode}function P9e(e){for(let t=e;t;t=lO(t))if(t instanceof Element&&getComputedStyle(t).display==="none")return null;for(let t=lO(e);t;t=lO(t)){if(!(t instanceof Element))continue;let r=getComputedStyle(t);if(r.display!=="contents"&&(r.position!=="static"||kee(r)||t.tagName==="BODY"))return t}return null}function I9e(e){return e!==null&&typeof e=="object"&&"getBoundingClientRect"in e&&("contextElement"in e?e.contextElement instanceof Element:!0)}var Kt=class extends Ge{constructor(){super(...arguments),this.localize=new Jt(this),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0,this.hoverBridge=!1,this.updateHoverBridge=()=>{if(this.hoverBridge&&this.anchorEl){let e=this.anchorEl.getBoundingClientRect(),t=this.popup.getBoundingClientRect(),r=this.placement.includes("top")||this.placement.includes("bottom"),i=0,n=0,o=0,s=0,a=0,l=0,u=0,c=0;r?e.top<t.top?(i=e.left,n=e.bottom,o=e.right,s=e.bottom,a=t.left,l=t.top,u=t.right,c=t.top):(i=t.left,n=t.bottom,o=t.right,s=t.bottom,a=e.left,l=e.top,u=e.right,c=e.top):e.left<t.left?(i=e.right,n=e.top,o=t.left,s=t.top,a=e.right,l=e.bottom,u=t.left,c=t.bottom):(i=t.right,n=t.top,o=e.left,s=e.top,a=t.right,l=t.bottom,u=e.left,c=e.bottom),this.style.setProperty("--hover-bridge-top-left-x",`${i}px`),this.style.setProperty("--hover-bridge-top-left-y",`${n}px`),this.style.setProperty("--hover-bridge-top-right-x",`${o}px`),this.style.setProperty("--hover-bridge-top-right-y",`${s}px`),this.style.setProperty("--hover-bridge-bottom-left-x",`${a}px`),this.style.setProperty("--hover-bridge-bottom-left-y",`${l}px`),this.style.setProperty("--hover-bridge-bottom-right-x",`${u}px`),this.style.setProperty("--hover-bridge-bottom-right-y",`${c}px`)}}}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}async updated(e){super.updated(e),e.has("active")&&(this.active?this.start():this.stop()),e.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&typeof this.anchor=="string"){let e=this.getRootNode();this.anchorEl=e.getElementById(this.anchor)}else this.anchor instanceof Element||I9e(this.anchor)?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),this.anchorEl&&this.active&&this.start()}start(){!this.anchorEl||!this.active||(this.cleanup=bee(this.anchorEl,this.popup,()=>{this.reposition()}))}async stop(){return new Promise(e=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame(()=>e())):e()})}reposition(){if(!this.active||!this.anchorEl)return;let e=[yee({mainAxis:this.distance,crossAxis:this.skidding})];this.sync?e.push(aO({apply:({rects:r})=>{let i=this.sync==="width"||this.sync==="both",n=this.sync==="height"||this.sync==="both";this.popup.style.width=i?`${r.reference.width}px`:"",this.popup.style.height=n?`${r.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&e.push(_ee({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:this.flipFallbackStrategy==="best-fit"?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&e.push(xee({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?e.push(aO({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:r,availableHeight:i})=>{this.autoSize==="vertical"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-height",`${i}px`):this.style.removeProperty("--auto-size-available-height"),this.autoSize==="horizontal"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-width",`${r}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&e.push(wee({element:this.arrowEl,padding:this.arrowPadding}));let t=this.strategy==="absolute"?r=>b2.getOffsetParent(r,Eee):b2.getOffsetParent;See(this.anchorEl,this.popup,{placement:this.placement,middleware:e,strategy:this.strategy,platform:pu(bo({},b2),{getOffsetParent:t})}).then(({x:r,y:i,middlewareData:n,placement:o})=>{let s=this.localize.dir()==="rtl",a={top:"bottom",right:"left",bottom:"top",left:"right"}[o.split("-")[0]];if(this.setAttribute("data-current-placement",o),Object.assign(this.popup.style,{left:`${r}px`,top:`${i}px`}),this.arrow){let l=n.arrow.x,u=n.arrow.y,c="",f="",h="",p="";if(this.arrowPlacement==="start"){let d=typeof l=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";c=typeof u=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",f=s?d:"",p=s?"":d}else if(this.arrowPlacement==="end"){let d=typeof l=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";f=s?"":d,p=s?d:"",h=typeof u=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else this.arrowPlacement==="center"?(p=typeof l=="number"?"calc(50% - var(--arrow-size-diagonal))":"",c=typeof u=="number"?"calc(50% - var(--arrow-size-diagonal))":""):(p=typeof l=="number"?`${l}px`:"",c=typeof u=="number"?`${u}px`:"");Object.assign(this.arrowEl.style,{top:c,right:f,bottom:h,left:p,[a]:"calc(var(--arrow-size-diagonal) * -1)"})}}),requestAnimationFrame(()=>this.updateHoverBridge()),this.emit("sl-reposition")}render(){return Y`
      <slot name="anchor" @slotchange=${this.handleAnchorChange}></slot>

      <span
        part="hover-bridge"
        class=${Qe({"popup-hover-bridge":!0,"popup-hover-bridge--visible":this.hoverBridge&&this.active})}
      ></span>

      <div
        part="popup"
        class=${Qe({popup:!0,"popup--active":this.active,"popup--fixed":this.strategy==="fixed","popup--has-arrow":this.arrow})}
      >
        <slot></slot>
        ${this.arrow?Y`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}
      </div>
    `}};Kt.styles=[et,WQ];F([Ne(".popup")],Kt.prototype,"popup",2);F([Ne(".popup__arrow")],Kt.prototype,"arrowEl",2);F([U()],Kt.prototype,"anchor",2);F([U({type:Boolean,reflect:!0})],Kt.prototype,"active",2);F([U({reflect:!0})],Kt.prototype,"placement",2);F([U({reflect:!0})],Kt.prototype,"strategy",2);F([U({type:Number})],Kt.prototype,"distance",2);F([U({type:Number})],Kt.prototype,"skidding",2);F([U({type:Boolean})],Kt.prototype,"arrow",2);F([U({attribute:"arrow-placement"})],Kt.prototype,"arrowPlacement",2);F([U({attribute:"arrow-padding",type:Number})],Kt.prototype,"arrowPadding",2);F([U({type:Boolean})],Kt.prototype,"flip",2);F([U({attribute:"flip-fallback-placements",converter:{fromAttribute:e=>e.split(" ").map(t=>t.trim()).filter(t=>t!==""),toAttribute:e=>e.join(" ")}})],Kt.prototype,"flipFallbackPlacements",2);F([U({attribute:"flip-fallback-strategy"})],Kt.prototype,"flipFallbackStrategy",2);F([U({type:Object})],Kt.prototype,"flipBoundary",2);F([U({attribute:"flip-padding",type:Number})],Kt.prototype,"flipPadding",2);F([U({type:Boolean})],Kt.prototype,"shift",2);F([U({type:Object})],Kt.prototype,"shiftBoundary",2);F([U({attribute:"shift-padding",type:Number})],Kt.prototype,"shiftPadding",2);F([U({attribute:"auto-size"})],Kt.prototype,"autoSize",2);F([U()],Kt.prototype,"sync",2);F([U({type:Object})],Kt.prototype,"autoSizeBoundary",2);F([U({attribute:"auto-size-padding",type:Number})],Kt.prototype,"autoSizePadding",2);F([U({attribute:"hover-bridge",type:Boolean})],Kt.prototype,"hoverBridge",2);var Tee=new Map,N9e=new WeakMap;function B9e(e){return e??{keyframes:[],options:{duration:0}}}function Aee(e,t){return t.toLowerCase()==="rtl"?{keyframes:e.rtlKeyframes||e.keyframes,options:e.options}:e}function Cc(e,t){Tee.set(e,B9e(t))}function kc(e,t,r){let i=N9e.get(e);if(i?.[t])return Aee(i[t],r.dir);let n=Tee.get(t);return n?Aee(n,r.dir):{keyframes:[],options:{duration:0}}}function $g(e,t){return new Promise(r=>{function i(n){n.target===e&&(e.removeEventListener(t,i),r())}e.addEventListener(t,i)})}function Ec(e,t,r){return new Promise(i=>{if(r?.duration===1/0)throw new Error("Promise-based animations must be finite.");let n=e.animate(t,pu(bo({},r),{duration:z9e()?0:r.duration}));n.addEventListener("cancel",i,{once:!0}),n.addEventListener("finish",i,{once:!0})})}function z9e(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function Ac(e){return Promise.all(e.getAnimations().map(t=>new Promise(r=>{t.cancel(),requestAnimationFrame(r)})))}function uO(e,t){return e.map(r=>pu(bo({},r),{height:r.height==="auto"?`${t}px`:r.height}))}var hn=class extends Ge{constructor(){super(...arguments),this.localize=new Jt(this),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1,this.sync=void 0,this.handleKeyDown=e=>{this.open&&e.key==="Escape"&&(e.stopPropagation(),this.hide(),this.focusOnTrigger())},this.handleDocumentKeyDown=e=>{var t;if(e.key==="Escape"&&this.open&&!this.closeWatcher){e.stopPropagation(),this.focusOnTrigger(),this.hide();return}if(e.key==="Tab"){if(this.open&&((t=document.activeElement)==null?void 0:t.tagName.toLowerCase())==="sl-menu-item"){e.preventDefault(),this.hide(),this.focusOnTrigger();return}let r=(i,n)=>{if(!i)return null;let o=i.closest(n);if(o)return o;let s=i.getRootNode();return s instanceof ShadowRoot?r(s.host,n):null};setTimeout(()=>{var i;let n=((i=this.containingElement)==null?void 0:i.getRootNode())instanceof ShadowRoot?UQ():document.activeElement;(!this.containingElement||r(n,this.containingElement.tagName.toLowerCase())!==this.containingElement)&&this.hide()})}},this.handleDocumentMouseDown=e=>{let t=e.composedPath();this.containingElement&&!t.includes(this.containingElement)&&this.hide()},this.handlePanelSelect=e=>{let t=e.target;!this.stayOpenOnSelect&&t.tagName.toLowerCase()==="sl-menu"&&(this.hide(),this.focusOnTrigger())}}connectedCallback(){super.connectedCallback(),this.containingElement||(this.containingElement=this)}firstUpdated(){this.panel.hidden=!this.open,this.open&&(this.addOpenListeners(),this.popup.active=!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide()}focusOnTrigger(){let e=this.trigger.assignedElements({flatten:!0})[0];typeof e?.focus=="function"&&e.focus()}getMenu(){return this.panel.assignedElements({flatten:!0}).find(e=>e.tagName.toLowerCase()==="sl-menu")}handleTriggerClick(){this.open?this.hide():(this.show(),this.focusOnTrigger())}async handleTriggerKeyDown(e){if([" ","Enter"].includes(e.key)){e.preventDefault(),this.handleTriggerClick();return}let t=this.getMenu();if(t){let r=t.getAllItems(),i=r[0],n=r[r.length-1];["ArrowDown","ArrowUp","Home","End"].includes(e.key)&&(e.preventDefault(),this.open||(this.show(),await this.updateComplete),r.length>0&&this.updateComplete.then(()=>{(e.key==="ArrowDown"||e.key==="Home")&&(t.setCurrentItem(i),i.focus()),(e.key==="ArrowUp"||e.key==="End")&&(t.setCurrentItem(n),n.focus())}))}}handleTriggerKeyUp(e){e.key===" "&&e.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){let t=this.trigger.assignedElements({flatten:!0}).find(i=>jQ(i).start),r;if(t){switch(t.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":r=t.button;break;default:r=t}r.setAttribute("aria-haspopup","true"),r.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,$g(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,$g(this,"sl-after-hide")}reposition(){this.popup.reposition()}addOpenListeners(){var e;this.panel.addEventListener("sl-select",this.handlePanelSelect),"CloseWatcher"in window?((e=this.closeWatcher)==null||e.destroy(),this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>{this.hide(),this.focusOnTrigger()}):this.panel.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){var e;this.panel&&(this.panel.removeEventListener("sl-select",this.handlePanelSelect),this.panel.removeEventListener("keydown",this.handleKeyDown)),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown),(e=this.closeWatcher)==null||e.destroy()}async handleOpenChange(){if(this.disabled){this.open=!1;return}if(this.updateAccessibleTrigger(),this.open){this.emit("sl-show"),this.addOpenListeners(),await Ac(this),this.panel.hidden=!1,this.popup.active=!0;let{keyframes:e,options:t}=kc(this,"dropdown.show",{dir:this.localize.dir()});await Ec(this.popup.popup,e,t),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await Ac(this);let{keyframes:e,options:t}=kc(this,"dropdown.hide",{dir:this.localize.dir()});await Ec(this.popup.popup,e,t),this.panel.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}render(){return Y`
      <sl-popup
        part="base"
        exportparts="popup:base__popup"
        id="dropdown"
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        auto-size="vertical"
        auto-size-padding="10"
        sync=${Se(this.sync?this.sync:void 0)}
        class=${Qe({dropdown:!0,"dropdown--open":this.open})}
      >
        <slot
          name="trigger"
          slot="anchor"
          part="trigger"
          class="dropdown__trigger"
          @click=${this.handleTriggerClick}
          @keydown=${this.handleTriggerKeyDown}
          @keyup=${this.handleTriggerKeyUp}
          @slotchange=${this.handleTriggerSlotChange}
        ></slot>

        <div aria-hidden=${this.open?"false":"true"} aria-labelledby="dropdown">
          <slot part="panel" class="dropdown__panel"></slot>
        </div>
      </sl-popup>
    `}};hn.styles=[et,BQ];hn.dependencies={"sl-popup":Kt};F([Ne(".dropdown")],hn.prototype,"popup",2);F([Ne(".dropdown__trigger")],hn.prototype,"trigger",2);F([Ne(".dropdown__panel")],hn.prototype,"panel",2);F([U({type:Boolean,reflect:!0})],hn.prototype,"open",2);F([U({reflect:!0})],hn.prototype,"placement",2);F([U({type:Boolean,reflect:!0})],hn.prototype,"disabled",2);F([U({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],hn.prototype,"stayOpenOnSelect",2);F([U({attribute:!1})],hn.prototype,"containingElement",2);F([U({type:Number})],hn.prototype,"distance",2);F([U({type:Number})],hn.prototype,"skidding",2);F([U({type:Boolean})],hn.prototype,"hoist",2);F([U({reflect:!0})],hn.prototype,"sync",2);F([je("open",{waitUntilFirstUpdate:!0})],hn.prototype,"handleOpenChange",1);Cc("dropdown.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}});Cc("dropdown.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}});var Dee=Ie`
  :host {
    --grid-width: 280px;
    --grid-height: 200px;
    --grid-handle-size: 16px;
    --slider-height: 15px;
    --slider-handle-size: 17px;
    --swatch-size: 25px;

    display: inline-block;
  }

  .color-picker {
    width: var(--grid-width);
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    color: var(--color);
    background-color: var(--sl-panel-background-color);
    border-radius: var(--sl-border-radius-medium);
    user-select: none;
    -webkit-user-select: none;
  }

  .color-picker--inline {
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
  }

  .color-picker--inline:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-picker__grid {
    position: relative;
    height: var(--grid-height);
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 100%),
      linear-gradient(to right, #fff 0%, rgba(255, 255, 255, 0) 100%);
    border-top-left-radius: var(--sl-border-radius-medium);
    border-top-right-radius: var(--sl-border-radius-medium);
    cursor: crosshair;
    forced-color-adjust: none;
  }

  .color-picker__grid-handle {
    position: absolute;
    width: var(--grid-handle-size);
    height: var(--grid-handle-size);
    border-radius: 50%;
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25);
    border: solid 2px white;
    margin-top: calc(var(--grid-handle-size) / -2);
    margin-left: calc(var(--grid-handle-size) / -2);
    transition: var(--sl-transition-fast) scale;
  }

  .color-picker__grid-handle--dragging {
    cursor: none;
    scale: 1.5;
  }

  .color-picker__grid-handle:focus-visible {
    outline: var(--sl-focus-ring);
  }

  .color-picker__controls {
    padding: var(--sl-spacing-small);
    display: flex;
    align-items: center;
  }

  .color-picker__sliders {
    flex: 1 1 auto;
  }

  .color-picker__slider {
    position: relative;
    height: var(--slider-height);
    border-radius: var(--sl-border-radius-pill);
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.2);
    forced-color-adjust: none;
  }

  .color-picker__slider:not(:last-of-type) {
    margin-bottom: var(--sl-spacing-small);
  }

  .color-picker__slider-handle {
    position: absolute;
    top: calc(50% - var(--slider-handle-size) / 2);
    width: var(--slider-handle-size);
    height: var(--slider-handle-size);
    background-color: white;
    border-radius: 50%;
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25);
    margin-left: calc(var(--slider-handle-size) / -2);
  }

  .color-picker__slider-handle:focus-visible {
    outline: var(--sl-focus-ring);
  }

  .color-picker__hue {
    background-image: linear-gradient(
      to right,
      rgb(255, 0, 0) 0%,
      rgb(255, 255, 0) 17%,
      rgb(0, 255, 0) 33%,
      rgb(0, 255, 255) 50%,
      rgb(0, 0, 255) 67%,
      rgb(255, 0, 255) 83%,
      rgb(255, 0, 0) 100%
    );
  }

  .color-picker__alpha .color-picker__alpha-gradient {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: inherit;
  }

  .color-picker__preview {
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    width: 2.25rem;
    height: 2.25rem;
    border: none;
    border-radius: var(--sl-border-radius-circle);
    background: none;
    margin-left: var(--sl-spacing-small);
    cursor: copy;
    forced-color-adjust: none;
  }

  .color-picker__preview:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.2);

    /* We use a custom property in lieu of currentColor because of https://bugs.webkit.org/show_bug.cgi?id=216780 */
    background-color: var(--preview-color);
  }

  .color-picker__preview:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-picker__preview-color {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: solid 1px rgba(0, 0, 0, 0.125);
  }

  .color-picker__preview-color--copied {
    animation: pulse 0.75s;
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 var(--sl-color-primary-500);
    }
    70% {
      box-shadow: 0 0 0 0.5rem transparent;
    }
    100% {
      box-shadow: 0 0 0 0 transparent;
    }
  }

  .color-picker__user-input {
    display: flex;
    padding: 0 var(--sl-spacing-small) var(--sl-spacing-small) var(--sl-spacing-small);
  }

  .color-picker__user-input sl-input {
    min-width: 0; /* fix input width in Safari */
    flex: 1 1 auto;
  }

  .color-picker__user-input sl-button-group {
    margin-left: var(--sl-spacing-small);
  }

  .color-picker__user-input sl-button {
    min-width: 3.25rem;
    max-width: 3.25rem;
    font-size: 1rem;
  }

  .color-picker__swatches {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    grid-gap: 0.5rem;
    justify-items: center;
    border-top: solid 1px var(--sl-color-neutral-200);
    padding: var(--sl-spacing-small);
    forced-color-adjust: none;
  }

  .color-picker__swatch {
    position: relative;
    width: var(--swatch-size);
    height: var(--swatch-size);
    border-radius: var(--sl-border-radius-small);
  }

  .color-picker__swatch .color-picker__swatch-color {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: solid 1px rgba(0, 0, 0, 0.125);
    border-radius: inherit;
    cursor: pointer;
  }

  .color-picker__swatch:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-picker__transparent-bg {
    background-image: linear-gradient(45deg, var(--sl-color-neutral-300) 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, var(--sl-color-neutral-300) 75%),
      linear-gradient(45deg, transparent 75%, var(--sl-color-neutral-300) 75%),
      linear-gradient(45deg, var(--sl-color-neutral-300) 25%, transparent 25%);
    background-size: 10px 10px;
    background-position:
      0 0,
      0 0,
      -5px -5px,
      5px 5px;
  }

  .color-picker--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .color-picker--disabled .color-picker__grid,
  .color-picker--disabled .color-picker__grid-handle,
  .color-picker--disabled .color-picker__slider,
  .color-picker--disabled .color-picker__slider-handle,
  .color-picker--disabled .color-picker__preview,
  .color-picker--disabled .color-picker__swatch,
  .color-picker--disabled .color-picker__swatch-color {
    pointer-events: none;
  }

  /*
   * Color dropdown
   */

  .color-dropdown::part(panel) {
    max-height: none;
    background-color: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    overflow: visible;
  }

  .color-dropdown__trigger {
    display: inline-block;
    position: relative;
    background-color: transparent;
    border: none;
    cursor: pointer;
    forced-color-adjust: none;
  }

  .color-dropdown__trigger.color-dropdown__trigger--small {
    width: var(--sl-input-height-small);
    height: var(--sl-input-height-small);
    border-radius: var(--sl-border-radius-circle);
  }

  .color-dropdown__trigger.color-dropdown__trigger--medium {
    width: var(--sl-input-height-medium);
    height: var(--sl-input-height-medium);
    border-radius: var(--sl-border-radius-circle);
  }

  .color-dropdown__trigger.color-dropdown__trigger--large {
    width: var(--sl-input-height-large);
    height: var(--sl-input-height-large);
    border-radius: var(--sl-border-radius-circle);
  }

  .color-dropdown__trigger:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    background-color: currentColor;
    box-shadow:
      inset 0 0 0 2px var(--sl-input-border-color),
      inset 0 0 0 4px var(--sl-color-neutral-0);
  }

  .color-dropdown__trigger--empty:before {
    background-color: transparent;
  }

  .color-dropdown__trigger:focus-visible {
    outline: none;
  }

  .color-dropdown__trigger:focus-visible:not(.color-dropdown__trigger--disabled) {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .color-dropdown__trigger.color-dropdown__trigger--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;function dn(e,t,r){let i=n=>Object.is(n,-0)?0:n;return e<t?i(t):e>r?i(r):i(e)}var Ree=Ie`
  :host {
    --track-width: 2px;
    --track-color: rgb(128 128 128 / 25%);
    --indicator-color: var(--sl-color-primary-600);
    --speed: 2s;

    display: inline-flex;
    width: 1em;
    height: 1em;
    flex: none;
  }

  .spinner {
    flex: 1 1 auto;
    height: 100%;
    width: 100%;
  }

  .spinner__track,
  .spinner__indicator {
    fill: none;
    stroke-width: var(--track-width);
    r: calc(0.5em - var(--track-width) / 2);
    cx: 0.5em;
    cy: 0.5em;
    transform-origin: 50% 50%;
  }

  .spinner__track {
    stroke: var(--track-color);
    transform-origin: 0% 0%;
  }

  .spinner__indicator {
    stroke: var(--indicator-color);
    stroke-linecap: round;
    stroke-dasharray: 150% 75%;
    animation: spin var(--speed) linear infinite;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
      stroke-dasharray: 0.05em, 3em;
    }

    50% {
      transform: rotate(450deg);
      stroke-dasharray: 1.375em, 1.375em;
    }

    100% {
      transform: rotate(1080deg);
      stroke-dasharray: 0.05em, 3em;
    }
  }
`;var y2=class extends Ge{constructor(){super(...arguments),this.localize=new Jt(this)}render(){return Y`
      <svg part="base" class="spinner" role="progressbar" aria-label=${this.localize.term("loading")}>
        <circle class="spinner__track"></circle>
        <circle class="spinner__indicator"></circle>
      </svg>
    `}};y2.styles=[et,Ree];var Ut=class extends Ge{constructor(){super(...arguments),this.formControlController=new ji(this,{assumeInteractionOn:["click"]}),this.hasSlotController=new Lr(this,"[default]","prefix","suffix"),this.localize=new Jt(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.variant="default",this.size="medium",this.caret=!1,this.disabled=!1,this.loading=!1,this.outline=!1,this.pill=!1,this.circle=!1,this.type="button",this.name="",this.value="",this.href="",this.rel="noreferrer noopener"}get validity(){return this.isButton()?this.button.validity:xg}get validationMessage(){return this.isButton()?this.button.validationMessage:""}firstUpdated(){this.isButton()&&this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(){this.type==="submit"&&this.formControlController.submit(this),this.type==="reset"&&this.formControlController.reset(this)}handleInvalid(e){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(e)}isButton(){return!this.href}isLink(){return!!this.href}handleDisabledChange(){this.isButton()&&this.formControlController.setValidity(this.disabled)}click(){this.button.click()}focus(e){this.button.focus(e)}blur(){this.button.blur()}checkValidity(){return this.isButton()?this.button.checkValidity():!0}getForm(){return this.formControlController.getForm()}reportValidity(){return this.isButton()?this.button.reportValidity():!0}setCustomValidity(e){this.isButton()&&(this.button.setCustomValidity(e),this.formControlController.updateValidity())}render(){let e=this.isLink(),t=e?Rg`a`:Rg`button`;return ah`
      <${t}
        part="base"
        class=${Qe({button:!0,"button--default":this.variant==="default","button--primary":this.variant==="primary","button--success":this.variant==="success","button--neutral":this.variant==="neutral","button--warning":this.variant==="warning","button--danger":this.variant==="danger","button--text":this.variant==="text","button--small":this.size==="small","button--medium":this.size==="medium","button--large":this.size==="large","button--caret":this.caret,"button--circle":this.circle,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--loading":this.loading,"button--standard":!this.outline,"button--outline":this.outline,"button--pill":this.pill,"button--rtl":this.localize.dir()==="rtl","button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
        ?disabled=${Se(e?void 0:this.disabled)}
        type=${Se(e?void 0:this.type)}
        title=${this.title}
        name=${Se(e?void 0:this.name)}
        value=${Se(e?void 0:this.value)}
        href=${Se(e&&!this.disabled?this.href:void 0)}
        target=${Se(e?this.target:void 0)}
        download=${Se(e?this.download:void 0)}
        rel=${Se(e?this.rel:void 0)}
        role=${Se(e?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @invalid=${this.isButton()?this.handleInvalid:null}
        @click=${this.handleClick}
      >
        <slot name="prefix" part="prefix" class="button__prefix"></slot>
        <slot part="label" class="button__label"></slot>
        <slot name="suffix" part="suffix" class="button__suffix"></slot>
        ${this.caret?ah` <sl-icon part="caret" class="button__caret" library="system" name="caret"></sl-icon> `:""}
        ${this.loading?ah`<sl-spinner part="spinner"></sl-spinner>`:""}
      </${t}>
    `}};Ut.styles=[et,_S];Ut.dependencies={"sl-icon":Pt,"sl-spinner":y2};F([Ne(".button")],Ut.prototype,"button",2);F([Le()],Ut.prototype,"hasFocus",2);F([Le()],Ut.prototype,"invalid",2);F([U()],Ut.prototype,"title",2);F([U({reflect:!0})],Ut.prototype,"variant",2);F([U({reflect:!0})],Ut.prototype,"size",2);F([U({type:Boolean,reflect:!0})],Ut.prototype,"caret",2);F([U({type:Boolean,reflect:!0})],Ut.prototype,"disabled",2);F([U({type:Boolean,reflect:!0})],Ut.prototype,"loading",2);F([U({type:Boolean,reflect:!0})],Ut.prototype,"outline",2);F([U({type:Boolean,reflect:!0})],Ut.prototype,"pill",2);F([U({type:Boolean,reflect:!0})],Ut.prototype,"circle",2);F([U()],Ut.prototype,"type",2);F([U()],Ut.prototype,"name",2);F([U()],Ut.prototype,"value",2);F([U()],Ut.prototype,"href",2);F([U()],Ut.prototype,"target",2);F([U()],Ut.prototype,"rel",2);F([U()],Ut.prototype,"download",2);F([U()],Ut.prototype,"form",2);F([U({attribute:"formaction"})],Ut.prototype,"formAction",2);F([U({attribute:"formenctype"})],Ut.prototype,"formEnctype",2);F([U({attribute:"formmethod"})],Ut.prototype,"formMethod",2);F([U({attribute:"formnovalidate",type:Boolean})],Ut.prototype,"formNoValidate",2);F([U({attribute:"formtarget"})],Ut.prototype,"formTarget",2);F([je("disabled",{waitUntilFirstUpdate:!0})],Ut.prototype,"handleDisabledChange",1);var Mee="important",H9e=" !"+Mee,ia=jn(class extends yo{constructor(e){if(super(e),e.type!==Vi.ATTRIBUTE||e.name!=="style"||e.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,r)=>{let i=e[r];return i==null?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`}),"")}update(e,[t]){let{style:r}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(let i of this.ft)t[i]==null&&(this.ft.delete(i),i.includes("-")?r.removeProperty(i):r[i]=null);for(let i in t){let n=t[i];if(n!=null){this.ft.add(i);let o=typeof n=="string"&&n.endsWith(H9e);i.includes("-")||o?r.setProperty(i,o?n.slice(0,-11):n,o?Mee:""):r[i]=n}}return ti}});function Si(e,t){U9e(e)&&(e="100%");let r=q9e(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function x2(e){return Math.min(1,Math.max(0,e))}function U9e(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function q9e(e){return typeof e=="string"&&e.indexOf("%")!==-1}function OS(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function _2(e){return Number(e)<=1?`${Number(e)*100}%`:e}function uh(e){return e.length===1?"0"+e:String(e)}function Fee(e,t,r){return{r:Si(e,255)*255,g:Si(t,255)*255,b:Si(r,255)*255}}function fO(e,t,r){e=Si(e,255),t=Si(t,255),r=Si(r,255);let i=Math.max(e,t,r),n=Math.min(e,t,r),o=0,s=0,a=(i+n)/2;if(i===n)s=0,o=0;else{let l=i-n;switch(s=a>.5?l/(2-i-n):l/(i+n),i){case e:o=(t-r)/l+(t<r?6:0);break;case t:o=(r-e)/l+2;break;case r:o=(e-t)/l+4;break;default:break}o/=6}return{h:o,s,l:a}}function cO(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*(6*r):r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Oee(e,t,r){let i,n,o;if(e=Si(e,360),t=Si(t,100),r=Si(r,100),t===0)n=r,o=r,i=r;else{let s=r<.5?r*(1+t):r+t-r*t,a=2*r-s;i=cO(a,s,e+1/3),n=cO(a,s,e),o=cO(a,s,e-1/3)}return{r:i*255,g:n*255,b:o*255}}function hO(e,t,r){e=Si(e,255),t=Si(t,255),r=Si(r,255);let i=Math.max(e,t,r),n=Math.min(e,t,r),o=0,s=i,a=i-n,l=i===0?0:a/i;if(i===n)o=0;else{switch(i){case e:o=(t-r)/a+(t<r?6:0);break;case t:o=(r-e)/a+2;break;case r:o=(e-t)/a+4;break;default:break}o/=6}return{h:o,s:l,v:s}}function $ee(e,t,r){e=Si(e,360)*6,t=Si(t,100),r=Si(r,100);let i=Math.floor(e),n=e-i,o=r*(1-t),s=r*(1-n*t),a=r*(1-(1-n)*t),l=i%6,u=[r,s,o,o,a,r][l],c=[a,r,r,s,o,o][l],f=[o,o,a,r,r,s][l];return{r:u*255,g:c*255,b:f*255}}function dO(e,t,r,i){let n=[uh(Math.round(e).toString(16)),uh(Math.round(t).toString(16)),uh(Math.round(r).toString(16))];return i&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function Lee(e,t,r,i,n){let o=[uh(Math.round(e).toString(16)),uh(Math.round(t).toString(16)),uh(Math.round(r).toString(16)),uh(j9e(i))];return n&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Pee(e,t,r,i){let n=e/100,o=t/100,s=r/100,a=i/100,l=255*(1-n)*(1-a),u=255*(1-o)*(1-a),c=255*(1-s)*(1-a);return{r:l,g:u,b:c}}function pO(e,t,r){let i=1-e/255,n=1-t/255,o=1-r/255,s=Math.min(i,n,o);return s===1?(i=0,n=0,o=0):(i=(i-s)/(1-s)*100,n=(n-s)/(1-s)*100,o=(o-s)/(1-s)*100),s*=100,{c:Math.round(i),m:Math.round(n),y:Math.round(o),k:Math.round(s)}}function j9e(e){return Math.round(parseFloat(e)*255).toString(16)}function mO(e){return Wo(e)/255}function Wo(e){return parseInt(e,16)}function Iee(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var w2={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Nee(e){let t={r:0,g:0,b:0},r=1,i=null,n=null,o=null,s=!1,a=!1;return typeof e=="string"&&(e=G9e(e)),typeof e=="object"&&(gs(e.r)&&gs(e.g)&&gs(e.b)?(t=Fee(e.r,e.g,e.b),s=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):gs(e.h)&&gs(e.s)&&gs(e.v)?(i=_2(e.s),n=_2(e.v),t=$ee(e.h,i,n),s=!0,a="hsv"):gs(e.h)&&gs(e.s)&&gs(e.l)?(i=_2(e.s),o=_2(e.l),t=Oee(e.h,i,o),s=!0,a="hsl"):gs(e.c)&&gs(e.m)&&gs(e.y)&&gs(e.k)&&(t=Pee(e.c,e.m,e.y,e.k),s=!0,a="cmyk"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=OS(r),{ok:s,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var W9e="[-\\+]?\\d+%?",V9e="[-\\+]?\\d*\\.\\d+%?",ch="(?:"+V9e+")|(?:"+W9e+")",gO="[\\s|\\(]+("+ch+")[,|\\s]+("+ch+")[,|\\s]+("+ch+")\\s*\\)?",$S="[\\s|\\(]+("+ch+")[,|\\s]+("+ch+")[,|\\s]+("+ch+")[,|\\s]+("+ch+")\\s*\\)?",na={CSS_UNIT:new RegExp(ch),rgb:new RegExp("rgb"+gO),rgba:new RegExp("rgba"+$S),hsl:new RegExp("hsl"+gO),hsla:new RegExp("hsla"+$S),hsv:new RegExp("hsv"+gO),hsva:new RegExp("hsva"+$S),cmyk:new RegExp("cmyk"+$S),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function G9e(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=!1;if(w2[e])e=w2[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let r=na.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=na.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=na.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=na.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=na.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=na.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=na.cmyk.exec(e),r?{c:r[1],m:r[2],y:r[3],k:r[4]}:(r=na.hex8.exec(e),r?{r:Wo(r[1]),g:Wo(r[2]),b:Wo(r[3]),a:mO(r[4]),format:t?"name":"hex8"}:(r=na.hex6.exec(e),r?{r:Wo(r[1]),g:Wo(r[2]),b:Wo(r[3]),format:t?"name":"hex"}:(r=na.hex4.exec(e),r?{r:Wo(r[1]+r[1]),g:Wo(r[2]+r[2]),b:Wo(r[3]+r[3]),a:mO(r[4]+r[4]),format:t?"name":"hex8"}:(r=na.hex3.exec(e),r?{r:Wo(r[1]+r[1]),g:Wo(r[2]+r[2]),b:Wo(r[3]+r[3]),format:t?"name":"hex"}:!1))))))))))}function gs(e){return typeof e=="number"?!Number.isNaN(e):na.CSS_UNIT.test(e)}var S2=class e{constructor(t="",r={}){if(t instanceof e)return t;typeof t=="number"&&(t=Iee(t)),this.originalInput=t;let i=Nee(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=r.format??i.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){let t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3}getLuminance(){let t=this.toRgb(),r,i,n,o=t.r/255,s=t.g/255,a=t.b/255;return o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),.2126*r+.7152*i+.0722*n}getAlpha(){return this.a}setAlpha(t){return this.a=OS(t),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){let{s:t}=this.toHsl();return t===0}toHsv(){let t=hO(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}}toHsvString(){let t=hO(this.r,this.g,this.b),r=Math.round(t.h*360),i=Math.round(t.s*100),n=Math.round(t.v*100);return this.a===1?`hsv(${r}, ${i}%, ${n}%)`:`hsva(${r}, ${i}%, ${n}%, ${this.roundA})`}toHsl(){let t=fO(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}}toHslString(){let t=fO(this.r,this.g,this.b),r=Math.round(t.h*360),i=Math.round(t.s*100),n=Math.round(t.l*100);return this.a===1?`hsl(${r}, ${i}%, ${n}%)`:`hsla(${r}, ${i}%, ${n}%, ${this.roundA})`}toHex(t=!1){return dO(this.r,this.g,this.b,t)}toHexString(t=!1){return"#"+this.toHex(t)}toHex8(t=!1){return Lee(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return"#"+this.toHex8(t)}toHexShortString(t=!1){return this.a===1?this.toHexString(t):this.toHex8String(t)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){let t=Math.round(this.r),r=Math.round(this.g),i=Math.round(this.b);return this.a===1?`rgb(${t}, ${r}, ${i})`:`rgba(${t}, ${r}, ${i}, ${this.roundA})`}toPercentageRgb(){let t=r=>`${Math.round(Si(r,255)*100)}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){let t=r=>Math.round(Si(r,255)*100);return this.a===1?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toCmyk(){return{...pO(this.r,this.g,this.b)}}toCmykString(){let{c:t,m:r,y:i,k:n}=pO(this.r,this.g,this.b);return`cmyk(${t}, ${r}, ${i}, ${n})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;let t="#"+dO(this.r,this.g,this.b,!1);for(let[r,i]of Object.entries(w2))if(t===i)return r;return!1}toString(t){let r=!!t;t=t??this.format;let i=!1,n=this.a<1&&this.a>=0;return!r&&n&&(t.startsWith("hex")||t==="name")?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(i=this.toRgbString()),t==="prgb"&&(i=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(i=this.toHexString()),t==="hex3"&&(i=this.toHexString(!0)),t==="hex4"&&(i=this.toHex8String(!0)),t==="hex8"&&(i=this.toHex8String()),t==="name"&&(i=this.toName()),t==="hsl"&&(i=this.toHslString()),t==="hsv"&&(i=this.toHsvString()),t==="cmyk"&&(i=this.toCmykString()),i||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new e(this.toString())}lighten(t=10){let r=this.toHsl();return r.l+=t/100,r.l=x2(r.l),new e(r)}brighten(t=10){let r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new e(r)}darken(t=10){let r=this.toHsl();return r.l-=t/100,r.l=x2(r.l),new e(r)}tint(t=10){return this.mix("white",t)}shade(t=10){return this.mix("black",t)}desaturate(t=10){let r=this.toHsl();return r.s-=t/100,r.s=x2(r.s),new e(r)}saturate(t=10){let r=this.toHsl();return r.s+=t/100,r.s=x2(r.s),new e(r)}greyscale(){return this.desaturate(100)}spin(t){let r=this.toHsl(),i=(r.h+t)%360;return r.h=i<0?360+i:i,new e(r)}mix(t,r=50){let i=this.toRgb(),n=new e(t).toRgb(),o=r/100,s={r:(n.r-i.r)*o+i.r,g:(n.g-i.g)*o+i.g,b:(n.b-i.b)*o+i.b,a:(n.a-i.a)*o+i.a};return new e(s)}analogous(t=6,r=30){let i=this.toHsl(),n=360/r,o=[this];for(i.h=(i.h-(n*t>>1)+720)%360;--t;)i.h=(i.h+n)%360,o.push(new e(i));return o}complement(){let t=this.toHsl();return t.h=(t.h+180)%360,new e(t)}monochromatic(t=6){let r=this.toHsv(),{h:i}=r,{s:n}=r,{v:o}=r,s=[],a=1/t;for(;t--;)s.push(new e({h:i,s:n,v:o})),o=(o+a)%1;return s}splitcomplement(){let t=this.toHsl(),{h:r}=t;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]}onBackground(t){let r=this.toRgb(),i=new e(t).toRgb(),n=r.a+i.a*(1-r.a);return new e({r:(r.r*r.a+i.r*i.a*(1-r.a))/n,g:(r.g*r.a+i.g*i.a*(1-r.a))/n,b:(r.b*r.a+i.b*i.a*(1-r.a))/n,a:n})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(t){let r=this.toHsl(),{h:i}=r,n=[this],o=360/t;for(let s=1;s<t;s++)n.push(new e({h:(i+s*o)%360,s:r.s,l:r.l}));return n}equals(t){let r=new e(t);return this.format==="cmyk"||r.format==="cmyk"?this.toCmykString()===r.toCmykString():this.toRgbString()===r.toRgbString()}};var Bee="EyeDropper"in window,Ct=class extends Ge{constructor(){super(),this.formControlController=new ji(this),this.isSafeValue=!1,this.localize=new Jt(this),this.hasFocus=!1,this.isDraggingGridHandle=!1,this.isEmpty=!1,this.inputValue="",this.hue=0,this.saturation=100,this.brightness=100,this.alpha=100,this.value="",this.defaultValue="",this.label="",this.format="hex",this.inline=!1,this.size="medium",this.noFormatToggle=!1,this.name="",this.disabled=!1,this.hoist=!1,this.opacity=!1,this.uppercase=!1,this.swatches="",this.form="",this.required=!1,this.handleFocusIn=()=>{this.hasFocus=!0,this.emit("sl-focus")},this.handleFocusOut=()=>{this.hasFocus=!1,this.emit("sl-blur")},this.addEventListener("focusin",this.handleFocusIn),this.addEventListener("focusout",this.handleFocusOut)}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.input.updateComplete.then(()=>{this.formControlController.updateValidity()})}handleCopy(){this.input.select(),document.execCommand("copy"),this.previewButton.focus(),this.previewButton.classList.add("color-picker__preview-color--copied"),this.previewButton.addEventListener("animationend",()=>{this.previewButton.classList.remove("color-picker__preview-color--copied")})}handleFormatToggle(){let e=["hex","rgb","hsl","hsv"],t=(e.indexOf(this.format)+1)%e.length;this.format=e[t],this.setColor(this.value),this.emit("sl-change"),this.emit("sl-input")}handleAlphaDrag(e){let t=this.shadowRoot.querySelector(".color-picker__slider.color-picker__alpha"),r=t.querySelector(".color-picker__slider-handle"),{width:i}=t.getBoundingClientRect(),n=this.value,o=this.value;r.focus(),e.preventDefault(),wS(t,{onMove:s=>{this.alpha=dn(s/i*100,0,100),this.syncValues(),this.value!==o&&(o=this.value,this.emit("sl-input"))},onStop:()=>{this.value!==n&&(n=this.value,this.emit("sl-change"))},initialEvent:e})}handleHueDrag(e){let t=this.shadowRoot.querySelector(".color-picker__slider.color-picker__hue"),r=t.querySelector(".color-picker__slider-handle"),{width:i}=t.getBoundingClientRect(),n=this.value,o=this.value;r.focus(),e.preventDefault(),wS(t,{onMove:s=>{this.hue=dn(s/i*360,0,360),this.syncValues(),this.value!==o&&(o=this.value,this.emit("sl-input"))},onStop:()=>{this.value!==n&&(n=this.value,this.emit("sl-change"))},initialEvent:e})}handleGridDrag(e){let t=this.shadowRoot.querySelector(".color-picker__grid"),r=t.querySelector(".color-picker__grid-handle"),{width:i,height:n}=t.getBoundingClientRect(),o=this.value,s=this.value;r.focus(),e.preventDefault(),this.isDraggingGridHandle=!0,wS(t,{onMove:(a,l)=>{this.saturation=dn(a/i*100,0,100),this.brightness=dn(100-l/n*100,0,100),this.syncValues(),this.value!==s&&(s=this.value,this.emit("sl-input"))},onStop:()=>{this.isDraggingGridHandle=!1,this.value!==o&&(o=this.value,this.emit("sl-change"))},initialEvent:e})}handleAlphaKeyDown(e){let t=e.shiftKey?10:1,r=this.value;e.key==="ArrowLeft"&&(e.preventDefault(),this.alpha=dn(this.alpha-t,0,100),this.syncValues()),e.key==="ArrowRight"&&(e.preventDefault(),this.alpha=dn(this.alpha+t,0,100),this.syncValues()),e.key==="Home"&&(e.preventDefault(),this.alpha=0,this.syncValues()),e.key==="End"&&(e.preventDefault(),this.alpha=100,this.syncValues()),this.value!==r&&(this.emit("sl-change"),this.emit("sl-input"))}handleHueKeyDown(e){let t=e.shiftKey?10:1,r=this.value;e.key==="ArrowLeft"&&(e.preventDefault(),this.hue=dn(this.hue-t,0,360),this.syncValues()),e.key==="ArrowRight"&&(e.preventDefault(),this.hue=dn(this.hue+t,0,360),this.syncValues()),e.key==="Home"&&(e.preventDefault(),this.hue=0,this.syncValues()),e.key==="End"&&(e.preventDefault(),this.hue=360,this.syncValues()),this.value!==r&&(this.emit("sl-change"),this.emit("sl-input"))}handleGridKeyDown(e){let t=e.shiftKey?10:1,r=this.value;e.key==="ArrowLeft"&&(e.preventDefault(),this.saturation=dn(this.saturation-t,0,100),this.syncValues()),e.key==="ArrowRight"&&(e.preventDefault(),this.saturation=dn(this.saturation+t,0,100),this.syncValues()),e.key==="ArrowUp"&&(e.preventDefault(),this.brightness=dn(this.brightness+t,0,100),this.syncValues()),e.key==="ArrowDown"&&(e.preventDefault(),this.brightness=dn(this.brightness-t,0,100),this.syncValues()),this.value!==r&&(this.emit("sl-change"),this.emit("sl-input"))}handleInputChange(e){let t=e.target,r=this.value;e.stopPropagation(),this.input.value?(this.setColor(t.value),t.value=this.value):this.value="",this.value!==r&&(this.emit("sl-change"),this.emit("sl-input"))}handleInputInput(e){this.formControlController.updateValidity(),e.stopPropagation()}handleInputKeyDown(e){if(e.key==="Enter"){let t=this.value;this.input.value?(this.setColor(this.input.value),this.input.value=this.value,this.value!==t&&(this.emit("sl-change"),this.emit("sl-input")),setTimeout(()=>this.input.select())):this.hue=0}}handleInputInvalid(e){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(e)}handleTouchMove(e){e.preventDefault()}parseColor(e){let t=new S2(e);if(!t.isValid)return null;let r=t.toHsl(),i={h:r.h,s:r.s*100,l:r.l*100,a:r.a},n=t.toRgb(),o=t.toHexString(),s=t.toHex8String(),a=t.toHsv(),l={h:a.h,s:a.s*100,v:a.v*100,a:a.a};return{hsl:{h:i.h,s:i.s,l:i.l,string:this.setLetterCase(`hsl(${Math.round(i.h)}, ${Math.round(i.s)}%, ${Math.round(i.l)}%)`)},hsla:{h:i.h,s:i.s,l:i.l,a:i.a,string:this.setLetterCase(`hsla(${Math.round(i.h)}, ${Math.round(i.s)}%, ${Math.round(i.l)}%, ${i.a.toFixed(2).toString()})`)},hsv:{h:l.h,s:l.s,v:l.v,string:this.setLetterCase(`hsv(${Math.round(l.h)}, ${Math.round(l.s)}%, ${Math.round(l.v)}%)`)},hsva:{h:l.h,s:l.s,v:l.v,a:l.a,string:this.setLetterCase(`hsva(${Math.round(l.h)}, ${Math.round(l.s)}%, ${Math.round(l.v)}%, ${l.a.toFixed(2).toString()})`)},rgb:{r:n.r,g:n.g,b:n.b,string:this.setLetterCase(`rgb(${Math.round(n.r)}, ${Math.round(n.g)}, ${Math.round(n.b)})`)},rgba:{r:n.r,g:n.g,b:n.b,a:n.a,string:this.setLetterCase(`rgba(${Math.round(n.r)}, ${Math.round(n.g)}, ${Math.round(n.b)}, ${n.a.toFixed(2).toString()})`)},hex:this.setLetterCase(o),hexa:this.setLetterCase(s)}}setColor(e){let t=this.parseColor(e);return t===null?!1:(this.hue=t.hsva.h,this.saturation=t.hsva.s,this.brightness=t.hsva.v,this.alpha=this.opacity?t.hsva.a*100:100,this.syncValues(),!0)}setLetterCase(e){return typeof e!="string"?"":this.uppercase?e.toUpperCase():e.toLowerCase()}async syncValues(){let e=this.parseColor(`hsva(${this.hue}, ${this.saturation}%, ${this.brightness}%, ${this.alpha/100})`);e!==null&&(this.format==="hsl"?this.inputValue=this.opacity?e.hsla.string:e.hsl.string:this.format==="rgb"?this.inputValue=this.opacity?e.rgba.string:e.rgb.string:this.format==="hsv"?this.inputValue=this.opacity?e.hsva.string:e.hsv.string:this.inputValue=this.opacity?e.hexa:e.hex,this.isSafeValue=!0,this.value=this.inputValue,await this.updateComplete,this.isSafeValue=!1)}handleAfterHide(){this.previewButton.classList.remove("color-picker__preview-color--copied")}handleEyeDropper(){if(!Bee)return;new EyeDropper().open().then(t=>{let r=this.value;this.setColor(t.sRGBHex),this.value!==r&&(this.emit("sl-change"),this.emit("sl-input"))}).catch(()=>{})}selectSwatch(e){let t=this.value;this.disabled||(this.setColor(e),this.value!==t&&(this.emit("sl-change"),this.emit("sl-input")))}getHexString(e,t,r,i=100){let n=new S2(`hsva(${e}, ${t}%, ${r}%, ${i/100})`);return n.isValid?n.toHex8String():""}stopNestedEventPropagation(e){e.stopImmediatePropagation()}handleFormatChange(){this.syncValues()}handleOpacityChange(){this.alpha=100}handleValueChange(e,t){if(this.isEmpty=!t,t||(this.hue=0,this.saturation=0,this.brightness=100,this.alpha=100),!this.isSafeValue){let r=this.parseColor(t);r!==null?(this.inputValue=this.value,this.hue=r.hsva.h,this.saturation=r.hsva.s,this.brightness=r.hsva.v,this.alpha=r.hsva.a*100,this.syncValues()):this.inputValue=e??""}}focus(e){this.inline?this.base.focus(e):this.trigger.focus(e)}blur(){var e;let t=this.inline?this.base:this.trigger;this.hasFocus&&(t.focus({preventScroll:!0}),t.blur()),(e=this.dropdown)!=null&&e.open&&this.dropdown.hide()}getFormattedValue(e="hex"){let t=this.parseColor(`hsva(${this.hue}, ${this.saturation}%, ${this.brightness}%, ${this.alpha/100})`);if(t===null)return"";switch(e){case"hex":return t.hex;case"hexa":return t.hexa;case"rgb":return t.rgb.string;case"rgba":return t.rgba.string;case"hsl":return t.hsl.string;case"hsla":return t.hsla.string;case"hsv":return t.hsv.string;case"hsva":return t.hsva.string;default:return""}}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return!this.inline&&!this.validity.valid?(this.dropdown.show(),this.addEventListener("sl-after-show",()=>this.input.reportValidity(),{once:!0}),this.disabled||this.formControlController.emitInvalidEvent(),!1):this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.formControlController.updateValidity()}render(){let e=this.saturation,t=100-this.brightness,r=Array.isArray(this.swatches)?this.swatches:this.swatches.split(";").filter(n=>n.trim()!==""),i=Y`
      <div
        part="base"
        class=${Qe({"color-picker":!0,"color-picker--inline":this.inline,"color-picker--disabled":this.disabled,"color-picker--focused":this.hasFocus})}
        aria-disabled=${this.disabled?"true":"false"}
        aria-labelledby="label"
        tabindex=${this.inline?"0":"-1"}
      >
        ${this.inline?Y`
              <sl-visually-hidden id="label">
                <slot name="label">${this.label}</slot>
              </sl-visually-hidden>
            `:null}

        <div
          part="grid"
          class="color-picker__grid"
          style=${ia({backgroundColor:this.getHexString(this.hue,100,100)})}
          @pointerdown=${this.handleGridDrag}
          @touchmove=${this.handleTouchMove}
        >
          <span
            part="grid-handle"
            class=${Qe({"color-picker__grid-handle":!0,"color-picker__grid-handle--dragging":this.isDraggingGridHandle})}
            style=${ia({top:`${t}%`,left:`${e}%`,backgroundColor:this.getHexString(this.hue,this.saturation,this.brightness,this.alpha)})}
            role="application"
            aria-label="HSV"
            tabindex=${Se(this.disabled?void 0:"0")}
            @keydown=${this.handleGridKeyDown}
          ></span>
        </div>

        <div class="color-picker__controls">
          <div class="color-picker__sliders">
            <div
              part="slider hue-slider"
              class="color-picker__hue color-picker__slider"
              @pointerdown=${this.handleHueDrag}
              @touchmove=${this.handleTouchMove}
            >
              <span
                part="slider-handle hue-slider-handle"
                class="color-picker__slider-handle"
                style=${ia({left:`${this.hue===0?0:100/(360/this.hue)}%`})}
                role="slider"
                aria-label="hue"
                aria-orientation="horizontal"
                aria-valuemin="0"
                aria-valuemax="360"
                aria-valuenow=${`${Math.round(this.hue)}`}
                tabindex=${Se(this.disabled?void 0:"0")}
                @keydown=${this.handleHueKeyDown}
              ></span>
            </div>

            ${this.opacity?Y`
                  <div
                    part="slider opacity-slider"
                    class="color-picker__alpha color-picker__slider color-picker__transparent-bg"
                    @pointerdown="${this.handleAlphaDrag}"
                    @touchmove=${this.handleTouchMove}
                  >
                    <div
                      class="color-picker__alpha-gradient"
                      style=${ia({backgroundImage:`linear-gradient(
                          to right,
                          ${this.getHexString(this.hue,this.saturation,this.brightness,0)} 0%,
                          ${this.getHexString(this.hue,this.saturation,this.brightness,100)} 100%
                        )`})}
                    ></div>
                    <span
                      part="slider-handle opacity-slider-handle"
                      class="color-picker__slider-handle"
                      style=${ia({left:`${this.alpha}%`})}
                      role="slider"
                      aria-label="alpha"
                      aria-orientation="horizontal"
                      aria-valuemin="0"
                      aria-valuemax="100"
                      aria-valuenow=${Math.round(this.alpha)}
                      tabindex=${Se(this.disabled?void 0:"0")}
                      @keydown=${this.handleAlphaKeyDown}
                    ></span>
                  </div>
                `:""}
          </div>

          <button
            type="button"
            part="preview"
            class="color-picker__preview color-picker__transparent-bg"
            aria-label=${this.localize.term("copy")}
            style=${ia({"--preview-color":this.getHexString(this.hue,this.saturation,this.brightness,this.alpha)})}
            @click=${this.handleCopy}
          ></button>
        </div>

        <div class="color-picker__user-input" aria-live="polite">
          <sl-input
            part="input"
            type="text"
            name=${this.name}
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
            value=${this.isEmpty?"":this.inputValue}
            ?required=${this.required}
            ?disabled=${this.disabled}
            aria-label=${this.localize.term("currentValue")}
            @keydown=${this.handleInputKeyDown}
            @sl-change=${this.handleInputChange}
            @sl-input=${this.handleInputInput}
            @sl-invalid=${this.handleInputInvalid}
            @sl-blur=${this.stopNestedEventPropagation}
            @sl-focus=${this.stopNestedEventPropagation}
          ></sl-input>

          <sl-button-group>
            ${this.noFormatToggle?"":Y`
                  <sl-button
                    part="format-button"
                    aria-label=${this.localize.term("toggleColorFormat")}
                    exportparts="
                      base:format-button__base,
                      prefix:format-button__prefix,
                      label:format-button__label,
                      suffix:format-button__suffix,
                      caret:format-button__caret
                    "
                    @click=${this.handleFormatToggle}
                    @sl-blur=${this.stopNestedEventPropagation}
                    @sl-focus=${this.stopNestedEventPropagation}
                  >
                    ${this.setLetterCase(this.format)}
                  </sl-button>
                `}
            ${Bee?Y`
                  <sl-button
                    part="eye-dropper-button"
                    exportparts="
                      base:eye-dropper-button__base,
                      prefix:eye-dropper-button__prefix,
                      label:eye-dropper-button__label,
                      suffix:eye-dropper-button__suffix,
                      caret:eye-dropper-button__caret
                    "
                    @click=${this.handleEyeDropper}
                    @sl-blur=${this.stopNestedEventPropagation}
                    @sl-focus=${this.stopNestedEventPropagation}
                  >
                    <sl-icon
                      library="system"
                      name="eyedropper"
                      label=${this.localize.term("selectAColorFromTheScreen")}
                    ></sl-icon>
                  </sl-button>
                `:""}
          </sl-button-group>
        </div>

        ${r.length>0?Y`
              <div part="swatches" class="color-picker__swatches">
                ${r.map(n=>{let o=this.parseColor(n);return o?Y`
                    <div
                      part="swatch"
                      class="color-picker__swatch color-picker__transparent-bg"
                      tabindex=${Se(this.disabled?void 0:"0")}
                      role="button"
                      aria-label=${n}
                      @click=${()=>this.selectSwatch(n)}
                      @keydown=${s=>!this.disabled&&s.key==="Enter"&&this.setColor(o.hexa)}
                    >
                      <div
                        class="color-picker__swatch-color"
                        style=${ia({backgroundColor:o.hexa})}
                      ></div>
                    </div>
                  `:(console.error(`Unable to parse swatch color: "${n}"`,this),"")})}
              </div>
            `:""}
      </div>
    `;return this.inline?i:Y`
      <sl-dropdown
        class="color-dropdown"
        aria-disabled=${this.disabled?"true":"false"}
        .containingElement=${this}
        ?disabled=${this.disabled}
        ?hoist=${this.hoist}
        @sl-after-hide=${this.handleAfterHide}
      >
        <button
          part="trigger"
          slot="trigger"
          class=${Qe({"color-dropdown__trigger":!0,"color-dropdown__trigger--disabled":this.disabled,"color-dropdown__trigger--small":this.size==="small","color-dropdown__trigger--medium":this.size==="medium","color-dropdown__trigger--large":this.size==="large","color-dropdown__trigger--empty":this.isEmpty,"color-dropdown__trigger--focused":this.hasFocus,"color-picker__transparent-bg":!0})}
          style=${ia({color:this.getHexString(this.hue,this.saturation,this.brightness,this.alpha)})}
          type="button"
        >
          <sl-visually-hidden>
            <slot name="label">${this.label}</slot>
          </sl-visually-hidden>
        </button>
        ${i}
      </sl-dropdown>
    `}};Ct.styles=[et,Dee];Ct.dependencies={"sl-button-group":lh,"sl-button":Ut,"sl-dropdown":hn,"sl-icon":Pt,"sl-input":pt,"sl-visually-hidden":rO};F([Ne('[part~="base"]')],Ct.prototype,"base",2);F([Ne('[part~="input"]')],Ct.prototype,"input",2);F([Ne(".color-dropdown")],Ct.prototype,"dropdown",2);F([Ne('[part~="preview"]')],Ct.prototype,"previewButton",2);F([Ne('[part~="trigger"]')],Ct.prototype,"trigger",2);F([Le()],Ct.prototype,"hasFocus",2);F([Le()],Ct.prototype,"isDraggingGridHandle",2);F([Le()],Ct.prototype,"isEmpty",2);F([Le()],Ct.prototype,"inputValue",2);F([Le()],Ct.prototype,"hue",2);F([Le()],Ct.prototype,"saturation",2);F([Le()],Ct.prototype,"brightness",2);F([Le()],Ct.prototype,"alpha",2);F([U()],Ct.prototype,"value",2);F([Qs()],Ct.prototype,"defaultValue",2);F([U()],Ct.prototype,"label",2);F([U()],Ct.prototype,"format",2);F([U({type:Boolean,reflect:!0})],Ct.prototype,"inline",2);F([U({reflect:!0})],Ct.prototype,"size",2);F([U({attribute:"no-format-toggle",type:Boolean})],Ct.prototype,"noFormatToggle",2);F([U()],Ct.prototype,"name",2);F([U({type:Boolean,reflect:!0})],Ct.prototype,"disabled",2);F([U({type:Boolean})],Ct.prototype,"hoist",2);F([U({type:Boolean})],Ct.prototype,"opacity",2);F([U({type:Boolean})],Ct.prototype,"uppercase",2);F([U()],Ct.prototype,"swatches",2);F([U({reflect:!0})],Ct.prototype,"form",2);F([U({type:Boolean,reflect:!0})],Ct.prototype,"required",2);F([T0({passive:!1})],Ct.prototype,"handleTouchMove",1);F([je("format",{waitUntilFirstUpdate:!0})],Ct.prototype,"handleFormatChange",1);F([je("opacity",{waitUntilFirstUpdate:!0})],Ct.prototype,"handleOpacityChange",1);F([je("value")],Ct.prototype,"handleValueChange",1);Ct.define("sl-color-picker");var zee=e=>Y`
	<div class="theme-shoelace widget-color-picker">
		<label>${e.label}</label>
		<sl-color-picker
			.label=${e.label??""}
			value=${e.value?String(e.value):""}
			@sl-change=${t=>{let r=t.target.value;e.valueChangedCallback?.(r)}}
			.disabled=${e.disabled}
		></sl-color-picker>

		<div class="widget-color-picker__description">${e.helpText}</div>
	</div>
`;var Hee=e=>Y`
	<sl-input
		type=${e.type}
		.label=${e.label??""}
		.helpText=${e.helpText??""}
		value=${e.value?e.value:""}
		.name=${e.id}
		.id=${e.id}
		.required=${e.required??!1}
		@sl-input=${t=>{let{value:r}=t.target;e.type==="datetime-local"&&(r=new Date(r)),e.valueChangedCallback?.(r)}}
		.disabled=${e.disabled}
		.readonly=${e.readonly}
	>
	</sl-input>
`;var Uee=e=>Y` <!--  -->
		<sl-input
			type="number"
			value=${Se(e.value)}
			step=${Se(e.step)}
			min=${Se(e.min)}
			max=${Se(e.max)}
			.label=${e.label}
			.helpText=${e.helpText}
			placeholder=${e.placeholder}
			.name=${e.id}
			.id=${e.id}
			.required=${e.required}
			@sl-input=${t=>{let r=t.target.valueAsNumber;console.log(r),e.valueChangedCallback?.(r)}}
			.disabled=${e.disabled}
			.readonly=${e.readonly}
		></sl-input>`;var qee=e=>Y`
	<fieldset
		id=${e.id}
		class="theme-shoelace widget-object widget-fieldset level-${e.level}"
		part="object"
	>
		${e.label?Y`<legend>${e.label}</legend>`:""}
		<!-- -->
		${e.helpText?Y`<div class="widget-fieldset__description">
					${e.helpText}
			  </div>`:at}
		<!--  -->
		${e.children}
	</fieldset>
`;var jee=Ie`
  :host {
    display: block;
  }

  :host(:focus-visible) {
    outline: 0px;
  }

  .radio {
    display: inline-flex;
    align-items: top;
    font-family: var(--sl-input-font-family);
    font-size: var(--sl-input-font-size-medium);
    font-weight: var(--sl-input-font-weight);
    color: var(--sl-input-label-color);
    vertical-align: middle;
    cursor: pointer;
  }

  .radio--small {
    --toggle-size: var(--sl-toggle-size-small);
    font-size: var(--sl-input-font-size-small);
  }

  .radio--medium {
    --toggle-size: var(--sl-toggle-size-medium);
    font-size: var(--sl-input-font-size-medium);
  }

  .radio--large {
    --toggle-size: var(--sl-toggle-size-large);
    font-size: var(--sl-input-font-size-large);
  }

  .radio__checked-icon {
    display: inline-flex;
    width: var(--toggle-size);
    height: var(--toggle-size);
  }

  .radio__control {
    flex: 0 0 auto;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--toggle-size);
    height: var(--toggle-size);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
    border-radius: 50%;
    background-color: var(--sl-input-background-color);
    color: transparent;
    transition:
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) box-shadow;
  }

  .radio__input {
    position: absolute;
    opacity: 0;
    padding: 0;
    margin: 0;
    pointer-events: none;
  }

  /* Hover */
  .radio:not(.radio--checked):not(.radio--disabled) .radio__control:hover {
    border-color: var(--sl-input-border-color-hover);
    background-color: var(--sl-input-background-color-hover);
  }

  /* Checked */
  .radio--checked .radio__control {
    color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
  }

  /* Checked + hover */
  .radio.radio--checked:not(.radio--disabled) .radio__control:hover {
    border-color: var(--sl-color-primary-500);
    background-color: var(--sl-color-primary-500);
  }

  /* Checked + focus */
  :host(:focus-visible) .radio__control {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  /* Disabled */
  .radio--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When the control isn't checked, hide the circle for Windows High Contrast mode a11y */
  .radio:not(.radio--checked) svg circle {
    opacity: 0;
  }

  .radio__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    line-height: var(--toggle-size);
    margin-inline-start: 0.5em;
    user-select: none;
    -webkit-user-select: none;
  }
`;var il=class extends Ge{constructor(){super(),this.checked=!1,this.hasFocus=!1,this.size="medium",this.disabled=!1,this.handleBlur=()=>{this.hasFocus=!1,this.emit("sl-blur")},this.handleClick=()=>{this.disabled||(this.checked=!0)},this.handleFocus=()=>{this.hasFocus=!0,this.emit("sl-focus")},this.addEventListener("blur",this.handleBlur),this.addEventListener("click",this.handleClick),this.addEventListener("focus",this.handleFocus)}connectedCallback(){super.connectedCallback(),this.setInitialAttributes()}setInitialAttributes(){this.setAttribute("role","radio"),this.setAttribute("tabindex","-1"),this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleCheckedChange(){this.setAttribute("aria-checked",this.checked?"true":"false"),this.setAttribute("tabindex",this.checked?"0":"-1")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}render(){return Y`
      <span
        part="base"
        class=${Qe({radio:!0,"radio--checked":this.checked,"radio--disabled":this.disabled,"radio--focused":this.hasFocus,"radio--small":this.size==="small","radio--medium":this.size==="medium","radio--large":this.size==="large"})}
      >
        <span part="${`control${this.checked?" control--checked":""}`}" class="radio__control">
          ${this.checked?Y` <sl-icon part="checked-icon" class="radio__checked-icon" library="system" name="radio"></sl-icon> `:""}
        </span>

        <slot part="label" class="radio__label"></slot>
      </span>
    `}};il.styles=[et,jee];il.dependencies={"sl-icon":Pt};F([Le()],il.prototype,"checked",2);F([Le()],il.prototype,"hasFocus",2);F([U()],il.prototype,"value",2);F([U({reflect:!0})],il.prototype,"size",2);F([U({type:Boolean,reflect:!0})],il.prototype,"disabled",2);F([je("checked")],il.prototype,"handleCheckedChange",1);F([je("disabled",{waitUntilFirstUpdate:!0})],il.prototype,"handleDisabledChange",1);il.define("sl-radio");var Wee=e=>Y`
	<sl-radio-group
		class="theme-shoelace widget-radio-group"
		size="medium"
		.label=${e.label??""}
		.helpText=${e.helpText??""}
		value=${typeof e.value<"u"?String(e.value):""}
		.name=${e.id}
		.required=${e.required??!1}
		@sl-change=${t=>{let r=t.target.value;e.type==="number"&&(r=Number(r)),e.valueChangedCallback?.(r)}}
	>
		${e.enum?.map(t=>Y`<sl-radio .disabled=${e.disabled} value=${String(t)}
					>${t}</sl-radio
				>`)}
	</sl-radio-group>
`;var Vee=e=>Y`
	<!-- TODO: Disabled state (not supported by Shoelace for this specific field despite the docs?) -->
	<sl-radio-group
		class="theme-shoelace widget-radio-group-boolean"
		size="medium"
		.label=${e.label??""}
		.helpText=${e.helpText??""}
		value=${typeof e.value<"u"?String(e.value):""}
		.name=${e.id}
		.required=${e.required??!1}
		@sl-change=${t=>{let r=t.target.value;e.valueChangedCallback?.(r==="true")}}
	>
		<sl-radio .disabled=${e.disabled} value="true"
			>${e.trueLabel??"Yes"}</sl-radio
		>
		<sl-radio .disabled=${e.disabled} value="false"
			>${e.falseLabel??"No"}</sl-radio
		>
	</sl-radio-group>
`;var Gee=Ie`
  :host {
    --thumb-size: 20px;
    --tooltip-offset: 10px;
    --track-color-active: var(--sl-color-neutral-200);
    --track-color-inactive: var(--sl-color-neutral-200);
    --track-active-offset: 0%;
    --track-height: 6px;

    display: block;
  }

  .range {
    position: relative;
  }

  .range__control {
    --percent: 0%;
    -webkit-appearance: none;
    border-radius: 3px;
    width: 100%;
    height: var(--track-height);
    background: transparent;
    line-height: var(--sl-input-height-medium);
    vertical-align: middle;
    margin: 0;

    background-image: linear-gradient(
      to right,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  .range--rtl .range__control {
    background-image: linear-gradient(
      to left,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  /* Webkit */
  .range__control::-webkit-slider-runnable-track {
    width: 100%;
    height: var(--track-height);
    border-radius: 3px;
    border: none;
  }

  .range__control::-webkit-slider-thumb {
    border: none;
    width: var(--thumb-size);
    height: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border: solid var(--sl-input-border-width) var(--sl-color-primary-600);
    -webkit-appearance: none;
    margin-top: calc(var(--thumb-size) / -2 + var(--track-height) / 2);
    cursor: pointer;
  }

  .range__control:enabled::-webkit-slider-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-webkit-slider-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-webkit-slider-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* Firefox */
  .range__control::-moz-focus-outer {
    border: 0;
  }

  .range__control::-moz-range-progress {
    background-color: var(--track-color-active);
    border-radius: 3px;
    height: var(--track-height);
  }

  .range__control::-moz-range-track {
    width: 100%;
    height: var(--track-height);
    background-color: var(--track-color-inactive);
    border-radius: 3px;
    border: none;
  }

  .range__control::-moz-range-thumb {
    border: none;
    height: var(--thumb-size);
    width: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    transition:
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) box-shadow;
    cursor: pointer;
  }

  .range__control:enabled::-moz-range-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-moz-range-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-moz-range-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* States */
  .range__control:focus-visible {
    outline: none;
  }

  .range__control:disabled {
    opacity: 0.5;
  }

  .range__control:disabled::-webkit-slider-thumb {
    cursor: not-allowed;
  }

  .range__control:disabled::-moz-range-thumb {
    cursor: not-allowed;
  }

  /* Tooltip output */
  .range__tooltip {
    position: absolute;
    z-index: var(--sl-z-index-tooltip);
    left: 0;
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    opacity: 0;
    padding: var(--sl-tooltip-padding);
    transition: var(--sl-transition-fast) opacity;
    pointer-events: none;
  }

  .range__tooltip:after {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    left: 50%;
    translate: calc(-1 * var(--sl-tooltip-arrow-size));
  }

  .range--tooltip-visible .range__tooltip {
    opacity: 1;
  }

  /* Tooltip on top */
  .range--tooltip-top .range__tooltip {
    top: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-top .range__tooltip:after {
    border-top: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    top: 100%;
  }

  /* Tooltip on bottom */
  .range--tooltip-bottom .range__tooltip {
    bottom: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-bottom .range__tooltip:after {
    border-bottom: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    bottom: 100%;
  }

  @media (forced-colors: active) {
    .range__control,
    .range__tooltip {
      border: solid 1px transparent;
    }

    .range__control::-webkit-slider-thumb {
      border: solid 1px transparent;
    }

    .range__control::-moz-range-thumb {
      border: solid 1px transparent;
    }

    .range__tooltip:after {
      display: none;
    }
  }
`;var Cr=class extends Ge{constructor(){super(...arguments),this.formControlController=new ji(this),this.hasSlotController=new Lr(this,"help-text","label"),this.localize=new Jt(this),this.hasFocus=!1,this.hasTooltip=!1,this.title="",this.name="",this.value=0,this.label="",this.helpText="",this.disabled=!1,this.min=0,this.max=100,this.step=1,this.tooltip="top",this.tooltipFormatter=e=>e.toString(),this.form="",this.defaultValue=0}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.syncRange()),this.value<this.min&&(this.value=this.min),this.value>this.max&&(this.value=this.max),this.updateComplete.then(()=>{this.syncRange(),this.resizeObserver.observe(this.input)})}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.unobserve(this.input)}handleChange(){this.emit("sl-change")}handleInput(){this.value=parseFloat(this.input.value),this.emit("sl-input"),this.syncRange()}handleBlur(){this.hasFocus=!1,this.hasTooltip=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.hasTooltip=!0,this.emit("sl-focus")}handleThumbDragStart(){this.hasTooltip=!0}handleThumbDragEnd(){this.hasTooltip=!1}syncProgress(e){this.input.style.setProperty("--percent",`${e*100}%`)}syncTooltip(e){if(this.output!==null){let t=this.input.offsetWidth,r=this.output.offsetWidth,i=getComputedStyle(this.input).getPropertyValue("--thumb-size"),n=this.localize.dir()==="rtl",o=t*e;if(n){let s=`${t-o}px + ${e} * ${i}`;this.output.style.translate=`calc((${s} - ${r/2}px - ${i} / 2))`}else{let s=`${o}px - ${e} * ${i}`;this.output.style.translate=`calc(${s} - ${r/2}px + ${i} / 2)`}}}handleValueChange(){this.formControlController.updateValidity(),this.input.value=this.value.toString(),this.value=parseFloat(this.input.value),this.syncRange()}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}syncRange(){let e=Math.max(0,(this.value-this.min)/(this.max-this.min));this.syncProgress(e),this.tooltip!=="none"&&this.hasTooltip&&this.updateComplete.then(()=>this.syncTooltip(e))}handleInvalid(e){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(e)}focus(e){this.input.focus(e)}blur(){this.input.blur()}stepUp(){this.input.stepUp(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}stepDown(){this.input.stepDown(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.formControlController.updateValidity()}render(){let e=this.hasSlotController.test("label"),t=this.hasSlotController.test("help-text"),r=this.label?!0:!!e,i=this.helpText?!0:!!t;return Y`
      <div
        part="form-control"
        class=${Qe({"form-control":!0,"form-control--medium":!0,"form-control--has-label":r,"form-control--has-help-text":i})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${r?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${Qe({range:!0,"range--disabled":this.disabled,"range--focused":this.hasFocus,"range--rtl":this.localize.dir()==="rtl","range--tooltip-visible":this.hasTooltip,"range--tooltip-top":this.tooltip==="top","range--tooltip-bottom":this.tooltip==="bottom"})}
            @mousedown=${this.handleThumbDragStart}
            @mouseup=${this.handleThumbDragEnd}
            @touchstart=${this.handleThumbDragStart}
            @touchend=${this.handleThumbDragEnd}
          >
            <input
              part="input"
              id="input"
              class="range__control"
              title=${this.title}
              type="range"
              name=${Se(this.name)}
              ?disabled=${this.disabled}
              min=${Se(this.min)}
              max=${Se(this.max)}
              step=${Se(this.step)}
              .value=${ms(this.value.toString())}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @focus=${this.handleFocus}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @blur=${this.handleBlur}
            />
            ${this.tooltip!=="none"&&!this.disabled?Y`
                  <output part="tooltip" class="range__tooltip">
                    ${typeof this.tooltipFormatter=="function"?this.tooltipFormatter(this.value):this.value}
                  </output>
                `:""}
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${i?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};Cr.styles=[et,qo,Gee];F([Ne(".range__control")],Cr.prototype,"input",2);F([Ne(".range__tooltip")],Cr.prototype,"output",2);F([Le()],Cr.prototype,"hasFocus",2);F([Le()],Cr.prototype,"hasTooltip",2);F([U()],Cr.prototype,"title",2);F([U()],Cr.prototype,"name",2);F([U({type:Number})],Cr.prototype,"value",2);F([U()],Cr.prototype,"label",2);F([U({attribute:"help-text"})],Cr.prototype,"helpText",2);F([U({type:Boolean,reflect:!0})],Cr.prototype,"disabled",2);F([U({type:Number})],Cr.prototype,"min",2);F([U({type:Number})],Cr.prototype,"max",2);F([U({type:Number})],Cr.prototype,"step",2);F([U()],Cr.prototype,"tooltip",2);F([U({attribute:!1})],Cr.prototype,"tooltipFormatter",2);F([U({reflect:!0})],Cr.prototype,"form",2);F([Qs()],Cr.prototype,"defaultValue",2);F([T0({passive:!0})],Cr.prototype,"handleThumbDragStart",1);F([je("value",{waitUntilFirstUpdate:!0})],Cr.prototype,"handleValueChange",1);F([je("disabled",{waitUntilFirstUpdate:!0})],Cr.prototype,"handleDisabledChange",1);F([je("hasTooltip",{waitUntilFirstUpdate:!0})],Cr.prototype,"syncRange",1);Cr.define("sl-range");var Yee=e=>Y` <!--  -->
		<sl-range
			value=${Se(e.value)}
			step=${Se(e.step)}
			min=${Se(e.min)}
			max=${Se(e.max)}
			.label=${e.label}
			.helpText=${e.helpText}
			placeholder=${e.placeholder}
			.name=${e.id}
			.id=${e.id}
			.required=${e.required}
			@sl-input=${t=>{let r=t.target.value;console.log(r),e.valueChangedCallback?.(r)}}
			.disabled=${e.disabled}
		></sl-range>`;var Xee=Ie`
  :host {
    --symbol-color: var(--sl-color-neutral-300);
    --symbol-color-active: var(--sl-color-amber-500);
    --symbol-size: 1.2rem;
    --symbol-spacing: var(--sl-spacing-3x-small);

    display: inline-flex;
  }

  .rating {
    position: relative;
    display: inline-flex;
    border-radius: var(--sl-border-radius-medium);
    vertical-align: middle;
  }

  .rating:focus {
    outline: none;
  }

  .rating:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .rating__symbols {
    display: inline-flex;
    position: relative;
    font-size: var(--symbol-size);
    line-height: 0;
    color: var(--symbol-color);
    white-space: nowrap;
    cursor: pointer;
  }

  .rating__symbols > * {
    padding: var(--symbol-spacing);
  }

  .rating__symbol--active,
  .rating__partial--filled {
    color: var(--symbol-color-active);
  }

  .rating__partial-symbol-container {
    position: relative;
  }

  .rating__partial--filled {
    position: absolute;
    top: var(--symbol-spacing);
    left: var(--symbol-spacing);
  }

  .rating__symbol {
    transition: var(--sl-transition-fast) scale;
    pointer-events: none;
  }

  .rating__symbol--hover {
    scale: 1.2;
  }

  .rating--disabled .rating__symbols,
  .rating--readonly .rating__symbols {
    cursor: default;
  }

  .rating--disabled .rating__symbol--hover,
  .rating--readonly .rating__symbol--hover {
    scale: none;
  }

  .rating--disabled {
    opacity: 0.5;
  }

  .rating--disabled .rating__symbols {
    cursor: not-allowed;
  }

  /* Forced colors mode */
  @media (forced-colors: active) {
    .rating__symbol--active {
      color: SelectedItem;
    }
  }
`;var C2=class extends yo{constructor(t){if(super(t),this.it=at,t.type!==Vi.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===at||t==null)return this._t=void 0,this.it=t;if(t===ti)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;let r=[t];return r.raw=r,this._t={_$litType$:this.constructor.resultType,strings:r,values:[]}}};C2.directiveName="unsafeHTML",C2.resultType=1;var fh=jn(C2);var pn=class extends Ge{constructor(){super(...arguments),this.localize=new Jt(this),this.hoverValue=0,this.isHovering=!1,this.label="",this.value=0,this.max=5,this.precision=1,this.readonly=!1,this.disabled=!1,this.getSymbol=()=>'<sl-icon name="star-fill" library="system"></sl-icon>'}getValueFromMousePosition(e){return this.getValueFromXCoordinate(e.clientX)}getValueFromTouchPosition(e){return this.getValueFromXCoordinate(e.touches[0].clientX)}getValueFromXCoordinate(e){let t=this.localize.dir()==="rtl",{left:r,right:i,width:n}=this.rating.getBoundingClientRect(),o=t?this.roundToPrecision((i-e)/n*this.max,this.precision):this.roundToPrecision((e-r)/n*this.max,this.precision);return dn(o,0,this.max)}handleClick(e){this.disabled||(this.setValue(this.getValueFromMousePosition(e)),this.emit("sl-change"))}setValue(e){this.disabled||this.readonly||(this.value=e===this.value?0:e,this.isHovering=!1)}handleKeyDown(e){let t=this.localize.dir()==="ltr",r=this.localize.dir()==="rtl",i=this.value;if(!(this.disabled||this.readonly)){if(e.key==="ArrowDown"||t&&e.key==="ArrowLeft"||r&&e.key==="ArrowRight"){let n=e.shiftKey?1:this.precision;this.value=Math.max(0,this.value-n),e.preventDefault()}if(e.key==="ArrowUp"||t&&e.key==="ArrowRight"||r&&e.key==="ArrowLeft"){let n=e.shiftKey?1:this.precision;this.value=Math.min(this.max,this.value+n),e.preventDefault()}e.key==="Home"&&(this.value=0,e.preventDefault()),e.key==="End"&&(this.value=this.max,e.preventDefault()),this.value!==i&&this.emit("sl-change")}}handleMouseEnter(e){this.isHovering=!0,this.hoverValue=this.getValueFromMousePosition(e)}handleMouseMove(e){this.hoverValue=this.getValueFromMousePosition(e)}handleMouseLeave(){this.isHovering=!1}handleTouchStart(e){this.isHovering=!0,this.hoverValue=this.getValueFromTouchPosition(e),e.preventDefault()}handleTouchMove(e){this.hoverValue=this.getValueFromTouchPosition(e)}handleTouchEnd(e){this.isHovering=!1,this.setValue(this.hoverValue),this.emit("sl-change"),e.preventDefault()}roundToPrecision(e,t=.5){let r=1/t;return Math.ceil(e*r)/r}handleHoverValueChange(){this.emit("sl-hover",{detail:{phase:"move",value:this.hoverValue}})}handleIsHoveringChange(){this.emit("sl-hover",{detail:{phase:this.isHovering?"start":"end",value:this.hoverValue}})}focus(e){this.rating.focus(e)}blur(){this.rating.blur()}render(){let e=this.localize.dir()==="rtl",t=Array.from(Array(this.max).keys()),r=0;return this.disabled||this.readonly?r=this.value:r=this.isHovering?this.hoverValue:this.value,Y`
      <div
        part="base"
        class=${Qe({rating:!0,"rating--readonly":this.readonly,"rating--disabled":this.disabled,"rating--rtl":e})}
        role="slider"
        aria-label=${this.label}
        aria-disabled=${this.disabled?"true":"false"}
        aria-readonly=${this.readonly?"true":"false"}
        aria-valuenow=${this.value}
        aria-valuemin=${0}
        aria-valuemax=${this.max}
        tabindex=${this.disabled||this.readonly?"-1":"0"}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mouseenter=${this.handleMouseEnter}
        @touchstart=${this.handleTouchStart}
        @mouseleave=${this.handleMouseLeave}
        @touchend=${this.handleTouchEnd}
        @mousemove=${this.handleMouseMove}
        @touchmove=${this.handleTouchMove}
      >
        <span class="rating__symbols">
          ${t.map(i=>r>i&&r<i+1?Y`
                <span
                  class=${Qe({rating__symbol:!0,"rating__partial-symbol-container":!0,"rating__symbol--hover":this.isHovering&&Math.ceil(r)===i+1})}
                  role="presentation"
                >
                  <div
                    style=${ia({clipPath:e?`inset(0 ${(r-i)*100}% 0 0)`:`inset(0 0 0 ${(r-i)*100}%)`})}
                  >
                    ${fh(this.getSymbol(i+1))}
                  </div>
                  <div
                    class="rating__partial--filled"
                    style=${ia({clipPath:e?`inset(0 0 0 ${100-(r-i)*100}%)`:`inset(0 ${100-(r-i)*100}% 0 0)`})}
                  >
                    ${fh(this.getSymbol(i+1))}
                  </div>
                </span>
              `:Y`
              <span
                class=${Qe({rating__symbol:!0,"rating__symbol--hover":this.isHovering&&Math.ceil(r)===i+1,"rating__symbol--active":r>=i+1})}
                role="presentation"
              >
                ${fh(this.getSymbol(i+1))}
              </span>
            `)}
        </span>
      </div>
    `}};pn.styles=[et,Xee];pn.dependencies={"sl-icon":Pt};F([Ne(".rating")],pn.prototype,"rating",2);F([Le()],pn.prototype,"hoverValue",2);F([Le()],pn.prototype,"isHovering",2);F([U()],pn.prototype,"label",2);F([U({type:Number})],pn.prototype,"value",2);F([U({type:Number})],pn.prototype,"max",2);F([U({type:Number})],pn.prototype,"precision",2);F([U({type:Boolean,reflect:!0})],pn.prototype,"readonly",2);F([U({type:Boolean,reflect:!0})],pn.prototype,"disabled",2);F([U()],pn.prototype,"getSymbol",2);F([T0({passive:!0})],pn.prototype,"handleTouchMove",1);F([je("hoverValue")],pn.prototype,"handleHoverValueChange",1);F([je("isHovering")],pn.prototype,"handleIsHoveringChange",1);pn.define("sl-rating");var Kee=e=>Y`<!--  -->
		<div class="theme-shoelace widget-rating" part="widget-rating">
			<label for=${e.id}>${e.label}</label>

			<sl-rating
				value=${Se(e.value)}
				precision=${Se(e.step)}
				min=${Se(e.min)}
				max=${Se(e.max)}
				.helpText=${e.helpText}
				.name=${e.id}
				.id=${e.id}
				.required=${e.required}
				@sl-change=${t=>{let r=t.target.value;console.log(r),e.valueChangedCallback?.(r)}}
				.disabled=${e.disabled}
				.readonly=${e.readonly}
			></sl-rating>
		</div>`;var Zee=Ie`
  :host {
    display: block;
  }

  /** The popup */
  .select {
    flex: 1 1 auto;
    display: inline-flex;
    width: 100%;
    position: relative;
    vertical-align: middle;
  }

  .select::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .select[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .select[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  /* Combobox */
  .select__combobox {
    flex: 1;
    display: flex;
    width: 100%;
    min-width: 0;
    position: relative;
    align-items: center;
    justify-content: start;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: pointer;
    transition:
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) border,
      var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  .select__display-input {
    position: relative;
    width: 100%;
    font: inherit;
    border: none;
    background: none;
    color: var(--sl-input-color);
    cursor: inherit;
    overflow: hidden;
    padding: 0;
    margin: 0;
    -webkit-appearance: none;
  }

  .select__display-input::placeholder {
    color: var(--sl-input-placeholder-color);
  }

  .select:not(.select--disabled):hover .select__display-input {
    color: var(--sl-input-color-hover);
  }

  .select__display-input:focus {
    outline: none;
  }

  /* Visually hide the display input when multiple is enabled */
  .select--multiple:not(.select--placeholder-visible) .select__display-input {
    position: absolute;
    z-index: -1;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
  }

  .select__value-input {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: -1;
  }

  .select__tags {
    display: flex;
    flex: 1;
    align-items: center;
    flex-wrap: wrap;
    margin-inline-start: var(--sl-spacing-2x-small);
  }

  .select__tags::slotted(sl-tag) {
    cursor: pointer !important;
  }

  .select--disabled .select__tags,
  .select--disabled .select__tags::slotted(sl-tag) {
    cursor: not-allowed !important;
  }

  /* Standard selects */
  .select--standard .select__combobox {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .select--standard.select--disabled .select__combobox {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    color: var(--sl-input-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
    outline: none;
  }

  .select--standard:not(.select--disabled).select--open .select__combobox,
  .select--standard:not(.select--disabled).select--focused .select__combobox {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  /* Filled selects */
  .select--filled .select__combobox {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .select--filled:hover:not(.select--disabled) .select__combobox {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .select--filled.select--disabled .select__combobox {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .select--filled:not(.select--disabled).select--open .select__combobox,
  .select--filled:not(.select--disabled).select--focused .select__combobox {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
  }

  /* Sizes */
  .select--small .select__combobox {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    min-height: var(--sl-input-height-small);
    padding-block: 0;
    padding-inline: var(--sl-input-spacing-small);
  }

  .select--small .select__clear {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .select--small .select__prefix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .select--small.select--multiple:not(.select--placeholder-visible) .select__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .select--small.select--multiple:not(.select--placeholder-visible) .select__combobox {
    padding-block: 2px;
    padding-inline-start: 0;
  }

  .select--small .select__tags {
    gap: 2px;
  }

  .select--medium .select__combobox {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    min-height: var(--sl-input-height-medium);
    padding-block: 0;
    padding-inline: var(--sl-input-spacing-medium);
  }

  .select--medium .select__clear {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .select--medium .select__prefix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .select--medium.select--multiple:not(.select--placeholder-visible) .select__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .select--medium.select--multiple:not(.select--placeholder-visible) .select__combobox {
    padding-inline-start: 0;
    padding-block: 3px;
  }

  .select--medium .select__tags {
    gap: 3px;
  }

  .select--large .select__combobox {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    min-height: var(--sl-input-height-large);
    padding-block: 0;
    padding-inline: var(--sl-input-spacing-large);
  }

  .select--large .select__clear {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .select--large .select__prefix::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  .select--large.select--multiple:not(.select--placeholder-visible) .select__prefix::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .select--large.select--multiple:not(.select--placeholder-visible) .select__combobox {
    padding-inline-start: 0;
    padding-block: 4px;
  }

  .select--large .select__tags {
    gap: 4px;
  }

  /* Pills */
  .select--pill.select--small .select__combobox {
    border-radius: var(--sl-input-height-small);
  }

  .select--pill.select--medium .select__combobox {
    border-radius: var(--sl-input-height-medium);
  }

  .select--pill.select--large .select__combobox {
    border-radius: var(--sl-input-height-large);
  }

  /* Prefix and Suffix */
  .select__prefix,
  .select__suffix {
    flex: 0;
    display: inline-flex;
    align-items: center;
    color: var(--sl-input-placeholder-color);
  }

  .select__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-small);
  }

  /* Clear button */
  .select__clear {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .select__clear:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .select__clear:focus {
    outline: none;
  }

  /* Expand icon */
  .select__expand-icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    transition: var(--sl-transition-medium) rotate ease;
    rotate: 0;
    margin-inline-start: var(--sl-spacing-small);
  }

  .select--open .select__expand-icon {
    rotate: -180deg;
  }

  /* Listbox */
  .select__listbox {
    display: block;
    position: relative;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    box-shadow: var(--sl-shadow-large);
    background: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    padding-block: var(--sl-spacing-x-small);
    padding-inline: 0;
    overflow: auto;
    overscroll-behavior: none;

    /* Make sure it adheres to the popup's auto size */
    max-width: var(--auto-size-available-width);
    max-height: var(--auto-size-available-height);
  }

  .select__listbox ::slotted(sl-divider) {
    --spacing: var(--sl-spacing-x-small);
  }

  .select__listbox ::slotted(small) {
    display: block;
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    color: var(--sl-color-neutral-500);
    padding-block: var(--sl-spacing-2x-small);
    padding-inline: var(--sl-spacing-x-large);
  }
`;function Y9e(e,t){return{top:Math.round(e.getBoundingClientRect().top-t.getBoundingClientRect().top),left:Math.round(e.getBoundingClientRect().left-t.getBoundingClientRect().left)}}function Jee(e,t,r="vertical",i="smooth"){let n=Y9e(e,t),o=n.top+t.scrollTop,s=n.left+t.scrollLeft,a=t.scrollLeft,l=t.scrollLeft+t.offsetWidth,u=t.scrollTop,c=t.scrollTop+t.offsetHeight;(r==="horizontal"||r==="both")&&(s<a?t.scrollTo({left:s,behavior:i}):s+e.clientWidth>l&&t.scrollTo({left:s-t.offsetWidth+e.clientWidth,behavior:i})),(r==="vertical"||r==="both")&&(o<u?t.scrollTo({top:o,behavior:i}):o+e.clientHeight>c&&t.scrollTo({top:o-t.offsetHeight+e.clientHeight,behavior:i}))}var kt=class extends Ge{constructor(){super(...arguments),this.formControlController=new ji(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new Lr(this,"help-text","label"),this.localize=new Jt(this),this.typeToSelectString="",this.hasFocus=!1,this.displayLabel="",this.selectedOptions=[],this.valueHasChanged=!1,this.name="",this._value="",this.defaultValue="",this.size="medium",this.placeholder="",this.multiple=!1,this.maxOptionsVisible=3,this.disabled=!1,this.clearable=!1,this.open=!1,this.hoist=!1,this.filled=!1,this.pill=!1,this.label="",this.placement="bottom",this.helpText="",this.form="",this.required=!1,this.getTag=e=>Y`
      <sl-tag
        part="tag"
        exportparts="
              base:tag__base,
              content:tag__content,
              remove-button:tag__remove-button,
              remove-button__base:tag__remove-button__base
            "
        ?pill=${this.pill}
        size=${this.size}
        removable
        @sl-remove=${t=>this.handleTagRemove(t,e)}
      >
        ${e.getTextLabel()}
      </sl-tag>
    `,this.handleDocumentFocusIn=e=>{let t=e.composedPath();this&&!t.includes(this)&&this.hide()},this.handleDocumentKeyDown=e=>{let t=e.target,r=t.closest(".select__clear")!==null,i=t.closest("sl-icon-button")!==null;if(!(r||i)){if(e.key==="Escape"&&this.open&&!this.closeWatcher&&(e.preventDefault(),e.stopPropagation(),this.hide(),this.displayInput.focus({preventScroll:!0})),e.key==="Enter"||e.key===" "&&this.typeToSelectString===""){if(e.preventDefault(),e.stopImmediatePropagation(),!this.open){this.show();return}this.currentOption&&!this.currentOption.disabled&&(this.valueHasChanged=!0,this.multiple?this.toggleOptionSelection(this.currentOption):this.setSelectedOptions(this.currentOption),this.updateComplete.then(()=>{this.emit("sl-input"),this.emit("sl-change")}),this.multiple||(this.hide(),this.displayInput.focus({preventScroll:!0})));return}if(["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let n=this.getAllOptions(),o=n.indexOf(this.currentOption),s=Math.max(0,o);if(e.preventDefault(),!this.open&&(this.show(),this.currentOption))return;e.key==="ArrowDown"?(s=o+1,s>n.length-1&&(s=0)):e.key==="ArrowUp"?(s=o-1,s<0&&(s=n.length-1)):e.key==="Home"?s=0:e.key==="End"&&(s=n.length-1),this.setCurrentOption(n[s])}if(e.key&&e.key.length===1||e.key==="Backspace"){let n=this.getAllOptions();if(e.metaKey||e.ctrlKey||e.altKey)return;if(!this.open){if(e.key==="Backspace")return;this.show()}e.stopPropagation(),e.preventDefault(),clearTimeout(this.typeToSelectTimeout),this.typeToSelectTimeout=window.setTimeout(()=>this.typeToSelectString="",1e3),e.key==="Backspace"?this.typeToSelectString=this.typeToSelectString.slice(0,-1):this.typeToSelectString+=e.key.toLowerCase();for(let o of n)if(o.getTextLabel().toLowerCase().startsWith(this.typeToSelectString)){this.setCurrentOption(o);break}}}},this.handleDocumentMouseDown=e=>{let t=e.composedPath();this&&!t.includes(this)&&this.hide()}}get value(){return this._value}set value(e){this.multiple?e=Array.isArray(e)?e:e.split(" "):e=Array.isArray(e)?e.join(" "):e,this._value!==e&&(this.valueHasChanged=!0,this._value=e)}get validity(){return this.valueInput.validity}get validationMessage(){return this.valueInput.validationMessage}connectedCallback(){super.connectedCallback(),setTimeout(()=>{this.handleDefaultSlotChange()}),this.open=!1}addOpenListeners(){var e;document.addEventListener("focusin",this.handleDocumentFocusIn),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown),this.getRootNode()!==document&&this.getRootNode().addEventListener("focusin",this.handleDocumentFocusIn),"CloseWatcher"in window&&((e=this.closeWatcher)==null||e.destroy(),this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>{this.open&&(this.hide(),this.displayInput.focus({preventScroll:!0}))})}removeOpenListeners(){var e;document.removeEventListener("focusin",this.handleDocumentFocusIn),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown),this.getRootNode()!==document&&this.getRootNode().removeEventListener("focusin",this.handleDocumentFocusIn),(e=this.closeWatcher)==null||e.destroy()}handleFocus(){this.hasFocus=!0,this.displayInput.setSelectionRange(0,0),this.emit("sl-focus")}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleLabelClick(){this.displayInput.focus()}handleComboboxMouseDown(e){let r=e.composedPath().some(i=>i instanceof Element&&i.tagName.toLowerCase()==="sl-icon-button");this.disabled||r||(e.preventDefault(),this.displayInput.focus({preventScroll:!0}),this.open=!this.open)}handleComboboxKeyDown(e){e.key!=="Tab"&&(e.stopPropagation(),this.handleDocumentKeyDown(e))}handleClearClick(e){e.stopPropagation(),this.valueHasChanged=!0,this.value!==""&&(this.setSelectedOptions([]),this.displayInput.focus({preventScroll:!0}),this.updateComplete.then(()=>{this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change")}))}handleClearMouseDown(e){e.stopPropagation(),e.preventDefault()}handleOptionClick(e){let r=e.target.closest("sl-option"),i=this.value;r&&!r.disabled&&(this.valueHasChanged=!0,this.multiple?this.toggleOptionSelection(r):this.setSelectedOptions(r),this.updateComplete.then(()=>this.displayInput.focus({preventScroll:!0})),this.value!==i&&this.updateComplete.then(()=>{this.emit("sl-input"),this.emit("sl-change")}),this.multiple||(this.hide(),this.displayInput.focus({preventScroll:!0})))}handleDefaultSlotChange(){customElements.get("sl-option")||customElements.whenDefined("sl-option").then(()=>this.handleDefaultSlotChange());let e=this.getAllOptions(),t=this.valueHasChanged?this.value:this.defaultValue,r=Array.isArray(t)?t:[t],i=[];e.forEach(n=>i.push(n.value)),this.setSelectedOptions(e.filter(n=>r.includes(n.value)))}handleTagRemove(e,t){e.stopPropagation(),this.valueHasChanged=!0,this.disabled||(this.toggleOptionSelection(t,!1),this.updateComplete.then(()=>{this.emit("sl-input"),this.emit("sl-change")}))}getAllOptions(){return[...this.querySelectorAll("sl-option")]}getFirstOption(){return this.querySelector("sl-option")}setCurrentOption(e){this.getAllOptions().forEach(r=>{r.current=!1,r.tabIndex=-1}),e&&(this.currentOption=e,e.current=!0,e.tabIndex=0,e.focus())}setSelectedOptions(e){let t=this.getAllOptions(),r=Array.isArray(e)?e:[e];t.forEach(i=>i.selected=!1),r.length&&r.forEach(i=>i.selected=!0),this.selectionChanged()}toggleOptionSelection(e,t){t===!0||t===!1?e.selected=t:e.selected=!e.selected,this.selectionChanged()}selectionChanged(){var e,t,r;let i=this.getAllOptions();this.selectedOptions=i.filter(o=>o.selected);let n=this.valueHasChanged;if(this.multiple)this.value=this.selectedOptions.map(o=>o.value),this.placeholder&&this.value.length===0?this.displayLabel="":this.displayLabel=this.localize.term("numOptionsSelected",this.selectedOptions.length);else{let o=this.selectedOptions[0];this.value=(e=o?.value)!=null?e:"",this.displayLabel=(r=(t=o?.getTextLabel)==null?void 0:t.call(o))!=null?r:""}this.valueHasChanged=n,this.updateComplete.then(()=>{this.formControlController.updateValidity()})}get tags(){return this.selectedOptions.map((e,t)=>{if(t<this.maxOptionsVisible||this.maxOptionsVisible<=0){let r=this.getTag(e,t);return Y`<div @sl-remove=${i=>this.handleTagRemove(i,e)}>
          ${typeof r=="string"?fh(r):r}
        </div>`}else if(t===this.maxOptionsVisible)return Y`<sl-tag size=${this.size}>+${this.selectedOptions.length-t}</sl-tag>`;return Y``})}handleInvalid(e){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(e)}handleDisabledChange(){this.disabled&&(this.open=!1,this.handleOpenChange())}attributeChangedCallback(e,t,r){if(super.attributeChangedCallback(e,t,r),e==="value"){let i=this.valueHasChanged;this.value=this.defaultValue,this.valueHasChanged=i}}handleValueChange(){if(!this.valueHasChanged){let r=this.valueHasChanged;this.value=this.defaultValue,this.valueHasChanged=r}let e=this.getAllOptions(),t=Array.isArray(this.value)?this.value:[this.value];this.setSelectedOptions(e.filter(r=>t.includes(r.value)))}async handleOpenChange(){if(this.open&&!this.disabled){this.setCurrentOption(this.selectedOptions[0]||this.getFirstOption()),this.emit("sl-show"),this.addOpenListeners(),await Ac(this),this.listbox.hidden=!1,this.popup.active=!0,requestAnimationFrame(()=>{this.setCurrentOption(this.currentOption)});let{keyframes:e,options:t}=kc(this,"select.show",{dir:this.localize.dir()});await Ec(this.popup.popup,e,t),this.currentOption&&Jee(this.currentOption,this.listbox,"vertical","auto"),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await Ac(this);let{keyframes:e,options:t}=kc(this,"select.hide",{dir:this.localize.dir()});await Ec(this.popup.popup,e,t),this.listbox.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}async show(){if(this.open||this.disabled){this.open=!1;return}return this.open=!0,$g(this,"sl-after-show")}async hide(){if(!this.open||this.disabled){this.open=!1;return}return this.open=!1,$g(this,"sl-after-hide")}checkValidity(){return this.valueInput.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.valueInput.reportValidity()}setCustomValidity(e){this.valueInput.setCustomValidity(e),this.formControlController.updateValidity()}focus(e){this.displayInput.focus(e)}blur(){this.displayInput.blur()}render(){let e=this.hasSlotController.test("label"),t=this.hasSlotController.test("help-text"),r=this.label?!0:!!e,i=this.helpText?!0:!!t,n=this.clearable&&!this.disabled&&this.value.length>0,o=this.placeholder&&this.value&&this.value.length<=0;return Y`
      <div
        part="form-control"
        class=${Qe({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":r,"form-control--has-help-text":i})}
      >
        <label
          id="label"
          part="form-control-label"
          class="form-control__label"
          aria-hidden=${r?"false":"true"}
          @click=${this.handleLabelClick}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <sl-popup
            class=${Qe({select:!0,"select--standard":!0,"select--filled":this.filled,"select--pill":this.pill,"select--open":this.open,"select--disabled":this.disabled,"select--multiple":this.multiple,"select--focused":this.hasFocus,"select--placeholder-visible":o,"select--top":this.placement==="top","select--bottom":this.placement==="bottom","select--small":this.size==="small","select--medium":this.size==="medium","select--large":this.size==="large"})}
            placement=${this.placement}
            strategy=${this.hoist?"fixed":"absolute"}
            flip
            shift
            sync="width"
            auto-size="vertical"
            auto-size-padding="10"
          >
            <div
              part="combobox"
              class="select__combobox"
              slot="anchor"
              @keydown=${this.handleComboboxKeyDown}
              @mousedown=${this.handleComboboxMouseDown}
            >
              <slot part="prefix" name="prefix" class="select__prefix"></slot>

              <input
                part="display-input"
                class="select__display-input"
                type="text"
                placeholder=${this.placeholder}
                .disabled=${this.disabled}
                .value=${this.displayLabel}
                autocomplete="off"
                spellcheck="false"
                autocapitalize="off"
                readonly
                aria-controls="listbox"
                aria-expanded=${this.open?"true":"false"}
                aria-haspopup="listbox"
                aria-labelledby="label"
                aria-disabled=${this.disabled?"true":"false"}
                aria-describedby="help-text"
                role="combobox"
                tabindex="0"
                @focus=${this.handleFocus}
                @blur=${this.handleBlur}
              />

              ${this.multiple?Y`<div part="tags" class="select__tags">${this.tags}</div>`:""}

              <input
                class="select__value-input"
                type="text"
                ?disabled=${this.disabled}
                ?required=${this.required}
                .value=${Array.isArray(this.value)?this.value.join(", "):this.value}
                tabindex="-1"
                aria-hidden="true"
                @focus=${()=>this.focus()}
                @invalid=${this.handleInvalid}
              />

              ${n?Y`
                    <button
                      part="clear-button"
                      class="select__clear"
                      type="button"
                      aria-label=${this.localize.term("clearEntry")}
                      @mousedown=${this.handleClearMouseDown}
                      @click=${this.handleClearClick}
                      tabindex="-1"
                    >
                      <slot name="clear-icon">
                        <sl-icon name="x-circle-fill" library="system"></sl-icon>
                      </slot>
                    </button>
                  `:""}

              <slot name="suffix" part="suffix" class="select__suffix"></slot>

              <slot name="expand-icon" part="expand-icon" class="select__expand-icon">
                <sl-icon library="system" name="chevron-down"></sl-icon>
              </slot>
            </div>

            <div
              id="listbox"
              role="listbox"
              aria-expanded=${this.open?"true":"false"}
              aria-multiselectable=${this.multiple?"true":"false"}
              aria-labelledby="label"
              part="listbox"
              class="select__listbox"
              tabindex="-1"
              @mouseup=${this.handleOptionClick}
              @slotchange=${this.handleDefaultSlotChange}
            >
              <slot></slot>
            </div>
          </sl-popup>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${i?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};kt.styles=[et,qo,Zee];kt.dependencies={"sl-icon":Pt,"sl-popup":Kt,"sl-tag":Ql};F([Ne(".select")],kt.prototype,"popup",2);F([Ne(".select__combobox")],kt.prototype,"combobox",2);F([Ne(".select__display-input")],kt.prototype,"displayInput",2);F([Ne(".select__value-input")],kt.prototype,"valueInput",2);F([Ne(".select__listbox")],kt.prototype,"listbox",2);F([Le()],kt.prototype,"hasFocus",2);F([Le()],kt.prototype,"displayLabel",2);F([Le()],kt.prototype,"currentOption",2);F([Le()],kt.prototype,"selectedOptions",2);F([Le()],kt.prototype,"valueHasChanged",2);F([U()],kt.prototype,"name",2);F([Le()],kt.prototype,"value",1);F([U({attribute:"value"})],kt.prototype,"defaultValue",2);F([U({reflect:!0})],kt.prototype,"size",2);F([U()],kt.prototype,"placeholder",2);F([U({type:Boolean,reflect:!0})],kt.prototype,"multiple",2);F([U({attribute:"max-options-visible",type:Number})],kt.prototype,"maxOptionsVisible",2);F([U({type:Boolean,reflect:!0})],kt.prototype,"disabled",2);F([U({type:Boolean})],kt.prototype,"clearable",2);F([U({type:Boolean,reflect:!0})],kt.prototype,"open",2);F([U({type:Boolean})],kt.prototype,"hoist",2);F([U({type:Boolean,reflect:!0})],kt.prototype,"filled",2);F([U({type:Boolean,reflect:!0})],kt.prototype,"pill",2);F([U()],kt.prototype,"label",2);F([U({reflect:!0})],kt.prototype,"placement",2);F([U({attribute:"help-text"})],kt.prototype,"helpText",2);F([U({reflect:!0})],kt.prototype,"form",2);F([U({type:Boolean,reflect:!0})],kt.prototype,"required",2);F([U()],kt.prototype,"getTag",2);F([je("disabled",{waitUntilFirstUpdate:!0})],kt.prototype,"handleDisabledChange",1);F([je(["defaultValue","value"],{waitUntilFirstUpdate:!0})],kt.prototype,"handleValueChange",1);F([je("open",{waitUntilFirstUpdate:!0})],kt.prototype,"handleOpenChange",1);Cc("select.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}});Cc("select.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}});kt.define("sl-select");var Qee=Ie`
  :host {
    display: block;
    user-select: none;
    -webkit-user-select: none;
  }

  :host(:focus) {
    outline: none;
  }

  .option {
    position: relative;
    display: flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-700);
    padding: var(--sl-spacing-x-small) var(--sl-spacing-medium) var(--sl-spacing-x-small) var(--sl-spacing-x-small);
    transition: var(--sl-transition-fast) fill;
    cursor: pointer;
  }

  .option--hover:not(.option--current):not(.option--disabled) {
    background-color: var(--sl-color-neutral-100);
    color: var(--sl-color-neutral-1000);
  }

  .option--current,
  .option--current.option--disabled {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
    opacity: 1;
  }

  .option--disabled {
    outline: none;
    opacity: 0.5;
    cursor: not-allowed;
  }

  .option__label {
    flex: 1 1 auto;
    display: inline-block;
    line-height: var(--sl-line-height-dense);
  }

  .option .option__check {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    visibility: hidden;
    padding-inline-end: var(--sl-spacing-2x-small);
  }

  .option--selected .option__check {
    visibility: visible;
  }

  .option__prefix,
  .option__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .option__prefix::slotted(*) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .option__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  @media (forced-colors: active) {
    :host(:hover:not([aria-disabled='true'])) .option {
      outline: dashed 1px SelectedItem;
      outline-offset: -1px;
    }
  }
`;var vs=class extends Ge{constructor(){super(...arguments),this.localize=new Jt(this),this.isInitialized=!1,this.current=!1,this.selected=!1,this.hasHover=!1,this.value="",this.disabled=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","option"),this.setAttribute("aria-selected","false")}handleDefaultSlotChange(){this.isInitialized?customElements.whenDefined("sl-select").then(()=>{let e=this.closest("sl-select");e&&e.handleDefaultSlotChange()}):this.isInitialized=!0}handleMouseEnter(){this.hasHover=!0}handleMouseLeave(){this.hasHover=!1}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleSelectedChange(){this.setAttribute("aria-selected",this.selected?"true":"false")}handleValueChange(){typeof this.value!="string"&&(this.value=String(this.value)),this.value.includes(" ")&&(console.error("Option values cannot include a space. All spaces have been replaced with underscores.",this),this.value=this.value.replace(/ /g,"_"))}getTextLabel(){let e=this.childNodes,t="";return[...e].forEach(r=>{r.nodeType===Node.ELEMENT_NODE&&(r.hasAttribute("slot")||(t+=r.textContent)),r.nodeType===Node.TEXT_NODE&&(t+=r.textContent)}),t.trim()}render(){return Y`
      <div
        part="base"
        class=${Qe({option:!0,"option--current":this.current,"option--disabled":this.disabled,"option--selected":this.selected,"option--hover":this.hasHover})}
        @mouseenter=${this.handleMouseEnter}
        @mouseleave=${this.handleMouseLeave}
      >
        <sl-icon part="checked-icon" class="option__check" name="check" library="system" aria-hidden="true"></sl-icon>
        <slot part="prefix" name="prefix" class="option__prefix"></slot>
        <slot part="label" class="option__label" @slotchange=${this.handleDefaultSlotChange}></slot>
        <slot part="suffix" name="suffix" class="option__suffix"></slot>
      </div>
    `}};vs.styles=[et,Qee];vs.dependencies={"sl-icon":Pt};F([Ne(".option__label")],vs.prototype,"defaultSlot",2);F([Le()],vs.prototype,"current",2);F([Le()],vs.prototype,"selected",2);F([Le()],vs.prototype,"hasHover",2);F([U({reflect:!0})],vs.prototype,"value",2);F([U({type:Boolean,reflect:!0})],vs.prototype,"disabled",2);F([je("disabled")],vs.prototype,"handleDisabledChange",1);F([je("selected")],vs.prototype,"handleSelectedChange",1);F([je("value")],vs.prototype,"handleValueChange",1);vs.define("sl-option");var ete=e=>Y`
	<sl-select
		value=${Se(e.value)}
		.required=${e.required}
		@sl-change=${t=>{let r=t.target.value;Array.isArray(r)||((e.type==="number"||e.type==="integer")&&(r=Number(r)),e.valueChangedCallback?.(r))}}
		.disabled=${e.disabled}
		label=${Se(e.label)}
		.helpText=${e.helpText??""}
		>${e.enum?.map(t=>Y` <sl-option .value=${String(t)}>
					${t}
				</sl-option>`)}</sl-select
	>
`;var tte=e=>Y`
	<sl-select
		class="theme-shoelace widget-select-multi level-${e.level}"
		part="widget-select-multi"
		.id=${e.id}
		.label=${e.label??""}
		.value=${e.value}
		multiple
		clearable
		.disabled=${e.disabled}
		.helpText=${e.helpText??""}
		@sl-change=${t=>{let{value:r}=t.target;e.valueChangedCallback?.(r)}}
	>
		${e?.enum?.map(t=>Y`<sl-option value=${t}>${t}</sl-option>`)}
	</sl-select>
`;Ut.define("sl-button");var rte=e=>Y`
	<!--  -->
	<div id=${e.id} class="theme-shoelace widget-submit">
		<sl-button type="submit" size="large"
			>${e.label??"Submit"}</sl-button
		>
	</div>
`;var ite=e=>Y`
	<sl-switch
		placeholder=${e.placeholder}
		.checked=${typeof e.value=="boolean"?e.value:!1}
		.name=${e.id}
		.id=${e.id}
		.required=${e.required}
		@sl-input=${t=>{let{checked:r}=t.target;e.valueChangedCallback?.(r)}}
		.disabled=${e.disabled}
		>${e.label}
		${e.helpText?Y`<small> -&nbsp;${e.helpText}</small>`:at}
	</sl-switch>
`;var nte=e=>Y`
	<!-- ${e.pattern} -->
	<sl-input
		.type=${e.inputType}
		.label=${e.label}
		.helpText=${e.helpText}
		placeholder=${e.placeholder}
		value=${Se(e.value)}
		.name=${e.id}
		.id=${e.id}
		.required=${e.required}
		minLength=${Se(e.minLength)}
		maxLength=${Se(e.maxLength)}
		pattern=${Se(e.pattern)}
		@sl-input=${t=>{let{value:r}=t.target;e.valueChangedCallback?.(r)}}
		.disabled=${e.disabled}
		.readonly=${e.readonly}
	>
	</sl-input>
`;var ote=Ie`
  :host {
    display: block;
  }

  .textarea {
    display: grid;
    align-items: center;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    transition:
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) border,
      var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
    cursor: text;
  }

  /* Standard textareas */
  .textarea--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .textarea--standard:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }
  .textarea--standard:hover:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-hover);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    color: var(--sl-input-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-focus);
  }

  .textarea--standard.textarea--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea__control,
  .textarea__size-adjuster {
    grid-area: 1 / 1 / 2 / 2;
  }

  .textarea__size-adjuster {
    visibility: hidden;
    pointer-events: none;
    opacity: 0;
  }

  .textarea--standard.textarea--disabled .textarea__control {
    color: var(--sl-input-color-disabled);
  }

  .textarea--standard.textarea--disabled .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled textareas */
  .textarea--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .textarea--filled:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .textarea--filled.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .textarea--filled.textarea--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea__control {
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: 1.4;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .textarea__control::-webkit-search-decoration,
  .textarea__control::-webkit-search-cancel-button,
  .textarea__control::-webkit-search-results-button,
  .textarea__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
    -webkit-user-select: none;
  }

  .textarea__control:focus {
    outline: none;
  }

  /*
   * Size modifiers
   */

  .textarea--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
  }

  .textarea--small .textarea__control {
    padding: 0.5em var(--sl-input-spacing-small);
  }

  .textarea--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
  }

  .textarea--medium .textarea__control {
    padding: 0.5em var(--sl-input-spacing-medium);
  }

  .textarea--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
  }

  .textarea--large .textarea__control {
    padding: 0.5em var(--sl-input-spacing-large);
  }

  /*
   * Resize types
   */

  .textarea--resize-none .textarea__control {
    resize: none;
  }

  .textarea--resize-vertical .textarea__control {
    resize: vertical;
  }

  .textarea--resize-auto .textarea__control {
    height: auto;
    resize: none;
    overflow-y: hidden;
  }
`;var Ot=class extends Ge{constructor(){super(...arguments),this.formControlController=new ji(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new Lr(this,"help-text","label"),this.hasFocus=!1,this.title="",this.name="",this.value="",this.size="medium",this.filled=!1,this.label="",this.helpText="",this.placeholder="",this.rows=4,this.resize="vertical",this.disabled=!1,this.readonly=!1,this.form="",this.required=!1,this.spellcheck=!0,this.defaultValue=""}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.setTextareaHeight()),this.updateComplete.then(()=>{this.setTextareaHeight(),this.resizeObserver.observe(this.input)})}firstUpdated(){this.formControlController.updateValidity()}disconnectedCallback(){var e;super.disconnectedCallback(),this.input&&((e=this.resizeObserver)==null||e.unobserve(this.input))}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.setTextareaHeight(),this.emit("sl-change")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.emit("sl-input")}handleInvalid(e){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(e)}setTextareaHeight(){this.resize==="auto"?(this.sizeAdjuster.style.height=`${this.input.clientHeight}px`,this.input.style.height="auto",this.input.style.height=`${this.input.scrollHeight}px`):this.input.style.height=""}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleRowsChange(){this.setTextareaHeight()}async handleValueChange(){await this.updateComplete,this.formControlController.updateValidity(),this.setTextareaHeight()}focus(e){this.input.focus(e)}blur(){this.input.blur()}select(){this.input.select()}scrollPosition(e){if(e){typeof e.top=="number"&&(this.input.scrollTop=e.top),typeof e.left=="number"&&(this.input.scrollLeft=e.left);return}return{top:this.input.scrollTop,left:this.input.scrollTop}}setSelectionRange(e,t,r="none"){this.input.setSelectionRange(e,t,r)}setRangeText(e,t,r,i="preserve"){let n=t??this.input.selectionStart,o=r??this.input.selectionEnd;this.input.setRangeText(e,n,o,i),this.value!==this.input.value&&(this.value=this.input.value,this.setTextareaHeight())}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.formControlController.updateValidity()}render(){let e=this.hasSlotController.test("label"),t=this.hasSlotController.test("help-text"),r=this.label?!0:!!e,i=this.helpText?!0:!!t;return Y`
      <div
        part="form-control"
        class=${Qe({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":r,"form-control--has-help-text":i})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${r?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${Qe({textarea:!0,"textarea--small":this.size==="small","textarea--medium":this.size==="medium","textarea--large":this.size==="large","textarea--standard":!this.filled,"textarea--filled":this.filled,"textarea--disabled":this.disabled,"textarea--focused":this.hasFocus,"textarea--empty":!this.value,"textarea--resize-none":this.resize==="none","textarea--resize-vertical":this.resize==="vertical","textarea--resize-auto":this.resize==="auto"})}
          >
            <textarea
              part="textarea"
              id="input"
              class="textarea__control"
              title=${this.title}
              name=${Se(this.name)}
              .value=${ms(this.value)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${Se(this.placeholder)}
              rows=${Se(this.rows)}
              minlength=${Se(this.minlength)}
              maxlength=${Se(this.maxlength)}
              autocapitalize=${Se(this.autocapitalize)}
              autocorrect=${Se(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${Se(this.spellcheck)}
              enterkeyhint=${Se(this.enterkeyhint)}
              inputmode=${Se(this.inputmode)}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            ></textarea>
            <!-- This "adjuster" exists to prevent layout shifting. https://github.com/shoelace-style/shoelace/issues/2180 -->
            <div part="textarea-adjuster" class="textarea__size-adjuster" ?hidden=${this.resize!=="auto"}></div>
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${i?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};Ot.styles=[et,qo,ote];F([Ne(".textarea__control")],Ot.prototype,"input",2);F([Ne(".textarea__size-adjuster")],Ot.prototype,"sizeAdjuster",2);F([Le()],Ot.prototype,"hasFocus",2);F([U()],Ot.prototype,"title",2);F([U()],Ot.prototype,"name",2);F([U()],Ot.prototype,"value",2);F([U({reflect:!0})],Ot.prototype,"size",2);F([U({type:Boolean,reflect:!0})],Ot.prototype,"filled",2);F([U()],Ot.prototype,"label",2);F([U({attribute:"help-text"})],Ot.prototype,"helpText",2);F([U()],Ot.prototype,"placeholder",2);F([U({type:Number})],Ot.prototype,"rows",2);F([U()],Ot.prototype,"resize",2);F([U({type:Boolean,reflect:!0})],Ot.prototype,"disabled",2);F([U({type:Boolean,reflect:!0})],Ot.prototype,"readonly",2);F([U({reflect:!0})],Ot.prototype,"form",2);F([U({type:Boolean,reflect:!0})],Ot.prototype,"required",2);F([U({type:Number})],Ot.prototype,"minlength",2);F([U({type:Number})],Ot.prototype,"maxlength",2);F([U()],Ot.prototype,"autocapitalize",2);F([U()],Ot.prototype,"autocorrect",2);F([U()],Ot.prototype,"autocomplete",2);F([U({type:Boolean})],Ot.prototype,"autofocus",2);F([U()],Ot.prototype,"enterkeyhint",2);F([U({type:Boolean,converter:{fromAttribute:e=>!(!e||e==="false"),toAttribute:e=>e?"true":"false"}})],Ot.prototype,"spellcheck",2);F([U()],Ot.prototype,"inputmode",2);F([Qs()],Ot.prototype,"defaultValue",2);F([je("disabled",{waitUntilFirstUpdate:!0})],Ot.prototype,"handleDisabledChange",1);F([je("rows",{waitUntilFirstUpdate:!0})],Ot.prototype,"handleRowsChange",1);F([je("value",{waitUntilFirstUpdate:!0})],Ot.prototype,"handleValueChange",1);Ot.define("sl-textarea");var ste=e=>Y`
	<!--  -->
	<sl-textarea
		.label=${e.label??""}
		.helpText=${e.helpText??""}
		placeholder=${e.placeholder??""}
		value=${Se(e.value)}
		.name=${e.id}
		.id=${e.id}
		.required=${e.required??!0}
		minLength=${Se(e.minLength)}
		maxLength=${Se(e.maxLength)}
		@sl-input=${t=>{let{value:r}=t.target;e.valueChangedCallback?.(r)}}
		.disabled=${e.disabled}
		.readonly=${e.readonly}
	>
	</sl-textarea>
`;var ate=Ie`@charset "UTF-8";
:host {
  box-sizing: border-box;
  font: 16px var(--sl-font-sans);
  font-weight: var(--sl-font-weight-normal);
  line-height: var(--sl-line-height-normal);
  color: var(--sl-color-neutral-900);
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  --sl-input-focus-ring-color: var(--sl-color-primary-50);
}
:host *,
:host *::before,
:host *::after {
  box-sizing: inherit;
}

::selection {
  color: var(--sl-color-primary-300);
  background-color: var(--sl-color-primary-950);
}

sl-input,
sl-select,
sl-checkbox {
  display: block;
}

/* User invalid styles */
sl-input[data-user-invalid]::part(base),
sl-select[data-user-invalid]::part(combobox),
sl-checkbox[data-user-invalid]::part(control) {
  border-color: var(--sl-color-danger-600);
}

[data-user-invalid]::part(form-control-label),
[data-user-invalid]::part(form-control-help-text),
sl-checkbox[data-user-invalid]::part(label) {
  color: var(--sl-color-danger-700);
}

sl-checkbox[data-user-invalid]::part(control) {
  outline: none;
}

sl-input:focus-within[data-user-invalid]::part(base),
sl-select:focus-within[data-user-invalid]::part(combobox),
sl-checkbox:focus-within[data-user-invalid]::part(control) {
  border-color: var(--sl-color-danger-600);
  box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-color-danger-300);
}

.theme-shoelace.widget-fieldset {
  display: flex;
  flex-direction: column;
  gap: var(--sl-spacing-x-large) 0;
  padding: var(--sl-spacing-medium) var(--sl-spacing-small);
  margin: 0;
  font-weight: var(--sl-font-weight-semibold);
  border: 1px solid var(--sl-color-neutral-50);
  border-radius: var(--sl-border-radius-large);
}
.theme-shoelace.widget-fieldset .widget-fieldset__description {
  font-size: var(--sl-input-help-text-font-size-medium);
  color: var(--sl-input-help-text-color);
}
.theme-shoelace.widget-fieldset .theme-shoelace.widget-fieldset {
  transition: box-shadow var(--sl-transition-medium);
}
.theme-shoelace.widget-fieldset .theme-shoelace.widget-fieldset:hover {
  box-shadow: var(--sl-shadow-medium);
}
.theme-shoelace.widget-fieldset.level-0 legend {
  font-size: var(--sl-font-size-2x-large);
  font-weight: 200;
}
.theme-shoelace.widget-fieldset.level-1 legend {
  font-size: var(--sl-font-size-x-large);
  font-weight: var(--sl-font-weight-light);
}
.theme-shoelace.widget-fieldset.level-2 legend {
  font-size: var(--sl-font-size-large);
  font-weight: var(--sl-font-weight-light);
}
.theme-shoelace.widget-fieldset.level-3 legend {
  font-size: var(--sl-font-size-medium);
  font-weight: var(--sl-font-weight-bold);
}
.theme-shoelace.widget-array .widget-array__card {
  transition: box-shadow var(--sl-transition-medium);
}
.theme-shoelace.widget-array .widget-array__card:hover {
  box-shadow: var(--sl-shadow-medium);
}
.theme-shoelace.widget-array .widget-array__card[data-dropzone] {
  border-radius: var(--sl-border-radius-medium);
  outline: 1px solid var(--sl-color-primary-500);
}
.theme-shoelace.widget-array .widget-array__card[data-dropzone] * {
  pointer-events: none;
}
.theme-shoelace.widget-array sl-card::part(body) {
  padding: var(--sl-spacing-medium) var(--sl-spacing-small);
}
.theme-shoelace.widget-array .widget-array__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  font-size: 0.8em;
  user-select: none;
}
.theme-shoelace.widget-array .widget-array__header sl-tag::part(base) {
  background: var(--sl-color-neutral-100);
}
.theme-shoelace.widget-array .widget-array__handle {
  display: flex;
  flex-grow: 1;
  align-items: center;
  justify-content: space-between;
  height: 2rem;
  padding-left: var(--sl-spacing-2x-small);
  margin: 0 var(--sl-spacing-medium) 0 0;
  font-size: 1.25em;
  color: var(--sl-color-neutral-500);
  cursor: move;
  transition: opacity, var(--sl-transition-fast);
}
.theme-shoelace.widget-array .widget-array__handle:hover {
  color: var(--sl-color-neutral-600);
  background: var(--sl-color-neutral-100);
  border-radius: var(--sl-border-radius-x-large);
  transition: var(--sl-transition-medium);
}
.theme-shoelace.widget-array .widget-array__handle:active {
  user-select: none;
}
.theme-shoelace.widget-array .widget-array__handle .widget-array__handle-grip {
  display: flex;
  flex-grow: 1;
  justify-content: center;
}
.theme-shoelace.widget-array .widget-array__add-zone {
  display: flex;
  padding: var(--sl-spacing-2x-large) var(--sl-spacing-2x-large);
  border: 2px dashed var(--sl-color-gray-100);
  border-radius: var(--sl-border-radius-large);
  box-shadow: var(--sl-shadow-large) inset;
}
.theme-shoelace.widget-array .widget-array__add-zone > sl-button {
  width: 100%;
}

/* Callouts */
.theme-shoelace.widget-callout {
  position: relative;
  padding: 1rem 1.5rem 1rem 2rem;
  margin: var(--sl-spacing-x-large) var(--sl-spacing-large);
  color: var(--sl-color-neutral-800);
  background-color: var(--sl-color-neutral-100);
  border-left: solid 4px var(--sl-color-neutral-500);
  border-radius: var(--sl-border-radius-medium);
}
.theme-shoelace.widget-callout > :first-child {
  margin-top: 0;
}
.theme-shoelace.widget-callout > :last-child {
  margin-bottom: 0;
}
.theme-shoelace.widget-callout.callout--tip {
  color: var(--sl-color-primary-800);
  background-color: var(--sl-color-primary-100);
  border-left-color: var(--sl-color-primary-600);
}
.theme-shoelace.widget-callout::before {
  position: absolute;
  top: calc(50% - 0.8rem);
  left: calc(-0.8rem - 2px);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.6rem;
  height: 1.6rem;
  clip-path: circle(50% at 50% 50%);
  font-family: var(--sl-font-serif);
  font-weight: var(--sl-font-weight-bold);
  color: var(--sl-color-neutral-0);
  content: "";
}
.theme-shoelace.widget-callout.callout--tip::before {
  font-style: italic;
  content: "i";
  background-color: var(--sl-color-primary-600);
}
.theme-shoelace.widget-callout.callout--warning {
  color: var(--sl-color-warning-800);
  background-color: var(--sl-color-warning-100);
  border-left-color: var(--sl-color-warning-600);
}
.theme-shoelace.widget-callout.callout--warning::before {
  content: "!";
  background-color: var(--sl-color-warning-600);
}
.theme-shoelace.widget-callout.callout--danger {
  color: var(--sl-color-danger-800);
  background-color: var(--sl-color-danger-100);
  border-left-color: var(--sl-color-danger-600);
}
.theme-shoelace.widget-callout.callout--danger::before {
  content: "";
  background-color: var(--sl-color-danger-600);
}
.theme-shoelace.widget-callout + .theme-shoelace.widget-callout {
  margin-top: calc(-0.5 * var(--sl-spacing-medium));
}
.theme-shoelace.widget-callout a {
  color: inherit;
}

.theme-shoelace.widget-checkbox-group .help-text {
  font-size: var(--sl-input-help-text-font-size-medium);
  color: var(--sl-input-help-text-color);
}
.theme-shoelace.widget-checkbox-group .widget-checkbox-group__list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--sl-spacing-large) var(--sl-spacing-4x-large);
  justify-content: space-evenly;
  padding: var(--sl-spacing-medium) var(--sl-spacing-x-large);
}

.theme-shoelace.widget-checkbox {
  display: flex;
  flex-wrap: wrap;
  gap: var(--sl-spacing-small);
}
.theme-shoelace.widget-checkbox label {
  cursor: pointer;
}
.theme-shoelace.widget-checkbox .widget-checkbox__description {
  width: 100%;
  font-size: var(--sl-input-help-text-font-size-medium);
  color: var(--sl-input-help-text-color);
}
.theme-shoelace.widget-checkbox .widget-checkbox__label {
  width: 100%;
}

.theme-shoelace.widget-color-picker {
  display: flex;
  flex-wrap: wrap;
  gap: var(--sl-spacing-large);
  align-items: center;
}
.theme-shoelace.widget-color-picker .widget-color-picker__description {
  font-size: var(--sl-input-help-text-font-size-medium);
  color: var(--sl-input-help-text-color);
}

.theme-shoelace.widget-radio-group-boolean::part(form-control-input) {
  display: flex;
  gap: 1rem;
}

.theme-shoelace.widget-radio-group::part(form-control-input) {
  display: flex;
  flex-wrap: wrap;
  gap: var(--sl-spacing-small) var(--sl-spacing-x-large);
}

.theme-shoelace.widget-rating label {
  display: block;
  margin-bottom: 0.5em;
}

.theme-shoelace.widget-submit {
  display: flex;
  justify-content: center;
  margin: var(--sl-spacing-2x-large) 0;
}
`;var k2=class extends Hn{constructor(){super(...arguments),this.widgets=LS,this.styleSheets=[ate]}};customElements.define("jsf-shoelace",k2);var X9e={type:"object",properties:{foo:{type:"string"},bar:{type:"boolean"}}};function lte(e){return!0}var E2=class extends sr{constructor(){super(...arguments);this._dataInLit={foo:"hello"}}render(){return Y`
      <jsf-shoelace
        .schema=${X9e}
        .uiSchema=${{bar:{"ui:widget":"switch"}}}
        .data=${this._dataInLit}
        .dataChangeCallback=${r=>{console.log({"Data from Lit":r}),lte(r)?this._dataInLit=r:console.error("Invalid data!")}}
        .submitCallback=${(r,i)=>{console.log({"Submitted from Lit!":r,valid:i}),lte(r)}}
      ></jsf-shoelace>

      <pre>${JSON.stringify({data:this._dataInLit},null,2)}</pre>
    `}};Lt([Le()],E2.prototype,"_dataInLit",2),E2=Lt([mn("tbx-form")],E2);var PS=class extends gu(sr){render(){return Y`<p>Grid</p>`}};PS=Lt([mn("tbx-grid")],PS);function xO(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var x0=xO();function pte(e){x0=e}var R2={exec:()=>null};function Wt(e,t=""){let r=typeof e=="string"?e:e.source,i={replace:(n,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(po.caret,"$1"),r=r.replace(n,s),i},getRegex:()=>new RegExp(r,t)};return i}var po={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},K9e=/^(?:[ \t]*(?:\n|$))+/,Z9e=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,J9e=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,M2=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Q9e=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,_O=/(?:[*+-]|\d{1,9}[.)])/,mte=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,gte=Wt(mte).replace(/bull/g,_O).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),eAe=Wt(mte).replace(/bull/g,_O).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),wO=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,tAe=/^[^\n]+/,SO=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,rAe=Wt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",SO).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),iAe=Wt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,_O).getRegex(),US="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",CO=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,nAe=Wt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",CO).replace("tag",US).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),vte=Wt(wO).replace("hr",M2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",US).getRegex(),oAe=Wt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",vte).getRegex(),kO={blockquote:oAe,code:Z9e,def:rAe,fences:J9e,heading:Q9e,hr:M2,html:nAe,lheading:gte,list:iAe,newline:K9e,paragraph:vte,table:R2,text:tAe},ute=Wt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",M2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",US).getRegex(),sAe={...kO,lheading:eAe,table:ute,paragraph:Wt(wO).replace("hr",M2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ute).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",US).getRegex()},aAe={...kO,html:Wt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",CO).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:R2,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Wt(wO).replace("hr",M2).replace("heading",` *#{1,6} *[^
]`).replace("lheading",gte).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},lAe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,uAe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,bte=/^( {2,}|\\)\n(?!\s*$)/,cAe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,qS=/[\p{P}\p{S}]/u,EO=/[\s\p{P}\p{S}]/u,yte=/[^\s\p{P}\p{S}]/u,fAe=Wt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,EO).getRegex(),xte=/(?!~)[\p{P}\p{S}]/u,hAe=/(?!~)[\s\p{P}\p{S}]/u,dAe=/(?:[^\s\p{P}\p{S}]|~)/u,pAe=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,_te=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,mAe=Wt(_te,"u").replace(/punct/g,qS).getRegex(),gAe=Wt(_te,"u").replace(/punct/g,xte).getRegex(),wte="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",vAe=Wt(wte,"gu").replace(/notPunctSpace/g,yte).replace(/punctSpace/g,EO).replace(/punct/g,qS).getRegex(),bAe=Wt(wte,"gu").replace(/notPunctSpace/g,dAe).replace(/punctSpace/g,hAe).replace(/punct/g,xte).getRegex(),yAe=Wt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,yte).replace(/punctSpace/g,EO).replace(/punct/g,qS).getRegex(),xAe=Wt(/\\(punct)/,"gu").replace(/punct/g,qS).getRegex(),_Ae=Wt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),wAe=Wt(CO).replace("(?:-->|$)","-->").getRegex(),SAe=Wt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",wAe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),BS=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,CAe=Wt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",BS).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ste=Wt(/^!?\[(label)\]\[(ref)\]/).replace("label",BS).replace("ref",SO).getRegex(),Cte=Wt(/^!?\[(ref)\](?:\[\])?/).replace("ref",SO).getRegex(),kAe=Wt("reflink|nolink(?!\\()","g").replace("reflink",Ste).replace("nolink",Cte).getRegex(),AO={_backpedal:R2,anyPunctuation:xAe,autolink:_Ae,blockSkip:pAe,br:bte,code:uAe,del:R2,emStrongLDelim:mAe,emStrongRDelimAst:vAe,emStrongRDelimUnd:yAe,escape:lAe,link:CAe,nolink:Cte,punctuation:fAe,reflink:Ste,reflinkSearch:kAe,tag:SAe,text:cAe,url:R2},EAe={...AO,link:Wt(/^!?\[(label)\]\((.*?)\)/).replace("label",BS).getRegex(),reflink:Wt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",BS).getRegex()},vO={...AO,emStrongRDelimAst:bAe,emStrongLDelim:gAe,url:Wt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},AAe={...vO,br:Wt(bte).replace("{2,}","*").getRegex(),text:Wt(vO.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},IS={normal:kO,gfm:sAe,pedantic:aAe},A2={normal:AO,gfm:vO,breaks:AAe,pedantic:EAe},TAe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cte=e=>TAe[e];function ru(e,t){if(t){if(po.escapeTest.test(e))return e.replace(po.escapeReplace,cte)}else if(po.escapeTestNoEncode.test(e))return e.replace(po.escapeReplaceNoEncode,cte);return e}function fte(e){try{e=encodeURI(e).replace(po.percentDecode,"%")}catch{return null}return e}function hte(e,t){let r=e.replace(po.findPipe,(o,s,a)=>{let l=!1,u=s;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),i=r.split(po.splitPipe),n=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(po.slashPipe,"|");return i}function T2(e,t,r){let i=e.length;if(i===0)return"";let n=0;for(;n<i;){let o=e.charAt(i-n-1);if(o===t&&!r)n++;else if(o!==t&&r)n++;else break}return e.slice(0,i-n)}function DAe(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return r>0?-2:-1}function dte(e,t,r,i,n){let o=t.href,s=t.title||null,a=e[1].replace(n.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:o,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,l}function RAe(e,t,r){let i=e.match(r.other.indentCodeCompensation);if(i===null)return t;let n=i[1];return t.split(`
`).map(o=>{let s=o.match(r.other.beginningSpace);if(s===null)return o;let[a]=s;return a.length>=n.length?o.slice(n.length):o}).join(`
`)}var zS=class{constructor(e){Zt(this,"options");Zt(this,"rules");Zt(this,"lexer");this.options=e||x0}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:T2(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=RAe(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){let i=T2(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:T2(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=T2(t[0],`
`).split(`
`),i="",n="",o=[];for(;r.length>0;){let s=!1,a=[],l;for(l=0;l<r.length;l++)if(this.rules.other.blockquoteStart.test(r[l]))a.push(r[l]),s=!0;else if(!s)a.push(r[l]);else break;r=r.slice(l);let u=a.join(`
`),c=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${u}`:u,n=n?`${n}
${c}`:c;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,o,!0),this.lexer.state.top=f,r.length===0)break;let h=o.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let p=h,d=p.raw+`
`+r.join(`
`),m=this.blockquote(d);o[o.length-1]=m,i=i.substring(0,i.length-p.raw.length)+m.raw,n=n.substring(0,n.length-p.text.length)+m.text;break}else if(h?.type==="list"){let p=h,d=p.raw+`
`+r.join(`
`),m=this.list(d);o[o.length-1]=m,i=i.substring(0,i.length-h.raw.length)+m.raw,n=n.substring(0,n.length-p.raw.length)+m.raw,r=d.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,n={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=this.rules.other.listItemRegex(r),s=!1;for(;e;){let l=!1,u="",c="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,v=>" ".repeat(3*v.length)),h=e.split(`
`,1)[0],p=!f.trim(),d=0;if(this.options.pedantic?(d=2,c=f.trimStart()):p?d=t[1].length+1:(d=t[2].search(this.rules.other.nonSpaceChar),d=d>4?1:d,c=f.slice(d),d+=t[1].length),p&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,e=e.substring(h.length+1),l=!0),!l){let v=this.rules.other.nextBulletRegex(d),b=this.rules.other.hrRegex(d),y=this.rules.other.fencesBeginRegex(d),x=this.rules.other.headingBeginRegex(d),S=this.rules.other.htmlBeginRegex(d);for(;e;){let _=e.split(`
`,1)[0],w;if(h=_,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),w=h):w=h.replace(this.rules.other.tabCharGlobal,"    "),y.test(h)||x.test(h)||S.test(h)||v.test(h)||b.test(h))break;if(w.search(this.rules.other.nonSpaceChar)>=d||!h.trim())c+=`
`+w.slice(d);else{if(p||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||y.test(f)||x.test(f)||b.test(f))break;c+=`
`+h}!p&&!h.trim()&&(p=!0),u+=_+`
`,e=e.substring(_.length+1),f=w.slice(d)}}n.loose||(s?n.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(s=!0));let m=null,g;this.options.gfm&&(m=this.rules.other.listIsTask.exec(c),m&&(g=m[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:u,task:!!m,checked:g,loose:!1,text:c,tokens:[]}),n.raw+=u}let a=n.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let l=0;l<n.items.length;l++)if(this.lexer.state.top=!1,n.items[l].tokens=this.lexer.blockTokens(n.items[l].text,[]),!n.loose){let u=n.items[l].tokens.filter(f=>f.type==="space"),c=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));n.loose=c}if(n.loose)for(let l=0;l<n.items.length;l++)n.items[l].loose=!0;return n}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=hte(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let s of i)this.rules.other.tableAlignRight.test(s)?o.align.push("right"):this.rules.other.tableAlignCenter.test(s)?o.align.push("center"):this.rules.other.tableAlignLeft.test(s)?o.align.push("left"):o.align.push(null);for(let s=0;s<r.length;s++)o.header.push({text:r[s],tokens:this.lexer.inline(r[s]),header:!0,align:o.align[s]});for(let s of n)o.rows.push(hte(s,o.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:o.align[l]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let o=T2(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=DAe(t[2],"()");if(o===-2)return;if(o>-1){let s=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let i=t[2],n="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],n=o[3])}else n=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),dte(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=t[i.toLowerCase()];if(!n){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return dte(r,n,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let n=[...i[0]].length-1,o,s,a=n,l=0,u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(i=u.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(s=[...o].length,i[3]||i[4]){a+=s;continue}else if((i[5]||i[6])&&n%3&&!((n+s)%3)){l+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+l);let c=[...i[0]][0].length,f=e.slice(0,n+i.index+c+s);if(Math.min(n,s)%2){let p=f.slice(1,-1);return{type:"em",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}let h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),n=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&n&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=t[1],i="mailto:"+r):(r=t[1],i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=t[0],i="mailto:"+r;else{let n;do n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(n!==t[0]);r=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},Tc=class bO{constructor(t){Zt(this,"tokens");Zt(this,"options");Zt(this,"state");Zt(this,"tokenizer");Zt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||x0,this.options.tokenizer=this.options.tokenizer||new zS,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:po,block:IS.normal,inline:A2.normal};this.options.pedantic?(r.block=IS.pedantic,r.inline=A2.pedantic):this.options.gfm&&(r.block=IS.gfm,this.options.breaks?r.inline=A2.breaks:r.inline=A2.gfm),this.tokenizer.rules=r}static get rules(){return{block:IS,inline:A2}}static lex(t,r){return new bO(r).lex(t)}static lexInline(t,r){return new bO(r).inlineTokens(t)}lex(t){t=t.replace(po.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],i=!1){for(this.options.pedantic&&(t=t.replace(po.tabCharGlobal,"    ").replace(po.spaceLine,""));t;){let n;if(this.options.extensions?.block?.some(s=>(n=s.call({lexer:this},t,r))?(t=t.substring(n.raw.length),r.push(n),!0):!1))continue;if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length);let s=r.at(-1);n.raw.length===1&&s!==void 0?s.raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length);let s=r.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+n.raw,s.text+=`
`+n.text,this.inlineQueue.at(-1).src=s.text):r.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length);let s=r.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+n.raw,s.text+=`
`+n.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},r.push(n));continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),r.push(n);continue}let o=t;if(this.options.extensions?.startBlock){let s=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(o=t.substring(0,s+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o))){let s=r.at(-1);i&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):r.push(n),i=o.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length);let s=r.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+n.raw,s.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):r.push(n);continue}if(t){let s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let i=t,n=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)a.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,n.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let o=!1,s="";for(;t;){o||(s=""),o=!1;let a;if(this.options.extensions?.inline?.some(u=>(a=u.call({lexer:this},t,r))?(t=t.substring(a.raw.length),r.push(a),!0):!1))continue;if(a=this.tokenizer.escape(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.tag(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.link(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(a.raw.length);let u=r.at(-1);a.type==="text"&&u?.type==="text"?(u.raw+=a.raw,u.text+=a.text):r.push(a);continue}if(a=this.tokenizer.emStrong(t,i,s)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.codespan(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.br(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.del(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.autolink(t)){t=t.substring(a.raw.length),r.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(t))){t=t.substring(a.raw.length),r.push(a);continue}let l=t;if(this.options.extensions?.startInline){let u=1/0,c=t.slice(1),f;this.options.extensions.startInline.forEach(h=>{f=h.call({lexer:this},c),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(l=t.substring(0,u+1))}if(a=this.tokenizer.inlineText(l)){t=t.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(s=a.raw.slice(-1)),o=!0;let u=r.at(-1);u?.type==="text"?(u.raw+=a.raw,u.text+=a.text):r.push(a);continue}if(t){let u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return r}},HS=class{constructor(e){Zt(this,"options");Zt(this,"parser");this.options=e||x0}space(e){return""}code({text:e,lang:t,escaped:r}){let i=(t||"").match(po.notSpaceStart)?.[0],n=e.replace(po.endingNewline,"")+`
`;return i?'<pre><code class="language-'+ru(i)+'">'+(r?n:ru(n,!0))+`</code></pre>
`:"<pre><code>"+(r?n:ru(n,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,i="";for(let s=0;s<e.items.length;s++){let a=e.items[s];i+=this.listitem(a)}let n=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+n+o+`>
`+i+"</"+n+`>
`}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+ru(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let n=0;n<e.header.length;n++)r+=this.tablecell(e.header[n]);t+=this.tablerow({text:r});let i="";for(let n=0;n<e.rows.length;n++){let o=e.rows[n];r="";for(let s=0;s<o.length;s++)r+=this.tablecell(o[s]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${ru(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let i=this.parser.parseInline(r),n=fte(e);if(n===null)return i;e=n;let o='<a href="'+e+'"';return t&&(o+=' title="'+ru(t)+'"'),o+=">"+i+"</a>",o}image({href:e,title:t,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let n=fte(e);if(n===null)return ru(r);e=n;let o=`<img src="${e}" alt="${r}"`;return t&&(o+=` title="${ru(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:ru(e.text)}},TO=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Dc=class yO{constructor(t){Zt(this,"options");Zt(this,"renderer");Zt(this,"textRenderer");this.options=t||x0,this.options.renderer=this.options.renderer||new HS,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new TO}static parse(t,r){return new yO(r).parse(t)}static parseInline(t,r){return new yO(r).parseInline(t)}parse(t,r=!0){let i="";for(let n=0;n<t.length;n++){let o=t[n];if(this.options.extensions?.renderers?.[o.type]){let a=o,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){i+=l||"";continue}}let s=o;switch(s.type){case"space":{i+=this.renderer.space(s);continue}case"hr":{i+=this.renderer.hr(s);continue}case"heading":{i+=this.renderer.heading(s);continue}case"code":{i+=this.renderer.code(s);continue}case"table":{i+=this.renderer.table(s);continue}case"blockquote":{i+=this.renderer.blockquote(s);continue}case"list":{i+=this.renderer.list(s);continue}case"html":{i+=this.renderer.html(s);continue}case"def":{i+=this.renderer.def(s);continue}case"paragraph":{i+=this.renderer.paragraph(s);continue}case"text":{let a=s,l=this.renderer.text(a);for(;n+1<t.length&&t[n+1].type==="text";)a=t[++n],l+=`
`+this.renderer.text(a);r?i+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):i+=l;continue}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(t,r=this.renderer){let i="";for(let n=0;n<t.length;n++){let o=t[n];if(this.options.extensions?.renderers?.[o.type]){let a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){i+=a||"";continue}}let s=o;switch(s.type){case"escape":{i+=r.text(s);break}case"html":{i+=r.html(s);break}case"link":{i+=r.link(s);break}case"image":{i+=r.image(s);break}case"strong":{i+=r.strong(s);break}case"em":{i+=r.em(s);break}case"codespan":{i+=r.codespan(s);break}case"br":{i+=r.br(s);break}case"del":{i+=r.del(s);break}case"text":{i+=r.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},NS,D2=(NS=class{constructor(e){Zt(this,"options");Zt(this,"block");this.options=e||x0}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Tc.lex:Tc.lexInline}provideParser(){return this.block?Dc.parse:Dc.parseInline}},Zt(NS,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Zt(NS,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),NS),MAe=class{constructor(...e){Zt(this,"defaults",xO());Zt(this,"options",this.setOptions);Zt(this,"parse",this.parseMarkdown(!0));Zt(this,"parseInline",this.parseMarkdown(!1));Zt(this,"Parser",Dc);Zt(this,"Renderer",HS);Zt(this,"TextRenderer",TO);Zt(this,"Lexer",Tc);Zt(this,"Tokenizer",zS);Zt(this,"Hooks",D2);this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let n=i;for(let o of n.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of n.rows)for(let s of o)r=r.concat(this.walkTokens(s.tokens,t));break}case"list":{let n=i;r=r.concat(this.walkTokens(n.items,t));break}default:{let n=i;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(o=>{let s=n[o].flat(1/0);r=r.concat(this.walkTokens(s,t))}):n.tokens&&(r=r.concat(this.walkTokens(n.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let o=t.renderers[n.name];o?t.renderers[n.name]=function(...s){let a=n.renderer.apply(this,s);return a===!1&&(a=o.apply(this,s)),a}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[n.level];o?o.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),i.extensions=t),r.renderer){let n=this.defaults.renderer||new HS(this.defaults);for(let o in r.renderer){if(!(o in n))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let s=o,a=r.renderer[s],l=n[s];n[s]=(...u)=>{let c=a.apply(n,u);return c===!1&&(c=l.apply(n,u)),c||""}}i.renderer=n}if(r.tokenizer){let n=this.defaults.tokenizer||new zS(this.defaults);for(let o in r.tokenizer){if(!(o in n))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let s=o,a=r.tokenizer[s],l=n[s];n[s]=(...u)=>{let c=a.apply(n,u);return c===!1&&(c=l.apply(n,u)),c}}i.tokenizer=n}if(r.hooks){let n=this.defaults.hooks||new D2;for(let o in r.hooks){if(!(o in n))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let s=o,a=r.hooks[s],l=n[s];D2.passThroughHooks.has(o)?n[s]=u=>{if(this.defaults.async&&D2.passThroughHooksRespectAsync.has(o))return Promise.resolve(a.call(n,u)).then(f=>l.call(n,f));let c=a.call(n,u);return l.call(n,c)}:n[s]=(...u)=>{let c=a.apply(n,u);return c===!1&&(c=l.apply(n,u)),c}}i.hooks=n}if(r.walkTokens){let n=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(s){let a=[];return a.push(o.call(this,s)),n&&(a=a.concat(n.call(this,s))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Tc.lex(e,t??this.defaults)}parser(e,t){return Dc.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{let i={...r},n={...this.defaults,...i},o=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=e);let s=n.hooks?n.hooks.provideLexer():e?Tc.lex:Tc.lexInline,a=n.hooks?n.hooks.provideParser():e?Dc.parse:Dc.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(t):t).then(l=>s(l,n)).then(l=>n.hooks?n.hooks.processAllTokens(l):l).then(l=>n.walkTokens?Promise.all(this.walkTokens(l,n.walkTokens)).then(()=>l):l).then(l=>a(l,n)).then(l=>n.hooks?n.hooks.postprocess(l):l).catch(o);try{n.hooks&&(t=n.hooks.preprocess(t));let l=s(t,n);n.hooks&&(l=n.hooks.processAllTokens(l)),n.walkTokens&&this.walkTokens(l,n.walkTokens);let u=a(l,n);return n.hooks&&(u=n.hooks.postprocess(u)),u}catch(l){return o(l)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+ru(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},y0=new MAe;function qt(e,t){return y0.parse(e,t)}qt.options=qt.setOptions=function(e){return y0.setOptions(e),qt.defaults=y0.defaults,pte(qt.defaults),qt};qt.getDefaults=xO;qt.defaults=x0;qt.use=function(...e){return y0.use(...e),qt.defaults=y0.defaults,pte(qt.defaults),qt};qt.walkTokens=function(e,t){return y0.walkTokens(e,t)};qt.parseInline=y0.parseInline;qt.Parser=Dc;qt.parser=Dc.parse;qt.Renderer=HS;qt.TextRenderer=TO;qt.Lexer=Tc;qt.lexer=Tc.lex;qt.Tokenizer=zS;qt.Hooks=D2;qt.parse=qt;var g$t=qt.options,v$t=qt.setOptions,b$t=qt.use,y$t=qt.walkTokens,x$t=qt.parseInline;var _$t=Dc.parse,w$t=Tc.lex;var bs=class e{constructor(t,r,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=i}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new e(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}},aa=class e{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new e(r,bs.range(this,t))}},Ce=class e{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var i="KaTeX parse error: "+t,n,o,s=r&&r.loc;if(s&&s.start<=s.end){var a=s.lexer.input;n=s.start,o=s.end,n===a.length?i+=" at end of input: ":i+=" at position "+(n+1)+": ";var l=a.slice(n,o).replace(/[^]/g,"$&\u0332"),u;n>15?u="\u2026"+a.slice(n-15,n):u=a.slice(0,n);var c;o+15<a.length?c=a.slice(o,o+15)+"\u2026":c=a.slice(o),i+=u+l+c}var f=new Error(i);return f.name="ParseError",f.__proto__=e.prototype,f.position=n,n!=null&&o!=null&&(f.length=o-n),f.rawMessage=t,f}};Ce.prototype.__proto__=Error.prototype;var FAe=function(t,r){return t.indexOf(r)!==-1},OAe=function(t,r){return t===void 0?r:t},$Ae=/([A-Z])/g,LAe=function(t){return t.replace($Ae,"-$1").toLowerCase()},PAe={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},IAe=/[&><"']/g;function NAe(e){return String(e).replace(IAe,t=>PAe[t])}var rre=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},BAe=function(t){var r=rre(t);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},zAe=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},HAe=function(t){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Je={contains:FAe,deflt:OAe,escape:NAe,hyphenate:LAe,getBaseElem:rre,isCharacterBox:BAe,protocolFromUrl:HAe},t7={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function UAe(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}var P2=class{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var r in t7)if(t7.hasOwnProperty(r)){var i=t7[r];this[r]=t[r]!==void 0?i.processor?i.processor(t[r]):t[r]:UAe(i)}}reportNonstrict(t,r,i){var n=this.strict;if(typeof n=="function"&&(n=n(t,r,i)),!(!n||n==="ignore")){if(n===!0||n==="error")throw new Ce("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+t+"]"),i);n==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+n+"': "+r+" ["+t+"]"))}}useStrictBehavior(t,r,i){var n=this.strict;if(typeof n=="function")try{n=n(t,r,i)}catch{n="error"}return!n||n==="ignore"?!1:n===!0||n==="error"?!0:n==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+n+"': "+r+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var r=Je.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}var i=typeof this.trust=="function"?this.trust(t):this.trust;return!!i}},iu=class{constructor(t,r,i){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=r,this.cramped=i}sup(){return nu[qAe[this.id]]}sub(){return nu[jAe[this.id]]}fracNum(){return nu[WAe[this.id]]}fracDen(){return nu[VAe[this.id]]}cramp(){return nu[GAe[this.id]]}text(){return nu[YAe[this.id]]}isTight(){return this.size>=2}},e$=0,i7=1,Pg=2,Fc=3,I2=4,oa=5,Ig=6,go=7,nu=[new iu(e$,0,!1),new iu(i7,0,!0),new iu(Pg,1,!1),new iu(Fc,1,!0),new iu(I2,2,!1),new iu(oa,2,!0),new iu(Ig,3,!1),new iu(go,3,!0)],qAe=[I2,oa,I2,oa,Ig,go,Ig,go],jAe=[oa,oa,oa,oa,go,go,go,go],WAe=[Pg,Fc,I2,oa,Ig,go,Ig,go],VAe=[Fc,Fc,oa,oa,go,go,go,go],GAe=[i7,i7,Fc,Fc,oa,oa,go,go],YAe=[e$,i7,Pg,Fc,Pg,Fc,Pg,Fc],rt={DISPLAY:nu[e$],TEXT:nu[Pg],SCRIPT:nu[I2],SCRIPTSCRIPT:nu[Ig]},UO=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function XAe(e){for(var t=0;t<UO.length;t++)for(var r=UO[t],i=0;i<r.blocks.length;i++){var n=r.blocks[i];if(e>=n[0]&&e<=n[1])return r.name}return null}var r7=[];UO.forEach(e=>e.blocks.forEach(t=>r7.push(...t)));function ire(e){for(var t=0;t<r7.length;t+=2)if(e>=r7[t]&&e<=r7[t+1])return!0;return!1}var Lg=80,KAe=function(t,r){return"M95,"+(622+t+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},ZAe=function(t,r){return"M263,"+(601+t+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},JAe=function(t,r){return"M983 "+(10+t+r)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},QAe=function(t,r){return"M424,"+(2398+t+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+r+`
h400000v`+(40+t)+"h-400000z"},eTe=function(t,r){return"M473,"+(2713+t+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+r+"h400000v"+(40+t)+"H1017.7z"},tTe=function(t){var r=t/2;return"M400000 "+t+" H0 L"+r+" 0 l65 45 L145 "+(t-80)+" H400000z"},rTe=function(t,r,i){var n=i-54-r-t;return"M702 "+(t+r)+"H400000"+(40+t)+`
H742v`+n+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+t)+"H742z"},iTe=function(t,r,i){r=1e3*r;var n="";switch(t){case"sqrtMain":n=KAe(r,Lg);break;case"sqrtSize1":n=ZAe(r,Lg);break;case"sqrtSize2":n=JAe(r,Lg);break;case"sqrtSize3":n=QAe(r,Lg);break;case"sqrtSize4":n=eTe(r,Lg);break;case"sqrtTall":n=rTe(r,Lg,i)}return n},nTe=function(t,r){switch(t){case"\u239C":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"\u2223":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"\u2225":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"\u239F":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"\u23A2":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"\u23A5":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"\u23AA":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"\u23D0":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"\u2016":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},kte={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},oTe=function(t,r){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}},w0=class{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return Je.contains(this.classes,t)}toNode(){for(var t=document.createDocumentFragment(),r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){for(var t="",r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){var t=r=>r.toText();return this.children.map(t).join("")}},ou={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},jS={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Ete={\u00C5:"A",\u00D0:"D",\u00DE:"o",\u00E5:"a",\u00F0:"d",\u00FE:"o",\u0410:"A",\u0411:"B",\u0412:"B",\u0413:"F",\u0414:"A",\u0415:"E",\u0416:"K",\u0417:"3",\u0418:"N",\u0419:"N",\u041A:"K",\u041B:"N",\u041C:"M",\u041D:"H",\u041E:"O",\u041F:"N",\u0420:"P",\u0421:"C",\u0422:"T",\u0423:"y",\u0424:"O",\u0425:"X",\u0426:"U",\u0427:"h",\u0428:"W",\u0429:"W",\u042A:"B",\u042B:"X",\u042C:"B",\u042D:"3",\u042E:"X",\u042F:"R",\u0430:"a",\u0431:"b",\u0432:"a",\u0433:"r",\u0434:"y",\u0435:"e",\u0436:"m",\u0437:"e",\u0438:"n",\u0439:"n",\u043A:"n",\u043B:"n",\u043C:"m",\u043D:"n",\u043E:"o",\u043F:"n",\u0440:"p",\u0441:"c",\u0442:"o",\u0443:"y",\u0444:"b",\u0445:"x",\u0446:"n",\u0447:"n",\u0448:"w",\u0449:"w",\u044A:"a",\u044B:"m",\u044C:"a",\u044D:"e",\u044E:"m",\u044F:"r"};function sTe(e,t){ou[e]=t}function t$(e,t,r){if(!ou[t])throw new Error("Font metrics not found for font: "+t+".");var i=e.charCodeAt(0),n=ou[t][i];if(!n&&e[0]in Ete&&(i=Ete[e[0]].charCodeAt(0),n=ou[t][i]),!n&&r==="text"&&ire(i)&&(n=ou[t][77]),n)return{depth:n[0],height:n[1],italic:n[2],skew:n[3],width:n[4]}}var DO={};function aTe(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!DO[t]){var r=DO[t]={cssEmPerMu:jS.quad[t]/18};for(var i in jS)jS.hasOwnProperty(i)&&(r[i]=jS[i][t])}return DO[t]}var lTe=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Ate=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Tte=function(t,r){return r.size<2?t:lTe[t-1][r.size-1]},n7=class e{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||e.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=Ate[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return new e(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:Tte(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:Ate[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=Tte(e.BASESIZE,t);return this.size===r&&this.textSize===e.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==e.BASESIZE?["sizing","reset-size"+this.size,"size"+e.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=aTe(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}};n7.BASESIZE=6;var qO={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},uTe={ex:!0,em:!0,mu:!0},nre=function(t){return typeof t!="string"&&(t=t.unit),t in qO||t in uTe||t==="ex"},$r=function(t,r){var i;if(t.unit in qO)i=qO[t.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(t.unit==="mu")i=r.fontMetrics().cssEmPerMu;else{var n;if(r.style.isTight()?n=r.havingStyle(r.style.text()):n=r,t.unit==="ex")i=n.fontMetrics().xHeight;else if(t.unit==="em")i=n.fontMetrics().quad;else throw new Ce("Invalid unit: '"+t.unit+"'");n!==r&&(i*=n.sizeMultiplier/r.sizeMultiplier)}return Math.min(t.number*i,r.maxSize)},Te=function(t){return+t.toFixed(4)+"em"},ph=function(t){return t.filter(r=>r).join(" ")},ore=function(t,r,i){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=i||{},r){r.style.isTight()&&this.classes.push("mtight");var n=r.getColor();n&&(this.style.color=n)}},sre=function(t){var r=document.createElement(t);r.className=ph(this.classes);for(var i in this.style)this.style.hasOwnProperty(i)&&(r.style[i]=this.style[i]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&r.setAttribute(n,this.attributes[n]);for(var o=0;o<this.children.length;o++)r.appendChild(this.children[o].toNode());return r},cTe=/[\s"'>/=\x00-\x1f]/,are=function(t){var r="<"+t;this.classes.length&&(r+=' class="'+Je.escape(ph(this.classes))+'"');var i="";for(var n in this.style)this.style.hasOwnProperty(n)&&(i+=Je.hyphenate(n)+":"+this.style[n]+";");i&&(r+=' style="'+Je.escape(i)+'"');for(var o in this.attributes)if(this.attributes.hasOwnProperty(o)){if(cTe.test(o))throw new Ce("Invalid attribute name '"+o+"'");r+=" "+o+'="'+Je.escape(this.attributes[o])+'"'}r+=">";for(var s=0;s<this.children.length;s++)r+=this.children[s].toMarkup();return r+="</"+t+">",r},S0=class{constructor(t,r,i,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,ore.call(this,t,i,n),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return Je.contains(this.classes,t)}toNode(){return sre.call(this,"span")}toMarkup(){return are.call(this,"span")}},N2=class{constructor(t,r,i,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,ore.call(this,r,n),this.children=i||[],this.setAttribute("href",t)}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return Je.contains(this.classes,t)}toNode(){return sre.call(this,"a")}toMarkup(){return are.call(this,"a")}},jO=class{constructor(t,r,i){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=t,this.classes=["mord"],this.style=i}hasClass(t){return Je.contains(this.classes,t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);return t}toMarkup(){var t='<img src="'+Je.escape(this.src)+'"'+(' alt="'+Je.escape(this.alt)+'"'),r="";for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=Je.hyphenate(i)+":"+this.style[i]+";");return r&&(t+=' style="'+Je.escape(r)+'"'),t+="'/>",t}},fTe={\u00EE:"\u0131\u0302",\u00EF:"\u0131\u0308",\u00ED:"\u0131\u0301",\u00EC:"\u0131\u0300"},Go=class{constructor(t,r,i,n,o,s,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=r||0,this.depth=i||0,this.italic=n||0,this.skew=o||0,this.width=s||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var u=XAe(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=fTe[this.text])}hasClass(t){return Je.contains(this.classes,t)}toNode(){var t=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=Te(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=ph(this.classes));for(var i in this.style)this.style.hasOwnProperty(i)&&(r=r||document.createElement("span"),r.style[i]=this.style[i]);return r?(r.appendChild(t),r):t}toMarkup(){var t=!1,r="<span";this.classes.length&&(t=!0,r+=' class="',r+=Je.escape(ph(this.classes)),r+='"');var i="";this.italic>0&&(i+="margin-right:"+this.italic+"em;");for(var n in this.style)this.style.hasOwnProperty(n)&&(i+=Je.hyphenate(n)+":"+this.style[n]+";");i&&(t=!0,r+=' style="'+Je.escape(i)+'"');var o=Je.escape(this.text);return t?(r+=">",r+=o,r+="</span>",r):o}},ol=class{constructor(t,r){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=r||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&r.setAttribute(i,this.attributes[i]);for(var n=0;n<this.children.length;n++)r.appendChild(this.children[n].toNode());return r}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Je.escape(this.attributes[r])+'"');t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</svg>",t}},su=class{constructor(t,r){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=r}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",kte[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Je.escape(this.alternate)+'"/>':'<path d="'+Je.escape(kte[this.pathName])+'"/>'}},B2=class{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"line");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&r.setAttribute(i,this.attributes[i]);return r}toMarkup(){var t="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Je.escape(this.attributes[r])+'"');return t+="/>",t}};function Dte(e){if(e instanceof Go)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function hTe(e){if(e instanceof S0)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var dTe={bin:1,close:1,inner:1,open:1,punct:1,rel:1},pTe={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},hr={math:{},text:{}};function C(e,t,r,i,n,o){hr[e][n]={font:t,group:r,replace:i},o&&i&&(hr[e][i]=hr[e][n])}var E="math",ye="text",R="main",j="ams",kr="accent-token",Pe="bin",vo="close",Ng="inner",tt="mathord",di="op-token",ys="open",f7="punct",W="rel",Pc="spacing",V="textord";C(E,R,W,"\u2261","\\equiv",!0);C(E,R,W,"\u227A","\\prec",!0);C(E,R,W,"\u227B","\\succ",!0);C(E,R,W,"\u223C","\\sim",!0);C(E,R,W,"\u22A5","\\perp");C(E,R,W,"\u2AAF","\\preceq",!0);C(E,R,W,"\u2AB0","\\succeq",!0);C(E,R,W,"\u2243","\\simeq",!0);C(E,R,W,"\u2223","\\mid",!0);C(E,R,W,"\u226A","\\ll",!0);C(E,R,W,"\u226B","\\gg",!0);C(E,R,W,"\u224D","\\asymp",!0);C(E,R,W,"\u2225","\\parallel");C(E,R,W,"\u22C8","\\bowtie",!0);C(E,R,W,"\u2323","\\smile",!0);C(E,R,W,"\u2291","\\sqsubseteq",!0);C(E,R,W,"\u2292","\\sqsupseteq",!0);C(E,R,W,"\u2250","\\doteq",!0);C(E,R,W,"\u2322","\\frown",!0);C(E,R,W,"\u220B","\\ni",!0);C(E,R,W,"\u221D","\\propto",!0);C(E,R,W,"\u22A2","\\vdash",!0);C(E,R,W,"\u22A3","\\dashv",!0);C(E,R,W,"\u220B","\\owns");C(E,R,f7,".","\\ldotp");C(E,R,f7,"\u22C5","\\cdotp");C(E,R,V,"#","\\#");C(ye,R,V,"#","\\#");C(E,R,V,"&","\\&");C(ye,R,V,"&","\\&");C(E,R,V,"\u2135","\\aleph",!0);C(E,R,V,"\u2200","\\forall",!0);C(E,R,V,"\u210F","\\hbar",!0);C(E,R,V,"\u2203","\\exists",!0);C(E,R,V,"\u2207","\\nabla",!0);C(E,R,V,"\u266D","\\flat",!0);C(E,R,V,"\u2113","\\ell",!0);C(E,R,V,"\u266E","\\natural",!0);C(E,R,V,"\u2663","\\clubsuit",!0);C(E,R,V,"\u2118","\\wp",!0);C(E,R,V,"\u266F","\\sharp",!0);C(E,R,V,"\u2662","\\diamondsuit",!0);C(E,R,V,"\u211C","\\Re",!0);C(E,R,V,"\u2661","\\heartsuit",!0);C(E,R,V,"\u2111","\\Im",!0);C(E,R,V,"\u2660","\\spadesuit",!0);C(E,R,V,"\xA7","\\S",!0);C(ye,R,V,"\xA7","\\S");C(E,R,V,"\xB6","\\P",!0);C(ye,R,V,"\xB6","\\P");C(E,R,V,"\u2020","\\dag");C(ye,R,V,"\u2020","\\dag");C(ye,R,V,"\u2020","\\textdagger");C(E,R,V,"\u2021","\\ddag");C(ye,R,V,"\u2021","\\ddag");C(ye,R,V,"\u2021","\\textdaggerdbl");C(E,R,vo,"\u23B1","\\rmoustache",!0);C(E,R,ys,"\u23B0","\\lmoustache",!0);C(E,R,vo,"\u27EF","\\rgroup",!0);C(E,R,ys,"\u27EE","\\lgroup",!0);C(E,R,Pe,"\u2213","\\mp",!0);C(E,R,Pe,"\u2296","\\ominus",!0);C(E,R,Pe,"\u228E","\\uplus",!0);C(E,R,Pe,"\u2293","\\sqcap",!0);C(E,R,Pe,"\u2217","\\ast");C(E,R,Pe,"\u2294","\\sqcup",!0);C(E,R,Pe,"\u25EF","\\bigcirc",!0);C(E,R,Pe,"\u2219","\\bullet",!0);C(E,R,Pe,"\u2021","\\ddagger");C(E,R,Pe,"\u2240","\\wr",!0);C(E,R,Pe,"\u2A3F","\\amalg");C(E,R,Pe,"&","\\And");C(E,R,W,"\u27F5","\\longleftarrow",!0);C(E,R,W,"\u21D0","\\Leftarrow",!0);C(E,R,W,"\u27F8","\\Longleftarrow",!0);C(E,R,W,"\u27F6","\\longrightarrow",!0);C(E,R,W,"\u21D2","\\Rightarrow",!0);C(E,R,W,"\u27F9","\\Longrightarrow",!0);C(E,R,W,"\u2194","\\leftrightarrow",!0);C(E,R,W,"\u27F7","\\longleftrightarrow",!0);C(E,R,W,"\u21D4","\\Leftrightarrow",!0);C(E,R,W,"\u27FA","\\Longleftrightarrow",!0);C(E,R,W,"\u21A6","\\mapsto",!0);C(E,R,W,"\u27FC","\\longmapsto",!0);C(E,R,W,"\u2197","\\nearrow",!0);C(E,R,W,"\u21A9","\\hookleftarrow",!0);C(E,R,W,"\u21AA","\\hookrightarrow",!0);C(E,R,W,"\u2198","\\searrow",!0);C(E,R,W,"\u21BC","\\leftharpoonup",!0);C(E,R,W,"\u21C0","\\rightharpoonup",!0);C(E,R,W,"\u2199","\\swarrow",!0);C(E,R,W,"\u21BD","\\leftharpoondown",!0);C(E,R,W,"\u21C1","\\rightharpoondown",!0);C(E,R,W,"\u2196","\\nwarrow",!0);C(E,R,W,"\u21CC","\\rightleftharpoons",!0);C(E,j,W,"\u226E","\\nless",!0);C(E,j,W,"\uE010","\\@nleqslant");C(E,j,W,"\uE011","\\@nleqq");C(E,j,W,"\u2A87","\\lneq",!0);C(E,j,W,"\u2268","\\lneqq",!0);C(E,j,W,"\uE00C","\\@lvertneqq");C(E,j,W,"\u22E6","\\lnsim",!0);C(E,j,W,"\u2A89","\\lnapprox",!0);C(E,j,W,"\u2280","\\nprec",!0);C(E,j,W,"\u22E0","\\npreceq",!0);C(E,j,W,"\u22E8","\\precnsim",!0);C(E,j,W,"\u2AB9","\\precnapprox",!0);C(E,j,W,"\u2241","\\nsim",!0);C(E,j,W,"\uE006","\\@nshortmid");C(E,j,W,"\u2224","\\nmid",!0);C(E,j,W,"\u22AC","\\nvdash",!0);C(E,j,W,"\u22AD","\\nvDash",!0);C(E,j,W,"\u22EA","\\ntriangleleft");C(E,j,W,"\u22EC","\\ntrianglelefteq",!0);C(E,j,W,"\u228A","\\subsetneq",!0);C(E,j,W,"\uE01A","\\@varsubsetneq");C(E,j,W,"\u2ACB","\\subsetneqq",!0);C(E,j,W,"\uE017","\\@varsubsetneqq");C(E,j,W,"\u226F","\\ngtr",!0);C(E,j,W,"\uE00F","\\@ngeqslant");C(E,j,W,"\uE00E","\\@ngeqq");C(E,j,W,"\u2A88","\\gneq",!0);C(E,j,W,"\u2269","\\gneqq",!0);C(E,j,W,"\uE00D","\\@gvertneqq");C(E,j,W,"\u22E7","\\gnsim",!0);C(E,j,W,"\u2A8A","\\gnapprox",!0);C(E,j,W,"\u2281","\\nsucc",!0);C(E,j,W,"\u22E1","\\nsucceq",!0);C(E,j,W,"\u22E9","\\succnsim",!0);C(E,j,W,"\u2ABA","\\succnapprox",!0);C(E,j,W,"\u2246","\\ncong",!0);C(E,j,W,"\uE007","\\@nshortparallel");C(E,j,W,"\u2226","\\nparallel",!0);C(E,j,W,"\u22AF","\\nVDash",!0);C(E,j,W,"\u22EB","\\ntriangleright");C(E,j,W,"\u22ED","\\ntrianglerighteq",!0);C(E,j,W,"\uE018","\\@nsupseteqq");C(E,j,W,"\u228B","\\supsetneq",!0);C(E,j,W,"\uE01B","\\@varsupsetneq");C(E,j,W,"\u2ACC","\\supsetneqq",!0);C(E,j,W,"\uE019","\\@varsupsetneqq");C(E,j,W,"\u22AE","\\nVdash",!0);C(E,j,W,"\u2AB5","\\precneqq",!0);C(E,j,W,"\u2AB6","\\succneqq",!0);C(E,j,W,"\uE016","\\@nsubseteqq");C(E,j,Pe,"\u22B4","\\unlhd");C(E,j,Pe,"\u22B5","\\unrhd");C(E,j,W,"\u219A","\\nleftarrow",!0);C(E,j,W,"\u219B","\\nrightarrow",!0);C(E,j,W,"\u21CD","\\nLeftarrow",!0);C(E,j,W,"\u21CF","\\nRightarrow",!0);C(E,j,W,"\u21AE","\\nleftrightarrow",!0);C(E,j,W,"\u21CE","\\nLeftrightarrow",!0);C(E,j,W,"\u25B3","\\vartriangle");C(E,j,V,"\u210F","\\hslash");C(E,j,V,"\u25BD","\\triangledown");C(E,j,V,"\u25CA","\\lozenge");C(E,j,V,"\u24C8","\\circledS");C(E,j,V,"\xAE","\\circledR");C(ye,j,V,"\xAE","\\circledR");C(E,j,V,"\u2221","\\measuredangle",!0);C(E,j,V,"\u2204","\\nexists");C(E,j,V,"\u2127","\\mho");C(E,j,V,"\u2132","\\Finv",!0);C(E,j,V,"\u2141","\\Game",!0);C(E,j,V,"\u2035","\\backprime");C(E,j,V,"\u25B2","\\blacktriangle");C(E,j,V,"\u25BC","\\blacktriangledown");C(E,j,V,"\u25A0","\\blacksquare");C(E,j,V,"\u29EB","\\blacklozenge");C(E,j,V,"\u2605","\\bigstar");C(E,j,V,"\u2222","\\sphericalangle",!0);C(E,j,V,"\u2201","\\complement",!0);C(E,j,V,"\xF0","\\eth",!0);C(ye,R,V,"\xF0","\xF0");C(E,j,V,"\u2571","\\diagup");C(E,j,V,"\u2572","\\diagdown");C(E,j,V,"\u25A1","\\square");C(E,j,V,"\u25A1","\\Box");C(E,j,V,"\u25CA","\\Diamond");C(E,j,V,"\xA5","\\yen",!0);C(ye,j,V,"\xA5","\\yen",!0);C(E,j,V,"\u2713","\\checkmark",!0);C(ye,j,V,"\u2713","\\checkmark");C(E,j,V,"\u2136","\\beth",!0);C(E,j,V,"\u2138","\\daleth",!0);C(E,j,V,"\u2137","\\gimel",!0);C(E,j,V,"\u03DD","\\digamma",!0);C(E,j,V,"\u03F0","\\varkappa");C(E,j,ys,"\u250C","\\@ulcorner",!0);C(E,j,vo,"\u2510","\\@urcorner",!0);C(E,j,ys,"\u2514","\\@llcorner",!0);C(E,j,vo,"\u2518","\\@lrcorner",!0);C(E,j,W,"\u2266","\\leqq",!0);C(E,j,W,"\u2A7D","\\leqslant",!0);C(E,j,W,"\u2A95","\\eqslantless",!0);C(E,j,W,"\u2272","\\lesssim",!0);C(E,j,W,"\u2A85","\\lessapprox",!0);C(E,j,W,"\u224A","\\approxeq",!0);C(E,j,Pe,"\u22D6","\\lessdot");C(E,j,W,"\u22D8","\\lll",!0);C(E,j,W,"\u2276","\\lessgtr",!0);C(E,j,W,"\u22DA","\\lesseqgtr",!0);C(E,j,W,"\u2A8B","\\lesseqqgtr",!0);C(E,j,W,"\u2251","\\doteqdot");C(E,j,W,"\u2253","\\risingdotseq",!0);C(E,j,W,"\u2252","\\fallingdotseq",!0);C(E,j,W,"\u223D","\\backsim",!0);C(E,j,W,"\u22CD","\\backsimeq",!0);C(E,j,W,"\u2AC5","\\subseteqq",!0);C(E,j,W,"\u22D0","\\Subset",!0);C(E,j,W,"\u228F","\\sqsubset",!0);C(E,j,W,"\u227C","\\preccurlyeq",!0);C(E,j,W,"\u22DE","\\curlyeqprec",!0);C(E,j,W,"\u227E","\\precsim",!0);C(E,j,W,"\u2AB7","\\precapprox",!0);C(E,j,W,"\u22B2","\\vartriangleleft");C(E,j,W,"\u22B4","\\trianglelefteq");C(E,j,W,"\u22A8","\\vDash",!0);C(E,j,W,"\u22AA","\\Vvdash",!0);C(E,j,W,"\u2323","\\smallsmile");C(E,j,W,"\u2322","\\smallfrown");C(E,j,W,"\u224F","\\bumpeq",!0);C(E,j,W,"\u224E","\\Bumpeq",!0);C(E,j,W,"\u2267","\\geqq",!0);C(E,j,W,"\u2A7E","\\geqslant",!0);C(E,j,W,"\u2A96","\\eqslantgtr",!0);C(E,j,W,"\u2273","\\gtrsim",!0);C(E,j,W,"\u2A86","\\gtrapprox",!0);C(E,j,Pe,"\u22D7","\\gtrdot");C(E,j,W,"\u22D9","\\ggg",!0);C(E,j,W,"\u2277","\\gtrless",!0);C(E,j,W,"\u22DB","\\gtreqless",!0);C(E,j,W,"\u2A8C","\\gtreqqless",!0);C(E,j,W,"\u2256","\\eqcirc",!0);C(E,j,W,"\u2257","\\circeq",!0);C(E,j,W,"\u225C","\\triangleq",!0);C(E,j,W,"\u223C","\\thicksim");C(E,j,W,"\u2248","\\thickapprox");C(E,j,W,"\u2AC6","\\supseteqq",!0);C(E,j,W,"\u22D1","\\Supset",!0);C(E,j,W,"\u2290","\\sqsupset",!0);C(E,j,W,"\u227D","\\succcurlyeq",!0);C(E,j,W,"\u22DF","\\curlyeqsucc",!0);C(E,j,W,"\u227F","\\succsim",!0);C(E,j,W,"\u2AB8","\\succapprox",!0);C(E,j,W,"\u22B3","\\vartriangleright");C(E,j,W,"\u22B5","\\trianglerighteq");C(E,j,W,"\u22A9","\\Vdash",!0);C(E,j,W,"\u2223","\\shortmid");C(E,j,W,"\u2225","\\shortparallel");C(E,j,W,"\u226C","\\between",!0);C(E,j,W,"\u22D4","\\pitchfork",!0);C(E,j,W,"\u221D","\\varpropto");C(E,j,W,"\u25C0","\\blacktriangleleft");C(E,j,W,"\u2234","\\therefore",!0);C(E,j,W,"\u220D","\\backepsilon");C(E,j,W,"\u25B6","\\blacktriangleright");C(E,j,W,"\u2235","\\because",!0);C(E,j,W,"\u22D8","\\llless");C(E,j,W,"\u22D9","\\gggtr");C(E,j,Pe,"\u22B2","\\lhd");C(E,j,Pe,"\u22B3","\\rhd");C(E,j,W,"\u2242","\\eqsim",!0);C(E,R,W,"\u22C8","\\Join");C(E,j,W,"\u2251","\\Doteq",!0);C(E,j,Pe,"\u2214","\\dotplus",!0);C(E,j,Pe,"\u2216","\\smallsetminus");C(E,j,Pe,"\u22D2","\\Cap",!0);C(E,j,Pe,"\u22D3","\\Cup",!0);C(E,j,Pe,"\u2A5E","\\doublebarwedge",!0);C(E,j,Pe,"\u229F","\\boxminus",!0);C(E,j,Pe,"\u229E","\\boxplus",!0);C(E,j,Pe,"\u22C7","\\divideontimes",!0);C(E,j,Pe,"\u22C9","\\ltimes",!0);C(E,j,Pe,"\u22CA","\\rtimes",!0);C(E,j,Pe,"\u22CB","\\leftthreetimes",!0);C(E,j,Pe,"\u22CC","\\rightthreetimes",!0);C(E,j,Pe,"\u22CF","\\curlywedge",!0);C(E,j,Pe,"\u22CE","\\curlyvee",!0);C(E,j,Pe,"\u229D","\\circleddash",!0);C(E,j,Pe,"\u229B","\\circledast",!0);C(E,j,Pe,"\u22C5","\\centerdot");C(E,j,Pe,"\u22BA","\\intercal",!0);C(E,j,Pe,"\u22D2","\\doublecap");C(E,j,Pe,"\u22D3","\\doublecup");C(E,j,Pe,"\u22A0","\\boxtimes",!0);C(E,j,W,"\u21E2","\\dashrightarrow",!0);C(E,j,W,"\u21E0","\\dashleftarrow",!0);C(E,j,W,"\u21C7","\\leftleftarrows",!0);C(E,j,W,"\u21C6","\\leftrightarrows",!0);C(E,j,W,"\u21DA","\\Lleftarrow",!0);C(E,j,W,"\u219E","\\twoheadleftarrow",!0);C(E,j,W,"\u21A2","\\leftarrowtail",!0);C(E,j,W,"\u21AB","\\looparrowleft",!0);C(E,j,W,"\u21CB","\\leftrightharpoons",!0);C(E,j,W,"\u21B6","\\curvearrowleft",!0);C(E,j,W,"\u21BA","\\circlearrowleft",!0);C(E,j,W,"\u21B0","\\Lsh",!0);C(E,j,W,"\u21C8","\\upuparrows",!0);C(E,j,W,"\u21BF","\\upharpoonleft",!0);C(E,j,W,"\u21C3","\\downharpoonleft",!0);C(E,R,W,"\u22B6","\\origof",!0);C(E,R,W,"\u22B7","\\imageof",!0);C(E,j,W,"\u22B8","\\multimap",!0);C(E,j,W,"\u21AD","\\leftrightsquigarrow",!0);C(E,j,W,"\u21C9","\\rightrightarrows",!0);C(E,j,W,"\u21C4","\\rightleftarrows",!0);C(E,j,W,"\u21A0","\\twoheadrightarrow",!0);C(E,j,W,"\u21A3","\\rightarrowtail",!0);C(E,j,W,"\u21AC","\\looparrowright",!0);C(E,j,W,"\u21B7","\\curvearrowright",!0);C(E,j,W,"\u21BB","\\circlearrowright",!0);C(E,j,W,"\u21B1","\\Rsh",!0);C(E,j,W,"\u21CA","\\downdownarrows",!0);C(E,j,W,"\u21BE","\\upharpoonright",!0);C(E,j,W,"\u21C2","\\downharpoonright",!0);C(E,j,W,"\u21DD","\\rightsquigarrow",!0);C(E,j,W,"\u21DD","\\leadsto");C(E,j,W,"\u21DB","\\Rrightarrow",!0);C(E,j,W,"\u21BE","\\restriction");C(E,R,V,"\u2018","`");C(E,R,V,"$","\\$");C(ye,R,V,"$","\\$");C(ye,R,V,"$","\\textdollar");C(E,R,V,"%","\\%");C(ye,R,V,"%","\\%");C(E,R,V,"_","\\_");C(ye,R,V,"_","\\_");C(ye,R,V,"_","\\textunderscore");C(E,R,V,"\u2220","\\angle",!0);C(E,R,V,"\u221E","\\infty",!0);C(E,R,V,"\u2032","\\prime");C(E,R,V,"\u25B3","\\triangle");C(E,R,V,"\u0393","\\Gamma",!0);C(E,R,V,"\u0394","\\Delta",!0);C(E,R,V,"\u0398","\\Theta",!0);C(E,R,V,"\u039B","\\Lambda",!0);C(E,R,V,"\u039E","\\Xi",!0);C(E,R,V,"\u03A0","\\Pi",!0);C(E,R,V,"\u03A3","\\Sigma",!0);C(E,R,V,"\u03A5","\\Upsilon",!0);C(E,R,V,"\u03A6","\\Phi",!0);C(E,R,V,"\u03A8","\\Psi",!0);C(E,R,V,"\u03A9","\\Omega",!0);C(E,R,V,"A","\u0391");C(E,R,V,"B","\u0392");C(E,R,V,"E","\u0395");C(E,R,V,"Z","\u0396");C(E,R,V,"H","\u0397");C(E,R,V,"I","\u0399");C(E,R,V,"K","\u039A");C(E,R,V,"M","\u039C");C(E,R,V,"N","\u039D");C(E,R,V,"O","\u039F");C(E,R,V,"P","\u03A1");C(E,R,V,"T","\u03A4");C(E,R,V,"X","\u03A7");C(E,R,V,"\xAC","\\neg",!0);C(E,R,V,"\xAC","\\lnot");C(E,R,V,"\u22A4","\\top");C(E,R,V,"\u22A5","\\bot");C(E,R,V,"\u2205","\\emptyset");C(E,j,V,"\u2205","\\varnothing");C(E,R,tt,"\u03B1","\\alpha",!0);C(E,R,tt,"\u03B2","\\beta",!0);C(E,R,tt,"\u03B3","\\gamma",!0);C(E,R,tt,"\u03B4","\\delta",!0);C(E,R,tt,"\u03F5","\\epsilon",!0);C(E,R,tt,"\u03B6","\\zeta",!0);C(E,R,tt,"\u03B7","\\eta",!0);C(E,R,tt,"\u03B8","\\theta",!0);C(E,R,tt,"\u03B9","\\iota",!0);C(E,R,tt,"\u03BA","\\kappa",!0);C(E,R,tt,"\u03BB","\\lambda",!0);C(E,R,tt,"\u03BC","\\mu",!0);C(E,R,tt,"\u03BD","\\nu",!0);C(E,R,tt,"\u03BE","\\xi",!0);C(E,R,tt,"\u03BF","\\omicron",!0);C(E,R,tt,"\u03C0","\\pi",!0);C(E,R,tt,"\u03C1","\\rho",!0);C(E,R,tt,"\u03C3","\\sigma",!0);C(E,R,tt,"\u03C4","\\tau",!0);C(E,R,tt,"\u03C5","\\upsilon",!0);C(E,R,tt,"\u03D5","\\phi",!0);C(E,R,tt,"\u03C7","\\chi",!0);C(E,R,tt,"\u03C8","\\psi",!0);C(E,R,tt,"\u03C9","\\omega",!0);C(E,R,tt,"\u03B5","\\varepsilon",!0);C(E,R,tt,"\u03D1","\\vartheta",!0);C(E,R,tt,"\u03D6","\\varpi",!0);C(E,R,tt,"\u03F1","\\varrho",!0);C(E,R,tt,"\u03C2","\\varsigma",!0);C(E,R,tt,"\u03C6","\\varphi",!0);C(E,R,Pe,"\u2217","*",!0);C(E,R,Pe,"+","+");C(E,R,Pe,"\u2212","-",!0);C(E,R,Pe,"\u22C5","\\cdot",!0);C(E,R,Pe,"\u2218","\\circ",!0);C(E,R,Pe,"\xF7","\\div",!0);C(E,R,Pe,"\xB1","\\pm",!0);C(E,R,Pe,"\xD7","\\times",!0);C(E,R,Pe,"\u2229","\\cap",!0);C(E,R,Pe,"\u222A","\\cup",!0);C(E,R,Pe,"\u2216","\\setminus",!0);C(E,R,Pe,"\u2227","\\land");C(E,R,Pe,"\u2228","\\lor");C(E,R,Pe,"\u2227","\\wedge",!0);C(E,R,Pe,"\u2228","\\vee",!0);C(E,R,V,"\u221A","\\surd");C(E,R,ys,"\u27E8","\\langle",!0);C(E,R,ys,"\u2223","\\lvert");C(E,R,ys,"\u2225","\\lVert");C(E,R,vo,"?","?");C(E,R,vo,"!","!");C(E,R,vo,"\u27E9","\\rangle",!0);C(E,R,vo,"\u2223","\\rvert");C(E,R,vo,"\u2225","\\rVert");C(E,R,W,"=","=");C(E,R,W,":",":");C(E,R,W,"\u2248","\\approx",!0);C(E,R,W,"\u2245","\\cong",!0);C(E,R,W,"\u2265","\\ge");C(E,R,W,"\u2265","\\geq",!0);C(E,R,W,"\u2190","\\gets");C(E,R,W,">","\\gt",!0);C(E,R,W,"\u2208","\\in",!0);C(E,R,W,"\uE020","\\@not");C(E,R,W,"\u2282","\\subset",!0);C(E,R,W,"\u2283","\\supset",!0);C(E,R,W,"\u2286","\\subseteq",!0);C(E,R,W,"\u2287","\\supseteq",!0);C(E,j,W,"\u2288","\\nsubseteq",!0);C(E,j,W,"\u2289","\\nsupseteq",!0);C(E,R,W,"\u22A8","\\models");C(E,R,W,"\u2190","\\leftarrow",!0);C(E,R,W,"\u2264","\\le");C(E,R,W,"\u2264","\\leq",!0);C(E,R,W,"<","\\lt",!0);C(E,R,W,"\u2192","\\rightarrow",!0);C(E,R,W,"\u2192","\\to");C(E,j,W,"\u2271","\\ngeq",!0);C(E,j,W,"\u2270","\\nleq",!0);C(E,R,Pc,"\xA0","\\ ");C(E,R,Pc,"\xA0","\\space");C(E,R,Pc,"\xA0","\\nobreakspace");C(ye,R,Pc,"\xA0","\\ ");C(ye,R,Pc,"\xA0"," ");C(ye,R,Pc,"\xA0","\\space");C(ye,R,Pc,"\xA0","\\nobreakspace");C(E,R,Pc,null,"\\nobreak");C(E,R,Pc,null,"\\allowbreak");C(E,R,f7,",",",");C(E,R,f7,";",";");C(E,j,Pe,"\u22BC","\\barwedge",!0);C(E,j,Pe,"\u22BB","\\veebar",!0);C(E,R,Pe,"\u2299","\\odot",!0);C(E,R,Pe,"\u2295","\\oplus",!0);C(E,R,Pe,"\u2297","\\otimes",!0);C(E,R,V,"\u2202","\\partial",!0);C(E,R,Pe,"\u2298","\\oslash",!0);C(E,j,Pe,"\u229A","\\circledcirc",!0);C(E,j,Pe,"\u22A1","\\boxdot",!0);C(E,R,Pe,"\u25B3","\\bigtriangleup");C(E,R,Pe,"\u25BD","\\bigtriangledown");C(E,R,Pe,"\u2020","\\dagger");C(E,R,Pe,"\u22C4","\\diamond");C(E,R,Pe,"\u22C6","\\star");C(E,R,Pe,"\u25C3","\\triangleleft");C(E,R,Pe,"\u25B9","\\triangleright");C(E,R,ys,"{","\\{");C(ye,R,V,"{","\\{");C(ye,R,V,"{","\\textbraceleft");C(E,R,vo,"}","\\}");C(ye,R,V,"}","\\}");C(ye,R,V,"}","\\textbraceright");C(E,R,ys,"{","\\lbrace");C(E,R,vo,"}","\\rbrace");C(E,R,ys,"[","\\lbrack",!0);C(ye,R,V,"[","\\lbrack",!0);C(E,R,vo,"]","\\rbrack",!0);C(ye,R,V,"]","\\rbrack",!0);C(E,R,ys,"(","\\lparen",!0);C(E,R,vo,")","\\rparen",!0);C(ye,R,V,"<","\\textless",!0);C(ye,R,V,">","\\textgreater",!0);C(E,R,ys,"\u230A","\\lfloor",!0);C(E,R,vo,"\u230B","\\rfloor",!0);C(E,R,ys,"\u2308","\\lceil",!0);C(E,R,vo,"\u2309","\\rceil",!0);C(E,R,V,"\\","\\backslash");C(E,R,V,"\u2223","|");C(E,R,V,"\u2223","\\vert");C(ye,R,V,"|","\\textbar",!0);C(E,R,V,"\u2225","\\|");C(E,R,V,"\u2225","\\Vert");C(ye,R,V,"\u2225","\\textbardbl");C(ye,R,V,"~","\\textasciitilde");C(ye,R,V,"\\","\\textbackslash");C(ye,R,V,"^","\\textasciicircum");C(E,R,W,"\u2191","\\uparrow",!0);C(E,R,W,"\u21D1","\\Uparrow",!0);C(E,R,W,"\u2193","\\downarrow",!0);C(E,R,W,"\u21D3","\\Downarrow",!0);C(E,R,W,"\u2195","\\updownarrow",!0);C(E,R,W,"\u21D5","\\Updownarrow",!0);C(E,R,di,"\u2210","\\coprod");C(E,R,di,"\u22C1","\\bigvee");C(E,R,di,"\u22C0","\\bigwedge");C(E,R,di,"\u2A04","\\biguplus");C(E,R,di,"\u22C2","\\bigcap");C(E,R,di,"\u22C3","\\bigcup");C(E,R,di,"\u222B","\\int");C(E,R,di,"\u222B","\\intop");C(E,R,di,"\u222C","\\iint");C(E,R,di,"\u222D","\\iiint");C(E,R,di,"\u220F","\\prod");C(E,R,di,"\u2211","\\sum");C(E,R,di,"\u2A02","\\bigotimes");C(E,R,di,"\u2A01","\\bigoplus");C(E,R,di,"\u2A00","\\bigodot");C(E,R,di,"\u222E","\\oint");C(E,R,di,"\u222F","\\oiint");C(E,R,di,"\u2230","\\oiiint");C(E,R,di,"\u2A06","\\bigsqcup");C(E,R,di,"\u222B","\\smallint");C(ye,R,Ng,"\u2026","\\textellipsis");C(E,R,Ng,"\u2026","\\mathellipsis");C(ye,R,Ng,"\u2026","\\ldots",!0);C(E,R,Ng,"\u2026","\\ldots",!0);C(E,R,Ng,"\u22EF","\\@cdots",!0);C(E,R,Ng,"\u22F1","\\ddots",!0);C(E,R,V,"\u22EE","\\varvdots");C(ye,R,V,"\u22EE","\\varvdots");C(E,R,kr,"\u02CA","\\acute");C(E,R,kr,"\u02CB","\\grave");C(E,R,kr,"\xA8","\\ddot");C(E,R,kr,"~","\\tilde");C(E,R,kr,"\u02C9","\\bar");C(E,R,kr,"\u02D8","\\breve");C(E,R,kr,"\u02C7","\\check");C(E,R,kr,"^","\\hat");C(E,R,kr,"\u20D7","\\vec");C(E,R,kr,"\u02D9","\\dot");C(E,R,kr,"\u02DA","\\mathring");C(E,R,tt,"\uE131","\\@imath");C(E,R,tt,"\uE237","\\@jmath");C(E,R,V,"\u0131","\u0131");C(E,R,V,"\u0237","\u0237");C(ye,R,V,"\u0131","\\i",!0);C(ye,R,V,"\u0237","\\j",!0);C(ye,R,V,"\xDF","\\ss",!0);C(ye,R,V,"\xE6","\\ae",!0);C(ye,R,V,"\u0153","\\oe",!0);C(ye,R,V,"\xF8","\\o",!0);C(ye,R,V,"\xC6","\\AE",!0);C(ye,R,V,"\u0152","\\OE",!0);C(ye,R,V,"\xD8","\\O",!0);C(ye,R,kr,"\u02CA","\\'");C(ye,R,kr,"\u02CB","\\`");C(ye,R,kr,"\u02C6","\\^");C(ye,R,kr,"\u02DC","\\~");C(ye,R,kr,"\u02C9","\\=");C(ye,R,kr,"\u02D8","\\u");C(ye,R,kr,"\u02D9","\\.");C(ye,R,kr,"\xB8","\\c");C(ye,R,kr,"\u02DA","\\r");C(ye,R,kr,"\u02C7","\\v");C(ye,R,kr,"\xA8",'\\"');C(ye,R,kr,"\u02DD","\\H");C(ye,R,kr,"\u25EF","\\textcircled");var lre={"--":!0,"---":!0,"``":!0,"''":!0};C(ye,R,V,"\u2013","--",!0);C(ye,R,V,"\u2013","\\textendash");C(ye,R,V,"\u2014","---",!0);C(ye,R,V,"\u2014","\\textemdash");C(ye,R,V,"\u2018","`",!0);C(ye,R,V,"\u2018","\\textquoteleft");C(ye,R,V,"\u2019","'",!0);C(ye,R,V,"\u2019","\\textquoteright");C(ye,R,V,"\u201C","``",!0);C(ye,R,V,"\u201C","\\textquotedblleft");C(ye,R,V,"\u201D","''",!0);C(ye,R,V,"\u201D","\\textquotedblright");C(E,R,V,"\xB0","\\degree",!0);C(ye,R,V,"\xB0","\\degree");C(ye,R,V,"\xB0","\\textdegree",!0);C(E,R,V,"\xA3","\\pounds");C(E,R,V,"\xA3","\\mathsterling",!0);C(ye,R,V,"\xA3","\\pounds");C(ye,R,V,"\xA3","\\textsterling",!0);C(E,j,V,"\u2720","\\maltese");C(ye,j,V,"\u2720","\\maltese");var Rte='0123456789/@."';for(WS=0;WS<Rte.length;WS++)RO=Rte.charAt(WS),C(E,R,V,RO,RO);var RO,WS,Mte='0123456789!@*()-=+";:?/.,';for(VS=0;VS<Mte.length;VS++)MO=Mte.charAt(VS),C(ye,R,V,MO,MO);var MO,VS,o7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(GS=0;GS<o7.length;GS++)F2=o7.charAt(GS),C(E,R,tt,F2,F2),C(ye,R,V,F2,F2);var F2,GS;C(E,j,V,"C","\u2102");C(ye,j,V,"C","\u2102");C(E,j,V,"H","\u210D");C(ye,j,V,"H","\u210D");C(E,j,V,"N","\u2115");C(ye,j,V,"N","\u2115");C(E,j,V,"P","\u2119");C(ye,j,V,"P","\u2119");C(E,j,V,"Q","\u211A");C(ye,j,V,"Q","\u211A");C(E,j,V,"R","\u211D");C(ye,j,V,"R","\u211D");C(E,j,V,"Z","\u2124");C(ye,j,V,"Z","\u2124");C(E,R,tt,"h","\u210E");C(ye,R,tt,"h","\u210E");var st="";for(qn=0;qn<o7.length;qn++)Fr=o7.charAt(qn),st=String.fromCharCode(55349,56320+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st),st=String.fromCharCode(55349,56372+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st),st=String.fromCharCode(55349,56424+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st),st=String.fromCharCode(55349,56580+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st),st=String.fromCharCode(55349,56684+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st),st=String.fromCharCode(55349,56736+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st),st=String.fromCharCode(55349,56788+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st),st=String.fromCharCode(55349,56840+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st),st=String.fromCharCode(55349,56944+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st),qn<26&&(st=String.fromCharCode(55349,56632+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st),st=String.fromCharCode(55349,56476+qn),C(E,R,tt,Fr,st),C(ye,R,V,Fr,st));var Fr,qn;st="\u{1D55C}";C(E,R,tt,"k",st);C(ye,R,V,"k",st);for(hh=0;hh<10;hh++)Rc=hh.toString(),st=String.fromCharCode(55349,57294+hh),C(E,R,tt,Rc,st),C(ye,R,V,Rc,st),st=String.fromCharCode(55349,57314+hh),C(E,R,tt,Rc,st),C(ye,R,V,Rc,st),st=String.fromCharCode(55349,57324+hh),C(E,R,tt,Rc,st),C(ye,R,V,Rc,st),st=String.fromCharCode(55349,57334+hh),C(E,R,tt,Rc,st),C(ye,R,V,Rc,st);var Rc,hh,WO="\xD0\xDE\xFE";for(YS=0;YS<WO.length;YS++)O2=WO.charAt(YS),C(E,R,tt,O2,O2),C(ye,R,V,O2,O2);var O2,YS,XS=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Fte=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],mTe=function(t,r){var i=t.charCodeAt(0),n=t.charCodeAt(1),o=(i-55296)*1024+(n-56320)+65536,s=r==="math"?0:1;if(119808<=o&&o<120484){var a=Math.floor((o-119808)/26);return[XS[a][2],XS[a][s]]}else if(120782<=o&&o<=120831){var l=Math.floor((o-120782)/10);return[Fte[l][2],Fte[l][s]]}else{if(o===120485||o===120486)return[XS[0][2],XS[0][s]];if(120486<o&&o<120782)return["",""];throw new Ce("Unsupported character: "+t)}},h7=function(t,r,i){return hr[i][t]&&hr[i][t].replace&&(t=hr[i][t].replace),{value:t,metrics:t$(t,r,i)}},nl=function(t,r,i,n,o){var s=h7(t,r,i),a=s.metrics;t=s.value;var l;if(a){var u=a.italic;(i==="text"||n&&n.font==="mathit")&&(u=0),l=new Go(t,a.height,a.depth,u,a.skew,a.width,o)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+r+"' and mode '"+i+"'")),l=new Go(t,0,0,0,0,0,o);if(n){l.maxFontSize=n.sizeMultiplier,n.style.isTight()&&l.classes.push("mtight");var c=n.getColor();c&&(l.style.color=c)}return l},gTe=function(t,r,i,n){return n===void 0&&(n=[]),i.font==="boldsymbol"&&h7(t,"Main-Bold",r).metrics?nl(t,"Main-Bold",r,i,n.concat(["mathbf"])):t==="\\"||hr[r][t].font==="main"?nl(t,"Main-Regular",r,i,n):nl(t,"AMS-Regular",r,i,n.concat(["amsrm"]))},vTe=function(t,r,i,n,o){return o!=="textord"&&h7(t,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},bTe=function(t,r,i){var n=t.mode,o=t.text,s=["mord"],a=n==="math"||n==="text"&&r.font,l=a?r.font:r.fontFamily,u="",c="";if(o.charCodeAt(0)===55349&&([u,c]=mTe(o,n)),u.length>0)return nl(o,u,n,r,s.concat(c));if(l){var f,h;if(l==="boldsymbol"){var p=vTe(o,n,r,s,i);f=p.fontName,h=[p.fontClass]}else a?(f=fre[l].fontName,h=[l]):(f=KS(l,r.fontWeight,r.fontShape),h=[l,r.fontWeight,r.fontShape]);if(h7(o,f,n).metrics)return nl(o,f,n,r,s.concat(h));if(lre.hasOwnProperty(o)&&f.slice(0,10)==="Typewriter"){for(var d=[],m=0;m<o.length;m++)d.push(nl(o[m],f,n,r,s.concat(h)));return cre(d)}}if(i==="mathord")return nl(o,"Math-Italic",n,r,s.concat(["mathnormal"]));if(i==="textord"){var g=hr[n][o]&&hr[n][o].font;if(g==="ams"){var v=KS("amsrm",r.fontWeight,r.fontShape);return nl(o,v,n,r,s.concat("amsrm",r.fontWeight,r.fontShape))}else if(g==="main"||!g){var b=KS("textrm",r.fontWeight,r.fontShape);return nl(o,b,n,r,s.concat(r.fontWeight,r.fontShape))}else{var y=KS(g,r.fontWeight,r.fontShape);return nl(o,y,n,r,s.concat(y,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+i+" in makeOrd")},yTe=(e,t)=>{if(ph(e.classes)!==ph(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var i in e.style)if(e.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;for(var n in t.style)if(t.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;return!0},xTe=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],i=e[t+1];r instanceof Go&&i instanceof Go&&yTe(r,i)&&(r.text+=i.text,r.height=Math.max(r.height,i.height),r.depth=Math.max(r.depth,i.depth),r.italic=i.italic,e.splice(t+1,1),t--)}return e},r$=function(t){for(var r=0,i=0,n=0,o=0;o<t.children.length;o++){var s=t.children[o];s.height>r&&(r=s.height),s.depth>i&&(i=s.depth),s.maxFontSize>n&&(n=s.maxFontSize)}t.height=r,t.depth=i,t.maxFontSize=n},Vo=function(t,r,i,n){var o=new S0(t,r,i,n);return r$(o),o},ure=(e,t,r,i)=>new S0(e,t,r,i),_Te=function(t,r,i){var n=Vo([t],[],r);return n.height=Math.max(i||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),n.style.borderBottomWidth=Te(n.height),n.maxFontSize=1,n},wTe=function(t,r,i,n){var o=new N2(t,r,i,n);return r$(o),o},cre=function(t){var r=new w0(t);return r$(r),r},STe=function(t,r){return t instanceof w0?Vo([],[t],r):t},CTe=function(t){if(t.positionType==="individualShift"){for(var r=t.children,i=[r[0]],n=-r[0].shift-r[0].elem.depth,o=n,s=1;s<r.length;s++){var a=-r[s].shift-o-r[s].elem.depth,l=a-(r[s-1].elem.height+r[s-1].elem.depth);o=o+a,i.push({type:"kern",size:l}),i.push(r[s])}return{children:i,depth:n}}var u;if(t.positionType==="top"){for(var c=t.positionData,f=0;f<t.children.length;f++){var h=t.children[f];c-=h.type==="kern"?h.size:h.elem.height+h.elem.depth}u=c}else if(t.positionType==="bottom")u=-t.positionData;else{var p=t.children[0];if(p.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")u=-p.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")u=-p.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:u}},kTe=function(t,r){for(var{children:i,depth:n}=CTe(t),o=0,s=0;s<i.length;s++){var a=i[s];if(a.type==="elem"){var l=a.elem;o=Math.max(o,l.maxFontSize,l.height)}}o+=2;var u=Vo(["pstrut"],[]);u.style.height=Te(o);for(var c=[],f=n,h=n,p=n,d=0;d<i.length;d++){var m=i[d];if(m.type==="kern")p+=m.size;else{var g=m.elem,v=m.wrapperClasses||[],b=m.wrapperStyle||{},y=Vo(v,[u,g],void 0,b);y.style.top=Te(-o-p-g.depth),m.marginLeft&&(y.style.marginLeft=m.marginLeft),m.marginRight&&(y.style.marginRight=m.marginRight),c.push(y),p+=g.height+g.depth}f=Math.min(f,p),h=Math.max(h,p)}var x=Vo(["vlist"],c);x.style.height=Te(h);var S;if(f<0){var _=Vo([],[]),w=Vo(["vlist"],[_]);w.style.height=Te(-f);var k=Vo(["vlist-s"],[new Go("\u200B")]);S=[Vo(["vlist-r"],[x,k]),Vo(["vlist-r"],[w])]}else S=[Vo(["vlist-r"],[x])];var A=Vo(["vlist-t"],S);return S.length===2&&A.classes.push("vlist-t2"),A.height=h,A.depth=-f,A},ETe=(e,t)=>{var r=Vo(["mspace"],[],t),i=$r(e,t);return r.style.marginRight=Te(i),r},KS=function(t,r,i){var n="";switch(t){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=t}var o;return r==="textbf"&&i==="textit"?o="BoldItalic":r==="textbf"?o="Bold":r==="textit"?o="Italic":o="Regular",n+"-"+o},fre={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},hre={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},ATe=function(t,r){var[i,n,o]=hre[t],s=new su(i),a=new ol([s],{width:Te(n),height:Te(o),style:"width:"+Te(n),viewBox:"0 0 "+1e3*n+" "+1e3*o,preserveAspectRatio:"xMinYMin"}),l=ure(["overlay"],[a],r);return l.height=o,l.style.height=Te(o),l.style.width=Te(n),l},Z={fontMap:fre,makeSymbol:nl,mathsym:gTe,makeSpan:Vo,makeSvgSpan:ure,makeLineSpan:_Te,makeAnchor:wTe,makeFragment:cre,wrapFragment:STe,makeVList:kTe,makeOrd:bTe,makeGlue:ETe,staticSvg:ATe,svgData:hre,tryCombineChars:xTe},Or={number:3,unit:"mu"},_0={number:4,unit:"mu"},Mc={number:5,unit:"mu"},TTe={mord:{mop:Or,mbin:_0,mrel:Mc,minner:Or},mop:{mord:Or,mop:Or,mrel:Mc,minner:Or},mbin:{mord:_0,mop:_0,mopen:_0,minner:_0},mrel:{mord:Mc,mop:Mc,mopen:Mc,minner:Mc},mopen:{},mclose:{mop:Or,mbin:_0,mrel:Mc,minner:Or},mpunct:{mord:Or,mop:Or,mrel:Mc,mopen:Or,mclose:Or,mpunct:Or,minner:Or},minner:{mord:Or,mop:Or,mbin:_0,mrel:Mc,mopen:Or,mpunct:Or,minner:Or}},DTe={mord:{mop:Or},mop:{mord:Or,mop:Or},mbin:{},mrel:{},mopen:{},mclose:{mop:Or},mpunct:{},minner:{mop:Or}},dre={},s7={},a7={};function Oe(e){for(var{type:t,names:r,props:i,handler:n,htmlBuilder:o,mathmlBuilder:s}=e,a={type:t,numArgs:i.numArgs,argTypes:i.argTypes,allowedInArgument:!!i.allowedInArgument,allowedInText:!!i.allowedInText,allowedInMath:i.allowedInMath===void 0?!0:i.allowedInMath,numOptionalArgs:i.numOptionalArgs||0,infix:!!i.infix,primitive:!!i.primitive,handler:n},l=0;l<r.length;++l)dre[r[l]]=a;t&&(o&&(s7[t]=o),s&&(a7[t]=s))}function C0(e){var{type:t,htmlBuilder:r,mathmlBuilder:i}=e;Oe({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:i})}var l7=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},ei=function(t){return t.type==="ordgroup"?t.body:[t]},$c=Z.makeSpan,RTe=["leftmost","mbin","mopen","mrel","mop","mpunct"],MTe=["rightmost","mrel","mclose","mpunct"],FTe={display:rt.DISPLAY,text:rt.TEXT,script:rt.SCRIPT,scriptscript:rt.SCRIPTSCRIPT},OTe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ci=function(t,r,i,n){n===void 0&&(n=[null,null]);for(var o=[],s=0;s<t.length;s++){var a=$t(t[s],r);if(a instanceof w0){var l=a.children;o.push(...l)}else o.push(a)}if(Z.tryCombineChars(o),!i)return o;var u=r;if(t.length===1){var c=t[0];c.type==="sizing"?u=r.havingSize(c.size):c.type==="styling"&&(u=r.havingStyle(FTe[c.style]))}var f=$c([n[0]||"leftmost"],[],r),h=$c([n[1]||"rightmost"],[],r),p=i==="root";return Ote(o,(d,m)=>{var g=m.classes[0],v=d.classes[0];g==="mbin"&&Je.contains(MTe,v)?m.classes[0]="mord":v==="mbin"&&Je.contains(RTe,g)&&(d.classes[0]="mord")},{node:f},h,p),Ote(o,(d,m)=>{var g=VO(m),v=VO(d),b=g&&v?d.hasClass("mtight")?DTe[g][v]:TTe[g][v]:null;if(b)return Z.makeGlue(b,u)},{node:f},h,p),o},Ote=function e(t,r,i,n,o){n&&t.push(n);for(var s=0;s<t.length;s++){var a=t[s],l=pre(a);if(l){e(l.children,r,i,null,o);continue}var u=!a.hasClass("mspace");if(u){var c=r(a,i.node);c&&(i.insertAfter?i.insertAfter(c):(t.unshift(c),s++))}u?i.node=a:o&&a.hasClass("newline")&&(i.node=$c(["leftmost"])),i.insertAfter=(f=>h=>{t.splice(f+1,0,h),s++})(s)}n&&t.pop()},pre=function(t){return t instanceof w0||t instanceof N2||t instanceof S0&&t.hasClass("enclosing")?t:null},$Te=function e(t,r){var i=pre(t);if(i){var n=i.children;if(n.length){if(r==="right")return e(n[n.length-1],"right");if(r==="left")return e(n[0],"left")}}return t},VO=function(t,r){return t?(r&&(t=$Te(t,r)),OTe[t.classes[0]]||null):null},z2=function(t,r){var i=["nulldelimiter"].concat(t.baseSizingClasses());return $c(r.concat(i))},$t=function(t,r,i){if(!t)return $c();if(s7[t.type]){var n=s7[t.type](t,r);if(i&&r.size!==i.size){n=$c(r.sizingClasses(i),[n],r);var o=r.sizeMultiplier/i.sizeMultiplier;n.height*=o,n.depth*=o}return n}else throw new Ce("Got group of unknown type: '"+t.type+"'")};function ZS(e,t){var r=$c(["base"],e,t),i=$c(["strut"]);return i.style.height=Te(r.height+r.depth),r.depth&&(i.style.verticalAlign=Te(-r.depth)),r.children.unshift(i),r}function GO(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var i=Ci(e,t,"root"),n;i.length===2&&i[1].hasClass("tag")&&(n=i.pop());for(var o=[],s=[],a=0;a<i.length;a++)if(s.push(i[a]),i[a].hasClass("mbin")||i[a].hasClass("mrel")||i[a].hasClass("allowbreak")){for(var l=!1;a<i.length-1&&i[a+1].hasClass("mspace")&&!i[a+1].hasClass("newline");)a++,s.push(i[a]),i[a].hasClass("nobreak")&&(l=!0);l||(o.push(ZS(s,t)),s=[])}else i[a].hasClass("newline")&&(s.pop(),s.length>0&&(o.push(ZS(s,t)),s=[]),o.push(i[a]));s.length>0&&o.push(ZS(s,t));var u;r?(u=ZS(Ci(r,t,!0)),u.classes=["tag"],o.push(u)):n&&o.push(n);var c=$c(["katex-html"],o);if(c.setAttribute("aria-hidden","true"),u){var f=u.children[0];f.style.height=Te(c.height+c.depth),c.depth&&(f.style.verticalAlign=Te(-c.depth))}return c}function mre(e){return new w0(e)}var mo=class{constructor(t,r,i){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=r||[],this.classes=i||[]}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=ph(this.classes));for(var i=0;i<this.children.length;i++)if(this.children[i]instanceof sa&&this.children[i+1]instanceof sa){for(var n=this.children[i].toText()+this.children[++i].toText();this.children[i+1]instanceof sa;)n+=this.children[++i].toText();t.appendChild(new sa(n).toNode())}else t.appendChild(this.children[i].toNode());return t}toMarkup(){var t="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="',t+=Je.escape(this.attributes[r]),t+='"');this.classes.length>0&&(t+=' class ="'+Je.escape(ph(this.classes))+'"'),t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}},sa=class{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return Je.escape(this.toText())}toText(){return this.text}},YO=class{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="\u200A":t>=.1666&&t<=.1667?this.character="\u2009":t>=.2222&&t<=.2223?this.character="\u2005":t>=.2777&&t<=.2778?this.character="\u2005\u200A":t>=-.05556&&t<=-.05555?this.character="\u200A\u2063":t>=-.1667&&t<=-.1666?this.character="\u2009\u2063":t>=-.2223&&t<=-.2222?this.character="\u205F\u2063":t>=-.2778&&t<=-.2777?this.character="\u2005\u2063":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",Te(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Te(this.width)+'"/>'}toText(){return this.character?this.character:" "}},we={MathNode:mo,TextNode:sa,SpaceNode:YO,newDocumentFragment:mre},la=function(t,r,i){return hr[r][t]&&hr[r][t].replace&&t.charCodeAt(0)!==55349&&!(lre.hasOwnProperty(t)&&i&&(i.fontFamily&&i.fontFamily.slice(4,6)==="tt"||i.font&&i.font.slice(4,6)==="tt"))&&(t=hr[r][t].replace),new we.TextNode(t)},i$=function(t){return t.length===1?t[0]:new we.MathNode("mrow",t)},n$=function(t,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var i=r.font;if(!i||i==="mathnormal")return null;var n=t.mode;if(i==="mathit")return"italic";if(i==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(i==="mathbf")return"bold";if(i==="mathbb")return"double-struck";if(i==="mathsfit")return"sans-serif-italic";if(i==="mathfrak")return"fraktur";if(i==="mathscr"||i==="mathcal")return"script";if(i==="mathsf")return"sans-serif";if(i==="mathtt")return"monospace";var o=t.text;if(Je.contains(["\\imath","\\jmath"],o))return null;hr[n][o]&&hr[n][o].replace&&(o=hr[n][o].replace);var s=Z.fontMap[i].fontName;return t$(o,s,n)?Z.fontMap[i].variant:null};function FO(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof sa&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var r=e.children[0];return r instanceof sa&&r.text===","}else return!1}var Yo=function(t,r,i){if(t.length===1){var n=or(t[0],r);return i&&n instanceof mo&&n.type==="mo"&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var o=[],s,a=0;a<t.length;a++){var l=or(t[a],r);if(l instanceof mo&&s instanceof mo){if(l.type==="mtext"&&s.type==="mtext"&&l.getAttribute("mathvariant")===s.getAttribute("mathvariant")){s.children.push(...l.children);continue}else if(l.type==="mn"&&s.type==="mn"){s.children.push(...l.children);continue}else if(FO(l)&&s.type==="mn"){s.children.push(...l.children);continue}else if(l.type==="mn"&&FO(s))l.children=[...s.children,...l.children],o.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(s.type==="mn"||FO(s))){var u=l.children[0];u instanceof mo&&u.type==="mn"&&(u.children=[...s.children,...u.children],o.pop())}else if(s.type==="mi"&&s.children.length===1){var c=s.children[0];if(c instanceof sa&&c.text==="\u0338"&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var f=l.children[0];f instanceof sa&&f.text.length>0&&(f.text=f.text.slice(0,1)+"\u0338"+f.text.slice(1),o.pop())}}}o.push(l),s=l}return o},mh=function(t,r,i){return i$(Yo(t,r,i))},or=function(t,r){if(!t)return new we.MathNode("mrow");if(a7[t.type]){var i=a7[t.type](t,r);return i}else throw new Ce("Got group of unknown type: '"+t.type+"'")};function $te(e,t,r,i,n){var o=Yo(e,r),s;o.length===1&&o[0]instanceof mo&&Je.contains(["mrow","mtable"],o[0].type)?s=o[0]:s=new we.MathNode("mrow",o);var a=new we.MathNode("annotation",[new we.TextNode(t)]);a.setAttribute("encoding","application/x-tex");var l=new we.MathNode("semantics",[s,a]),u=new we.MathNode("math",[l]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),i&&u.setAttribute("display","block");var c=n?"katex":"katex-mathml";return Z.makeSpan([c],[u])}var gre=function(t){return new n7({style:t.displayMode?rt.DISPLAY:rt.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},vre=function(t,r){if(r.displayMode){var i=["katex-display"];r.leqno&&i.push("leqno"),r.fleqn&&i.push("fleqn"),t=Z.makeSpan(i,[t])}return t},LTe=function(t,r,i){var n=gre(i),o;if(i.output==="mathml")return $te(t,r,n,i.displayMode,!0);if(i.output==="html"){var s=GO(t,n);o=Z.makeSpan(["katex"],[s])}else{var a=$te(t,r,n,i.displayMode,!1),l=GO(t,n);o=Z.makeSpan(["katex"],[a,l])}return vre(o,i)},PTe=function(t,r,i){var n=gre(i),o=GO(t,n),s=Z.makeSpan(["katex"],[o]);return vre(s,i)},ITe={widehat:"^",widecheck:"\u02C7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23DF",overbrace:"\u23DE",overgroup:"\u23E0",undergroup:"\u23E1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21D2",xRightarrow:"\u21D2",overleftharpoon:"\u21BC",xleftharpoonup:"\u21BC",overrightharpoon:"\u21C0",xrightharpoonup:"\u21C0",xLeftarrow:"\u21D0",xLeftrightarrow:"\u21D4",xhookleftarrow:"\u21A9",xhookrightarrow:"\u21AA",xmapsto:"\u21A6",xrightharpoondown:"\u21C1",xleftharpoondown:"\u21BD",xrightleftharpoons:"\u21CC",xleftrightharpoons:"\u21CB",xtwoheadleftarrow:"\u219E",xtwoheadrightarrow:"\u21A0",xlongequal:"=",xtofrom:"\u21C4",xrightleftarrows:"\u21C4",xrightequilibrium:"\u21CC",xleftequilibrium:"\u21CB","\\cdrightarrow":"\u2192","\\cdleftarrow":"\u2190","\\cdlongequal":"="},NTe=function(t){var r=new we.MathNode("mo",[new we.TextNode(ITe[t.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},BTe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},zTe=function(t){return t.type==="ordgroup"?t.body.length:1},HTe=function(t,r){function i(){var a=4e5,l=t.label.slice(1);if(Je.contains(["widehat","widecheck","widetilde","utilde"],l)){var u=t,c=zTe(u.base),f,h,p;if(c>5)l==="widehat"||l==="widecheck"?(f=420,a=2364,p=.42,h=l+"4"):(f=312,a=2340,p=.34,h="tilde4");else{var d=[1,1,2,2,3,3][c];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][d],f=[0,239,300,360,420][d],p=[0,.24,.3,.3,.36,.42][d],h=l+d):(a=[0,600,1033,2339,2340][d],f=[0,260,286,306,312][d],p=[0,.26,.286,.3,.306,.34][d],h="tilde"+d)}var m=new su(h),g=new ol([m],{width:"100%",height:Te(p),viewBox:"0 0 "+a+" "+f,preserveAspectRatio:"none"});return{span:Z.makeSvgSpan([],[g],r),minWidth:0,height:p}}else{var v=[],b=BTe[l],[y,x,S]=b,_=S/1e3,w=y.length,k,A;if(w===1){var M=b[3];k=["hide-tail"],A=[M]}else if(w===2)k=["halfarrow-left","halfarrow-right"],A=["xMinYMin","xMaxYMin"];else if(w===3)k=["brace-left","brace-center","brace-right"],A=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+w+" children.");for(var D=0;D<w;D++){var z=new su(y[D]),P=new ol([z],{width:"400em",height:Te(_),viewBox:"0 0 "+a+" "+S,preserveAspectRatio:A[D]+" slice"}),I=Z.makeSvgSpan([k[D]],[P],r);if(w===1)return{span:I,minWidth:x,height:_};I.style.height=Te(_),v.push(I)}return{span:Z.makeSpan(["stretchy"],v,r),minWidth:x,height:_}}}var{span:n,minWidth:o,height:s}=i();return n.height=s,n.style.height=Te(s),o>0&&(n.style.minWidth=Te(o)),n},UTe=function(t,r,i,n,o){var s,a=t.height+t.depth+i+n;if(/fbox|color|angl/.test(r)){if(s=Z.makeSpan(["stretchy",r],[],o),r==="fbox"){var l=o.color&&o.getColor();l&&(s.style.borderColor=l)}}else{var u=[];/^[bx]cancel$/.test(r)&&u.push(new B2({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&u.push(new B2({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new ol(u,{width:"100%",height:Te(a)});s=Z.makeSvgSpan([],[c],o)}return s.height=a,s.style.height=Te(a),s},Lc={encloseSpan:UTe,mathMLnode:NTe,svgSpan:HTe};function gt(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function o$(e){var t=d7(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function d7(e){return e&&(e.type==="atom"||pTe.hasOwnProperty(e.type))?e:null}var s$=(e,t)=>{var r,i,n;e&&e.type==="supsub"?(i=gt(e.base,"accent"),r=i.base,e.base=r,n=hTe($t(e,t)),e.base=i):(i=gt(e,"accent"),r=i.base);var o=$t(r,t.havingCrampedStyle()),s=i.isShifty&&Je.isCharacterBox(r),a=0;if(s){var l=Je.getBaseElem(r),u=$t(l,t.havingCrampedStyle());a=Dte(u).skew}var c=i.label==="\\c",f=c?o.height+o.depth:Math.min(o.height,t.fontMetrics().xHeight),h;if(i.isStretchy)h=Lc.svgSpan(i,t),h=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+Te(2*a)+")",marginLeft:Te(2*a)}:void 0}]},t);else{var p,d;i.label==="\\vec"?(p=Z.staticSvg("vec",t),d=Z.svgData.vec[1]):(p=Z.makeOrd({mode:i.mode,text:i.label},t,"textord"),p=Dte(p),p.italic=0,d=p.width,c&&(f+=p.depth)),h=Z.makeSpan(["accent-body"],[p]);var m=i.label==="\\textcircled";m&&(h.classes.push("accent-full"),f=o.height);var g=a;m||(g-=d/2),h.style.left=Te(g),i.label==="\\textcircled"&&(h.style.top=".2em"),h=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-f},{type:"elem",elem:h}]},t)}var v=Z.makeSpan(["mord","accent"],[h],t);return n?(n.children[0]=v,n.height=Math.max(v.height,n.height),n.classes[0]="mord",n):v},bre=(e,t)=>{var r=e.isStretchy?Lc.mathMLnode(e.label):new we.MathNode("mo",[la(e.label,e.mode)]),i=new we.MathNode("mover",[or(e.base,t),r]);return i.setAttribute("accent","true"),i},qTe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));Oe({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=l7(t[0]),i=!qTe.test(e.funcName),n=!i||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:i,isShifty:n,base:r}},htmlBuilder:s$,mathmlBuilder:bre});Oe({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],i=e.parser.mode;return i==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),i="text"),{type:"accent",mode:i,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:s$,mathmlBuilder:bre});Oe({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0];return{type:"accentUnder",mode:r.mode,label:i,base:n}},htmlBuilder:(e,t)=>{var r=$t(e.base,t),i=Lc.svgSpan(e,t),n=e.label==="\\utilde"?.12:0,o=Z.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:n},{type:"elem",elem:r}]},t);return Z.makeSpan(["mord","accentunder"],[o],t)},mathmlBuilder:(e,t)=>{var r=Lc.mathMLnode(e.label),i=new we.MathNode("munder",[or(e.base,t),r]);return i.setAttribute("accentunder","true"),i}});var JS=e=>{var t=new we.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Oe({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:i,funcName:n}=e;return{type:"xArrow",mode:i.mode,label:n,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,i=t.havingStyle(r.sup()),n=Z.wrapFragment($t(e.body,i,t),t),o=e.label.slice(0,2)==="\\x"?"x":"cd";n.classes.push(o+"-arrow-pad");var s;e.below&&(i=t.havingStyle(r.sub()),s=Z.wrapFragment($t(e.below,i,t),t),s.classes.push(o+"-arrow-pad"));var a=Lc.svgSpan(e,t),l=-t.fontMetrics().axisHeight+.5*a.height,u=-t.fontMetrics().axisHeight-.5*a.height-.111;(n.depth>.25||e.label==="\\xleftequilibrium")&&(u-=n.depth);var c;if(s){var f=-t.fontMetrics().axisHeight+s.height+.5*a.height+.111;c=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:u},{type:"elem",elem:a,shift:l},{type:"elem",elem:s,shift:f}]},t)}else c=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:u},{type:"elem",elem:a,shift:l}]},t);return c.children[0].children[0].children[1].classes.push("svg-align"),Z.makeSpan(["mrel","x-arrow"],[c],t)},mathmlBuilder(e,t){var r=Lc.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var i;if(e.body){var n=JS(or(e.body,t));if(e.below){var o=JS(or(e.below,t));i=new we.MathNode("munderover",[r,o,n])}else i=new we.MathNode("mover",[r,n])}else if(e.below){var s=JS(or(e.below,t));i=new we.MathNode("munder",[r,s])}else i=JS(),i=new we.MathNode("mover",[r,i]);return i}});var jTe=Z.makeSpan;function yre(e,t){var r=Ci(e.body,t,!0);return jTe([e.mclass],r,t)}function xre(e,t){var r,i=Yo(e.body,t);return e.mclass==="minner"?r=new we.MathNode("mpadded",i):e.mclass==="mord"?e.isCharacterBox?(r=i[0],r.type="mi"):r=new we.MathNode("mi",i):(e.isCharacterBox?(r=i[0],r.type="mo"):r=new we.MathNode("mo",i),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Oe({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:i}=e,n=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+i.slice(5),body:ei(n),isCharacterBox:Je.isCharacterBox(n)}},htmlBuilder:yre,mathmlBuilder:xre});var p7=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};Oe({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:p7(t[0]),body:ei(t[1]),isCharacterBox:Je.isCharacterBox(t[1])}}});Oe({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:i}=e,n=t[1],o=t[0],s;i!=="\\stackrel"?s=p7(n):s="mrel";var a={type:"op",mode:n.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:i!=="\\stackrel",body:ei(n)},l={type:"supsub",mode:o.mode,base:a,sup:i==="\\underset"?null:o,sub:i==="\\underset"?o:null};return{type:"mclass",mode:r.mode,mclass:s,body:[l],isCharacterBox:Je.isCharacterBox(l)}},htmlBuilder:yre,mathmlBuilder:xre});Oe({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:p7(t[0]),body:ei(t[0])}},htmlBuilder(e,t){var r=Ci(e.body,t,!0),i=Z.makeSpan([e.mclass],r,t);return i.style.textShadow="0.02em 0.01em 0.04px",i},mathmlBuilder(e,t){var r=Yo(e.body,t),i=new we.MathNode("mstyle",r);return i.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),i}});var WTe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Lte=()=>({type:"styling",body:[],mode:"math",style:"display"}),Pte=e=>e.type==="textord"&&e.text==="@",VTe=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function GTe(e,t,r){var i=WTe[e];switch(i){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(i,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var n=r.callFunction("\\\\cdleft",[t[0]],[]),o={type:"atom",text:i,mode:"math",family:"rel"},s=r.callFunction("\\Big",[o],[]),a=r.callFunction("\\\\cdright",[t[1]],[]),l={type:"ordgroup",mode:"math",body:[n,s,a]};return r.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function YTe(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new Ce("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var i=[],n=[i],o=0;o<t.length;o++){for(var s=t[o],a=Lte(),l=0;l<s.length;l++)if(!Pte(s[l]))a.body.push(s[l]);else{i.push(a),l+=1;var u=o$(s[l]).text,c=new Array(2);if(c[0]={type:"ordgroup",mode:"math",body:[]},c[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var f=0;f<2;f++){for(var h=!0,p=l+1;p<s.length;p++){if(VTe(s[p],u)){h=!1,l=p;break}if(Pte(s[p]))throw new Ce("Missing a "+u+" character to complete a CD arrow.",s[p]);c[f].body.push(s[p])}if(h)throw new Ce("Missing a "+u+" character to complete a CD arrow.",s[l])}else throw new Ce('Expected one of "<>AV=|." after @',s[l]);var d=GTe(u,c,e),m={type:"styling",body:[d],mode:"math",style:"display"};i.push(m),a=Lte()}o%2===0?i.push(a):i.shift(),i=[],n.push(i)}e.gullet.endGroup(),e.gullet.endGroup();var g=new Array(n[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:n,arraystretch:1,addJot:!0,rowGaps:[null],cols:g,colSeparationType:"CD",hLinesBeforeRow:new Array(n.length+1).fill([])}}Oe({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:i}=e;return{type:"cdlabel",mode:r.mode,side:i.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),i=Z.wrapFragment($t(e.label,r,t),t);return i.classes.push("cd-label-"+e.side),i.style.bottom=Te(.8-i.depth),i.height=0,i.depth=0,i},mathmlBuilder(e,t){var r=new we.MathNode("mrow",[or(e.label,t)]);return r=new we.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new we.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});Oe({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=Z.wrapFragment($t(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new we.MathNode("mrow",[or(e.fragment,t)])}});Oe({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,i=gt(t[0],"ordgroup"),n=i.body,o="",s=0;s<n.length;s++){var a=gt(n[s],"textord");o+=a.text}var l=parseInt(o),u;if(isNaN(l))throw new Ce("\\@char has non-numeric argument "+o);if(l<0||l>=1114111)throw new Ce("\\@char with invalid code point "+o);return l<=65535?u=String.fromCharCode(l):(l-=65536,u=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:r.mode,text:u}}});var _re=(e,t)=>{var r=Ci(e.body,t.withColor(e.color),!1);return Z.makeFragment(r)},wre=(e,t)=>{var r=Yo(e.body,t.withColor(e.color)),i=new we.MathNode("mstyle",r);return i.setAttribute("mathcolor",e.color),i};Oe({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,i=gt(t[0],"color-token").color,n=t[1];return{type:"color",mode:r.mode,color:i,body:ei(n)}},htmlBuilder:_re,mathmlBuilder:wre});Oe({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:i}=e,n=gt(t[0],"color-token").color;r.gullet.macros.set("\\current@color",n);var o=r.parseExpression(!0,i);return{type:"color",mode:r.mode,color:n,body:o}},htmlBuilder:_re,mathmlBuilder:wre});Oe({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:i}=e,n=i.gullet.future().text==="["?i.parseSizeGroup(!0):null,o=!i.settings.displayMode||!i.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:i.mode,newLine:o,size:n&&gt(n,"size").value}},htmlBuilder(e,t){var r=Z.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=Te($r(e.size,t)))),r},mathmlBuilder(e,t){var r=new we.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",Te($r(e.size,t)))),r}});var XO={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Sre=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new Ce("Expected a control sequence",e);return t},XTe=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},Cre=(e,t,r,i)=>{var n=e.gullet.macros.get(r.text);n==null&&(r.noexpand=!0,n={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,n,i)};Oe({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var i=t.fetch();if(XO[i.text])return(r==="\\global"||r==="\\\\globallong")&&(i.text=XO[i.text]),gt(t.parseFunction(),"internal");throw new Ce("Invalid token after macro prefix",i)}});Oe({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,i=t.gullet.popToken(),n=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(n))throw new Ce("Expected a control sequence",i);for(var o=0,s,a=[[]];t.gullet.future().text!=="{";)if(i=t.gullet.popToken(),i.text==="#"){if(t.gullet.future().text==="{"){s=t.gullet.future(),a[o].push("{");break}if(i=t.gullet.popToken(),!/^[1-9]$/.test(i.text))throw new Ce('Invalid argument number "'+i.text+'"');if(parseInt(i.text)!==o+1)throw new Ce('Argument number "'+i.text+'" out of order');o++,a.push([])}else{if(i.text==="EOF")throw new Ce("Expected a macro definition");a[o].push(i.text)}var{tokens:l}=t.gullet.consumeArg();return s&&l.unshift(s),(r==="\\edef"||r==="\\xdef")&&(l=t.gullet.expandTokens(l),l.reverse()),t.gullet.macros.set(n,{tokens:l,numArgs:o,delimiters:a},r===XO[r]),{type:"internal",mode:t.mode}}});Oe({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,i=Sre(t.gullet.popToken());t.gullet.consumeSpaces();var n=XTe(t);return Cre(t,i,n,r==="\\\\globallet"),{type:"internal",mode:t.mode}}});Oe({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,i=Sre(t.gullet.popToken()),n=t.gullet.popToken(),o=t.gullet.popToken();return Cre(t,i,o,r==="\\\\globalfuture"),t.gullet.pushToken(o),t.gullet.pushToken(n),{type:"internal",mode:t.mode}}});var $2=function(t,r,i){var n=hr.math[t]&&hr.math[t].replace,o=t$(n||t,r,i);if(!o)throw new Error("Unsupported symbol "+t+" and font size "+r+".");return o},a$=function(t,r,i,n){var o=i.havingBaseStyle(r),s=Z.makeSpan(n.concat(o.sizingClasses(i)),[t],i),a=o.sizeMultiplier/i.sizeMultiplier;return s.height*=a,s.depth*=a,s.maxFontSize=o.sizeMultiplier,s},kre=function(t,r,i){var n=r.havingBaseStyle(i),o=(1-r.sizeMultiplier/n.sizeMultiplier)*r.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=Te(o),t.height-=o,t.depth+=o},KTe=function(t,r,i,n,o,s){var a=Z.makeSymbol(t,"Main-Regular",o,n),l=a$(a,r,n,s);return i&&kre(l,n,r),l},ZTe=function(t,r,i,n){return Z.makeSymbol(t,"Size"+r+"-Regular",i,n)},Ere=function(t,r,i,n,o,s){var a=ZTe(t,r,o,n),l=a$(Z.makeSpan(["delimsizing","size"+r],[a],n),rt.TEXT,n,s);return i&&kre(l,n,rt.TEXT),l},OO=function(t,r,i){var n;r==="Size1-Regular"?n="delim-size1":n="delim-size4";var o=Z.makeSpan(["delimsizinginner",n],[Z.makeSpan([],[Z.makeSymbol(t,r,i)])]);return{type:"elem",elem:o}},$O=function(t,r,i){var n=ou["Size4-Regular"][t.charCodeAt(0)]?ou["Size4-Regular"][t.charCodeAt(0)][4]:ou["Size1-Regular"][t.charCodeAt(0)][4],o=new su("inner",nTe(t,Math.round(1e3*r))),s=new ol([o],{width:Te(n),height:Te(r),style:"width:"+Te(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),a=Z.makeSvgSpan([],[s],i);return a.height=r,a.style.height=Te(r),a.style.width=Te(n),{type:"elem",elem:a}},KO=.008,QS={type:"kern",size:-1*KO},JTe=["|","\\lvert","\\rvert","\\vert"],QTe=["\\|","\\lVert","\\rVert","\\Vert"],Are=function(t,r,i,n,o,s){var a,l,u,c,f="",h=0;a=u=c=t,l=null;var p="Size1-Regular";t==="\\uparrow"?u=c="\u23D0":t==="\\Uparrow"?u=c="\u2016":t==="\\downarrow"?a=u="\u23D0":t==="\\Downarrow"?a=u="\u2016":t==="\\updownarrow"?(a="\\uparrow",u="\u23D0",c="\\downarrow"):t==="\\Updownarrow"?(a="\\Uparrow",u="\u2016",c="\\Downarrow"):Je.contains(JTe,t)?(u="\u2223",f="vert",h=333):Je.contains(QTe,t)?(u="\u2225",f="doublevert",h=556):t==="["||t==="\\lbrack"?(a="\u23A1",u="\u23A2",c="\u23A3",p="Size4-Regular",f="lbrack",h=667):t==="]"||t==="\\rbrack"?(a="\u23A4",u="\u23A5",c="\u23A6",p="Size4-Regular",f="rbrack",h=667):t==="\\lfloor"||t==="\u230A"?(u=a="\u23A2",c="\u23A3",p="Size4-Regular",f="lfloor",h=667):t==="\\lceil"||t==="\u2308"?(a="\u23A1",u=c="\u23A2",p="Size4-Regular",f="lceil",h=667):t==="\\rfloor"||t==="\u230B"?(u=a="\u23A5",c="\u23A6",p="Size4-Regular",f="rfloor",h=667):t==="\\rceil"||t==="\u2309"?(a="\u23A4",u=c="\u23A5",p="Size4-Regular",f="rceil",h=667):t==="("||t==="\\lparen"?(a="\u239B",u="\u239C",c="\u239D",p="Size4-Regular",f="lparen",h=875):t===")"||t==="\\rparen"?(a="\u239E",u="\u239F",c="\u23A0",p="Size4-Regular",f="rparen",h=875):t==="\\{"||t==="\\lbrace"?(a="\u23A7",l="\u23A8",c="\u23A9",u="\u23AA",p="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(a="\u23AB",l="\u23AC",c="\u23AD",u="\u23AA",p="Size4-Regular"):t==="\\lgroup"||t==="\u27EE"?(a="\u23A7",c="\u23A9",u="\u23AA",p="Size4-Regular"):t==="\\rgroup"||t==="\u27EF"?(a="\u23AB",c="\u23AD",u="\u23AA",p="Size4-Regular"):t==="\\lmoustache"||t==="\u23B0"?(a="\u23A7",c="\u23AD",u="\u23AA",p="Size4-Regular"):(t==="\\rmoustache"||t==="\u23B1")&&(a="\u23AB",c="\u23A9",u="\u23AA",p="Size4-Regular");var d=$2(a,p,o),m=d.height+d.depth,g=$2(u,p,o),v=g.height+g.depth,b=$2(c,p,o),y=b.height+b.depth,x=0,S=1;if(l!==null){var _=$2(l,p,o);x=_.height+_.depth,S=2}var w=m+y+x,k=Math.max(0,Math.ceil((r-w)/(S*v))),A=w+k*S*v,M=n.fontMetrics().axisHeight;i&&(M*=n.sizeMultiplier);var D=A/2-M,z=[];if(f.length>0){var P=A-m-y,I=Math.round(A*1e3),N=oTe(f,Math.round(P*1e3)),H=new su(f,N),T=(h/1e3).toFixed(3)+"em",O=(I/1e3).toFixed(3)+"em",L=new ol([H],{width:T,height:O,viewBox:"0 0 "+h+" "+I}),q=Z.makeSvgSpan([],[L],n);q.height=I/1e3,q.style.width=T,q.style.height=O,z.push({type:"elem",elem:q})}else{if(z.push(OO(c,p,o)),z.push(QS),l===null){var X=A-m-y+2*KO;z.push($O(u,X,n))}else{var ne=(A-m-y-x)/2+2*KO;z.push($O(u,ne,n)),z.push(QS),z.push(OO(l,p,o)),z.push(QS),z.push($O(u,ne,n))}z.push(QS),z.push(OO(a,p,o))}var ke=n.havingBaseStyle(rt.TEXT),Ee=Z.makeVList({positionType:"bottom",positionData:D,children:z},ke);return a$(Z.makeSpan(["delimsizing","mult"],[Ee],ke),rt.TEXT,n,s)},LO=80,PO=.08,IO=function(t,r,i,n,o){var s=iTe(t,n,i),a=new su(t,s),l=new ol([a],{width:"400em",height:Te(r),viewBox:"0 0 400000 "+i,preserveAspectRatio:"xMinYMin slice"});return Z.makeSvgSpan(["hide-tail"],[l],o)},eDe=function(t,r){var i=r.havingBaseSizing(),n=Mre("\\surd",t*i.sizeMultiplier,Rre,i),o=i.sizeMultiplier,s=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),a,l=0,u=0,c=0,f;return n.type==="small"?(c=1e3+1e3*s+LO,t<1?o=1:t<1.4&&(o=.7),l=(1+s+PO)/o,u=(1+s)/o,a=IO("sqrtMain",l,c,s,r),a.style.minWidth="0.853em",f=.833/o):n.type==="large"?(c=(1e3+LO)*L2[n.size],u=(L2[n.size]+s)/o,l=(L2[n.size]+s+PO)/o,a=IO("sqrtSize"+n.size,l,c,s,r),a.style.minWidth="1.02em",f=1/o):(l=t+s+PO,u=t+s,c=Math.floor(1e3*t+s)+LO,a=IO("sqrtTall",l,c,s,r),a.style.minWidth="0.742em",f=1.056),a.height=u,a.style.height=Te(l),{span:a,advanceWidth:f,ruleWidth:(r.fontMetrics().sqrtRuleThickness+s)*o}},Tre=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","\\surd"],tDe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1"],Dre=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],L2=[0,1.2,1.8,2.4,3],rDe=function(t,r,i,n,o){if(t==="<"||t==="\\lt"||t==="\u27E8"?t="\\langle":(t===">"||t==="\\gt"||t==="\u27E9")&&(t="\\rangle"),Je.contains(Tre,t)||Je.contains(Dre,t))return Ere(t,r,!1,i,n,o);if(Je.contains(tDe,t))return Are(t,L2[r],!1,i,n,o);throw new Ce("Illegal delimiter: '"+t+"'")},iDe=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],nDe=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"stack"}],Rre=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],oDe=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},Mre=function(t,r,i,n){for(var o=Math.min(2,3-n.style.size),s=o;s<i.length&&i[s].type!=="stack";s++){var a=$2(t,oDe(i[s]),"math"),l=a.height+a.depth;if(i[s].type==="small"){var u=n.havingBaseStyle(i[s].style);l*=u.sizeMultiplier}if(l>r)return i[s]}return i[i.length-1]},Fre=function(t,r,i,n,o,s){t==="<"||t==="\\lt"||t==="\u27E8"?t="\\langle":(t===">"||t==="\\gt"||t==="\u27E9")&&(t="\\rangle");var a;Je.contains(Dre,t)?a=iDe:Je.contains(Tre,t)?a=Rre:a=nDe;var l=Mre(t,r,a,n);return l.type==="small"?KTe(t,l.style,i,n,o,s):l.type==="large"?Ere(t,l.size,i,n,o,s):Are(t,r,i,n,o,s)},sDe=function(t,r,i,n,o,s){var a=n.fontMetrics().axisHeight*n.sizeMultiplier,l=901,u=5/n.fontMetrics().ptPerEm,c=Math.max(r-a,i+a),f=Math.max(c/500*l,2*c-u);return Fre(t,f,!0,n,o,s)},Oc={sqrtImage:eDe,sizedDelim:rDe,sizeToMaxHeight:L2,customSizedDelim:Fre,leftRightDelim:sDe},Ite={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},aDe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27E8","\\rangle","\u27E9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function m7(e,t){var r=d7(e);if(r&&Je.contains(aDe,r.text))return r;throw r?new Ce("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new Ce("Invalid delimiter type '"+e.type+"'",e)}Oe({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=m7(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Ite[e.funcName].size,mclass:Ite[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?Z.makeSpan([e.mclass]):Oc.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(la(e.delim,e.mode));var r=new we.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var i=Te(Oc.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",i),r.setAttribute("maxsize",i),r}});function Nte(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Oe({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new Ce("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:m7(t[0],e).text,color:r}}});Oe({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=m7(t[0],e),i=e.parser;++i.leftrightDepth;var n=i.parseExpression(!1);--i.leftrightDepth,i.expect("\\right",!1);var o=gt(i.parseFunction(),"leftright-right");return{type:"leftright",mode:i.mode,body:n,left:r.text,right:o.delim,rightColor:o.color}},htmlBuilder:(e,t)=>{Nte(e);for(var r=Ci(e.body,t,!0,["mopen","mclose"]),i=0,n=0,o=!1,s=0;s<r.length;s++)r[s].isMiddle?o=!0:(i=Math.max(r[s].height,i),n=Math.max(r[s].depth,n));i*=t.sizeMultiplier,n*=t.sizeMultiplier;var a;if(e.left==="."?a=z2(t,["mopen"]):a=Oc.leftRightDelim(e.left,i,n,t,e.mode,["mopen"]),r.unshift(a),o)for(var l=1;l<r.length;l++){var u=r[l],c=u.isMiddle;c&&(r[l]=Oc.leftRightDelim(c.delim,i,n,c.options,e.mode,[]))}var f;if(e.right===".")f=z2(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;f=Oc.leftRightDelim(e.right,i,n,h,e.mode,["mclose"])}return r.push(f),Z.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{Nte(e);var r=Yo(e.body,t);if(e.left!=="."){var i=new we.MathNode("mo",[la(e.left,e.mode)]);i.setAttribute("fence","true"),r.unshift(i)}if(e.right!=="."){var n=new we.MathNode("mo",[la(e.right,e.mode)]);n.setAttribute("fence","true"),e.rightColor&&n.setAttribute("mathcolor",e.rightColor),r.push(n)}return i$(r)}});Oe({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=m7(t[0],e);if(!e.parser.leftrightDepth)throw new Ce("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=z2(t,[]);else{r=Oc.sizedDelim(e.delim,1,t,e.mode,[]);var i={delim:e.delim,options:t};r.isMiddle=i}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?la("|","text"):la(e.delim,e.mode),i=new we.MathNode("mo",[r]);return i.setAttribute("fence","true"),i.setAttribute("lspace","0.05em"),i.setAttribute("rspace","0.05em"),i}});var l$=(e,t)=>{var r=Z.wrapFragment($t(e.body,t),t),i=e.label.slice(1),n=t.sizeMultiplier,o,s=0,a=Je.isCharacterBox(e.body);if(i==="sout")o=Z.makeSpan(["stretchy","sout"]),o.height=t.fontMetrics().defaultRuleThickness/n,s=-.5*t.fontMetrics().xHeight;else if(i==="phase"){var l=$r({number:.6,unit:"pt"},t),u=$r({number:.35,unit:"ex"},t),c=t.havingBaseSizing();n=n/c.sizeMultiplier;var f=r.height+r.depth+l+u;r.style.paddingLeft=Te(f/2+l);var h=Math.floor(1e3*f*n),p=tTe(h),d=new ol([new su("phase",p)],{width:"400em",height:Te(h/1e3),viewBox:"0 0 400000 "+h,preserveAspectRatio:"xMinYMin slice"});o=Z.makeSvgSpan(["hide-tail"],[d],t),o.style.height=Te(f),s=r.depth+l+u}else{/cancel/.test(i)?a||r.classes.push("cancel-pad"):i==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var m=0,g=0,v=0;/box/.test(i)?(v=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),m=t.fontMetrics().fboxsep+(i==="colorbox"?0:v),g=m):i==="angl"?(v=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),m=4*v,g=Math.max(0,.25-r.depth)):(m=a?.2:0,g=m),o=Lc.encloseSpan(r,i,m,g,t),/fbox|boxed|fcolorbox/.test(i)?(o.style.borderStyle="solid",o.style.borderWidth=Te(v)):i==="angl"&&v!==.049&&(o.style.borderTopWidth=Te(v),o.style.borderRightWidth=Te(v)),s=r.depth+g,e.backgroundColor&&(o.style.backgroundColor=e.backgroundColor,e.borderColor&&(o.style.borderColor=e.borderColor))}var b;if(e.backgroundColor)b=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:s},{type:"elem",elem:r,shift:0}]},t);else{var y=/cancel|phase/.test(i)?["svg-align"]:[];b=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:o,shift:s,wrapperClasses:y}]},t)}return/cancel/.test(i)&&(b.height=r.height,b.depth=r.depth),/cancel/.test(i)&&!a?Z.makeSpan(["mord","cancel-lap"],[b],t):Z.makeSpan(["mord"],[b],t)},u$=(e,t)=>{var r=0,i=new we.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[or(e.body,t)]);switch(e.label){case"\\cancel":i.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":i.setAttribute("notation","downdiagonalstrike");break;case"\\phase":i.setAttribute("notation","phasorangle");break;case"\\sout":i.setAttribute("notation","horizontalstrike");break;case"\\fbox":i.setAttribute("notation","box");break;case"\\angl":i.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,i.setAttribute("width","+"+2*r+"pt"),i.setAttribute("height","+"+2*r+"pt"),i.setAttribute("lspace",r+"pt"),i.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var n=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);i.setAttribute("style","border: "+n+"em solid "+String(e.borderColor))}break;case"\\xcancel":i.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&i.setAttribute("mathbackground",e.backgroundColor),i};Oe({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:i,funcName:n}=e,o=gt(t[0],"color-token").color,s=t[1];return{type:"enclose",mode:i.mode,label:n,backgroundColor:o,body:s}},htmlBuilder:l$,mathmlBuilder:u$});Oe({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:i,funcName:n}=e,o=gt(t[0],"color-token").color,s=gt(t[1],"color-token").color,a=t[2];return{type:"enclose",mode:i.mode,label:n,backgroundColor:s,borderColor:o,body:a}},htmlBuilder:l$,mathmlBuilder:u$});Oe({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}});Oe({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:i}=e,n=t[0];return{type:"enclose",mode:r.mode,label:i,body:n}},htmlBuilder:l$,mathmlBuilder:u$});Oe({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var Ore={};function au(e){for(var{type:t,names:r,props:i,handler:n,htmlBuilder:o,mathmlBuilder:s}=e,a={type:t,numArgs:i.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:n},l=0;l<r.length;++l)Ore[r[l]]=a;o&&(s7[t]=o),s&&(a7[t]=s)}var $re={};function $(e,t){$re[e]=t}function Bte(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}var g7=e=>{var t=e.parser.settings;if(!t.displayMode)throw new Ce("{"+e.envName+"} can be used only in display mode.")};function c$(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function gh(e,t,r){var{hskipBeforeAndAfter:i,addJot:n,cols:o,arraystretch:s,colSeparationType:a,autoTag:l,singleRow:u,emptySingleRow:c,maxNumCols:f,leqno:h}=t;if(e.gullet.beginGroup(),u||e.gullet.macros.set("\\cr","\\\\\\relax"),!s){var p=e.gullet.expandMacroAsText("\\arraystretch");if(p==null)s=1;else if(s=parseFloat(p),!s||s<0)throw new Ce("Invalid \\arraystretch: "+p)}e.gullet.beginGroup();var d=[],m=[d],g=[],v=[],b=l!=null?[]:void 0;function y(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function x(){b&&(e.gullet.macros.get("\\df@tag")?(b.push(e.subparse([new aa("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):b.push(!!l&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(y(),v.push(Bte(e));;){var S=e.parseExpression(!1,u?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),S={type:"ordgroup",mode:e.mode,body:S},r&&(S={type:"styling",mode:e.mode,style:r,body:[S]}),d.push(S);var _=e.fetch().text;if(_==="&"){if(f&&d.length===f){if(u||a)throw new Ce("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(_==="\\end"){x(),d.length===1&&S.type==="styling"&&S.body[0].body.length===0&&(m.length>1||!c)&&m.pop(),v.length<m.length+1&&v.push([]);break}else if(_==="\\\\"){e.consume();var w=void 0;e.gullet.future().text!==" "&&(w=e.parseSizeGroup(!0)),g.push(w?w.value:null),x(),v.push(Bte(e)),d=[],m.push(d),y()}else throw new Ce("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:n,arraystretch:s,body:m,cols:o,rowGaps:g,hskipBeforeAndAfter:i,hLinesBeforeRow:v,colSeparationType:a,tags:b,leqno:h}}function f$(e){return e.slice(0,1)==="d"?"display":"text"}var lu=function(t,r){var i,n,o=t.body.length,s=t.hLinesBeforeRow,a=0,l=new Array(o),u=[],c=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),f=1/r.fontMetrics().ptPerEm,h=5*f;if(t.colSeparationType&&t.colSeparationType==="small"){var p=r.havingStyle(rt.SCRIPT).sizeMultiplier;h=.2778*(p/r.sizeMultiplier)}var d=t.colSeparationType==="CD"?$r({number:3,unit:"ex"},r):12*f,m=3*f,g=t.arraystretch*d,v=.7*g,b=.3*g,y=0;function x(Xo){for(var Ic=0;Ic<Xo.length;++Ic)Ic>0&&(y+=.25),u.push({pos:y,isDashed:Xo[Ic]})}for(x(s[0]),i=0;i<t.body.length;++i){var S=t.body[i],_=v,w=b;a<S.length&&(a=S.length);var k=new Array(S.length);for(n=0;n<S.length;++n){var A=$t(S[n],r);w<A.depth&&(w=A.depth),_<A.height&&(_=A.height),k[n]=A}var M=t.rowGaps[i],D=0;M&&(D=$r(M,r),D>0&&(D+=b,w<D&&(w=D),D=0)),t.addJot&&(w+=m),k.height=_,k.depth=w,y+=_,k.pos=y,y+=w+D,l[i]=k,x(s[i+1])}var z=y/2+r.fontMetrics().axisHeight,P=t.cols||[],I=[],N,H,T=[];if(t.tags&&t.tags.some(Xo=>Xo))for(i=0;i<o;++i){var O=l[i],L=O.pos-z,q=t.tags[i],X=void 0;q===!0?X=Z.makeSpan(["eqn-num"],[],r):q===!1?X=Z.makeSpan([],[],r):X=Z.makeSpan([],Ci(q,r,!0),r),X.depth=O.depth,X.height=O.height,T.push({type:"elem",elem:X,shift:L})}for(n=0,H=0;n<a||H<P.length;++n,++H){for(var ne=P[H]||{},ke=!0;ne.type==="separator";){if(ke||(N=Z.makeSpan(["arraycolsep"],[]),N.style.width=Te(r.fontMetrics().doubleRuleSep),I.push(N)),ne.separator==="|"||ne.separator===":"){var Ee=ne.separator==="|"?"solid":"dashed",G=Z.makeSpan(["vertical-separator"],[],r);G.style.height=Te(y),G.style.borderRightWidth=Te(c),G.style.borderRightStyle=Ee,G.style.margin="0 "+Te(-c/2);var B=y-z;B&&(G.style.verticalAlign=Te(-B)),I.push(G)}else throw new Ce("Invalid separator type: "+ne.separator);H++,ne=P[H]||{},ke=!1}if(!(n>=a)){var le=void 0;(n>0||t.hskipBeforeAndAfter)&&(le=Je.deflt(ne.pregap,h),le!==0&&(N=Z.makeSpan(["arraycolsep"],[]),N.style.width=Te(le),I.push(N)));var pe=[];for(i=0;i<o;++i){var re=l[i],ue=re[n];if(ue){var Re=re.pos-z;ue.depth=re.depth,ue.height=re.height,pe.push({type:"elem",elem:ue,shift:Re})}}pe=Z.makeVList({positionType:"individualShift",children:pe},r),pe=Z.makeSpan(["col-align-"+(ne.align||"c")],[pe]),I.push(pe),(n<a-1||t.hskipBeforeAndAfter)&&(le=Je.deflt(ne.postgap,h),le!==0&&(N=Z.makeSpan(["arraycolsep"],[]),N.style.width=Te(le),I.push(N)))}}if(l=Z.makeSpan(["mtable"],I),u.length>0){for(var fe=Z.makeLineSpan("hline",r,c),mt=Z.makeLineSpan("hdashline",r,c),ot=[{type:"elem",elem:l,shift:0}];u.length>0;){var ze=u.pop(),ir=ze.pos-z;ze.isDashed?ot.push({type:"elem",elem:mt,shift:ir}):ot.push({type:"elem",elem:fe,shift:ir})}l=Z.makeVList({positionType:"individualShift",children:ot},r)}if(T.length===0)return Z.makeSpan(["mord"],[l],r);var ki=Z.makeVList({positionType:"individualShift",children:T},r);return ki=Z.makeSpan(["tag"],[ki],r),Z.makeFragment([l,ki])},lDe={c:"center ",l:"left ",r:"right "},uu=function(t,r){for(var i=[],n=new we.MathNode("mtd",[],["mtr-glue"]),o=new we.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<t.body.length;s++){for(var a=t.body[s],l=[],u=0;u<a.length;u++)l.push(new we.MathNode("mtd",[or(a[u],r)]));t.tags&&t.tags[s]&&(l.unshift(n),l.push(n),t.leqno?l.unshift(o):l.push(o)),i.push(new we.MathNode("mtr",l))}var c=new we.MathNode("mtable",i),f=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);c.setAttribute("rowspacing",Te(f));var h="",p="";if(t.cols&&t.cols.length>0){var d=t.cols,m="",g=!1,v=0,b=d.length;d[0].type==="separator"&&(h+="top ",v=1),d[d.length-1].type==="separator"&&(h+="bottom ",b-=1);for(var y=v;y<b;y++)d[y].type==="align"?(p+=lDe[d[y].align],g&&(m+="none "),g=!0):d[y].type==="separator"&&g&&(m+=d[y].separator==="|"?"solid ":"dashed ",g=!1);c.setAttribute("columnalign",p.trim()),/[sd]/.test(m)&&c.setAttribute("columnlines",m.trim())}if(t.colSeparationType==="align"){for(var x=t.cols||[],S="",_=1;_<x.length;_++)S+=_%2?"0em ":"1em ";c.setAttribute("columnspacing",S.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?c.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?c.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var w="",k=t.hLinesBeforeRow;h+=k[0].length>0?"left ":"",h+=k[k.length-1].length>0?"right ":"";for(var A=1;A<k.length-1;A++)w+=k[A].length===0?"none ":k[A][0]?"dashed ":"solid ";return/[sd]/.test(w)&&c.setAttribute("rowlines",w.trim()),h!==""&&(c=new we.MathNode("menclose",[c]),c.setAttribute("notation",h.trim())),t.arraystretch&&t.arraystretch<1&&(c=new we.MathNode("mstyle",[c]),c.setAttribute("scriptlevel","1")),c},Lre=function(t,r){t.envName.indexOf("ed")===-1&&g7(t);var i=[],n=t.envName.indexOf("at")>-1?"alignat":"align",o=t.envName==="split",s=gh(t.parser,{cols:i,addJot:!0,autoTag:o?void 0:c$(t.envName),emptySingleRow:!0,colSeparationType:n,maxNumCols:o?2:void 0,leqno:t.parser.settings.leqno},"display"),a,l=0,u={type:"ordgroup",mode:t.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var c="",f=0;f<r[0].body.length;f++){var h=gt(r[0].body[f],"textord");c+=h.text}a=Number(c),l=a*2}var p=!l;s.body.forEach(function(v){for(var b=1;b<v.length;b+=2){var y=gt(v[b],"styling"),x=gt(y.body[0],"ordgroup");x.body.unshift(u)}if(p)l<v.length&&(l=v.length);else{var S=v.length/2;if(a<S)throw new Ce("Too many math in a row: "+("expected "+a+", but got "+S),v[0])}});for(var d=0;d<l;++d){var m="r",g=0;d%2===1?m="l":d>0&&p&&(g=1),i[d]={type:"align",align:m,pregap:g,postgap:0}}return s.colSeparationType=p?"align":"alignat",s};au({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=d7(t[0]),i=r?[t[0]]:gt(t[0],"ordgroup").body,n=i.map(function(s){var a=o$(s),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new Ce("Unknown column alignment: "+l,s)}),o={cols:n,hskipBeforeAndAfter:!0,maxNumCols:n.length};return gh(e.parser,o,f$(e.envName))},htmlBuilder:lu,mathmlBuilder:uu});au({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",i={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var n=e.parser;if(n.consumeSpaces(),n.fetch().text==="["){if(n.consume(),n.consumeSpaces(),r=n.fetch().text,"lcr".indexOf(r)===-1)throw new Ce("Expected l or c or r",n.nextToken);n.consume(),n.consumeSpaces(),n.expect("]"),n.consume(),i.cols=[{type:"align",align:r}]}}var o=gh(e.parser,i,f$(e.envName)),s=Math.max(0,...o.body.map(a=>a.length));return o.cols=new Array(s).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[o],left:t[0],right:t[1],rightColor:void 0}:o},htmlBuilder:lu,mathmlBuilder:uu});au({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=gh(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:lu,mathmlBuilder:uu});au({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=d7(t[0]),i=r?[t[0]]:gt(t[0],"ordgroup").body,n=i.map(function(s){var a=o$(s),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new Ce("Unknown column alignment: "+l,s)});if(n.length>1)throw new Ce("{subarray} can contain only one column");var o={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if(o=gh(e.parser,o,"script"),o.body.length>0&&o.body[0].length>1)throw new Ce("{subarray} can contain only one column");return o},htmlBuilder:lu,mathmlBuilder:uu});au({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=gh(e.parser,t,f$(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:lu,mathmlBuilder:uu});au({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Lre,htmlBuilder:lu,mathmlBuilder:uu});au({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){Je.contains(["gather","gather*"],e.envName)&&g7(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:c$(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return gh(e.parser,t,"display")},htmlBuilder:lu,mathmlBuilder:uu});au({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Lre,htmlBuilder:lu,mathmlBuilder:uu});au({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){g7(e);var t={autoTag:c$(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return gh(e.parser,t,"display")},htmlBuilder:lu,mathmlBuilder:uu});au({type:"array",names:["CD"],props:{numArgs:0},handler(e){return g7(e),YTe(e.parser)},htmlBuilder:lu,mathmlBuilder:uu});$("\\nonumber","\\gdef\\@eqnsw{0}");$("\\notag","\\nonumber");Oe({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new Ce(e.funcName+" valid only within array environment")}});var zte=Ore;Oe({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:i}=e,n=t[0];if(n.type!=="ordgroup")throw new Ce("Invalid environment name",n);for(var o="",s=0;s<n.body.length;++s)o+=gt(n.body[s],"textord").text;if(i==="\\begin"){if(!zte.hasOwnProperty(o))throw new Ce("No such environment: "+o,n);var a=zte[o],{args:l,optArgs:u}=r.parseArguments("\\begin{"+o+"}",a),c={mode:r.mode,envName:o,parser:r},f=a.handler(c,l,u);r.expect("\\end",!1);var h=r.nextToken,p=gt(r.parseFunction(),"environment");if(p.name!==o)throw new Ce("Mismatch: \\begin{"+o+"} matched by \\end{"+p.name+"}",h);return f}return{type:"environment",mode:r.mode,name:o,nameGroup:n}}});var Pre=(e,t)=>{var r=e.font,i=t.withFont(r);return $t(e.body,i)},Ire=(e,t)=>{var r=e.font,i=t.withFont(r);return or(e.body,i)},Hte={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Oe({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=l7(t[0]),o=i;return o in Hte&&(o=Hte[o]),{type:"font",mode:r.mode,font:o.slice(1),body:n}},htmlBuilder:Pre,mathmlBuilder:Ire});Oe({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,i=t[0],n=Je.isCharacterBox(i);return{type:"mclass",mode:r.mode,mclass:p7(i),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:i}],isCharacterBox:n}}});Oe({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:i,breakOnTokenText:n}=e,{mode:o}=r,s=r.parseExpression(!0,n),a="math"+i.slice(1);return{type:"font",mode:o,font:a,body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:Pre,mathmlBuilder:Ire});var Nre=(e,t)=>{var r=t;return e==="display"?r=r.id>=rt.SCRIPT.id?r.text():rt.DISPLAY:e==="text"&&r.size===rt.DISPLAY.size?r=rt.TEXT:e==="script"?r=rt.SCRIPT:e==="scriptscript"&&(r=rt.SCRIPTSCRIPT),r},h$=(e,t)=>{var r=Nre(e.size,t.style),i=r.fracNum(),n=r.fracDen(),o;o=t.havingStyle(i);var s=$t(e.numer,o,t);if(e.continued){var a=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;s.height=s.height<a?a:s.height,s.depth=s.depth<l?l:s.depth}o=t.havingStyle(n);var u=$t(e.denom,o,t),c,f,h;e.hasBarLine?(e.barSize?(f=$r(e.barSize,t),c=Z.makeLineSpan("frac-line",t,f)):c=Z.makeLineSpan("frac-line",t),f=c.height,h=c.height):(c=null,f=0,h=t.fontMetrics().defaultRuleThickness);var p,d,m;r.size===rt.DISPLAY.size||e.size==="display"?(p=t.fontMetrics().num1,f>0?d=3*h:d=7*h,m=t.fontMetrics().denom1):(f>0?(p=t.fontMetrics().num2,d=h):(p=t.fontMetrics().num3,d=3*h),m=t.fontMetrics().denom2);var g;if(c){var b=t.fontMetrics().axisHeight;p-s.depth-(b+.5*f)<d&&(p+=d-(p-s.depth-(b+.5*f))),b-.5*f-(u.height-m)<d&&(m+=d-(b-.5*f-(u.height-m)));var y=-(b-.5*f);g=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:m},{type:"elem",elem:c,shift:y},{type:"elem",elem:s,shift:-p}]},t)}else{var v=p-s.depth-(u.height-m);v<d&&(p+=.5*(d-v),m+=.5*(d-v)),g=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:m},{type:"elem",elem:s,shift:-p}]},t)}o=t.havingStyle(r),g.height*=o.sizeMultiplier/t.sizeMultiplier,g.depth*=o.sizeMultiplier/t.sizeMultiplier;var x;r.size===rt.DISPLAY.size?x=t.fontMetrics().delim1:r.size===rt.SCRIPTSCRIPT.size?x=t.havingStyle(rt.SCRIPT).fontMetrics().delim2:x=t.fontMetrics().delim2;var S,_;return e.leftDelim==null?S=z2(t,["mopen"]):S=Oc.customSizedDelim(e.leftDelim,x,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?_=Z.makeSpan([]):e.rightDelim==null?_=z2(t,["mclose"]):_=Oc.customSizedDelim(e.rightDelim,x,!0,t.havingStyle(r),e.mode,["mclose"]),Z.makeSpan(["mord"].concat(o.sizingClasses(t)),[S,Z.makeSpan(["mfrac"],[g]),_],t)},d$=(e,t)=>{var r=new we.MathNode("mfrac",[or(e.numer,t),or(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var i=$r(e.barSize,t);r.setAttribute("linethickness",Te(i))}var n=Nre(e.size,t.style);if(n.size!==t.style.size){r=new we.MathNode("mstyle",[r]);var o=n.size===rt.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",o),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var s=[];if(e.leftDelim!=null){var a=new we.MathNode("mo",[new we.TextNode(e.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),s.push(a)}if(s.push(r),e.rightDelim!=null){var l=new we.MathNode("mo",[new we.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),s.push(l)}return i$(s)}return r};Oe({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0],o=t[1],s,a=null,l=null,u="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,a="(",l=")";break;case"\\\\bracefrac":s=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":s=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:n,denom:o,hasBarLine:s,leftDelim:a,rightDelim:l,size:u,barSize:null}},htmlBuilder:h$,mathmlBuilder:d$});Oe({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0],o=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:n,denom:o,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Oe({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:i}=e,n;switch(r){case"\\over":n="\\frac";break;case"\\choose":n="\\binom";break;case"\\atop":n="\\\\atopfrac";break;case"\\brace":n="\\\\bracefrac";break;case"\\brack":n="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:n,token:i}}});var Ute=["display","text","script","scriptscript"],qte=function(t){var r=null;return t.length>0&&(r=t,r=r==="."?null:r),r};Oe({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,i=t[4],n=t[5],o=l7(t[0]),s=o.type==="atom"&&o.family==="open"?qte(o.text):null,a=l7(t[1]),l=a.type==="atom"&&a.family==="close"?qte(a.text):null,u=gt(t[2],"size"),c,f=null;u.isBlank?c=!0:(f=u.value,c=f.number>0);var h="auto",p=t[3];if(p.type==="ordgroup"){if(p.body.length>0){var d=gt(p.body[0],"textord");h=Ute[Number(d.text)]}}else p=gt(p,"textord"),h=Ute[Number(p.text)];return{type:"genfrac",mode:r.mode,numer:i,denom:n,continued:!1,hasBarLine:c,barSize:f,leftDelim:s,rightDelim:l,size:h}},htmlBuilder:h$,mathmlBuilder:d$});Oe({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:i,token:n}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:gt(t[0],"size").value,token:n}}});Oe({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0],o=zAe(gt(t[1],"infix").size),s=t[2],a=o.number>0;return{type:"genfrac",mode:r.mode,numer:n,denom:s,continued:!1,hasBarLine:a,barSize:o,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:h$,mathmlBuilder:d$});var Bre=(e,t)=>{var r=t.style,i,n;e.type==="supsub"?(i=e.sup?$t(e.sup,t.havingStyle(r.sup()),t):$t(e.sub,t.havingStyle(r.sub()),t),n=gt(e.base,"horizBrace")):n=gt(e,"horizBrace");var o=$t(n.base,t.havingBaseStyle(rt.DISPLAY)),s=Lc.svgSpan(n,t),a;if(n.isOver?(a=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},t),a.children[0].children[0].children[1].classes.push("svg-align")):(a=Z.makeVList({positionType:"bottom",positionData:o.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},t),a.children[0].children[0].children[0].classes.push("svg-align")),i){var l=Z.makeSpan(["mord",n.isOver?"mover":"munder"],[a],t);n.isOver?a=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:i}]},t):a=Z.makeVList({positionType:"bottom",positionData:l.depth+.2+i.height+i.depth,children:[{type:"elem",elem:i},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return Z.makeSpan(["mord",n.isOver?"mover":"munder"],[a],t)},uDe=(e,t)=>{var r=Lc.mathMLnode(e.label);return new we.MathNode(e.isOver?"mover":"munder",[or(e.base,t),r])};Oe({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:i}=e;return{type:"horizBrace",mode:r.mode,label:i,isOver:/^\\over/.test(i),base:t[0]}},htmlBuilder:Bre,mathmlBuilder:uDe});Oe({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,i=t[1],n=gt(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:n})?{type:"href",mode:r.mode,href:n,body:ei(i)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=Ci(e.body,t,!1);return Z.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=mh(e.body,t);return r instanceof mo||(r=new mo("mrow",[r])),r.setAttribute("href",e.href),r}});Oe({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,i=gt(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:i}))return r.formatUnsupportedCmd("\\url");for(var n=[],o=0;o<i.length;o++){var s=i[o];s==="~"&&(s="\\textasciitilde"),n.push({type:"textord",mode:"text",text:s})}var a={type:"text",mode:r.mode,font:"\\texttt",body:n};return{type:"href",mode:r.mode,href:i,body:ei(a)}}});Oe({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:ei(t[0])}},htmlBuilder(e,t){var r=Ci(e.body,t,!1);return Z.makeFragment(r)},mathmlBuilder(e,t){return new we.MathNode("mrow",Yo(e.body,t))}});Oe({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:i,token:n}=e,o=gt(t[0],"raw").string,s=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(i){case"\\htmlClass":l.class=o,a={command:"\\htmlClass",class:o};break;case"\\htmlId":l.id=o,a={command:"\\htmlId",id:o};break;case"\\htmlStyle":l.style=o,a={command:"\\htmlStyle",style:o};break;case"\\htmlData":{for(var u=o.split(","),c=0;c<u.length;c++){var f=u[c].split("=");if(f.length!==2)throw new Ce("Error parsing key-value for \\htmlData");l["data-"+f[0].trim()]=f[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(a)?{type:"html",mode:r.mode,attributes:l,body:ei(s)}:r.formatUnsupportedCmd(i)},htmlBuilder:(e,t)=>{var r=Ci(e.body,t,!1),i=["enclosing"];e.attributes.class&&i.push(...e.attributes.class.trim().split(/\s+/));var n=Z.makeSpan(i,r,t);for(var o in e.attributes)o!=="class"&&e.attributes.hasOwnProperty(o)&&n.setAttribute(o,e.attributes[o]);return n},mathmlBuilder:(e,t)=>mh(e.body,t)});Oe({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:ei(t[0]),mathml:ei(t[1])}},htmlBuilder:(e,t)=>{var r=Ci(e.html,t,!1);return Z.makeFragment(r)},mathmlBuilder:(e,t)=>mh(e.mathml,t)});var NO=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new Ce("Invalid size: '"+t+"' in \\includegraphics");var i={number:+(r[1]+r[2]),unit:r[3]};if(!nre(i))throw new Ce("Invalid unit: '"+i.unit+"' in \\includegraphics.");return i};Oe({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:i}=e,n={number:0,unit:"em"},o={number:.9,unit:"em"},s={number:0,unit:"em"},a="";if(r[0])for(var l=gt(r[0],"raw").string,u=l.split(","),c=0;c<u.length;c++){var f=u[c].split("=");if(f.length===2){var h=f[1].trim();switch(f[0].trim()){case"alt":a=h;break;case"width":n=NO(h);break;case"height":o=NO(h);break;case"totalheight":s=NO(h);break;default:throw new Ce("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var p=gt(t[0],"url").url;return a===""&&(a=p,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),i.settings.isTrusted({command:"\\includegraphics",url:p})?{type:"includegraphics",mode:i.mode,alt:a,width:n,height:o,totalheight:s,src:p}:i.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=$r(e.height,t),i=0;e.totalheight.number>0&&(i=$r(e.totalheight,t)-r);var n=0;e.width.number>0&&(n=$r(e.width,t));var o={height:Te(r+i)};n>0&&(o.width=Te(n)),i>0&&(o.verticalAlign=Te(-i));var s=new jO(e.src,e.alt,o);return s.height=r,s.depth=i,s},mathmlBuilder:(e,t)=>{var r=new we.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var i=$r(e.height,t),n=0;if(e.totalheight.number>0&&(n=$r(e.totalheight,t)-i,r.setAttribute("valign",Te(-n))),r.setAttribute("height",Te(i+n)),e.width.number>0){var o=$r(e.width,t);r.setAttribute("width",Te(o))}return r.setAttribute("src",e.src),r}});Oe({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:i}=e,n=gt(t[0],"size");if(r.settings.strict){var o=i[1]==="m",s=n.value.unit==="mu";o?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" supports only mu units, "+("not "+n.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:n.value}},htmlBuilder(e,t){return Z.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=$r(e.dimension,t);return new we.SpaceNode(r)}});Oe({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0];return{type:"lap",mode:r.mode,alignment:i.slice(5),body:n}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=Z.makeSpan([],[$t(e.body,t)]),r=Z.makeSpan(["inner"],[r],t)):r=Z.makeSpan(["inner"],[$t(e.body,t)]);var i=Z.makeSpan(["fix"],[]),n=Z.makeSpan([e.alignment],[r,i],t),o=Z.makeSpan(["strut"]);return o.style.height=Te(n.height+n.depth),n.depth&&(o.style.verticalAlign=Te(-n.depth)),n.children.unshift(o),n=Z.makeSpan(["thinbox"],[n],t),Z.makeSpan(["mord","vbox"],[n],t)},mathmlBuilder:(e,t)=>{var r=new we.MathNode("mpadded",[or(e.body,t)]);if(e.alignment!=="rlap"){var i=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",i+"width")}return r.setAttribute("width","0px"),r}});Oe({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:i}=e,n=i.mode;i.switchMode("math");var o=r==="\\("?"\\)":"$",s=i.parseExpression(!1,o);return i.expect(o),i.switchMode(n),{type:"styling",mode:i.mode,style:"text",body:s}}});Oe({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new Ce("Mismatched "+e.funcName)}});var jte=(e,t)=>{switch(t.style.size){case rt.DISPLAY.size:return e.display;case rt.TEXT.size:return e.text;case rt.SCRIPT.size:return e.script;case rt.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};Oe({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:ei(t[0]),text:ei(t[1]),script:ei(t[2]),scriptscript:ei(t[3])}},htmlBuilder:(e,t)=>{var r=jte(e,t),i=Ci(r,t,!1);return Z.makeFragment(i)},mathmlBuilder:(e,t)=>{var r=jte(e,t);return mh(r,t)}});var zre=(e,t,r,i,n,o,s)=>{e=Z.makeSpan([],[e]);var a=r&&Je.isCharacterBox(r),l,u;if(t){var c=$t(t,i.havingStyle(n.sup()),i);u={elem:c,kern:Math.max(i.fontMetrics().bigOpSpacing1,i.fontMetrics().bigOpSpacing3-c.depth)}}if(r){var f=$t(r,i.havingStyle(n.sub()),i);l={elem:f,kern:Math.max(i.fontMetrics().bigOpSpacing2,i.fontMetrics().bigOpSpacing4-f.height)}}var h;if(u&&l){var p=i.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+e.depth+s;h=Z.makeVList({positionType:"bottom",positionData:p,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Te(-o)},{type:"kern",size:l.kern},{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:Te(o)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else if(l){var d=e.height-s;h=Z.makeVList({positionType:"top",positionData:d,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Te(-o)},{type:"kern",size:l.kern},{type:"elem",elem:e}]},i)}else if(u){var m=e.depth+s;h=Z.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:Te(o)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else return e;var g=[h];if(l&&o!==0&&!a){var v=Z.makeSpan(["mspace"],[],i);v.style.marginRight=Te(o),g.unshift(v)}return Z.makeSpan(["mop","op-limits"],g,i)},Hre=["\\smallint"],Bg=(e,t)=>{var r,i,n=!1,o;e.type==="supsub"?(r=e.sup,i=e.sub,o=gt(e.base,"op"),n=!0):o=gt(e,"op");var s=t.style,a=!1;s.size===rt.DISPLAY.size&&o.symbol&&!Je.contains(Hre,o.name)&&(a=!0);var l;if(o.symbol){var u=a?"Size2-Regular":"Size1-Regular",c="";if((o.name==="\\oiint"||o.name==="\\oiiint")&&(c=o.name.slice(1),o.name=c==="oiint"?"\\iint":"\\iiint"),l=Z.makeSymbol(o.name,u,"math",t,["mop","op-symbol",a?"large-op":"small-op"]),c.length>0){var f=l.italic,h=Z.staticSvg(c+"Size"+(a?"2":"1"),t);l=Z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:h,shift:a?.08:0}]},t),o.name="\\"+c,l.classes.unshift("mop"),l.italic=f}}else if(o.body){var p=Ci(o.body,t,!0);p.length===1&&p[0]instanceof Go?(l=p[0],l.classes[0]="mop"):l=Z.makeSpan(["mop"],p,t)}else{for(var d=[],m=1;m<o.name.length;m++)d.push(Z.mathsym(o.name[m],o.mode,t));l=Z.makeSpan(["mop"],d,t)}var g=0,v=0;return(l instanceof Go||o.name==="\\oiint"||o.name==="\\oiiint")&&!o.suppressBaseShift&&(g=(l.height-l.depth)/2-t.fontMetrics().axisHeight,v=l.italic),n?zre(l,r,i,t,s,v,g):(g&&(l.style.position="relative",l.style.top=Te(g)),l)},H2=(e,t)=>{var r;if(e.symbol)r=new mo("mo",[la(e.name,e.mode)]),Je.contains(Hre,e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new mo("mo",Yo(e.body,t));else{r=new mo("mi",[new sa(e.name.slice(1))]);var i=new mo("mo",[la("\u2061","text")]);e.parentIsSupSub?r=new mo("mrow",[r,i]):r=mre([r,i])}return r},cDe={"\u220F":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22C0":"\\bigwedge","\u22C1":"\\bigvee","\u22C2":"\\bigcap","\u22C3":"\\bigcup","\u2A00":"\\bigodot","\u2A01":"\\bigoplus","\u2A02":"\\bigotimes","\u2A04":"\\biguplus","\u2A06":"\\bigsqcup"};Oe({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220F","\u2210","\u2211","\u22C0","\u22C1","\u22C2","\u22C3","\u2A00","\u2A01","\u2A02","\u2A04","\u2A06"],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=i;return n.length===1&&(n=cDe[n]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Bg,mathmlBuilder:H2});Oe({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,i=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ei(i)}},htmlBuilder:Bg,mathmlBuilder:H2});var fDe={"\u222B":"\\int","\u222C":"\\iint","\u222D":"\\iiint","\u222E":"\\oint","\u222F":"\\oiint","\u2230":"\\oiiint"};Oe({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Bg,mathmlBuilder:H2});Oe({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Bg,mathmlBuilder:H2});Oe({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222B","\u222C","\u222D","\u222E","\u222F","\u2230"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,i=r;return i.length===1&&(i=fDe[i]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:Bg,mathmlBuilder:H2});var Ure=(e,t)=>{var r,i,n=!1,o;e.type==="supsub"?(r=e.sup,i=e.sub,o=gt(e.base,"operatorname"),n=!0):o=gt(e,"operatorname");var s;if(o.body.length>0){for(var a=o.body.map(f=>{var h=f.text;return typeof h=="string"?{type:"textord",mode:f.mode,text:h}:f}),l=Ci(a,t.withFont("mathrm"),!0),u=0;u<l.length;u++){var c=l[u];c instanceof Go&&(c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Z.makeSpan(["mop"],l,t)}else s=Z.makeSpan(["mop"],[],t);return n?zre(s,r,i,t,t.style,0,0):s},hDe=(e,t)=>{for(var r=Yo(e.body,t.withFont("mathrm")),i=!0,n=0;n<r.length;n++){var o=r[n];if(!(o instanceof we.SpaceNode))if(o instanceof we.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=o.children[0];o.children.length===1&&s instanceof we.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):i=!1;break}default:i=!1}else i=!1}if(i){var a=r.map(c=>c.toText()).join("");r=[new we.TextNode(a)]}var l=new we.MathNode("mi",r);l.setAttribute("mathvariant","normal");var u=new we.MathNode("mo",[la("\u2061","text")]);return e.parentIsSupSub?new we.MathNode("mrow",[l,u]):we.newDocumentFragment([l,u])};Oe({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0];return{type:"operatorname",mode:r.mode,body:ei(n),alwaysHandleSupSub:i==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Ure,mathmlBuilder:hDe});$("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");C0({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?Z.makeFragment(Ci(e.body,t,!1)):Z.makeSpan(["mord"],Ci(e.body,t,!0),t)},mathmlBuilder(e,t){return mh(e.body,t,!0)}});Oe({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,i=t[0];return{type:"overline",mode:r.mode,body:i}},htmlBuilder(e,t){var r=$t(e.body,t.havingCrampedStyle()),i=Z.makeLineSpan("overline-line",t),n=t.fontMetrics().defaultRuleThickness,o=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*n},{type:"elem",elem:i},{type:"kern",size:n}]},t);return Z.makeSpan(["mord","overline"],[o],t)},mathmlBuilder(e,t){var r=new we.MathNode("mo",[new we.TextNode("\u203E")]);r.setAttribute("stretchy","true");var i=new we.MathNode("mover",[or(e.body,t),r]);return i.setAttribute("accent","true"),i}});Oe({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,i=t[0];return{type:"phantom",mode:r.mode,body:ei(i)}},htmlBuilder:(e,t)=>{var r=Ci(e.body,t.withPhantom(),!1);return Z.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=Yo(e.body,t);return new we.MathNode("mphantom",r)}});Oe({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,i=t[0];return{type:"hphantom",mode:r.mode,body:i}},htmlBuilder:(e,t)=>{var r=Z.makeSpan([],[$t(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var i=0;i<r.children.length;i++)r.children[i].height=0,r.children[i].depth=0;return r=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),Z.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=Yo(ei(e.body),t),i=new we.MathNode("mphantom",r),n=new we.MathNode("mpadded",[i]);return n.setAttribute("height","0px"),n.setAttribute("depth","0px"),n}});Oe({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,i=t[0];return{type:"vphantom",mode:r.mode,body:i}},htmlBuilder:(e,t)=>{var r=Z.makeSpan(["inner"],[$t(e.body,t.withPhantom())]),i=Z.makeSpan(["fix"],[]);return Z.makeSpan(["mord","rlap"],[r,i],t)},mathmlBuilder:(e,t)=>{var r=Yo(ei(e.body),t),i=new we.MathNode("mphantom",r),n=new we.MathNode("mpadded",[i]);return n.setAttribute("width","0px"),n}});Oe({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,i=gt(t[0],"size").value,n=t[1];return{type:"raisebox",mode:r.mode,dy:i,body:n}},htmlBuilder(e,t){var r=$t(e.body,t),i=$r(e.dy,t);return Z.makeVList({positionType:"shift",positionData:-i,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new we.MathNode("mpadded",[or(e.body,t)]),i=e.dy.number+e.dy.unit;return r.setAttribute("voffset",i),r}});Oe({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});Oe({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:i}=e,n=r[0],o=gt(t[0],"size"),s=gt(t[1],"size");return{type:"rule",mode:i.mode,shift:n&&gt(n,"size").value,width:o.value,height:s.value}},htmlBuilder(e,t){var r=Z.makeSpan(["mord","rule"],[],t),i=$r(e.width,t),n=$r(e.height,t),o=e.shift?$r(e.shift,t):0;return r.style.borderRightWidth=Te(i),r.style.borderTopWidth=Te(n),r.style.bottom=Te(o),r.width=i,r.height=n+o,r.depth=-o,r.maxFontSize=n*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=$r(e.width,t),i=$r(e.height,t),n=e.shift?$r(e.shift,t):0,o=t.color&&t.getColor()||"black",s=new we.MathNode("mspace");s.setAttribute("mathbackground",o),s.setAttribute("width",Te(r)),s.setAttribute("height",Te(i));var a=new we.MathNode("mpadded",[s]);return n>=0?a.setAttribute("height",Te(n)):(a.setAttribute("height",Te(n)),a.setAttribute("depth",Te(-n))),a.setAttribute("voffset",Te(n)),a}});function qre(e,t,r){for(var i=Ci(e,t,!1),n=t.sizeMultiplier/r.sizeMultiplier,o=0;o<i.length;o++){var s=i[o].classes.indexOf("sizing");s<0?Array.prototype.push.apply(i[o].classes,t.sizingClasses(r)):i[o].classes[s+1]==="reset-size"+t.size&&(i[o].classes[s+1]="reset-size"+r.size),i[o].height*=n,i[o].depth*=n}return Z.makeFragment(i)}var Wte=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],dDe=(e,t)=>{var r=t.havingSize(e.size);return qre(e.body,r,t)};Oe({type:"sizing",names:Wte,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:i,parser:n}=e,o=n.parseExpression(!1,r);return{type:"sizing",mode:n.mode,size:Wte.indexOf(i)+1,body:o}},htmlBuilder:dDe,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),i=Yo(e.body,r),n=new we.MathNode("mstyle",i);return n.setAttribute("mathsize",Te(r.sizeMultiplier)),n}});Oe({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:i}=e,n=!1,o=!1,s=r[0]&&gt(r[0],"ordgroup");if(s)for(var a="",l=0;l<s.body.length;++l){var u=s.body[l];if(a=u.text,a==="t")n=!0;else if(a==="b")o=!0;else{n=!1,o=!1;break}}else n=!0,o=!0;var c=t[0];return{type:"smash",mode:i.mode,body:c,smashHeight:n,smashDepth:o}},htmlBuilder:(e,t)=>{var r=Z.makeSpan([],[$t(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].depth=0;var o=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return Z.makeSpan(["mord"],[o],t)},mathmlBuilder:(e,t)=>{var r=new we.MathNode("mpadded",[or(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});Oe({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:i}=e,n=r[0],o=t[0];return{type:"sqrt",mode:i.mode,body:o,index:n}},htmlBuilder(e,t){var r=$t(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=Z.wrapFragment(r,t);var i=t.fontMetrics(),n=i.defaultRuleThickness,o=n;t.style.id<rt.TEXT.id&&(o=t.fontMetrics().xHeight);var s=n+o/4,a=r.height+r.depth+s+n,{span:l,ruleWidth:u,advanceWidth:c}=Oc.sqrtImage(a,t),f=l.height-u;f>r.height+r.depth+s&&(s=(s+f-r.height-r.depth)/2);var h=l.height-r.height-s-u;r.style.paddingLeft=Te(c);var p=Z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+h)},{type:"elem",elem:l},{type:"kern",size:u}]},t);if(e.index){var d=t.havingStyle(rt.SCRIPTSCRIPT),m=$t(e.index,d,t),g=.6*(p.height-p.depth),v=Z.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:m}]},t),b=Z.makeSpan(["root"],[v]);return Z.makeSpan(["mord","sqrt"],[b,p],t)}else return Z.makeSpan(["mord","sqrt"],[p],t)},mathmlBuilder(e,t){var{body:r,index:i}=e;return i?new we.MathNode("mroot",[or(r,t),or(i,t)]):new we.MathNode("msqrt",[or(r,t)])}});var Vte={display:rt.DISPLAY,text:rt.TEXT,script:rt.SCRIPT,scriptscript:rt.SCRIPTSCRIPT};Oe({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:i,parser:n}=e,o=n.parseExpression(!0,r),s=i.slice(1,i.length-5);return{type:"styling",mode:n.mode,style:s,body:o}},htmlBuilder(e,t){var r=Vte[e.style],i=t.havingStyle(r).withFont("");return qre(e.body,i,t)},mathmlBuilder(e,t){var r=Vte[e.style],i=t.havingStyle(r),n=Yo(e.body,i),o=new we.MathNode("mstyle",n),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=s[e.style];return o.setAttribute("scriptlevel",a[0]),o.setAttribute("displaystyle",a[1]),o}});var pDe=function(t,r){var i=t.base;if(i)if(i.type==="op"){var n=i.limits&&(r.style.size===rt.DISPLAY.size||i.alwaysHandleSupSub);return n?Bg:null}else if(i.type==="operatorname"){var o=i.alwaysHandleSupSub&&(r.style.size===rt.DISPLAY.size||i.limits);return o?Ure:null}else{if(i.type==="accent")return Je.isCharacterBox(i.base)?s$:null;if(i.type==="horizBrace"){var s=!t.sub;return s===i.isOver?Bre:null}else return null}else return null};C0({type:"supsub",htmlBuilder(e,t){var r=pDe(e,t);if(r)return r(e,t);var{base:i,sup:n,sub:o}=e,s=$t(i,t),a,l,u=t.fontMetrics(),c=0,f=0,h=i&&Je.isCharacterBox(i);if(n){var p=t.havingStyle(t.style.sup());a=$t(n,p,t),h||(c=s.height-p.fontMetrics().supDrop*p.sizeMultiplier/t.sizeMultiplier)}if(o){var d=t.havingStyle(t.style.sub());l=$t(o,d,t),h||(f=s.depth+d.fontMetrics().subDrop*d.sizeMultiplier/t.sizeMultiplier)}var m;t.style===rt.DISPLAY?m=u.sup1:t.style.cramped?m=u.sup3:m=u.sup2;var g=t.sizeMultiplier,v=Te(.5/u.ptPerEm/g),b=null;if(l){var y=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(s instanceof Go||y)&&(b=Te(-s.italic))}var x;if(a&&l){c=Math.max(c,m,a.depth+.25*u.xHeight),f=Math.max(f,u.sub2);var S=u.defaultRuleThickness,_=4*S;if(c-a.depth-(l.height-f)<_){f=_-(c-a.depth)+l.height;var w=.8*u.xHeight-(c-a.depth);w>0&&(c+=w,f-=w)}var k=[{type:"elem",elem:l,shift:f,marginRight:v,marginLeft:b},{type:"elem",elem:a,shift:-c,marginRight:v}];x=Z.makeVList({positionType:"individualShift",children:k},t)}else if(l){f=Math.max(f,u.sub1,l.height-.8*u.xHeight);var A=[{type:"elem",elem:l,marginLeft:b,marginRight:v}];x=Z.makeVList({positionType:"shift",positionData:f,children:A},t)}else if(a)c=Math.max(c,m,a.depth+.25*u.xHeight),x=Z.makeVList({positionType:"shift",positionData:-c,children:[{type:"elem",elem:a,marginRight:v}]},t);else throw new Error("supsub must have either sup or sub.");var M=VO(s,"right")||"mord";return Z.makeSpan([M],[s,Z.makeSpan(["msupsub"],[x])],t)},mathmlBuilder(e,t){var r=!1,i,n;e.base&&e.base.type==="horizBrace"&&(n=!!e.sup,n===e.base.isOver&&(r=!0,i=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var o=[or(e.base,t)];e.sub&&o.push(or(e.sub,t)),e.sup&&o.push(or(e.sup,t));var s;if(r)s=i?"mover":"munder";else if(e.sub)if(e.sup){var u=e.base;u&&u.type==="op"&&u.limits&&t.style===rt.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(t.style===rt.DISPLAY||u.limits)?s="munderover":s="msubsup"}else{var l=e.base;l&&l.type==="op"&&l.limits&&(t.style===rt.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||t.style===rt.DISPLAY)?s="munder":s="msub"}else{var a=e.base;a&&a.type==="op"&&a.limits&&(t.style===rt.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||t.style===rt.DISPLAY)?s="mover":s="msup"}return new we.MathNode(s,o)}});C0({type:"atom",htmlBuilder(e,t){return Z.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new we.MathNode("mo",[la(e.text,e.mode)]);if(e.family==="bin"){var i=n$(e,t);i==="bold-italic"&&r.setAttribute("mathvariant",i)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}});var jre={mi:"italic",mn:"normal",mtext:"normal"};C0({type:"mathord",htmlBuilder(e,t){return Z.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new we.MathNode("mi",[la(e.text,e.mode,t)]),i=n$(e,t)||"italic";return i!==jre[r.type]&&r.setAttribute("mathvariant",i),r}});C0({type:"textord",htmlBuilder(e,t){return Z.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=la(e.text,e.mode,t),i=n$(e,t)||"normal",n;return e.mode==="text"?n=new we.MathNode("mtext",[r]):/[0-9]/.test(e.text)?n=new we.MathNode("mn",[r]):e.text==="\\prime"?n=new we.MathNode("mo",[r]):n=new we.MathNode("mi",[r]),i!==jre[n.type]&&n.setAttribute("mathvariant",i),n}});var BO={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},zO={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};C0({type:"spacing",htmlBuilder(e,t){if(zO.hasOwnProperty(e.text)){var r=zO[e.text].className||"";if(e.mode==="text"){var i=Z.makeOrd(e,t,"textord");return i.classes.push(r),i}else return Z.makeSpan(["mspace",r],[Z.mathsym(e.text,e.mode,t)],t)}else{if(BO.hasOwnProperty(e.text))return Z.makeSpan(["mspace",BO[e.text]],[],t);throw new Ce('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(zO.hasOwnProperty(e.text))r=new we.MathNode("mtext",[new we.TextNode("\xA0")]);else{if(BO.hasOwnProperty(e.text))return new we.MathNode("mspace");throw new Ce('Unknown type of space "'+e.text+'"')}return r}});var Gte=()=>{var e=new we.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};C0({type:"tag",mathmlBuilder(e,t){var r=new we.MathNode("mtable",[new we.MathNode("mtr",[Gte(),new we.MathNode("mtd",[mh(e.body,t)]),Gte(),new we.MathNode("mtd",[mh(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var Yte={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Xte={"\\textbf":"textbf","\\textmd":"textmd"},mDe={"\\textit":"textit","\\textup":"textup"},Kte=(e,t)=>{var r=e.font;if(r){if(Yte[r])return t.withTextFontFamily(Yte[r]);if(Xte[r])return t.withTextFontWeight(Xte[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(mDe[r])};Oe({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:i}=e,n=t[0];return{type:"text",mode:r.mode,body:ei(n),font:i}},htmlBuilder(e,t){var r=Kte(e,t),i=Ci(e.body,r,!0);return Z.makeSpan(["mord","text"],i,r)},mathmlBuilder(e,t){var r=Kte(e,t);return mh(e.body,r)}});Oe({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=$t(e.body,t),i=Z.makeLineSpan("underline-line",t),n=t.fontMetrics().defaultRuleThickness,o=Z.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:n},{type:"elem",elem:i},{type:"kern",size:3*n},{type:"elem",elem:r}]},t);return Z.makeSpan(["mord","underline"],[o],t)},mathmlBuilder(e,t){var r=new we.MathNode("mo",[new we.TextNode("\u203E")]);r.setAttribute("stretchy","true");var i=new we.MathNode("munder",[or(e.body,t),r]);return i.setAttribute("accentunder","true"),i}});Oe({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=$t(e.body,t),i=t.fontMetrics().axisHeight,n=.5*(r.height-i-(r.depth+i));return Z.makeVList({positionType:"shift",positionData:n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new we.MathNode("mpadded",[or(e.body,t)],["vcenter"])}});Oe({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new Ce("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=Zte(e),i=[],n=t.havingStyle(t.style.text()),o=0;o<r.length;o++){var s=r[o];s==="~"&&(s="\\textasciitilde"),i.push(Z.makeSymbol(s,"Typewriter-Regular",e.mode,n,["mord","texttt"]))}return Z.makeSpan(["mord","text"].concat(n.sizingClasses(t)),Z.tryCombineChars(i),n)},mathmlBuilder(e,t){var r=new we.TextNode(Zte(e)),i=new we.MathNode("mtext",[r]);return i.setAttribute("mathvariant","monospace"),i}});var Zte=e=>e.body.replace(/ /g,e.star?"\u2423":"\xA0"),dh=dre,Wre=`[ \r
	]`,gDe="\\\\[a-zA-Z@]+",vDe="\\\\[^\uD800-\uDFFF]",bDe="("+gDe+")"+Wre+"*",yDe=`\\\\(
|[ \r	]+
?)[ \r	]*`,ZO="[\u0300-\u036F]",xDe=new RegExp(ZO+"+$"),_De="("+Wre+"+)|"+(yDe+"|")+"([!-\\[\\]-\u2027\u202A-\uD7FF\uF900-\uFFFF]"+(ZO+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(ZO+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+bDe)+("|"+vDe+")"),u7=class{constructor(t,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=r,this.tokenRegex=new RegExp(_De,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){var t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new aa("EOF",new bs(this,r,r));var i=this.tokenRegex.exec(t);if(i===null||i.index!==r)throw new Ce("Unexpected character: '"+t[r]+"'",new aa(t[r],new bs(this,r,r+1)));var n=i[6]||i[3]||(i[2]?"\\ ":" ");if(this.catcodes[n]===14){var o=t.indexOf(`
`,this.tokenRegex.lastIndex);return o===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=o+1,this.lex()}return new aa(n,new bs(this,r,this.tokenRegex.lastIndex))}},JO=class{constructor(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Ce("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var r in t)t.hasOwnProperty(r)&&(t[r]==null?delete this.current[r]:this.current[r]=t[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,r,i){if(i===void 0&&(i=!1),i){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{var o=this.undefStack[this.undefStack.length-1];o&&!o.hasOwnProperty(t)&&(o[t]=this.current[t])}r==null?delete this.current[t]:this.current[t]=r}},wDe=$re;$("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});$("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});$("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});$("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});$("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});$("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");$("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var Jte={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};$("\\char",function(e){var t=e.popToken(),r,i="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")i=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new Ce("\\char` missing argument");i=t.text.charCodeAt(0)}else r=10;if(r){if(i=Jte[t.text],i==null||i>=r)throw new Ce("Invalid base-"+r+" digit "+t.text);for(var n;(n=Jte[e.future().text])!=null&&n<r;)i*=r,i+=n,e.popToken()}return"\\@char{"+i+"}"});var p$=(e,t,r,i)=>{var n=e.consumeArg().tokens;if(n.length!==1)throw new Ce("\\newcommand's first argument must be a macro name");var o=n[0].text,s=e.isDefined(o);if(s&&!t)throw new Ce("\\newcommand{"+o+"} attempting to redefine "+(o+"; use \\renewcommand"));if(!s&&!r)throw new Ce("\\renewcommand{"+o+"} when command "+o+" does not yet exist; use \\newcommand");var a=0;if(n=e.consumeArg().tokens,n.length===1&&n[0].text==="["){for(var l="",u=e.expandNextToken();u.text!=="]"&&u.text!=="EOF";)l+=u.text,u=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new Ce("Invalid number of arguments: "+l);a=parseInt(l),n=e.consumeArg().tokens}return s&&i||e.macros.set(o,{tokens:n,numArgs:a}),""};$("\\newcommand",e=>p$(e,!1,!0,!1));$("\\renewcommand",e=>p$(e,!0,!1,!1));$("\\providecommand",e=>p$(e,!0,!0,!0));$("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""});$("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""});$("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),dh[r],hr.math[r],hr.text[r]),""});$("\\bgroup","{");$("\\egroup","}");$("~","\\nobreakspace");$("\\lq","`");$("\\rq","'");$("\\aa","\\r a");$("\\AA","\\r A");$("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xA9}");$("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");$("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xAE}");$("\u212C","\\mathscr{B}");$("\u2130","\\mathscr{E}");$("\u2131","\\mathscr{F}");$("\u210B","\\mathscr{H}");$("\u2110","\\mathscr{I}");$("\u2112","\\mathscr{L}");$("\u2133","\\mathscr{M}");$("\u211B","\\mathscr{R}");$("\u212D","\\mathfrak{C}");$("\u210C","\\mathfrak{H}");$("\u2128","\\mathfrak{Z}");$("\\Bbbk","\\Bbb{k}");$("\xB7","\\cdotp");$("\\llap","\\mathllap{\\textrm{#1}}");$("\\rlap","\\mathrlap{\\textrm{#1}}");$("\\clap","\\mathclap{\\textrm{#1}}");$("\\mathstrut","\\vphantom{(}");$("\\underbar","\\underline{\\text{#1}}");$("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');$("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}");$("\\ne","\\neq");$("\u2260","\\neq");$("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}");$("\u2209","\\notin");$("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}");$("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}");$("\u225A","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225A}}");$("\u225B","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225B}}");$("\u225D","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225D}}");$("\u225E","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225E}}");$("\u225F","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225F}}");$("\u27C2","\\perp");$("\u203C","\\mathclose{!\\mkern-0.8mu!}");$("\u220C","\\notni");$("\u231C","\\ulcorner");$("\u231D","\\urcorner");$("\u231E","\\llcorner");$("\u231F","\\lrcorner");$("\xA9","\\copyright");$("\xAE","\\textregistered");$("\uFE0F","\\textregistered");$("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');$("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');$("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');$("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');$("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");$("\u22EE","\\vdots");$("\\varGamma","\\mathit{\\Gamma}");$("\\varDelta","\\mathit{\\Delta}");$("\\varTheta","\\mathit{\\Theta}");$("\\varLambda","\\mathit{\\Lambda}");$("\\varXi","\\mathit{\\Xi}");$("\\varPi","\\mathit{\\Pi}");$("\\varSigma","\\mathit{\\Sigma}");$("\\varUpsilon","\\mathit{\\Upsilon}");$("\\varPhi","\\mathit{\\Phi}");$("\\varPsi","\\mathit{\\Psi}");$("\\varOmega","\\mathit{\\Omega}");$("\\substack","\\begin{subarray}{c}#1\\end{subarray}");$("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");$("\\boxed","\\fbox{$\\displaystyle{#1}$}");$("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");$("\\implies","\\DOTSB\\;\\Longrightarrow\\;");$("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");$("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");$("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var Qte={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};$("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in Qte?t=Qte[r]:(r.slice(0,4)==="\\not"||r in hr.math&&Je.contains(["bin","rel"],hr.math[r].group))&&(t="\\dotsb"),t});var m$={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};$("\\dotso",function(e){var t=e.future().text;return t in m$?"\\ldots\\,":"\\ldots"});$("\\dotsc",function(e){var t=e.future().text;return t in m$&&t!==","?"\\ldots\\,":"\\ldots"});$("\\cdots",function(e){var t=e.future().text;return t in m$?"\\@cdots\\,":"\\@cdots"});$("\\dotsb","\\cdots");$("\\dotsm","\\cdots");$("\\dotsi","\\!\\cdots");$("\\dotsx","\\ldots\\,");$("\\DOTSI","\\relax");$("\\DOTSB","\\relax");$("\\DOTSX","\\relax");$("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");$("\\,","\\tmspace+{3mu}{.1667em}");$("\\thinspace","\\,");$("\\>","\\mskip{4mu}");$("\\:","\\tmspace+{4mu}{.2222em}");$("\\medspace","\\:");$("\\;","\\tmspace+{5mu}{.2777em}");$("\\thickspace","\\;");$("\\!","\\tmspace-{3mu}{.1667em}");$("\\negthinspace","\\!");$("\\negmedspace","\\tmspace-{4mu}{.2222em}");$("\\negthickspace","\\tmspace-{5mu}{.277em}");$("\\enspace","\\kern.5em ");$("\\enskip","\\hskip.5em\\relax");$("\\quad","\\hskip1em\\relax");$("\\qquad","\\hskip2em\\relax");$("\\tag","\\@ifstar\\tag@literal\\tag@paren");$("\\tag@paren","\\tag@literal{({#1})}");$("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new Ce("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});$("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");$("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");$("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");$("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");$("\\newline","\\\\\\relax");$("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Vre=Te(ou["Main-Regular"][84][1]-.7*ou["Main-Regular"][65][1]);$("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Vre+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");$("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Vre+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");$("\\hspace","\\@ifstar\\@hspacer\\@hspace");$("\\@hspace","\\hskip #1\\relax");$("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");$("\\ordinarycolon",":");$("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");$("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');$("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');$("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');$("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');$("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');$("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');$("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');$("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');$("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');$("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');$("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');$("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');$("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');$("\u2237","\\dblcolon");$("\u2239","\\eqcolon");$("\u2254","\\coloneqq");$("\u2255","\\eqqcolon");$("\u2A74","\\Coloneqq");$("\\ratio","\\vcentcolon");$("\\coloncolon","\\dblcolon");$("\\colonequals","\\coloneqq");$("\\coloncolonequals","\\Coloneqq");$("\\equalscolon","\\eqqcolon");$("\\equalscoloncolon","\\Eqqcolon");$("\\colonminus","\\coloneq");$("\\coloncolonminus","\\Coloneq");$("\\minuscolon","\\eqcolon");$("\\minuscoloncolon","\\Eqcolon");$("\\coloncolonapprox","\\Colonapprox");$("\\coloncolonsim","\\Colonsim");$("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");$("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");$("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");$("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");$("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220C}}");$("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");$("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");$("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");$("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");$("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");$("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");$("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");$("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");$("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}");$("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}");$("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}");$("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}");$("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}");$("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}");$("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}");$("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}");$("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}");$("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}");$("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228A}");$("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2ACB}");$("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228B}");$("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2ACC}");$("\\imath","\\html@mathml{\\@imath}{\u0131}");$("\\jmath","\\html@mathml{\\@jmath}{\u0237}");$("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27E6}}");$("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27E7}}");$("\u27E6","\\llbracket");$("\u27E7","\\rrbracket");$("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}");$("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}");$("\u2983","\\lBrace");$("\u2984","\\rBrace");$("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`\u29B5}}");$("\u29B5","\\minuso");$("\\darr","\\downarrow");$("\\dArr","\\Downarrow");$("\\Darr","\\Downarrow");$("\\lang","\\langle");$("\\rang","\\rangle");$("\\uarr","\\uparrow");$("\\uArr","\\Uparrow");$("\\Uarr","\\Uparrow");$("\\N","\\mathbb{N}");$("\\R","\\mathbb{R}");$("\\Z","\\mathbb{Z}");$("\\alef","\\aleph");$("\\alefsym","\\aleph");$("\\Alpha","\\mathrm{A}");$("\\Beta","\\mathrm{B}");$("\\bull","\\bullet");$("\\Chi","\\mathrm{X}");$("\\clubs","\\clubsuit");$("\\cnums","\\mathbb{C}");$("\\Complex","\\mathbb{C}");$("\\Dagger","\\ddagger");$("\\diamonds","\\diamondsuit");$("\\empty","\\emptyset");$("\\Epsilon","\\mathrm{E}");$("\\Eta","\\mathrm{H}");$("\\exist","\\exists");$("\\harr","\\leftrightarrow");$("\\hArr","\\Leftrightarrow");$("\\Harr","\\Leftrightarrow");$("\\hearts","\\heartsuit");$("\\image","\\Im");$("\\infin","\\infty");$("\\Iota","\\mathrm{I}");$("\\isin","\\in");$("\\Kappa","\\mathrm{K}");$("\\larr","\\leftarrow");$("\\lArr","\\Leftarrow");$("\\Larr","\\Leftarrow");$("\\lrarr","\\leftrightarrow");$("\\lrArr","\\Leftrightarrow");$("\\Lrarr","\\Leftrightarrow");$("\\Mu","\\mathrm{M}");$("\\natnums","\\mathbb{N}");$("\\Nu","\\mathrm{N}");$("\\Omicron","\\mathrm{O}");$("\\plusmn","\\pm");$("\\rarr","\\rightarrow");$("\\rArr","\\Rightarrow");$("\\Rarr","\\Rightarrow");$("\\real","\\Re");$("\\reals","\\mathbb{R}");$("\\Reals","\\mathbb{R}");$("\\Rho","\\mathrm{P}");$("\\sdot","\\cdot");$("\\sect","\\S");$("\\spades","\\spadesuit");$("\\sub","\\subset");$("\\sube","\\subseteq");$("\\supe","\\supseteq");$("\\Tau","\\mathrm{T}");$("\\thetasym","\\vartheta");$("\\weierp","\\wp");$("\\Zeta","\\mathrm{Z}");$("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");$("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");$("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");$("\\bra","\\mathinner{\\langle{#1}|}");$("\\ket","\\mathinner{|{#1}\\rangle}");$("\\braket","\\mathinner{\\langle{#1}\\rangle}");$("\\Bra","\\left\\langle#1\\right|");$("\\Ket","\\left|#1\\right\\rangle");var Gre=e=>t=>{var r=t.consumeArg().tokens,i=t.consumeArg().tokens,n=t.consumeArg().tokens,o=t.consumeArg().tokens,s=t.macros.get("|"),a=t.macros.get("\\|");t.macros.beginGroup();var l=f=>h=>{e&&(h.macros.set("|",s),n.length&&h.macros.set("\\|",a));var p=f;if(!f&&n.length){var d=h.future();d.text==="|"&&(h.popToken(),p=!0)}return{tokens:p?n:i,numArgs:0}};t.macros.set("|",l(!1)),n.length&&t.macros.set("\\|",l(!0));var u=t.consumeArg().tokens,c=t.expandTokens([...o,...u,...r]);return t.macros.endGroup(),{tokens:c.reverse(),numArgs:0}};$("\\bra@ket",Gre(!1));$("\\bra@set",Gre(!0));$("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");$("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");$("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");$("\\angln","{\\angl n}");$("\\blue","\\textcolor{##6495ed}{#1}");$("\\orange","\\textcolor{##ffa500}{#1}");$("\\pink","\\textcolor{##ff00af}{#1}");$("\\red","\\textcolor{##df0030}{#1}");$("\\green","\\textcolor{##28ae7b}{#1}");$("\\gray","\\textcolor{gray}{#1}");$("\\purple","\\textcolor{##9d38bd}{#1}");$("\\blueA","\\textcolor{##ccfaff}{#1}");$("\\blueB","\\textcolor{##80f6ff}{#1}");$("\\blueC","\\textcolor{##63d9ea}{#1}");$("\\blueD","\\textcolor{##11accd}{#1}");$("\\blueE","\\textcolor{##0c7f99}{#1}");$("\\tealA","\\textcolor{##94fff5}{#1}");$("\\tealB","\\textcolor{##26edd5}{#1}");$("\\tealC","\\textcolor{##01d1c1}{#1}");$("\\tealD","\\textcolor{##01a995}{#1}");$("\\tealE","\\textcolor{##208170}{#1}");$("\\greenA","\\textcolor{##b6ffb0}{#1}");$("\\greenB","\\textcolor{##8af281}{#1}");$("\\greenC","\\textcolor{##74cf70}{#1}");$("\\greenD","\\textcolor{##1fab54}{#1}");$("\\greenE","\\textcolor{##0d923f}{#1}");$("\\goldA","\\textcolor{##ffd0a9}{#1}");$("\\goldB","\\textcolor{##ffbb71}{#1}");$("\\goldC","\\textcolor{##ff9c39}{#1}");$("\\goldD","\\textcolor{##e07d10}{#1}");$("\\goldE","\\textcolor{##a75a05}{#1}");$("\\redA","\\textcolor{##fca9a9}{#1}");$("\\redB","\\textcolor{##ff8482}{#1}");$("\\redC","\\textcolor{##f9685d}{#1}");$("\\redD","\\textcolor{##e84d39}{#1}");$("\\redE","\\textcolor{##bc2612}{#1}");$("\\maroonA","\\textcolor{##ffbde0}{#1}");$("\\maroonB","\\textcolor{##ff92c6}{#1}");$("\\maroonC","\\textcolor{##ed5fa6}{#1}");$("\\maroonD","\\textcolor{##ca337c}{#1}");$("\\maroonE","\\textcolor{##9e034e}{#1}");$("\\purpleA","\\textcolor{##ddd7ff}{#1}");$("\\purpleB","\\textcolor{##c6b9fc}{#1}");$("\\purpleC","\\textcolor{##aa87ff}{#1}");$("\\purpleD","\\textcolor{##7854ab}{#1}");$("\\purpleE","\\textcolor{##543b78}{#1}");$("\\mintA","\\textcolor{##f5f9e8}{#1}");$("\\mintB","\\textcolor{##edf2df}{#1}");$("\\mintC","\\textcolor{##e0e5cc}{#1}");$("\\grayA","\\textcolor{##f6f7f7}{#1}");$("\\grayB","\\textcolor{##f0f1f2}{#1}");$("\\grayC","\\textcolor{##e3e5e6}{#1}");$("\\grayD","\\textcolor{##d6d8da}{#1}");$("\\grayE","\\textcolor{##babec2}{#1}");$("\\grayF","\\textcolor{##888d93}{#1}");$("\\grayG","\\textcolor{##626569}{#1}");$("\\grayH","\\textcolor{##3b3e40}{#1}");$("\\grayI","\\textcolor{##21242c}{#1}");$("\\kaBlue","\\textcolor{##314453}{#1}");$("\\kaGreen","\\textcolor{##71B307}{#1}");var Yre={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},QO=class{constructor(t,r,i){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new JO(wDe,r.macros),this.mode=i,this.stack=[]}feed(t){this.lexer=new u7(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var r,i,n;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:n,end:i}=this.consumeArg(["]"])}else({tokens:n,start:r,end:i}=this.consumeArg());return this.pushToken(new aa("EOF",i.loc)),this.pushTokens(n),r.range(i,"")}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var r=[],i=t&&t.length>0;i||this.consumeSpaces();var n=this.future(),o,s=0,a=0;do{if(o=this.popToken(),r.push(o),o.text==="{")++s;else if(o.text==="}"){if(--s,s===-1)throw new Ce("Extra }",o)}else if(o.text==="EOF")throw new Ce("Unexpected end of input in a macro argument, expected '"+(t&&i?t[a]:"}")+"'",o);if(t&&i)if((s===0||s===1&&t[a]==="{")&&o.text===t[a]){if(++a,a===t.length){r.splice(-a,a);break}}else a=0}while(s!==0||i);return n.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:n,end:o}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new Ce("The length of delimiters doesn't match the number of args!");for(var i=r[0],n=0;n<i.length;n++){var o=this.popToken();if(i[n]!==o.text)throw new Ce("Use of the macro doesn't match its definition",o)}}for(var s=[],a=0;a<t;a++)s.push(this.consumeArg(r&&r[a+1]).tokens);return s}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new Ce("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var r=this.popToken(),i=r.text,n=r.noexpand?null:this._getExpansion(i);if(n==null||t&&n.unexpandable){if(t&&n==null&&i[0]==="\\"&&!this.isDefined(i))throw new Ce("Undefined control sequence: "+i);return this.pushToken(r),!1}this.countExpansion(1);var o=n.tokens,s=this.consumeArgs(n.numArgs,n.delimiters);if(n.numArgs){o=o.slice();for(var a=o.length-1;a>=0;--a){var l=o[a];if(l.text==="#"){if(a===0)throw new Ce("Incomplete placeholder at end of macro body",l);if(l=o[--a],l.text==="#")o.splice(a+1,1);else if(/^[1-9]$/.test(l.text))o.splice(a,2,...s[+l.text-1]);else throw new Ce("Not a valid argument number",l)}}}return this.pushTokens(o),o.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new aa(t)]):void 0}expandTokens(t){var r=[],i=this.stack.length;for(this.pushTokens(t);this.stack.length>i;)if(this.expandOnce(!0)===!1){var n=this.stack.pop();n.treatAsRelax&&(n.noexpand=!1,n.treatAsRelax=!1),r.push(n)}return this.countExpansion(r.length),r}expandMacroAsText(t){var r=this.expandMacro(t);return r&&r.map(i=>i.text).join("")}_getExpansion(t){var r=this.macros.get(t);if(r==null)return r;if(t.length===1){var i=this.lexer.catcodes[t];if(i!=null&&i!==13)return}var n=typeof r=="function"?r(this):r;if(typeof n=="string"){var o=0;if(n.indexOf("#")!==-1)for(var s=n.replace(/##/g,"");s.indexOf("#"+(o+1))!==-1;)++o;for(var a=new u7(n,this.settings),l=[],u=a.lex();u.text!=="EOF";)l.push(u),u=a.lex();l.reverse();var c={tokens:l,numArgs:o};return c}return n}isDefined(t){return this.macros.has(t)||dh.hasOwnProperty(t)||hr.math.hasOwnProperty(t)||hr.text.hasOwnProperty(t)||Yre.hasOwnProperty(t)}isExpandable(t){var r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:dh.hasOwnProperty(t)&&!dh[t].primitive}},ere=/^[]/,e7=Object.freeze({"\u208A":"+","\u208B":"-","\u208C":"=","\u208D":"(","\u208E":")","\u2080":"0","\u2081":"1","\u2082":"2","\u2083":"3","\u2084":"4","\u2085":"5","\u2086":"6","\u2087":"7","\u2088":"8","\u2089":"9","\u2090":"a","\u2091":"e","\u2095":"h","\u1D62":"i","\u2C7C":"j","\u2096":"k","\u2097":"l","\u2098":"m","\u2099":"n","\u2092":"o","\u209A":"p","\u1D63":"r","\u209B":"s","\u209C":"t","\u1D64":"u","\u1D65":"v","\u2093":"x","\u1D66":"\u03B2","\u1D67":"\u03B3","\u1D68":"\u03C1","\u1D69":"\u03D5","\u1D6A":"\u03C7","\u207A":"+","\u207B":"-","\u207C":"=","\u207D":"(","\u207E":")","\u2070":"0","\xB9":"1","\xB2":"2","\xB3":"3","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u1D2C":"A","\u1D2E":"B","\u1D30":"D","\u1D31":"E","\u1D33":"G","\u1D34":"H","\u1D35":"I","\u1D36":"J","\u1D37":"K","\u1D38":"L","\u1D39":"M","\u1D3A":"N","\u1D3C":"O","\u1D3E":"P","\u1D3F":"R","\u1D40":"T","\u1D41":"U","\u2C7D":"V","\u1D42":"W","\u1D43":"a","\u1D47":"b","\u1D9C":"c","\u1D48":"d","\u1D49":"e","\u1DA0":"f","\u1D4D":"g",\u02B0:"h","\u2071":"i",\u02B2:"j","\u1D4F":"k",\u02E1:"l","\u1D50":"m",\u207F:"n","\u1D52":"o","\u1D56":"p",\u02B3:"r",\u02E2:"s","\u1D57":"t","\u1D58":"u","\u1D5B":"v",\u02B7:"w",\u02E3:"x",\u02B8:"y","\u1DBB":"z","\u1D5D":"\u03B2","\u1D5E":"\u03B3","\u1D5F":"\u03B4","\u1D60":"\u03D5","\u1D61":"\u03C7","\u1DBF":"\u03B8"}),HO={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030C":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030A":{text:"\\r",math:"\\mathring"},"\u030B":{text:"\\H"},"\u0327":{text:"\\c"}},tre={\u00E1:"a\u0301",\u00E0:"a\u0300",\u00E4:"a\u0308",\u01DF:"a\u0308\u0304",\u00E3:"a\u0303",\u0101:"a\u0304",\u0103:"a\u0306",\u1EAF:"a\u0306\u0301",\u1EB1:"a\u0306\u0300",\u1EB5:"a\u0306\u0303",\u01CE:"a\u030C",\u00E2:"a\u0302",\u1EA5:"a\u0302\u0301",\u1EA7:"a\u0302\u0300",\u1EAB:"a\u0302\u0303",\u0227:"a\u0307",\u01E1:"a\u0307\u0304",\u00E5:"a\u030A",\u01FB:"a\u030A\u0301",\u1E03:"b\u0307",\u0107:"c\u0301",\u1E09:"c\u0327\u0301",\u010D:"c\u030C",\u0109:"c\u0302",\u010B:"c\u0307",\u00E7:"c\u0327",\u010F:"d\u030C",\u1E0B:"d\u0307",\u1E11:"d\u0327",\u00E9:"e\u0301",\u00E8:"e\u0300",\u00EB:"e\u0308",\u1EBD:"e\u0303",\u0113:"e\u0304",\u1E17:"e\u0304\u0301",\u1E15:"e\u0304\u0300",\u0115:"e\u0306",\u1E1D:"e\u0327\u0306",\u011B:"e\u030C",\u00EA:"e\u0302",\u1EBF:"e\u0302\u0301",\u1EC1:"e\u0302\u0300",\u1EC5:"e\u0302\u0303",\u0117:"e\u0307",\u0229:"e\u0327",\u1E1F:"f\u0307",\u01F5:"g\u0301",\u1E21:"g\u0304",\u011F:"g\u0306",\u01E7:"g\u030C",\u011D:"g\u0302",\u0121:"g\u0307",\u0123:"g\u0327",\u1E27:"h\u0308",\u021F:"h\u030C",\u0125:"h\u0302",\u1E23:"h\u0307",\u1E29:"h\u0327",\u00ED:"i\u0301",\u00EC:"i\u0300",\u00EF:"i\u0308",\u1E2F:"i\u0308\u0301",\u0129:"i\u0303",\u012B:"i\u0304",\u012D:"i\u0306",\u01D0:"i\u030C",\u00EE:"i\u0302",\u01F0:"j\u030C",\u0135:"j\u0302",\u1E31:"k\u0301",\u01E9:"k\u030C",\u0137:"k\u0327",\u013A:"l\u0301",\u013E:"l\u030C",\u013C:"l\u0327",\u1E3F:"m\u0301",\u1E41:"m\u0307",\u0144:"n\u0301",\u01F9:"n\u0300",\u00F1:"n\u0303",\u0148:"n\u030C",\u1E45:"n\u0307",\u0146:"n\u0327",\u00F3:"o\u0301",\u00F2:"o\u0300",\u00F6:"o\u0308",\u022B:"o\u0308\u0304",\u00F5:"o\u0303",\u1E4D:"o\u0303\u0301",\u1E4F:"o\u0303\u0308",\u022D:"o\u0303\u0304",\u014D:"o\u0304",\u1E53:"o\u0304\u0301",\u1E51:"o\u0304\u0300",\u014F:"o\u0306",\u01D2:"o\u030C",\u00F4:"o\u0302",\u1ED1:"o\u0302\u0301",\u1ED3:"o\u0302\u0300",\u1ED7:"o\u0302\u0303",\u022F:"o\u0307",\u0231:"o\u0307\u0304",\u0151:"o\u030B",\u1E55:"p\u0301",\u1E57:"p\u0307",\u0155:"r\u0301",\u0159:"r\u030C",\u1E59:"r\u0307",\u0157:"r\u0327",\u015B:"s\u0301",\u1E65:"s\u0301\u0307",\u0161:"s\u030C",\u1E67:"s\u030C\u0307",\u015D:"s\u0302",\u1E61:"s\u0307",\u015F:"s\u0327",\u1E97:"t\u0308",\u0165:"t\u030C",\u1E6B:"t\u0307",\u0163:"t\u0327",\u00FA:"u\u0301",\u00F9:"u\u0300",\u00FC:"u\u0308",\u01D8:"u\u0308\u0301",\u01DC:"u\u0308\u0300",\u01D6:"u\u0308\u0304",\u01DA:"u\u0308\u030C",\u0169:"u\u0303",\u1E79:"u\u0303\u0301",\u016B:"u\u0304",\u1E7B:"u\u0304\u0308",\u016D:"u\u0306",\u01D4:"u\u030C",\u00FB:"u\u0302",\u016F:"u\u030A",\u0171:"u\u030B",\u1E7D:"v\u0303",\u1E83:"w\u0301",\u1E81:"w\u0300",\u1E85:"w\u0308",\u0175:"w\u0302",\u1E87:"w\u0307",\u1E98:"w\u030A",\u1E8D:"x\u0308",\u1E8B:"x\u0307",\u00FD:"y\u0301",\u1EF3:"y\u0300",\u00FF:"y\u0308",\u1EF9:"y\u0303",\u0233:"y\u0304",\u0177:"y\u0302",\u1E8F:"y\u0307",\u1E99:"y\u030A",\u017A:"z\u0301",\u017E:"z\u030C",\u1E91:"z\u0302",\u017C:"z\u0307",\u00C1:"A\u0301",\u00C0:"A\u0300",\u00C4:"A\u0308",\u01DE:"A\u0308\u0304",\u00C3:"A\u0303",\u0100:"A\u0304",\u0102:"A\u0306",\u1EAE:"A\u0306\u0301",\u1EB0:"A\u0306\u0300",\u1EB4:"A\u0306\u0303",\u01CD:"A\u030C",\u00C2:"A\u0302",\u1EA4:"A\u0302\u0301",\u1EA6:"A\u0302\u0300",\u1EAA:"A\u0302\u0303",\u0226:"A\u0307",\u01E0:"A\u0307\u0304",\u00C5:"A\u030A",\u01FA:"A\u030A\u0301",\u1E02:"B\u0307",\u0106:"C\u0301",\u1E08:"C\u0327\u0301",\u010C:"C\u030C",\u0108:"C\u0302",\u010A:"C\u0307",\u00C7:"C\u0327",\u010E:"D\u030C",\u1E0A:"D\u0307",\u1E10:"D\u0327",\u00C9:"E\u0301",\u00C8:"E\u0300",\u00CB:"E\u0308",\u1EBC:"E\u0303",\u0112:"E\u0304",\u1E16:"E\u0304\u0301",\u1E14:"E\u0304\u0300",\u0114:"E\u0306",\u1E1C:"E\u0327\u0306",\u011A:"E\u030C",\u00CA:"E\u0302",\u1EBE:"E\u0302\u0301",\u1EC0:"E\u0302\u0300",\u1EC4:"E\u0302\u0303",\u0116:"E\u0307",\u0228:"E\u0327",\u1E1E:"F\u0307",\u01F4:"G\u0301",\u1E20:"G\u0304",\u011E:"G\u0306",\u01E6:"G\u030C",\u011C:"G\u0302",\u0120:"G\u0307",\u0122:"G\u0327",\u1E26:"H\u0308",\u021E:"H\u030C",\u0124:"H\u0302",\u1E22:"H\u0307",\u1E28:"H\u0327",\u00CD:"I\u0301",\u00CC:"I\u0300",\u00CF:"I\u0308",\u1E2E:"I\u0308\u0301",\u0128:"I\u0303",\u012A:"I\u0304",\u012C:"I\u0306",\u01CF:"I\u030C",\u00CE:"I\u0302",\u0130:"I\u0307",\u0134:"J\u0302",\u1E30:"K\u0301",\u01E8:"K\u030C",\u0136:"K\u0327",\u0139:"L\u0301",\u013D:"L\u030C",\u013B:"L\u0327",\u1E3E:"M\u0301",\u1E40:"M\u0307",\u0143:"N\u0301",\u01F8:"N\u0300",\u00D1:"N\u0303",\u0147:"N\u030C",\u1E44:"N\u0307",\u0145:"N\u0327",\u00D3:"O\u0301",\u00D2:"O\u0300",\u00D6:"O\u0308",\u022A:"O\u0308\u0304",\u00D5:"O\u0303",\u1E4C:"O\u0303\u0301",\u1E4E:"O\u0303\u0308",\u022C:"O\u0303\u0304",\u014C:"O\u0304",\u1E52:"O\u0304\u0301",\u1E50:"O\u0304\u0300",\u014E:"O\u0306",\u01D1:"O\u030C",\u00D4:"O\u0302",\u1ED0:"O\u0302\u0301",\u1ED2:"O\u0302\u0300",\u1ED6:"O\u0302\u0303",\u022E:"O\u0307",\u0230:"O\u0307\u0304",\u0150:"O\u030B",\u1E54:"P\u0301",\u1E56:"P\u0307",\u0154:"R\u0301",\u0158:"R\u030C",\u1E58:"R\u0307",\u0156:"R\u0327",\u015A:"S\u0301",\u1E64:"S\u0301\u0307",\u0160:"S\u030C",\u1E66:"S\u030C\u0307",\u015C:"S\u0302",\u1E60:"S\u0307",\u015E:"S\u0327",\u0164:"T\u030C",\u1E6A:"T\u0307",\u0162:"T\u0327",\u00DA:"U\u0301",\u00D9:"U\u0300",\u00DC:"U\u0308",\u01D7:"U\u0308\u0301",\u01DB:"U\u0308\u0300",\u01D5:"U\u0308\u0304",\u01D9:"U\u0308\u030C",\u0168:"U\u0303",\u1E78:"U\u0303\u0301",\u016A:"U\u0304",\u1E7A:"U\u0304\u0308",\u016C:"U\u0306",\u01D3:"U\u030C",\u00DB:"U\u0302",\u016E:"U\u030A",\u0170:"U\u030B",\u1E7C:"V\u0303",\u1E82:"W\u0301",\u1E80:"W\u0300",\u1E84:"W\u0308",\u0174:"W\u0302",\u1E86:"W\u0307",\u1E8C:"X\u0308",\u1E8A:"X\u0307",\u00DD:"Y\u0301",\u1EF2:"Y\u0300",\u0178:"Y\u0308",\u1EF8:"Y\u0303",\u0232:"Y\u0304",\u0176:"Y\u0302",\u1E8E:"Y\u0307",\u0179:"Z\u0301",\u017D:"Z\u030C",\u1E90:"Z\u0302",\u017B:"Z\u0307",\u03AC:"\u03B1\u0301",\u1F70:"\u03B1\u0300",\u1FB1:"\u03B1\u0304",\u1FB0:"\u03B1\u0306",\u03AD:"\u03B5\u0301",\u1F72:"\u03B5\u0300",\u03AE:"\u03B7\u0301",\u1F74:"\u03B7\u0300",\u03AF:"\u03B9\u0301",\u1F76:"\u03B9\u0300",\u03CA:"\u03B9\u0308",\u0390:"\u03B9\u0308\u0301",\u1FD2:"\u03B9\u0308\u0300",\u1FD1:"\u03B9\u0304",\u1FD0:"\u03B9\u0306",\u03CC:"\u03BF\u0301",\u1F78:"\u03BF\u0300",\u03CD:"\u03C5\u0301",\u1F7A:"\u03C5\u0300",\u03CB:"\u03C5\u0308",\u03B0:"\u03C5\u0308\u0301",\u1FE2:"\u03C5\u0308\u0300",\u1FE1:"\u03C5\u0304",\u1FE0:"\u03C5\u0306",\u03CE:"\u03C9\u0301",\u1F7C:"\u03C9\u0300",\u038E:"\u03A5\u0301",\u1FEA:"\u03A5\u0300",\u03AB:"\u03A5\u0308",\u1FE9:"\u03A5\u0304",\u1FE8:"\u03A5\u0306",\u038F:"\u03A9\u0301",\u1FFA:"\u03A9\u0300"},c7=class e{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new QO(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new Ce("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new aa("}")),this.gullet.pushTokens(t);var i=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,i}parseExpression(t,r){for(var i=[];;){this.mode==="math"&&this.consumeSpaces();var n=this.fetch();if(e.endOfExpression.indexOf(n.text)!==-1||r&&n.text===r||t&&dh[n.text]&&dh[n.text].infix)break;var o=this.parseAtom(r);if(o){if(o.type==="internal")continue}else break;i.push(o)}return this.mode==="text"&&this.formLigatures(i),this.handleInfixNodes(i)}handleInfixNodes(t){for(var r=-1,i,n=0;n<t.length;n++)if(t[n].type==="infix"){if(r!==-1)throw new Ce("only one infix operator per group",t[n].token);r=n,i=t[n].replaceWith}if(r!==-1&&i){var o,s,a=t.slice(0,r),l=t.slice(r+1);a.length===1&&a[0].type==="ordgroup"?o=a[0]:o={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?s=l[0]:s={type:"ordgroup",mode:this.mode,body:l};var u;return i==="\\\\abovefrac"?u=this.callFunction(i,[o,t[r],s],[]):u=this.callFunction(i,[o,s],[]),[u]}else return t}handleSupSubscript(t){var r=this.fetch(),i=r.text;this.consume(),this.consumeSpaces();var n;do{var o;n=this.parseGroup(t)}while(((o=n)==null?void 0:o.type)==="internal");if(!n)throw new Ce("Expected group after '"+i+"'",r);return n}formatUnsupportedCmd(t){for(var r=[],i=0;i<t.length;i++)r.push({type:"textord",mode:"text",text:t[i]});var n={type:"text",mode:this.mode,body:r},o={type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]};return o}parseAtom(t){var r=this.parseGroup("atom",t);if(r?.type==="internal"||this.mode==="text")return r;for(var i,n;;){this.consumeSpaces();var o=this.fetch();if(o.text==="\\limits"||o.text==="\\nolimits"){if(r&&r.type==="op"){var s=o.text==="\\limits";r.limits=s,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=o.text==="\\limits");else throw new Ce("Limit controls must follow a math operator",o);this.consume()}else if(o.text==="^"){if(i)throw new Ce("Double superscript",o);i=this.handleSupSubscript("superscript")}else if(o.text==="_"){if(n)throw new Ce("Double subscript",o);n=this.handleSupSubscript("subscript")}else if(o.text==="'"){if(i)throw new Ce("Double superscript",o);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),i={type:"ordgroup",mode:this.mode,body:l}}else if(e7[o.text]){var u=ere.test(o.text),c=[];for(c.push(new aa(e7[o.text])),this.consume();;){var f=this.fetch().text;if(!e7[f]||ere.test(f)!==u)break;c.unshift(new aa(e7[f])),this.consume()}var h=this.subparse(c);u?n={type:"ordgroup",mode:"math",body:h}:i={type:"ordgroup",mode:"math",body:h}}else break}return i||n?{type:"supsub",mode:this.mode,base:r,sup:i,sub:n}:r}parseFunction(t,r){var i=this.fetch(),n=i.text,o=dh[n];if(!o)return null;if(this.consume(),r&&r!=="atom"&&!o.allowedInArgument)throw new Ce("Got function '"+n+"' with no arguments"+(r?" as "+r:""),i);if(this.mode==="text"&&!o.allowedInText)throw new Ce("Can't use function '"+n+"' in text mode",i);if(this.mode==="math"&&o.allowedInMath===!1)throw new Ce("Can't use function '"+n+"' in math mode",i);var{args:s,optArgs:a}=this.parseArguments(n,o);return this.callFunction(n,s,a,i,t)}callFunction(t,r,i,n,o){var s={funcName:t,parser:this,token:n,breakOnTokenText:o},a=dh[t];if(a&&a.handler)return a.handler(s,r,i);throw new Ce("No function handler for "+t)}parseArguments(t,r){var i=r.numArgs+r.numOptionalArgs;if(i===0)return{args:[],optArgs:[]};for(var n=[],o=[],s=0;s<i;s++){var a=r.argTypes&&r.argTypes[s],l=s<r.numOptionalArgs;(r.primitive&&a==null||r.type==="sqrt"&&s===1&&o[0]==null)&&(a="primitive");var u=this.parseGroupOfType("argument to '"+t+"'",a,l);if(l)o.push(u);else if(u!=null)n.push(u);else throw new Ce("Null argument, please report this as a bug")}return{args:n,optArgs:o}}parseGroupOfType(t,r,i){switch(r){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,r);case"hbox":{var n=this.parseArgumentGroup(i,"text");return n!=null?{type:"styling",mode:n.mode,body:[n],style:"text"}:null}case"raw":{var o=this.parseStringGroup("raw",i);return o!=null?{type:"raw",mode:"text",string:o.text}:null}case"primitive":{if(i)throw new Ce("A primitive argument cannot be optional");var s=this.parseGroup(t);if(s==null)throw new Ce("Expected group as "+t,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new Ce("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var i=this.gullet.scanArgument(r);if(i==null)return null;for(var n="",o;(o=this.fetch()).text!=="EOF";)n+=o.text,this.consume();return this.consume(),i.text=n,i}parseRegexGroup(t,r){for(var i=this.fetch(),n=i,o="",s;(s=this.fetch()).text!=="EOF"&&t.test(o+s.text);)n=s,o+=n.text,this.consume();if(o==="")throw new Ce("Invalid "+r+": '"+i.text+"'",i);return i.range(n,o)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var i=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!i)throw new Ce("Invalid color: '"+r.text+"'",r);var n=i[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}}parseSizeGroup(t){var r,i=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",i=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!n)throw new Ce("Invalid size: '"+r.text+"'",r);var o={number:+(n[1]+n[2]),unit:n[3]};if(!nre(o))throw new Ce("Invalid unit: '"+o.unit+"'",r);return{type:"size",mode:this.mode,value:o,isBlank:i}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var i=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}}parseArgumentGroup(t,r){var i=this.gullet.scanArgument(t);if(i==null)return null;var n=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var o=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:i.loc,body:o};return r&&this.switchMode(n),s}parseGroup(t,r){var i=this.fetch(),n=i.text,o;if(n==="{"||n==="\\begingroup"){this.consume();var s=n==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,s),l=this.fetch();this.expect(s),this.gullet.endGroup(),o={type:"ordgroup",mode:this.mode,loc:bs.range(i,l),body:a,semisimple:n==="\\begingroup"||void 0}}else if(o=this.parseFunction(r,t)||this.parseSymbol(),o==null&&n[0]==="\\"&&!Yre.hasOwnProperty(n)){if(this.settings.throwOnError)throw new Ce("Undefined control sequence: "+n,i);o=this.formatUnsupportedCmd(n),this.consume()}return o}formLigatures(t){for(var r=t.length-1,i=0;i<r;++i){var n=t[i],o=n.text;o==="-"&&t[i+1].text==="-"&&(i+1<r&&t[i+2].text==="-"?(t.splice(i,3,{type:"textord",mode:"text",loc:bs.range(n,t[i+2]),text:"---"}),r-=2):(t.splice(i,2,{type:"textord",mode:"text",loc:bs.range(n,t[i+1]),text:"--"}),r-=1)),(o==="'"||o==="`")&&t[i+1].text===o&&(t.splice(i,2,{type:"textord",mode:"text",loc:bs.range(n,t[i+1]),text:o+o}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var i=r.slice(5),n=i.charAt(0)==="*";if(n&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new Ce(`\\verb assertion failed --
                    please report what input caused this bug`);return i=i.slice(1,-1),{type:"verb",mode:"text",body:i,star:n}}tre.hasOwnProperty(r[0])&&!hr[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=tre[r[0]]+r.slice(1));var o=xDe.exec(r);o&&(r=r.substring(0,o.index),r==="i"?r="\u0131":r==="j"&&(r="\u0237"));var s;if(hr[this.mode][r]){this.settings.strict&&this.mode==="math"&&WO.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var a=hr[this.mode][r].group,l=bs.range(t),u;if(dTe.hasOwnProperty(a)){var c=a;u={type:"atom",mode:this.mode,family:c,loc:l,text:r}}else u={type:a,mode:this.mode,loc:l,text:r};s=u}else if(r.charCodeAt(0)>=128)this.settings.strict&&(ire(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),s={type:"textord",mode:"text",loc:bs.range(t),text:r};else return null;if(this.consume(),o)for(var f=0;f<o[0].length;f++){var h=o[0][f];if(!HO[h])throw new Ce("Unknown accent ' "+h+"'",t);var p=HO[h][this.mode]||HO[h].text;if(!p)throw new Ce("Accent "+h+" unsupported in "+this.mode+" mode",t);s={type:"accent",mode:this.mode,loc:bs.range(t),label:p,isStretchy:!1,isShifty:!0,base:s}}return s}};c7.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var g$=function(t,r){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var i=new c7(t,r);delete i.gullet.macros.current["\\df@tag"];var n=i.parse();if(delete i.gullet.macros.current["\\current@color"],delete i.gullet.macros.current["\\color"],i.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new Ce("\\tag works only in display equations");n=[{type:"tag",mode:"text",body:n,tag:i.subparse([new aa("\\df@tag")])}]}return n},Xre=function(t,r,i){r.textContent="";var n=v$(t,i).toNode();r.appendChild(n)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Xre=function(){throw new Ce("KaTeX doesn't work in quirks mode.")});var SDe=function(t,r){var i=v$(t,r).toMarkup();return i},CDe=function(t,r){var i=new P2(r);return g$(t,i)},Kre=function(t,r,i){if(i.throwOnError||!(t instanceof Ce))throw t;var n=Z.makeSpan(["katex-error"],[new Go(r)]);return n.setAttribute("title",t.toString()),n.setAttribute("style","color:"+i.errorColor),n},v$=function(t,r){var i=new P2(r);try{var n=g$(t,i);return LTe(n,t,i)}catch(o){return Kre(o,t,i)}},kDe=function(t,r){var i=new P2(r);try{var n=g$(t,i);return PTe(n,t,i)}catch(o){return Kre(o,t,i)}},EDe="0.16.22",ADe={Span:S0,Anchor:N2,SymbolNode:Go,SvgNode:ol,PathNode:su,LineNode:B2},Zre={version:EDe,render:Xre,renderToString:SDe,ParseError:Ce,SETTINGS_SCHEMA:t7,__parse:CDe,__renderToDomTree:v$,__renderToHTMLTree:kDe,__setFontMetrics:sTe,__defineSymbol:C,__defineFunction:Oe,__defineMacro:$,__domTree:ADe};var TDe=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1(?=[\s?!\.,:]|$)/,DDe=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1/,RDe=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function Qre(e={}){return{extensions:[MDe(e,Jre(e,!1)),FDe(e,Jre(e,!0))]}}function Jre(e,t){return r=>Zre.renderToString(r.text,{...e,displayMode:r.displayMode})+(t?`
`:"")}function MDe(e,t){let r=e&&e.nonStandard,i=r?DDe:TDe;return{name:"inlineKatex",level:"inline",start(n){let o,s=n;for(;s;){if(o=s.indexOf("$"),o===-1)return;if((r?o>-1:o===0||s.charAt(o-1)===" ")&&s.substring(o).match(i))return o;s=s.substring(o+1).replace(/^\$+/,"")}},tokenizer(n,o){let s=n.match(i);if(s)return{type:"inlineKatex",raw:s[0],text:s[2].trim(),displayMode:s[1].length===2}},renderer:t}}function FDe(e,t){return{name:"blockKatex",level:"block",tokenizer(r,i){let n=r.match(RDe);if(n)return{type:"blockKatex",raw:n[0],text:n[2].trim(),displayMode:n[1].length===2}},renderer:t}}var ODe={throwOnError:!1,output:"mathml",strict:"warn"},$De={...ODe,nonStandard:!1};qt.use(Qre($De));var v7=class extends gu(sr){render(){let r=this.querySelector('script[type="text/markdown"]')?.textContent;return Y`${fh(qt.parse(r))}`}};v7=Lt([mn("tbx-markdown")],v7);var cu=class extends sr{constructor(){super(...arguments);this.timezone="UTC";this.now=new Date}connectedCallback(){super.connectedCallback(),this.startTicking()}disconnectedCallback(){super.disconnectedCallback(),this.stopTicking()}startTicking(){this.stopTicking(),this.now=new Date,this.intervalId=window.setInterval(()=>{this.now=new Date},1e3)}stopTicking(){this.intervalId!==void 0&&(window.clearInterval(this.intervalId),this.intervalId=void 0)}static composeDateString(r){let i=l=>r.find(c=>c.type===l)?.value??"",n=i("weekday"),o=i("month"),s=i("day"),a=i("year");return`${n}, ${o} ${s} ${a}`}resolveTimeZone(){let r=(this.timezone??"").trim(),i=r===""?"UTC":r;return{zone:i,label:i}}formatTime(r){let{zone:i,label:n}=this.resolveTimeZone();try{let o=new Intl.DateTimeFormat("en-US",{timeZone:i,weekday:"long",month:"long",day:"numeric",year:"numeric"}),s=new Intl.DateTimeFormat("en-US",{timeZone:i,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),a=cu.composeDateString(o.formatToParts(r)),l=s.format(r);return`${a} ${l} (${n})`}catch{let s=new Intl.DateTimeFormat("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),a=new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),l=cu.composeDateString(s.formatToParts(r)),u=a.format(r);return`${l} ${u} (${n})`}}render(){return Y`<span>${this.formatTime(this.now)}</span>`}};cu.styles=Ie`
    :host {
      display: block;
      font-variant-numeric: tabular-nums;
    }

    span {
      display: block;
    }
  `,Lt([U({type:String})],cu.prototype,"timezone",2),Lt([Le()],cu.prototype,"now",2),cu=Lt([mn("tbx-clock")],cu);function LDe(e){if(e==null||e.trim()==="")return"/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.replace(/\/+/g,"/"),t=t.replace(/\/+$/,""),t===""&&(t="/")),t}function PDe(e){return e==null?"":e.trim()}function IDe(e){return e==null?"":e.trim()}var vh=class extends sr{constructor(){super(...arguments);this.title="";this.route="/";this.icon=""}willUpdate(r){if(r.has("route")){let i=LDe(this.route);i!==this.route&&(this.route=i)}if(r.has("title")){let i=PDe(this.title);i!==this.title&&(this.title=i)}if(r.has("icon")){let i=IDe(this.icon);i!==this.icon&&(this.icon=i)}}render(){return Y`<slot></slot>`}};vh.styles=Ie`
    :host {
      display: block;
      width: 100%;
    }

    :host([hidden]) {
      display: none !important;
    }

    :host([inert]) {
      pointer-events: none;
    }

    ::slotted(*) {
      max-width: 100%;
      box-sizing: border-box;
    }

    ::slotted(tbx-chart),
    ::slotted(tbx-grid),
    ::slotted(tbx-clock),
    ::slotted(tbx-form),
    ::slotted(tbx-markdown),
    ::slotted(tbx-console) {
      display: block;
      width: 100%;
      max-width: 100%;
    }

    ::slotted(pre),
    ::slotted(code),
    ::slotted(table),
    ::slotted(tbx-console) {
      overflow-x: auto;
    }
  `,Lt([U({type:String,reflect:!0})],vh.prototype,"title",2),Lt([U({type:String,reflect:!0})],vh.prototype,"route",2),Lt([U({type:String,reflect:!0})],vh.prototype,"icon",2),vh=Lt([mn("tbx-page")],vh);var eie=(e,t,r)=>{let i=new Map;for(let n=t;n<=r;n++)i.set(e[n],n);return i},tie=jn(class extends yo{constructor(e){if(super(e),e.type!==Vi.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,r){let i;r===void 0?r=t:t!==void 0&&(i=t);let n=[],o=[],s=0;for(let a of e)n[s]=i?i(a,s):s,o[s]=r(a,s),s++;return{values:o,keys:n}}render(e,t,r){return this.dt(e,t,r).values}update(e,[t,r,i]){let n=cL(e),{values:o,keys:s}=this.dt(t,r,i);if(!Array.isArray(n))return this.ut=s,o;let a=this.ut??(this.ut=[]),l=[],u,c,f=0,h=n.length-1,p=0,d=o.length-1;for(;f<=h&&p<=d;)if(n[f]===null)f++;else if(n[h]===null)h--;else if(a[f]===s[p])l[p]=Uc(n[f],o[p]),f++,p++;else if(a[h]===s[d])l[d]=Uc(n[h],o[d]),h--,d--;else if(a[f]===s[d])l[d]=Uc(n[f],o[d]),D0(e,l[d+1],n[f]),f++,d--;else if(a[h]===s[p])l[p]=Uc(n[h],o[p]),D0(e,n[f],n[h]),h--,p++;else if(u===void 0&&(u=eie(s,p,d),c=eie(a,f,h)),u.has(a[f]))if(u.has(a[h])){let m=c.get(s[p]),g=m!==void 0?n[m]:null;if(g===null){let v=D0(e,n[f]);Uc(v,o[p]),l[p]=v}else l[p]=Uc(g,o[p]),D0(e,n[f],g),n[m]=null;p++}else sx(n[h]),h--;else sx(n[f]),f++;for(;p<=d;){let m=D0(e,l[d+1]);Uc(m,o[p]),l[p++]=m}for(;f<=h;){let m=n[f++];m!==null&&sx(m)}return this.ut=s,ox(e,l),ti}});Un.define("sl-icon-button");var rie=Ie`
  :host {
    display: block;
    outline: 0;
    z-index: 0;
  }

  :host(:focus) {
    outline: none;
  }

  slot:not([name])::slotted(sl-icon) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .tree-item {
    position: relative;
    display: flex;
    align-items: stretch;
    flex-direction: column;
    color: var(--sl-color-neutral-700);
    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;
  }

  .tree-item__checkbox {
    pointer-events: none;
  }

  .tree-item__expand-button,
  .tree-item__checkbox,
  .tree-item__label {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-dense);
    letter-spacing: var(--sl-letter-spacing-normal);
  }

  .tree-item__checkbox::part(base) {
    display: flex;
    align-items: center;
  }

  .tree-item__indentation {
    display: block;
    width: 1em;
    flex-shrink: 0;
  }

  .tree-item__expand-button {
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: content-box;
    color: var(--sl-color-neutral-500);
    padding: var(--sl-spacing-x-small);
    width: 1rem;
    height: 1rem;
    flex-shrink: 0;
    cursor: pointer;
  }

  .tree-item__expand-button {
    transition: var(--sl-transition-medium) rotate ease;
  }

  .tree-item--expanded .tree-item__expand-button {
    rotate: 90deg;
  }

  .tree-item--expanded.tree-item--rtl .tree-item__expand-button {
    rotate: -90deg;
  }

  .tree-item--expanded slot[name='expand-icon'],
  .tree-item:not(.tree-item--expanded) slot[name='collapse-icon'] {
    display: none;
  }

  .tree-item:not(.tree-item--has-expand-button) .tree-item__expand-icon-slot {
    display: none;
  }

  .tree-item__expand-button--visible {
    cursor: pointer;
  }

  .tree-item__item {
    display: flex;
    align-items: center;
    border-inline-start: solid 3px transparent;
  }

  .tree-item--disabled .tree-item__item {
    opacity: 0.5;
    outline: none;
    cursor: not-allowed;
  }

  :host(:focus-visible) .tree-item__item {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
    z-index: 2;
  }

  :host(:not([aria-disabled='true'])) .tree-item--selected .tree-item__item {
    background-color: var(--sl-color-neutral-100);
    border-inline-start-color: var(--sl-color-primary-600);
  }

  :host(:not([aria-disabled='true'])) .tree-item__expand-button {
    color: var(--sl-color-neutral-600);
  }

  .tree-item__label {
    display: flex;
    align-items: center;
    transition: var(--sl-transition-fast) color;
  }

  .tree-item__children {
    display: block;
    font-size: calc(1em + var(--indent-size, var(--sl-spacing-medium)));
  }

  /* Indentation lines */
  .tree-item__children {
    position: relative;
  }

  .tree-item__children::before {
    content: '';
    position: absolute;
    top: var(--indent-guide-offset);
    bottom: var(--indent-guide-offset);
    left: calc(1em - (var(--indent-guide-width) / 2) - 1px);
    border-inline-end: var(--indent-guide-width) var(--indent-guide-style) var(--indent-guide-color);
    z-index: 1;
  }

  .tree-item--rtl .tree-item__children::before {
    left: auto;
    right: 1em;
  }

  @media (forced-colors: active) {
    :host(:not([aria-disabled='true'])) .tree-item--selected .tree-item__item {
      outline: dashed 1px SelectedItem;
    }
  }
`;function b$(e,t,r){return e?t(e):r?.(e)}var Vr=class y$ extends Ge{constructor(){super(...arguments),this.localize=new Jt(this),this.indeterminate=!1,this.isLeaf=!1,this.loading=!1,this.selectable=!1,this.expanded=!1,this.selected=!1,this.disabled=!1,this.lazy=!1}static isTreeItem(t){return t instanceof Element&&t.getAttribute("role")==="treeitem"}connectedCallback(){super.connectedCallback(),this.setAttribute("role","treeitem"),this.setAttribute("tabindex","-1"),this.isNestedItem()&&(this.slot="children")}firstUpdated(){this.childrenContainer.hidden=!this.expanded,this.childrenContainer.style.height=this.expanded?"auto":"0",this.isLeaf=!this.lazy&&this.getChildrenItems().length===0,this.handleExpandedChange()}async animateCollapse(){this.emit("sl-collapse"),await Ac(this.childrenContainer);let{keyframes:t,options:r}=kc(this,"tree-item.collapse",{dir:this.localize.dir()});await Ec(this.childrenContainer,uO(t,this.childrenContainer.scrollHeight),r),this.childrenContainer.hidden=!0,this.emit("sl-after-collapse")}isNestedItem(){let t=this.parentElement;return!!t&&y$.isTreeItem(t)}handleChildrenSlotChange(){this.loading=!1,this.isLeaf=!this.lazy&&this.getChildrenItems().length===0}willUpdate(t){t.has("selected")&&!t.has("indeterminate")&&(this.indeterminate=!1)}async animateExpand(){this.emit("sl-expand"),await Ac(this.childrenContainer),this.childrenContainer.hidden=!1;let{keyframes:t,options:r}=kc(this,"tree-item.expand",{dir:this.localize.dir()});await Ec(this.childrenContainer,uO(t,this.childrenContainer.scrollHeight),r),this.childrenContainer.style.height="auto",this.emit("sl-after-expand")}handleLoadingChange(){this.setAttribute("aria-busy",this.loading?"true":"false"),this.loading||this.animateExpand()}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleSelectedChange(){this.setAttribute("aria-selected",this.selected?"true":"false")}handleExpandedChange(){this.isLeaf?this.removeAttribute("aria-expanded"):this.setAttribute("aria-expanded",this.expanded?"true":"false")}handleExpandAnimation(){this.expanded?this.lazy?(this.loading=!0,this.emit("sl-lazy-load")):this.animateExpand():this.animateCollapse()}handleLazyChange(){this.emit("sl-lazy-change")}getChildrenItems({includeDisabled:t=!0}={}){return this.childrenSlot?[...this.childrenSlot.assignedElements({flatten:!0})].filter(r=>y$.isTreeItem(r)&&(t||!r.disabled)):[]}render(){let t=this.localize.dir()==="rtl",r=!this.loading&&(!this.isLeaf||this.lazy);return Y`
      <div
        part="base"
        class="${Qe({"tree-item":!0,"tree-item--expanded":this.expanded,"tree-item--selected":this.selected,"tree-item--disabled":this.disabled,"tree-item--leaf":this.isLeaf,"tree-item--has-expand-button":r,"tree-item--rtl":this.localize.dir()==="rtl"})}"
      >
        <div
          class="tree-item__item"
          part="
            item
            ${this.disabled?"item--disabled":""}
            ${this.expanded?"item--expanded":""}
            ${this.indeterminate?"item--indeterminate":""}
            ${this.selected?"item--selected":""}
          "
        >
          <div class="tree-item__indentation" part="indentation"></div>

          <div
            part="expand-button"
            class=${Qe({"tree-item__expand-button":!0,"tree-item__expand-button--visible":r})}
            aria-hidden="true"
          >
            ${b$(this.loading,()=>Y` <sl-spinner part="spinner" exportparts="base:spinner__base"></sl-spinner> `)}
            <slot class="tree-item__expand-icon-slot" name="expand-icon">
              <sl-icon library="system" name=${t?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
            <slot class="tree-item__expand-icon-slot" name="collapse-icon">
              <sl-icon library="system" name=${t?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
          </div>

          ${b$(this.selectable,()=>Y`
              <sl-checkbox
                part="checkbox"
                exportparts="
                    base:checkbox__base,
                    control:checkbox__control,
                    control--checked:checkbox__control--checked,
                    control--indeterminate:checkbox__control--indeterminate,
                    checked-icon:checkbox__checked-icon,
                    indeterminate-icon:checkbox__indeterminate-icon,
                    label:checkbox__label
                  "
                class="tree-item__checkbox"
                ?disabled="${this.disabled}"
                ?checked="${ms(this.selected)}"
                ?indeterminate="${this.indeterminate}"
                tabindex="-1"
              ></sl-checkbox>
            `)}

          <slot class="tree-item__label" part="label"></slot>
        </div>

        <div class="tree-item__children" part="children" role="group">
          <slot name="children" @slotchange="${this.handleChildrenSlotChange}"></slot>
        </div>
      </div>
    `}};Vr.styles=[et,rie];Vr.dependencies={"sl-checkbox":Qr,"sl-icon":Pt,"sl-spinner":y2};F([Le()],Vr.prototype,"indeterminate",2);F([Le()],Vr.prototype,"isLeaf",2);F([Le()],Vr.prototype,"loading",2);F([Le()],Vr.prototype,"selectable",2);F([U({type:Boolean,reflect:!0})],Vr.prototype,"expanded",2);F([U({type:Boolean,reflect:!0})],Vr.prototype,"selected",2);F([U({type:Boolean,reflect:!0})],Vr.prototype,"disabled",2);F([U({type:Boolean,reflect:!0})],Vr.prototype,"lazy",2);F([Ne("slot:not([name])")],Vr.prototype,"defaultSlot",2);F([Ne("slot[name=children]")],Vr.prototype,"childrenSlot",2);F([Ne(".tree-item__item")],Vr.prototype,"itemElement",2);F([Ne(".tree-item__children")],Vr.prototype,"childrenContainer",2);F([Ne(".tree-item__expand-button slot")],Vr.prototype,"expandButtonSlot",2);F([je("loading",{waitUntilFirstUpdate:!0})],Vr.prototype,"handleLoadingChange",1);F([je("disabled")],Vr.prototype,"handleDisabledChange",1);F([je("selected")],Vr.prototype,"handleSelectedChange",1);F([je("expanded",{waitUntilFirstUpdate:!0})],Vr.prototype,"handleExpandedChange",1);F([je("expanded",{waitUntilFirstUpdate:!0})],Vr.prototype,"handleExpandAnimation",1);F([je("lazy",{waitUntilFirstUpdate:!0})],Vr.prototype,"handleLazyChange",1);var k0=Vr;Cc("tree-item.expand",{keyframes:[{height:"0",opacity:"0",overflow:"hidden"},{height:"auto",opacity:"1",overflow:"hidden"}],options:{duration:250,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)"}});Cc("tree-item.collapse",{keyframes:[{height:"auto",opacity:"1",overflow:"hidden"},{height:"0",opacity:"0",overflow:"hidden"}],options:{duration:200,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)"}});var iie=Ie`
  :host {
    /*
     * These are actually used by tree item, but we define them here so they can more easily be set and all tree items
     * stay consistent.
     */
    --indent-guide-color: var(--sl-color-neutral-200);
    --indent-guide-offset: 0;
    --indent-guide-style: solid;
    --indent-guide-width: 0;
    --indent-size: var(--sl-spacing-large);

    display: block;

    /*
     * Tree item indentation uses the "em" unit to increment its width on each level, so setting the font size to zero
     * here removes the indentation for all the nodes on the first level.
     */
    font-size: 0;
  }
`;function nie(e,t=!1){function r(o){let s=o.getChildrenItems({includeDisabled:!1});if(s.length){let a=s.every(u=>u.selected),l=s.every(u=>!u.selected&&!u.indeterminate);o.selected=a,o.indeterminate=!a&&!l}}function i(o){let s=o.parentElement;k0.isTreeItem(s)&&(r(s),i(s))}function n(o){for(let s of o.getChildrenItems())s.selected=t?o.selected||s.selected:!s.disabled&&o.selected,n(s);t&&r(o)}n(e),i(e)}var bh=class extends Ge{constructor(){super(),this.selection="single",this.clickTarget=null,this.localize=new Jt(this),this.initTreeItem=e=>{e.selectable=this.selection==="multiple",["expand","collapse"].filter(t=>!!this.querySelector(`[slot="${t}-icon"]`)).forEach(t=>{let r=e.querySelector(`[slot="${t}-icon"]`),i=this.getExpandButtonIcon(t);i&&(r===null?e.append(i):r.hasAttribute("data-default")&&r.replaceWith(i))})},this.handleTreeChanged=e=>{for(let t of e){let r=[...t.addedNodes].filter(k0.isTreeItem),i=[...t.removedNodes].filter(k0.isTreeItem);r.forEach(this.initTreeItem),this.lastFocusedItem&&i.includes(this.lastFocusedItem)&&(this.lastFocusedItem=null)}},this.handleFocusOut=e=>{let t=e.relatedTarget;(!t||!this.contains(t))&&(this.tabIndex=0)},this.handleFocusIn=e=>{let t=e.target;e.target===this&&this.focusItem(this.lastFocusedItem||this.getAllTreeItems()[0]),k0.isTreeItem(t)&&!t.disabled&&(this.lastFocusedItem&&(this.lastFocusedItem.tabIndex=-1),this.lastFocusedItem=t,this.tabIndex=-1,t.tabIndex=0)},this.addEventListener("focusin",this.handleFocusIn),this.addEventListener("focusout",this.handleFocusOut),this.addEventListener("sl-lazy-change",this.handleSlotChange)}async connectedCallback(){super.connectedCallback(),this.setAttribute("role","tree"),this.setAttribute("tabindex","0"),await this.updateComplete,this.mutationObserver=new MutationObserver(this.handleTreeChanged),this.mutationObserver.observe(this,{childList:!0,subtree:!0})}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}getExpandButtonIcon(e){let r=(e==="expand"?this.expandedIconSlot:this.collapsedIconSlot).assignedElements({flatten:!0})[0];if(r){let i=r.cloneNode(!0);return[i,...i.querySelectorAll("[id]")].forEach(n=>n.removeAttribute("id")),i.setAttribute("data-default",""),i.slot=`${e}-icon`,i}return null}selectItem(e){let t=[...this.selectedItems];if(this.selection==="multiple")e.selected=!e.selected,e.lazy&&(e.expanded=!0),nie(e);else if(this.selection==="single"||e.isLeaf){let i=this.getAllTreeItems();for(let n of i)n.selected=n===e}else this.selection==="leaf"&&(e.expanded=!e.expanded);let r=this.selectedItems;(t.length!==r.length||r.some(i=>!t.includes(i)))&&Promise.all(r.map(i=>i.updateComplete)).then(()=>{this.emit("sl-selection-change",{detail:{selection:r}})})}getAllTreeItems(){return[...this.querySelectorAll("sl-tree-item")]}focusItem(e){e?.focus()}handleKeyDown(e){if(!["ArrowDown","ArrowUp","ArrowRight","ArrowLeft","Home","End","Enter"," "].includes(e.key)||e.composedPath().some(n=>{var o;return["input","textarea"].includes((o=n?.tagName)==null?void 0:o.toLowerCase())}))return;let t=this.getFocusableItems(),r=this.localize.dir()==="ltr",i=this.localize.dir()==="rtl";if(t.length>0){e.preventDefault();let n=t.findIndex(l=>l.matches(":focus")),o=t[n],s=l=>{let u=t[dn(l,0,t.length-1)];this.focusItem(u)},a=l=>{o.expanded=l};e.key==="ArrowDown"?s(n+1):e.key==="ArrowUp"?s(n-1):r&&e.key==="ArrowRight"||i&&e.key==="ArrowLeft"?!o||o.disabled||o.expanded||o.isLeaf&&!o.lazy?s(n+1):a(!0):r&&e.key==="ArrowLeft"||i&&e.key==="ArrowRight"?!o||o.disabled||o.isLeaf||!o.expanded?s(n-1):a(!1):e.key==="Home"?s(0):e.key==="End"?s(t.length-1):(e.key==="Enter"||e.key===" ")&&(o.disabled||this.selectItem(o))}}handleClick(e){let t=e.target,r=t.closest("sl-tree-item"),i=e.composedPath().some(n=>{var o;return(o=n?.classList)==null?void 0:o.contains("tree-item__expand-button")});!r||r.disabled||t!==this.clickTarget||(i?r.expanded=!r.expanded:this.selectItem(r))}handleMouseDown(e){this.clickTarget=e.target}handleSlotChange(){this.getAllTreeItems().forEach(this.initTreeItem)}async handleSelectionChange(){let e=this.selection==="multiple",t=this.getAllTreeItems();this.setAttribute("aria-multiselectable",e?"true":"false");for(let r of t)r.selectable=e;e&&(await this.updateComplete,[...this.querySelectorAll(":scope > sl-tree-item")].forEach(r=>nie(r,!0)))}get selectedItems(){let e=this.getAllTreeItems(),t=r=>r.selected;return e.filter(t)}getFocusableItems(){let e=this.getAllTreeItems(),t=new Set;return e.filter(r=>{var i;if(r.disabled)return!1;let n=(i=r.parentElement)==null?void 0:i.closest("[role=treeitem]");return n&&(!n.expanded||n.loading||t.has(n))&&t.add(r),!t.has(r)})}render(){return Y`
      <div
        part="base"
        class="tree"
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mousedown=${this.handleMouseDown}
      >
        <slot @slotchange=${this.handleSlotChange}></slot>
        <span hidden aria-hidden="true"><slot name="expand-icon"></slot></span>
        <span hidden aria-hidden="true"><slot name="collapse-icon"></slot></span>
      </div>
    `}};bh.styles=[et,iie];F([Ne("slot:not([name])")],bh.prototype,"defaultSlot",2);F([Ne("slot[name=expand-icon]")],bh.prototype,"expandedIconSlot",2);F([Ne("slot[name=collapse-icon]")],bh.prototype,"collapsedIconSlot",2);F([U()],bh.prototype,"selection",2);F([je("selection")],bh.prototype,"handleSelectionChange",1);bh.define("sl-tree");k0.define("sl-tree-item");var oie="tbx-router:panel-open",sie="tbx-router:selected-route",aie="(max-width: 768px)";function sl(){return typeof window<"u"&&typeof document<"u"}function b7(e){if(e==null||e.trim()==="")return"/";let t=e.trim();return t.startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.replace(/\/+/g,"/"),t=t.replace(/\/+$/,""),t===""&&(t="/")),t}function cie(e){return e==="/"?[]:e.replace(/^\//,"").split("/")}function NDe(e){let t=cie(e);return t.length<=1?null:`/${t.slice(0,-1).join("/")}`}function BDe(e){let t=cie(e);if(t.length===0)return[];let r=[];for(let i=1;i<t.length;i++)r.push(`/${t.slice(0,i).join("/")}`);return r}function lie(e){return e===""?"/":(e.startsWith("/")||(e=`/${e}`),e.length>1&&e.endsWith("/")&&(e=e.replace(/\/+/g,"/"),e=e.replace(/\/+$/,""),e===""&&(e="/")),e)}function x$(e){return e===""||e==="/"?"":e.replace(/\/+$/,"").replace(/\/+/g,"/")}function uie(e,t){let r=x$(e),i=b7(t);return i==="/"?r===""?"/":r:r===""?i:`${r}${i}`}function zDe(e,t){let r=b7(t);if(r==="/")return e;if(!e.endsWith(r))return null;let i=e.length-r.length;if(i>0&&e[i-1]!=="/")return null;let n=e.slice(0,i);return n===""?"":n.replace(/\/+$/,"")}function HDe(e){let t=new Map;for(let i of e)t.set(i.route,{route:i.route,title:i.title,icon:i.icon,children:[]});let r=[];for(let i of e){let n=t.get(i.route);if(n==null)continue;let o=i.parentRoute;o!=null&&t.has(o)?t.get(o)?.children.push(n):r.push(n)}return r}function fie(e,t,r=[]){for(let i of e){let n=[...r,i];if(i.route===t)return n;if(i.children.length>0){let o=fie(i.children,t,n);if(o!=null)return o}}return null}var fu=class extends sr{constructor(){super(...arguments);this.title="ToolboxUI";this.panelOpen=!0;this.activeRoute=null;this.pages=[];this.storedPanelOpen=!0;this.skipNextPersist=!1;this.narrowQuery=null;this.narrowQueryListener=null;this.layoutObserver=null;this.layoutScrollHandler=null;this.isInitialised=!1;this.storedRoutePreference=null;this.basePath="";this.assetBasePath="";this.expandedRouteSet=new Set;this.handlePopState=()=>{this.syncRouteWithLocation(),this.updatePageVisibility()};this.handleTreeExpand=r=>{let i=r.target;if(i==null||i.tagName!=="SL-TREE-ITEM")return;let n=i.dataset.route;n!=null&&(this.expandedRouteSet.has(n)||(this.expandedRouteSet.add(n),this.requestUpdate()))};this.handleTreeCollapse=r=>{let i=r.target;if(i==null||i.tagName!=="SL-TREE-ITEM")return;let n=i.dataset.route;n!=null&&this.expandedRouteSet.delete(n)&&this.requestUpdate()};this.handleTreeSelection=r=>{let[i]=r.detail.selection;if(i==null)return;let n=i.dataset.route;n==null||n===this.activeRoute||this.setActiveRoute(n)};this.handlePanelToggle=()=>{this.panelOpen=!this.panelOpen,this.storedPanelOpen=this.panelOpen,this.persistState()};this.handleHomeButtonClick=()=>{this.hasRoute("/")&&this.activeRoute!=="/"&&this.setActiveRoute("/")};this.handleHomeLinkClick=r=>{r.defaultPrevented||r.button!==0||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey||(r.preventDefault(),this.activeRoute!=="/"&&this.setActiveRoute("/"))}}connectedCallback(){if(super.connectedCallback(),sl()&&this.assetBasePath===""){let r=this.detectAssetBasePath();r!==""&&(this.assetBasePath=r,this.basePath===""&&(this.basePath=r))}this.setupViewportWatcher(),this.restoreState(),sl()&&window.addEventListener("popstate",this.handlePopState)}disconnectedCallback(){super.disconnectedCallback(),this.teardownViewportWatcher(),this.layoutObserver!=null&&(this.layoutObserver.disconnect(),this.layoutObserver=null),this.layoutScrollHandler!=null&&(window.removeEventListener("scroll",this.layoutScrollHandler),this.layoutScrollHandler=null),sl()&&window.removeEventListener("popstate",this.handlePopState)}firstUpdated(){this.isInitialised=!0,this.observeLayoutMetrics(),this.refreshPages(),this.syncDocumentTitle()}updated(r){r.has("title")&&this.syncDocumentTitle(),(r.has("activeRoute")||r.has("panelOpen"))&&this.persistState()}syncDocumentTitle(){sl()&&(document.title=this.title)}restoreState(){if(sl()){try{let r=window.localStorage.getItem(oie),i;r==="true"||r==="false"?i=r==="true":i=!window.matchMedia(aie).matches,this.storedPanelOpen=i,this.panelOpen=i,this.storedRoutePreference=window.localStorage.getItem(sie)}catch{}this.isNarrowViewport()&&this.forceCollapseForMobile()}}persistState(){if(!(!sl()||!this.isInitialised)){if(this.skipNextPersist){this.skipNextPersist=!1;return}try{window.localStorage.setItem(oie,String(this.storedPanelOpen)),this.activeRoute!=null&&window.localStorage.setItem(sie,this.activeRoute)}catch{}}}setupViewportWatcher(){if(!sl())return;let r=window.matchMedia(aie);this.narrowQuery=r;let i=n=>{this.handleViewportChange(n.matches)};this.narrowQueryListener=i,typeof r.addEventListener=="function"?r.addEventListener("change",i):typeof r.addListener=="function"&&r.addListener(i)}teardownViewportWatcher(){let r=this.narrowQuery,i=this.narrowQueryListener;r!=null&&i!=null&&(typeof r.removeEventListener=="function"?r.removeEventListener("change",i):typeof r.removeListener=="function"&&r.removeListener(i)),this.narrowQuery=null,this.narrowQueryListener=null}observeLayoutMetrics(){if(!sl())return;let r=this.shadowRoot?.querySelector(".menu-toolbar"),i=this.shadowRoot?.querySelector("header.page-header"),n=()=>{let s=r?.getBoundingClientRect()??null,a=i?.getBoundingClientRect()??null,l=s?.height??0,u=a?.height??0,c=s?.bottom??a?.bottom??0;this.style.setProperty("--page-toolbar-height",`${l}px`),this.style.setProperty("--page-header-height",`${u}px`),this.style.setProperty("--page-overlay-top-offset",`${Math.max(0,c)}px`)};n();let o=()=>{n()};if(this.layoutScrollHandler!=null&&window.removeEventListener("scroll",this.layoutScrollHandler),window.addEventListener("scroll",o,{passive:!0}),this.layoutScrollHandler=o,typeof ResizeObserver=="function"){this.layoutObserver==null?this.layoutObserver=new ResizeObserver(()=>{n()}):this.layoutObserver.disconnect();let s=[r,i].filter(a=>a!=null);for(let a of s)this.layoutObserver.observe(a)}}detectAssetBasePath(){if(!sl())return"";let r=['script[type="module"][src]','link[rel="modulepreload"][href]','link[rel="stylesheet"][href]'];for(let i of r){let n=document.querySelector(i);if(n==null)continue;let o=n instanceof HTMLScriptElement?n.getAttribute("src"):n.getAttribute("href");if(!(o==null||o.trim()===""))try{let s=new URL(o,window.location.origin),a=s.pathname.indexOf("/assets/");if(a>=0){let l=s.pathname.slice(0,a);return x$(l)}}catch{}}return""}refreshPages(){let r=this.contentSlot;if(r==null)return;let i=r.assignedElements({flatten:!0}),n=[],o=new Set;for(let a of i){if(!(a instanceof HTMLElement)||a.tagName!=="TBX-PAGE")continue;let l=a,u=b7(l.route),c=l.title.trim()!==""?l.title.trim():u,f=l.icon.trim(),h=f!==""?f:null;o.has(u)?(console.warn(`Duplicate tbx-page route detected: ${u}. Only the first occurrence will be used.`),l.hidden=!0):(l.route!==u&&(l.route=u),n.push({element:l,route:u,title:c,icon:h,parentRoute:NDe(u)}),o.add(u))}let s=new Set(n.map(a=>a.route));this.expandedRouteSet=new Set([...this.expandedRouteSet].filter(a=>s.has(a))),this.pages=n,this.syncRouteWithLocation(this.activeRoute==null),this.updatePageVisibility()}resolveRouteFromPath(r){let i=lie(r),n=[...this.pages.map(a=>a.route)].sort((a,l)=>l.length-a.length),o=this.assetBasePath;for(let a of n){let l=zDe(i,a);if(l==null)continue;let u=x$(l);if(a==="/"){let f=o!==""?o:this.basePath;if(f===""){if(u!=="")continue}else if(u!==f)continue}let c=uie(u,a);if(lie(c)===i)return{basePath:u,route:a}}return{basePath:o!==""?o:this.basePath,route:null}}syncRouteWithLocation(r=!1){if(!sl())return;if(this.pages.length===0){this.activeRoute=null;return}let{pathname:i}=window.location,{basePath:n,route:o}=this.resolveRouteFromPath(i);this.basePath=n;let s=o;(s==null||!this.hasRoute(s))&&(s=(r&&this.storedRoutePreference!=null&&this.hasRoute(this.storedRoutePreference)?this.storedRoutePreference:null)??this.pages[0]?.route??null,s!=null&&this.updateHistory(s,!0)),s!=null&&this.setActiveRoute(s,{skipHistory:!0})}hasRoute(r){return this.pages.some(i=>i.route===r)}setActiveRoute(r,i={}){let n=b7(r),{replaceHistory:o=!1,skipHistory:s=!1}=i;if(!this.hasRoute(n))return;let a=this.activeRoute===n;if(this.ensureRouteAncestorsExpanded(n),a){s||this.updateHistory(n,o);return}this.activeRoute=n,this.updatePageVisibility(),s||this.updateHistory(n,o),this.isNarrowViewport()&&this.forceCollapseForMobile()}ensureRouteAncestorsExpanded(r){let i=[...BDe(r),r],n=!1;for(let o of i)this.hasRoute(o)&&(this.expandedRouteSet.has(o)||(this.expandedRouteSet.add(o),n=!0));n&&this.requestUpdate()}updateHistory(r,i=!1){if(!sl())return;let n=uie(this.basePath,r),o=`${window.location.search??""}${window.location.hash??""}`,s=`${n}${o}`;`${window.location.pathname}${window.location.search}${window.location.hash}`!==s&&(i?window.history.replaceState({},"",s):window.history.pushState({},"",s))}updatePageVisibility(){let r=this.activeRoute;for(let i of this.pages){let n=i.route===r;i.element.hidden=!n,i.element.toggleAttribute("inert",!n),i.element.toggleAttribute("data-active",n)}}handleViewportChange(r){r?this.forceCollapseForMobile():this.panelOpen!==this.storedPanelOpen&&(this.panelOpen=this.storedPanelOpen)}forceCollapseForMobile(){this.panelOpen&&(this.skipNextPersist=!0,this.panelOpen=!1)}isNarrowViewport(){return this.narrowQuery?.matches??!1}get routeTree(){return HDe(this.pages)}get activePath(){return this.activeRoute==null?[]:fie(this.routeTree,this.activeRoute)??[]}renderTree(r){return r.length===0?Y``:Y`${tie(r,i=>i.route,i=>{let n=this.expandedRouteSet.has(i.route),o=i.route===this.activeRoute,s=i.children.length>0,a=i.icon;return Y`
        <sl-tree-item
          part="tree-item"
          data-route=${i.route}
          ?expanded=${n}
          ?selected=${o}
        >
          ${a!=null?Y`<sl-icon name=${a}></sl-icon>`:at}
          ${i.title}
          ${s?this.renderTree(i.children):at}
        </sl-tree-item>
      `})}`}handleBreadcrumbClick(r){r!==this.activeRoute&&this.setActiveRoute(r)}renderBreadcrumbs(){let r=this.activePath;return r.length===0?Y`<sl-breadcrumb></sl-breadcrumb>`:Y`
      <sl-breadcrumb>
        ${r.map((i,n)=>{let o=n===r.length-1;return Y`
            <sl-breadcrumb-item
              aria-current=${o?"page":at}
              ?disabled=${o}
              @click=${o?void 0:()=>this.handleBreadcrumbClick(i.route)}
            >
              ${i.title}
            </sl-breadcrumb-item>
          `})}
      </sl-breadcrumb>
    `}render(){let r=this.panelOpen?"content-shell panel-open":"content-shell panel-collapsed",i=this.panelOpen?Y`
          <nav
            class="tree-panel"
            aria-label="Site navigation"
          >
            <div class="tree-scroll-container">
              <sl-tree
                class="tree-with-icons"
                selection="single"
                tabindex="0"
                @sl-selection-change=${this.handleTreeSelection}
                @sl-expand=${this.handleTreeExpand}
                @sl-collapse=${this.handleTreeCollapse}
              >
                ${this.renderTree(this.routeTree)}
              </sl-tree>
            </div>
          </nav>
        `:at;return Y`
      <div class="page-shell">
        <header class="page-header">
          <h1>
            <a href="/" @click=${this.handleHomeLinkClick}>${this.title}</a>
          </h1>
          <tbx-theme-toggle></tbx-theme-toggle>
        </header>

        <div class="menu-toolbar">
          <sl-icon-button
            name="list"
            label=${this.panelOpen?"Hide navigation menu":"Show navigation menu"}
            @click=${this.handlePanelToggle}
          ></sl-icon-button>
          <sl-icon-button
            name="house-fill"
            label="Go to home"
            @click=${this.handleHomeButtonClick}
          ></sl-icon-button>
          ${this.renderBreadcrumbs()}
        </div>

        <div class=${r}>
          ${i}

          <div class="content-panel">
            <slot @slotchange=${this.refreshPages}></slot>
          </div>
        </div>
      </div>
    `}};fu.styles=Ie`
    :host {
      --page-toolbar-height: 0px;
      --page-shell-padding-inline: clamp(0.75rem, 2vw, 1.5rem);
      --page-shell-padding-block: clamp(0.85rem, 2vw, 1.5rem);
      --page-surface: var(--sl-color-neutral-0);
      --tree-panel-width: clamp(280px, 25%, 320px);
      display: flex;
      flex-direction: column;
      box-sizing: border-box;
      width: 100%;
      min-height: 100vh;
      min-height: 100dvh;
      background-color: var(--page-surface);
    }

    :host-context(.sl-theme-dark) {
      --page-surface: var(--sl-color-neutral-950, var(--sl-color-neutral-900));
    }

    @media (max-width: 640px) {
      :host {
        --page-shell-padding-inline: 0rem;
      }
    }

    .page-shell {
      display: flex;
      flex-direction: column;
      gap: 0;
      padding: var(--page-shell-padding-block) var(--page-shell-padding-inline) 0;
      background-color: var(--page-surface);
      flex: 1 1 auto;
      min-height: 0;
    }

    header.page-header {
      display: flex;
      align-items: center;
      gap: 0.65rem;
      flex-wrap: nowrap;
      margin-inline: calc(-1 * var(--page-shell-padding-inline));
      padding: 0 max(var(--page-shell-padding-inline), env(safe-area-inset-right)) clamp(0.4rem, 1vw, 0.6rem) max(var(--page-shell-padding-inline), env(safe-area-inset-left));
    }

    header.page-header h1 {
      font-size: 1.75rem;
      margin: 0;
      flex: 1 1 auto;
      min-width: 0;
    }

    header.page-header h1 a {
      color: inherit;
      text-decoration: none;
    }

    header.page-header h1 a:focus-visible {
      text-decoration: underline;
    }

    header.page-header tbx-theme-toggle {
      margin-left: auto;
      flex: 0 0 auto;
    }

    .menu-toolbar {
      position: sticky;
      top: 0;
      z-index: 20;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
      padding-block: 0.35rem;
      margin-inline: calc(-1 * var(--page-shell-padding-inline));
      padding-inline: max(var(--page-shell-padding-inline), env(safe-area-inset-left)) max(var(--page-shell-padding-inline), env(safe-area-inset-right));
      background-color: var(--page-toolbar-background, var(--page-surface));
      border-bottom: 1px solid var(--page-divider-color, var(--sl-color-neutral-200));
    }

    .menu-toolbar::after {
      content: '';
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    :host-context(.sl-theme-dark) .menu-toolbar {
      --page-toolbar-background: var(--sl-color-neutral-900);
      --page-divider-color: var(--sl-color-neutral-800);
    }

    .menu-toolbar sl-breadcrumb {
      flex: 1 1 auto;
      min-width: 0;
    }

    sl-icon-button::part(base) {
      font-size: 1.25rem;
    }

    .content-shell {
      width: 100%;
      flex: 1 1 auto;
      min-height: 0;
      margin-inline: calc(-1 * var(--page-shell-padding-inline));
      margin-bottom: 0;
      padding-bottom: 0;
      display: flex;
      align-items: stretch;
      gap: 0;
      background-color: var(--page-surface);
    }

    .content-shell.panel-open .content-panel {
      border-inline-start: 1px solid var(--page-divider-color, var(--sl-color-neutral-200));
    }

    .content-shell.panel-collapsed .content-panel {
      border-inline-start: none;
    }

    :host-context(.sl-theme-dark) .content-shell.panel-open .content-panel {
      border-inline-start-color: var(--sl-color-neutral-800);
    }

    nav.tree-panel {
      position: sticky;
      top: var(--page-toolbar-height, 0px);
      align-self: flex-start;
      display: block;
      flex: 0 0 var(--tree-panel-width);
      max-width: var(--tree-panel-width);
      min-width: var(--tree-panel-width);
      padding: 0;
      margin-bottom: var(--page-shell-padding-block);
      box-sizing: border-box;
      background-color: var(--page-surface);
    }

    nav.tree-panel .tree-scroll-container {
      max-height: calc(100vh - var(--page-toolbar-height, 0px) - var(--page-shell-padding-block));
      overflow: auto;
      padding: clamp(0.4rem, 1vw, 0.55rem) clamp(0.25rem, 0.8vw, 0.45rem) clamp(0.6rem, 1.2vw, 0.8rem) clamp(0.5rem, 1.2vw, 0.65rem);
      box-sizing: border-box;
    }

    nav.tree-panel sl-tree {
      min-height: 100%;
    }

    nav.tree-panel sl-tree.tree-with-icons sl-tree-item sl-icon {
      display: inline-flex;
      align-items: center;
      font-size: 1.05em;
      margin-inline-end: 0.5rem;
    }

    nav.tree-panel sl-tree::part(base) {
      background-color: transparent;
      padding: 0;
    }

    .content-panel {
      flex: 1 1 auto;
      min-height: 0;
      min-width: 0;
      padding: clamp(0.4rem, 1vw, 0.65rem) var(--page-shell-padding-inline) var(--page-shell-padding-block) var(--page-shell-padding-inline);
      box-sizing: border-box;
      overflow: auto;
      overflow-wrap: anywhere;
      word-break: break-word;
      background-color: var(--page-surface);
    }

    nav.tree-panel sl-tree-item::part(item) {
      border-radius: 4px;
    }

    nav.tree-panel sl-tree-item::part(label) {
      display: block;
      white-space: normal;
      overflow-wrap: anywhere;
      word-break: break-word;
    }

    ::slotted(*) {
      max-width: 100%;
      box-sizing: border-box;
    }

    @media (max-width: 768px) {
      :host {
        padding: 1rem;
        --tree-panel-width: clamp(240px, 80vw, 320px);
      }
      .content-shell {
        min-height: 50vh;
        position: relative;
      }
      header.page-header {
        gap: 0.75rem;
      }
      nav.tree-panel {
        flex: 0 0 var(--tree-panel-width);
        width: var(--tree-panel-width);
        max-width: none;
        min-width: 0;
        margin-bottom: 0;
        box-shadow: none;
      }
      .content-shell.panel-open nav.tree-panel {
        position: fixed;
        inset-inline-start: env(safe-area-inset-left);
        top: var(--page-overlay-top-offset, 0px);
        height: calc(100vh - var(--page-overlay-top-offset, 0px));
        z-index: 40;
        box-shadow: none;
        border-inline-end: 1px solid var(--page-divider-color, var(--sl-color-neutral-200));
      }
      :host-context(.sl-theme-dark) .content-shell.panel-open nav.tree-panel {
        border-inline-end-color: var(--sl-color-neutral-800);
        box-shadow: none;
      }
      .content-shell.panel-open .content-panel {
        border-inline-start: none;
      }
    }

    @media (max-width: 540px) {
      header.page-header {
        flex-wrap: wrap;
      }
      header.page-header tbx-theme-toggle {
        margin-left: 0;
      }
    }

    @media (max-width: 600px) {
      .menu-toolbar sl-breadcrumb-item:not(:last-of-type) {
        display: none;
      }

      .menu-toolbar sl-breadcrumb-item::part(separator) {
        display: none;
      }
    }
  `,Lt([U({type:String})],fu.prototype,"title",2),Lt([Le()],fu.prototype,"panelOpen",2),Lt([Le()],fu.prototype,"activeRoute",2),Lt([Le()],fu.prototype,"pages",2),Lt([Ne("slot")],fu.prototype,"contentSlot",2),fu=Lt([mn("tbx-router")],fu);Qg("https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/dist/");
/*! Bundled license information:

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
lit-html/lit-html.js:
lit-element/lit-element.js:
@lit/reactive-element/decorators/custom-element.js:
@lit/reactive-element/decorators/property.js:
@lit/reactive-element/decorators/state.js:
@lit/reactive-element/decorators/event-options.js:
@lit/reactive-element/decorators/base.js:
@lit/reactive-element/decorators/query.js:
@lit/reactive-element/decorators/query-all.js:
@lit/reactive-element/decorators/query-async.js:
@lit/reactive-element/decorators/query-assigned-nodes.js:
lit-html/directive.js:
lit-html/async-directive.js:
lit-html/directives/unsafe-html.js:
lit-html/directives/repeat.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
lit-html/directives/when.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
lit-html/directives/live.js:
lit-html/directives/ref.js:
lit-html/static.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/class-map.js:
lit-html/directives/if-defined.js:
lit-html/directives/style-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

signal-polyfill/dist/index.js:
  (**
   * @license
   * Copyright Google LLC All Rights Reserved.
   *
   * Use of this source code is governed by an MIT-style license that can be
   * found in the LICENSE file at https://angular.io/license
   *)
  (**
   * @license
   * Copyright 2024 Bloomberg Finance L.P.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@lit-labs/signals/lib/signal-watcher.js:
@lit-labs/signals/lib/watch.js:
@lit-labs/signals/lib/html-tag.js:
@lit-labs/signals/index.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

fast-json-patch/module/helpers.mjs:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2022 Joachim Wester
   * MIT licensed
   *)

fast-json-patch/module/duplex.mjs:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2021 Joachim Wester
   * MIT license
   *)
*/
